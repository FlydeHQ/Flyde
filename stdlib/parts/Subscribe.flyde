imports: {}
exports:
  - Subscribe
parts:
  Subscribe:
    id: Subscribe
    inputs:
      key:
        mode: required
        type: any
    outputs:
      val:
        type: any
    completionOutputs:
      - never
    fnCode: |-
      // magic here
      const token = PubSub.subscribe(inputs.key, (_, data) => {
          outputs.val.next(data);
      });

      adv.onCleanup(() => {
          log('Unsubscribing!');
          PubSub.unsubscribe(token);
      });
exposedFunctionality: []
