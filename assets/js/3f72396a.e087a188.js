(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6007],{8541:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cappedArrayDebounce=void 0;t.cappedArrayDebounce=function(e,t,n,r){void 0===r&&(r=500);var i=[],o=null,a=null;return{addItem:function(u){clearTimeout(o),i.push(u),a||(a=setTimeout((function(){e(i),clearTimeout(o),a=null}),r)),i.length>=n?(e(i),clearTimeout(a),a=null,i=[]):o=setTimeout((function(){e(i),clearTimeout(a),a=null,i=[]}),t)},flush:function(){i.length&&(e(i),i=[],clearTimeout(a))},pendingItems:function(){return i.length}}}},96615:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.dataShaper=t.DataShapeType=void 0,function(e){e[e.STRING=0]="STRING",e[e.NUMBER=1]="NUMBER",e[e.BOOLEAN=2]="BOOLEAN",e[e.ARRAY=3]="ARRAY",e[e.OBJECT=4]="OBJECT",e[e.NULL=5]="NULL",e[e.UNSUPPORTED=6]="UNSUPPORTED"}(n=t.DataShapeType||(t.DataShapeType={}));var r={string:n.STRING,number:n.NUMBER,boolean:n.BOOLEAN,object:n.OBJECT,array:n.ARRAY,null:n.NULL,symbol:n.UNSUPPORTED,undefined:n.UNSUPPORTED,function:n.UNSUPPORTED,bigint:n.UNSUPPORTED};t.dataShaper=function(e,n,i){void 0===n&&(n=5),void 0===i&&(i=5);var o,a,u=null===(o=e)?"null":typeof o;if("object"===u){if(Array.isArray(e))return n>1?e.filter((function(e,t){return t<i})).map((function(e){return(0,t.dataShaper)(e,n-1,i)})):r.array;if(n>1){var s={};for(var c in e)s[c]=(0,t.dataShaper)(e[c],n-1,i);return a=s,Object.keys(a).sort().reduce((function(e,t){return e[t]=a[t],e}),{})}return r.object}return r[u]}},40189:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.debugLogger=void 0;var i=(0,r(n(96292)).default)("flyde");t.debugLogger=function(e){return i.extend(e)}},89450:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fullInsIdPath=void 0,t.fullInsIdPath=function(e,t){if(!e)throw new Error("insId is not defined");return t?t+"."+e:e}},68132:function(e,t,n){"use strict";var r=n(68626).default,i=["pos"],o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hashFlow=t.hashPart=void 0;var a=o(n(61586)),u=n(24048),s=function(e){return(0,a.default)(e)};t.hashPart=function(e,t){var n;void 0===t&&(t=!0);var o={id:e.id,completionOutputs:e.completionOutputs,reactiveInputs:e.reactiveInputs,inputs:e.inputs,outputs:e.outputs};if((0,u.isVisualPart)(e)){var a=e.instances,c=e.connections,l=e.inputsPosition,d=e.outputsPosition,p=a.map((function(e){e.pos;return r(e,i)})),f=t?{}:{inputsPosition:l,outputsPosition:d},v=t?p:a;v.sort((function(e,t){return e.id.localeCompare(t.id)}));var m=[].concat(c);m.sort((function(e,t){var n=e.from.insId+"."+e.from.pinId,r=t.from.insId+"."+t.from.pinId;return n.localeCompare(r)}));var g=JSON.stringify(Object.assign({instancesToUse:v,conns:m},o,{maybeIoPos:f}));return s(g)}if((0,u.isInlineValuePart)(e)){var h=e.customViewCode,b=null!==(n=e.fnCode)&&void 0!==n?n:e.runFnRawCode,I=JSON.stringify(Object.assign({fnCode:b,customViewCode:h},o));return s(I)}throw new Error("Hashing code parts unsupported")};t.hashFlow=function(e){var n=e.part,r=e.imports,i=(0,t.hashPart)(n,!1),o=Object.entries(null!=r?r:{}).sort((function(e,t){var n=e[0],r=t[0];return n.localeCompare(r)})).map((function(e){return[e[0],e[1].sort()]})).reduce((function(e,t){var n,r=t[0],i=t[1];return Object.assign({},e,((n={})[r]=i,n))}),{}),a=JSON.stringify(o);return s(i+a)}},45821:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.DepGraph=void 0,i(n(69985),t),i(n(94919),t),i(n(40189),t),i(n(8541),t),i(n(94919),t),i(n(68132),t),i(n(67748),t),i(n(96615),t),i(n(89450),t),t.DepGraph=n(59280).DepGraph},69985:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.testDataCreator=void 0;t.testDataCreator=function(e){return function(t){void 0===t&&(t={});var n="function"==typeof e?e():e,r=t;return Object.assign({},n,r)}}},94919:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default;Object.defineProperty(t,"__esModule",{value:!0}),t.eventually=t.delay=t.noop=t.removeDupes=t.ensure=t.isOptionalType=t.callFnOrFnPromise=t.isPromise=t.isDefined=t.containsAll=t.shuffle=t.randomInts=t.repeat=t.pickRandom=t.randomPos=t.randomInt=t.pickSecond=t.pickFirst=t.fromEntries=t.entries=t.okeys=t.values=t.keys=t.filterOMap=t.mapOMap=t.middlePos=t.calcCenter=t.intersectRect=void 0;t.intersectRect=function(e,t){var n=e.x+e.w,r=t.x+t.w;return!(t.x>n||r<e.x||t.y>e.y+e.h||t.y+t.h<e.y)};t.calcCenter=function(e){var t=e.w,n=e.h;return{x:e.x+t/2,y:e.y+n/2}};t.middlePos=function(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}};t.mapOMap=function(e,n){return(0,t.entries)(e).map((function(e){var t=e[0],r=e[1];return[t,n(t,r)]})).reduce((function(e,t){var n,r=t[0],i=t[1];return Object.assign({},e,((n={})[r]=i,n))}),{})};t.filterOMap=function(e,n){return(0,t.entries)(e).filter((function(e){var t=e[0],r=e[1];return n(t,r)})).reduce((function(e,t){var n,r=t[0],i=t[1];return Object.assign({},e,((n={})[r]=i,n))}),{})};t.keys=function(e){return Object.keys(e)};t.values=function(e){return Object.values(e)},t.okeys=t.keys;t.entries=function(e){return(0,t.okeys)(e).map((function(t){return[t,e[t]]}))};t.fromEntries=function(e){return e.reduce((function(e,t){var n,r=t[0],i=t[1];return Object.assign({},e,((n={})[r]=i,n))}),{})};t.pickFirst=function(e){return e[0]};t.pickSecond=function(e){return e[1]};t.randomInt=function(e,t){void 0===t&&(t=0);var n=Math.random();return t+Math.floor((e-t)*n)};t.randomPos=function(e,n){return void 0===e&&(e=1e3),void 0===n&&(n=0),{x:(0,t.randomInt)(e,n),y:(0,t.randomInt)(e,n)}};t.pickRandom=function(e){return e[(0,t.randomInt)(e.length)]};t.repeat=function(e,t){return"x".repeat(e).split("").map((function(e,n){return t(n)}))};t.randomInts=function(e,n,r){return void 0===n&&(n=100),void 0===r&&(r=0),(0,t.repeat)(e,(function(){return(0,t.randomInt)(n,r)}))};t.shuffle=function(e){for(var t=[].concat(e),n=t.length-1;n>=0;n--){var r=Math.floor(Math.random()*(n+1)),i=[t[r],t[n]];t[n]=i[0],t[r]=i[1]}return t};t.containsAll=function(e,t){return t.every((function(t){return e.includes(t)}))};t.isDefined=function(e){return void 0!==e};t.isPromise=function(e){return e&&"function"==typeof e.then};t.callFnOrFnPromise=function(e,n){if((0,t.isDefined)(e)){var r=function(e){try{e()}catch(t){console.error(n,t)}};"function"==typeof e?r(e):Promise.resolve(e).then((function(e){"function"==typeof e&&r(e)}))}};t.isOptionalType=function(e){return/\?$/.test(e)};t.ensure=function(e,t){if(void 0===e)throw new Error(t||"Undefined value passed");return e};t.removeDupes=function(e){return Array.from(new Set(e))};t.noop=function(){};t.delay=function(e){return new Promise((function(t){return setTimeout(t,e)}))};var o=function(){var e=i(r().mark((function e(n,i,o,a){var u,s,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===i&&(i=1e3),void 0===o&&(o=100),void 0===a&&(a=new Set),!(i<0)){e.next=6;break}throw u=Array.from(a).reduce((function(e,t,n){return e+"\n\t\t"+(n+1)+". "+t}),""),new Error("[Eventually timeout exceeded after: timeout with error]: "+u);case 6:return e.prev=6,e.next=9,n();case 9:e.next=19;break;case 11:return e.prev=11,e.t0=e.catch(6),s=Date.now(),e.next=16,(0,t.delay)(o);case 16:return c=Date.now()-s,a.add(null===e.t0||void 0===e.t0?void 0:e.t0.message),e.abrupt("return",(0,t.eventually)(n,i-c,o,a));case 19:case"end":return e.stop()}}),e,null,[[6,11]])})));return function(t,n,r,i){return e.apply(this,arguments)}}();t.eventually=o},67748:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compileObjectTemplate=t.compileStringTemplate=void 0;t.compileStringTemplate=function(e,t){var n=decodeURIComponent(e);return Object.keys(t).forEach((function(e){var r=t[e],i=new RegExp("\\$\\{"+e+"\\}","g");n=n.replace(i,r)})),n};t.compileObjectTemplate=function(e,t){var n=decodeURIComponent(e);return Object.keys(t).forEach((function(e){var r=t[e],i=JSON.stringify(r),o=new RegExp('"\\$\\$\\{'+e+'\\}"',"g"),a=new RegExp("\\$\\{"+e+"\\}","g"),u="string"==typeof r?r.replace(/"/g,(function(e,t,n){return"\\"!==n[t-1]?'\\"':n[t]})):r;n=n.replace(o,i).replace(a,u).replace(/\n/g,"\\n")})),JSON.parse(n)}},1076:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.connection=t.connectionData=t.connectionDataEquals=t.connectionNodeEquals=t.connectionNode=t.externalConnectionNode=t.isInternalConnection=t.isExternalConnection=t.isInternalConnectionNode=t.isExternalConnectionNode=t.getPartOutputs=t.getOutputName=t.getInputName=t.getPartInputs=t.TRIGGER_PIN_ID=t.ERROR_PIN_ID=t.THIS_INS_ID=void 0;var r=n(24048);t.THIS_INS_ID="__this",t.ERROR_PIN_ID="__error",t.TRIGGER_PIN_ID="__trigger";t.getPartInputs=function(e){var n;return Object.assign({},e.inputs,((n={})[t.TRIGGER_PIN_ID]=(0,r.partInput)(),n))};t.getInputName=function(e){return e===t.TRIGGER_PIN_ID?"Trigger Part":e};t.getOutputName=function(e){return e===t.ERROR_PIN_ID?"Error":e};t.getPartOutputs=function(e){var n;return Object.assign({},e.outputs,((n={})[t.ERROR_PIN_ID]=(0,r.partOutput)(),n))};t.isExternalConnectionNode=function(e){return e&&e.insId===t.THIS_INS_ID};t.isInternalConnectionNode=function(e){return e.insId!==t.THIS_INS_ID};t.isExternalConnection=function(e){var n=e.from,r=e.to;return(0,t.isExternalConnectionNode)(n)||(0,t.isExternalConnectionNode)(r)};t.isInternalConnection=function(e){return!(0,t.isExternalConnection)(e)};t.externalConnectionNode=function(e){return{insId:t.THIS_INS_ID,pinId:e}};t.connectionNode=function(e,t){return{insId:e,pinId:t}};t.connectionNodeEquals=function(e,t){return e.insId===t.insId&&e.pinId===t.pinId};t.connectionDataEquals=function(e,n){return!(!e||!n)&&((0,t.connectionNodeEquals)(e.from,n.from)&&(0,t.connectionNodeEquals)(e.to,n.to))},t.connectionData=function(e,n,r){var i="string"==typeof e?e.split("."):e,o="string"==typeof n?n.split("."):n;if(i.length>2||o.length>2)throw new Error("invalid source or target to connection data - "+e+" / "+n);return{from:2===i.length?(0,t.connectionNode)(i[0],i[1]):(0,t.externalConnectionNode)(i[0]),to:2===o.length?(0,t.connectionNode)(o[0],o[1]):(0,t.externalConnectionNode)(o[0]),delayed:r}};t.connection=function(e,t,n){return void 0===n&&(n=!1),{from:e,to:t,delayed:n}}},6485:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.connect=void 0;var u=n(24048),s=n(30385),c=n(45821),l=n(1076);a(n(1076),t);t.connect=function(e,t,n,o,a,d,p,f){void 0===n&&(n={}),void 0===a&&(a={}),void 0===d&&(d=c.noop),void 0===p&&(p={}),void 0===f&&(f={});var v=e.id,m=e.connections,g=e.instances,h=v||"connected-part"+(0,c.randomInt)(999);return{inputs:e.inputs,outputs:e.outputs,id:h,completionOutputs:e.completionOutputs,reactiveInputs:e.reactiveInputs,run:function(v,b){var I,y=[],C=new c.DepGraph({}),P=new Map,_=new Map,x=new Map,j=new Map,O=new Map,w=new Map,E=new Set;g.forEach((function(e){var n=(0,u.getPart)(e,t),r=e.id;P.set(e,r),_.set(r,e),C.addNode(r);var i=Object.keys(n.inputs),o=Object.keys(n.outputs),a={},s={};if(i.forEach((function(t){var n=(e.inputConfig||{})[t]||(0,u.queueInputPinConfig)();(0,u.isStaticInputPinConfig)(n)?a[t]=(0,u.staticPartInput)(n.value):a[t]=(0,u.dynamicPartInput)({config:n})})),a[l.TRIGGER_PIN_ID]=(0,u.dynamicPartInput)({config:(0,u.queueInputPinConfig)()}),m.some((function(t){return(0,l.isInternalConnectionNode)(t.to)&&t.to.insId===e.id&&t.to.pinId===l.TRIGGER_PIN_ID}))&&e.inputConfig&&e.inputConfig[l.TRIGGER_PIN_ID])throw"Trigger connection can not be configured";o.forEach((function(e){var t=(0,u.dynamicOutput)();s[e]=t})),m.some((function(t){return(0,l.isInternalConnectionNode)(t.from)&&t.from.insId===e.id&&t.from.pinId===l.ERROR_PIN_ID}))&&(s[l.ERROR_PIN_ID]=(0,u.dynamicOutput)()),x.set(r,a),j.set(r,s)}));var S=new Set;return m.forEach((function(n){var o=n.from,a=n.to,s=o.insId,c=o.pinId,d=a.insId,p=a.pinId,f=j.get(s),v=x.get(d);if((0,l.isInternalConnectionNode)(a)&&S.add(a.insId+"."+a.pinId),(0,l.isExternalConnection)(n))if((0,l.isExternalConnectionNode)(o)){var m=null==v?void 0:v[a.pinId];if(!m)throw new Error("Input "+a.pinId+" of instance "+d+" not found");var g=O.get(o.pinId)||[];g.push(m),O.set(o.pinId,g)}else{var b=null==f?void 0:f[o.pinId];if(!b)throw new Error("Output "+o.pinId+" of instance "+s+" not found");var I=w.get(a.pinId)||[];I.push(b),w.set(a.pinId,I)}else{if(!f)throw new Error("No outputs found for instance ["+s+"]");if(!v)throw _.has(d)?new Error("No inputs found for instance ["+d+"]"):new Error("Instance with id ["+d+"] does not exist!");var P=f[c];if(!P)throw console.log(c),new Error("Output source - ["+c+"] not found in part ["+h+"]");var E=v[p],D=_.get(s);if(!D&&s!==l.THIS_INS_ID)throw new Error("Instance ["+s+"] does not exist! failed to connect ["+o+"] -> ["+a+"]");var k=(D?(0,u.getPart)(D,t):e).outputs[c];if(k&&k.delayed||n.delayed||s!==l.THIS_INS_ID&&d!==l.THIS_INS_ID&&C.addDependency(s,d),!E)throw new Error("Target arg - ["+a+"] not found in part ["+h+"]");var T=P.subscribe(function(){var e=i(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,u.isDynamicInput)(E)){e.next=3;break}throw console.info(E),new Error("Impossible state listening to non dynamic input - "+d+"."+p);case 3:E.subject.next(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());y.push((function(){return T.unsubscribe()}))}})),(0,c.okeys)(b).forEach((function(e){(w.get(e)||[]).forEach((function(t){var n=t.subscribe(function(){var t=i(r().mark((function t(n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(b[e]){t.next=2;break}throw new Error("Impossible state - output "+e+" does not exist");case 2:b[e].next(n);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());y.push((function(){return n.unsubscribe()}))}))})),C.overallOrder().map((function(e){return _.get(e)})).forEach((function(e){var r=x.get(e.id),i=j.get(e.id),c=(0,u.getPart)(e,t);if(!r)throw new Error("Unexpected error - args not found when running "+e);if(!i)throw new Error("Unexpected error - outputs not found when running "+e);for(var l in r){var v=e.inputConfig[l];S.has(e.id+"."+l)||(0,u.isStaticInputPinConfig)(v)||delete r[l]}var m=(0,s.execute)({part:c,inputs:r,outputs:i,resolvedDeps:t,_debugger:n,insId:e.id,extraContext:f,mainState:a,ancestorsInsIds:o,onBubbleError:d,onCompleted:function(){return t=e.id,E.delete(t),void(0===E.size&&I&&I());var t},onStarted:function(){return t=e.id,void E.add(t);var t},env:p});y.push(m)})),Object.keys(v).forEach(function(){var e=i(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(O.get(t)||[]).forEach((function(e){var n=v[t];if(!(0,u.isDynamicInput)(e))throw new Error("Unsure what to do with key "+t+", input: "+e+" of ins "+o);(0,c.isDefined)(n)&&e.subject.next(n)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),void 0===e.completionOutputs&&E.size>0?new Promise((function(e){I=e})):function(){return y.forEach((function(e){try{e()}catch(t){console.error("error unsubscribing",t)}}))}}}}},28674:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.MINOR_DEBUGGER_EVENT_TYPES=t.MAJOR_DEBUGGER_EVENT_TYPES=t.DebuggerEventType=void 0,function(e){e.INPUT_CHANGE="i",e.OUTPUT_CHANGE="o",e.PROCESSING_CHANGE="pc",e.ERROR="err",e.INPUTS_STATE_CHANGE="isc"}(n=t.DebuggerEventType||(t.DebuggerEventType={})),t.MAJOR_DEBUGGER_EVENT_TYPES=[n.INPUT_CHANGE,n.OUTPUT_CHANGE,n.ERROR],t.MINOR_DEBUGGER_EVENT_TYPES=[n.PROCESSING_CHANGE,n.INPUTS_STATE_CHANGE]},43849:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatEvent=void 0;var r=n(28674);t.formatEvent=function(e){var t,n,i,o=[e.insId].concat(null!==(n=null===(t=e.ancestorsInsIds)||void 0===t?void 0:t.split("."))&&void 0!==n?n:[]);(null===(i=e.ancestorsInsIds)||void 0===i?void 0:i.length)>0&&e.ancestorsInsIds;var a="Part <"+e.partId+"> ",u="("+o.join(" -> ")+")";return a+" - "+function(e){switch(e.type){case r.DebuggerEventType.PROCESSING_CHANGE:return e.val?"started processing":"stopped processing";case r.DebuggerEventType.INPUT_CHANGE:return"Input pin <"+e.pinId+"> changed to "+e.val;case r.DebuggerEventType.OUTPUT_CHANGE:return"Output pin <"+e.pinId+"> changed to "+e.val;case r.DebuggerEventType.INPUTS_STATE_CHANGE:return"Inputs queue size changed to "+Object.entries(e.val).map((function(e){return e[0]+": "+e[1]})).join(", ");case r.DebuggerEventType.ERROR:return"Error: "+e.val}}(e)+" "+u}},76296:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(28674),t),i(n(43849),t)},30385:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.execute=t.GLOBAL_STATE_NS=t.ROOT_INS_ID=t.INPUTS_STATE_SUFFIX=t.INNER_STATE_SUFFIX=void 0;var u=n(71542),s=n(21730);a(n(76296),t);var c=n(24048),l=n(6485),d=n(23939),p=n(45821),f=n(40189),v=n(24048),m=n(76296),g=n(11302);t.INNER_STATE_SUFFIX="_inner",t.INPUTS_STATE_SUFFIX="_inputs";t.ROOT_INS_ID="__root",t.GLOBAL_STATE_NS="____global";t.execute=function(e){var n=e.part,o=e.inputs,a=e.outputs,h=e.resolvedDeps,b=e._debugger,I=void 0===b?{}:b,y=e.insId,C=void 0===y?t.ROOT_INS_ID:y,P=e.extraContext,_=void 0===P?{}:P,x=e.mainState,j=void 0===x?{}:x,O=e.ancestorsInsIds,w=e.onBubbleError,E=void 0===w?u.noop:w,S=e.env,D=void 0===S?{}:S,k=e.onCompleted,T=void 0===k?u.noop:k,M=e.onStarted,N=void 0===M?u.noop:M,R=[];j[t.GLOBAL_STATE_NS]||(j[t.GLOBAL_STATE_NS]=new Map);var A=Object.assign({},_,{ENV:D}),V=(0,g.customPartsToPartsCollection)(h,A),H=function(e){var t=e instanceof c.PartInstanceError?e:new c.PartInstanceError(e,(0,p.fullInsIdPath)(C,O),n.id);I.onEvent&&I.onEvent({type:m.DebuggerEventType.ERROR,val:t,insId:C,ancestorsInsIds:O,partId:n.id}),a[l.ERROR_PIN_ID]?a[l.ERROR_PIN_ID].next(t):E(t)},z=function(e){return(0,c.isVisualPart)(e)?(0,l.connect)(e,V,I,(0,p.fullInsIdPath)(C,O),j,H,D,_):(0,c.isInlineValuePart)(e)?(0,g.inlineValuePartToPart)(e,A):e}(n),G=I.onEvent||u.noop,F={},q={};(0,p.entries)(o).forEach((function(e){var t=e[0],o=e[1];if((0,c.isDynamicInput)(o)){var a=(0,c.dynamicPartInput)({config:o.config}),u=o.subject.subscribe(function(){var e=i(r().mark((function e(i){var o,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=G({type:m.DebuggerEventType.INPUT_CHANGE,insId:C,pinId:t,val:i,ancestorsInsIds:O,partId:n.id}))){e.next=8;break}return e.next=4,o.valuePromise;case 4:u=e.sent,a.subject.next(u),e.next=12;break;case 8:if(!I.debugDelay){e.next=11;break}return e.next=11,(0,p.delay)(I.debugDelay);case 11:a.subject.next(i);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());R.push((function(){return u.unsubscribe()})),q[t]=a}else{G({type:m.DebuggerEventType.INPUT_CHANGE,insId:C,pinId:t,val:o.config.value,ancestorsInsIds:O,partId:n.id});var s=(0,c.staticPartInput)((0,c.getStaticValue)(o.config.value,V,C));q[t]=s}})),(0,p.entries)(a).forEach((function(e){var t=e[0],o=e[1],a=(0,c.dynamicOutput)(),u=a.subscribe(function(){var e=i(r().mark((function e(i){var a,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=G({type:m.DebuggerEventType.OUTPUT_CHANGE,insId:C,pinId:t,val:i,ancestorsInsIds:O,partId:n.id}))){e.next=8;break}return e.next=4,a.valuePromise;case 4:u=e.sent,o.next(u),e.next=9;break;case 8:o.next(i);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());R.push((function(){return u.unsubscribe()})),F[t]=a}));var L=function(e){var n,r,i,o=e.part,a=e.inputs,l=e.outputs,g=e.resolvedDeps,h=e._debugger,b=e.insId,I=e.ancestorsInsIds,y=e.mainState,C=e.onError,P=e.onStarted,_=e.onCompleted,x=e.env,j=e.extraContext,O=o.run,w=o.fn,E=(0,f.debugLogger)("core"),S=[],D=(null==h?void 0:h.onEvent)||u.noop,k=(0,p.fullInsIdPath)(b,I),T=""+k+t.INNER_STATE_SUFFIX,M=""+k+t.INPUTS_STATE_SUFFIX,N=E.extend(k),R=y[t.GLOBAL_STATE_NS];y[T]||(y[T]=new Map),y[M]||(y[M]=new Map);var A,V=null!==(n=y[M])&&void 0!==n?n:new Map,H=function(){var e=Array.from(V.entries()).reduce((function(e,t){var n,r=t[0],i=t[1],o=(0,c.isQueueInputPinConfig)(a[r].config);return Object.assign({},e,((n={})[r]=o?null==i?void 0:i.length:1,n))}),{});D({type:m.DebuggerEventType.INPUTS_STATE_CHANGE,val:e,insId:b,ancestorsInsIds:I,partId:o.id})},z={execute:function(e,n,r,i){return(0,t.execute)({part:e,inputs:n,outputs:r,resolvedDeps:g,_debugger:h,insId:i,onCompleted:_,onStarted:P})},insId:b,state:null!==(r=y[T])&&void 0!==r?r:new Map,onCleanup:function(e){S.push(e)},onError:function(e){C(e)},context:null!=j?j:{},ancestorsInsIds:I,globalState:R},G=!1,F=(o.reactiveInputs||[]).filter((function(e){var t;return!(0,v.isStaticInputPinConfig)(null===(t=a[e])||void 0===t?void 0:t.config)})),q=function(){var e;null===(e=y[T])||void 0===e||e.clear(),(0,p.keys)(y).filter((function(e){return e.startsWith(k+".")})).forEach((function(e){y[e]=new Map}))},L=function e(t){var n=(null==t?void 0:t.key)&&F.includes(null==t?void 0:t.key);if(G&&!n);else{var r=G&&n;if((0,d.isPartStateValid)(a,V,o)||r){var u;if(G){var f;if(!t)throw new Error("Unexpected state,  got reactive part while not processing and not valid");var v=(0,d.pullValueForExecution)(t.key,a[t.key],V,x);u=Object.assign({},A,((f={})[t.key]=v,f)),H()}else u=(0,d.pullValuesForExecution)(a,V,x),A=u,H();var g=new Set,h={};if(G=!0,D({type:m.DebuggerEventType.PROCESSING_CHANGE,val:G,insId:b,ancestorsInsIds:I,partId:o.id}),o.completionOutputs){var y=o.completionOutputs.map((function(e){return e.split("+")})).reduce((function(e,t){return t.forEach((function(n){e.set(n,t)})),e}),new Map);(0,p.entries)(l).forEach((function(t){var n=t[0];t[1].pipe((0,s.first)()).subscribe((function(t){g.add(n),h[n]=t;var r=y.get(n);r&&(r.splice(r.indexOf(n),1),0===r.length&&(G=!1,D({type:m.DebuggerEventType.PROCESSING_CHANGE,val:G,insId:b,ancestorsInsIds:I,partId:o.id}),_&&_(h),q(),(0,p.callFnOrFnPromise)(i,"Error with cleanup function of "+o.id),i=void 0,g.clear(),h={},(0,d.hasNewSignificantValues)(a,V,x,o.id)&&e()))}))}))}else(0,p.entries)(l).forEach((function(e){var t=e[0];e[1].subscribe((function(e){h[t]=e}))}));try{N("Running part %s with values %o",o.id,u),P&&P(),i=(null!=w?w:O)(u,l,z),(0,p.isPromise)(i)?i.then((function(){void 0===o.completionOutputs&&_&&(G=!1,D({type:m.DebuggerEventType.PROCESSING_CHANGE,val:G,insId:b,ancestorsInsIds:I,partId:o.id}),_(h),q(),(0,d.hasNewSignificantValues)(a,V,x,o.id)&&e())})).catch((function(e){C(e),G=!1,N("Error in part %s - value %e",o.id,e),D({type:m.DebuggerEventType.PROCESSING_CHANGE,val:G,insId:b,ancestorsInsIds:I,partId:o.id})})):void 0===o.completionOutputs&&_&&(G=!1,D({type:m.DebuggerEventType.PROCESSING_CHANGE,val:G,insId:b,ancestorsInsIds:I,partId:o.id}),_(h),q())}catch(R){C(R),G=!1,N("Error in part %s - value %e",o.id,R),D({type:m.DebuggerEventType.PROCESSING_CHANGE,val:G,insId:b,ancestorsInsIds:I,partId:o.id})}var j=F.find((function(e){return a[e]&&(0,d.peekValueForExecution)(e,a[e],V,x,o.id)}));if(j){var E=(0,d.peekValueForExecution)(j,a[j],V,x,o.id);e({key:j,value:E})}else{var S=(0,p.entries)(a).find((function(e){var t=e[0],n=e[1],r=(0,c.isQueueInputPinConfig)(n.config),i=(0,d.peekValueForExecution)(t,n,V,x,o.id);return!!r&&(0,p.isDefined)(i)}));if(S){var k=S[0],T=S[1],M=(0,d.peekValueForExecution)(k,T,V,x,o.id);e({key:k,value:M})}}}}};L();var U=(0,d.subscribeInputsToState)(a,V,(function(e,t){E("Got input %s - value is [%o]",e,t),H();try{L({key:e,value:t})}catch(n){C(n)}}));return S.push(U),function(){(0,p.callFnOrFnPromise)(i,"Error with cleanup function of "+o.id),S.forEach((function(e){return e()}))}}({part:z,inputs:q,outputs:F,resolvedDeps:V,_debugger:I,insId:C,mainState:j,ancestorsInsIds:O,onError:H,onBubbleError:E,env:D,extraContext:_,onCompleted:T,onStarted:N});return function(){R.forEach((function(e){return e()})),L()}}},23939:function(e,t,n){"use strict";var r=n(45597).default;Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeInputsToState=t.isPartStateValid=t.hasNewSignificantValues=t.peekValuesForExecution=t.pullValuesForExecution=t.pullValueForExecution=t.peekValueForExecution=void 0;var i=n(24048),o=n(45821),a=n(6485),u=function(e,t){var n=(0,i.extractStaticValue)(e);return(0,i.isEnvValue)(n)?function(e,t){for(var n,i=e.split("."),a=Object.assign({},t),u=r(i);!(n=u()).done;){var s=n.value;if(!a||!(0,o.isDefined)(a[s])||null===a[s])throw new Error("Cannot find key "+e+" inside obj "+t);a=a[s]}return a}((0,i.getEnvKeyFromValue)(n),t):n};t.peekValueForExecution=function(e,t,n,r,o){var a=n.get(e);if(!t)throw new Error('Trying to peek value of inexsting input in key "'+e+'" in part "'+o+'"');return(0,i.isStaticInput)(t)?u(t,r):(0,i.isQueueInputPinConfig)(t.config)?a?[].concat(a).shift():void 0:a};t.pullValueForExecution=function(e,t,n,r){var o,a=n.get(e);return(0,i.isStaticInput)(t)?o=u(t,r):(0,i.isQueueInputPinConfig)(t.config)?(o=(a||[]).shift(),n.set(e,a)):(o=a,(0,i.isStickyInputPinConfig)(t.config)||n.delete(e)),o};t.pullValuesForExecution=function(e,n,r){return(0,o.entries)(e).reduce((function(e,i){var o=i[0],a=i[1];return e[o]=(0,t.pullValueForExecution)(o,a,n,r),e}),{})};t.peekValuesForExecution=function(e,n,r,i){return(0,o.entries)(e).reduce((function(e,o){var a=o[0],u=o[1];return e[a]=(0,t.peekValueForExecution)(a,u,n,r,i),e}),{})};t.hasNewSignificantValues=function(e,n,r,a){return(0,o.entries)(e).some((function(e){var u=e[0],s=e[1],c=(0,i.isQueueInputPinConfig)(s.config),l=(0,t.peekValueForExecution)(u,s,n,r,a);return(0,o.isDefined)(l)&&c}))};t.isPartStateValid=function(e,t,n){var r=(0,o.keys)(e),u=(0,o.keys)(n.inputs).filter((function(e){var t,r=null===(t=n.inputs[e])||void 0===t?void 0:t.mode;return!r||"required"===r}));return r.includes(a.TRIGGER_PIN_ID)&&u.push(a.TRIGGER_PIN_ID),!!(0,o.containsAll)(r,u)&&(0,o.entries)(e).filter((function(e){var t=e[0];return!!n.inputs[t]||t===a.TRIGGER_PIN_ID})).every((function(e){var r,a=e[0],u=e[1],s=t.get(a);return"optional"===((null===(r=n.inputs[a])||void 0===r?void 0:r.mode)||"required")||(!!(0,i.isStaticInput)(u)||((0,i.isQueueInputPinConfig)(u.config)?(0,o.isDefined)(s)&&s.length>0:(0,o.isDefined)(s)))}))};t.subscribeInputsToState=function(e,t,n){var r=[];return(0,o.entries)(e).forEach((function(e){var o=e[0],a=e[1];if(a&&!(0,i.isStaticInput)(a)){var u=a.subject.subscribe((function(e){if((0,i.isQueueInputPinConfig)(a.config)){var r=t.get(o)||[];if(!Array.isArray(r))throw new Error("impossible state - state of key "+o+" is set but not an array");r.push(e),t.set(o,r),n(o,e)}else t.set(o,e),n(o,e)}));r.push((function(){return u.unsubscribe()}))}})),function(){return r.forEach((function(e){return e()}))}}},19735:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flydeFlowSchema=void 0;var r=n(89510),i=r.z.record(r.z.string(),r.z.string().or(r.z.array(r.z.string()))),o=r.z.strictObject({x:r.z.number(),y:r.z.number()}),a=r.z.discriminatedUnion("mode",[r.z.strictObject({mode:r.z.literal("static"),value:r.z.any()}),r.z.strictObject({mode:r.z.literal("queue")}),r.z.strictObject({mode:r.z.literal("sticky")})]),u=r.z.object({size:r.z.optional(r.z.enum(["small","regular","large"])),icon:r.z.optional(r.z.any()),color:r.z.optional(r.z.string()),cssOverride:r.z.optional(r.z.record(r.z.string()))}),s=r.z.object({pos:o.default({x:0,y:0}),id:r.z.string(),inputConfig:r.z.optional(r.z.record(r.z.string(),a)).default({}),visibleInputs:r.z.optional(r.z.array(r.z.string())),visibleOutputs:r.z.optional(r.z.array(r.z.string())),partId:r.z.optional(r.z.string()),part:r.z.optional(r.z.any()),style:r.z.optional(u)}).refine((function(e){return e.part||e.partId}),{message:"Instance must have either an inline part or refer to a partId"}),c=r.z.union([r.z.string(),r.z.object({mode:r.z.enum(["required","optional","required-if-connected"]),type:r.z.optional(r.z.string()),description:r.z.optional(r.z.string()),defaultValue:r.z.optional(r.z.any())})]),l=r.z.object({type:r.z.optional(r.z.string()),optional:r.z.optional(r.z.boolean()),delayed:r.z.optional(r.z.boolean()),description:r.z.optional(r.z.string())}),d=r.z.object({id:r.z.optional(r.z.string()),inputs:r.z.record(r.z.string(),c),outputs:r.z.record(r.z.string(),l),inputsPosition:r.z.optional(r.z.record(r.z.string(),o)),outputsPosition:r.z.optional(r.z.record(r.z.string(),o)),customViewCode:r.z.optional(r.z.string()),dataBuilderSource:r.z.optional(r.z.string()),templateType:r.z.optional(r.z.string()),completionOutputs:r.z.optional(r.z.array(r.z.string())),reactiveInputs:r.z.optional(r.z.array(r.z.string())),defaultStyle:r.z.optional(u),description:r.z.optional(r.z.string()),searchKeywords:r.z.optional(r.z.array(r.z.string()))}),p=r.z.object({instances:r.z.array(s),connections:r.z.array(r.z.strictObject({from:r.z.strictObject({insId:r.z.string(),pinId:r.z.string()}),to:r.z.strictObject({insId:r.z.string(),pinId:r.z.string()}),delayed:r.z.optional(r.z.boolean()),hidden:r.z.optional(r.z.boolean())}))}).and(d);t.flydeFlowSchema=r.z.strictObject({imports:r.z.optional(i).default({}),part:p})},18265:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.isStaticValueVisualPart=void 0,i(n(45821),t);var o=n(24048);i(n(6485),t),i(n(30385),t),i(n(69789),t),i(n(24048),t),i(n(90163),t),i(n(11302),t),i(n(55281),t),i(n(19735),t);t.isStaticValueVisualPart=function(e){return!!e&&!!(0,o.maybeGetStaticValuePartId)(""+e)}},88004:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fakeVm=t.VM=t.VMScript=void 0;var r=n(45821),i=function(e){this.script=e};t.VMScript=i;var o=function(){function e(e){this.context=e}return e.prototype.run=function(e){var t=(0,r.okeys)(this.context.sandbox),n=Object.values(this.context.sandbox);Function.apply(void 0,t.concat([e.script])).apply(void 0,n)},e}();t.VM=o,t.fakeVm={VMScript:i,VM:o}},58725:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getVM2Instance=void 0;var r=n(88004);t.getVM2Instance=function(){return r.fakeVm}},11302:function(e,t,n){"use strict";var r=n(68626).default,i=["runFnRawCode"],o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.customPartsToPartsCollection=t.inlineValuePartToPart=void 0;var a=o(n(14206)),u=n(45821),s=n(24048),c=(0,n(58725).getVM2Instance)();t.inlineValuePartToPart=function(e,t){void 0===t&&(t={});var n=e.runFnRawCode,o=r(e,i),l=(0,u.debugLogger)("code-part:"+e.id),d="\n  try {\n    "+n+"\n  } catch (e) {\n    adv.onError(e);\n  }\n  ",p=new c.VMScript(d),f=Object.assign({},o,{run:function(n,r,i){var o=new c.VM({sandbox:Object.assign({inputs:n,outputs:r,setInterval:setInterval,clearInterval:clearInterval,setTimeout:setTimeout,clearTimeout:clearTimeout,encodeURIComponent:encodeURIComponent,adv:i,log:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];l.apply(void 0,["Log from code part "+e.id+" ["+i.insId+"]"].concat(n))},axios:a.default,DEFAULT_AXIOS_TIMEOUT:15e3,dynamicPartInput:s.dynamicPartInput,dynamicPartArg:s.dynamicPartInput,dynamicOutput:s.dynamicOutput,isDefined:u.isDefined,compileStringTemplate:u.compileStringTemplate,compileObjectTemplate:u.compileObjectTemplate,process:{env:{}}},t)});o.run(p)}});return f};t.customPartsToPartsCollection=function(e,n){void 0===n&&(n={});var r={};for(var i in e){var o=e[i];r[i]=(0,s.isInlineValuePart)(o)?(0,t.inlineValuePartToPart)(o,n):o}return r}},90163:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPartWithDependencies=void 0;var r=n(24048),i=n(18265),o=n(93471);t.getPartWithDependencies=function(e,n,a){if(void 0===a&&(a=[]),(0,r.isInlineValuePart)(e))return[e];if(a.includes(e.id))return[];var u=(0,i.removeDupes)(e.instances.filter((function(e){return(0,o.isRefPartInstance)(e)})).map((function(e){return e.partId})).filter((function(e){return n[e]}))),s=u.flatMap((function(e){var t;return null!==(t=n[e])&&void 0!==t?t:[]})).reduce((function(e,r){return[].concat(e,(0,t.getPartWithDependencies)(r,n,[].concat(a,u)))}),[]);return[e].concat(s)}},24048:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(93471),t),i(n(85089),t),i(n(34702),t),i(n(27519),t),i(n(8166),t),i(n(60042),t)},8166:function(e,t,n){"use strict";var r=n(33856).default,i=n(90314).default,o=n(54038).default;Object.defineProperty(t,"__esModule",{value:!0}),t.PartInstanceError=void 0;var a=function(e){function t(t,n,i){var o,a="Unknown error";return a="string"==typeof t?t:t instanceof Error?t.message:null!==t&&"object"==typeof t?JSON.stringify(t):String(t),(o=e.call(this,a+" (insId: "+n+", partId: "+i+")")||this).name=o.constructor.name,o.message=a+" (insId: "+n+", partId: "+i+")",Error.captureStackTrace?Error.captureStackTrace(r(o),o.constructor):o.stack=(new Error).stack,o.fullInsIdsPath=n,o.partId=i,o}return i(t,e),t}(o(Error));t.PartInstanceError=a},93471:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createInsId=t.PartInstance=t.isRefPartInstance=t.isInlinePartInstance=t.inlinePartInstance=t.partInstance=void 0;var r=n(71850);t.partInstance=function(e,t,n,r){return{id:e,partId:t,inputConfig:n||{},pos:r||{x:0,y:0}}};t.inlinePartInstance=function(e,t,n,r){return{id:e,part:t,inputConfig:n||{},pos:r||{x:0,y:0}}};t.isInlinePartInstance=function(e){return!!e.part};t.isRefPartInstance=function(e){return!(0,t.isInlinePartInstance)(e)};t.PartInstance=function(e,t,n,r){return{id:e,partId:t.id,inputConfig:n||{},pos:r||{x:0,y:0}}};t.createInsId=function(e){return e.id+"-"+(0,r.slug)()}},85089:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEnvKeyFromValue=t.toEnvValue=t.isEnvValue=t.extractStaticValue=t.isStaticInput=t.isDynamicInput=t.staticPartInput=t.dynamicPartInputs=t.dynamicPartInput=t.dynamicOutput=t.partOutputs=t.partOutput=t.partInputs=t.isInputPinOptional=t.partInput=void 0;var r=n(71542),i=n(24048),o=n(45821),a=n(34702);t.partInput=function(e){return void 0===e&&(e="required"),{mode:e}};t.isInputPinOptional=function(e){return"optional"===e.mode};t.partInputs=function(e,n){return(0,o.repeat)(e,(function(e){return(0,t.partInput)((null==n?void 0:n[e])||"required")}))};t.partOutput=function(e){return void 0===e&&(e=!1),{delayed:e}};t.partOutputs=function(e){return(0,o.repeat)(e,(function(){return(0,t.partOutput)()}))};t.dynamicOutput=function(){return new r.Subject},t.dynamicPartInput=(0,o.testDataCreator)((function(){return{subject:new r.Subject,config:(0,a.queueInputPinConfig)()}}));t.dynamicPartInputs=function(e){return void 0===e&&(e=10),(0,o.repeat)(e,(function(){return(0,o.testDataCreator)((function(){return{subject:new r.Subject,config:(0,a.queueInputPinConfig)()}}))()}))};t.staticPartInput=function(e){return{config:(0,a.staticInputPinConfig)(e)}};t.isDynamicInput=function(e){var t=e;return t&&t.subject&&!!t.subject.next};t.isStaticInput=function(e){return(0,i.isStaticInputPinConfig)(null==e?void 0:e.config)};t.extractStaticValue=function(e){if((0,t.isStaticInput)(e))return e.config.value;throw new Error("Cannot extract static value from non static arg")};t.isEnvValue=function(e){return"string"==typeof e&&e.startsWith("$ENV.")};t.toEnvValue=function(e){return"$ENV."+e};t.getEnvKeyFromValue=function(e){return"string"==typeof e?e.replace(/^\$ENV\./,""):e}},60042:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.codeFromFunction=t.getPartDef=t.getPart=t.getStaticValue=t.maybeGetStaticValuePartId=t.fromSimplified=t.inlineValuePart=t.codePart=t.visualPart=t.isInlineValuePart=t.isVisualPart=t.isCodePart=t.isBasePart=t.InlineValuePartType=void 0;var r=n(45821),i=n(93471),o=n(85089);!function(e){e.VALUE="value",e.FUNCTION="function"}(t.InlineValuePartType||(t.InlineValuePartType={}));t.isBasePart=function(e){return e&&e.id&&e.inputs&&e.outputs};t.isCodePart=function(e){return(0,t.isBasePart)(e)&&"function"==typeof e.run};t.isVisualPart=function(e){return!!e.instances};t.isInlineValuePart=function(e){return(0,r.isDefined)(e)&&(0,r.isDefined)(e.runFnRawCode)},t.visualPart=(0,r.testDataCreator)({id:"visual-part",inputs:{},outputs:{},instances:[],connections:[],outputsPosition:{},inputsPosition:{}}),t.codePart=(0,r.testDataCreator)({id:"part",inputs:{},outputs:{},run:r.noop}),t.inlineValuePart=(0,r.testDataCreator)({id:"part",inputs:{},outputs:{},runFnRawCode:""});t.fromSimplified=function(e){var t=e.run,n=e.inputTypes,i=e.outputTypes;return{id:e.id,inputs:(0,r.entries)(n).reduce((function(e,t){var n,r=t[0];return Object.assign({},e,((n={})[r]={},n))}),{}),outputs:(0,r.entries)(i).reduce((function(e,t){var n,r=t[0];return Object.assign({},e,((n={})[r]={},n))}),{}),run:t}};t.maybeGetStaticValuePartId=function(e){var t="string"==typeof e&&e.match(/^__part\:(.*)/);return t?t[1]:null};t.getStaticValue=function(e,n,r){var i=(0,t.maybeGetStaticValuePartId)(e);if(i){var o=n[i];if(!o)throw new Error("Instance "+r+" referrer to a part reference "+i+" that does not exist");return o}return e};t.getPart=function(e,t){if("string"!=typeof e&&(0,i.isInlinePartInstance)(e))return e.part;var n="string"==typeof e?e:e.partId,r=t[n];if(!r)throw new Error("Part with id "+n+" not found");return r};t.getPartDef=function(e,t){if("string"!=typeof e&&(0,i.isInlinePartInstance)(e))return e.part;var n="string"==typeof e?e:e.partId,r=t[n];if(!r)throw console.error("Part with id "+n+" not found"),new Error("Part with id "+n+" not found");return r};t.codeFromFunction=function(e){var t,n=e.id,r=e.fn,i=e.inputNames,a=e.outputName,u=e.defaultStyle;return{id:n,inputs:i.reduce((function(e,t){var n;return Object.assign({},e,((n={})[t]=(0,o.partInput)(),n))}),{}),outputs:(t={},t[a]=(0,o.partOutput)(),t),run:function(e,t){var n=i.map((function(t){return e[t]})),o=t[a],u=r.apply(void 0,n);return Promise.resolve(u).then((function(e){return null==o?void 0:o.next(e)}))},completionOutputs:[a],defaultStyle:u}}},27519:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default;Object.defineProperty(t,"__esModule",{value:!0}),t.partFromSimpleFunction=void 0,t.partFromSimpleFunction=function(e){var t,n;return Object.assign({},e,{id:e.id,description:e.description,namespace:e.namespace,inputs:e.inputs?e.inputs.reduce((function(e,t){var n,r=t.name,i=t.description,o=t.mode,a=t.defaultValue;return Object.assign({},e,((n={})[r]={description:i,mode:null!=o?o:"required",defaultValue:a},n))}),{}):{},outputs:e.output?(t={},t[e.output.name]={description:e.output.description},t):{},defaultStyle:{icon:e.icon,size:e.size},run:(n=i(r().mark((function t(n,i,o){var a,u,s,c;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=(null!==(a=e.inputs)&&void 0!==a?a:[]).map((function(e){var t=e.name;return n[t]})),t.prev=1,t.next=4,Promise.resolve(e.run.apply(e,s));case 4:c=t.sent,e.output&&(null===(u=i[e.output.name])||void 0===u||u.next(c)),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.error("Error in part",t.t0),o.onError(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,8]])}))),function(e,t,r){return n.apply(this,arguments)}),customViewCode:e.customViewCode})}},34702:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isStaticInputPinConfig=t.isStickyInputPinConfig=t.isQueueInputPinConfig=t.staticInputPinConfig=t.stickyInputPinConfig=t.queueInputPinConfig=t.INPUT_MODES=void 0,t.INPUT_MODES=["queue","sticky","static"];t.queueInputPinConfig=function(){return{mode:"queue"}};t.stickyInputPinConfig=function(){return{mode:"sticky"}};t.staticInputPinConfig=function(e){return{mode:"static",value:e}};t.isQueueInputPinConfig=function(e){return"queue"===e.mode};t.isStickyInputPinConfig=function(e){return!!e&&"sticky"===e.mode},t.isStaticInputPinConfig=function(e){return!!e&&"static"===e.mode}},69789:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.simplifiedExecute=void 0;var r=n(18265),i=n(30385);t.simplifiedExecute=function(e,t,n,o,a){void 0===a&&(a={});var u=(0,r.keys)(e.outputs),s=Object.keys(n).reduce((function(e,t){var i,o=n[t];return Object.assign({},e,((i={})[t]=(0,r.isDynamicInput)(o)?o:(0,r.staticPartInput)(o),i))}),{}),c=u.reduce((function(e,t){var n,i=(0,r.dynamicOutput)();return o&&i.subscribe((function(e){o(t,e)})),Object.assign({},e,((n={})[t]=i,n))}),{});return(0,i.execute)(Object.assign({part:e,inputs:s,outputs:c,resolvedDeps:t,onBubbleError:function(e){throw e}},a))}},55281:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isScheduledTrigger=t.isRestApiTrigger=t.isWebAppTrigger=void 0;t.isWebAppTrigger=function(e){return"web-app"===e.type};t.isRestApiTrigger=function(e){return"rest-api"===e.type};t.isScheduledTrigger=function(e){return"scheduled"===e.type}},23489:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PartPreview=void 0;var r=n(24246),i=n(18265),o=n(57768);t.PartPreview=function(e){var t=e.part,n={part:t,instance:(0,i.partInstance)("bob",t.id,{}),connections:[],viewPort:{pos:{x:0,y:0},zoom:1},resolvedDeps:{},connectionsPerInput:{},onUngroup:i.noop,onDblClick:i.noop,onDragEnd:i.noop,onDragMove:i.noop,onDragStart:i.noop,onPinClick:i.noop,onPinDblClick:i.noop,onSelect:i.noop,onTogglePinBreakpoint:i.noop,onTogglePinLog:i.noop,onToggleSticky:i.noop,displayMode:!0,onInspectPin:i.noop,onDetachConstValue:i.noop,onCopyConstValue:i.noop,onPasteConstValue:i.noop,ancestorsInsIds:"",onChangeVisibleInputs:i.noop,onChangeVisibleOutputs:i.noop,onConvertConstToEnv:i.noop,forceShowMinimized:"both",onExtractInlinePart:i.noop,onCloseInlineEditor:i.noop,isConnectedInstanceSelected:!1,inlineEditorPortalDomNode:null,onChangeStyle:i.noop,onDeleteInstance:i.noop,onGroupSelected:i.noop,onSetDisplayName:i.noop,hadError:!1,queuedInputsData:{},onPinMouseDown:i.noop,onPinMouseUp:i.noop};return(0,r.jsx)("div",{className:"part-preview",children:(0,r.jsx)(o.InstanceView,Object.assign({},n))})}},67795:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DataInspectionModal=void 0;var c=n(24246),l=n(42272),d=s(n(86778)),p=u(n(27378)),f=n(96149),v=n(60614),m=n(99457),g=n(55967);t.DataInspectionModal=function(e){var t,n=(0,g.useDebuggerContext)().onRequestHistory,o=e.item,a=p.default.useState(),u=a[0],s=a[1],h=p.default.useState(0),b=h[0],I=h[1],y=p.default.useState(""),C=y[0],P=y[1],_=p.default.useState(),x=_[0],j=_[1],O=(0,f.useDebounce)(C,300)[0];(0,p.useEffect)((function(){j(null==u?void 0:u.lastSamples.filter((function(e){return"object"==typeof e.val?JSON.stringify(e.val).includes(O):e.val.toString().includes(O)}))),I(0)}),[null==u?void 0:u.lastSamples,O]),p.default.useEffect((function(){function e(){return e=i(r().mark((function e(){var t,i,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(o.insId,null===(t=o.pin)||void 0===t?void 0:t.id,null===(i=o.pin)||void 0===i?void 0:i.type);case 2:a=e.sent,s(a);case 4:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[o,n]);var w='"'+o.insId+'" '+((null===(t=o.pin)||void 0===t?void 0:t.id)?"("+o.pin.id+")":"");return(0,c.jsx)(l.Dialog,{isOpen:!0,title:"Inspecting data for instance "+w,onClose:e.onClose,canEscapeKeyClose:!1,className:"data-inspection-modal",children:(0,c.jsx)("main",{className:(0,d.default)(l.Classes.DIALOG_BODY),tabIndex:0,children:(0,c.jsxs)("div",{children:[(0,c.jsxs)("header",{children:[u?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("em",{children:[w," called ",u.total," time(s)"]}),u.total>10&&(0,c.jsx)("span",{children:"Showing last 10 samples"})]}):null,(0,c.jsx)("input",{className:"bp3-input bp3-small bp3-fill",type:"search",placeholder:"Search for values",dir:"auto",onChange:function(e){return P(e.target.value)},value:C}),O.length>0&&(0,c.jsxs)("span",{children:["Showing ",null==x?void 0:x.length," of ",u.lastSamples.length," ",'samples matching query "',O,'"']})]}),(0,c.jsx)("main",{className:"main-wrapper",children:function(){if(!u)return(0,c.jsx)(m.Loader,{});if(0===u.total)return(0,c.jsxs)(l.Callout,{intent:"warning",children:["No events captured for instance ",(0,c.jsx)("em",{children:o.insId})," ",o.pin?(0,c.jsxs)(p.default.Fragment,{children:["and pin ",(0,c.jsx)("em",{children:o.pin.id})]}):null,". Make sure debugger is running and your program was triggered."]});var e,t,n=null==x?void 0:x[b];return n?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(l.Card,{className:"content-wrapper",children:[n?(0,c.jsxs)("div",{className:"info",children:[(0,c.jsxs)("div",{children:["Showing sample ",b," of event from"," ",(0,c.jsx)("strong",{children:(0,f.timeAgo)(n.time)})," (",new Date(n.time).toLocaleString(),")"]}),(0,c.jsxs)("div",{children:["Instance: ",(0,c.jsx)("strong",{children:n.insId}),", Pin id:"," ",(0,c.jsx)("strong",{children:n.pinId})," "]}),(0,c.jsx)("div",{children:"Value:"})]}):null,(e=n,t=e.val,"object"==typeof t?(0,c.jsx)(v.BrowserOnlyReactJson,{src:t,name:null}):(0,c.jsx)(l.Code,{children:t.toString()}))]}),(0,c.jsx)(l.Menu,{className:"samples-menu",children:x.map((function(e,t){var n=e.pinId,r=u.total-t+'. from pin "'+n+'"';return(0,c.jsx)(l.MenuItem,{text:r,onClick:function(){return I(t)}},t)}))})]}):u.lastSamples.length>0&&C.length>0?(0,c.jsxs)(l.Callout,{intent:"warning",children:['No data found for search query "',C,'"']}):(0,c.jsxs)(l.Callout,{intent:"warning",children:["No events captured for instance ",o.insId," ",o.pin?"and "+o.pin.id:"",". Make sure a debugger is connected and your program was triggered."]})}()})]})})})}},52293:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(67795),t)},55967:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useDebuggerContext=t.DebuggerContextProvider=void 0;var r=n(27378),i=(0,r.createContext)({onRequestHistory:function(){return Promise.reject(new Error("Not implemented"))}});t.DebuggerContextProvider=i.Provider;t.useDebuggerContext=function(){return(0,r.useContext)(i)}},58553:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useDependenciesContext=t.DependenciesContextProvider=void 0;var r=n(27378),i=(0,r.createContext)({resolvedDependencies:{},onImportPart:function(){return Promise.reject(new Error("Not implemented"))},onRequestImportables:function(){return Promise.reject(new Error("Not implemented"))}});t.DependenciesContextProvider=i.Provider;t.useDependenciesContext=function(){return(0,r.useContext)(i)}},90412:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t},s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FlowEditor=void 0;var l=n(24246),d=u(n(27378)),p=n(18265),f=n(41304),v=c(n(63300)),m=n(14648),g=n(13011),h=n(40232),b=n(51424),I=n(24935),y=n(91312),C=n(30537),P=n(31425),_=n(44370),x=n(99743),j=n(52293),O=n(55967),w=n(58553);s(n(91312),t),s(n(55967),t),s(n(58553),t),C.library.add(P.fab,_.fas);var E=["select","drag-move","order-step"];t.FlowEditor=d.memo(d.forwardRef((function(e,t){var n=e.state,o=e.onChangeEditorState,a=(0,w.useDependenciesContext)(),u=a.resolvedDependencies,s=a.onImportPart,c=d.useState([]),C=c[0],P=c[1],_=d.useState([]),S=_[0],D=_[1],k=n.flow,T=n.boardData,M=n.flow.part,N=d.useState({}),R=N[0],A=N[1],V=d.useState(new Set),H=V[0],z=V[1],G=(0,O.useDebuggerContext)().debuggerClient;d.useEffect((function(){if(G)return G.onBatchedEvents((function(e){e.forEach((function(e){e.type===p.DebuggerEventType.INPUTS_STATE_CHANGE&&(console.log("INPUTS_STATE_CHANGE",e.insId,e.val),A((function(t){var n;return Object.assign({},t,((n={})[e.insId]=e.val,n))}))),e.type===p.DebuggerEventType.ERROR&&z((function(t){var n=new Set(t);return n.add(e.insId),n}))}))}))}),[G]);var F=(0,y.usePorts)(),q=F.openFile,L=F.reportEvent,U=d.useCallback((function(e,t){console.info("onChangeFlow",t.type),"functional"===t.type&&(P([{flow:Object.assign({},n.flow,e)}].concat(C.slice(0,50))),D([])),o((function(t){return Object.assign({},t,{flow:Object.assign({},t.flow,e)})}))}),[o,n.flow,C]),B=d.useState({instances:[],connections:[]}),W=B[0],Z=B[1],J=d.useState(!1),Y=J[0],K=J[1],Q=d.useCallback((function(){return K(!1)}),[]),X=d.useCallback((function(){return K(!0)}),[]),$=d.useCallback((function(e){o((function(t){return Object.assign({},t,{boardData:Object.assign({},t.boardData,e)})}))}),[o]);d.useEffect((function(){$({selected:[],viewPort:f.defaultViewPort,from:void 0,to:void 0,lastMousePos:{x:0,y:0}})}),[M.id]),(0,m.useHotkeys)("cmd+z",(function(e){D([].concat(S,[n]));var t=C[0],r=C.slice(1);t&&(o((function(e){return Object.assign({},e,t)})),P(r)),e.preventDefault()}),{text:"Undo last change",group:"Editing"},[n,C,S]);var ee=d.useCallback((function(e,t){E.some((function(e){return t.message.includes(e)}))||D([]),U({part:e},t)}),[U]),te=d.useCallback((function(e){q({absPath:e.source.path})}),[q]),ne=d.useCallback((function(e,t){void 0===t&&(t=-1*f.PART_HEIGHT*1.5);var n=(0,g.createNewPartInstance)(e,t,T.lastMousePos,u);if(n){var r=(0,v.default)(k,(function(e){var t=e.part;if(!(0,p.isVisualPart)(t))throw new Error("Impossible state, adding part to non visual part");t.instances.push(n)}));return U(r,(0,b.functionalChange)("add-part")),Q(),n}}),[T.lastMousePos,k,U,Q,u]),re=d.useCallback(function(){var e=i(r().mark((function e(n){var i,o,a,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n.type,e.next=e.t0===I.OmniBarCmdType.ADD?3:e.t0===I.OmniBarCmdType.ADD_VALUE?5:e.t0===I.OmniBarCmdType.IMPORT?8:16;break;case 3:return L("addPart",{partId:n.data,source:"omnibar"}),e.abrupt("return",ne(n.data));case 5:return null==(i=t.current)||i.requestNewInlineValue(),e.abrupt("break",17);case 8:return e.next=10,s(n.data,{pos:T.lastMousePos});case 10:return o=(0,x.vAdd)({x:0,y:0},T.lastMousePos),a=(0,g.createNewPartInstance)(n.data.part,0,o,u),c=(0,v.default)(k,(function(e){e.part.instances.push(a)})),U(c,(0,b.functionalChange)("add-imported-part")),L("addPart",{partId:n.data.part.id,source:"omnibar"}),e.abrupt("break",17);case 16:h.AppToaster.show({intent:"warning",message:"Not supported yet"});case 17:Q();case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[Q,L,ne,s,T.lastMousePos,u,k,U]),ie=d.useState(),oe=ie[0],ae=ie[1],ue=d.useCallback((function(){return ae(void 0)}),[]),se=d.useCallback((function(e,t){ae({insId:e,pin:t})}),[]);return(0,l.jsx)("div",{className:"flyde-flow-editor",children:function(){if((0,p.isInlineValuePart)(M))throw new Error("Impossible state");return(0,l.jsxs)(d.Fragment,{children:[oe?(0,l.jsx)(j.DataInspectionModal,{item:oe,onClose:ue}):null,(0,l.jsx)(f.VisualPartEditor,{currentInsId:p.ROOT_INS_ID,ref:t,boardData:T,onChangeBoardData:$,part:M,onGoToPartDef:te,onChangePart:ee,resolvedDependencies:u,clipboardData:W,onCopy:Z,partIoEditable:!M.id.startsWith("Trigger"),onInspectPin:se,onShowOmnibar:X,onExtractInlinePart:e.onExtractInlinePart,queuedInputsData:R,initialPadding:e.initialPadding,instancesWithErrors:H},M.id),Y?(0,l.jsx)(I.Omnibar,{flow:k,resolvedParts:u,onCommand:re,visible:Y,onClose:Q}):null]})}()})})))},57779:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BasePartEditor=t.renderCreateIOOption=void 0;var i=n(24246),o=r(n(27378)),a=n(18265),u=n(42272),s=r(n(63300)),c=n(18264),l=n(23489);t.renderCreateIOOption=function(e,t,n){return(0,i.jsx)(u.MenuItem,{icon:"add",text:'Create "'+e+'"',active:t,onClick:n,shouldDismissPopover:!1})};var d=c.MultiSelect.ofType();t.BasePartEditor=function(e){var n,r,c=e.part,p=e.onChange,f=(0,a.entries)(c.inputs),v=f.filter((function(e){return"required"===e[1].mode})).map((function(e){return e[0]})),m=f.filter((function(e){return"optional"===e[1].mode})).map((function(e){return e[0]})),g=f.filter((function(e){return"required-if-connected"===e[1].mode})).map((function(e){return e[0]})),h=o.default.useState(!1),b=h[0],I=h[1],y=(0,a.okeys)(c.outputs),C=o.default.useCallback((function(e){p(Object.assign({},c,{id:e}))}),[c,p]),P=o.default.useCallback((function(e){var t=e?e.split(","):void 0;"[]"===e&&(t=[]),console.log(e,t),p(Object.assign({},c,{completionOutputs:t}))}),[c,p]),_=o.default.useCallback((function(e){var t=e?e.split(","):void 0;p(Object.assign({},c,{reactiveInputs:t}))}),[c,p]),x=o.default.useCallback((function(e,t){var n=(0,s.default)(c,(function(n){n.inputs[e]=(0,a.partInput)(t)}));p(n)}),[c,p]),j=o.default.useCallback((function(e){var t=(0,s.default)(c,(function(t){delete t.inputs[e]}));p(t)}),[c,p]),O=o.default.useCallback((function(e){var t=(0,s.default)(c,(function(t){t.outputs[e]=(0,a.partOutput)()}));p(t)}),[c,p]),w=o.default.useCallback((function(e){var t=(0,s.default)(c,(function(t){delete t.outputs[e]}));p(t)}),[c,p]);o.default.useCallback((function(e){try{var t=JSON.parse(e),n=(0,s.default)(c,(function(e){Object.entries(t).forEach((function(t){var n=t[0],r=(t[1],e.inputs[n]),i=e.outputs[n];r?e.inputs[n]=Object.assign({},r):i&&(e.outputs[n]=Object.assign({},i))}))}));p(n)}catch(r){console.error("cannot parse")}}),[p,c]);return(0,i.jsxs)("div",{className:"base-part-editor",children:[(0,i.jsx)("div",{className:"form-row",children:(0,i.jsx)(u.FormGroup,{label:"Part Name",labelFor:"text-input",labelInfo:"(required)",children:(0,i.jsx)(u.InputGroup,{id:"part-name",disabled:e.idDisabled,placeholder:"Part ID",value:c.id,onChange:function(e){return C(e.target.value)}})})}),(0,i.jsx)(u.FormGroup,{label:"Required Inputs",children:(0,i.jsx)(d,{selectedItems:v,placeholder:"Enter input names here",items:[],tagRenderer:function(e){return e},onItemSelect:function(e){return x(e,"required")},onRemove:j,resetOnSelect:!0,itemRenderer:function(e){return(0,i.jsx)("span",{children:e})},createNewItemFromQuery:function(e){return e},createNewItemRenderer:t.renderCreateIOOption,fill:!0})}),!0!==e.hiddenOutputs?(0,i.jsx)(u.FormGroup,{label:"Outputs",children:(0,i.jsx)(d,{selectedItems:y,placeholder:"Enter output names here",items:[],tagRenderer:function(e){return e},onItemSelect:O,onRemove:w,resetOnSelect:!0,itemRenderer:function(e){return(0,i.jsx)("span",{children:e})},createNewItemFromQuery:function(e){return e},createNewItemRenderer:t.renderCreateIOOption,fill:!0})}):null,(0,i.jsx)(u.Checkbox,{checked:b,onChange:function(e){return I(e.target.checked)},children:"Show advanced options"}),(0,i.jsxs)(u.Collapse,{isOpen:b,children:[(0,i.jsx)(u.FormGroup,{label:"Optional Inputs",children:(0,i.jsx)(d,{selectedItems:m,placeholder:"Enter input names here",items:[],tagRenderer:function(e){return e},onItemSelect:function(e){return x(e,"optional")},onRemove:j,resetOnSelect:!0,itemRenderer:function(e){return(0,i.jsx)("span",{children:e})},createNewItemFromQuery:function(e){return e},createNewItemRenderer:t.renderCreateIOOption,fill:!0})}),(0,i.jsx)(u.FormGroup,{label:"Required-if-connected Inputs",children:(0,i.jsx)(d,{selectedItems:g,placeholder:"Enter input names here",items:[],tagRenderer:function(e){return e},onItemSelect:function(e){return x(e,"required-if-connected")},onRemove:j,resetOnSelect:!0,itemRenderer:function(e){return(0,i.jsx)("span",{children:e})},createNewItemFromQuery:function(e){return e},createNewItemRenderer:t.renderCreateIOOption,fill:!0})}),(0,i.jsx)(u.FormGroup,{label:"Completion Outputs",children:(0,i.jsx)(u.InputGroup,{id:"completion-outputs",placeholder:"completion outputs",value:(null===(n=c.completionOutputs)||void 0===n?void 0:n.join(","))||"",onChange:function(e){return P(e.target.value)}})}),(0,i.jsx)(u.FormGroup,{label:"Reactive Inputs",children:(0,i.jsx)(u.InputGroup,{id:"reactive-inputs",placeholder:"Reactive inputs",value:(null===(r=c.reactiveInputs)||void 0===r?void 0:r.join(","))||"",onChange:function(e){return _(e.target.value)}})})]}),(0,i.jsx)(u.FormGroup,{label:"Preview",children:(0,i.jsx)("div",{className:"preview-wrapper",children:(0,i.jsx)(l.PartPreview,{part:c})})})]})}},51424:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.metaChange=t.functionalChange=void 0;t.functionalChange=function(e){return{type:"functional",message:e}};t.metaChange=function(e){return void 0===e&&(e="n/a"),{type:"meta",message:e}}},88165:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InlineCodeModal=void 0;var u=n(24246),s=o(n(27378)),c=a(n(77324)),l=n(42272),d=a(n(86778)),p=n(52178),f=n(18265),v=n(70099),m="`Result is ${inputs.a + inputs.b}`";t.InlineCodeModal=s.memo((function(e){var t,n=e.initialValue,r=e.initialType,i=s.useState((0,f.isDefined)(n)?n:m),o=i[0],a=i[1],g=s.useState(r||f.InlineValuePartType.VALUE),h=g[0],b=g[1],I=(0,u.jsxs)("div",{children:[(0,u.jsxs)("p",{children:['You can add variables to by referrencing the "inputs" object.',(0,u.jsx)("br",{})," For example:",(0,u.jsx)(l.Code,{children:"`Hello {inputs.name}`"}),' will expose an input pin named "name"']}),(0,u.jsxs)("p",{children:["You can also use ternery expressions, arithmetic operators and more!",(0,u.jsx)("br",{}),"For example:",(0,u.jsx)(l.Code,{children:"inputs.a > inputs.b ? inputs.a + 42 : Math.random() * inputs.b"})]})]}),y=(0,u.jsxs)("span",{children:["Type in any valid JS value, such as ",(0,u.jsx)(l.Code,{children:"true"}),", ",(0,u.jsx)(l.Code,{children:"42"}),","," ",(0,u.jsx)(l.Code,{children:'["bob", "alice", "dave"]'}),".",(0,u.jsx)("br",{})," Dynamic inputs may also be used"]}),C=(0,u.jsxs)("span",{children:["Write any JS code and return a value.",(0,u.jsx)("br",{})," The returned value will be the output.",(0,u.jsx)("br",{})," Example:",(0,u.jsx)(l.Code,{children:"const a = inputs.a; const b = inputs.b; return Math.floor(a/b);"})]}),P=(0,p.getVariables)(o);return s.useEffect((function(){o===m&&h===f.InlineValuePartType.FUNCTION&&a("return "+m),o==="return "+m&&h===f.InlineValuePartType.VALUE&&a(m)}),[o,h]),(0,u.jsxs)(l.Dialog,{isOpen:!0,title:"Inline Value / Code",onClose:e.onCancel,className:"inline-code-modal",children:[(0,u.jsxs)("main",{className:(0,d.default)(l.Classes.DIALOG_BODY),onKeyDown:function(t){"Enter"===t.key&&t.metaKey&&e.onSubmit(h,o)},tabIndex:0,children:[(0,u.jsxs)(l.RadioGroup,{inline:!0,onChange:function(e){return b(e.target.value)},selectedValue:h,children:[(0,u.jsx)(l.Radio,{labelElement:(0,u.jsxs)(s.Fragment,{children:["Value"," ",(0,u.jsx)(v.Tooltip2,{content:y,placement:"top",children:(0,u.jsx)(l.Icon,{icon:"info-sign",intent:"primary"})})]}),value:f.InlineValuePartType.VALUE}),(0,u.jsx)(l.Radio,{labelElement:(0,u.jsxs)(s.Fragment,{children:["Function"," ",(0,u.jsx)(v.Tooltip2,{content:C,placement:"top",children:(0,u.jsx)(l.Icon,{icon:"info-sign",intent:"primary"})})]}),value:f.InlineValuePartType.FUNCTION})]}),(0,u.jsx)(c.default,{height:"80px",theme:"vs-dark",defaultLanguage:"javascript",value:o,onChange:function(e){return a(e||"")},onMount:function(e){e&&e.updateOptions({lineNumbers:"off",minimap:{enabled:!1}})}}),(t=o.includes("return"),t&&h===f.InlineValuePartType.VALUE?(0,u.jsx)(l.Callout,{intent:l.Intent.WARNING,children:'When using the "value" type you are not expected to return anything'}):t||h!==f.InlineValuePartType.FUNCTION?null:(0,u.jsxs)(l.Callout,{intent:l.Intent.DANGER,children:['When using the "function" type you are expected to'," ",(0,u.jsx)(l.Code,{children:"return"})," a value.",(0,u.jsx)("br",{}),"Example: ",(0,u.jsx)(l.Code,{children:"return 42 + Date.now();"})]})),(0,u.jsxs)(l.Callout,{intent:l.Intent.NONE,children:["Input pins detected:"," ",P.length?P.map((function(e){return(0,u.jsx)(l.Code,{children:e},e)})):"None",(0,u.jsx)(v.Tooltip2,{content:I,children:(0,u.jsx)(l.Icon,{icon:"info-sign",intent:l.Intent.PRIMARY})})]})]}),(0,u.jsx)("div",{className:l.Classes.DIALOG_FOOTER,children:(0,u.jsxs)("div",{className:l.Classes.DIALOG_FOOTER_ACTIONS,children:[(0,u.jsx)(l.Button,{onClick:e.onCancel,children:"Cancel"}),(0,u.jsx)(l.Button,{onClick:function(){return e.onSubmit(h,o)},intent:l.Intent.PRIMARY,className:"save-btn",children:"Save"})]})})]})}))},63213:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(88165),t)},52178:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createInlineValuePart=t.getVariables=void 0;var r=n(18265),i=n(18265);t.getVariables=function(e){return(e.match(/inputs\.([a-zA-Z]\w*)/g)||[]).map((function(e){return e.replace(/inputs\./,"")}))};t.createInlineValuePart=function(e){var n=e.code,o=e.customView,a=e.partId,u=e.type,s=(0,t.getVariables)(n).reduce((function(e,t){var n;return Object.assign({},e,((n={})[t]=(0,r.partInput)(),n))}),{}),c={value:(0,r.partOutput)()},l=u===r.InlineValuePartType.FUNCTION?"const result = (function() { "+n+"}());\n  Promise.resolve(result).then(val => outputs.value.next(val))":"const result = ("+n+"); Promise.resolve(result).then(val => outputs.value.next(val))",d=btoa(n);return(0,i.inlineValuePart)({id:a||"Inline Code "+(0,r.randomInt)(99999),inputs:s,outputs:c,runFnRawCode:l,customViewCode:o||n,dataBuilderSource:d,templateType:u,completionOutputs:["value"],defaultStyle:{size:"regular",icon:"code",cssOverride:{fontFamily:"monospace",fontWeight:"500"}},description:"Custom inline "+(u===r.InlineValuePartType.VALUE?"value":"function")})}},24935:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Omnibar=t.OmniBarCmdType=void 0;var u,s=n(24246),c=o(n(27378)),l=n(18264),d=n(18265),p=n(42272),f=a(n(86778));!function(e){e.ADD="add",e.ADD_VALUE="add-value",e.IMPORT="import"}(u=t.OmniBarCmdType||(t.OmniBarCmdType={}));var v=[];t.Omnibar=function(e){var t=e.resolvedParts,n=c.useState(""),r=n[0],i=n[1],o=c.useState(null),a=o[0],m=o[1],g=c.useState([]),h=g[0],b=g[1];c.useEffect((function(){var e=(0,d.keys)(t).map((function(e){return{title:""+t[e].id,cmd:{type:u.ADD,data:e},extra:"current flow"}})),n=h.map((function(e){return{title:""+e.part.id,description:e.part.description,cmd:{type:u.IMPORT,data:e},extra:""+e.module}})),r={title:"Add inline value or code",suggestOnEmpty:!0,cmd:{type:u.ADD_VALUE}},i=[].concat(v,n,[r],e);m(i)}),[t,h]),c.useEffect((function(){e.onRequestImportables&&e.onRequestImportables(r).then((function(e){b(e)}))}),[e,r]);var I=c.useCallback((function(e,t){var n=t.handleClick,r=t.modifiers,i=(t.query,t.index);if(!r.matchesPredicate)return null;var o=""+e.title;return(0,s.jsx)(p.MenuItem,{active:r.active,disabled:r.disabled,onClick:n,text:(0,s.jsxs)("div",{className:(0,f.default)("omnibar-item",{active:r.active}),children:[(0,s.jsxs)("div",{className:"title",children:[o," ",e.extra?(0,s.jsx)("span",{className:"extra",children:e.extra}):null]}),e.description?(0,s.jsx)("div",{className:"description",children:e.description}):null]})},i)}),[]),y=c.useCallback((function(e,t){var n=e.toLowerCase().split("").map((function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")+".*"})).join(""),r=new RegExp(n);return!!t.title.toLowerCase().match(r)}),[]),C=c.useCallback((function(t){e.onCommand(t.cmd),e.onClose()}),[e]);return a?(0,s.jsx)(l.Omnibar,{query:r,onQueryChange:i,onClose:e.onClose,noResults:(0,s.jsx)(p.MenuItem,{disabled:!0,text:"No results."}),itemPredicate:y,isOpen:e.visible,items:a,initialContent:void 0,onItemSelect:C,itemRenderer:I,inputProps:{placeholder:"Search for parts or commands.."}}):null}},62172:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},91312:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(2297),t)},2297:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.usePorts=t.useConfirm=t.usePrompt=t.PortsContext=t.defaultPorts=void 0;var u=n(27378);a(n(62172),t);var s,c=function(){var e=i(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.defaultPorts={prompt:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=i(r().mark((function e(t){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.text,i=t.defaultValue,e.abrupt("return",prompt(""+n,i));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),openFile:(s=i(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e){return s.apply(this,arguments)}),confirm:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=i(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.text,e.abrupt("return",confirm(n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),readFlow:c,setFlow:c,resolveDeps:c,getImportables:c,onExternalFlowChange:c,onInstallRuntimeRequest:c,onRunFlow:c,onStopFlow:c,reportEvent:c},t.PortsContext=(0,u.createContext)(t.defaultPorts);t.usePrompt=function(){var e=(0,u.useContext)(t.PortsContext).prompt;return function(t,n){return e({text:t,defaultValue:n})}};t.useConfirm=function(){var e=(0,u.useContext)(t.PortsContext).confirm;return function(t){return e({text:t})}};t.usePorts=function(){return(0,u.useContext)(t.PortsContext)}},27234:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.groupSelected=void 0;var a=n(18265),u=o(n(63300)),s=n(78504),c=function(){var e=i(r().mark((function e(t,n,i,o,c){var l,d,p,f,v,m,g,h,b,I,y,C;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=n.instances,d=n.connections,p=l.filter((function(e){return t.includes(e.id)})),f=d.filter((function(e){var n=e.from,r=e.to;return-1!==t.indexOf(n.insId)||-1!==t.indexOf(r.insId)})),p.length){e.next=5;break}throw new Error("visual without selections");case 5:return e.next=7,(0,s.createGroup)(p,f,i,c);case 7:return v=e.sent,m=v.visualPart,g=v.renamedInputs,h=v.renamedOutputs,b=p.reduce((function(e,t){return(0,a.middlePos)(t.pos,e)}),l[0].pos),I="ref"===o?(0,a.partInstance)((0,a.createInsId)(m),m.id,{},b):(0,a.inlinePartInstance)((0,a.createInsId)(m),m,{},b),y=l.filter((function(e){return-1===t.indexOf(e.id)})),C=d.map((function(e){var t=e.from.insId+"."+e.from.pinId,n=e.to.insId+"."+e.to.pinId;return g[n]?Object.assign({},e,{to:{insId:I.id,pinId:g[n]}}):h[t]?Object.assign({},e,{from:{insId:I.id,pinId:h[t]}}):e})).filter((function(e){return-1===t.indexOf(e.from.insId)&&-1===t.indexOf(e.to.insId)})),e.abrupt("return",{newPart:m,currentPart:(0,u.default)(n,(function(e){e.instances=[].concat(y,[I]),e.connections=C}))});case 16:case"end":return e.stop()}}),e)})));return function(t,n,r,i,o){return e.apply(this,arguments)}}();t.groupSelected=c},96149:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(90412),t),i(n(12901),t),i(n(77437),t),i(n(40232),t),i(n(99457),t),i(n(51424),t),i(n(23489),t),i(n(69385),t),i(n(10934),t),i(n(14648),t),i(n(26013),t),i(n(70030),t),i(n(11897),t),i(n(99743),t),i(n(57779),t),i(n(13011),t),i(n(12887),t)},24970:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InfoTooltip=void 0;var r=n(24246),i=n(42272),o=n(70099);t.InfoTooltip=function(e){var t=e.content;return(0,r.jsx)(o.Tooltip2,{content:t,placement:"top",children:(0,r.jsx)(i.Icon,{icon:"info-sign",intent:"primary"})})}},60614:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserOnlyReactJson=void 0;var r=n(24246);t.BrowserOnlyReactJson=function(e){if("undefined"==typeof window)return null;var t=n(51366).default;return(0,r.jsx)(t,Object.assign({},e))}},26013:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyticsValueRenderer=void 0;var r=n(24246),i=n(18265),o=n(60614);t.AnalyticsValueRenderer=function(e){var t=e.val;try{var n=JSON.parse(t),a="object"==typeof n?n:{value:n},u=n&&[n.type,n.key,n.props,n.ref].every(i.isDefined),s=u?{jsxValue:n}:a;return(0,r.jsx)(o.BrowserOnlyReactJson,{src:s,name:!1,collapseStringsAfterLength:50,groupArraysAfterLength:5,collapsed:u})}catch(c){return(0,r.jsx)(o.BrowserOnlyReactJson,{src:{value:t},name:!1,collapseStringsAfterLength:50,groupArraysAfterLength:5})}}},78504:function(e,t,n){"use strict";var r=n(48357).default,i=n(45597).default,o=n(1145).default;Object.defineProperty(t,"__esModule",{value:!0}),t.createGroup=void 0;var a=n(18265),u=n(18265),s=n(99743),c=n(41978),l=function(){var e=o(r().mark((function e(t,n,o,l){var d,p,f,v,m,g,h,b,I,y,C,P,_,x,j,O,w,E,S,D,k,T,M,N,R,A;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}throw new Error("cannot create group without instances");case 2:d=t.map((function(e){return e.id})),p=n.filter((function(e){var t=d.includes(e.from.insId),n=d.includes(e.to.insId);return!t&&n})).filter((function(e,t,n){return n.findIndex((function(t){return(0,u.connectionNodeEquals)(t.to,e.to)}))===t})),f=n.filter((function(e){var t=d.includes(e.from.insId),n=d.includes(e.to.insId);return t&&!n})).filter((function(e,t,n){return n.findIndex((function(t){return(0,u.connectionNodeEquals)(t.from,e.from)}))===t})),v={},m={},g={},h={},b=[],I={},y=i(p);case 12:if((C=y()).done){e.next=37;break}if(P=C.value,_=P.to.insId+"."+P.to.pinId,x=P.from.insId+"."+P.from.pinId,j=P.to.pinId,!g[x]){e.next=20;break}return b.push({from:(0,u.externalConnectionNode)(g[x]),to:(0,u.connectionNode)(P.to.insId,P.to.pinId)}),e.abrupt("continue",35);case 20:if(!I[j]){e.next=29;break}return e.next=23,l("Name this input ("+j+" of "+P.to.insId+") is already taken:");case 23:if(e.t1=e.sent,e.t1){e.next=26;break}e.t1="i"+(0,s.rnd)();case 26:e.t0=e.t1,e.next=30;break;case 29:e.t0=j;case 30:O=e.t0,v[_]=O,g[x]=O,b.push({from:(0,u.externalConnectionNode)(O),to:(0,u.connectionNode)(P.to.insId,P.to.pinId)}),I[O]=(0,u.partInput)();case 35:e.next=12;break;case 37:w={},E=i(f);case 39:if((S=E()).done){e.next=64;break}if(D=S.value,k=D.to.insId+"."+D.to.pinId,T=D.from.insId+"."+D.from.pinId,M=D.from.pinId,!h[k]){e.next=47;break}return b.push({from:(0,u.connectionNode)(D.from.insId,D.from.pinId),to:(0,u.externalConnectionNode)(h[k])}),e.abrupt("continue",62);case 47:if(!w[M]){e.next=56;break}return e.next=50,l("Name this output ("+M+" of "+D.from.insId+" is already taken:");case 50:if(e.t3=e.sent,e.t3){e.next=53;break}e.t3="i"+(0,s.rnd)();case 53:e.t2=e.t3,e.next=57;break;case 56:e.t2=M;case 57:N=e.t2,m[T]=N,h[k]=N,b.push({from:(0,u.connectionNode)(D.from.insId,D.from.pinId),to:(0,u.externalConnectionNode)(N)}),w[N]=(0,a.partOutput)();case 62:e.next=39;break;case 64:return t.reduce((function(e,t){return(0,u.middlePos)(t.pos,e)}),t[0].pos),R=n.filter((function(e){return d.includes(e.from.insId)&&d.includes(e.to.insId)})),A={id:o,inputs:I,outputs:w,instances:t,defaultStyle:{size:"large",color:(0,a.pickRandom)(c.partStylePresetColors.map((function(e){return e.color})))},inputsPosition:(0,a.okeys)(I).reduce((function(e,t,n){var r;return Object.assign({},e,((r={})[t]={x:0+100*n,y:0},r))}),{}),outputsPosition:(0,a.okeys)(w).reduce((function(e,t,n){var r;return Object.assign({},e,((r={})[t]={x:0+100*n,y:400},r))}),{}),connections:[].concat(R,b),completionOutputs:(0,a.okeys)(w)},e.abrupt("return",{visualPart:A,renamedInputs:v,renamedOutputs:m});case 68:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}();t.createGroup=l},10934:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.highlightText=void 0;var r=n(24246);function i(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}t.highlightText=function(e,t){var n=0,o=t.split(/\s+/).filter((function(e){return e.length>0})).map(i);if(0===o.length)return[e];for(var a=new RegExp(o.join("|"),"gi"),u=[];;){var s=a.exec(e);if(!s)break;var c=s[0].length,l=e.slice(n,a.lastIndex-c);l.length>0&&u.push(l),n=a.lastIndex,u.push((0,r.jsx)("strong",{children:s[0]},n))}var d=e.slice(n);return d.length>0&&u.push(d),u}},99457:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Loader=void 0;var i=n(24246),o=r(n(44271));t.Loader=function(){return(0,i.jsx)(o.default,{type:"ball-clip-rotate",active:!0})}},12887:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0;var r=n(18265);t.logger=(0,r.debugLogger)("editor")},14264:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.preloadMonaco=void 0;var r=n(77324),i=n(12887),o=!1;t.preloadMonaco=function(){o||r.loader.init().then((function(){(0,i.logger)("monaco preloaded"),o=!0}))}},14648:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useHotkeys=t.currentHotkeys=void 0;var i=r(n(34618)),o=n(27378);t.currentHotkeys=new Map,t.useHotkeys=function(e,n,r,a,u){void 0===a&&(a=[]);var s=(0,o.useCallback)((function(){u&&!u.current||n.apply(void 0,arguments)}),[].concat(a,[n]));(0,o.useEffect)((function(){return(0,i.default)(e,{},s),t.currentHotkeys.set(e,r),function(){t.currentHotkeys.delete(e),i.default.unbind(e,s)}}),[e,s,r])}},11897:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.safeSessionStorage=t.safeLocalStorage=void 0,t.safeLocalStorage={getItem:function(){try{var e;return(e=localStorage).getItem.apply(e,arguments)}catch(t){return null}},setItem:function(){try{var e;return(e=localStorage).setItem.apply(e,arguments)}catch(t){return null}}},t.safeSessionStorage={getItem:function(){try{var e;return(e=sessionStorage).getItem.apply(e,arguments)}catch(t){return null}},setItem:function(){try{var e;return(e=sessionStorage).setItem.apply(e,arguments)}catch(t){return null}}}},49040:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomReactTooltip=void 0;var i=n(24246),o=n(27378),a=r(n(31542)),u=r(n(87661));function s(e){var t=e.children,n=e.domNode;return a.default.createPortal(t,n)}t.CustomReactTooltip=function(e){var t=(0,o.useRef)();return(0,o.useEffect)((function(){t.current=document.createElement("div"),document.body.appendChild(t.current)}),[]),t.current?(0,i.jsx)(s,{domNode:t.current,children:(0,i.jsx)(u.default,Object.assign({effect:"solid"},e))}):null},t.default=t.CustomReactTooltip},77437:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useLocalStorage=t.useResizePref=t.userPreferences=t.useUserPref=void 0;var a,u=o(n(27378)),s=n(12901),c=n(11897);t.useUserPref=function(e,n){var r=u.useState((function(){var r=t.userPreferences.getItem(e);return(0,s.isDefined)(r)?r:n})),i=r[0],o=r[1];u.useEffect((function(){var r=t.userPreferences.getItem(e),i=(0,s.isDefined)(r)?r:n;o(i)}),[e]);return[i,function(n){t.userPreferences.setItem(e,n),console.log("Saved",e,n),o(n)}]},t.userPreferences=(a=function(e){return"up."+e},{getItem:function(e){var t=c.safeLocalStorage.getItem(a(e))||"",n=c.safeSessionStorage.getItem(a(e))||"";try{return JSON.parse(n||t).value}catch(r){return}},setItem:function(e,t,n){void 0===n&&(n=!1);var r=n?sessionStorage:c.safeLocalStorage;try{var i=JSON.stringify({value:t});return r.setItem(a(e),i),!0}catch(o){return console.error("Error saving user preference",o),!1}}});t.useResizePref=function(e,n){var r="resize."+e;return(0,t.useUserPref)(r,n)};var l=function(e){var t=c.safeLocalStorage.getItem(e);if(!t)return null;try{return JSON.parse(t).value}catch(n){return null}};t.useLocalStorage=function(e,t){var n=u.useState(l(e)||t),r=n[0],i=n[1],o=u.useCallback((function(t){c.safeLocalStorage.setItem(e,JSON.stringify({value:t})),i(t)}),[e]);return u.useEffect((function(){l(e)||c.safeLocalStorage.setItem(e,JSON.stringify({value:t}))}),[e,t,o]),[r,o]}},99743:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.totalEnergy=t.itrPhysics=t.hookes=t.coulombs=t.vToStr=t.vNorm=t.vLen=t.vSub=t.vAdd=t.vDiv=t.vMul=t.vZero=t.rnd=t.vec=t.size=void 0;t.size=function(e,t){return{width:e,height:t}};t.vec=function(e,t){return{x:e,y:t}};t.rnd=function(e,t){return void 0===e&&(e=100),void 0===t&&(t=0),Math.floor(Math.random()*(e-t))+t},t.vZero={x:0,y:0};t.vMul=function(e,t){return{x:e.x*t,y:e.y*t}};t.vDiv=function(e,n){var r=e.x,i=e.y;return(0,t.vMul)({x:r,y:i},1/n)};t.vAdd=function(e,t){return{x:e.x+t.x,y:e.y+t.y}};t.vSub=function(e,n){return(0,t.vAdd)(e,(0,t.vMul)(n,-1))};t.vLen=function(e){var t=e.x,n=e.y;return Math.sqrt(t*t+n*n)};t.vNorm=function(e){return(0,t.vDiv)(e,(0,t.vLen)(e)||1)};t.vToStr=function(e){var t=e.x,n=e.y;return t.toFixed(1)+","+n.toFixed(1)};t.coulombs=function(e,n,r){var i=(0,t.vLen)((0,t.vSub)(e.p,n.p));if(0===i){var o=(0,t.vec)(2*Math.random()-1,2*Math.random()-1),a=e.m*n.m/Math.pow(10,2);return(0,t.vMul)(o,a*r)}var u=(0,t.vNorm)((0,t.vSub)(n.p,e.p)),s=e.m*n.m/Math.pow(i+.1,2);return(0,t.vMul)(u,s*r)};t.hookes=function(e,n,r,i,o){var a=(0,t.vLen)((0,t.vSub)(e.p,n.p)),u=(0,t.vNorm)((0,t.vSub)(e.p,n.p)),s=0;return a<r?s=r-a:a>i&&(s=i-a),(0,t.vMul)(u,o*s)};t.itrPhysics=function(e,n){var r=n.p,i=n.v,o=n.f,a=n.m,u=(0,t.vDiv)(o,a),s=e/1e3,c=(0,t.vAdd)((0,t.vMul)(u,s),i),l=(0,t.vAdd)((0,t.vMul)(c,s),r);return Object.assign({},n,{p:l,v:c,f:(0,t.vec)(0,0)})};t.totalEnergy=function(e){return e.reduce((function(e,n){var r=(0,t.vLen)(n.v);return e+.5*n.m*r*r}),0)}},40232:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateToast=t.toastMsg=t.AppToaster=void 0;var r=n(42272);t.AppToaster=function(){try{return r.Toaster.create({className:"app-toaster",position:r.Position.BOTTOM_RIGHT})}catch(e){return{}}}();t.toastMsg=function(e,n,r){return t.AppToaster.show({message:e,intent:n,timeout:r})};t.updateToast=function(e,n,r){return t.AppToaster.show({message:n,intent:r},e)}},12901:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.preventDefaultAnd=t.isLocal=t.fullTime=t.timeAgoFromDt=t.timeAgo=t.toString=t.isDefined=t.set=t.createOmap=t.toOmap=t.values=t.keys=t.entries=void 0;var i=n(13011),o=n(18265),a=r(n(61320));t.entries=function(e){return Object.keys(e).map((function(t){return[t,e[t]]}))};t.keys=function(e){return Object.keys(e)};t.values=function(e){return Object.keys(e).map((function(t){return e[t]}))};t.toOmap=function(e){return Array.from(e.entries()).reduce((function(e,t){var n,r=t[0],i=t[1];return Object.assign({},e,((n={})[r]=i,n))}),{})};t.createOmap=function(e){return void 0===e&&(e=[]),e.reduce((function(e,t){var n;return Object.assign({},e,((n={})[t[0]]=t[1],n))}),{})};t.set=function(e,t,n){e[t]=n};t.isDefined=function(e){return void 0!==e};t.toString=function(e){var t=typeof e;if(""===e)return"(empty string)";if((0,i.isJsxValue)(e))return"JSX Value";if((0,o.isStaticValueVisualPart)(e))return"Embedded Part";if((0,o.isEnvValue)(e))return(0,o.getEnvKeyFromValue)(e);if("object"===t)try{var n=JSON.stringify(e);return"{}"===n?"Empty object":n}catch(r){return"Object (cannot stringify)"}return""+e};t.timeAgo=function(e){return(0,a.default)(new Date(e)).fromNow()};t.timeAgoFromDt=function(e){return(0,a.default)(Date.now()-e).fromNow()};t.fullTime=function(e){return(0,a.default)(new Date(e)).toString()};t.isLocal=function(){return location.href.includes(":300")};t.preventDefaultAnd=function(e){return function(t){t.preventDefault(),e(t)}}},9631:function(e,t,n){"use strict";var r,i=n(48357).default,o=n(1145).default,a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),u=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return u(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ActionButton=t.ActionsMenu=t.ActionType=void 0;var c,l=n(24246),d=n(42272),p=n(70099),f=n(18265),v=s(n(27378)),m=n(58553),g=n(91312),h=n(14648),b=n(77437),I=n(40232),y=n(70760),C=n(32330),P=n(23636);!function(e){e.AddPart="add-part",e.RemovePart="remove-part",e.Group="group",e.UnGroup="un-group",e.AddInlineValue="add-inline-value",e.Inspect="inspect",e.Run="run"}(c=t.ActionType||(t.ActionType={}));t.ActionsMenu=function(e){var n=e.onAction,r=e.selectedInstances,a=e.resolvedParts,u=e.part,s=e.from,p=e.to,C=e.hotkeysEnabled,x=e.showRunFlowOptions,j=(0,m.useDependenciesContext)().onRequestImportables,O=v.default.useState(!1),w=O[0],E=O[1],S=v.default.useState(!1),D=S[0],k=S[1],T=(0,b.useLocalStorage)("hideHotkeyHintMap",{}),M=T[0],N=T[1],R=(0,v.useCallback)((function(){E(!1)}),[]),A=(0,g.usePorts)().onRunFlow,V=(0,v.useCallback)((function(e){return k(!1),A(e)}),[A]),H=[];if(H.push(c.AddPart),H.push(c.AddInlineValue),1===r.length){var z=u.instances.find((function(e){return e.id===r[0]}));if(z)try{var G=(0,f.getPartDef)(z,a);(0,f.isVisualPart)(G)&&H.push(c.UnGroup)}catch(U){console.error("Could not find part with id "+r[0]+" - "+U)}else console.error("Could not find instance with id "+r[0])}x&&H.push(c.Run),r.length>0&&H.push(c.Group),(1===r.length||s||p)&&H.push(c.Inspect),r.length>0&&H.push(c.RemovePart);var F=(0,v.useCallback)((function(e,t){var n;N(Object.assign({},M,((n={})[e]=!0,n))),I.AppToaster.dismiss(t)}),[M,N]),q=(0,v.useCallback)((function(e,t){var r=_[e].hotkey;if("click"===t.type&&r&&!M[r])var a=(0,I.toastMsg)((0,l.jsxs)(l.Fragment,{children:["Did you know? you can also use the hotkey"," ",(0,l.jsx)("kbd",{className:"hotkey",children:r})," to"," ",_[e].text.replace(/^[A-Z]/,(function(e){return e.toLowerCase()})),(0,l.jsxs)(d.Button,{minimal:!0,small:!0,onClick:function(){return F(r,a)},children:[" ","Don't show again"," "]})]}),"none",3e3);switch(e){case c.AddPart:E(!0);break;case c.Run:o(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object.keys(u.inputs).length>0?k(!0):A({});case 1:case"end":return e.stop()}}),e)})))();break;default:n({type:e,data:void 0})}}),[M,n,F,A,u.inputs]);Object.entries(_).forEach((function(e){var t=e[0],n=e[1];n.hotkey&&(0,h.useHotkeys)(n.hotkey,(function(e){var r;(e.preventDefault(),H.includes(t))&&(q(t,e),N(Object.assign({},M,((r={})[n.hotkey]=!0,r))))}),{text:n.text,group:"Action menu hotkeys"},[H],C)}));var L=(0,v.useCallback)((function(e){n({type:c.AddPart,data:{importablePart:e}})}),[n]);return(0,l.jsxs)("div",{className:"actions-menu",children:[H.map((function(e){return(0,l.jsx)(t.ActionButton,{type:e,onClick:q},e)})),w?(0,l.jsx)(y.AddPartMenu,{onRequestImportables:j,onAddPart:L,onClose:R}):null,D?(0,l.jsx)(P.RunFlowModal,{onClose:function(){return k(!1)},onRun:V,part:u}):null]})};var _=((r={})[c.AddPart]={icon:C.addPartIcon,text:'Open the "add part" menu',hotkey:"a"},r[c.RemovePart]={icon:C.removePartIcon,text:"Remove selected instances",hotkey:"backspace"},r[c.Group]={icon:C.groupIcon,text:"Group selection into a new part",hotkey:"g"},r[c.UnGroup]={icon:C.ungroupIcon,text:"Ungroup selected visual part"},r[c.Inspect]={icon:C.inspectIcon,text:"Inspect data",hotkey:"i"},r[c.AddInlineValue]={icon:C.pencilIcon,text:"Add value / inline function",hotkey:"v"},r[c.Run]={icon:C.playIcon,text:"Run flow",hotkey:"r"},r),x={icon:"",text:"N/A",hotkey:void 0};t.ActionButton=function(e){var t,n=e.onClick,r=e.type,i=(0,v.useCallback)((function(e){return n(r,e)}),[n,r]),o=null!==(t=_[r])&&void 0!==t?t:x,a=o.hotkey?(0,l.jsxs)("span",{children:[o.text," ",(0,l.jsx)("kbd",{className:"hotkey",children:o.hotkey})]}):o.text;return(0,l.jsx)("div",{className:"action-button",onClick:i,children:(0,l.jsx)(p.Tooltip2,{hoverOpenDelay:100,content:a,className:"icon-wrapper",popoverClassName:"action-button-tooltip",children:(0,l.jsx)("span",{dangerouslySetInnerHTML:{__html:o.icon}})})})}},17982:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AddPartMenu=t.AddPartMenuFilterTree=void 0;var u=n(24246),s=n(42272),c=n(70099),l=a(n(86778)),d=o(n(27378)),p=n(91312),f=n(24970),v=n(99457),m=n(61335),g=n(83696);t.AddPartMenuFilterTree=s.Tree.ofType();function h(e,t,n){var r=e.external.map((function(e){return{id:e.module,label:e.module,hasCaret:!0,nodeData:{type:"external",module:e.module},isSelected:"external"===(null==t?void 0:t.type)&&t.module===e.module,isExpanded:n.has(e.module),childNodes:e.namespaces.map((function(r){return{id:e.module+"/"+r,label:r,hasCaret:!1,isSelected:"external"===(null==t?void 0:t.type)&&t.module===e.module&&t.namespace===r,isExpanded:n.has(e.module+"/"+r),nodeData:{type:"external",module:e.module,namespace:r}}}))}})),i={id:"internal",label:"Current Project",nodeData:{type:"internal"},isExpanded:n.has("internal"),hasCaret:!0,isSelected:"internal"===t.type,childNodes:e.internal.files.map((function(e){return{id:e,label:e,isSelected:"internal"===t.type&&t.file===e,hasCaret:!1,isExpanded:n.has(e),nodeData:{type:"internal",file:e}}}))};return[].concat(r,[i])}function b(e){return/\.flyde(\.[jt]s)?$/.test(e.module)}t.AddPartMenu=function(e){var n=e.onRequestImportables,r=e.onAddPart,i=e.onClose,o=d.default.useState(),a=o[0],I=o[1],y=d.default.useState([]),C=y[0],P=y[1],_=d.default.useState(new Set),x=_[0],j=_[1],O=d.default.useState(""),w=O[0],E=O[1],S=d.default.useState({type:"all"}),D=S[0],k=S[1],T=d.default.useState(null),M=T[0],N=T[1],R=d.default.useState(null),A=R[0],V=R[1],H=d.default.useState(null),z=H[0],G=H[1],F=(0,d.useCallback)((function(e){x.add(e.id),j(new Set(x))}),[x]),q=(0,d.useCallback)((function(e){x.delete(e.id),j(new Set(x))}),[x]),L=(0,d.useCallback)((function(e){r(e),i()}),[r,i]),U=(0,p.usePorts)(),B=U.onInstallRuntimeRequest,W=U.reportEvent;(0,d.useEffect)((function(){W("addPartMenuOpen",{})}),[W]),(0,d.useEffect)((function(){V(null==a?void 0:a.flatMap((function(e){var t,n,r;if(D)if("external"===D.type){if((e.module!==D.module||D.namespace)&&e.part.namespace!==D.namespace)return[]}else if("internal"===D.type&&(!b(e)||D.file&&e.module!==D.file))return[];if(w){var i=((null!==(n=null===(t=e.part.searchKeywords)||void 0===t?void 0:t.join(" "))&&void 0!==n?n:[])+" "+e.part.id+" "+(null!==(r=e.part.namespace)&&void 0!==r?r:"")+" "+e.part.description).toLowerCase().indexOf(w.toLowerCase());return-1===i?[]:[{importable:e,score:i}]}return[{importable:e,score:1}]})).sort((function(e,t){return e.score-t.score})).map((function(e){return e.importable})))}),[a,D,w]),(0,d.useEffect)((function(){n().then((function(e){var t=e.importables,n=e.errors;P(n);var r=t.filter((function(e){return!b(e)})).reduce((function(e,t){var n,r,i;null!==(n=e[i=t.module])&&void 0!==n||(e[i]=[]);var o=null!==(r=t.part.namespace)&&void 0!==r?r:"";return e[t.module].includes(o)||e[t.module].push(o),e}),{}),i=t.filter(b).map((function(e){return e.module}));N({external:Object.entries(r).map((function(e){return{module:e[0],namespaces:e[1]}})),internal:{files:i}}),I(t),j(new Set(["internal"].concat(Object.keys(r))))}))}),[n]);var Z=(0,d.useCallback)((function(e){switch(e.key){case"ArrowDown":case"ArrowUp":if(e.preventDefault(),A&&!z)return void G(A["ArrowDown"===e.key?0:A.length-1]);if(A&&z){var t=A.findIndex((function(e){return e===z})),n="ArrowDown"===e.key?t+1:t-1;n=(n=n<0?A.length-1:n)>=A.length?0:n,G(A[n])}break;case"Enter":z&&L(z)}}),[A,z,L]),J=(0,d.useCallback)((function(e){var t=e.nodeData;JSON.stringify(t)===JSON.stringify(D)?"external"===t.type?t.namespace?k({type:"external",module:t.module}):k({type:"all"}):"internal"===t.type&&(t.file?k({type:"internal"}):k({type:"all"})):k(t)}),[D]),Y=!a||a.some((function(e){return e.module.includes("@flyde/stdlib")})),K=(0,d.useCallback)((function(){B(),i()}),[i,B]);return(0,u.jsx)(s.Dialog,{isOpen:!0,title:"Add Part Menu",onClose:e.onClose,className:"add-part-menu",isCloseButtonShown:!0,children:(0,u.jsxs)("main",{className:(0,l.default)(s.Classes.DIALOG_BODY),children:[(0,u.jsxs)("header",{children:[(0,u.jsxs)("div",{className:"bp3-input-group",children:[(0,u.jsx)(s.Icon,{icon:"search"}),(0,u.jsx)("input",{className:"bp3-input",type:"search",placeholder:"Search input",dir:"auto",autoFocus:!0,onChange:function(e){return E(e.target.value)},value:w,onKeyDown:Z})]}),Y?null:(0,u.jsxs)(s.Callout,{intent:s.Intent.NONE,style:{marginTop:10},children:["Using built-in @flyde/stdlib. It's recommended to explicitly install it instead."," ",(0,u.jsx)(s.Button,{minimal:!0,small:!0,intent:s.Intent.PRIMARY,onClick:K,children:"Click here to install it using npm/yarn"})]})]}),(0,u.jsx)("div",{className:"content-wrapper",children:a?(0,u.jsxs)(d.default.Fragment,{children:[(0,u.jsxs)("aside",{children:[(0,u.jsxs)("div",{className:"filter-header",children:["Filter by package"," ",(0,u.jsx)(c.Tooltip2,{content:(0,u.jsxs)("span",{children:["Click to learn more about how packages work in Flyde"," "]}),hoverCloseDelay:1500,children:(0,u.jsx)("a",{target:"_blank",href:"https://www.flyde.dev/docs/packages",rel:"noreferrer",children:(0,u.jsx)(s.Icon,{icon:"help",intent:"primary",iconSize:12})})})]}),(0,u.jsx)("div",{className:"tree-container",children:(0,u.jsx)(t.AddPartMenuFilterTree,{contents:h(M,D,x),onNodeCollapse:q,onNodeExpand:F,onNodeClick:J,className:s.Classes.ELEVATION_0})})]}),(0,u.jsx)("main",{children:A?0===A.length?(0,u.jsxs)("div",{className:"no-results",children:[(0,u.jsx)(g.AddPartMenuResultsSummary,{filter:D,onChangeFilter:k,query:w,onChangeQuery:E,resultsCount:A.length}),(0,u.jsxs)(s.Callout,{className:"callout",intent:"primary",children:["Can't find a suitable part? Create one yourself!"," ",(0,u.jsx)("a",{href:"https://www.flyde.dev/docs/code-parts",target:"_blank",rel:"noreferrer",children:"Learn more"})]})]}):(0,u.jsxs)(d.default.Fragment,{children:[(0,u.jsx)(g.AddPartMenuResultsSummary,{filter:D,onChangeFilter:k,query:w,onChangeQuery:E,resultsCount:A.length}),(0,u.jsx)("div",{className:"results",children:A.map((function(e){return(0,u.jsx)(m.AddPartMenuListItem,{importablePart:e,onAdd:L,selected:(null==z?void 0:z.part)===e.part,onSelect:G,onSetFilter:k},e.part.id+e.part.namespace+e.module)}))})]}):(0,u.jsx)(v.Loader,{})})]}):(0,u.jsx)(v.Loader,{})}),C.length>0?(0,u.jsxs)(s.Callout,{intent:"warning",style:{marginTop:"10px"},children:["Found ",C.length," corrupt flow(s)."," ",(0,u.jsx)(f.InfoTooltip,{content:C.map((function(e){return e.path})).join(", ")})," "]}):null]})})}},59021:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AddPartMenuListItem=void 0;var u=n(24246),s=n(42272),c=a(n(86778)),l=o(n(27378));t.AddPartMenuListItem=function(e){var t=e.importablePart,n=e.onSetFilter,r=e.onAdd,i=e.onSelect,o=t.part,a=t.module,d=o.id,p=o.description,f=l.default.useRef(null);l.default.useEffect((function(){e.selected&&f.current&&f.current.scrollIntoView({block:"center"})}),[e.selected]);var v=(0,l.useCallback)((function(){r(t)}),[r,t]),m=(0,l.useCallback)((function(){i(t)}),[i,t]);return(0,u.jsxs)("div",{className:(0,c.default)("add-part-menu-list-item",{selected:e.selected}),ref:f,onClick:m,children:[(0,u.jsxs)("div",{className:"content",children:[(0,u.jsxs)("header",{children:[(0,u.jsx)("span",{className:"id",children:d}),(0,u.jsxs)(s.Tag,{interactive:!0,onClick:function(){return n({type:"external",module:a,namespace:o.namespace})},className:"source",minimal:!0,children:[a,o.namespace?" / "+o.namespace:null]})]}),(0,u.jsx)("div",{className:"description",children:p||(0,u.jsx)("em",{children:"No description"})})]}),(0,u.jsx)("aside",{children:(0,u.jsx)(s.Button,{onClick:v,children:"Add"})})]})}},61335:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(59021),t)},53972:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddPartMenuResultsSummary=void 0;var r=n(24246),i=n(42272);t.AddPartMenuResultsSummary=function(e){var t=e.resultsCount,n=e.query,o=e.filter,a=e.onChangeFilter,u=e.onChangeQuery;return(0,r.jsxs)("div",{className:"add-part-menu-results-summary",children:[t?"Showing "+t+" result"+(t>1?"s":""):"No results found","\xa0",n?(0,r.jsxs)(r.Fragment,{children:["matching query\xa0",(0,r.jsxs)(i.Tag,{minimal:!0,interactive:!0,onRemove:function(){return u("")},children:['"',n,'"']})]}):null,"all"===o.type?null:"external"===o.type?(0,r.jsxs)(r.Fragment,{children:["from \xa0",(0,r.jsxs)(i.Tag,{minimal:!0,interactive:!0,onRemove:function(){return a({type:"all"})},children:["package ",o.module,o.namespace?" / "+o.namespace:null]})]}):(0,r.jsxs)(r.Fragment,{children:["from \xa0",(0,r.jsxs)(i.Tag,{minimal:!0,interactive:!0,onRemove:function(){return a({type:"all"})},children:["\xa0this project ",o.file?" / "+o.file:null]})]})]})}},83696:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(53972),t)},70760:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(17982),t)},37160:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RunFlowModal=void 0;var u=n(24246),s=o(n(27378)),c=a(n(77324)),l=n(42272),d=a(n(86778)),p=n(77437);t.RunFlowModal=s.memo((function(e){var t=e.onRun,n=e.onClose,r=e.part,i=(0,p.useLocalStorage)("run-inputs-"+r.id,Object.keys(r.inputs).reduce((function(e,t){return e[t]="Enter a value for input "+t,e}),{})),o=i[0],a=i[1],f=s.useState(JSON.stringify(o,null,2)),v=f[0],m=f[1],g=s.useCallback((function(){var e=JSON.parse(v);a(e),t(e)}),[t,a,v]),h=Object.keys(r.inputs).filter((function(e){return"required"!==r.inputs[e].mode}));return(0,u.jsxs)(l.Dialog,{isOpen:!0,onClose:e.onClose,className:"run-flow-modal",children:[(0,u.jsxs)("main",{className:(0,d.default)(l.Classes.DIALOG_BODY),onKeyDown:function(e){"Enter"===e.key&&e.metaKey&&g()},tabIndex:0,children:[(0,u.jsx)("strong",{children:"This part receives external inputs. Enter values for each input below:"}),(0,u.jsx)(c.default,{height:"80px",theme:"vs-dark",defaultLanguage:"json",value:v,onChange:function(e){return m(null!=e?e:"")},onMount:function(e){e&&e.updateOptions({lineNumbers:"off",minimap:{enabled:!1}})}}),h.length>0?(0,u.jsxs)(l.Callout,{intent:l.Intent.NONE,children:["Note: input(s) ",(0,u.jsx)("code",{children:h.join(", ")})," are optional"]}):null]}),(0,u.jsx)("div",{className:l.Classes.DIALOG_FOOTER,children:(0,u.jsxs)("div",{className:l.Classes.DIALOG_FOOTER_ACTIONS,children:[(0,u.jsx)(l.Button,{onClick:n,children:"Close"}),(0,u.jsx)(l.Button,{onClick:g,intent:l.Intent.PRIMARY,className:"run-btn",children:"Run"})]})})]})}))},23636:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(37160),t)},32330:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stopIcon=t.playIcon=t.pencilIcon=t.ungroupIcon=t.groupIcon=t.inspectIcon=t.removePartIcon=t.addPartIcon=void 0,t.addPartIcon='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M15 7H9V1C9 0.734784 8.89464 0.48043 8.70711 0.292893C8.51957 0.105357 8.26522 0 8 0C7.73478 0 7.48043 0.105357 7.29289 0.292893C7.10536 0.48043 7 0.734784 7 1V7H1C0.734784 7 0.48043 7.10536 0.292893 7.29289C0.105357 7.48043 0 7.73478 0 8C0 8.26522 0.105357 8.51957 0.292893 8.70711C0.48043 8.89464 0.734784 9 1 9H7V15C7 15.2652 7.10536 15.5196 7.29289 15.7071C7.48043 15.8946 7.73478 16 8 16C8.26522 16 8.51957 15.8946 8.70711 15.7071C8.89464 15.5196 9 15.2652 9 15V9H15C15.2652 9 15.5196 8.89464 15.7071 8.70711C15.8946 8.51957 16 8.26522 16 8C16 7.73478 15.8946 7.48043 15.7071 7.29289C15.5196 7.10536 15.2652 7 15 7Z"/>\n</svg>',t.removePartIcon='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M10.0002 18C10.2655 18 10.5198 17.8946 10.7074 17.7071C10.8949 17.5196 11.0002 17.2652 11.0002 17V11C11.0002 10.7348 10.8949 10.4804 10.7074 10.2929C10.5198 10.1054 10.2655 10 10.0002 10C9.73503 10 9.48067 10.1054 9.29314 10.2929C9.1056 10.4804 9.00024 10.7348 9.00024 11V17C9.00024 17.2652 9.1056 17.5196 9.29314 17.7071C9.48067 17.8946 9.73503 18 10.0002 18ZM20.0002 6H16.0002V5C16.0002 4.20435 15.6842 3.44129 15.1216 2.87868C14.559 2.31607 13.7959 2 13.0002 2H11.0002C10.2046 2 9.44153 2.31607 8.87892 2.87868C8.31631 3.44129 8.00024 4.20435 8.00024 5V6H4.00024C3.73503 6 3.48067 6.10536 3.29314 6.29289C3.1056 6.48043 3.00024 6.73478 3.00024 7C3.00024 7.26522 3.1056 7.51957 3.29314 7.70711C3.48067 7.89464 3.73503 8 4.00024 8H5.00024V19C5.00024 19.7956 5.31631 20.5587 5.87892 21.1213C6.44153 21.6839 7.20459 22 8.00024 22H16.0002C16.7959 22 17.559 21.6839 18.1216 21.1213C18.6842 20.5587 19.0002 19.7956 19.0002 19V8H20.0002C20.2655 8 20.5198 7.89464 20.7074 7.70711C20.8949 7.51957 21.0002 7.26522 21.0002 7C21.0002 6.73478 20.8949 6.48043 20.7074 6.29289C20.5198 6.10536 20.2655 6 20.0002 6ZM10.0002 5C10.0002 4.73478 10.1056 4.48043 10.2931 4.29289C10.4807 4.10536 10.735 4 11.0002 4H13.0002C13.2655 4 13.5198 4.10536 13.7074 4.29289C13.8949 4.48043 14.0002 4.73478 14.0002 5V6H10.0002V5ZM17.0002 19C17.0002 19.2652 16.8949 19.5196 16.7074 19.7071C16.5198 19.8946 16.2655 20 16.0002 20H8.00024C7.73503 20 7.48067 19.8946 7.29314 19.7071C7.1056 19.5196 7.00024 19.2652 7.00024 19V8H17.0002V19ZM14.0002 18C14.2655 18 14.5198 17.8946 14.7074 17.7071C14.8949 17.5196 15.0002 17.2652 15.0002 17V11C15.0002 10.7348 14.8949 10.4804 14.7074 10.2929C14.5198 10.1054 14.2655 10 14.0002 10C13.735 10 13.4807 10.1054 13.2931 10.2929C13.1056 10.4804 13.0002 10.7348 13.0002 11V17C13.0002 17.2652 13.1056 17.5196 13.2931 17.7071C13.4807 17.8946 13.735 18 14.0002 18Z"/>\n</svg>',t.inspectIcon='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M21.07 16.8302L19 14.7102C18.5547 14.2869 17.9931 14.0065 17.3872 13.9049C16.7813 13.8034 16.1589 13.8853 15.6 14.1402L14.7 13.2402C15.7605 11.8231 16.2449 10.0569 16.0555 8.29702C15.8662 6.53718 15.0172 4.91441 13.6794 3.75539C12.3417 2.59636 10.6145 1.98714 8.84565 2.05037C7.07678 2.1136 5.39754 2.84458 4.14596 4.09615C2.89438 5.34773 2.1634 7.02698 2.10017 8.79585C2.03695 10.5647 2.64617 12.2919 3.80519 13.6296C4.96421 14.9674 6.58699 15.8164 8.34683 16.0057C10.1067 16.1951 11.8729 15.7107 13.29 14.6502L14.18 15.5402C13.8951 16.0998 13.793 16.7348 13.8881 17.3555C13.9831 17.9762 14.2706 18.5515 14.71 19.0002L16.83 21.1202C17.3925 21.682 18.155 21.9975 18.95 21.9975C19.745 21.9975 20.5075 21.682 21.07 21.1202C21.3557 20.8408 21.5828 20.5071 21.7378 20.1388C21.8928 19.7704 21.9726 19.3748 21.9726 18.9752C21.9726 18.5756 21.8928 18.1799 21.7378 17.8116C21.5828 17.4432 21.3557 17.1096 21.07 16.8302V16.8302ZM12.59 12.5902C11.8902 13.2882 10.9993 13.7631 10.0297 13.955C9.06017 14.1469 8.05549 14.0472 7.14259 13.6684C6.2297 13.2896 5.44955 12.6487 4.9007 11.8267C4.35185 11.0048 4.05893 10.0386 4.05893 9.05019C4.05893 8.06182 4.35185 7.09562 4.9007 6.27365C5.44955 5.45168 6.2297 4.81081 7.14259 4.432C8.05549 4.05319 9.06017 3.95343 10.0297 4.14534C10.9993 4.33724 11.8902 4.81219 12.59 5.51019C13.0556 5.97464 13.4251 6.5264 13.6771 7.13385C13.9292 7.7413 14.0589 8.39251 14.0589 9.05019C14.0589 9.70786 13.9292 10.3591 13.6771 10.9665C13.4251 11.574 13.0556 12.1257 12.59 12.5902V12.5902ZM19.66 19.6602C19.567 19.7539 19.4564 19.8283 19.3346 19.8791C19.2127 19.9298 19.082 19.956 18.95 19.956C18.818 19.956 18.6873 19.9298 18.5654 19.8791C18.4436 19.8283 18.333 19.7539 18.24 19.6602L16.12 17.5402C16.0263 17.4472 15.9519 17.3366 15.9011 17.2148C15.8503 17.0929 15.8242 16.9622 15.8242 16.8302C15.8242 16.6982 15.8503 16.5675 15.9011 16.4456C15.9519 16.3237 16.0263 16.2131 16.12 16.1202C16.213 16.0265 16.3236 15.9521 16.4454 15.9013C16.5673 15.8505 16.698 15.8244 16.83 15.8244C16.962 15.8244 17.0927 15.8505 17.2146 15.9013C17.3364 15.9521 17.447 16.0265 17.54 16.1202L19.66 18.2402C19.7537 18.3331 19.8281 18.4437 19.8789 18.5656C19.9297 18.6875 19.9558 18.8182 19.9558 18.9502C19.9558 19.0822 19.9297 19.2129 19.8789 19.3348C19.8281 19.4566 19.7537 19.5672 19.66 19.6602V19.6602Z"/>\n</svg>\n',t.groupIcon='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M16 9.99998H14V7.99998C14 7.73477 13.8946 7.48041 13.7071 7.29288C13.5196 7.10534 13.2652 6.99998 13 6.99998H7.99998C7.73477 6.99998 7.48041 7.10534 7.29288 7.29288C7.10534 7.48041 6.99998 7.73477 6.99998 7.99998V13C6.99998 13.2652 7.10534 13.5196 7.29288 13.7071C7.48041 13.8946 7.73477 14 7.99998 14H9.99998V16C9.99998 16.2652 10.1053 16.5196 10.2929 16.7071C10.4804 16.8946 10.7348 17 11 17H16C16.2652 17 16.5196 16.8946 16.7071 16.7071C16.8946 16.5196 17 16.2652 17 16V11C17 10.7348 16.8946 10.4804 16.7071 10.2929C16.5196 10.1053 16.2652 9.99998 16 9.99998ZM9.99998 11V12H8.99998V8.99998H12V9.99998H11C10.7348 9.99998 10.4804 10.1053 10.2929 10.2929C10.1053 10.4804 9.99998 10.7348 9.99998 11ZM15 15H12V12H15V15ZM21 18.28V5.71998C21.2704 5.56955 21.5023 5.3584 21.6773 5.10317C21.8523 4.84793 21.9657 4.55556 22.0085 4.24906C22.0514 3.94257 22.0225 3.63031 21.9242 3.33686C21.8259 3.04342 21.6608 2.77679 21.442 2.55795C21.2232 2.33912 20.9565 2.17406 20.6631 2.07575C20.3697 1.97745 20.0574 1.94858 19.7509 1.99143C19.4444 2.03427 19.152 2.14766 18.8968 2.32267C18.6416 2.49768 18.4304 2.72953 18.28 2.99998H5.71998C5.56955 2.72953 5.3584 2.49768 5.10317 2.32267C4.84793 2.14766 4.55556 2.03427 4.24906 1.99143C3.94257 1.94858 3.63031 1.97745 3.33686 2.07575C3.04342 2.17406 2.77679 2.33912 2.55795 2.55795C2.33912 2.77679 2.17406 3.04342 2.07575 3.33686C1.97745 3.63031 1.94858 3.94257 1.99143 4.24906C2.03427 4.55556 2.14766 4.84793 2.32267 5.10317C2.49768 5.3584 2.72953 5.56955 2.99998 5.71998V18.28C2.72953 18.4304 2.49768 18.6416 2.32267 18.8968C2.14766 19.152 2.03427 19.4444 1.99143 19.7509C1.94858 20.0574 1.97745 20.3697 2.07575 20.6631C2.17406 20.9565 2.33912 21.2232 2.55795 21.442C2.77679 21.6608 3.04342 21.8259 3.33686 21.9242C3.63031 22.0225 3.94257 22.0514 4.24906 22.0085C4.55556 21.9657 4.84793 21.8523 5.10317 21.6773C5.3584 21.5023 5.56955 21.2704 5.71998 21H18.28C18.4304 21.2704 18.6416 21.5023 18.8968 21.6773C19.152 21.8523 19.4444 21.9657 19.7509 22.0085C20.0574 22.0514 20.3697 22.0225 20.6631 21.9242C20.9565 21.8259 21.2232 21.6608 21.442 21.442C21.6608 21.2232 21.8259 20.9565 21.9242 20.6631C22.0225 20.3697 22.0514 20.0574 22.0085 19.7509C21.9657 19.4444 21.8523 19.152 21.6773 18.8968C21.5023 18.6416 21.2704 18.4304 21 18.28ZM19 18.28C18.6993 18.4504 18.4504 18.6993 18.28 19H5.71998C5.54956 18.6993 5.30071 18.4504 4.99998 18.28V5.71998C5.30071 5.54956 5.54956 5.30071 5.71998 4.99998H18.28C18.4504 5.30071 18.6993 5.54956 19 5.71998V18.28Z"/>\n</svg>\n',t.ungroupIcon='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M21.0002 18.28V11.72C21.2707 11.5695 21.5025 11.3584 21.6775 11.1032C21.8525 10.8479 21.9659 10.5556 22.0088 10.2491C22.0516 9.94257 22.0228 9.63031 21.9245 9.33686C21.8262 9.04342 21.6611 8.77679 21.4423 8.55795C21.2234 8.33912 20.9568 8.17406 20.6633 8.07575C20.3699 7.97745 20.0576 7.94858 19.7511 7.99143C19.4447 8.03427 19.1523 8.14766 18.897 8.32267C18.6418 8.49768 18.4307 8.72953 18.2802 8.99998H15.0002V5.71998C15.2707 5.56955 15.5025 5.3584 15.6775 5.10317C15.8525 4.84793 15.9659 4.55556 16.0088 4.24906C16.0516 3.94257 16.0228 3.63031 15.9245 3.33686C15.8262 3.04342 15.6611 2.77679 15.4423 2.55795C15.2234 2.33912 14.9568 2.17406 14.6633 2.07575C14.3699 1.97745 14.0576 1.94858 13.7511 1.99143C13.4447 2.03427 13.1523 2.14766 12.897 2.32267C12.6418 2.49768 12.4307 2.72953 12.2802 2.99998H5.72023C5.56979 2.72953 5.35865 2.49768 5.10341 2.32267C4.84817 2.14766 4.5558 2.03427 4.24931 1.99143C3.94281 1.94858 3.63055 1.97745 3.33711 2.07575C3.04366 2.17406 2.77703 2.33912 2.5582 2.55795C2.33937 2.77679 2.1743 3.04342 2.076 3.33686C1.97769 3.63031 1.94883 3.94257 1.99167 4.24906C2.03452 4.55556 2.14791 4.84793 2.32291 5.10317C2.49792 5.3584 2.72977 5.56955 3.00023 5.71998V12.28C2.72977 12.4304 2.49792 12.6416 2.32291 12.8968C2.14791 13.152 2.03452 13.4444 1.99167 13.7509C1.94883 14.0574 1.97769 14.3697 2.076 14.6631C2.1743 14.9565 2.33937 15.2232 2.5582 15.442C2.77703 15.6608 3.04366 15.8259 3.33711 15.9242C3.63055 16.0225 3.94281 16.0514 4.24931 16.0085C4.5558 15.9657 4.84817 15.8523 5.10341 15.6773C5.35865 15.5023 5.56979 15.2704 5.72023 15H9.00023V18.28C8.72977 18.4304 8.49792 18.6416 8.32291 18.8968C8.14791 19.152 8.03452 19.4444 7.99167 19.7509C7.94883 20.0574 7.97769 20.3697 8.076 20.6631C8.1743 20.9565 8.33937 21.2232 8.5582 21.442C8.77703 21.6608 9.04366 21.8259 9.33711 21.9242C9.63055 22.0225 9.94281 22.0514 10.2493 22.0085C10.5558 21.9657 10.8482 21.8523 11.1034 21.6773C11.3586 21.5023 11.5698 21.2704 11.7202 21H18.2802C18.4307 21.2704 18.6418 21.5023 18.897 21.6773C19.1523 21.8523 19.4447 21.9657 19.7511 22.0085C20.0576 22.0514 20.3699 22.0225 20.6633 21.9242C20.9568 21.8259 21.2234 21.6608 21.4423 21.442C21.6611 21.2232 21.8262 20.9565 21.9245 20.6631C22.0228 20.3697 22.0516 20.0574 22.0088 19.7509C21.9659 19.4444 21.8525 19.152 21.6775 18.8968C21.5025 18.6416 21.2707 18.4304 21.0002 18.28ZM8.00023 9.99998C8.00233 10.349 8.09574 10.6914 8.27118 10.9932C8.44661 11.2949 8.69795 11.5455 9.00023 11.72V13H5.72023C5.5498 12.6993 5.30096 12.4504 5.00023 12.28V5.71998C5.30096 5.54956 5.5498 5.30071 5.72023 4.99998H12.2802C12.4507 5.30071 12.6995 5.54956 13.0002 5.71998V8.99998H11.7202C11.4975 8.62457 11.1581 8.33233 10.7538 8.16784C10.3495 8.00335 9.90245 7.97565 9.48092 8.08896C9.05939 8.20228 8.6865 8.45039 8.41915 8.79543C8.15181 9.14047 8.00468 9.56351 8.00023 9.99998V9.99998ZM13.0002 11V12.28C12.6995 12.4504 12.4507 12.6993 12.2802 13H11.0002V11.72C11.301 11.5496 11.5498 11.3007 11.7202 11H13.0002ZM19.0002 18.28C18.6995 18.4504 18.4507 18.6993 18.2802 19H11.7202C11.5498 18.6993 11.301 18.4504 11.0002 18.28V15H12.2802C12.4307 15.2704 12.6418 15.5023 12.897 15.6773C13.1523 15.8523 13.4447 15.9657 13.7511 16.0085C14.0576 16.0514 14.3699 16.0225 14.6633 15.9242C14.9568 15.8259 15.2234 15.6608 15.4423 15.442C15.6611 15.2232 15.8262 14.9565 15.9245 14.6631C16.0228 14.3697 16.0516 14.0574 16.0088 13.7509C15.9659 13.4444 15.8525 13.152 15.6775 12.8968C15.5025 12.6416 15.2707 12.4304 15.0002 12.28V11H18.2802C18.4507 11.3007 18.6995 11.5496 19.0002 11.72V18.28Z"/>\n</svg>\n',t.pencilIcon='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M5 17.9999H9.24C9.37161 18.0007 9.50207 17.9755 9.62391 17.9257C9.74574 17.8759 9.85656 17.8026 9.95 17.7099L16.87 10.7799L19.71 7.99994C19.8037 7.90698 19.8781 7.79637 19.9289 7.67452C19.9797 7.55266 20.0058 7.42195 20.0058 7.28994C20.0058 7.15793 19.9797 7.02722 19.9289 6.90536C19.8781 6.7835 19.8037 6.6729 19.71 6.57994L15.47 2.28994C15.377 2.19621 15.2664 2.12182 15.1446 2.07105C15.0227 2.02028 14.892 1.99414 14.76 1.99414C14.628 1.99414 14.4973 2.02028 14.3754 2.07105C14.2536 2.12182 14.143 2.19621 14.05 2.28994L11.23 5.11994L4.29 12.0499C4.19732 12.1434 4.12399 12.2542 4.07423 12.376C4.02446 12.4979 3.99924 12.6283 4 12.7599V16.9999C4 17.2652 4.10536 17.5195 4.29289 17.707C4.48043 17.8946 4.73478 17.9999 5 17.9999ZM14.76 4.40994L17.59 7.23994L16.17 8.65994L13.34 5.82994L14.76 4.40994ZM6 13.1699L11.93 7.23994L14.76 10.0699L8.83 15.9999H6V13.1699ZM21 19.9999H3C2.73478 19.9999 2.48043 20.1053 2.29289 20.2928C2.10536 20.4804 2 20.7347 2 20.9999C2 21.2652 2.10536 21.5195 2.29289 21.707C2.48043 21.8946 2.73478 21.9999 3 21.9999H21C21.2652 21.9999 21.5196 21.8946 21.7071 21.707C21.8946 21.5195 22 21.2652 22 20.9999C22 20.7347 21.8946 20.4804 21.7071 20.2928C21.5196 20.1053 21.2652 19.9999 21 19.9999Z"/>\n</svg>',t.playIcon='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M18.54 9.00027L8.87997 3.46027C8.35725 3.15843 7.76397 3.00031 7.16036 3.00197C6.55676 3.00362 5.96435 3.165 5.4433 3.46971C4.92225 3.77442 4.49112 4.2116 4.19372 4.73685C3.89631 5.2621 3.74321 5.8567 3.74997 6.46027V17.5803C3.74997 18.4873 4.11029 19.3572 4.75167 19.9986C5.39304 20.6399 6.26293 21.0003 7.16997 21.0003C7.77041 20.9993 8.36006 20.8406 8.87997 20.5403L18.54 15.0003C19.059 14.6999 19.49 14.2682 19.7896 13.7487C20.0891 13.2292 20.2468 12.64 20.2468 12.0403C20.2468 11.4405 20.0891 10.8514 19.7896 10.3318C19.49 9.8123 19.059 9.38068 18.54 9.08027V9.00027ZM17.54 13.1903L7.87997 18.8103C7.66346 18.933 7.41884 18.9975 7.16997 18.9975C6.9211 18.9975 6.67648 18.933 6.45997 18.8103C6.24407 18.6856 6.06479 18.5063 5.94015 18.2904C5.81552 18.0745 5.74993 17.8296 5.74997 17.5803V6.42027C5.74993 6.17097 5.81552 5.92605 5.94015 5.71013C6.06479 5.49422 6.24407 5.31492 6.45997 5.19027C6.67738 5.06943 6.92127 5.00416 7.16997 5.00027C7.4185 5.00537 7.66211 5.07056 7.87997 5.19027L17.54 10.7703C17.756 10.8949 17.9353 11.0741 18.06 11.2901C18.1847 11.506 18.2504 11.7509 18.2504 12.0003C18.2504 12.2496 18.1847 12.4946 18.06 12.7105C17.9353 12.9264 17.756 13.1057 17.54 13.2303V13.1903Z"/>\n</svg>\n',t.stopIcon='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M15 8H9C8.73479 8 8.48043 8.10536 8.2929 8.29289C8.10536 8.48043 8 8.73478 8 9V15C8 15.2652 8.10536 15.5196 8.2929 15.7071C8.48043 15.8946 8.73479 16 9 16H15C15.2652 16 15.5196 15.8946 15.7071 15.7071C15.8946 15.5196 16 15.2652 16 15V9C16 8.73478 15.8946 8.48043 15.7071 8.29289C15.5196 8.10536 15.2652 8 15 8ZM14 14H10V10H14V14ZM12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7363 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2V2ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00346 15.0615 4.60896C16.5233 5.21447 17.7727 6.23984 18.6518 7.55544C19.5308 8.87103 20 10.4177 20 12C20 14.1217 19.1572 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20V20Z"/>\n</svg>\n'},76965:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HelpBubble=void 0;var i=n(27378),o=n(24246),a=n(42272),u=n(22574),s=n(70099),c=r(n(27378)),l=n(14648),d=r(n(49040)),p=n(10255),f=n(91312),v={offset:{enabled:!0,options:{offset:[0,20]}},preventOverflow:{enabled:!0,options:{padding:10}}};var m=["Viewport Controls","Editing","Selection"];t.HelpBubble=function(){var e=c.default.useState(!1),t=e[0],n=e[1],r=Array.from(l.currentHotkeys.entries()).map((function(e){var t,n=e[0],r=e[1];return{combo:(t={key:n,menuData:r}).key,label:t.menuData.text,group:t.menuData.group}})).reduce((function(e,t){return e[t.group]||(e[t.group]=[]),e[t.group].push(t),e}),{}),g=Object.entries(r).sort((function(e,t){return m.indexOf(t[0])-m.indexOf(e[0])})),h=(0,f.usePorts)().reportEvent,b=(0,o.jsx)(a.Dialog,{isOpen:t,onClose:function(){return n(!1)},children:(0,o.jsx)("div",{className:a.Classes.DIALOG_BODY,children:g.map((function(e){var t=e[0],n=e[1];return(0,o.jsxs)(c.default.Fragment,{children:[(0,o.jsx)(a.H4,{children:t}),n.map((function(e){return(0,i.createElement)(u.Hotkey,Object.assign({},e,{key:e.combo}))}))]},t)}))})}),I=(0,o.jsxs)(a.Menu,{children:[(0,o.jsx)(a.MenuItem,{text:"Hotkeys",onClick:function(){n(!0),h("helpMenuItem",{item:"hotkeys"})}}),(0,o.jsx)(a.MenuItem,{text:"Documentation",onClick:function(){return h("helpMenuItem",{item:"documentation"})},href:"https://www.flyde.dev/docs",target:"_blank"}),(0,o.jsx)(a.MenuDivider,{}),(0,o.jsx)(a.MenuItem,{text:"Discord",onClick:function(){return h("helpMenuItem",{item:"discord"})},href:"https://discord.gg/x7t4tjZQP8",target:"_blank"})]});return(0,o.jsxs)("div",{className:"help-bubble","data-tip":"Help",children:[(0,o.jsx)(d.default,{}),(0,o.jsx)(s.Popover2,{content:I,modifiers:v,onOpened:function(){return h("helpMenuOpen",{})},children:(0,o.jsx)("div",{dangerouslySetInnerHTML:{__html:p.helpIcon}})}),b]})}},10255:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.helpIcon=void 0,t.helpIcon='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M11.29 15.29C11.247 15.3375 11.2069 15.3876 11.17 15.44C11.1322 15.4957 11.1019 15.5563 11.08 15.62C11.0512 15.6767 11.031 15.7374 11.02 15.8C11.0151 15.8666 11.0151 15.9334 11.02 16C11.0166 16.1312 11.044 16.2613 11.1 16.38C11.1449 16.5041 11.2166 16.6168 11.3099 16.7101C11.4032 16.8034 11.5159 16.8751 11.64 16.92C11.7597 16.9729 11.8891 17.0002 12.02 17.0002C12.1509 17.0002 12.2803 16.9729 12.4 16.92C12.5241 16.8751 12.6368 16.8034 12.7301 16.7101C12.8234 16.6168 12.8951 16.5041 12.94 16.38C12.9844 16.2584 13.0048 16.1294 13 16C13.0008 15.8684 12.9755 15.7379 12.9258 15.6161C12.876 15.4943 12.8027 15.3834 12.71 15.29C12.617 15.1963 12.5064 15.1219 12.3846 15.0711C12.2627 15.0203 12.132 14.9942 12 14.9942C11.868 14.9942 11.7373 15.0203 11.6154 15.0711C11.4936 15.1219 11.383 15.1963 11.29 15.29ZM12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7363 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2V2ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00346 15.0615 4.60896C16.5233 5.21447 17.7727 6.23984 18.6518 7.55544C19.5308 8.87103 20 10.4177 20 12C20 14.1217 19.1572 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20V20ZM12 7C11.4731 6.99966 10.9553 7.13812 10.4989 7.40144C10.0425 7.66476 9.66347 8.04366 9.4 8.5C9.32765 8.61382 9.27907 8.7411 9.25718 8.87418C9.23529 9.00726 9.24055 9.14339 9.27263 9.27439C9.30472 9.40538 9.36297 9.52854 9.44389 9.63643C9.5248 9.74433 9.62671 9.83475 9.74348 9.90224C9.86024 9.96974 9.98945 10.0129 10.1233 10.0292C10.2572 10.0454 10.393 10.0345 10.5225 9.99688C10.6521 9.9593 10.7727 9.89591 10.8771 9.81052C10.9814 9.72513 11.0675 9.61951 11.13 9.5C11.2181 9.3474 11.345 9.22078 11.4978 9.13298C11.6505 9.04518 11.8238 8.9993 12 9C12.2652 9 12.5196 9.10536 12.7071 9.29289C12.8946 9.48043 13 9.73478 13 10C13 10.2652 12.8946 10.5196 12.7071 10.7071C12.5196 10.8946 12.2652 11 12 11C11.7348 11 11.4804 11.1054 11.2929 11.2929C11.1054 11.4804 11 11.7348 11 12V13C11 13.2652 11.1054 13.5196 11.2929 13.7071C11.4804 13.8946 11.7348 14 12 14C12.2652 14 12.5196 13.8946 12.7071 13.7071C12.8946 13.5196 13 13.2652 13 13V12.82C13.6614 12.58 14.2174 12.1152 14.5708 11.5069C14.9242 10.8985 15.0525 10.1853 14.9334 9.49189C14.8143 8.79849 14.4552 8.16902 13.919 7.71352C13.3828 7.25801 12.7035 7.00546 12 7V7Z"/>\n</svg>\n'},19210:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(76965),t)},26066:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MainInstanceEventsIndicator=void 0;var i=n(24246),o=r(n(49040)),a=n(90095),u=n(40411);t.MainInstanceEventsIndicator=function(e){var t=e.currentInsId,n=e.ancestorsInsIds,r=(0,u.useHistoryHelpers)(t),s=r.history,c=r.refreshHistory,l=r.resetHistory,d="main-indicator-"+t+"}";return(0,i.jsxs)("div",{className:"main-instance-events-indicator",children:[(0,i.jsx)(o.default,{html:!0,getContent:[function(){return(0,u.calcHistoryContent)(s)},200],id:d}),(0,i.jsx)("span",{onMouseEnter:c,onMouseOut:l,id:(0,a.getMainInstanceIndicatorDomId)(t,n),className:"status-text","data-tip":"","data-html":!0,"data-for":d})]})}},14505:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(26066),t)},41304:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VisualPartEditor=t.defaultBoardData=t.defaultViewPort=t.PART_HEIGHT=void 0;var c=n(24246),l=u(n(27378)),d=n(18265),p=n(57768),f=n(95160),v=n(12901),m=n(87944),g=n(13011),h=n(63300),b=n(27378),I=n(14648),y=s(n(54037)),C=n(42272),P=n(43318),_=n(99743),x=n(29841),j=n(18265),O=n(5681),w=n(94e3),E=n(14264),S=n(40232),D=n(51424),k=n(63213),T=n(52178),M=s(n(98784)),N=n(27234),R=n(91312),A=s(n(86778)),V=n(24398),H=n(75012),z=n(97841),G=n(3065),F=n(41978),q=n(90412),L=n(9631),U=n(14505),B=n(19210),W=l.memo(C.Slider),Z=function(){return null};t.PART_HEIGHT=28;t.defaultViewPort={pos:{x:0,y:0},zoom:1},t.defaultBoardData={selected:[],viewPort:t.defaultViewPort,lastMousePos:{x:0,y:0}},t.VisualPartEditor=l.memo(l.forwardRef((function(e,n){var o,a=e.onChangePart,u=e.partIoEditable,s=e.onCopy,Y=e.onGoToPartDef,K=e.onInspectPin,Q=e.boardData,X=e.onChangeBoardData,$=e.currentInsId,ee=e.ancestorsInsIds,te=e.part,ne=e.onShowOmnibar,re=e.resolvedDependencies,ie=e.queuedInputsData,oe=e.initialPadding,ae=(0,q.useDependenciesContext)().onImportPart,ue=(0,R.usePorts)().reportEvent,se=e.parentViewport||t.defaultViewPort,ce=(0,b.useState)(Object.assign({},re,((o={})[te.id]=te,o))),le=ce[0],de=ce[1];(0,b.useEffect)((function(){var e;de(Object.assign({},re,((e={})[te.id]=te,e)))}),[re,te]);var pe=Q.selected,fe=Q.from,ve=Q.to,me=te.instances,ge=te.connections,he=te.inputsPosition,be=te.outputsPosition,Ie=te.inputs,ye=te.outputs,Ce=(0,b.useState)(),Pe=Ce[0],_e=Ce[1],xe=(0,b.useState)(),je=xe[0],Oe=xe[1],we=void 0===ee,Ee=(0,b.useState)(0),Se=Ee[0],De=Ee[1],ke=(0,b.useState)(),Te=ke[0],Me=ke[1],Ne=(0,b.useState)(!1),Re=Ne[0],Ae=Ne[1],Ve=(0,b.useState)(),He=Ve[0],ze=Ve[1],Ge=(0,b.useState)(),Fe=Ge[0],qe=Ge[1],Le=(0,b.useState)(),Ue=Le[0],Be=Le[1],We=(0,b.useState)(),Ze=We[0],Je=We[1],Ye=(0,b.useRef)();(0,m.useDidMount)((function(){Ye.current=lt.current.querySelector(".inline-editor-portal-root")}));var Ke=(0,R.useConfirm)(),Qe=(0,R.usePrompt)(),Xe=Q.viewPort,$e=(0,b.useRef)(!0),et=(0,b.useState)(null),tt=et[0],nt=et[1],rt=l.useCallback((function(e){X({viewPort:e})}),[X]),it=l.useCallback((function(e,t){return K(e,t)}),[K]),ot=l.useCallback((function(e,t,n){var r=(0,H.handleConnectionCloseEditorCommand)(te,{from:e,to:t}),i=(0,d.isInternalConnectionNode)(t)?me.find((function(e){return e.id===t.insId})):null,o=(i?i.inputConfig:{})[t.pinId],u=(0,d.isStaticInputPinConfig)(o)?(0,z.handleDetachConstEditorCommand)(r,t.insId,t.pinId):r;a(u,(0,D.functionalChange)("close-connection")),X({from:void 0,to:void 0}),ue("createConnection",{source:n})}),[me,a,X,te,ue]),at=l.useCallback(i(r().mark((function e(){var t,n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe("New visual part name?");case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,(0,N.groupSelected)(Q.selected,te,t,"inline",Qe);case 7:n=e.sent,i=n.currentPart,a(i,(0,D.functionalChange)("group part")),(0,S.toastMsg)("Part grouped"),ue("groupSelected",{count:Q.selected.length});case 12:case"end":return e.stop()}}),e)}))),[Qe,Q.selected,a,te,ue]);(0,b.useEffect)((function(){if(Te){var e=setTimeout((function(){Me(void 0)}),350);return function(){return clearTimeout(e)}}}),[Te]);var ut=(0,b.useState)(),st=ut[0],ct=ut[1];(0,b.useEffect)((function(){(0,E.preloadMonaco)()}),[]);var lt=(0,b.useRef)(),dt=(0,y.default)(lt),pt=l.useRef({x:400,y:400}),ft=(0,m.useBoundingclientrect)(lt)||_.vZero,vt=function(){var e=(0,g.fitViewPortToPart)(te,le,dt);(0,g.animateViewPort)(Xe,e,500,(function(e){rt(e)}))},mt=l.useCallback((function(e,t){var n=Q.to,r=Q.from,i="input"===t?r:n,o="input"===t?n:r,a={pinId:e,insId:d.THIS_INS_ID},u="input"===t?{from:a}:{to:a};i&&i.pinId===e?X({from:void 0,to:void 0}):o?"input"===t&&n?ot(a,n,"partIoClick"):r&&ot(r,a,"partIoClick"):X(u)}),[Q,X,ot]),gt=l.useCallback((function(e,t,n){var r=(0,h.produce)(te,(function(r){"input"===e?r.inputs[t].description=n:r.outputs[t].description=n}));a(r,(0,D.functionalChange)("Part io description"))}),[a,te]),ht=l.useCallback((function(e,t,n){var r=Q.from,i=Q.to;if(fe&&fe.insId===e.id||ve&&ve.insId===e.id)X({from:void 0,to:void 0});else if("input"===n){var o={insId:e.id,pinId:t};!i||i.pinId!==t||(0,d.isInternalConnectionNode)(i)&&i.insId!==e.id?fe?ot(fe,o,"pinClick"):X({to:o,selected:[]}):X({to:void 0})}else{var a={insId:e.id,pinId:t};!r||r.pinId!==t||(0,d.isInternalConnectionNode)(r)&&r.insId!==e.id?ve?ot(a,ve,"pinClick"):X({from:a,selected:[]}):X({from:void 0})}}),[Q,fe,X,ot,ve]);(0,b.useEffect)((function(){if(!Re&&dt.width){var t=(0,g.fitViewPortToPart)(te,le,dt,oe);e.thumbnailMode||rt(t);var n=setTimeout((function(){var t=(0,g.fitViewPortToPart)(te,le,dt,oe);e.thumbnailMode||rt(t),Ae(!0)}),100);return function(){return clearTimeout(n)}}}),[te,oe,dt,e.thumbnailMode,Re,le,rt]);var bt=l.useCallback((function(){var e=Q.selected,t=te.instances.filter((function(t){return e.includes(t.id)})).map((function(e){return Object.assign({},e,{id:e.id+"-copy"})})),n=te.connections.filter((function(t){var n=t.from,r=t.to;return e.includes(n.insId)&&e.includes(r.insId)}));s({instances:t,connections:n})}),[Q,s,te]),It=l.useCallback((function(){var t=(0,V.pasteInstancesCommand)(te,pt.current,e.clipboardData),n=t.newPart,r=t.newInstances;a(n,(0,D.functionalChange)("paste instances")),X({selected:r.map((function(e){return e.id}))})}),[a,X,te,e.clipboardData]),yt=l.useCallback((function(){var e=te.id;st?"input"===st.type?st.ins.id===e?mt(st.pin,"input"):ht(st.ins,st.pin,"input"):st.ins.id===e?mt(st.pin,"output"):ht(st.ins,st.pin,"output"):console.warn("tried selecting closest with no pin nearby")}),[te.id,st,mt,ht]),Ct=l.useCallback((function(e,t){var n=Math.min(Math.max(e,.1),3),r="mouse"===t?pt.current:{x:Xe.pos.x+dt.width/2,y:Xe.pos.y+dt.height/2},i=(0,g.centerBoardPosOnTarget)(r,dt,n,Xe);rt(Object.assign({},Xe,{zoom:n,pos:i}))}),[rt,Xe,dt]);(0,I.useHotkeys)("cmd+=",(function(e){Ct(Xe.zoom+.1,"hotkey"),e.preventDefault()}),{text:"Zoom in board",group:"Viewport Controls"},[Xe,Ct],$e),(0,I.useHotkeys)("cmd+-",(function(e){Ct(Xe.zoom-.1,"hotkey"),e.preventDefault()}),{text:"Zoom out board",group:"Viewport Controls"},[Ct,Xe.zoom],$e),(0,I.useHotkeys)("cmd+o",(function(e){e.preventDefault(),(0,S.toastMsg)("Ordering");var t=[];(0,O.orderVisualPart)(te,le,200,(function(e,n){n%3==0&&t.push(e)})),i(r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.length){e.next=9;break}return n=t.shift(),(0,S.toastMsg)("Step "+t.length+"!"),e.next=5,(0,d.delay)(200);case 5:a(n,(0,D.metaChange)("order-step")),(0,S.toastMsg)("Step "+t.length+"! done"),e.next=0;break;case 9:case"end":return e.stop()}}),e)})))()}),{text:"Auto-layout (experimental)",group:"Misc."},[a,te,re],$e),(0,I.useHotkeys)("cmd+0",(function(e){Ct(1),e.preventDefault()}),{text:"Reset zoom",group:"Viewport Controls"},[Xe,Ct],$e);var Pt=function(){X({from:void 0,to:void 0,selected:[]})},_t=l.useCallback((function(e,t){_e(e.id),a(Object.assign({},te),(0,D.metaChange)("drag-start"))}),[a,te]),xt=l.useCallback((function(e,t,n){var r=(0,g.handleInstanceDrag)(te,e,n,t,pe,Pe),i=r.newValue,o=r.newSelected;a(i,(0,D.metaChange)("drag-move")),o&&X({selected:o})}),[Pe,a,X,pe,te]),jt=l.useCallback((function(e,t){t.preventDefault(),t.stopPropagation(),_e(void 0)}),[]),Ot=l.useCallback((function(e,t){t.preventDefault(),t.stopPropagation(),_e(d.THIS_INS_ID)}),[]),wt=l.useCallback(function(){var t=i(r().mark((function t(n,i,o,a){var u,s,c;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.preventDefault(),o.stopPropagation(),u=a.x,s=a.y,c=(0,h.produce)(te,(function(e){"input"===n?e.inputsPosition[i]={x:u,y:s}:e.outputsPosition[i]={x:u,y:s}})),e.onChangePart(c,(0,D.metaChange)("part-io-drag-move"));case 5:case"end":return t.stop()}}),t)})));return function(e,n,r,i){return t.apply(this,arguments)}}(),[e,te]),Et=l.useCallback(function(){var e=i(r().mark((function e(t,n,i,o){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.preventDefault(),i.stopPropagation(),_e(void 0);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),[]),St=l.useCallback((function(e,t){var n=e.id,r=t.shiftKey?pe.filter((function(e){return e!==n})):[],i=t.shiftKey?[].concat(pe,[n]):[n],o=pe.includes(n)?r:i;X({selected:o,from:void 0,to:void 0})}),[X,pe]),Dt=l.useCallback((function(){var e=te.instances.map((function(e){return e.id}));X({selected:e,from:void 0,to:void 0})}),[X,te.instances]),kt=l.useCallback((function(e){var t=ge.filter((function(t){var n=t.from,r=t.to;return-1===e.indexOf(n.insId)&&-1===e.indexOf(r.insId)})),n=(0,h.produce)(te,(function(n){n.connections=t,n.instances=n.instances.filter((function(t){return!e.includes(t.id)}))}));X({selected:[]}),a(n,(0,D.functionalChange)("delete-ins"))}),[ge,a,X,te]),Tt=l.useCallback((function(e){kt([e.id])}),[kt]),Mt=l.useCallback((function(e,t){var n=(0,h.produce)(te,(function(n){"input"===e?(delete n.inputs[t],n.connections=n.connections.filter((function(e){return!((0,d.isExternalConnectionNode)(e.from)&&e.from.pinId===t)}))):(n.connections=n.connections.filter((function(e){return!((0,d.isExternalConnectionNode)(e.to)&&e.to.pinId===t)})),n.completionOutputs=(n.completionOutputs||[]).map((function(e){return e.split("+").filter((function(e){return e!==t})).join("+")})).filter((function(e){return!!e})),delete n.outputs[t])}));fe&&fe.insId===d.THIS_INS_ID&&fe.pinId===t?X({from:void 0}):ve&&ve.insId===d.THIS_INS_ID&&ve.pinId===t&&X({to:void 0}),a(n,(0,D.functionalChange)("remove io pin"))}),[te,fe,ve,a,X]),Nt=l.useCallback(i(r().mark((function e(){var t,n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Q.selected,n=Q.from,i=Q.to,0!==t.length){e.next=16;break}if(!n||!(0,d.isExternalConnectionNode)(n)){e.next=9;break}return e.next=5,Ke("Are you sure you want to remove main input "+n.pinId+"?");case 5:if(!e.sent){e.next=7;break}Mt("input",n.pinId);case 7:e.next=14;break;case 9:if(!i||!(0,d.isExternalConnectionNode)(i)){e.next=14;break}return e.next=12,Ke("Are you sure you want to remove main output "+i.pinId+"?");case 12:if(!e.sent){e.next=14;break}Mt("output",i.pinId);case 14:e.next=17;break;case 16:kt(t);case 17:case"end":return e.stop()}}),e)}))),[Ke,Q,kt,Mt]),Rt=l.useCallback((function(e,t,n){var r=(0,g.getInstancePinConfig)(te,e.id,t),i=(0,d.isStickyInputPinConfig)(r)?(0,j.queueInputPinConfig)():(0,d.stickyInputPinConfig)();a((0,g.changePinConfig)(te,e.id,t,i),(0,D.functionalChange)("toggle-sticky")),ue("togglePinSticky",{isSticky:(0,d.isStickyInputPinConfig)(i)})}),[a,te,ue]),At=l.useCallback((function(){var e=(0,G.handleDuplicateSelectedEditorCommand)(te,pe),t=e.newPart,n=e.newInstances;a(t,(0,D.functionalChange)("duplicated instances")),X({selected:n.map((function(e){return e.id}))})}),[a,X,te,pe]),Vt=l.useCallback((function(e){var t=e.nativeEvent.target;if(0===e.button&&J(e.nativeEvent,te.id)&&t&&"board-editor-inner"===t.className){if(Date.now()-Se<300)return void ne(e);De(Date.now());var n={x:e.clientX,y:e.clientY},r=(0,_.vSub)(n,ft),i=(0,g.domToViewPort)(r,Xe,se);Oe({from:i,to:i})}}),[te.id,Xe,Se,ft,se,ne]),Ht=l.useCallback((function(e){if(nt(null),J(e.nativeEvent,te.id)&&je){if((0,g.calcSelectionBoxArea)(je)>50){var t=(0,g.getInstancesInRect)(je,le,Xe,an.current,te.instances,ft,se);console.log({toSelect:t,selectionBox:je});var n=e.shiftKey?[].concat(pe,t):t;X({selected:n})}Oe(void 0)}}),[te.id,te.instances,je,le,Xe,ft,se,pe,X]),zt=l.useCallback((function(e){if(J(e.nativeEvent,te.id)){$e.current=!0;var t={x:e.clientX,y:e.clientY},n=(0,_.vSub)(t,(0,_.vAdd)(ft,_.vZero)),r=(0,g.domToViewPort)(n,Xe,se);je&&Oe(Object.assign({},je,{to:r}));var i=(0,g.findClosestPin)(te,le,n,ft,$,ee,Xe),o=st;if(i)(!o||o.ins!==i.ins||o.ins===i.ins&&o.pin!==i.pin)&&ct({ins:i.ins,type:i.type,pin:i.id});pt.current=r,X({lastMousePos:pt.current})}else $e.current=!1}),[te,ft,Xe,se,je,le,$,ee,st,X]),Gt=l.useCallback((function(){ct(void 0),$e.current=!1}),[]),Ft=l.useCallback((function(e,t){if(t){var n=(0,d.isInlinePartInstance)(e)?e.part:(0,d.getPartDef)(e.partId,le);if(!n)throw new Error("Impossible state inspecting inexisting part");if(!(0,d.isVisualPart)(n))return void(0,S.toastMsg)("Cannot inspect a non visual part","warning");Je({insId:$+"."+e.id,part:n})}else if((0,d.isRefPartInstance)(e)){var r=(0,d.getPartDef)(e,le);Y(r)}else{var i=e.part;if(!(0,d.isInlineValuePart)(i))return void((0,d.isVisualPart)(i)?Je({insId:e.id,part:i}):(0,S.toastMsg)("Editing this type of part is not supported"));var o=atob(i.dataBuilderSource);Be({insId:e.id,templateType:i.templateType,value:o,type:"existing"}),(0,S.toastMsg)("Editing inline visual part not supported yet")}}),[Y,le,$]),qt=l.useCallback((function(e){if((0,d.isInlinePartInstance)(e)){var t=e.part;if(!(0,d.isVisualPart)(t))return void(0,S.toastMsg)("Not supported","warning");var n=(0,h.produce)(te,(function(n){var r,i;n.instances=n.instances.filter((function(t){return t.id!==e.id})),n.connections=n.connections.filter((function(t){var n=t.from,r=t.to;return n.insId!==e.id&&r.insId!==e.id})),(r=n.instances).push.apply(r,t.instances),(i=n.connections).push.apply(i,t.connections.filter((function(e){return(0,d.isInternalConnectionNode)(e.from)&&(0,d.isInternalConnectionNode)(e.to)})))}));a(n,{type:"functional",message:"ungroup"}),X({selected:[]})}else{var r=(0,d.getPartDef)(e.partId,le);if(!(0,d.isVisualPart)(r))return void(0,S.toastMsg)("Not supported","warning")}}),[te,a,X,le]),Lt=l.useCallback(function(){var e=i(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),Ut=l.useCallback((function(e,t){var n=(0,z.handleDetachConstEditorCommand)(te,e.id,t);a(n,(0,D.functionalChange)("detach-const"))}),[a,te]),Bt=l.useCallback((function(e,t){var n=e.inputConfig[t]||(0,j.queueInputPinConfig)();(0,d.isStaticInputPinConfig)(n)&&(qe(n.value),S.AppToaster.show({message:"Value copied"}))}),[]),Wt=l.useCallback((function(e,t){var n=(0,h.produce)(te,(function(n){var r=n.instances.find((function(t){return t.id===e.id}));if(!r)throw new Error("Impossible state");r.inputConfig[t]=(0,d.staticInputPinConfig)(Fe),n.connections=n.connections.filter((function(n){return!(0,d.isInternalConnectionNode)(n.to)||!(n.to.insId===e.id&&n.to.pinId===t)}))}));a(n,(0,D.functionalChange)("paste const value"))}),[te,a,Fe]),Zt=l.useCallback(function(){var e=i(r().mark((function e(t){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe("New name?");case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:i=(0,h.produce)(te,(function(e){var r;"input"===t?(te.inputs||(e.inputs={}),e.inputs[n]=(0,d.partInput)(),e.inputsPosition[n]=pt.current):(te.outputs||(e.outputs={}),e.outputs[n]=(0,d.partOutput)(),e.outputsPosition[n]=pt.current,(null===(r=e.completionOutputs)||void 0===r?void 0:r.length)&&(0,S.toastMsg)("Note that this part has explicit completion outputs set. You may need to update them."))})),a(i,(0,D.functionalChange)("add new io pin")),ue("addIoPin",{type:t});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[Qe,te,a,ue]),Jt=l.useCallback(i(r().mark((function e(){var t,n,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null===(t=te.completionOutputs)||void 0===t?void 0:t.join(","),e.next=3,Qe("Edit completion outputs",n);case 3:i=e.sent,(0,v.isDefined)(i)&&null!==i&&(o=(0,h.produce)(te,(function(e){e.completionOutputs=""===i?void 0:i.split(",")})),a(o,(0,D.functionalChange)("change part completions")),ue("editCompletionOutputs",{count:i?i.split(",").length:0}));case 5:case"end":return e.stop()}}),e)}))),[Qe,a,te,ue]),Yt=l.useCallback(i(r().mark((function e(){var t,n,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null===(t=te.reactiveInputs)||void 0===t?void 0:t.join(","),e.next=3,Qe("Edit reactive inputs",n);case 3:i=e.sent,(0,v.isDefined)(i)&&null!==i&&(o=(0,h.produce)(te,(function(e){e.reactiveInputs=""===i?void 0:i.split(",")})),a(o,(0,D.functionalChange)("change reactive inputs")),ue("editReactiveInputs",{count:i?i.split(",").length:0}));case 5:case"end":return e.stop()}}),e)}))),[Qe,a,te,ue]),Kt=l.useCallback(i(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe("Description?",te.description);case 2:t=e.sent,n=(0,h.produce)(te,(function(e){e.description=t})),a(n,(0,D.functionalChange)("Edit part description"));case 5:case"end":return e.stop()}}),e)}))),[Qe,a,te]),Qt=l.useCallback((function(e){var t=(0,h.produce)(te,(function(t){t.defaultStyle=e}));a(t,(0,D.functionalChange)("change default style")),ue("changeStyle",{isDefault:!0})}),[a,te,ue]),Xt=l.useCallback(function(){var e=i(r().mark((function e(t,n){var i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe("New name?",n);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=n;case 5:i=e.t0,o=(0,g.handleIoPinRename)(te,t,n,i),a(o,(0,D.functionalChange)("rename io pin"));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[te,a,Qe]),$t=l.useCallback((function(e,t){var n=(0,g.handleChangePartInputType)(te,e,t);a(n,(0,D.functionalChange)("toggle io pin optional"))}),[te,a]),en=l.useCallback((function(e){switch(e.type){case L.ActionType.RemovePart:var t=(0,h.produce)(te,(function(e){if(!(0,d.isVisualPart)(te))throw new Error("Impossible state, deleting instances opf non visual part");e.instances=e.instances.filter((function(e){return!pe.includes(e.id)})),e.connections=e.connections.filter((function(e){return!pe.includes(e.from.insId)&&!pe.includes(e.to.insId)}))}));X({selected:[]}),a(t,(0,D.functionalChange)("remove-instances")),(0,S.toastMsg)("Removed "+pe.length+" instances(s)"),ue("deleteInstances",{count:pe.length});break;case L.ActionType.Inspect:if(1===pe.length)K(pe[0]);else if(fe||ve){var n=null!=fe?fe:ve,o=(0,d.isExternalConnectionNode)(n)?d.ROOT_INS_ID:n.insId;K(o,{type:fe?"output":"input",id:n.pinId})}ue("openInspectMenu",{source:"actionMenu"});break;case L.ActionType.Group:i(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at();case 2:case"end":return e.stop()}}),e)})))();break;case L.ActionType.UnGroup:var u=te.instances.find((function(e){return e.id===pe[0]}));qt(u);var s=(0,d.getPartDef)(u,le);(0,S.toastMsg)("Ungrouped inline part "+s.id),ue("unGroupPart",{instancesCount:s.instances.length});break;case L.ActionType.AddInlineValue:Be({type:"new-floating",pos:pt.current}),ue("addValueModalOpen",{source:"actionMenu"});break;case L.ActionType.AddPart:i(r().mark((function t(){var n,i,o,u,s,c,l;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(0,g.getMiddleOfViewPort)(Xe,dt),i=e.data.importablePart,t.next=4,ae(i);case 4:o=t.sent,u=(0,_.vSub)(n,{x:0,y:50*Xe.zoom}),s=(0,g.createNewPartInstance)(i.part.id,0,u,o),c=(0,h.produce)(te,(function(e){e.instances.push(s)})),l=(0,h.produce)(Q,(function(e){e.selected=[s.id]})),a(c,(0,D.functionalChange)("add new instance")),X(l),(0,S.toastMsg)("Part "+i.part.id+" successfully imported from "+i.module),ue("addPart",{partId:i.part.id,source:"actionMenu"});case 13:case"end":return t.stop()}}),t)})))();break;default:(0,S.toastMsg)(e+" not supported yet")}}),[Q,fe,a,X,at,ae,K,qt,te,le,ue,pe,ve,Xe,dt]),tn=l.useCallback(function(){var e=i(r().mark((function e(t,n,i,o){var a,u,s,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("input"!==i){e.next=7;break}a=t.inputConfig[n],u=(0,d.isStaticInputPinConfig)(a)?JSON.stringify(a.value):void 0,Be({type:"static-input",insId:t.id,pinId:n,value:null!=u?u:JSON.stringify("Some static value")}),ue("addValueModalOpen",{source:"dblClickPin"}),e.next=13;break;case 7:if(s=(0,d.getPartDef)(t,le),c=(0,d.getPartOutputs)(s),c[n]){e.next=12;break}throw new Error("Dbl clicked on un-existing pin");case 12:ze({pos:{x:o.clientX,y:o.clientY},ins:t,targetPart:s,pinId:n,pinType:i});case 13:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),[le,ue]),nn=l.useCallback(function(){var e=i(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(te.inputs[t]){e.next=3;break}throw new Error("Dbl clicked on un-existing pin");case 3:ze({pos:{x:n.clientX,y:n.clientY},pinId:t,pinType:"input",targetPart:te});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[te]),rn=l.useCallback((function(e){if(e.metaKey||e.ctrlKey){var t=-.005*e.deltaY;Ct(Xe.zoom+t,"mouse"),e.preventDefault(),e.stopPropagation()}else{var n=e.deltaX,r=e.deltaY,i=(0,h.produce)(Xe,(function(e){e.pos.x=e.pos.x+n/e.zoom,e.pos.y=e.pos.y+r/e.zoom}));rt(i),e.stopPropagation(),e.preventDefault()}}),[Ct,rt,Xe]);(0,b.useEffect)((function(){var e=lt.current;if(e)return e.addEventListener("wheel",rn),function(){e.removeEventListener("wheel",rn)}}),[rn]);var on={backgroundPositionX:(0,g.roundNumber)(-Xe.pos.x*Xe.zoom),backgroundPositionY:(0,g.roundNumber)(-Xe.pos.y*Xe.zoom),backgroundSize:(0,g.roundNumber)(25*Xe.zoom)+"px"},an=l.useRef(new Map);l.useEffect((function(){var e=me.reduce((function(e,t){var n=(0,d.getPartDef)(t,le);return n&&e.set(t.id,(0,d.keys)((0,d.getPartInputs)(n))),e}),new Map),t=me.reduce((function(e,t){var n=(0,d.getPartDef)(t,le);return n&&e.set(t.id,(0,d.keys)((0,d.getPartOutputs)(n))),e}),new Map);e.set(d.THIS_INS_ID,(0,d.keys)(te.outputs)),t.set(d.THIS_INS_ID,(0,d.keys)(te.inputs));var n=ge.filter((function(n){var r=e.get(n.to.insId)&&e.get(n.to.insId).includes(n.to.pinId),i=t.get(n.from.insId)&&t.get(n.from.insId).includes(n.from.pinId);return!(r&&i)}));if(n.length>0){(0,S.toastMsg)(n.length+" orphan connections removed","warning"),console.log(n.length+" orphan connections removed",n);var r=(0,h.produce)(te,(function(e){e.connections=te.connections.filter((function(e){return!n.includes(e)}))}));a(r,(0,D.functionalChange)("prune orphan connections"))}}),[me,a,ge,te,le]),l.useEffect((function(){var e=[],t=(0,h.produce)(te,(function(t){t.instances=t.instances.map((function(t){var n=(0,d.getPartDef)(t,le);if(n){var r=(0,d.getPartInputs)(n),i=(0,d.getPartOutputs)(n);if(t.visibleInputs){var o=t.visibleInputs.filter((function(e){return!r[e]}));o.length>0&&(t.visibleInputs=(0,d.keys)(r),e.push.apply(e,o))}if(t.visibleOutputs){var a=t.visibleOutputs.filter((function(e){return!i[e]}));a.length>0&&(t.visibleOutputs=(0,d.keys)(i),e.push.apply(e,a))}}return t}))}));e.length>0&&((0,S.toastMsg)("Found "+e.length+" invalid visible inputs/outputs: "+e.join(", ")+". Reset them","warning"),a(t,(0,D.functionalChange)("reset corrupt visible inputs/outputs")))}),[me,a,te,le]),(0,b.useEffect)((function(){var e=new Map(me.map((function(e){return[e.id,e]})));an.current=ge.reduce((function(t,n){var r,i=t.get(n.to.insId)||{},o=i[n.to.pinId]||[],a=Object.assign({},i,((r={})[n.to.pinId]=[].concat(o,[e.get(n.from.insId)]),r));return t.set(n.to.insId,a),t}),new Map)}),[ge,me]);var un=l.useCallback((function(){ze(void 0)}),[]),sn=l.useCallback(function(){var e=i(r().mark((function e(t){var n,i,o,u,s,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(He){e.next=2;break}throw new Error("impossible state - quick add menu invoked but not available");case 2:n=He.ins,i=He.pinId,e.t0=t.type,e.next="import"===e.t0||"part"===e.t0?6:"value"===e.t0?19:24;break;case 6:if("import"!==t.type){e.next=12;break}return e.next=9,ae(t.importablePart);case 9:e.t1=e.sent,e.next=13;break;case 12:e.t1=le;case 13:return o=e.t1,u="import"===t.type?t.importablePart.part:t.part,(s=(0,g.createNewPartInstance)(u.id,100,pt.current,o))&&(c=(0,h.produce)(te,(function(e){e.instances.push(s),e.connections.push({from:{insId:n?n.id:d.THIS_INS_ID,pinId:i},to:{insId:s.id,pinId:d.TRIGGER_PIN_ID}})})),a(c,(0,D.functionalChange)("add-item-quick-menu")),un()),ue("addPart",{partId:u.id,source:"quickAdd"}),e.abrupt("break",24);case 19:if(n){e.next=22;break}return(0,S.toastMsg)("Cannot add value to main input"),e.abrupt("return");case 22:Be({type:"new-output",insId:n.id,pinId:i}),ue("addValueModalOpen",{source:"quickAdd"});case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[He,le,ue,te,a,un,ae]),cn=l.useCallback(i(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.stringify(te),e.next=3,navigator.clipboard.writeText(t);case 3:S.AppToaster.show({message:"Copied!"});case 4:case"end":return e.stop()}}),e)}))),[te]),ln=l.useCallback((function(e){var t,n,r=u?"":" (cannot edit main part, only visual)";return(0,c.jsxs)(C.Menu,{children:[(0,c.jsx)(C.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},text:"New Value",onClick:(0,v.preventDefaultAnd)((function(){Be({type:"new-floating",pos:pt.current}),ue("addValueModalOpen",{source:"contextMenu"})}))}),(0,c.jsx)(C.MenuItem,{text:"New input "+r,onMouseDown:function(e){return e.stopPropagation()},onClick:(0,v.preventDefaultAnd)((function(){return Zt("input")})),disabled:!u}),(0,c.jsx)(C.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},text:"New output "+r,onClick:(0,v.preventDefaultAnd)((function(){return Zt("output")})),disabled:!u}),(0,c.jsx)(C.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},text:"Copy part to clipboard",onClick:(0,v.preventDefaultAnd)(cn)}),(0,c.jsx)(C.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},text:"Edit Completion Outputs ("+((null===(t=te.completionOutputs)||void 0===t?void 0:t.join(","))||"n/a")+")",onClick:(0,v.preventDefaultAnd)((function(){return Jt()}))}),(0,c.jsx)(C.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},text:"Edit Reactive inputs ("+((null===(n=te.reactiveInputs)||void 0===n?void 0:n.join(","))||"n/a")+")",onClick:(0,v.preventDefaultAnd)((function(){return Yt()}))}),(0,c.jsx)(C.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},text:"Edit description",onClick:(0,v.preventDefaultAnd)((function(){return Kt()}))}),(0,c.jsx)(C.MenuDivider,{}),(0,c.jsx)(C.MenuItem,{text:"Default Style",children:(0,c.jsx)(F.PartStyleMenu,{style:te.defaultStyle,onChange:Qt,promptFn:Qe})})]})}),[u,cn,te.completionOutputs,te.reactiveInputs,te.defaultStyle,Qt,Qe,ue,Zt,Jt,Yt,Kt]),dn=l.useCallback((function(e){if(e.preventDefault(),$e.current){var t=(0,g.domToViewPort)({x:e.clientX,y:e.clientY},Xe,se),n=ln(t);C.ContextMenu.show(n,{left:e.clientX,top:e.clientY})}}),[ln,se,Xe]);(0,I.useHotkeys)("shift+c",vt,{text:"Center viewport",group:"Viewport Controls"},[],$e),(0,I.useHotkeys)("cmd+c",bt,{text:"Copy instances",group:"Editing"},[],$e),(0,I.useHotkeys)("cmd+v",It,{text:"Paste instances",group:"Editing"},[],$e),(0,I.useHotkeys)("esc",Pt,{text:"Clear selections",group:"Selection"},[],$e),(0,I.useHotkeys)("backspace",Nt,{text:"Delete instances",group:"Editing"},[],$e),(0,I.useHotkeys)("shift+d",At,{text:"Duplicate selected instances",group:"Editing"},[],$e),(0,I.useHotkeys)("cmd+a",Dt,{text:"Select all",group:"Selection"},[],$e),(0,I.useHotkeys)("s",yt,{text:"Select pin closest to mouse",group:"Selection"},[],$e);var pn=l.useCallback((function(e,t){if(!Ze)throw new Error("impossible state");var n=(0,h.produce)(te,(function(t){var n=t.instances.find((function(e){return e.id===Ze.insId}));if(!n||!(0,d.isInlinePartInstance)(n))throw new Error("impossible state");n.part=e}));a(n,(0,D.functionalChange)("Inner change: "+t.message)),Je((function(t){return Object.assign({},t,{part:e})}))}),[a,Ze,te]),fn=(0,b.useState)({selected:[],viewPort:t.defaultViewPort,lastMousePos:{x:0,y:0}}),vn=fn[0],mn=fn[1],gn=l.useCallback((function(e){return mn((function(t){return Object.assign({},t,e)}))}),[]),hn=function(n){return Ze&&Ze.insId===n.id?{currentInsId:Ze.insId,ancestorsInsIds:(0,d.fullInsIdPath)($,ee),boardData:vn,onChangeBoardData:gn,resolvedDependencies:re,onCopy:s,clipboardData:e.clipboardData,onInspectPin:e.onInspectPin,onGoToPartDef:e.onGoToPartDef,partIoEditable:e.partIoEditable,part:Ze.part,onChangePart:pn,onShowOmnibar:ne,parentViewport:t.defaultViewPort,parentBoardPos:ft,onExtractInlinePart:e.onExtractInlinePart,queuedInputsData:e.queuedInputsData}:void 0},bn=function(){if(fe&&("input"===(null==st?void 0:st.type)&&(null==st?void 0:st.ins.id)!==te.id||(null==st?void 0:st.ins.id)===te.id&&"output"===(null==st?void 0:st.type))){var e=st.ins.id===te.id?{pinId:st.pin,insId:d.THIS_INS_ID}:{insId:st.ins.id,pinId:st.pin};if(!(0,d.isInternalConnectionNode)(e)&&!(0,d.isInternalConnectionNode)(fe))return;return{from:fe,to:e}}if(ve&&("output"===(null==st?void 0:st.type)&&(null==st?void 0:st.ins.id)!==te.id||(null==st?void 0:st.ins.id)===te.id&&"input"===(null==st?void 0:st.type))){var t=st.ins.id===te.id?{pinId:st.pin,insId:d.THIS_INS_ID}:{insId:st.ins.id,pinId:st.pin};if(!(0,d.isInternalConnectionNode)(ve)&&!(0,d.isInternalConnectionNode)(t))return;return{from:t,to:ve}}},In=l.useCallback((function(e,t){var n=(0,h.produce)(te,(function(n){n.instances=n.instances.map((function(n){return n.id===e.id?Object.assign({},n,{visibleInputs:t}):n}))}));a(n,(0,D.functionalChange)("change instance visible inputs"))}),[te,a]),yn=l.useCallback((function(e,t){var n=(0,h.produce)(te,(function(n){n.instances=n.instances.map((function(n){return n.id===e.id?Object.assign({},n,{style:t}):n}))}));a(n,(0,D.functionalChange)("change instance style")),ue("changeStyle",{isDefault:!1})}),[a,te,ue]),Cn=l.useCallback((function(e,t){var n=(0,h.produce)(te,(function(n){n.instances=n.instances.map((function(n){return n.id===e.id?Object.assign({},n,{visibleOutputs:t}):n}))}));a(n,(0,D.functionalChange)("change instance visible outputs"))}),[te,a]),Pn=l.useCallback((function(e,t){var n=(0,h.produce)(te,(function(n){n.instances=n.instances.map((function(n){return n.id===e.id?Object.assign({},n,{displayName:t}):n}))}));a(n,(0,D.functionalChange)("change instance display name"))}),[te,a]);l.useImperativeHandle(n,(function(){return{centerInstance:function(e){var t=te.instances.find((function(t){return t.id===e}));if(t){var n=(0,_.vSub)(t.pos,(0,_.vec)(dt.width/2,dt.height/2));rt(Object.assign({},Xe,{pos:n}))}},centerViewPort:function(){vt()},getViewPort:function(){return Xe},clearSelection:function(){Pt()},requestNewInlineValue:function(){Be({type:"new-floating",pos:pt.current})}}}));var _n=l.useState([]),xn=(_n[0],_n[1],l.useCallback((function(e,t){var n=t.trim().substr(0,100),r="Inline-value-"+n.substr(0,15).replace(/["'`]/g,""),i=(0,T.createInlineValuePart)({code:t,customView:n,partId:r,type:e});switch(Ue.type){case"existing":var o=te.instances.filter((function(e){return e.id===Ue.insId})).filter((function(e){return(0,d.isInlinePartInstance)(e)})).map((function(e){return e.part})),u=o[0];if(!u)throw new Error("Unable to find inline part to save to");var s=(0,d.keys)(u.inputs),c=(0,d.keys)(i.inputs),l=new Set(M.default.difference(s,c)),p=(0,h.produce)(te,(function(e){e.instances=e.instances.map((function(e){return e.id===Ue.insId?(0,d.inlinePartInstance)(e.id,i,e.inputConfig,e.pos):e})),e.connections=e.connections.filter((function(e){return!(e.to.insId===Ue.insId&&l.has(e.to.pinId))}))}));a(p,(0,D.functionalChange)("change inline value")),Be(void 0);break;case"static-input":var f;try{var v=t.replace(/^['`]/,'"').replace(/['`]$/,'"');f=JSON.parse(v)}catch(j){return void(0,S.toastMsg)("Input values must not be formulas or code")}var m=(0,h.produce)(te,(function(e){e.instances.find((function(e){return e.id===Ue.insId})).inputConfig[Ue.pinId]=(0,d.staticInputPinConfig)(f)}));a(m,(0,D.functionalChange)("set static input value")),Be(void 0);break;case"new-floating":var g=(0,d.inlinePartInstance)((0,d.createInsId)(i),i,{},Ue.pos),b=(0,h.produce)(te,(function(e){e.instances.push(g)}));a(b,(0,D.functionalChange)("new floating value")),Be(void 0);break;case"new-output":var I=Ue.insId,y=Ue.pinId,C=te.instances.find((function(e){return e.id===I}));if(!C)throw new Error("Impossible state");var P=(0,d.inlinePartInstance)((0,d.createInsId)(i),i,{},(0,_.vAdd)(C.pos,{x:-50,y:150})),x=(0,h.produce)(te,(function(e){e.instances.push(P),e.connections.push({from:(0,d.connectionNode)(I,y),to:(0,d.connectionNode)(P.id,d.TRIGGER_PIN_ID)})}));a(x,(0,D.functionalChange)("new value connected to output")),Be(void 0)}ue("addValue",{type:e,placeholdersCount:(0,d.keys)(i.inputs).length})}),[Ue,a,te,ue])),jn=ge.filter((function(e){var t=bn();return!t||!(0,d.connectionDataEquals)(t,e)})),On=l.useCallback((function(){Je(void 0),mn(t.defaultBoardData)}),[]),wn=l.useCallback((function(e){var t=(0,h.produce)(te,(function(t){var n=t.connections.find((function(t){return(0,d.connectionDataEquals)(t,e)}));n.hidden=!n.hidden}));a(t,(0,D.functionalChange)("toggle connection hidden"))}),[a,te]),En=l.useCallback((function(e){var t=(0,h.produce)(te,(function(t){t.connections=t.connections.filter((function(t){return!(0,d.connectionDataEquals)(t,e)}))}));a(t,(0,D.functionalChange)("remove connection"))}),[a,te]),Sn=l.useCallback((function(e,t,n){"input"===n?(console.log(e.id,t),nt({to:(0,d.connectionNode)(e.id,t),from:void 0})):nt({from:(0,d.connectionNode)(e.id,t),to:void 0})}),[]),Dn=l.useCallback((function(e,t,n){tt&&(tt.from&&"input"===n?ot(tt.from,(0,d.connectionNode)(e.id,t),"pinDrag"):tt.to&&"output"===n&&ot((0,d.connectionNode)(e.id,t),tt.to,"pinDrag")),nt(null)}),[tt,ot]),kn=l.useCallback((function(e,t){}),[]),Tn=l.useCallback((function(e,t){tt&&(tt.from&&"output"===t?ot(tt.from,(0,d.externalConnectionNode)(e),"partIoPinDrag"):tt.to&&"input"===t&&ot((0,d.externalConnectionNode)(e),tt.to,"partIoPinDrag"))}),[tt,ot]);try{return(0,c.jsxs)("div",{className:(0,A.default)("visual-part-editor",e.className),"data-id":te.id,onContextMenu:dn,children:[(0,c.jsxs)("main",{className:"board-editor-inner",onMouseDown:Vt,onMouseUp:Ht,onMouseMove:zt,onMouseLeave:Gt,ref:lt,style:on,children:[(0,c.jsx)(l.Fragment,{children:(0,c.jsx)(w.LayoutDebugger,{vp:Xe,part:te,extraDebug:g.emptyList,mousePos:pt.current})}),(0,c.jsx)(f.ConnectionView,{resolvedParts:le,currentInsId:$,ancestorsInsIds:ee,size:dt,part:te,boardPos:ft,instances:me,connections:jn,futureConnection:function(){var e=bn();if(e)return{connection:{from:e.from,to:e.to},type:ge.some((function(t){return(0,d.connectionDataEquals)(t,e)}))?"future-remove":"future-add"}}(),onDblClick:d.noop,viewPort:Xe,parentVp:se,selectedInstances:pe,toggleHidden:wn,removeConnection:En,lastMousePos:pt.current,draggedSource:tt}),function(){var t=Q.from;return(0,v.entries)(Ie).map((function(n){var r=n[0],i=n[1];return(0,c.jsx)(P.PartIoView,{currentInsId:$,ancestorInsIds:e.ancestorsInsIds,type:"input",pos:he[r]||{x:0,y:0},id:r,onDelete:u?Mt:void 0,onRename:u?Xt:void 0,onDblClick:nn,closest:!(!st||"input"!==st.type||st.ins.id!==te.id||st.pin!==r),connected:!1,inputMode:i.mode,onChangeInputMode:$t,viewPort:Xe,onDragStart:Ot,onDragEnd:Et,onDragMove:wt,onSelect:mt,onSetDescription:gt,selected:(null==t?void 0:t.pinId)===r,description:i.description,onMouseUp:Tn,onMouseDown:kn},r)}))}(),me.map((function(t){var n,r,i,o,a;return(0,c.jsx)(p.InstanceView,{onUngroup:qt,onExtractInlinePart:Lt,onDetachConstValue:Ut,onCopyConstValue:Bt,onPasteConstValue:Wt,copiedConstValue:Fe,connectionsPerInput:an.current.get(t.id)||g.emptyObj,part:(0,d.getPartDef)(t,le),ancestorsInsIds:(0,d.fullInsIdPath)($,ee),onPinClick:ht,onPinDblClick:tn,onDragStart:_t,onDragEnd:jt,resolvedDeps:le,onDragMove:xt,onDblClick:Ft,onSelect:St,onToggleSticky:Rt,selected:-1!==pe.indexOf(t.id),dragged:Pe===t.id,onInspectPin:it,selectedInput:ve&&(0,d.isInternalConnectionNode)(ve)&&ve.insId===t.id?ve.pinId:void 0,selectedOutput:fe&&(0,d.isInternalConnectionNode)(fe)&&fe.insId===t.id?fe.pinId:void 0,closestPin:st&&st.ins.id===t.id?st:void 0,queuedInputsData:null!==(n=ie[t.id])&&void 0!==n?n:g.emptyObj,instance:t,connections:ge,onTogglePinBreakpoint:d.noop,onTogglePinLog:d.noop,viewPort:Xe,onChangeVisibleInputs:In,onChangeVisibleOutputs:Cn,onSetDisplayName:Pn,onDeleteInstance:Tt,forceShowMinimized:fe||(null===(r=null==tt?void 0:tt.to)||void 0===r?void 0:r.insId)===t.id?"input":ve||(null===(i=null==tt?void 0:tt.from)||void 0===i?void 0:i.insId)===t.id?"output":void 0,isConnectedInstanceSelected:pe.some((function(e){return ge.some((function(n){var r=n.from,i=n.to;return r.insId===t.id&&i.insId===e||r.insId===e&&i.insId===t.id}))})),inlineGroupProps:hn(t),onCloseInlineEditor:On,inlineEditorPortalDomNode:Ye.current,onChangeStyle:yn,onGroupSelected:at,onPinMouseDown:Sn,onPinMouseUp:Dn,hadError:null!==(a=null===(o=e.instancesWithErrors)||void 0===o?void 0:o.has((0,d.fullInsIdPath)(t.id)))&&void 0!==a&&a},t.id)})),function(){if(je){var e=je.from,t=je.to,n=(0,g.logicalPosToRenderedPos)(e,Xe),r=(0,g.logicalPosToRenderedPos)(t,Xe);console.log(e.x,t.x," | ",n.x,r.x);var i=(0,g.getSelectionBoxRect)(n,r),o=i.x,a=i.y,u=i.w,s=i.h;return(0,c.jsx)("div",{className:"selection-box",style:{top:a,left:o,width:u,height:s}})}return null}(),function(){var t=Q.to;return(0,v.entries)(ye).map((function(n){var r=n[0],i=n[1];return(0,c.jsx)(P.PartIoView,{currentInsId:$,ancestorInsIds:e.ancestorsInsIds,type:"output",pos:be[r]||{x:0,y:0},id:r,onDelete:u?Mt:void 0,onRename:u?Xt:void 0,closest:!(!st||"output"!==st.type||st.ins.id!==te.id||st.pin!==r),connected:!1,viewPort:Xe,onDragStart:Ot,onDragEnd:Et,onDragMove:wt,onSelect:mt,onSetDescription:gt,description:i.description,selected:(null==t?void 0:t.pinId)===r,onMouseUp:Tn,onMouseDown:kn},r)}))}(),(0,c.jsx)(U.MainInstanceEventsIndicator,{currentInsId:$,ancestorsInsIds:ee,viewPort:Xe}),He?(0,c.jsx)(x.QuickAddMenu,{targetPart:He.targetPart,pinId:He.pinId,pinType:He.pinType,pos:He.pos,resolvedDependencies:re,part:te,onAdd:sn,onClose:un}):null,(0,c.jsxs)("div",{className:"viewport-controls-and-help",children:[(0,c.jsx)(C.Button,{small:!0,onClick:vt,minimal:!0,intent:"primary",children:"Center"}),(0,c.jsx)(W,{min:.15,max:3,stepSize:.05,labelStepSize:10,labelRenderer:Z,onChange:Ct,value:Xe.zoom}),we?(0,c.jsx)(B.HelpBubble,{}):null]}),Ue?(0,c.jsx)(k.InlineCodeModal,{env:g.emptyObj,initialValue:Ue.value,initialType:"existing"===Ue.type?Ue.templateType:void 0,onCancel:function(){return Be(void 0)},onSubmit:xn}):null,(0,c.jsx)("div",{className:"inline-editor-portal-root"})]}),(0,c.jsx)(L.ActionsMenu,{showRunFlowOptions:we,onAction:en,selectedInstances:pe,part:te,resolvedParts:le,to:ve,from:fe,hotkeysEnabled:$e})]})}catch(Mn){return console.error(Mn),(0,c.jsxs)("div",{children:["Error rendering board - ",Mn.toString()]})}})));var J=function(e,t){var n=e.target.closest(".visual-part-editor");return n&&n.getAttribute("data-id")===t}},12589:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BasePartView=void 0;var u=n(24246),s=o(n(27378)),c=a(n(86778)),l=a(n(48304));t.BasePartView=function(e){var t=e.dragged,n=e.viewPort,r=e.pos,i=e.onDragEnd,o=e.onDragMove,a=e.onDragStart,d=e.displayMode,p=s.useCallback((function(e,t){a(e,t)}),[a]),f=s.useCallback((function(e,t){var o=r,a=(t.x-o.x)/n.zoom,u=(t.y-o.y)/n.zoom,s=o.x+a,c=o.y+u;i(e,Object.assign({},t,{x:s,y:c}))}),[r,i,n]),v=s.useCallback((function(e,t){o(e,{x:t.x,y:t.y})}),[o]),m={transform:"scale("+n.zoom+")"},g=(0,c.default)("base-part-view",e.className,{dragged:t,"display-mode":d}),h=r.x*n.zoom-n.pos.x*n.zoom,b=r.y*n.zoom-n.pos.y*n.zoom,I={transform:"translate("+(h-r.x)+"px, "+(b-r.y)+"px)"},y=(0,c.default)("base-part-view-vp-fixer",{"display-mode":d});return(0,u.jsx)("div",{className:y,style:I,children:(0,u.jsx)(l.default,{onStop:f,onStart:p,onDrag:v,position:r,cancel:".no-drag",children:(0,u.jsx)("span",{className:"base-part-view-wrapper",children:(0,u.jsx)("div",{className:g,style:m,id:e.domId,children:e.children})})})})}},75012:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.handleConnectionCloseEditorCommand=void 0;var i=n(18265),o=r(n(63300));t.handleConnectionCloseEditorCommand=function(e,t){var n=t.from,r=t.to;return(0,o.default)(e,(function(e){var t=e.connections.find((function(e){var t=(0,i.connectionNodeEquals)(n,e.from),o=(0,i.connectionNodeEquals)(r,e.to);return t&&o}));t?e.connections=e.connections.filter((function(e){return e!==t})):e.connections.push({from:n,to:r})}))}},97841:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.handleDetachConstEditorCommand=void 0;var i=n(18265),o=r(n(63300)),a=n(52178);t.handleDetachConstEditorCommand=function(e,t,n){return(0,o.default)(e,(function(e){var r=e.instances.find((function(e){return e.id===t}));if(!r)throw new Error("Impossible state ins id with no matching instance");var o=r.inputConfig[n];if(!o)throw new Error("impossible state detaching const from unexistent config");if(!(0,i.isStaticInputPinConfig)(o))throw new Error("impossible state detaching const with no value");var u=JSON.stringify(o.value),s=(0,a.createInlineValuePart)({code:""+u,type:i.InlineValuePartType.VALUE}),c=(0,i.inlinePartInstance)("value-"+(0,i.randomInt)(999),s,{},{x:r.pos.x,y:r.pos.y-100});if(!e.instances.find((function(e){return e.id===r.id})))throw new Error("impossible state instance not found");r.inputConfig[n]=(0,i.queueInputPinConfig)(),e.instances.push(c),e.connections.push((0,i.connectionData)(c.id+".value",r.id+"."+n))}))}},3065:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.handleDuplicateSelectedEditorCommand=void 0;var i=n(18265),o=r(n(63300));t.handleDuplicateSelectedEditorCommand=function(e,t){var n=[];return{newPart:(0,o.default)(e,(function(r){var o=r.instances;t.forEach((function(t){var r=o.find((function(e){return e.id===t}));if(!r)throw new Error("impossible state duplicate selected no matching instance");if(r){var a=r.pos,u=Object.assign({},r,{pos:{x:a.x+20,y:a.y+20},id:(0,i.createInsId)(e)});o.push(u),n.push(u.id)}}))})),newInstances:n}}},24398:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.pasteInstancesCommand=void 0;var i=n(18265),o=r(n(63300));t.pasteInstancesCommand=function(e,t,n){var r=n.instances.map((function(n){return Object.assign({},n,{pos:t,id:(0,i.createInsId)(e)})})),a=new Map(r.map((function(e,t){return[n.instances[t].id,e.id]})));return{newPart:(0,o.default)(e,(function(e){var t,i;(t=e.instances).push.apply(t,r);var o=n.connections.map((function(e){var t=e.from,n=e.to;return{from:Object.assign({},t,{insId:a.get(t.insId)||t.insId}),to:Object.assign({},n,{insId:a.get(n.insId)||n.insId})}}));(i=e.connections).push.apply(i,o)})),newInstances:r}}},95160:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionView=t.SingleConnectionView=void 0;var u=n(27378),s=n(24246),c=o(n(27378)),l=a(n(86778)),d=n(18265),p=n(68488),f=n(29768),v=n(96149),m=n(99743),g=n(42272),h=n(24492);t.SingleConnectionView=function(e){var t=(0,f.useSsr)().isBrowser,n=e.connection,r=e.part,i=e.resolvedParts,o=e.instances,a=e.type,u=e.viewPort,v=e.toggleHidden,b=e.parentSelected,I=e.removeConnection,y=n.from,C=(0,d.isInternalConnectionNode)(y)&&o.find((function(e){return e.id===y.insId}));if(!C&&(0,d.isInternalConnectionNode)(y))throw new Error('impossible state  - "from instance id - ['+y.insId+'] does not exist"');var P=((0,d.isInternalConnectionNode)(y)&&C?(0,d.getPartDef)(C,i):r).outputs[y.pinId],_=P&&P.delayed,x=t?(0,p.calcStartPos)(Object.assign({},e,{connectionNode:y})):{x:0,y:0},j=t?(0,p.calcTargetPos)(Object.assign({},e,{connectionNode:n.to})):{x:0,y:0},O=(0,m.vDiv)(x,e.parentVp.zoom),w=O.x,E=O.y,S=(0,m.vDiv)(j,e.parentVp.zoom),D=S.x,k=S.y,T=(0,l.default)({delayed:_,hidden:n.hidden,"parent-selected":b},a),M=c.useCallback((function(e){e.preventDefault(),e.stopPropagation();var t=(0,s.jsxs)(g.Menu,{children:[(0,s.jsx)(g.MenuItem,{text:n.hidden?"Show connection":"Hide connection",onClick:function(){return v(n)}}),(0,s.jsx)(g.MenuItem,{text:"Remove connection",onClick:function(){return I(n)}})]});g.ContextMenu.show(t,{left:e.pageX,top:e.pageY})}),[n,I,v]);return(0,s.jsx)(h.ConnectionViewPath,{className:T,from:{x:w,y:E},to:{x:D,y:k},dashed:"regular"!==a,zoom:u.zoom,onContextMenu:M})};t.ConnectionView=function(e){var n,r=e.viewPort,i=e.futureConnection,o=e.toggleHidden,a=e.selectedInstances,l=e.draggedSource,d=c.useState(0),f=d[0],m=d[1],g=c.useCallback((function(e){return requestAnimationFrame((function(){m((function(e){return(e+1)%9})),e>0&&g(e-1)}))}),[]);c.useEffect((function(){var e=g(10);return function(){cancelAnimationFrame(e)}}),[g]),c.useEffect((function(){var e=function(){g(3)};return window.addEventListener("scroll",e),window.addEventListener("resize",e),function(){window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}}),[g,f]);var b=e.connections.map((function(n){var r=a.includes(n.from.insId)||a.includes(n.to.insId);return(0,u.createElement)(t.SingleConnectionView,Object.assign({},e,{connection:n,type:"regular",parentSelected:r,key:n.from.insId+n.from.pinId+n.to.insId+n.to.pinId}))}));if(i&&b.push((0,u.createElement)(t.SingleConnectionView,Object.assign({},e,{connection:i.connection,type:i.type,toggleHidden:o,parentSelected:!1,key:"future"}))),l){var I=(l.from?p.calcStartPos:p.calcTargetPos)({connectionNode:null!==(n=l.from)&&void 0!==n?n:l.to,viewPort:r,boardPos:e.boardPos,ancestorsInsIds:e.ancestorsInsIds,currentInsId:e.currentInsId});b.push((0,s.jsx)(h.ConnectionViewPath,{className:"dragged",from:I,to:(0,v.logicalPosToRenderedPos)(e.lastMousePos,r),zoom:r.zoom},"dragged"))}return(0,s.jsx)("span",{className:"connections-view",style:{opacity:r.zoom},children:(0,s.jsx)("svg",{style:{width:"100%"},children:b})})}},24492:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionViewPath=void 0;var i=n(24246),o=r(n(86778)),a=n(64452);t.ConnectionViewPath=function(e){var t=e.from,n=e.to,r=e.className,u=e.onContextMenu,s=e.zoom,c=e.dashed,l=t.x,d=t.y,p=n.x,f=n.y,v=(0,a.calcBezierPath)({sourceX:l,sourceY:d,targetX:p,targetY:f,curvature:.15}),m=3*s,g=c?6*s:void 0;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:v,className:(0,o.default)("connection",r),style:{strokeWidth:m,strokeDasharray:g},onContextMenu:u}),e.label?(0,i.jsx)("text",{className:"label",x:(l+p)/2,y:(d+f)/2,fontSize:"12px"}):null,(0,i.jsxs)("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,i.jsx)("stop",{offset:"0%"}),(0,i.jsx)("stop",{offset:"100%"})]})]})}},64452:function(e,t){"use strict";var n;function r(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function i(e){var t,i,o=e.pos,a=e.x1,u=e.y1,s=e.x2,c=e.y2,l=e.c;switch(o){case n.Left:t=a-r(a-s,l),i=u;break;case n.Right:t=a+r(s-a,l),i=u;break;case n.Top:t=a,i=u-r(u-c,l);break;case n.Bottom:t=a,i=u+r(c-u,l)}return[t,i]}Object.defineProperty(t,"__esModule",{value:!0}),t.getBezierCenter=t.calcBezierPath=t.Position=void 0,function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(n=t.Position||(t.Position={}));t.calcBezierPath=function(e){var t=e.sourceX,r=e.sourceY,o=e.sourcePosition,a=void 0===o?n.Bottom:o,u=e.targetX,s=e.targetY,c=e.targetPosition,l=void 0===c?n.Top:c,d=e.curvature,p=void 0===d?.25:d,f=i({pos:a,x1:t,y1:r,x2:u,y2:s,c:p}),v=f[0],m=f[1],g=i({pos:l,x1:u,y1:s,x2:t,y2:r,c:p});return"M"+t+","+r+" C"+v+","+m+" "+g[0]+","+g[1]+" "+u+","+s},t.getBezierCenter=function(e){var t=e.sourceX,r=e.sourceY,o=e.sourcePosition,a=void 0===o?n.Bottom:o,u=e.targetX,s=e.targetY,c=e.targetPosition,l=void 0===c?n.Top:c,d=e.curvature,p=void 0===d?.25:d,f=i({pos:a,x1:t,y1:r,x2:u,y2:s,c:p}),v=f[0],m=f[1],g=i({pos:l,x1:u,y1:s,x2:t,y2:r,c:p}),h=.125*t+.375*v+.375*g[0]+.125*u,b=.125*r+.375*m+.375*g[1]+.125*s;return[h,b,Math.abs(h-t),Math.abs(b-r)]}},68488:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcTargetPos=t.calcStartPos=t.calcPinPosition=void 0;var r=n(18265),i=n(90095),o={x:99999,y:99999};function a(e){var t=(0,i.getPinDomId)({fullInsIdPath:(0,r.fullInsIdPath)(e.insId,e.ancestorsInsIds),pinId:e.pinId,pinType:e.pinType,isMain:e.isMain});return function(e,t,n,r){if(!e)return console.warn("Cannot find element "+n+" to calculate position."),o;var i=e.getBoundingClientRect(),a=i.x,u=i.y,s=i.width,c=u+i.height/2;return{x:a+s/2-t.x,y:c-t.y}}(document.getElementById(t),e.boardPos,t,e.viewPort)}t.calcPinPosition=a;t.calcStartPos=function(e){var t=e.connectionNode,n=e.boardPos,i=e.ancestorsInsIds,o=e.viewPort,u=e.currentInsId;return(0,r.isExternalConnectionNode)(t)?a({pinId:t.pinId,insId:u,ancestorsInsIds:i,isMain:!0,pinType:"input",boardPos:n,viewPort:o}):a({pinId:t.pinId,insId:t.insId,ancestorsInsIds:(0,r.fullInsIdPath)(u,i),isMain:!1,pinType:"output",boardPos:n,viewPort:o})};t.calcTargetPos=function(e){var t=e.connectionNode,n=e.boardPos,i=e.ancestorsInsIds,o=e.viewPort,u=e.currentInsId;return(0,r.isExternalConnectionNode)(t)?a({pinId:t.pinId,insId:u,ancestorsInsIds:i,isMain:!0,pinType:"output",boardPos:n,viewPort:o}):a({pinId:t.pinId,insId:t.insId,ancestorsInsIds:(0,r.fullInsIdPath)(u,i),isMain:!1,pinType:"input",boardPos:n,viewPort:o})}},90095:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPinDomId=t.getMainInstanceIndicatorDomId=t.getInstanceDomId=void 0;var r=n(18265);t.getInstanceDomId=function(e,t){return("ins:"+(0,r.fullInsIdPath)(e,t)).replace(/\s+/g,"-")};t.getMainInstanceIndicatorDomId=function(e,t){return("main-ins:"+(0,r.fullInsIdPath)(e,t)).replace(/\s+/g,"-")};t.getPinDomId=function(e){var t=e.pinType,n=e.fullInsIdPath,r=e.pinId;return((e.isMain?"main-":"")+"pin:"+t+":"+n+":"+r).replace(/\s+/g,"-")}},57768:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceView=t.getVisibleOutputs=t.getVisibleInputs=t.INSTANCE_INFO_TOOLTIP_DELAY=t.MAX_INSTANCE_WIDTH=t.MIN_WIDTH_PER_PIN=t.PIECE_CHAR_WIDTH=t.PIECE_HORIZONTAL_PADDING=void 0;var c=n(24246),l=u(n(27378)),d=n(92739),p=n(18265),f=s(n(86778)),v=n(57076),m=n(18265),g=n(18265),h=n(71462),b=n(12589),I=n(18265),y=n(90095),C=n(41304),P=n(96149),_=n(42272),x=s(n(31542)),j=n(41978),O=s(n(49040));t.PIECE_HORIZONTAL_PADDING=25,t.PIECE_CHAR_WIDTH=11,t.MIN_WIDTH_PER_PIN=40,t.MAX_INSTANCE_WIDTH=400,t.INSTANCE_INFO_TOOLTIP_DELAY=400;t.getVisibleInputs=function(e,t,n){var r=e.visibleInputs;if(r)return r;var i=(0,p.keys)((0,g.getPartInputs)(t)).filter((function(r,i){var o,a=n.some((function(t){return t.to.insId===e.id&&t.to.pinId===r})),u=t.inputs[r]&&"optional"===(null===(o=t.inputs[r])||void 0===o?void 0:o.mode);return a||!u&&r!==m.TRIGGER_PIN_ID}));return 0===i.length?[m.TRIGGER_PIN_ID]:i};t.getVisibleOutputs=function(e,t,n){var r=e.visibleOutputs;if(r)return r;var i=Object.keys(t.outputs);return n.some((function(t){return t.from.insId===e.id&&t.from.pinId===m.ERROR_PIN_ID}))?[].concat(i,[m.ERROR_PIN_ID]):i};t.InstanceView=function(e){var n=e.selected,o=e.selectedInput,a=e.selectedOutput,u=e.closestPin,s=e.dragged,w=e.onTogglePinLog,E=e.onTogglePinBreakpoint,S=e.onDetachConstValue,D=e.onCopyConstValue,k=e.onPasteConstValue,T=e.displayMode,M=e.connections,N=e.instance,R=e.viewPort,A=e.part,V=e.onPinClick,H=e.onPinDblClick,z=e.onDragStart,G=e.onDragEnd,F=e.onDragMove,q=e.onToggleSticky,L=e.onSelect,U=e.onDblClick,B=e.onChangeVisibleInputs,W=e.onChangeVisibleOutputs,Z=e.onConvertConstToEnv,J=e.inlineGroupProps,Y=e.onUngroup,K=e.onExtractInlinePart,Q=e.onGroupSelected,X=e.isConnectedInstanceSelected,$=e.inlineEditorPortalDomNode,ee=e.onChangeStyle,te=e.onDeleteInstance,ne=e.onSetDisplayName,re=e.onPinMouseUp,ie=e.onPinMouseDown,oe=N.id,ae=l.useMemo((function(){var e=(0,p.randomInt)(6,1);return{icon:(0,p.pickRandom)([["fab","discord"],["fab","slack"],"bug","cube"]),color:e,size:(0,p.randomInt)(3,1),variation:(0,p.randomInt)(5,1)}}),[]),ue=l.useRef(),se=l.useMemo((function(){return N.style||A.defaultStyle||{}}),[A,N]),ce=se.size||"regular",le=l.useMemo((function(){return new Map(M.filter((function(e){return e.to.insId===oe})).map((function(e){var t=e.to,n=e.hidden;return[t.pinId,n]})))}),[M,oe]),de=l.useMemo((function(){return new Map(M.filter((function(e){return e.from.insId===oe})).map((function(e){var t=e.from,n=e.hidden;return[t.pinId,n]})))}),[M,oe]),pe=(0,P.usePrompt)(),fe=l.useCallback((function(e){return V(N,e,"input")}),[N,V]),ve=l.useCallback((function(e,t){return H(N,e,"input",t)}),[N,H]),me=l.useCallback((function(e,t){return H(N,e,"output",t)}),[N,H]),ge=l.useCallback((function(e){return V(N,e,"output")}),[N,V]),he=l.useCallback((function(e,t){z(N,e,t)}),[N,z]),be=l.useCallback((function(e,t){var n=N.pos,r=(t.x-n.x)/R.zoom,i=(t.y-n.y)/R.zoom,o=n.x+r,a=n.y+i;G(N,e,Object.assign({},t,{x:o,y:a}))}),[N,G,R.zoom]),Ie=l.useCallback((function(e,t){F(N,e,{x:t.x,y:t.y})}),[N,F]),ye=l.useCallback((function(e){return q(N,e)}),[N,q]),Ce=l.useCallback((function(e){return S(N,e)}),[N,S]),Pe=l.useCallback((function(e){return D(N,e)}),[N,D]),_e=l.useCallback((function(e){return k(N,e)}),[N,k]),xe=l.useCallback((function(e){return L(N,e)}),[N,L]),je=l.useCallback((function(e){return U(N,e.shiftKey)}),[N,U]),Oe=(0,p.entries)(A.inputs),we=N.visibleInputs,Ee=N.visibleOutputs;we&&Oe.sort((function(e,t){return we.indexOf(e[0])-we.indexOf(t[0])}));var Se=(0,p.entries)(A.outputs);Ee&&Se.sort((function(e,t){return Ee.indexOf(e[0])-Ee.indexOf(t[0])}));var De=(0,t.getVisibleInputs)(N,A,M),ke=(0,t.getVisibleOutputs)(N,A,M);Oe.push([m.TRIGGER_PIN_ID,Object.assign({},(0,p.partInput)(),{description:"Use this pin to manually trigger the part. If not connected, the part will be triggered automatically when all required inputs have data."})]),Se.push([m.ERROR_PIN_ID,Object.assign({},(0,m.partOutput)(),{description:"Use this pin to catch errors that happen inside this part. If not connected, errors will bubble up to the parent part."})]);var Te=Oe.filter((function(e){var t=e[0];return De.includes(t)||(n||X)&&le.has(t)})),Me=Se.filter((function(t){var r=t[0];return ke.includes(r)||(n||X)&&de.has(r)||r===m.ERROR_PIN_ID&&e.hadError})),Ne=M.some((function(e){return e.from.insId===oe&&e.from.pinId===m.ERROR_PIN_ID})),Re=(0,f.default)("ins-view",{"no-inputs":0===Oe.length,"no-outputs":0===Se.length,"display-mode":T,"force-minimized-input":"input"===e.forceShowMinimized||"both"===e.forceShowMinimized,"force-minimized-output":"output"===e.forceShowMinimized||"both"===e.forceShowMinimized,"inline-part-edited":!!J,"error-caught":Ne}),Ae=(0,f.default)({selected:n,dragged:s,closest:u&&u.ins.id===N.id},"size-"+ce),Ve=new Set((0,p.entries)(A.inputs).filter((function(e){e[0];var t=e[1];return(0,m.isInputPinOptional)(t)})).map(p.pickFirst)),He=(0,p.entries)(N.inputConfig).reduce((function(e,t){var n,r=t[0],i=t[1];return(0,m.isStickyInputPinConfig)(i)||i.sticky?Object.assign({},e,((n={})[r]=!0,n)):e}),{}),ze=(0,h.calcPartContent)(N,A),Ge=function(e){var t=N.inputConfig[e];if((0,I.isStaticInputPinConfig)(t))return t.value},Fe=l.useCallback(i(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,p.okeys)(A.inputs),e.next=3,pe("New order?",(N.visibleInputs||t).join(","));case 3:(n=e.sent)&&B(N,n.split(","));case 5:case"end":return e.stop()}}),e)}))),[A.inputs,pe,N,B]),qe=l.useCallback(i(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,p.okeys)(A.outputs),e.next=3,pe("New order?",(N.visibleOutputs||t).join(","));case 3:(n=e.sent)&&W(N,n.split(","));case 5:case"end":return e.stop()}}),e)}))),[A.outputs,pe,N,W]),Le=l.useCallback((function(){te(N)}),[te,N]),Ue=l.useCallback(i(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe("Set custom display name",N.displayName||A.id);case 2:t=e.sent,ne(N,t);case 4:case"end":return e.stop()}}),e)}))),[pe,N,ne,A.id]),Be=Object.keys((0,g.getPartInputs)(A)),We=Object.keys((0,p.getPartOutputs)(A)),Ze=l.useCallback((function(e){Z&&Z(N,e)}),[N,Z]),Je=l.useCallback((function(e,t){re&&re(N,e,t)}),[N,re]),Ye=l.useCallback((function(e,t){ie&&ie(N,e,t)}),[N,ie]),Ke=function(){return(0,c.jsx)("div",{className:"inputs no-drag",children:Te.map((function(t){var r,i=t[0],a=t[1];return(0,c.jsx)(v.PinView,{type:"input",currentInsId:N.id,ancestorsInsIds:e.ancestorsInsIds,id:i,optional:Ve.has(i),connected:le.has(i),isSticky:He[i],minimized:!n&&1===Te.length,onToggleSticky:ye,onDetachConstValue:Ce,onCopyConstValue:Pe,onPasteConstValue:_e,copiedConstValue:e.copiedConstValue,selected:i===o,onClick:fe,onDoubleClick:ve,isClosestToMouse:!!u&&"input"===u.type&&u.pin===i,onToggleLogged:w,onToggleBreakpoint:E,onInspect:e.onInspectPin,constValue:Ge(i),onConvertConstToEnv:e.onConvertConstToEnv?Ze:void 0,description:a.description,queuedValues:null!==(r=e.queuedInputsData[i])&&void 0!==r?r:0,onMouseUp:Je,onMouseDown:Ye},i)}))})},Qe=function(){return(0,c.jsx)("div",{className:"outputs no-drag",children:Me.map((function(t){var r=t[0],i=t[1];return(0,c.jsx)(v.PinView,{currentInsId:N.id,ancestorsInsIds:e.ancestorsInsIds,connected:de.has(r),type:"output",id:r,minimized:!n&&1===Me.length,isClosestToMouse:!!u&&"output"===u.type&&u.pin===r,selected:r===a,onClick:ge,onDoubleClick:me,onToggleLogged:w,onToggleBreakpoint:E,onInspect:e.onInspectPin,description:i.description,onMouseUp:Je,onMouseDown:Ye},r)}))})},Xe=l.useCallback((function(e){ee(N,e)}),[N,ee]),$e=l.useCallback((function(){var e=Be.map((function(e){var t=De.includes(e),n=le.has(e)&&!0!==le.get(e),r=(0,p.getInputName)(e);return{text:t?n?'Hide input "'+r+'" (disconnect first)':'Hide input "'+r+'"':'Show input "'+r+'"',onClick:function(){return B(N,t?De.filter((function(t){return t!==e})):[].concat(De,[e]))},disabled:n&&t}})),t=We.map((function(e){var t=ke.includes(e),n=de.has(e),r=(0,p.getOutputName)(e);return{text:t?n?'Hide output "'+r+'" (disconnect first)':'Hide output "'+r+'"':'Show output "'+r+'"',onClick:function(){return W(N,t?ke.filter((function(t){return t!==e})):[].concat(ke,[e]))},disabled:n&&t}})),n=[].concat(e,t,(0,p.isInlinePartInstance)(N)&&(0,g.isVisualPart)(N.part)?[{text:"Ungroup inline part",onClick:function(){return Y(N)}}]:[],(0,p.isInlinePartInstance)(N)?[{text:"Extract inline part to file",onClick:function(){return K(N)}}]:[],[{text:"Reorder inputs",onClick:Fe},{text:"Reorder outputs",onClick:qe},{text:"Set display name",onClick:Ue},{text:"Group selected instances",onClick:Q},{text:"Delete instance",intent:"danger",onClick:Le}]);return(0,c.jsxs)(_.Menu,{children:[(0,c.jsx)(_.MenuItem,{text:"Style",children:(0,c.jsx)(j.PartStyleMenu,{style:se,onChange:Xe,promptFn:pe})}),n.map((function(e){return(0,c.jsx)(_.MenuItem,Object.assign({},e))}))]})}),[Be,We,N,Fe,qe,Ue,Le,se,Xe,pe,De,le,B,ke,de,W,Y,K,Q]),et=l.useCallback((function(e){e.preventDefault(),e.stopPropagation();var t=$e();_.ContextMenu.show(t,{left:e.clientX,top:e.clientY})}),[$e]),tt=Object.assign({"--part-color":se.color},se.cssOverride||{}),nt=(0,y.getInstanceDomId)(N.id,e.ancestorsInsIds);return(0,c.jsx)("div",{className:Re,children:(0,c.jsxs)(b.BasePartView,{pos:N.pos,viewPort:R,onDragStart:he,onDragMove:Ie,onDragEnd:be,upperRenderer:Ke,bottomRenderer:Qe,displayMode:T,domId:nt,children:[(0,c.jsx)(O.default,{className:"instance-info-tooltip",html:!0,id:nt+"__tooltip",delayShow:t.INSTANCE_INFO_TOOLTIP_DELAY}),Ke(),J?x.default.createPortal((0,c.jsxs)("div",{className:"inline-group-editor-container no-drag",children:[(0,c.jsxs)("header",{children:[ze," ",(0,c.jsx)("button",{onClick:e.onCloseInlineEditor,children:"close"})]}),(0,c.jsx)(C.VisualPartEditor,Object.assign({},e.inlineGroupProps,{className:"no-drag",ref:ue}))]}),$):(0,c.jsxs)("div",{className:(0,f.default)("ins-view-inner",Ae,"size-"+ae.size),onClick:xe,onDoubleClick:je,onContextMenu:et,style:tt,"data-tip":A.description,"data-for":nt+"__tooltip",children:[se.icon?(0,c.jsx)(d.FontAwesomeIcon,{icon:se.icon}):null," ",ze]}),Qe()]})})}},91530:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PartStyleMenu=t.partStylePresetColors=void 0;var s=n(24246),c=n(42272),l=u(n(27378)),d=n(40232);t.partStylePresetColors=[{name:"Amethyst",color:"#9b5de5"},{name:"Magenta",color:"#f15bb5"},{name:"Yellow",color:"#fee440"},{name:"Capri",color:"#00bbf9"},{name:"Sea Green",color:"#00f5d4"},{name:"Orange",color:"#ff7f00"}];var p={size:"regular"};t.PartStyleMenu=function(e){var n,o=e.onChange,a=e.style||p,u=e.promptFn,f=l.default.useCallback((function(e,t){var n;o(Object.assign({},a,((n={})[e]=t,n)))}),[a,o]),v=l.default.useCallback(i(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u("Icon name? (Font Awesome conventions)","rocket");case 2:t=e.sent,n=t.includes(",")?t.split(","):t,f("icon",n);case 5:case"end":return e.stop()}}),e)}))),[u,f]),m=(0,l.useCallback)(i(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u("Enter a custom style (valid JSON representing a React CSS object)",a.cssOverride?JSON.stringify(a.cssOverride):"");case 2:t=e.sent;try{n=JSON.parse(t),f("cssOverride",n)}catch(r){console.error(r),(0,d.toastMsg)("Invalid object","danger")}case 4:case"end":return e.stop()}}),e)}))),[u,f,a.cssOverride]);return(0,s.jsxs)(l.default.Fragment,{children:[(0,s.jsxs)(c.MenuItem,{text:"Color",children:[t.partStylePresetColors.map((function(e){return(0,s.jsx)(c.MenuItem,{text:e.name,onClick:function(){return f("color",e.color)}},e.name)})),(0,s.jsx)(c.MenuDivider,{}),(0,s.jsx)(c.MenuItem,{text:"Remove Color",onClick:function(){return f("color",void 0)}})]}),(0,s.jsxs)(c.MenuItem,{text:"Size ("+(null!==(n=a.size)&&void 0!==n?n:"regular")+")",children:[(0,s.jsx)(c.MenuItem,{text:"Small",onClick:function(){return f("size","small")}}),(0,s.jsx)(c.MenuItem,{text:"Regular",onClick:function(){return f("size","regular")}}),(0,s.jsx)(c.MenuItem,{text:"Large",onClick:function(){return f("size","large")}})]}),(0,s.jsxs)(c.MenuItem,{text:"Icon",children:[(0,s.jsx)(c.MenuItem,{text:"Choose Icon",onClick:v}),(0,s.jsx)(c.MenuItem,{text:"Remove Icon",onClick:function(){return f("icon",void 0)}})]}),(0,s.jsx)(c.MenuItem,{text:"Custom Styling",onClick:m})]})}},41978:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(91530),t)},41756:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(57768),t)},71462:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.calcInstancePosition=t.calcPartWidth=t.calcPartContent=void 0;var a=n(18265),u=o(n(78284)),s=n(12901),c=n(57768),l=n(98784),d=n(90095);t.calcPartContent=function(e,t){if(e.displayName)return e.displayName;if(t.customViewCode)try{var n=Object.entries(e.inputConfig).filter((function(e){var t=e[1];return(0,a.isStaticInputPinConfig)(t)})).reduce((function(e,t){var n,r=t[0],i=t[1];return Object.assign({},e,((n={})[r]=i.value,n))}),{});return u.render(t.customViewCode,{inputs:n,isDefined:s.isDefined}).trim()}catch(r){return console.error("Error with custom view",r),"Error in custom view ["+t.id+"]"}return t.id};t.calcPartWidth=function(e,n){var r=(0,a.okeys)(n.inputs).length*c.MIN_WIDTH_PER_PIN,i=(0,t.calcPartContent)(e,n),o=c.PIECE_CHAR_WIDTH;return(0,l.clamp)(i.length*o+2*c.PIECE_HORIZONTAL_PADDING,r,c.MAX_INSTANCE_WIDTH)};t.calcInstancePosition=function(e,t,n){var r=(0,d.getInstanceDomId)(e,t),i=document.getElementById(r);if(i){var o=i.getBoundingClientRect(),a=o.x,u=o.y,s=o.width,c=u+o.height/2;return{x:a+s/2-n.x,y:c-n.y}}return console.warn("Cannot find element to draw connection to",r),{x:99999,y:99999}}},10616:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutDebugger=t.LayoutDebuggerItem=t.PosDebugger=void 0;var i=n(27378),o=n(24246),a=n(18265),u=r(n(27378)),s=n(13011),c=function(e){var t=e.pos;return(0,o.jsxs)("span",{children:[t.x.toFixed(1),", ",t.y.toFixed(1)]})};t.PosDebugger=function(e){return(0,o.jsx)("span",{className:"pos-debugger",children:(0,o.jsx)(c,{pos:e.pos})})};t.LayoutDebuggerItem=function(e){var n=e.pos,r=e.viewPort,i=e.size,a=e.color,u=r.zoom,s=n.x*u-r.pos.x*u,c=n.y*u-r.pos.y*u,l={transform:"translate("+(s-n.x)+"px, "+(c-n.y)+"px)"},d={transform:"scale("+r.zoom+")"},p={transform:"translate("+n.x+"px, "+n.y+"px)"},f={width:i.width+"px",height:i.height+"px",backgroundColor:a};return(0,o.jsx)("div",{className:"layout-debugger",style:l,children:(0,o.jsxs)("span",{className:"drag-sim",style:p,children:[(0,o.jsx)(t.PosDebugger,{pos:n}),(0,o.jsx)("div",{className:"layout-debugger-zoom-wrapper",style:d,children:(0,o.jsx)("div",{className:"layout-debugger-inner",style:f})})]})})};var l=function(){try{return"true"===localStorage.getItem("pos-debugger")}catch(e){return!1}}();t.LayoutDebugger=function(e){var n=e.extraDebug,r=e.vp,d=e.part,p=e.mousePos;if(!l)return null;var f=n.map((function(e,n){return(0,i.createElement)(t.LayoutDebuggerItem,Object.assign({},e,{key:n}))})),v=[].concat(d.instances.map((function(e){return e.pos})),(0,a.values)(d.inputsPosition),(0,a.values)(d.outputsPosition)).map((function(e){return(0,o.jsx)(t.LayoutDebuggerItem,{pos:e,viewPort:r,size:{width:0,height:0},color:"red"})})),m=(0,s.logicalPosToRenderedPos)(p,r),g=(0,o.jsxs)("div",{className:"viewport-data",children:[(0,o.jsxs)("div",{children:["Pos: ",(0,o.jsx)(c,{pos:r.pos})]}),(0,o.jsxs)("div",{children:["Zoom: ",r.zoom.toFixed(2)," "]}),(0,o.jsxs)("div",{children:["Mouse (logical): ",(0,o.jsx)(c,{pos:p})]}),(0,o.jsxs)("div",{children:["Rendered (rendered): ",(0,o.jsx)(c,{pos:m})]})]});return(0,o.jsxs)(u.default.Fragment,{children:[g,f,v]})}},94e3:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(10616),t)},5681:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.orderVisualPart=t.layoutToInstances=void 0;var i=n(41304),o=n(18265),a=n(72913),u=r(n(63300)),s=n(80807),c=n(99743),l=n(71462);t.layoutToInstances=function(e,t){return(0,u.default)(t,(function(t){(0,o.entries)(e.nodes).forEach((function(e){var n=e[0],r=e[1];if(n.startsWith("ins-")){var i=n.replace("ins-",""),o=t.instances.find((function(e){return e.id===i}));o?o.pos=r.p:console.warn("WAT")}if(n.startsWith("part-input-")){var a=n.replace("part-input-","");t.inputsPosition[a]=r.p}if(n.startsWith("part-output-")){var u=n.replace("part-output-","");t.outputsPosition[u]=r.p}}))}))};t.orderVisualPart=function(e,n,r,u){var d=e.instances,p=e.connections,f=d.reduce((function(e,t){var r,a=(0,c.size)((0,l.calcPartWidth)(t,(0,o.getPartDef)(t,n)),i.PART_HEIGHT);return Object.assign({},e,((r={})["ins-"+t.id]={p:t.pos,s:a},r))}),{}),v=(0,o.okeys)(e.inputsPosition).reduce((function(t,n){var r,o=e.inputsPosition[n],a=(0,c.size)((0,s.calcPartIoWidth)(n),i.PART_HEIGHT);return Object.assign({},t,((r={})["part-input-"+n]={p:o,s:a},r))}),{}),m=(0,o.okeys)(e.outputsPosition).reduce((function(t,n){var r,o=e.outputsPosition[n],a=(0,c.size)((0,s.calcPartIoWidth)(n),i.PART_HEIGHT);return Object.assign({},t,((r={})["part-output-"+n]={p:o,s:a},r))}),{}),g=Object.assign({},f,v,m),h=p.map((function(e){return[(0,o.isExternalConnectionNode)(e.from)?"part-input-"+e.from.pinId:"ins-"+e.from.insId,(0,o.isExternalConnectionNode)(e.to)?"part-output-"+e.to.pinId:"ins-"+e.to.insId]})),b=(0,a.orderLayout)({nodes:g,edges:h},r,(function(n,r){u&&u((0,t.layoutToInstances)(n,e),r)}));return(0,t.layoutToInstances)(b,e)}},72913:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.orderLayout=void 0;var r=n(99743),i=400,o=function(e){return e.reduce((function(e,t){var n,i=(0,r.vSub)(t.p,(0,r.vec)(t.s.width/2,t.s.height/2));return Object.assign({},e,((n={})[t.id]={p:i,s:t.s},n))}),{})};t.orderLayout=function(e,t,n){for(var a=e.nodes,u=e.edges,s=Object.entries(a).map((function(e){var t=e[0],n=e[1];return{id:t,p:(0,r.vAdd)(n.p,(0,r.vec)(n.s.width/2,n.s.height/2)),f:(0,r.vec)(0,0),v:(0,r.vec)(0,0),m:1,s:n.s}})),c=0,l=function(){for(var e=s,t=0;t<e.length;t++)for(var a=t+1;a<e.length;a++)if(t!==a){var l=e[t],d=e[a],p=(0,r.vSub)(l.p,d.p),f=Math.abs(p.x),v=Math.abs(p.y),m=l.id.startsWith("part-input"),g=l.id.startsWith("part-output"),h=d.id.startsWith("part-input"),b=d.id.startsWith("part-output");if(f<i&&v<80){var I=1e3*(i-f);l.f=(0,r.vAdd)(l.f,(0,r.vec)(.5*I,0)),d.f=(0,r.vAdd)(d.f,(0,r.vec)(-.5*I,0))}if(v<50){var y=100*p.y;l.f=(0,r.vAdd)(l.f,(0,r.vec)(0,.5*y)),d.f=(0,r.vAdd)(d.f,(0,r.vec)(0,-.5*y))}if(m&&b){var C=(0,r.vSub)(l.p,d.p).y;if(C<-500){var P=100*(i-C);l.f=(0,r.vAdd)(l.f,(0,r.vec)(0,-.5*P)),d.f=(0,r.vAdd)(d.f,(0,r.vec)(0,.5*P))}}else if(g&&h){var _=(0,r.vSub)(l.p,d.p).y;if(_<500){var x=100*(i-_);l.f=(0,r.vAdd)(l.f,(0,r.vec)(0,-.5*x)),d.f=(0,r.vAdd)(d.f,(0,r.vec)(0,.5*x))}}var j=(0,r.vSub)(l.p,(0,r.vec)(0,l.p.y)),O=(0,r.vLen)(j),w=(0,r.vMul)((0,r.vNorm)(j),-50*O);l.f=(0,r.vAdd)(l.f,w)}u.forEach((function(t){var n=e.find((function(e){return e.id===t[0]})),i=e.find((function(e){return e.id===t[1]}));if(n&&i){var o=(0,r.vec)(0,-200),a=(0,r.vSub)(n.p,i.p),u=(0,r.vSub)(o,a),s=1e3*(0,r.vLen)(u),c=(0,r.vMul)((0,r.vNorm)(u),.5*s),l=(0,r.vMul)((0,r.vNorm)(u),-.5*s);n.f=(0,r.vAdd)(n.f,c),i.f=(0,r.vAdd)(i.f,l)}else console.warn("weoops",t[0],t[1])})),e=(e=e.map((function(e){return(0,r.itrPhysics)(15,e)}))).map((function(e){var t=(0,r.vMul)(e.v,.5),n=(0,r.vLen)(t)>100?(0,r.vMul)((0,r.vNorm)(t),100):t;return Object.assign({},e,{v:n})})),s=e,n&&n({nodes:o(e),edges:u},c),c++};c<t&&(c<2||(0,r.totalEnergy)(s)>.01);)l();return{nodes:o(s),edges:u,itrs:c,timeout:c>=t,total:(0,r.totalEnergy)(s)}}},52688:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateInstancesWithSingleConstPinsMap=t.getLeafInstancesOfSelection=void 0;t.getLeafInstancesOfSelection=function(e,t,n){return e.reduce((function(e,r){var i=n.filter((function(e){return e.to.insId===r.id})).map((function(e){return t.find((function(t){return t.id===e.from.insId}))})).filter((function(e){return!!e}));return[].concat(e,i)}),[]).filter((function(t){return 1===n.filter((function(e){return e.from.insId===t.id||e.to.insId===t.id})).length&&!e.includes(t)}))};t.calculateInstancesWithSingleConstPinsMap=function(e,t){return e.connections.filter((function(e){return t.has(e.from.insId)})).reduce((function(e,n){var r=t.get(n.from.insId),i=n.to.insId,o=e.get(i)||new Map;return o.set(n.to.pinId,{val:r,insId:n.from.insId}),e.set(i,o),e}),new Map)}},16914:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PartIoView=void 0;var c=n(24246),l=u(n(27378)),d=n(18265),p=n(12589),f=s(n(86778)),v=n(42272),m=n(91312),g=n(40411),h=n(18265),b=s(n(49040)),I=n(90095);t.PartIoView=l.memo((function(e){var t=e.viewPort,n=e.selected,o=e.pos,a=e.type,u=e.id,s=e.onDblClick,y=e.onRename,C=e.onDelete,P=e.onChangeInputMode,_=e.inputMode,x=e.onSelect,j=e.closest,O=e.onSetDescription,w=e.description,E=e.onMouseUp,S=e.onMouseDown,D=e.currentInsId,k=(0,g.useHistoryHelpers)(D,u,a),T=k.history,M=k.resetHistory,N=k.refreshHistory,R=(0,m.usePrompt)(),A=l.useCallback(i(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R("Description?",w);case 2:t=e.sent,O(a,u,t);case 4:case"end":return e.stop()}}),e)}))),[R,w,O,a,u]),V=l.useCallback((function(){C&&C(a,u)}),[a,u,C]),H=l.useCallback((function(){y&&y(a,u)}),[a,u,y]),z=l.useCallback((function(e){P&&P(u,e)}),[u,P]),G=l.useCallback((function(){return[{text:"Current mode - "+_,onClick:d.noop},{text:"Make required",onClick:function(){return z("required")}},{text:"Make optional",onClick:function(){return z("optional")}},{text:"Make required-if-connected",onClick:function(){return z("required-if-connected")}},{text:"Set description",onClick:A}].concat(e.onRename?[{text:"Rename",onClick:H}]:[],e.onDelete?[{text:"Delete",onClick:V}]:[])}),[A,_,z,V,H,e.onDelete,e.onRename]),F=l.useCallback((function(t){s&&s(e.id,t)}),[s,e.id]),q=l.useCallback((function(){x(u,a)}),[u,a,x]),L=l.useCallback((function(){return(0,c.jsx)(v.Menu,{children:G().map((function(e){return(0,c.jsx)(v.MenuItem,Object.assign({},e))}))})}),[G]),U=l.useCallback((function(e){e.preventDefault(),e.stopPropagation();var t=L();v.ContextMenu.show(t,{left:e.clientX,top:e.clientY})}),[L]),B="input"===a?(0,h.getInputName)(u):(0,d.getOutputName)(u),W=l.useCallback((function(e){E(u,a,e)}),[u,E,a]),Z=l.useCallback((function(e){S(u,a,e)}),[u,S,a]);return(0,c.jsxs)(p.BasePartView,{className:(0,f.default)("part-io-view",a),pos:o,onDragEnd:function(n,r){var i=e.pos,o=(r.x-i.x)/t.zoom,s=(r.y-i.y)/t.zoom,c=i.x+o,l=i.y+s;e.onDragEnd(a,u,n,Object.assign({},r,{x:c,y:l}))},onDragStart:function(t,n){e.onDragStart(u,t,n)},onDragMove:function(n,r){var i=e.pos,o=(r.x-i.x)/t.zoom,s=(r.y-i.y)/t.zoom,c=i.x+o,l=i.y+s;e.onDragMove(a,u,n,Object.assign({},r,{x:c,y:l}))},viewPort:t,children:[(0,c.jsx)(b.default,{className:"pin-info-tooltip",html:!0,id:u+e.currentInsId,getContent:[function(){var t=(0,g.calcHistoryContent)(T),n=e.description?"<em>"+e.description+"</em>":"";return"<div><div><strong>"+B+"</strong> ("+a+") </div>\n      "+n+"\n      <hr/>\n      "+t+"\n    "},25]}),(0,c.jsx)("div",{onMouseEnter:N,onMouseOut:M,onMouseUp:W,onMouseDown:Z,"data-tip":"","data-html":!0,"data-for":u+e.currentInsId,className:(0,f.default)("part-io-view-inner",{closest:j,selected:n}),id:(0,I.getPinDomId)({fullInsIdPath:(0,d.fullInsIdPath)(e.currentInsId,e.ancestorInsIds),pinId:u,pinType:a,isMain:!0}),onClick:q,onDoubleClick:F,onContextMenu:U,children:u})]})}))},43318:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(16914),t)},80807:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcPartIoWidth=t.MIN_WIDTH_PER_PIN=t.PIECE_CHAR_WIDTH=t.PIECE_HORIZONTAL_PADDING=void 0,t.PIECE_HORIZONTAL_PADDING=15,t.PIECE_CHAR_WIDTH=9,t.MIN_WIDTH_PER_PIN=40;t.calcPartIoWidth=function(e){return Math.max(t.MIN_WIDTH_PER_PIN,e.length*t.PIECE_CHAR_WIDTH+2*t.PIECE_HORIZONTAL_PADDING)}},57076:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PinView=t.PIN_HEIGHT=void 0;var u=n(24246),s=o(n(27378)),c=a(n(86778)),l=n(42272),d=n(12901),p=n(18265),f=n(90095),v=n(75579),m=a(n(49040)),g=n(40411);t.PIN_HEIGHT=23;t.PinView=s.memo((function(e){var t=e.selected,n=e.type,r=e.connected,i=e.rotate,o=e.optional,a=e.currentInsId,h=e.isClosestToMouse,b=e.id,I=e.onMouseDown,y=e.onMouseUp,C=(0,g.useHistoryHelpers)(a,b,n),P=C.history,_=C.resetHistory,x=C.refreshHistory,j="input"===n?(0,p.getInputName)(b):(0,p.getOutputName)(b),O="input"===e.type&&(0,d.isDefined)(e.constValue)?e.constValue:void 0,w=i&&"input"===n,E=s.useCallback((function(e){0===e.button&&I(b,n,e)}),[b,n,I]),S=s.useCallback((function(e){0===e.button&&y(b,n,e)}),[b,n,y]);return(0,u.jsxs)("div",{className:function(){if("input"===e.type){var a=e.isSticky,u=e.constValue;return(0,c.default)("pin",{sticky:a,selected:t,closest:h,optional:o,connected:r,rotate:i,"const-value":(0,d.isDefined)(u),"env-value":(0,d.isDefined)(u)&&(0,p.isEnvValue)(u),minimized:e.minimized},n)}return(0,c.default)("pin",{selected:t,connected:r,closest:h,rotate:i,optional:o,minimized:e.minimized,"error-pin":b===p.ERROR_PIN_ID},n,i)}(),"data-pin-id":b,children:[(0,u.jsx)(m.default,{className:"pin-info-tooltip",html:!0,id:b+e.currentInsId,getContent:[function(){var t=(0,g.calcHistoryContent)(P,"input"===n?e.queuedValues:void 0),r=e.description?"<em>"+e.description+"</em>":"";return"<div><div><strong>"+j+"</strong> ("+n+") </div>\n      "+r+"\n      <hr/>\n      "+((0,d.isDefined)(O)?"<div>Static value: <strong>"+(0,v.valuePreview)(O).substr(0,200)+"</strong></div>":t)+"\n    "},25]}),(0,u.jsxs)("div",{onMouseEnter:x,onMouseOut:_,onMouseDown:E,onMouseUp:S,"data-tip":"","data-html":!0,"data-for":b+e.currentInsId,id:(0,f.getPinDomId)({fullInsIdPath:(0,p.fullInsIdPath)(e.currentInsId,e.ancestorsInsIds),pinId:b,pinType:n,isMain:!1}),"data-place":w?"bottom":null,onDoubleClick:function(t){return e.onDoubleClick&&e.onDoubleClick(b,t)},className:"pin-inner",onContextMenu:function(t){t.preventDefault(),t.stopPropagation();var n=function(){var t=(0,u.jsx)(l.MenuItem,{onClick:function(){return e.onInspect(e.currentInsId,{id:e.id,type:e.type})},text:"Inspect"});if("input"===e.type){var n=e.onConvertConstToEnv;return(0,d.isDefined)(O)?(0,u.jsxs)(l.Menu,{children:[(0,u.jsx)(l.MenuItem,{onClick:function(){return e.onDetachConstValue(e.id)},text:"Detach value"}),(0,u.jsx)(l.MenuItem,{onClick:function(){return e.onCopyConstValue(e.id)},text:"Copy value"}),(0,d.isDefined)(e.copiedConstValue)?(0,u.jsx)(l.MenuItem,{onClick:function(){return e.onPasteConstValue(e.id)},text:"Paste value"}):null,n?(0,u.jsx)(l.MenuItem,{onClick:function(){return n(e.id)},text:"Convert to Env Var"}):null]}):(0,u.jsxs)(l.Menu,{children:[(0,u.jsx)(l.MenuItem,{onClick:function(){return e.onToggleSticky(e.id)},text:"Toggle sticky (square means sticky)"}),t,(0,d.isDefined)(e.copiedConstValue)?(0,u.jsx)(l.MenuItem,{onClick:function(){return e.onPasteConstValue(e.id)},text:"Paste value"}):null]})}return(0,u.jsx)(l.Menu,{children:t})}();l.ContextMenu.show(n,{left:t.clientX,top:t.clientY})},onClick:function(t){var r=e.onShiftClick,i=e.onClick,o=e.id;t.shiftKey&&r?r(o,t):i(o,n,t)},children:[j," ",(0,d.isDefined)(O)?(0,u.jsxs)(s.Fragment,{children:[":",(0,u.jsx)("span",{className:"value",children:(0,d.toString)(O)})]}):null,"input"===e.type&&e.isSticky?(0,u.jsx)("span",{className:"suffix",children:"s"}):null,"input"===e.type&&e.queueSize?(0,u.jsxs)("span",{className:"suffix",children:[e.queueSize," in Q"]}):null]}),(0,u.jsx)("div",{className:"wire"})]})}))},40411:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useHistoryHelpers=t.calcHistoryContent=void 0;var i=n(75579),o=r(n(27378)),a=n(27378),u=n(55967);t.calcHistoryContent=function(e,t){if(e){var n=e.total,r=e.lastSamples;return"<strong>Activated "+n+" times this session</strong>"+" "+(r.length>0?"<div>Last value: <strong>"+(0,i.valuePreview)(r[0].val).substring(0,200)+"</strong></div><em>Inspect instance for the full value</em>":"")+(t?"<hr/><div>Queued values: <strong>"+t+"</strong></div>":"")}return"Loading session data.."};t.useHistoryHelpers=function(e,t,n){var r=(0,a.useRef)(),i=(0,u.useDebuggerContext)().onRequestHistory,s=(0,a.useState)(),c=s[0],l=s[1];return{history:c,refreshHistory:(0,a.useCallback)((function(){clearInterval(r.current),i(e,t,n).then((function(e){l(e)})),r.current=setInterval((function(){i(e,t,n).then((function(e){l(e)}))}),500)}),[e,i,t,n]),resetHistory:o.default.useCallback((function(){clearInterval(r.current),l(void 0)}),[])}}},40490:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.QuickAddMenu=void 0;var a=n(24246),u=o(n(27378)),s=n(18265),c=n(42272),l=n(18264),d=n(10934),p=n(58553),f=l.Select.ofType(),v=function(e){switch(e.type){case"part":return""+e.part.id;case"value":return"Add inline value or function";case"import":return"Import "+e.importablePart.part.id+" from "+e.importablePart.module}},m=function(e,t){var n=t.handleClick,r=t.modifiers,i=t.query;if(!r.matchesPredicate)return null;var o=v(e);return"value"===e.type?(0,a.jsxs)(u.Fragment,{children:[(0,a.jsx)(c.MenuDivider,{}),(0,a.jsx)(c.MenuItem,{active:r.active,disabled:r.disabled,onClick:n,text:(0,d.highlightText)(o,i)},v(e))]}):(0,a.jsx)(c.MenuItem,{active:r.active,disabled:r.disabled,onClick:n,text:(0,d.highlightText)(o,i)},v(e))},g=function(e,t,n,r){var i=v(t).toLocaleLowerCase(),o=e.toLowerCase();return r?i===o:i.includes(o)};t.QuickAddMenu=function(e){var t,n=e.resolvedDependencies,r=e.targetPart,i={left:e.pos.x,top:e.pos.y},o=(0,p.useDependenciesContext)().onRequestImportables,l=u.useState(),d=l[0],v=l[1];u.useEffect((function(){o().then((function(e){return v(e.importables)}))}),[o]);var h=(0,s.values)(Object.assign({},n,((t={})[r.id]=r,t))),b=h.map((function(e){return{type:"part",part:e}})),I=new Set(h.map((function(e){return e.id}))),y=d?d.filter((function(e){return!I.has(e.part.id)})).map((function(e){return{type:"import",importablePart:e}})):[],C=b.concat(y).concat({type:"value"});return(0,a.jsx)("div",{className:"quick-add-menu",style:i,children:(0,a.jsx)(f,{className:"quick-add-parts-select",items:C,itemPredicate:g,itemRenderer:m,inputProps:{className:"quick-add-input"},noResults:(0,a.jsx)(c.MenuItem,{disabled:!0,text:"No results."}),onItemSelect:function(t){return e.onAdd(t)},popoverProps:{isOpen:!0,onClose:function(){return e.onClose()}}})})}},29841:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(40490),t)},70030:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRuntimePlayer=void 0;var r=n(18265),i=n(22940),o=(0,r.debugLogger)("runtime-player");t.createRuntimePlayer=function(){var e=0,t=[],n=!1,a=Date.now(),u=e,s=function s(){return requestAnimationFrame((function(){var c,d,p,f=Date.now();u=e,e+=f-a,a=f,c=u,d=e,p=t,t=[],p.length&&o("Playing "+p.length+" events from",c,d),p.forEach((function(e){o("Playing event",e),(0,i.playEvent)(e),e.insId===r.ROOT_INS_ID&&e.type===r.DebuggerEventType.PROCESSING_CHANGE&&!1===e.val&&(o("Main instance is done processing, clearing runtime UI",e),l())})),n&&s()}))},c=function(){n=!1},l=function(){document.querySelectorAll("[data-runtime]").forEach((function(e){e.removeAttribute("data-runtime")})),document.querySelectorAll("[data-runtime-queue]").forEach((function(e){e.removeAttribute("data-runtime-queue")})),t=[]};return{stop:c,start:function(t){void 0===t&&(t=0),n=!0,e=t,a=Date.now(),s()},addEvents:function(e){var n;(n=t).push.apply(n,e)},destroy:function(){c(),l()},clear:l,status:function(){return{running:n,currDt:e,lastDt:u,queue:t,last:a}}}}},22940:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.playEvent=t.cancelTimers=void 0;var r=n(18265),i=n(90095),o=5e3,a=(0,r.debugLogger)("runtime-player:play-event"),u=function(e,t){return e.type===r.DebuggerEventType.INPUT_CHANGE||e.type===r.DebuggerEventType.OUTPUT_CHANGE?(0,r.fullInsIdPath)(e.insId,e.ancestorsInsIds)+"."+e.pinId:(0,r.fullInsIdPath)(e.insId,e.ancestorsInsIds)};t.cancelTimers=new Map;t.playEvent=function(e){switch(e.type){case r.DebuggerEventType.INPUT_CHANGE:case r.DebuggerEventType.OUTPUT_CHANGE:var n=e.pinId,s=e.insId,c=e.ancestorsInsIds,l=e.type===r.DebuggerEventType.INPUT_CHANGE?"input":"output",d=[(0,i.getPinDomId)({fullInsIdPath:(0,r.fullInsIdPath)(s,c),pinId:n,pinType:l,isMain:!0})];s!==r.ROOT_INS_ID&&d.push((0,i.getPinDomId)({fullInsIdPath:(0,r.fullInsIdPath)(s,c),pinId:n,pinType:l,isMain:!1})),d.forEach((function(i,c){var l=u(e);clearTimeout(t.cancelTimers.get(l));var d=document.getElementById(i),p=s+"."+n,f=e.type===r.DebuggerEventType.OUTPUT_CHANGE?document.querySelectorAll('[data-from-id="'+p+'"]'):[];if(d){clearTimeout(t.cancelTimers.get(l)),d.removeAttribute("data-runtime"),f.forEach((function(e){e.removeAttribute("data-runtime")})),setTimeout((function(){d.setAttribute("data-runtime","active"),f.forEach((function(e){e.setAttribute("data-runtime","active")}))}),0);var v=setTimeout((function(){d.removeAttribute("data-runtime"),f.forEach((function(e){e.removeAttribute("data-runtime")})),t.cancelTimers.delete(l)}),o);t.cancelTimers.set(u(e),v)}else console.warn("No DOM element with Id ["+i+"] found to play event"),a("No DOM element with Id ["+i+"] found to play event",e)}));break;case r.DebuggerEventType.PROCESSING_CHANGE:var p=e.insId,f=e.ancestorsInsIds,v=[(0,i.getMainInstanceIndicatorDomId)(p,f)];p!==r.ROOT_INS_ID&&v.push((0,i.getInstanceDomId)(p,f)),v.forEach((function(n,r){var i,s=u(e),c=null===(i=document.getElementById(n))||void 0===i?void 0:i.parentElement;if(c)if(!0===e.val)c.setAttribute("data-runtime","processing"),clearTimeout(t.cancelTimers.get(s));else{c.removeAttribute("data-runtime"),setTimeout((function(){"error"!==c.getAttribute("data-runtime")&&c.setAttribute("data-runtime","done")}),0);var l=setTimeout((function(){c.removeAttribute("data-runtime"),t.cancelTimers.delete(s)}),o);t.cancelTimers.set(s,l)}else a("No DOM element with Id ["+n+"] found to play event",e)}));break;case r.DebuggerEventType.ERROR:var m=e.insId,g=e.ancestorsInsIds,h=[(0,i.getMainInstanceIndicatorDomId)(m,g)];m!==r.ROOT_INS_ID&&h.push((0,i.getInstanceDomId)(m,g)),h.forEach((function(n,r){var i,s=u(e),c=null===(i=document.getElementById(n))||void 0===i?void 0:i.parentElement;if(c){clearTimeout(t.cancelTimers.get(s)),c.removeAttribute("data-runtime"),setTimeout((function(){c.setAttribute("data-runtime","error")}));var l=setTimeout((function(){c.removeAttribute("data-runtime"),t.cancelTimers.delete(s)}),o);t.cancelTimers.set(s,l)}else a("No DOM element with Id ["+n+"] found to play event",e)}));var b=Object.assign({},e,{type:r.DebuggerEventType.OUTPUT_CHANGE,pinId:r.ERROR_PIN_ID});(0,t.playEvent)(b);break;case r.DebuggerEventType.INPUTS_STATE_CHANGE:(0,r.entries)(e.val).forEach((function(t){var n=t[0],o=t[1],u=e.insId,s=e.ancestorsInsIds,c=(0,i.getPinDomId)({fullInsIdPath:(0,r.fullInsIdPath)(u,s),pinId:n,pinType:"input",isMain:!1}),l=document.getElementById(c);l?o>0?l.setAttribute("data-runtime-queue",""+o):l.removeAttribute("data-runtime-queue"):a("No DOM element with Id ["+c+"] found to play event",e)}))}}},69385:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useDebounce=void 0;var r=n(27378);t.useDebounce=function(e,t){var n=(0,r.useState)(e),i=n[0],o=n[1];return(0,r.useEffect)((function(){var n=setTimeout((function(){o(e)}),t);return function(){clearTimeout(n)}}),[e,t]),[i,o]}},13011:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.handleChangePartInputType=t.handleIoPinRename=t.handleInstanceDrag=t.getInstancesInRect=t.isJsxValue=t.getMiddleOfViewPort=t.fitViewPortToPart=t.centerBoardPosOnTarget=t.renderedPosToLogicalPos=t.logicalPosToRenderedPos=t.getEffectivePartDimensions=t.calcPartsPositions=t.calcSelectionBoxArea=t.animateViewPort=t.easeInOutNum=t.easeInOutPos=t.easeInOutQuad=t.center=t.distance=t.clamp=t.domToViewPort=t.roundNumber=t.createNewPartInstance=t.createNewInlinePartInstance=t.parseInputOutputTypes=t.parsePromptValue=t.getSelectionBoxRect=t.findClosestPin=t.changePinConfig=t.getInstancePinConfig=t.emptyList=t.emptyObj=void 0;var u=o(n(63300)),s=a(n(98739)),c=n(41304),l=n(18265),d=n(68488),p=n(18265),f=n(71462),v=n(80807),m=n(99743),g=n(52688),h=n(41756);t.emptyObj={},t.emptyList=[],t.getInstancePinConfig=function(e,n,r){var i,o=e.instances.find((function(e){return e.id===n}));if(!o)throw new Error("Instance "+n+" not found");return null!==(i=(o.inputConfig||t.emptyObj)[r])&&void 0!==i?i:(0,l.queueInputPinConfig)()};t.changePinConfig=function(e,t,n,r){return u.produce(e,(function(e){var i,o=e.instances,a=o.find((function(e){return e.id===t}));if(!a)throw new Error("blah");var u=null!==(i=a.inputConfig)&&void 0!==i?i:{};u[n]=r,e.instances=o.map((function(e){return e===a?Object.assign({},a,{inputConfig:u}):e}))}))};t.findClosestPin=function(e,t,n,r,i,o,a){var u=(0,l.partInstance)(e.id,e.id),s=(0,p.okeys)(e.inputs).map((function(e){return{id:e,type:"input",pos:(0,d.calcPinPosition)({insId:i,ancestorsInsIds:o,pinId:e,pinType:"input",boardPos:r,viewPort:a,isMain:!0}),ins:u}})),c=(0,p.okeys)(e.outputs).map((function(e){return{id:e,type:"output",pos:(0,d.calcPinPosition)({insId:i,ancestorsInsIds:o,pinId:e,pinType:"output",boardPos:r,viewPort:a,isMain:!0}),ins:u}})),f=e.instances.reduce((function(n,u){var s=(0,l.getPartDef)(u,t),c=(0,h.getVisibleInputs)(u,s,e.connections),p=(0,h.getVisibleOutputs)(u,s,e.connections),f=c.map((function(e){return{ins:u,type:"input",pos:(0,d.calcPinPosition)({insId:u.id,ancestorsInsIds:(0,l.fullInsIdPath)(i,o),pinId:e,pinType:"input",boardPos:r,viewPort:a,isMain:!1}),id:e}})),v=p.map((function(e){return{ins:u,type:"output",pos:(0,d.calcPinPosition)({insId:u.id,ancestorsInsIds:(0,l.fullInsIdPath)(i,o),pinId:e,pinType:"output",boardPos:r,viewPort:a,isMain:!1}),id:e}}));return[].concat(n,f,v)}),[]),v=[].concat(s,f,c),m={dis:1e5,item:v[0]};return v.forEach((function(e){var t=e.pos.x-n.x,r=e.pos.y-n.y,i=Math.sqrt(t*t+r*r);i<m.dis&&(m.dis=i,m.item=e)})),m.item};t.getSelectionBoxRect=function(e,t){var n=Math.min(e.x,t.x),r=Math.min(e.y,t.y);return{x:n,y:r,w:Math.max(e.x,t.x)-n,h:Math.max(e.y,t.y)-r}};t.parsePromptValue=function(e){if(null!==e){var t=parseInt(e,10),n=e;return t.toString()!=e||isNaN(t)||(n=t),n}};t.parseInputOutputTypes=function(e){var t=e.match(/part\((.+)\|(.+)\)/)||[],n=t[1],r=t[2],i=(0,p.entries)(JSON.parse(n)).map((function(e){var t=e[0],n={type:e[1],optional:(0,p.isOptionalType)(t)};return[t.replace(/\?$/,""),n]})),o=(0,p.entries)(JSON.parse(r)).map((function(e){var t=e[0],n={type:e[1],optional:(0,p.isOptionalType)(t)};return[t.replace(/\?$/,""),n]}));return{inputs:(0,p.fromEntries)(i),outputs:(0,p.fromEntries)(o)}};t.createNewInlinePartInstance=function(e,t,n){void 0===t&&(t=-1*c.PART_HEIGHT*1.5);var r=(0,l.inlinePartInstance)(e.id+"-"+(0,p.randomInt)(999),e,{},{x:0,y:0}),i=(0,f.calcPartWidth)(r,e),o={x:n.x-i/2,y:n.y+t};return Object.assign({},r,{pos:o})};t.createNewPartInstance=function(e,t,n,r){void 0===t&&(t=-1*c.PART_HEIGHT*1.5);var i="string"==typeof e?(0,l.getPartDef)(e,r):e;if(!i)throw new Error(e+" part not found in resolvedParts");var o=(0,p.entries)(i.inputs).reduce((function(e,t){var n=t[0],r=t[1];return r.defaultValue&&(e[n]=(0,l.staticInputPinConfig)(r.defaultValue)),e}),{}),a=(0,l.partInstance)((0,s.default)(),i.id,o,{x:0,y:0}),u=(0,f.calcPartWidth)(a,i),d={x:n.x-u/2,y:n.y+t};return Object.assign({},a,{pos:d})};t.roundNumber=function(e){return Math.round(100*e)/100};t.domToViewPort=function(e,n,r){return{x:(0,t.roundNumber)(n.pos.x+e.x/n.zoom/r.zoom),y:(0,t.roundNumber)(n.pos.y+e.y/n.zoom/r.zoom)}};t.clamp=function(e,t,n){return Math.max(e,Math.min(t,n))};t.distance=function(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)};t.center=function(e,t,n){var r=n.zoom,i=e.x+e.w/2,o=e.y+e.h/2;return{x:i-t.w/r/2,y:o-t.h/r/2}};t.easeInOutQuad=function(e){return e<.5?2*e*e:(4-2*e)*e-1};t.easeInOutPos=function(e,n,r,i,o){var a=(0,t.clamp)(0,1,(o-r)/i),u=(0,t.easeInOutQuad)(a),s=n.x-e.x,c=n.y-e.y;return{x:e.x+s*u,y:e.y+c*u}};t.easeInOutNum=function(e,n,r,i,o){var a=(0,t.clamp)(0,1,(o-r)/i);return e+(n-e)*(0,t.easeInOutQuad)(a)};t.animateViewPort=function(e,n,r,i){var o=(0,t.distance)(e.pos,n.pos),a=Date.now(),u=r;if(0!==o){requestAnimationFrame((function r(){var o=Date.now(),s=(0,t.easeInOutPos)(e.pos,n.pos,a,u,o),c=(0,t.easeInOutNum)(e.zoom,n.zoom,a,u,o);o-a<u?(i({pos:s,zoom:c}),requestAnimationFrame(r)):i({pos:s,zoom:c})}))}else i(e)};t.calcSelectionBoxArea=function(e){var n=(0,t.getSelectionBoxRect)(e.from,e.to);return n.h*n.w};var b=function(e,t,n,r){return{left:n.x,right:n.x+e,top:n.y,bottom:n.y+t,tag:r,center:(0,l.calcCenter)(Object.assign({w:e,h:t},n))}};t.calcPartsPositions=function(e,t){var n=e.instances.map((function(e){var n=(0,f.calcPartWidth)(e,(0,l.getPartDef)(e,t)),r=c.PART_HEIGHT;return b(n,r,e.pos,e.id)})),r=(0,p.okeys)(e.inputs).map((function(t){var n=(0,v.calcPartIoWidth)(t),r=c.PART_HEIGHT,i=e.inputsPosition[t]||{x:0,y:0};return b(n,r,i,"input_"+t)})),i=(0,p.okeys)(e.outputs).map((function(t){var n=(0,v.calcPartIoWidth)(t),r=c.PART_HEIGHT,i=e.outputsPosition[t]||{x:0,y:0};return b(n,r,i,"output"+t)}));return[].concat(n,r,i)};t.getEffectivePartDimensions=function(e,n){var r=(0,t.calcPartsPositions)(e,n),i=r[0]||{left:0,right:0,top:0,bottom:0},o=r.reduce((function(e,t){return t.left<e?t.left:e}),i.left),a=r.reduce((function(e,t){return t.right>e?t.right:e}),i.right),u=r.reduce((function(e,t){return t.top<e?t.top:e}),i.top),s=a-o,c=r.reduce((function(e,t){return t.bottom>e?t.bottom:e}),i.bottom)-u,d={x:o,y:u};return{size:{width:s,height:c},pos:d,center:(0,l.calcCenter)(Object.assign({w:s,h:c},d))}};t.logicalPosToRenderedPos=function(e,t){var n=(0,m.vSub)(e,t.pos);return(0,m.vMul)(n,t.zoom)};t.renderedPosToLogicalPos=function(e,t){var n=(0,m.vDiv)(e,t.zoom);return(0,m.vAdd)(t.pos,n)};t.centerBoardPosOnTarget=function(e,n,r,i){var o=(0,t.logicalPosToRenderedPos)(e,i),a=(0,t.renderedPosToLogicalPos)(o,Object.assign({},i,{zoom:r})),u=Math.max(e.x,a.x)-Math.min(e.x,a.x),s=Math.max(e.y,a.y)-Math.min(e.y,a.y);return{x:r>i.zoom?i.pos.x+u:i.pos.x-u,y:r>i.zoom?i.pos.y+s:i.pos.y-s}};t.fitViewPortToPart=function(e,n,r,i){void 0===i&&(i=[20,150]);var o=(0,t.getEffectivePartDimensions)(e,n),a=o.size,u=o.center,s=i[0],c=i[1],l=a.width+s,d=a.height+c,p=r.width/l,f=r.height/d,v=Math.min(p,f)/1.15,m=(0,t.clamp)(.3,1.2,v);return{zoom:m,pos:{x:u.x-r.width/2/m,y:u.y-r.height/2/m+40}}};t.getMiddleOfViewPort=function(e,n){var r={x:n.width/2,y:n.height/2};return(0,t.renderedPosToLogicalPos)(r,e)};t.isJsxValue=function(e){var t=function(e){return(0,p.isDefined)(e.ref)&&(0,p.isDefined)(e.type)&&(0,p.isDefined)(e.props)};try{var n=JSON.parse(e);return t(n)||Array.isArray(n)&&t(n[0])}catch(r){return!1}};t.getInstancesInRect=function(e,n,r,i,o,a,u){var s=e.from,d=e.to,p=(0,t.getSelectionBoxRect)(s,d);return o.filter((function(e){var t=e.pos,i=(0,f.calcPartWidth)(e,(0,l.getPartDef)(e,n))*r.zoom*u.zoom,o=Object.assign({},t,{w:i,h:c.PART_HEIGHT*r.zoom*u.zoom});return console.log(e.id,o,"main",p),(0,l.intersectRect)(p,o)||(0,l.intersectRect)(o,p)})).map((function(e){return e.id}))};t.handleInstanceDrag=function(e,t,n,r,i,o){r.preventDefault(),r.stopPropagation();var a,s=(0,m.vSub)(n,t.pos),c=u.produce(e,(function(e){var u=e.instances.find((function(e){return e.id===t.id}));if(!u)throw new Error("impossible state dragging instance that does not exist");!r.shiftKey&&o&&(a=[o]);var c=e.instances.filter((function(e){return i.includes(e.id)&&e!==u})),l=[u].concat(c),d=(0,g.getLeafInstancesOfSelection)(l,e.instances,e.connections);[].concat(c,d).forEach((function(e){e.pos=(0,m.vAdd)(e.pos,s)})),u.pos=n,!r.shiftKey&&o&&(a=[o])}));return{newValue:c,newSelected:a}};t.handleIoPinRename=function(e,t,n,r){return u.produce(e,(function(e){"input"===t?(e.inputs[r]=e.inputs[n],e.inputsPosition[r]=e.inputsPosition[n],delete e.inputs[n],e.connections=e.connections.map((function(e){return(0,l.isExternalConnectionNode)(e.from)&&e.from.pinId===n?Object.assign({},e,{from:Object.assign({},e.from,{pinId:r})}):e}))):(e.outputs[r]=e.outputs[n],e.outputsPosition[r]=e.outputsPosition[n],e.connections=e.connections.map((function(e){return(0,l.isExternalConnectionNode)(e.to)&&e.to.pinId===n?Object.assign({},e,{to:Object.assign({},e.to,{pinId:r})}):e})),e.completionOutputs=(e.completionOutputs||[]).map((function(e){return e.split("+").map((function(e){return e===n?r:n})).join("+")})),delete e.outputs[n])}))};t.handleChangePartInputType=function(e,t,n){return u.produce(e,(function(e){var r=e.inputs[t];if(!r)throw new Error("Wat");r.mode=n}))}},17229:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createEditorClient=void 0;var i=n(18265),o=r(n(14206)),a=n(87915),u=n(19389),s=(0,i.debugLogger)("runtime-editor-client");t.createEditorClient=function(e,t){var n=new URL(e),r=(0,a.io)(n.origin,{path:("/"===n.pathname?"":n.pathname)+"/socket.io/editor",timeout:3e4});return r.emit("join-room-editor",t),{emitChange:function(e){r.emit(u.DebuggerServerEventType.CHANGE_EVENT_NAME,e)},emitBreakpointsChange:function(e){r.emit(u.DebuggerServerEventType.UPDATE_BREAKPOINTS,e)},interceptInput:function(e){r.emit(u.DebuggerServerEventType.INPUT_VALUE_OVERRIDE,e)},interceptOutput:function(e){r.emit(u.DebuggerServerEventType.OUTPUT_VALUE_OVERRIDE,e)},onRuntimeReady:function(e){return r.on(u.DebuggerServerEventType.RUNTIME_READY,e),function(){return r.off(u.DebuggerServerEventType.RUNTIME_READY,e)}},onChangeAwk:function(e){return r.on(u.DebuggerServerEventType.CHANGE_AWK,e),function(){return r.off(u.DebuggerServerEventType.CHANGE_AWK,e)}},onChangeError:function(e){return r.on(u.DebuggerServerEventType.CHANGE_ERROR,e),function(){return r.off(u.DebuggerServerEventType.CHANGE_ERROR,e)}},onIsAlive:function(e){return r.on(u.DebuggerServerEventType.IS_ALIVE,e),function(){return r.off(u.DebuggerServerEventType.IS_ALIVE,e)}},emitInputValue:function(e,t){s("Emitting push input value to "+e+" %o",t),r.emit(u.DebuggerServerEventType.PUSH_INPUT_VALUE,{pinId:e,value:t})},destroy:function(){r.disconnect(),(0,u.enumToArray)(u.DebuggerServerEventType).forEach((function(e){return r.off(e)}))},onDisconnect:function(e){return r.on("disconnect",e),function(){return r.off("disconnect",e)}},debugInfo:function(){return"Remote debugger for "+e},onBatchedEvents:function(e){return r.on(u.DebuggerServerEventType.EVENTS_BATCH,e),function(){return r.off(u.DebuggerServerEventType.EVENTS_BATCH,e)}},requestState:function(){return o.default.get(e+"/state").then((function(e){return e.data.state}))},getHistory:function(n){return o.default.get(e+"/history",{params:{insId:n.insId,pinId:n.pinId,limit:n.limit,executionId:t}}).then((function(e){return e.data}))},clearHistory:function(){return o.default.delete(e+"/history").then((function(){}))},triggerPart:function(t,n){return o.default.post(e+"/trigger",{partId:t,inputs:n}).then((function(e){return e.data}))}}}},31548:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeData=void 0;t.normalizeData=function(e){if("object"==typeof e&&null!==e){e=Object.assign({},e);var t=new WeakSet;return function e(n){if("object"!=typeof n||Array.isArray(n))return n;if(t.has(n))return"[Circular]";try{t.add(n)}catch(o){console.error(typeof n,n)}if(Array.isArray(n))return n.map(e);if("object"==typeof n){var r={};for(var i in n)r[i]=e(n[i]);return r}return n}(e)}return e}},4278:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default;Object.defineProperty(t,"__esModule",{value:!0}),t.createRuntimeClient=t.DEFAULT_DT_SCALE=void 0;var o=n(18265),a=n(87915),u=n(19389),s=n(31548),c=(0,o.debugLogger)("debugger-runtime-client");t.DEFAULT_DT_SCALE=1;t.createRuntimeClient=function(e,t){var n=new URL(e),l=(0,a.io)(n.origin,{path:("/"===n.pathname?"":n.pathname)+"/socket.io/runtime",timeout:1e3,reconnectionAttempts:3});l.emit("join-room-runtime",t),l.on("connection",(function(e){e.join(t)}));new Set;l.on(u.DebuggerServerEventType.UPDATE_BREAKPOINTS,(function(e){new Set(e)}));var d,p=(0,o.cappedArrayDebounce)((function(e){c("Emitting debounced batched events - "+e.length),l.emit(u.DebuggerServerEventType.EVENTS_BATCH,e)}),100,200),f={onChange:function(e){return l.on(u.DebuggerServerEventType.CHANGE_EVENT_NAME,e),function(){return l.off(u.DebuggerServerEventType.CHANGE_EVENT_NAME,e)}},onInput:function(e){return l.on(u.DebuggerServerEventType.PUSH_INPUT_VALUE,e),function(){return l.off(u.DebuggerServerEventType.PUSH_INPUT_VALUE,e)}},emitEvent:function(e){c("Emitting event "+e.type+" change event of "+e.insId),e.val=(0,s.normalizeData)(e.val),p.addItem(Object.assign({},e,{time:Date.now()}))},emitRuntimeReady:function(){l.emit(u.DebuggerServerEventType.RUNTIME_READY,{})},emitChangeAwk:function(){l.emit(u.DebuggerServerEventType.CHANGE_AWK,{})},emitChangeError:function(e){l.emit(u.DebuggerServerEventType.CHANGE_ERROR,{error:e})},emitIsAlive:function(e){l.emit(u.DebuggerServerEventType.IS_ALIVE,{time:e})},destroy:(d=i(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p.pendingItems()){e.next=4;break}return p.flush(),e.next=4,(0,o.delay)(100);case 4:(0,u.enumToArray)(u.DebuggerServerEventType).forEach((function(e){return l.off(e)})),l.disconnect();case 6:case"end":return e.stop()}}),e)}))),function(){return d.apply(this,arguments)}),onDisconnect:function(e){return l.on("disconnect",e),function(){return l.off("disconnect",e)}},waitForConnection:function(){return new Promise((function(e,t){l.connected?e():(l.on("connect_error",(function(e){t("Socket connect error: "+e)})),l.on("connect",(function(){e()})))}))}};return f}},19389:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DebuggerServerEventType=t.enumToArray=t.isNumber=t.isSimpleType=t.valuePreview=t.toString=void 0;var r=n(63726);t.toString=function(e){if("object"===typeof e){if(e instanceof Error)return JSON.stringify((0,r.serializeError)(e));try{return JSON.stringify(e).substr(0,250)}catch(t){return"Object (cannot stringify)"}}return(""+e).substr(0,250)};t.valuePreview=function(e){return(0,t.toString)(e).substr(0,100)};t.isSimpleType=function(e){return["number","string","boolean"].includes(typeof e)};t.isNumber=function(e){return!1===isNaN(Number(e))},t.enumToArray=function(e){return Object.keys(e).filter(t.isNumber).map((function(t){return e[t]}))},function(e){e.RUNTIME_READY="runtime-ready",e.CHANGE_EVENT_NAME="change",e.PUSH_INPUT_VALUE="push-input-value",e.CHANGE_AWK="live-change-awk",e.CHANGE_ERROR="live-change-error",e.IS_ALIVE="is-alive",e.UPDATE_BREAKPOINTS="update-breakpoints",e.INPUT_VALUE_OVERRIDE="input-value-override",e.OUTPUT_VALUE_OVERRIDE="output-value-override",e.INPUT_VALUE_CHANGE="input-value-changed",e.OUTPUT_VALUE_CHANGE="output-value-changed",e.PROCESSING_CHANGE="processing-changed",e.INPUTS_STATE_CHANGE="inputs-state-changed",e.PART_ERROR="part-error",e.EVENTS_BATCH="events-batch"}(t.DebuggerServerEventType||(t.DebuggerServerEventType={}))},75579:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(19389),t),i(n(17229),t),i(n(4278),t)},41396:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Request=t.Put=t.Post=t.Get=void 0;var i=n(18265),o=r(n(25717)),a="HTTP";t.Get=(0,i.partFromSimpleFunction)({id:"GET Request",icon:"fa-server",namespace:a,description:"Performs a HTTP GET request to a URL and emits the response data",inputs:[{name:"url",description:"URL to fetch data from"},{name:"headers",description:"Headers to send with the request",mode:"required-if-connected"},{name:"params",description:"Query parameters to send with the request",mode:"required-if-connected"}],output:{name:"data",description:"The response data"},run:function(e){return o.default.get(e).then((function(e){return e.data}))}}),t.Post=(0,i.partFromSimpleFunction)({id:"POST Request",icon:"fa-server",namespace:a,description:"Performs a HTTP POST request to a URL and emits the response data",inputs:[{name:"url",description:"URL to fetch data from"},{name:"headers",description:"Headers to send with the request",mode:"required-if-connected"},{name:"params",description:"Query parameters to send with the request",mode:"required-if-connected"},{name:"data",description:"Data to send with the request",mode:"required-if-connected"}],output:{name:"data",description:"The response data"},run:function(e,t,n,r){return o.default.post(e,r,{headers:t,params:n}).then((function(e){return e.data}))}}),t.Put=(0,i.partFromSimpleFunction)({id:"PUT Request",icon:"fa-server",namespace:a,description:"Performs a HTTP PUT request to a URL and emits the response data",inputs:[{name:"url",description:"URL to fetch data from"},{name:"headers",description:"Headers to send with the request",mode:"required-if-connected"},{name:"params",description:"Query parameters to send with the request",mode:"required-if-connected"},{name:"data",description:"Data to send with the request",mode:"required-if-connected"}],output:{name:"data",description:"The response data"},run:function(e,t,n,r){return o.default.put(e,r,{headers:t,params:n}).then((function(e){return e.data}))}}),t.Request=(0,i.partFromSimpleFunction)({id:"Request",icon:"fa-server",namespace:a,description:"Performs a HTTP request to a URL and emits the response data",inputs:[{name:"url",description:"URL to fetch data from"},{name:"method",description:"HTTP method to use"},{name:"headers",description:"Headers to send with the request",mode:"required-if-connected"},{name:"params",description:"Query parameters to send with the request",mode:"required-if-connected"},{name:"data",description:"Data to send with the request",mode:"required-if-connected"}],output:{name:"data",description:"The response data"},run:function(e,t,n,r,i){return o.default.request({url:e,method:t,data:i,headers:n,params:r}).then((function(e){return e.data}))}})},16505:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropertyEquals=t.DeleteAttribute=t.SetAttribute=t.GetAttribute=t.ObjectAssign=t.ObjectFromEntries=t.ObjectEntries=t.ObjectValues=t.ObjectKeys=t.JSONStringify=t.JSONParse=void 0;var r=n(18265),i="Objects";t.JSONParse=(0,r.partFromSimpleFunction)({id:"JSON Parse",icon:"fa-glasses",namespace:i,description:"Parses a JSON string into an object",inputs:[{name:"json",description:"JSON string to parse"}],output:{name:"object",description:"The parsed object"},run:function(e){return JSON.parse(e)}}),t.JSONStringify=(0,r.partFromSimpleFunction)({id:"JSON Stringify",icon:"fa-pen-fancy",namespace:i,description:"Stringifies an object into a JSON string",inputs:[{name:"object",description:"Object to stringify"}],output:{name:"json",description:"The stringified JSON"},run:function(e){return JSON.stringify(e)}}),t.ObjectKeys=(0,r.partFromSimpleFunction)({id:"Keys",icon:"fa-key",namespace:i,description:"Emits the keys of an object",inputs:[{name:"object",description:"Object to get keys of"}],output:{name:"keys",description:"The keys of object"},run:function(e){return Object.keys(e)}}),t.ObjectValues=(0,r.partFromSimpleFunction)({id:"Values",namespace:i,description:"Emits the values of an object",inputs:[{name:"object",description:"Object to get values of"}],output:{name:"values",description:"The values of object"},run:function(e){return Object.values(e)}}),t.ObjectEntries=(0,r.partFromSimpleFunction)({id:"Entries",namespace:i,icon:"fa-box",description:"Emits the entries of an object",inputs:[{name:"object",description:"Object to get entries of"}],output:{name:"entries",description:"The entries of object"},run:function(e){return Object.entries(e)}}),t.ObjectFromEntries=(0,r.partFromSimpleFunction)({id:"From Entries",namespace:i,icon:"fa-box",description:"Creates an object from an array of entries",inputs:[{name:"entries",description:"Array of entries to create object from"}],output:{name:"object",description:"The created object"},run:function(e){return Object.fromEntries(e)}}),t.ObjectAssign=(0,r.partFromSimpleFunction)({id:"Assign",namespace:i,icon:"fa-box",description:"Assigns properties from one or more objects to a target object",inputs:[{name:"target",description:"Target object to assign properties to"},{name:"sources",description:"One or more objects to assign properties from"}],output:{name:"object",description:"The target object"},run:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object.assign.apply(Object,[e].concat(n))}}),t.GetAttribute=(0,r.partFromSimpleFunction)({id:"Get Attribute",searchKeywords:["pick","dot"],namespace:i,icon:"fa-magnifying-glass",description:"Gets an attribute from an object",inputs:[{name:"object",description:"Object to get attribute from"},{name:"attribute",description:"Attribute to get"}],output:{name:"value",description:"The value of the attribute"},customViewCode:'<% if (inputs.attribute) { %> Get "<%- inputs.attribute %>"<% } else { %> Get Attribute <% } %>',run:function(e,t){return t.split(".").reduce((function(e,t){return e[t]}),e)}}),t.SetAttribute=(0,r.partFromSimpleFunction)({id:"Set Attribute",searchKeywords:["dot"],namespace:i,icon:"fa-box",description:"Sets an attribute on an object",inputs:[{name:"object",description:"Object to set attribute on"},{name:"attribute",description:"Attribute to set"},{name:"value",description:"Value to set attribute to"}],customViewCode:'<% if (inputs.attribute) { %> Set "<%- inputs.attribute %>"<% } else { %> Set Attribute <% } %>',output:{name:"object",description:"The object with the attribute set"},run:function(e,t,n){var r=t.split("."),i=r.pop();return r.reduce((function(e,t){return e[t]}),e)[i]=n,e}}),t.DeleteAttribute=(0,r.partFromSimpleFunction)({id:"Delete Attribute",searchKeywords:["remove"],namespace:i,icon:"fa-box",description:"Deletes an attribute from an object",inputs:[{name:"object",description:"Object to delete attribute from"},{name:"attribute",description:"Attribute to delete"}],customViewCode:'<% if (inputs.attribute) { %> Delete "<%- inputs.attribute %>"<% } else { %> Delete Attribute <% } %>',output:{name:"object",description:"The object with the attribute deleted"},run:function(e,t){var n=t.split("."),r=n.pop();return delete n.reduce((function(e,t){return e[t]}),e)[r],e}}),t.PropertyEquals={id:"Property Equals",namespace:i,defaultStyle:{icon:"fa-equals"},description:'Emits the object to the "true" output if an object\'s property equals a value, otherwise emits to the "false" output',inputs:{object:{description:"Object to check property of"},attribute:{description:"Attribute to check"},value:{description:"Value to check attribute against"}},outputs:{true:{description:"Emitted if the attribute equals the value"},false:{description:"Emitted if the attribute does not equal the value"}},customViewCode:'<% if (inputs.attribute) { %> "<%- inputs.attribute %>" equals "<%- inputs.value %>"<% } else { %> Property Equals <% } %>',run:function(e,t){e.attribute.split(".").reduce((function(e,t){return e[t]}),e.object)===e.value?t.true.next(e.object):t.false.next(e.object)}}},8997:function(e,t,n){"use strict";n.d(t,{Y:function(){return g}});var r=n(44305),i=n(13127),o=n(27378),a=n(67651),u=n(96149),s=n(73995),c=n(18265),l=n(89841),d=n(12902),p=n(33099);n.g.vm2=s.z;var f=(0,l.S)(),v=[0,10],m=function(e){var t,n,r=e.flow,i=e.output,o=e.inputs,u=e.onError,s=e.debugDelay,l=e.dependencies,d=function(e,t){var n=new Set;return{onEvent:function(r){var i=Object.assign({},r,{time:Date.now()});console.info("Got debugger event",r),t.addEvents([i]),e.addEvents([i]),n.forEach((function(e){return e([i])}))},onBatchedEvents:function(e){return n.add(e),function(){return n.delete(e)}}}}(e.player,f);d.debugDelay=s;var p=(0,c.keys)(r.part.outputs)[0];return{executeResult:(0,c.execute)({part:r.part,inputs:o,outputs:(t={},t[p]=i,t),resolvedDeps:Object.assign({},l,(n={},n[r.part.id]=r.part,n)),_debugger:d,onBubbleError:function(e){u(e)},extraContext:{PubSub:a}}),localDebugger:d}},g=function(e){var t=e.debugDelay,a=e.onOutput,s=e.flowProps,l=s.flow,g=s.inputs,h=s.output,b=(0,o.useRef)((0,u.createRuntimePlayer)()),I=(0,o.useState)(e.flowProps.dependencies),y=I[0],C=I[1],P=(0,o.useState)(),_=P[0],x=P[1],j=(0,u.useDebounce)(y,500)[0],O=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,i){var o,a,s,p,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.part,e.t0=Object,e.next=4,Promise.all([n.e(5717),n.e(4500)]).then(n.t.bind(n,84500,23));case 4:return e.t1=e.sent,a=e.t0.values.call(e.t0,e.t1).find((function(e){return(0,c.isBasePart)(e)&&e.id===o.id})),C((function(e){var t;return Object.assign({},e,{dependencies:Object.assign({},e.dependencies,(t={},t[a.id]=Object.assign({},a,{source:{path:"@flyde/stdlib/dist/all-browser",export:a.id}}),t))})})),s=void 0,p=(0,d.ZP)(l,(function(e){if(i){var n=(0,u.vAdd)({x:0,y:0},i.pos);if(s=(0,u.createNewPartInstance)(t.part,0,n,y),e.part.instances.push(s),i.connectTo){var r=i.connectTo,o=r.insId,a=r.outputId;e.part.connections.push({from:{insId:o,pinId:a},to:{insId:s.id,pinId:c.TRIGGER_PIN_ID}})}}})),e.next=11,new Promise((function(e){return setTimeout(e,10)}));case 11:return f=(0,d.ZP)(S,(function(e){var t;(e.flow=p,null!=i&&i.selectAfterAdding&&s)&&(e.boardData.selected=[null==(t=s)?void 0:t.id])})),D(f),(0,u.toastMsg)("Part "+o.id+" successfully imported from "+t.module),e.abrupt("return",y);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Object,e.next=3,Promise.all([n.e(5717),n.e(4500)]).then(n.t.bind(n,84500,23));case 3:return e.t1=e.sent,t=e.t0.values.call(e.t0,e.t1).filter(c.isBasePart),e.abrupt("return",{importables:t.map((function(e){return{part:Object.assign({},e,{source:{path:"n/a",export:"n/a"}}),module:"@flyde/stdlib"}})),errors:[]});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=(0,o.useState)({flow:l,boardData:{viewPort:{pos:{x:0,y:0},zoom:1},lastMousePos:{x:0,y:0},selected:[]}}),S=E[0],D=E[1];(0,o.useEffect)((function(){D((function(e){return Object.assign({},e,{flow:l})}))}),[l]),(0,o.useEffect)((function(){C((function(e){return Object.assign({},e,{main:S.flow.part})}))}),[S.flow.part]);var k={state:S,onChangeEditorState:D,hideTemplatingTips:!0,initialPadding:v,onExtractInlinePart:c.noop};(0,o.useEffect)((function(){b.current.start()}),[]),(0,o.useEffect)((function(){var n=m({flow:S.flow,dependencies:y,output:h,inputs:g,onError:c.noop,debugDelay:t,player:b.current}),r=n.executeResult,i=n.localDebugger,o=e.flowProps.output.subscribe((function(e){return a(e)}));return x(i),function(){r(),o.unsubscribe()}}),[t,j]);var T=(0,o.useMemo)((function(){return{resolvedDependencies:y,onImportPart:O,onRequestImportables:w}}),[]),M=(0,o.useMemo)((function(){return{debuggerClient:_,onRequestHistory:f.requestHistory}}),[_]);return o.createElement(p.Z,null,(function(){return o.createElement(u.DependenciesContextProvider,{value:T},o.createElement(u.DebuggerContextProvider,{value:M},o.createElement(u.FlowEditor,k)))}))}},89841:function(e,t,n){"use strict";n.d(t,{S:function(){return u}});var r=n(44305),i=n(13127),o=n(18265),a=200,u=function(){var e,t=new Map,n=new Map;return{requestHistory:(e=(0,i.Z)((0,r.Z)().mark((function e(i,u,s){var c,l,d,p,f,v;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c="input"===s?o.DebuggerEventType.INPUT_CHANGE:o.DebuggerEventType.OUTPUT_CHANGE,console.log({insId:i,pinId:u,type:c}),!u){e.next=9;break}return l=i+"."+u+"."+c,d=t.get(l)||{total:0,lastSamples:[]},p=d.lastSamples.slice(0,a),e.abrupt("return",Object.assign({},d,{lastSamples:p}));case 9:return f=n.get(i)||{total:0,lastSamples:[]},v=f.lastSamples.slice(0,a),e.abrupt("return",Object.assign({},f,{lastSamples:v}));case 12:case"end":return e.stop()}}),e)}))),function(t,n,r){return e.apply(this,arguments)}),addEvents:function(e){e.forEach((function(e){if(e.type===o.DebuggerEventType.ERROR){var r=e;r.type=o.DebuggerEventType.OUTPUT_CHANGE,r.pinId=o.ERROR_PIN_ID}if(e.type===o.DebuggerEventType.INPUT_CHANGE||e.type===o.DebuggerEventType.OUTPUT_CHANGE){var i=e.insId,u=e.type,s=i+"."+e.pinId+"."+u,c=t.get(s)||{total:0,lastSamples:[]};c.lastSamples.unshift(e),c.lastSamples.length>a&&c.lastSamples.splice(a,c.lastSamples.length-a),c.total++,t.set(s,c);var l=n.get(i)||{total:0,lastSamples:[]};l.lastSamples.unshift(e),l.lastSamples.length>a&&l.lastSamples.splice(a,l.lastSamples.length-a),l.total++,t.set(i,l)}}))}}}},73995:function(e,t,n){"use strict";n.d(t,{z:function(){return i}});var r=n(18265),i={VMScript:function(e){this.script=e},VM:function(){function e(e){this.context=e}return e.prototype.run=function(e){var t=(0,r.okeys)(this.context.sandbox),n=Object.values(this.context.sandbox);Function.apply(void 0,t.concat([e.script])).apply(void 0,n)},e}()}},42716:function(e,t,n){"use strict";n.d(t,{V:function(){return a}});var r=n(52685),i=n(27378),o=function(e){return i.createElement("li",{className:"log-item"},i.createElement("main",{className:"content"},e.value),i.createElement("aside",null,new Date(e.time).toLocaleTimeString()))},a=function(e){var t=i.useState([]),n=t[0],a=t[1];return i.useEffect((function(){e.output.subscribe((function(e){var t="object"==typeof e&&i.isValidElement(e)?e:""+e;a((function(e){return[].concat(e,[{value:t,time:Date.now()}])}))}))}),[]),i.createElement("div",{className:"output-log"},i.createElement("header",null,"Output Log"," ",i.createElement("button",{className:"clear-btn button button--outline button--secondary button--sm",onClick:function(){return a([])}},"Clear")),i.createElement("main",null,i.createElement("ul",null,n.map((function(e,t){return i.createElement(o,(0,r.Z)({},e,{key:t}))}))),0===n.length?i.createElement("div",{className:"empty-state"},"Nothing to show. Interact with the example to emit some outputs!"):null))}},43142:function(e,t,n){"use strict";n.d(t,{I:function(){return f}});var r=n(27378),i=(n(67651),n(59821)),o=n(38944),a=n(73995),u=n(81884),s=(n(18265),n(89841)),c=n(60512),l=n(1706),d=n(8997);n.g.vm2=a.z;(0,s.S)();var p=[{title:"Hello World",key:"hello-world"},{title:"React Counter",key:"react-counter"},{title:"BMI Calculator",key:"bmi"},{title:"REST API Usage",key:"apis"},{title:"Debounce vs. Throttling",key:"debounce-throttling"},{title:"Fibonacci Seq.",key:"fibonacci"}],f=function(e){var t=(0,r.useState)(e.initWidth||500),n=t[0],a=t[1],s=(0,r.useState)(e.defaultDelay||0),f=s[0],v=s[1],m=(0,r.useState)(!1),g=m[0],h=m[1],b=(0,r.useCallback)((function(e,t){var n=t.size;a(n.width)}),[]),I=r.createElement("div",{className:"delay-container"},r.createElement("input",{type:"range",id:"volume",name:"delay",value:f,step:"100",min:"0",max:"300",onChange:function(e){return v(Number(e.target.value))}}),r.createElement("label",{htmlFor:"volume"},"Debug Delay: ",f,"ms")),y=p.findIndex((function(t){return t.key===e.meta.key})),C=p[y+1],P=p[y-1];return r.createElement(i.Z,{title:e.meta.title+" | Playground",description:"Flyde Playground - "+e.meta.title+" example"},r.createElement("header",{className:(0,o.Z)("hero hero--primary",c.Z.heroBanner,"playground-hero")},r.createElement("div",{className:"container"},r.createElement("h1",{className:"hero__title"},"Welcome to Flyde's Online Playground"),r.createElement("p",{className:"hero__subtitle"},"Choose one of the examples below to get started. Feel free to play around with the canvas and see how your changes affect the result!"))),r.createElement("div",{className:"mobile-warning"},"Flyde is currently not optimized for mobile devices. Please"," ",r.createElement("strong",null,"use a desktop computer for the best experience"),"."),r.createElement("ul",{className:"examples__menu"},p.map((function(e){return r.createElement("li",{key:e.key},r.createElement(u.Z,{to:"/playground/"+e.key,className:"button button--primary"},e.title))}))),r.createElement("div",{className:"playground-container"},r.createElement("header",null,r.createElement("h2",{className:"playground-title"},e.meta.title),r.createElement("div",{className:"playground-description"},e.meta.description),g?r.createElement(r.Fragment,null,r.createElement("hr",null),r.createElement("div",{className:"playground-extra"},e.extraInfo||e.meta.extraInfo,r.createElement("div",{className:"star-hint"},r.createElement("span",null,"\xa0 PS: Did you like this example?"),"Please consider giving a \u2b50\ufe0f to the project"," ",r.createElement("span",{className:"star-wrapper"},r.createElement("iframe",{className:"gh-stars-frame",src:"https://ghbtns.com/github-btn.html?user=flydehq&resolvedParts=flyde&type=star&count=true&size=small",width:100,height:20,title:"GitHub Stars"}))))):null,e.prefixComponent),r.createElement("div",{className:"playground"},r.createElement("div",{className:"flow-container"},!0!==e.hideDelay?I:null,r.createElement(d.Y,{flowProps:e.flowProps,debugDelay:f,onOutput:function(){return h(!0)}})),r.createElement(l.Resizable,{height:0,width:n,onResize:b,axis:"x",handle:r.createElement("div",{className:"handle"}),resizeHandles:["w"]},r.createElement("div",{className:"output-container",style:{flexBasis:n}},e.children))),r.createElement("nav",{className:"pagination-nav"},r.createElement("div",{className:"pagination-nav__item"},P?r.createElement("a",{className:"pagination-nav__link",href:"/playground/"+P.key},r.createElement("div",{className:"pagination-nav__sublabel"},"Previous Example"),r.createElement("div",{className:"pagination-nav__label"},P.title)):null),r.createElement("div",{className:"pagination-nav__item pagination-nav__item--next"},C?r.createElement("a",{className:"pagination-nav__link",href:"/playground/"+C.key},r.createElement("div",{className:"pagination-nav__sublabel"},"Next Example"),r.createElement("div",{className:"pagination-nav__label"},C.title)):null))))}},65689:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r=n(27378),i=n(18265),o=n(43142),a={dependencies:{"GET Request":{id:"GET Request",icon:"fa-server",namespace:"HTTP",description:"Performs a HTTP GET request to a URL and emits the response data",inputs:{url:{description:"URL to fetch data from",mode:"required"},headers:{description:"Headers to send with the request",mode:"required-if-connected"},params:{description:"Query parameters to send with the request",mode:"required-if-connected"}},output:{name:"data",description:"The response data"},run:n(41396).Get.run,outputs:{data:{description:"The response data"}},defaultStyle:{icon:"fa-server"},source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Http.flyde.js",export:"Get"}},"POST Request":{id:"POST Request",icon:"fa-server",namespace:"HTTP",description:"Performs a HTTP POST request to a URL and emits the response data",inputs:{url:{description:"URL to fetch data from",mode:"required"},headers:{description:"Headers to send with the request",mode:"required-if-connected"},params:{description:"Query parameters to send with the request",mode:"required-if-connected"},data:{description:"Data to send with the request",mode:"required-if-connected"}},output:{name:"data",description:"The response data"},run:n(41396).Post.run,outputs:{data:{description:"The response data"}},defaultStyle:{icon:"fa-server"},source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Http.flyde.js",export:"Post"}},"Get Attribute":{id:"Get Attribute",searchKeywords:["pick","dot"],namespace:"Objects",icon:"fa-magnifying-glass",description:"Gets an attribute from an object",inputs:{object:{description:"Object to get attribute from",mode:"required"},attribute:{description:"Attribute to get",mode:"required"}},output:{name:"value",description:"The value of the attribute"},customViewCode:'<% if (inputs.attribute) { %> Get "<%- inputs.attribute %>"<% } else { %> Get Attribute <% } %>',run:n(16505).GetAttribute.run,outputs:{value:{description:"The value of the attribute"}},defaultStyle:{icon:"fa-magnifying-glass"},source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Objects.flyde.js",export:"GetAttribute"}}},flow:{imports:{"@flyde/stdlib":["GET Request","POST Request","Get Attribute"]},part:{instances:[{pos:{x:-652.4219506835938,y:281.67776977539063},id:"Inline-value-Hello from ${i76",inputConfig:{},part:{id:"Inline-value-Hello visitor ",inputs:{country:{mode:"required"},capital:{mode:"required"},population:{mode:"required"}},outputs:{value:{delayed:!1}},runFnRawCode:"const result = (`Hello visitor from ${inputs.country}! The capital is ${inputs.capital} (population of ${inputs.population})`); Promise.resolve(result).then(val => outputs.value.next(val))",customViewCode:"`Hello visitor from ${inputs.country}! The capital is ${inputs.capital} (population of ${inputs.popu",dataBuilderSource:"YEhlbGxvIHZpc2l0b3IgZnJvbSAke2lucHV0cy5jb3VudHJ5fSEgVGhlIGNhcGl0YWwgaXMgJHtpbnB1dHMuY2FwaXRhbH0gKHBvcHVsYXRpb24gb2YgJHtpbnB1dHMucG9wdWxhdGlvbn0pYA==",templateType:"value",completionOutputs:["value"],defaultStyle:{size:"regular",icon:"code",cssOverride:{fontFamily:"monospace",fontWeight:"500"}},description:"Custom inline value"}},{pos:{x:-616.065219116211,y:-228.04816649675365},id:"Get User's Country-ins",inputConfig:{},part:{id:"Get User's Country",inputs:{},outputs:{country:{type:"any",delayed:!1,optional:!1}},instances:[{pos:{x:-335.7258349609375,y:-194.68226864814756},id:"GET Request-907",inputConfig:{url:{mode:"static",value:"https://api.country.is/"}},visibleInputs:["url","__trigger"],visibleOutputs:["r","__error","response","data"],partId:"GET Request"},{id:"Inline-value-{iso2: ${input76",part:{id:"Inline-value-{iso2: inputs.d",inputs:{data:{type:"any",mode:"required"}},outputs:{value:{type:"any",delayed:!1,optional:!1}},runFnRawCode:"const result = ({iso2: inputs.data.country}); Promise.resolve(result).then(val => outputs.value.next(val))",customViewCode:"{iso2: inputs.data.country}",dataBuilderSource:"e2lzbzI6IGlucHV0cy5kYXRhLmNvdW50cnl9",templateType:"value",completionOutputs:["value"],defaultStyle:{size:"regular",icon:"code",cssOverride:{fontFamily:"monospace",fontWeight:"500"}}},inputConfig:{},pos:{x:-468.5056274414062,y:-39.30523986816405}}],inputsPosition:{},outputsPosition:{r:{x:-363.42401672132144,y:105.34149194113161},country:{x:-322.5739794922268,y:138.57280736180334}},connections:[{from:{insId:"Inline-value-{iso2: ${input76",pinId:"value"},to:{pinId:"country",insId:"__this"}},{from:{insId:"GET Request-907",pinId:"data"},to:{insId:"Inline-value-{iso2: ${input76",pinId:"data"}}],completionOutputs:["country"]},style:{size:"large",color:"#f15bb5"}},{pos:{x:-675.1473986816407,y:-88.80973440885543},id:"Get Country Name And Capital-ins",inputConfig:{},visibleOutputs:["name","capital"],part:{id:"Get Country Name And Capital",inputs:{body:{type:"any",mode:"required"}},outputs:{capital:{type:"any",delayed:!1,optional:!1},name:{type:"any",delayed:!1,optional:!1}},instances:[{pos:{x:-455.39787109375004,y:43.691497802734375},id:"POST Request-624",inputConfig:{url:{mode:"static",value:"https://countriesnow.space/api/v0.1/countries/capital"}},visibleInputs:["url","body","data"],partId:"POST Request"},{id:"Get Attribute-217",partId:"Get Attribute",inputConfig:{attribute:{mode:"static",value:"data.capital"}},pos:{x:-285.6922900390625,y:219.88888122558592}},{id:"Get Country Name And Capital-srp46ei",partId:"Get Attribute",inputConfig:{attribute:{mode:"static",value:"data.name"}},pos:{x:-608.0307299804688,y:225.56220581054686}}],inputsPosition:{body:{x:-333.75691140339336,y:-63.66470402308542}},outputsPosition:{value:{x:-514.1541695281439,y:411.8457371232514},i10:{x:-280.88783057750686,y:411.581705357324},capital:{x:-214.78486673798952,y:473.65942918140723},name:{x:-523.761854810908,y:479.9947571097377}},connections:[{from:{pinId:"body",insId:"__this"},to:{insId:"POST Request-624",pinId:"data"}},{from:{insId:"Get Attribute-217",pinId:"value"},to:{pinId:"capital",insId:"__this"}},{from:{insId:"POST Request-624",pinId:"data"},to:{insId:"Get Country Name And Capital-srp46ei",pinId:"object"}},{from:{insId:"Get Country Name And Capital-srp46ei",pinId:"value"},to:{pinId:"name",insId:"__this"}},{from:{insId:"POST Request-624",pinId:"data"},to:{insId:"Get Attribute-217",pinId:"object"}}],completionOutputs:["name+capital"]},style:{size:"large",color:"#9b5de5"}},{pos:{x:-283.9292150878906,y:175.29793395996091},id:"Format Number-ins",inputConfig:{},part:{id:"Format Number",inputs:{number:{type:"any",mode:"required"}},outputs:{string:{type:"any",delayed:!1,optional:!1}},instances:[{id:"Inline-value-Result is ${in47",part:{id:"Inline-value-new Intl.Number",inputs:{population:{type:"any",mode:"required"}},outputs:{r:{type:"any",delayed:!1,optional:!1}},runFnRawCode:"outputs.r.next((new Intl.NumberFormat().format(inputs.population)))",customViewCode:"new Intl.NumberFormat().format(inputs.population)",dataBuilderSource:"bmV3IEludGwuTnVtYmVyRm9ybWF0KCkuZm9ybWF0KGlucHV0cy5wb3B1bGF0aW9uKQ==",templateType:"value",completionOutputs:["r"]},inputConfig:{},pos:{x:-452.21022216796877,y:176.39826171875}}],inputsPosition:{population:{x:0,y:0},number:{x:0,y:0}},outputsPosition:{r:{x:0,y:400},string:{x:0,y:400}},connections:[{from:{insId:"__this",pinId:"number"},to:{insId:"Inline-value-Result is ${in47",pinId:"population"}},{from:{insId:"Inline-value-Result is ${in47",pinId:"r"},to:{insId:"__this",pinId:"string"}}],completionOutputs:["string"]},style:{size:"regular",color:"#fee440"}},{pos:{x:-347.9215673828125,y:54.336173706054694},id:"cl8x5r4qp00074666lb382z1c",inputConfig:{},part:{id:"Get Population By City",inputs:{city:{type:"any",mode:"required"}},outputs:{value:{type:"any",delayed:!1,optional:!1}},instances:[{pos:{x:-204.90311279296873,y:349.60314422607416},id:"POST Request-775",inputConfig:{url:{mode:"static",value:"https://countriesnow.space/api/v0.1/countries/population/cities"}},visibleInputs:["url","body","data"],partId:"POST Request"},{pos:{x:-143.08780761718754,y:233.70198646545413},id:"Inline-value-{city: inputs.c75",inputConfig:{},part:{id:"Inline-value-{city: inputs.c",inputs:{city:{type:"any",mode:"required"}},outputs:{r:{type:"any",delayed:!1,optional:!1}},runFnRawCode:"outputs.r.next(({city: inputs.city}))",customViewCode:"{city: inputs.city}",dataBuilderSource:"e2NpdHk6IGlucHV0cy5jaXR5fQ==",templateType:"value",completionOutputs:["r"]}},{id:"Get Attribute-893",partId:"Get Attribute",inputConfig:{attribute:{mode:"static",value:"data.populationCounts.0.value"}},pos:{x:-196.82018798828125,y:535.9137713623047},style:{icon:"fa-box",size:"small"}}],inputsPosition:{city:{x:-59.242744173605615,y:192.73141904118035}},outputsPosition:{value:{x:-116.77230284586054,y:698.5630767231784}},connections:[{from:{pinId:"city",insId:"__this"},to:{insId:"Inline-value-{city: inputs.c75",pinId:"city"}},{from:{insId:"Inline-value-{city: inputs.c75",pinId:"r"},to:{insId:"POST Request-775",pinId:"data"}},{from:{insId:"Get Attribute-893",pinId:"value"},to:{pinId:"value",insId:"__this"}},{from:{insId:"POST Request-775",pinId:"data"},to:{insId:"Get Attribute-893",pinId:"object"}}],completionOutputs:["value"]},style:{size:"large",color:"#00bbf9"}}],connections:[{from:{insId:"Get Country Name And Capital-ins",pinId:"name"},to:{insId:"Inline-value-Hello from ${i76",pinId:"country"}},{from:{insId:"Get Country Name And Capital-ins",pinId:"capital"},to:{insId:"Inline-value-Hello from ${i76",pinId:"capital"}},{from:{insId:"Format Number-ins",pinId:"string"},to:{insId:"Inline-value-Hello from ${i76",pinId:"population"}},{from:{insId:"cl8x5r4qp00074666lb382z1c",pinId:"value"},to:{insId:"Format Number-ins",pinId:"number"}},{from:{insId:"Get Country Name And Capital-ins",pinId:"capital"},to:{insId:"cl8x5r4qp00074666lb382z1c",pinId:"city"}},{from:{insId:"Get User's Country-ins",pinId:"country"},to:{insId:"Get Country Name And Capital-ins",pinId:"body"}},{from:{insId:"Inline-value-Hello from ${i76",pinId:"value"},to:{insId:"__this",pinId:"response"}}],id:"ApisCombination",inputs:{},outputs:{response:{type:"any",optional:!1,delayed:!1}},inputsPosition:{city:{x:-187.27285824815934,y:-14.13215209416181}},outputsPosition:{json:{x:-441.98276309426666,y:480.38719404276554},na:{x:-441.98276309426666,y:480.38719404276554},result:{x:-499.82438378976735,y:706.7650396699393},output:{x:-474.64252250807056,y:437.71313745088565},response:{x:-500.61566893722795,y:421.9045791861946}},completionOutputs:["response"]}}},u=n(42716),s={title:"HTTP Requests",description:"Flyde works great for heavy asynchronous & concurrent tasks, like combining several REST APIs together. This example shows exactly that, by combining 3 different REST APIs, the population of the capital of the country your IP is assigned with is retrieved",key:"api",extraInfo:r.createElement("strong",null,r.createElement("h3",null,"Try double-clicking each API part to see it's underlying implementation! In Flyde, nothing is hidden, only abstracted"))};function c(){var e=(0,r.useRef)((0,i.dynamicOutput)()),t=(0,r.useRef)({__trigger:(0,i.dynamicPartInput)()}),n=(0,r.useState)({flow:a.flow,dependencies:a.dependencies,inputs:t.current,output:e.current}),c=n[0],l=(n[1],r.createElement("button",{className:"button button--success",onClick:function(){return t.current.__trigger.subject.next("run")}},"Run!"));return r.createElement(o.I,{meta:s,flowProps:c,defaultDelay:100,prefixComponent:l},r.createElement(u.V,{output:e.current}))}},60512:function(e,t){"use strict";t.Z={"flyde-flow-editor":"flyde-flow-editor_AAD4",_hj_feedback_container:"_hj_feedback_container_Af03"}},95126:function(e,t,n){var r={"./af":1009,"./af.js":1009,"./ar":88769,"./ar-dz":23739,"./ar-dz.js":23739,"./ar-kw":93745,"./ar-kw.js":93745,"./ar-ly":99576,"./ar-ly.js":99576,"./ar-ma":67408,"./ar-ma.js":67408,"./ar-sa":48781,"./ar-sa.js":48781,"./ar-tn":87856,"./ar-tn.js":87856,"./ar.js":88769,"./az":2030,"./az.js":2030,"./be":56476,"./be.js":56476,"./bg":25304,"./bg.js":25304,"./bm":48125,"./bm.js":48125,"./bn":34,"./bn-bd":29835,"./bn-bd.js":29835,"./bn.js":34,"./bo":64082,"./bo.js":64082,"./br":8317,"./br.js":8317,"./bs":93107,"./bs.js":93107,"./ca":68272,"./ca.js":68272,"./cs":98567,"./cs.js":98567,"./cv":61583,"./cv.js":61583,"./cy":10076,"./cy.js":10076,"./da":31760,"./da.js":31760,"./de":8973,"./de-at":63214,"./de-at.js":63214,"./de-ch":74728,"./de-ch.js":74728,"./de.js":8973,"./dv":54053,"./dv.js":54053,"./el":7499,"./el.js":7499,"./en-au":67876,"./en-au.js":67876,"./en-ca":47010,"./en-ca.js":47010,"./en-gb":34239,"./en-gb.js":34239,"./en-ie":99830,"./en-ie.js":99830,"./en-il":28438,"./en-il.js":28438,"./en-in":25322,"./en-in.js":25322,"./en-nz":43264,"./en-nz.js":43264,"./en-sg":55449,"./en-sg.js":55449,"./eo":39486,"./eo.js":39486,"./es":32430,"./es-do":16310,"./es-do.js":16310,"./es-mx":27038,"./es-mx.js":27038,"./es-us":73099,"./es-us.js":73099,"./es.js":32430,"./et":34975,"./et.js":34975,"./eu":87063,"./eu.js":87063,"./fa":68073,"./fa.js":68073,"./fi":50957,"./fi.js":50957,"./fil":8764,"./fil.js":8764,"./fo":81775,"./fo.js":81775,"./fr":74179,"./fr-ca":14306,"./fr-ca.js":14306,"./fr-ch":73791,"./fr-ch.js":73791,"./fr.js":74179,"./fy":47014,"./fy.js":47014,"./ga":46911,"./ga.js":46911,"./gd":62958,"./gd.js":62958,"./gl":87344,"./gl.js":87344,"./gom-deva":33161,"./gom-deva.js":33161,"./gom-latn":35798,"./gom-latn.js":35798,"./gu":68485,"./gu.js":68485,"./he":27917,"./he.js":27917,"./hi":52159,"./hi.js":52159,"./hr":95842,"./hr.js":95842,"./hu":30005,"./hu.js":30005,"./hy-am":51312,"./hy-am.js":51312,"./id":60781,"./id.js":60781,"./is":64101,"./is.js":64101,"./it":43467,"./it-ch":4759,"./it-ch.js":4759,"./it.js":43467,"./ja":44164,"./ja.js":44164,"./jv":70079,"./jv.js":70079,"./ka":57036,"./ka.js":57036,"./kk":92022,"./kk.js":92022,"./km":63418,"./km.js":63418,"./kn":43655,"./kn.js":43655,"./ko":30986,"./ko.js":30986,"./ku":91902,"./ku.js":91902,"./ky":4604,"./ky.js":4604,"./lb":99026,"./lb.js":99026,"./lo":20537,"./lo.js":20537,"./lt":22288,"./lt.js":22288,"./lv":1495,"./lv.js":1495,"./me":60690,"./me.js":60690,"./mi":2571,"./mi.js":2571,"./mk":93959,"./mk.js":93959,"./ml":97225,"./ml.js":97225,"./mn":88,"./mn.js":88,"./mr":46622,"./mr.js":46622,"./ms":11070,"./ms-my":48899,"./ms-my.js":48899,"./ms.js":11070,"./mt":63931,"./mt.js":63931,"./my":95393,"./my.js":95393,"./nb":4274,"./nb.js":4274,"./ne":8914,"./ne.js":8914,"./nl":33114,"./nl-be":68479,"./nl-be.js":68479,"./nl.js":33114,"./nn":4513,"./nn.js":4513,"./oc-lnc":46549,"./oc-lnc.js":46549,"./pa-in":28264,"./pa-in.js":28264,"./pl":32848,"./pl.js":32848,"./pt":90899,"./pt-br":55077,"./pt-br.js":55077,"./pt.js":90899,"./ro":92512,"./ro.js":92512,"./ru":21753,"./ru.js":21753,"./sd":16840,"./sd.js":16840,"./se":78362,"./se.js":78362,"./si":50464,"./si.js":50464,"./sk":66324,"./sk.js":66324,"./sl":41963,"./sl.js":41963,"./sq":53039,"./sq.js":53039,"./sr":93454,"./sr-cyrl":10466,"./sr-cyrl.js":10466,"./sr.js":93454,"./ss":95158,"./ss.js":95158,"./sv":28859,"./sv.js":28859,"./sw":57594,"./sw.js":57594,"./ta":26915,"./ta.js":26915,"./te":15677,"./te.js":15677,"./tet":92154,"./tet.js":92154,"./tg":74098,"./tg.js":74098,"./th":89071,"./th.js":89071,"./tk":49381,"./tk.js":49381,"./tl-ph":1869,"./tl-ph.js":1869,"./tlh":92346,"./tlh.js":92346,"./tr":71483,"./tr.js":71483,"./tzl":30266,"./tzl.js":30266,"./tzm":33138,"./tzm-latn":32960,"./tzm-latn.js":32960,"./tzm.js":33138,"./ug-cn":29456,"./ug-cn.js":29456,"./uk":50805,"./uk.js":50805,"./ur":61127,"./ur.js":61127,"./uz":29628,"./uz-latn":80840,"./uz-latn.js":80840,"./uz.js":29628,"./vi":56962,"./vi.js":56962,"./x-pseudo":49257,"./x-pseudo.js":49257,"./yo":62423,"./yo.js":62423,"./zh-cn":61002,"./zh-cn.js":61002,"./zh-hk":6046,"./zh-hk.js":6046,"./zh-mo":36903,"./zh-mo.js":36903,"./zh-tw":24710,"./zh-tw.js":24710};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=95126},91764:function(){}}]);