/*! For license information please see 7a4a9b46.85cd2f64.js.LICENSE.txt */
(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[764],{8162:function(e,t,n){"use strict";var i=n(62525),r=60103,o=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var a=60109,u=60110,s=60112;t.Suspense=60113;var c=60115,d=60116;if("function"==typeof Symbol&&Symbol.for){var l=Symbol.for;r=l("react.element"),o=l("react.portal"),t.Fragment=l("react.fragment"),t.StrictMode=l("react.strict_mode"),t.Profiler=l("react.profiler"),a=l("react.provider"),u=l("react.context"),s=l("react.forward_ref"),t.Suspense=l("react.suspense"),c=l("react.memo"),d=l("react.lazy")}var p="function"==typeof Symbol&&Symbol.iterator;function f(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||v}function h(){}function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||v}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(f(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},h.prototype=y.prototype;var b=g.prototype=new h;b.constructor=g,i(b,y.prototype),b.isPureReactComponent=!0;var I={current:null},C=Object.prototype.hasOwnProperty,_={key:!0,ref:!0,__self:!0,__source:!0};function P(e,t,n){var i,o={},a=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(a=""+t.key),t)C.call(t,i)&&!_.hasOwnProperty(i)&&(o[i]=t[i]);var s=arguments.length-2;if(1===s)o.children=n;else if(1<s){for(var c=Array(s),d=0;d<s;d++)c[d]=arguments[d+2];o.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===o[i]&&(o[i]=s[i]);return{$$typeof:r,type:e,key:a,ref:u,props:o,_owner:I.current}}function x(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}var O=/\/+/g;function E(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function j(e,t,n,i,a){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case r:case o:s=!0}}if(s)return a=a(s=e),e=""===i?"."+E(s,0):i,Array.isArray(a)?(n="",null!=e&&(n=e.replace(O,"$&/")+"/"),j(a,t,n,"",(function(e){return e}))):null!=a&&(x(a)&&(a=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,n+(!a.key||s&&s.key===a.key?"":(""+a.key).replace(O,"$&/")+"/")+e)),t.push(a)),1;if(s=0,i=""===i?".":i+":",Array.isArray(e))for(var c=0;c<e.length;c++){var d=i+E(u=e[c],c);s+=j(u,t,n,d,a)}else if(d=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"==typeof d)for(e=d.call(e),c=0;!(u=e.next()).done;)s+=j(u=u.value,t,n,d=i+E(u,c++),a);else if("object"===u)throw t=""+e,Error(f(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function w(e,t,n){if(null==e)return e;var i=[],r=0;return j(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function k(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var S={current:null};function T(){var e=S.current;if(null===e)throw Error(f(321));return e}var D={ReactCurrentDispatcher:S,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:I,IsSomeRendererActing:{current:!1},assign:i};t.Children={map:w,forEach:function(e,t,n){w(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return w(e,(function(){t++})),t},toArray:function(e){return w(e,(function(e){return e}))||[]},only:function(e){if(!x(e))throw Error(f(143));return e}},t.Component=y,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,n){if(null==e)throw Error(f(267,e));var o=i({},e.props),a=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=I.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(d in t)C.call(t,d)&&!_.hasOwnProperty(d)&&(o[d]=void 0===t[d]&&void 0!==c?c[d]:t[d])}var d=arguments.length-2;if(1===d)o.children=n;else if(1<d){c=Array(d);for(var l=0;l<d;l++)c[l]=arguments[l+2];o.children=c}return{$$typeof:r,type:e.type,key:a,ref:u,props:o,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=P,t.createFactory=function(e){var t=P.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=x,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:k}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return T().useCallback(e,t)},t.useContext=function(e,t){return T().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return T().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return T().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return T().useLayoutEffect(e,t)},t.useMemo=function(e,t){return T().useMemo(e,t)},t.useReducer=function(e,t,n){return T().useReducer(e,t,n)},t.useRef=function(e){return T().useRef(e)},t.useState=function(e){return T().useState(e)},t.version="17.0.2"},93119:function(e,t,n){"use strict";e.exports=n(8162)},67695:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n},o=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.customRepoToPartRepo=t.codePartToNative=void 0;var a=n(14206),u=n(18265),s=n(24048),c=n(18265);t.codePartToNative=function(e,t){void 0===t&&(t={});var d=n.g&&n.g.vm2||"undefined"==typeof window?n.g.vm2:window&&window.vm2,l=e.fnCode,p=r(e,["fnCode"]),f=u.debugLogger("code-part:"+e.id),v="\n  try {\n    "+l+"\n  } catch (e) {\n    adv.onError(e);\n  }\n  ",m=new d.VMScript(v),y=i(i({},p),{fn:function(n,r,l){var p=new d.VM({sandbox:i({inputs:n,outputs:r,setInterval:setInterval,clearInterval:clearInterval,setTimeout:setTimeout,clearTimeout:clearTimeout,encodeURIComponent:encodeURIComponent,adv:l,log:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];f.apply(void 0,o(["Log from code part "+e.id+" ["+l.insId+"]"],t))},axios:a.default,DEFAULT_AXIOS_TIMEOUT:15e3,dynamicPartInput:s.dynamicPartInput,dynamicPartArg:s.dynamicPartInput,dynamicOutput:c.dynamicOutput,isDefined:c.isDefined,compileStringTemplate:u.compileStringTemplate,compileObjectTemplate:u.compileObjectTemplate,__FLYDE_MODE:"production"},t)});p.run(m)}});return y};t.customRepoToPartRepo=function(e,n){void 0===n&&(n={});var i={};for(var r in e){var o=e[r];i[r]=s.isCodePart(o)?t.codePartToNative(o,n):o}return i}},8541:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cappedArrayDebounce=void 0;t.cappedArrayDebounce=function(e,t,n,i){void 0===i&&(i=500);var r=[],o=null,a=null;return function(u){clearTimeout(o),r.push(u),a||(a=setTimeout((function(){e(r),clearTimeout(o),a=null}),i)),r.length>=n?(e(r),clearTimeout(a),a=null,r=[]):o=setTimeout((function(){e(r),clearTimeout(a),a=null,r=[]}),t)}}},96615:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.dataShaper=t.DataShapeType=void 0,function(e){e[e.STRING=0]="STRING",e[e.NUMBER=1]="NUMBER",e[e.BOOLEAN=2]="BOOLEAN",e[e.ARRAY=3]="ARRAY",e[e.OBJECT=4]="OBJECT",e[e.NULL=5]="NULL"}(n=t.DataShapeType||(t.DataShapeType={}));var i={string:n.STRING,number:n.NUMBER,boolean:n.BOOLEAN,object:n.OBJECT,array:n.ARRAY,null:n.NULL};t.dataShaper=function(e,n,r){void 0===n&&(n=5),void 0===r&&(r=5);var o,a,u=null===(o=e)?"null":typeof o;if("object"===u){if(Array.isArray(e))return n>1?e.filter((function(e,t){return t<r})).map((function(e){return t.dataShaper(e,n-1,r)})):i.array;if(n>1){var s={};for(var c in e)s[c]=t.dataShaper(e[c],n-1,r);return a=s,Object.keys(a).sort().reduce((function(e,t){return e[t]=a[t],e}),{})}return i.object}return i[u]}},40189:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debugLogger=void 0;var i=n(96292).default("flyde");t.debugLogger=function(e){return i.extend(e)}},68132:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n},o=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.hashProject=t.hashPart=void 0;var a=n(61586),u=n(18265),s=function(e){return a(e)};t.hashPart=function(e){var t={id:e.id,completionOutputs:e.completionOutputs,reactiveInputs:e.reactiveInputs,inputs:e.inputs,outputs:e.outputs};if(u.isGroupedPart(e)){var n=e.instances,a=e.id,c=e.connections,d=n.map((function(e){e.pos;return r(e,["pos"])}));d.sort((function(e,t){return e.id.localeCompare(t.id)}));var l=o([],c);l.sort((function(e,t){var n=e.from.insId+"."+e.from.pinId,i=t.from.insId+"."+t.from.pinId;return n.localeCompare(i)}));var p=JSON.stringify(i({id:a,cleanedInstances:d,conns:l},t));return s(p)}if(u.isCodePart(e)){var f=e.fnCode,v=e.customViewCode;p=JSON.stringify(i({fnCode:f,customViewCode:v},t));return s(p)}throw new Error("Hashing native parts unsupported")};t.hashProject=function(e){var n=e.slug,i=e.id,r=e.customRepo,o=e.env,a=e.triggers,u=Object.values(r).map(t.hashPart).join(""),c=JSON.stringify({id:i,slug:n,env:o,triggers:a});return s(c+u)}},45821:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.DepGraph=void 0,r(n(69985),t),r(n(94919),t),r(n(40189),t),r(n(8541),t),r(n(94919),t),r(n(68132),t),r(n(67748),t),r(n(96615),t),t.DepGraph=n(59280).DepGraph},69985:function(e,t){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.testDataCreator=void 0;t.testDataCreator=function(e){return function(t){void 0===t&&(t={});var i="function"==typeof e?e():e,r=t;return n(n({},i),r)}}},94919:function(e,t){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{s(i.next(e))}catch(t){o(t)}}function u(e){try{s(i.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(u){o=[6,u],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},o=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.eventually=t.delay=t.noop=t.removeDupes=t.ensure=t.isOptionalType=t.isDefined=t.containsAll=t.shuffle=t.randomInts=t.repeat=t.pickRandom=t.randomPos=t.randomInt=t.pickSecond=t.pickFirst=t.fromEntries=t.entries=t.okeys=t.values=t.keys=t.filterOMap=t.mapOMap=void 0;t.mapOMap=function(e,i){return t.entries(e).map((function(e){var t=e[0],n=e[1];return[t,i(t,n)]})).reduce((function(e,t){var i,r=t[0],o=t[1];return n(n({},e),((i={})[r]=o,i))}),{})};t.filterOMap=function(e,i){return t.entries(e).filter((function(e){var t=e[0],n=e[1];return i(t,n)})).reduce((function(e,t){var i,r=t[0],o=t[1];return n(n({},e),((i={})[r]=o,i))}),{})};t.keys=function(e){return Object.keys(e)};t.values=function(e){return Object.values(e)},t.okeys=t.keys;t.entries=function(e){return t.okeys(e).map((function(t){return[t,e[t]]}))};t.fromEntries=function(e){return e.reduce((function(e,t){var i,r=t[0],o=t[1];return n(n({},e),((i={})[r]=o,i))}),{})};t.pickFirst=function(e){return e[0]};t.pickSecond=function(e){return e[1]};t.randomInt=function(e,t){void 0===t&&(t=0);var n=Math.random();return t+Math.floor((e-t)*n)};t.randomPos=function(e,n){return void 0===e&&(e=1e3),void 0===n&&(n=0),{x:t.randomInt(e,n),y:t.randomInt(e,n)}};t.pickRandom=function(e){return e[t.randomInt(e.length)]};t.repeat=function(e,t){return"x".repeat(e).split("").map((function(e,n){return t(n)}))};t.randomInts=function(e,n,i){return void 0===n&&(n=100),void 0===i&&(i=0),t.repeat(e,(function(){return t.randomInt(n,i)}))};t.shuffle=function(e){for(var t,n=o([],e),i=n.length-1;i>=0;i--){var r=Math.floor(Math.random()*(i+1));t=[n[r],n[i]],n[i]=t[0],n[r]=t[1]}return n};t.containsAll=function(e,t){return t.every((function(t){return e.includes(t)}))};t.isDefined=function(e){return void 0!==e};t.isOptionalType=function(e){return/\?$/.test(e)};t.ensure=function(e,t){if(void 0===e)throw new Error(t||"Undefined value passed");return e};t.removeDupes=function(e){return Array.from(new Set(e))};t.noop=function(){};t.delay=function(e){return new Promise((function(t){return setTimeout(t,e)}))};t.eventually=function(e,n,o,a){return void 0===n&&(n=3e3),void 0===o&&(o=100),void 0===a&&(a=new Set),i(void 0,void 0,void 0,(function(){var i,u,s,c;return r(this,(function(r){switch(r.label){case 0:if(n<0)throw i=Array.from(a).reduce((function(e,t,n){return e+"\n\t\t"+(n+1)+". "+t}),""),new Error("[Eventually timeout exceeded after: timeout with error]: "+i);r.label=1;case 1:return r.trys.push([1,3,,5]),[4,e()];case 2:return r.sent(),[3,5];case 3:return u=r.sent(),s=Date.now(),[4,t.delay(o)];case 4:return r.sent(),c=Date.now()-s,a.add(u.message),[2,t.eventually(e,n-c,o,a)];case 5:return[2]}}))}))}},67748:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compileObjectTemplate=t.compileStringTemplate=void 0;t.compileStringTemplate=function(e,t){var n=decodeURIComponent(e);return Object.keys(t).forEach((function(e){var i=t[e],r=new RegExp("\\$\\{"+e+"\\}","g");n=n.replace(r,i)})),n};t.compileObjectTemplate=function(e,t){var n=decodeURIComponent(e);return Object.keys(t).forEach((function(e){var i=t[e],r=JSON.stringify(i),o=new RegExp('"\\$\\$\\{'+e+'\\}"',"g"),a=new RegExp("\\$\\{"+e+"\\}","g"),u="string"==typeof i?i.replace(/"/g,(function(e,t,n){return"\\"!==n[t-1]?'\\"':n[t]})):i;n=n.replace(o,r).replace(a,u).replace(/\n/g,"\\n")})),JSON.parse(n)}},1076:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.connection=t.connectionData=t.connectionDataEquals=t.connectionNodeEquals=t.connectionNode=t.externalConnectionNode=t.isInternalConnection=t.isExternalConnection=t.isInternalConnectionNode=t.isExternalConnectionNode=t.TRIGGER_PIN_ID=t.ERROR_PIN_ID=t.THIS_INS_ID=void 0,t.THIS_INS_ID="__this",t.ERROR_PIN_ID="__error",t.TRIGGER_PIN_ID="__trigger";t.isExternalConnectionNode=function(e){return e.insId===t.THIS_INS_ID};t.isInternalConnectionNode=function(e){return e.insId!==t.THIS_INS_ID};t.isExternalConnection=function(e){var n=e.from,i=e.to;return t.isExternalConnectionNode(n)||t.isExternalConnectionNode(i)};t.isInternalConnection=function(e){return!t.isExternalConnection(e)};t.externalConnectionNode=function(e){return{insId:t.THIS_INS_ID,pinId:e}};t.connectionNode=function(e,t){return{insId:e,pinId:t}};t.connectionNodeEquals=function(e,t){return e.insId===t.insId&&e.pinId===t.pinId};t.connectionDataEquals=function(e,n){return!(!e||!n)&&(t.connectionNodeEquals(e.from,n.from)&&t.connectionNodeEquals(e.to,n.to))},t.connectionData=function(e,n,i){var r="string"==typeof e?e.split("."):e,o="string"==typeof n?n.split("."):n;if(r.length>2||o.length>2)throw new Error("invalid source or target to connection data - "+e+" / "+n);return{from:2===r.length?t.connectionNode(r[0],r[1]):t.externalConnectionNode(r[0]),to:2===o.length?t.connectionNode(o[0],o[1]):t.externalConnectionNode(o[0]),delayed:i}};t.connection=function(e,t,n){return void 0===n&&(n=!1),{from:e,to:t,delayed:n}}},6485:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)},o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{s(i.next(e))}catch(t){o(t)}}function u(e){try{s(i.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((i=i.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(u){o=[6,u],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.connect=void 0;var u=n(24048),s=n(30385),c=n(45821),d=n(1076);r(n(1076),t);t.connect=function(e,t,n,i,r,l,p){void 0===n&&(n={}),void 0===i&&(i="root"),void 0===r&&(r={bob:new Map}),void 0===l&&(l=c.noop),void 0===p&&(p={});var f=e.id,v=e.connections,m=e.instances,y=f||"connected-part"+c.randomInt(999);return{inputs:e.inputs,outputs:e.outputs,id:y,completionOutputs:e.completionOutputs,reactiveInputs:e.reactiveInputs,fn:function(f,h){var g=[],b=new c.DepGraph({}),I=new Map,C=new Map,_=new Map,P=new Map,x=new Map,O=new Map;m.forEach((function(e){var n=u.getPart(e,t),i=e.id;I.set(e,i),C.set(i,e),b.addNode(i);var r=Object.keys(n.inputs),o=Object.keys(n.outputs),a={},s={};if(r.forEach((function(t){var n=(e.inputConfig||{})[t]||u.queueInputPinConfig();u.isStaticInputPinConfig(n)?a[t]=u.staticPartInput(n.value):a[t]=u.dynamicPartInput({config:n})})),a[d.TRIGGER_PIN_ID]=u.dynamicPartInput({config:u.queueInputPinConfig()}),v.some((function(t){return d.isInternalConnectionNode(t.to)&&t.to.insId===e.id&&t.to.pinId===d.TRIGGER_PIN_ID}))&&e.inputConfig&&e.inputConfig[d.TRIGGER_PIN_ID])throw"Trigger connection can not be configured";o.forEach((function(e){var t=u.dynamicOutput();s[e]=t})),v.some((function(t){return d.isInternalConnectionNode(t.from)&&t.from.insId===e.id&&t.from.pinId===d.ERROR_PIN_ID}))&&(s[d.ERROR_PIN_ID]=u.dynamicOutput()),_.set(i,a),P.set(i,s)}));var E=new Set;return v.forEach((function(n){var i=n.from,r=n.to,s=i.insId,c=i.pinId,l=r.insId,p=r.pinId,f=P.get(s),v=_.get(l);if(d.isInternalConnectionNode(r)&&E.add(r.insId+"."+r.pinId),d.isExternalConnection(n))if(d.isExternalConnectionNode(i)){var m=v[r.pinId];if(!m)throw new Error("Input "+r.pinId+" of instance "+l+" not found");(h=x.get(i.pinId)||[]).push(m),x.set(i.pinId,h)}else{var h,I=f[i.pinId];if(!I)throw new Error("Output "+i.pinId+" of instance "+s+" not found");(h=O.get(r.pinId)||[]).push(I),O.set(r.pinId,h)}else{if(!f)throw new Error("No outputs found for instance ["+s+"]");if(!v)throw C.has(l)?new Error("No inputs found for instance ["+l+"]"):new Error("Instance with id ["+l+"] does not exist!");var j=f[c];if(!j)throw new Error("Output source - ["+i+"] not found in part ["+y+"]");var w=v[p],k=C.get(s);if(!k&&s!==d.THIS_INS_ID)throw new Error("Instance ["+s+"] does not exist! failed to connect ["+i+"] -> ["+r+"]");var S=(k?u.getPart(k,t):e).outputs[c];if(S&&S.delayed||n.delayed||s!==d.THIS_INS_ID&&l!==d.THIS_INS_ID&&b.addDependency(s,l),!w)throw new Error("Target arg - ["+r+"] not found in part ["+y+"]");var T=j.subscribe((function(e){return o(void 0,void 0,void 0,(function(){return a(this,(function(t){if(!u.isDynamicInput(w))throw console.info(w),new Error("Impossible state listening to non dynamic input - "+l+"."+p);return w.subject.next(e),[2]}))}))}));g.push((function(){return T.unsubscribe()}))}})),c.okeys(h).forEach((function(e){(O.get(e)||[]).forEach((function(t){var n=t.subscribe((function(t){return o(void 0,void 0,void 0,(function(){return a(this,(function(n){return h[e].next(t),[2]}))}))}));g.push((function(){return n.unsubscribe()}))}))})),b.overallOrder().map((function(e){return C.get(e)})).forEach((function(e){var o=_.get(e.id),a=P.get(e.id),c=u.getPart(e,t);if(!o)throw new Error("Unexpected error - args not found when running "+e);if(!a)throw new Error("Unexpected error - outputs not found when running "+e);for(var d in o){var f=e.inputConfig[d];E.has(e.id+"."+d)||u.isStaticInputPinConfig(f)||delete o[d]}var v=s.execute({part:c,inputs:o,outputs:a,partsRepo:t,_debugger:n,insId:e.id,extraContext:{},mainState:r,parentInsId:i,onBubbleError:l,env:p});g.push(v)})),Object.keys(f).forEach((function(e){return o(void 0,void 0,void 0,(function(){return a(this,(function(t){return(x.get(e)||[]).forEach((function(t){var n=f[e];if(!u.isDynamicInput(t))throw"todo";c.isDefined(n)&&t.subject.next(n)})),[2]}))}))})),function(){return g.forEach((function(e){try{e()}catch(t){console.error("error unsubscribing",t)}}))}}}}},30385:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{s(i.next(e))}catch(t){o(t)}}function u(e){try{s(i.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((i=i.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(u){o=[6,u],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.execute=t.INPUTS_STATE_SUFFIX=t.INNER_STATE_SUFFIX=void 0;var a=n(71542),u=n(21730),s=n(98739),c=n(24048),d=n(6485),l=n(23939),p=n(45821),f=n(40189),v=n(18265);t.INNER_STATE_SUFFIX="_inner",t.INPUTS_STATE_SUFFIX="_inputs";t.execute=function(e){var n=e.part,m=e.inputs,y=e.outputs,h=e.partsRepo,g=e._debugger,b=void 0===g?{}:g,I=e.insId,C=void 0===I?n.id:I,_=e.extraContext,P=void 0===_?{}:_,x=e.mainState,O=void 0===x?{}:x,E=e.parentInsId,j=void 0===E?"root":E,w=e.onBubbleError,k=void 0===w?a.noop:w,S=e.env,T=void 0===S?{}:S,D=[],N=s(),R=i(i({},P),{ENV:T}),M=v.customRepoToPartRepo(h,R),A=function(e){if(y[d.ERROR_PIN_ID])y[d.ERROR_PIN_ID].next(e);else{var t=e instanceof Error?e:new Error("Raw error: "+e.toString());if(t.message="error in child instance "+C+": "+t.message,t.insId=C,k(t),b.onError){var n=t;n.insId=j+"."+C,b.onError(n)}}},q=function(e){return c.isGroupedPart(e)?d.connect(e,M,b,j+"."+C,O,A,T):c.isCodePart(e)?v.codePartToNative(e,R):e}(n),V=b.onInput||a.noop,L=b.onOutput||a.noop,G={},z={},H=j+"."+C;p.entries(m).forEach((function(e){var t=e[0],n=e[1];if(c.isDynamicInput(n)){var i=c.dynamicPartInput({config:n.config}),a=n.subject.subscribe((function(e){return r(void 0,void 0,void 0,(function(){var n,r;return o(this,(function(o){switch(o.label){case 0:return(n=V({insId:H,pinId:t,val:e,time:Date.now(),partId:q.id,executionId:N}))?[4,n.valuePromise]:[3,2];case 1:return r=o.sent(),i.subject.next(r),[3,5];case 2:return b.debugDelay?[4,p.delay(b.debugDelay)]:[3,4];case 3:o.sent(),o.label=4;case 4:i.subject.next(e),o.label=5;case 5:return[2]}}))}))}));D.push((function(){return a.unsubscribe()})),z[t]=i}else{var u=c.staticPartInput(c.getStaticValue(n.config.value,M,C));z[t]=u}})),p.entries(y).forEach((function(e){var t=e[0],n=e[1],i=c.dynamicOutput(),a=i.subscribe((function(e){return r(void 0,void 0,void 0,(function(){var i,r;return o(this,(function(o){switch(o.label){case 0:return(i=L({insId:H,pinId:t,val:e,time:Date.now(),partId:q.id,executionId:N}))?[4,i.valuePromise]:[3,2];case 1:return r=o.sent(),n.next(r),[3,3];case 2:n.next(e),o.label=3;case 3:return[2]}}))}))}));D.push((function(){return a.unsubscribe()})),G[t]=i}));var B=function(e){var n,r=e.part,o=e.inputs,s=e.outputs,d=e.repo,v=e._debugger,m=e.insId,y=e.parentInsId,h=e.mainState,g=e.onError,b=(e.onBubbleError,e.env),I=r.fn,C=f.debugLogger("core"),_=[],P=v.onProcessing||a.noop,x=v.onInputsStateChange||a.noop,O=(y||"root")+"."+m,E=""+O+t.INNER_STATE_SUFFIX,j=""+O+t.INPUTS_STATE_SUFFIX,w=C.extend(O);h[E]||(h[E]=new Map),h[j]||(h[j]=new Map),h[E];var k,S=h[j],T=function(){var e=Array.from(S.entries()).reduce((function(e,t){var n,r=t[0],a=t[1],u=c.isQueueInputPinConfig(o[r].config,o[r]);return i(i({},e),((n={})[r]=u?null==a?void 0:a.length:1,n))}),{});x({inputs:e,insId:O})},D={execute:function(e,n,i,r){return t.execute({part:e,inputs:n,outputs:i,partsRepo:d,_debugger:v,insId:r})},insId:m,state:h[E],onCleanup:function(e){_.push(e)},onError:function(e){g(e)}},N=!1,R=r.reactiveInputs||[],M=function(){h[E].clear(),p.keys(h).filter((function(e){return e.startsWith(O+".")})).forEach((function(e){h[e]=new Map}))},A=function e(t){var a,d=R.includes(null==t?void 0:t.key);if(N&&!d);else{var f=N&&d;if(l.isPartStateValid(o,S,r,k)||f){var v=void 0;if(N){if(!t)throw new Error("Unexpected state,  got reactive part while not processing and not valid");var m=l.pullValueForExecution(t.key,o[t.key],S,b);v=i(i({},k),((a={})[t.key]=m,a)),T()}else v=l.pullValuesForExecution(o,S,b),k=v,T();var y=new Set;if(r.completionOutputs){P({processing:N=!0,insId:O});var h=new Set(r.completionOutputs);p.entries(s).forEach((function(t){var i=t[0];t[1].pipe(u.first()).subscribe((function(t){y.add(i),Array.from(h.keys()).join(","),Array.from(y.keys()).join(","),h.has(i)&&(P({processing:N=!1,insId:O}),M(),n&&!r.outputs.jsx&&(n(),n=void 0),y.clear(),l.hasNewSignificantValues(o,S,b,r.id)&&e())}))}))}else M();try{w("Running part %s with values %o",r.id,v),n=I(v,s,D)}catch(j){P({processing:N=!1,insId:O}),g(j)}var C=R.find((function(e){return o[e]&&l.peekValueForExecution(e,o[e],S,b,r.id)}));if(C)m=l.peekValueForExecution(C,o[C],S,b,r.id),e({key:C,value:m});else{var _=p.entries(o).find((function(e){var t=e[0],n=e[1],i=c.isQueueInputPinConfig(n.config,n),o=l.peekValueForExecution(t,n,S,b,r.id);if(i)return p.isDefined(o)}));if(_){var x=_[0],E=_[1];m=l.peekValueForExecution(x,E,S,b,r.id),e({key:x,value:m})}}}}};A();var q=l.subscribeInputsToState(o,S,d,m,(function(e,t){C("Got input %s - value is [%o]",e,t),T(),A({key:e,value:t})}));return _.push(q),function(){n&&n(),_.forEach((function(e){return e()}))}}({part:q,inputs:z,outputs:G,repo:M,_debugger:b,insId:C,mainState:O,parentInsId:j,onError:A,onBubbleError:k,env:T});return function(){D.forEach((function(e){return e()})),B()}}},23939:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeInputsToState=t.isPartStateValid=t.hasNewSignificantValues=t.peekValuesForExecution=t.pullValuesForExecution=t.pullValueForExecution=t.peekValueForExecution=void 0;var o=n(24048),a=n(45821),u=n(6485),s=function(e,t){var n=o.extractStaticValue(e);return o.isEnvValue(n)?function(e,t){for(var n=e.split("."),r=i({},t),o=0,u=n;o<u.length;o++){var s=u[o];if(!r||!a.isDefined(r[s])||null===r[s])throw new Error("Cannot find key "+e+" inside obj "+t);r=r[s]}return r}(o.getEnvKeyFromValue(n),t):n};t.peekValueForExecution=function(e,t,n,i,a){var u=n.get(e);if(!t)throw new Error('Trying to peek value of inexsting input in key "'+e+'" in part "'+a+'"');return o.isStaticInput(t)?s(t,i):o.isQueueInputPinConfig(t.config,t)?u?r([],u).shift():void 0:u};t.pullValueForExecution=function(e,t,n,i){var r,a=n.get(e);return o.isStaticInput(t)?r=s(t,i):o.isQueueInputPinConfig(t.config,t)?(r=(a||[]).shift(),n.set(e,a)):(r=a,o.isStickyInputPinConfig(t.config)||n.delete(e)),r};t.pullValuesForExecution=function(e,n,i){return a.entries(e).reduce((function(e,r){var o=r[0],a=r[1];return e[o]=t.pullValueForExecution(o,a,n,i),e}),{})};t.peekValuesForExecution=function(e,n,i,r){return a.entries(e).reduce((function(e,o){var a=o[0],u=o[1];return e[a]=t.peekValueForExecution(a,u,n,i,r),e}),{})};t.hasNewSignificantValues=function(e,n,i,r){return a.entries(e).some((function(e){var u=e[0],s=e[1],c=o.isStaticInput(s),d=t.peekValueForExecution(u,s,n,i,r);return a.isDefined(d)&&!c}))};t.isPartStateValid=function(e,t,n,i){var r=a.keys(e),s=a.keys(n.inputs).filter((function(e){return"required"===n.inputs[e].mode}));return r.includes(u.TRIGGER_PIN_ID)&&s.push(u.TRIGGER_PIN_ID),!!a.containsAll(r,s)&&a.entries(e).filter((function(e){var t=e[0];return!!n.inputs[t]||t===u.TRIGGER_PIN_ID})).every((function(e){var i,r=e[0],u=e[1],s=t.get(r);return"optional"===((null===(i=n.inputs[r])||void 0===i?void 0:i.mode)||"required")||(!!o.isStaticInput(u)||(o.isQueueInputPinConfig(u.config,u)?a.isDefined(s)&&s.length>0:a.isDefined(s)))}))};t.subscribeInputsToState=function(e,t,n,i,r){var u=[];return a.entries(e).forEach((function(e){var n=e[0],i=e[1];if(i&&!o.isStaticInput(i)){var a=i.subject.subscribe((function(e){if(o.isQueueInputPinConfig(i.config,i)){var a=t.get(n)||[];if(!Array.isArray(a))throw new Error("impossible state - state of key "+n+" is set but not an array");a.push(e),t.set(n,a),r(n,e)}else t.set(n,e),r(n,e)}));u.push((function(){return a.unsubscribe()}))}})),function(){return u.forEach((function(e){return e()}))}}},19735:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flydeFlowSchema=void 0;var i=n(89510),r=i.z.strictObject({name:i.z.string(),alias:i.z.string()}),o=i.z.union([i.z.string(),r]),a=i.z.record(i.z.string(),i.z.array(o)),u=i.z.strictObject({x:i.z.number(),y:i.z.number()}),s=i.z.object({fnCode:i.z.string(),templateType:i.z.optional(i.z.string())}),c=i.z.discriminatedUnion("mode",[i.z.strictObject({mode:i.z.literal("static"),value:i.z.any()}),i.z.strictObject({mode:i.z.literal("queue")}),i.z.strictObject({mode:i.z.literal("sticky")})]),d=i.z.object({instances:i.z.array(i.z.strictObject({partId:i.z.string(),pos:u.default({x:0,y:0}),id:i.z.string(),inputConfig:i.z.optional(i.z.record(i.z.string(),c)).default({}),visibleInputs:i.z.optional(i.z.array(i.z.string()))})),connections:i.z.array(i.z.strictObject({from:i.z.strictObject({insId:i.z.string(),pinId:i.z.string()}),to:i.z.strictObject({insId:i.z.string(),pinId:i.z.string()})}))}),l=i.z.object({id:i.z.optional(i.z.string()),inputs:i.z.record(i.z.string(),i.z.union([i.z.string(),i.z.object({mode:i.z.enum(["required","optional","required-if-connected"]),type:i.z.string()})])),outputs:i.z.record(i.z.string(),i.z.union([i.z.string(),i.z.object({type:i.z.string()})])),inputsPosition:i.z.optional(i.z.record(i.z.string(),u)),outputsPosition:i.z.optional(i.z.record(i.z.string(),u)),customViewCode:i.z.optional(i.z.string()),dataBuilderSource:i.z.optional(i.z.string()),templateType:i.z.optional(i.z.string()),completionOutputs:i.z.optional(i.z.array(i.z.string())),reactiveInputs:i.z.optional(i.z.array(i.z.string()))}).and(i.z.union([s,d]));t.flydeFlowSchema=i.z.strictObject({imports:i.z.optional(a).default({}),exports:i.z.optional(i.z.array(i.z.string())).default([]),mainId:i.z.optional(i.z.string()),main:i.z.optional(i.z.any()),parts:i.z.record(i.z.string(),l).default({}),exposedFunctionality:i.z.optional(i.z.array(i.z.strictObject({codeName:i.z.string(),displayName:i.z.string(),inputs:i.z.optional(i.z.array(i.z.string())),path:i.z.string(),line:i.z.string()}))).default([])})},18265:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectType=t.isStaticValueGroupedPart=void 0,r(n(45821),t);var o=n(24048);r(n(6485),t),r(n(30385),t),r(n(24048),t),r(n(90163),t),r(n(51922),t),r(n(67695),t),r(n(55281),t),r(n(75596),t),r(n(19735),t);t.isStaticValueGroupedPart=function(e){return e&&!!o.maybeGetStaticValuePartId(""+e)},function(e){e.WEB_UI="web-ui",e.SERVER="server",e.MOBILE="mobile",e.CLI="cli"}(t.ProjectType||(t.ProjectType={}))},90163:function(e,t,n){"use strict";var i=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.getPartWithDependencies=void 0;var r=n(24048),o=n(18265);t.getPartWithDependencies=function(e,n,a){if(void 0===a&&(a=[]),r.isCodePart(e))return[e];if(a.includes(e.id))return[];var u=o.removeDupes(e.instances.map((function(e){return e.partId})).filter((function(e){return n[e]}))),s=u.map((function(e){return n[e]})).reduce((function(e,r){return i(i([],e),t.getPartWithDependencies(r,n,i(i([],a),u)))}),[]);return i([e],s)}},24048:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.getPartDef=t.getPart=t.getStaticValue=t.maybeGetStaticValuePartId=t.staticPartRefence=t.fromSimplified=t.codePart=t.nativePart=t.groupedPart=t.isCodePart=t.isGroupedPart=t.isNativePart=t.CodePartTemplateTypeInline=void 0;var a=n(45821);o(n(93471),t),o(n(85089),t),o(n(34702),t),function(e){e.VALUE="value",e.FUNCTION="function"}(t.CodePartTemplateTypeInline||(t.CodePartTemplateTypeInline={}));t.isNativePart=function(e){return!t.isGroupedPart(e)};t.isGroupedPart=function(e){return!!e.instances};t.isCodePart=function(e){return a.isDefined(e)&&a.isDefined(e.fnCode)},t.groupedPart=a.testDataCreator({id:"grouped-part",inputs:{},outputs:{},instances:[],connections:[],outputsPosition:{},inputsPosition:{}}),t.nativePart=a.testDataCreator({id:"part",inputs:{},outputs:{},fn:a.noop}),t.codePart=a.testDataCreator({id:"part",inputs:{},outputs:{},fnCode:""});t.fromSimplified=function(e){var t=e.fn,n=e.inputTypes,r=e.outputTypes,o=e.id,u=a.entries(n).reduce((function(e,t){var n,r=t[0],o=t[1];return i(i({},e),((n={})[r]={type:o},n))}),{}),s=a.entries(r).reduce((function(e,t){var n,r=t[0],o=t[1];return i(i({},e),((n={})[r]={type:o},n))}),{});return{id:o,inputs:u,outputs:s,fn:t}};t.staticPartRefence=function(e){return"__part:"+e.id};t.maybeGetStaticValuePartId=function(e){var t="string"==typeof e&&e.match(/^__part\:(.*)/);return t?t[1]:null};t.getStaticValue=function(e,n,i){var r=t.maybeGetStaticValuePartId(e);if(r){var o=n[r];if(!o)throw new Error("Instance "+i+" referrer to a part reference "+r+" that does not exist");return o}return e};t.getPart=function(e,t){var n="string"==typeof e?e:e.partId,i=t[n];if(!i)throw new Error("Part with id "+n+" not found");return i};t.getPartDef=function(e,t){var n="string"==typeof e?e:e.partId,i=t[n];if(!i)throw console.error("Part with id "+n+" not found"),new Error("Part with id "+n+" not found");return i}},93471:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PartInstance=t.partInstance=void 0;t.partInstance=function(e,t,n,i){return{id:e,partId:"string"==typeof t?t:t.id,inputConfig:n||{},pos:i||{x:0,y:0}}};t.PartInstance=function(e,t,n,i){return{id:e,partId:t.id,inputConfig:n||{},pos:i||{x:0,y:0}}}},85089:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEnvKeyFromValue=t.toEnvValue=t.isEnvValue=t.extractStaticValue=t.isStaticInput=t.isDynamicInput=t.staticPartInput=t.dynamicPartInputs=t.dynamicPartInput=t.dynamicOutput=t.partOutputs=t.partOutput=t.partInputs=t.isInputPinOptional=t.partInput=void 0;var i=n(71542),r=n(24048),o=n(45821),a=n(34702);t.partInput=function(e,t){return void 0===e&&(e="any"),void 0===t&&(t="required"),{type:e,mode:t}};t.isInputPinOptional=function(e){return"optional"===e.mode};t.partInputs=function(e,n){return o.repeat(e,(function(e){return t.partInput("any",n[e]||"required")}))};t.partOutput=function(e,t,n){return void 0===e&&(e="any"),void 0===t&&(t=!1),void 0===n&&(n=!1),{type:e,delayed:t,optional:n}};t.partOutputs=function(e){return o.repeat(e,(function(){return t.partOutput("any")}))};t.dynamicOutput=function(){return new i.Subject},t.dynamicPartInput=o.testDataCreator((function(){return{subject:new i.Subject,config:a.queueInputPinConfig()}}));t.dynamicPartInputs=function(e){return void 0===e&&(e=10),o.repeat(e,(function(){return o.testDataCreator((function(){return{subject:new i.Subject,config:a.queueInputPinConfig()}}))()}))};t.staticPartInput=function(e){return{config:a.staticInputPinConfig(e)}};t.isDynamicInput=function(e){var t=e;return t&&t.subject&&!!t.subject.next};t.isStaticInput=function(e){return r.isStaticInputPinConfig(e.config)};t.extractStaticValue=function(e){if(t.isStaticInput(e))return e.config.value;throw new Error("Cannot extract static value from non static arg")};t.isEnvValue=function(e){return"string"==typeof e&&e.startsWith("$ENV.")};t.toEnvValue=function(e){return"$ENV."+e};t.getEnvKeyFromValue=function(e){return"string"==typeof e?e.replace(/^\$ENV\./,""):e}},34702:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isStaticInputPinConfig=t.isStickyInputPinConfig=t.isQueueInputPinConfig=t.staticInputPinConfig=t.stickyInputPinConfig=t.queueInputPinConfig=t.INPUT_MODES=void 0,t.INPUT_MODES=["queue","sticky","static"];t.queueInputPinConfig=function(){return{mode:"queue"}};t.stickyInputPinConfig=function(){return{mode:"sticky"}};t.staticInputPinConfig=function(e){return{mode:"static",value:e}};t.isQueueInputPinConfig=function(e,t){return"queue"===e.mode};t.isStickyInputPinConfig=function(e){return e&&"sticky"===e.mode};t.isStaticInputPinConfig=function(e){return e&&"static"===e.mode}},75596:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},51922:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},55281:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isScheduledTrigger=t.isRestApiTrigger=t.isWebAppTrigger=void 0;t.isWebAppTrigger=function(e){return"web-app"===e.type};t.isRestApiTrigger=function(e){return"rest-api"===e.type};t.isScheduledTrigger=function(e){return"scheduled"===e.type}},23489:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.PartPreview=void 0;var r=n(24246),o=n(18265),a=n(53574);t.PartPreview=function(e){var t=e.part,n={part:t,instance:o.partInstance("bob",t.id,{}),connections:[],connectionsPerInput:{},connectionsPerOutput:{},viewPort:{pos:{x:0,y:0},zoom:1},partDefRepo:{},onDismantleGroup:o.noop,onDoubleClick:o.noop,onDragEnd:o.noop,onDragMove:o.noop,onDragStart:o.noop,onPinClick:o.noop,onPinDblClick:o.noop,onSelect:o.noop,onTogglePinBreakpoint:o.noop,onTogglePinLog:o.noop,onToggleSticky:o.noop,displayMode:!0,onInspectPin:o.noop,onDetachConstValue:o.noop,onCopyConstValue:o.noop,onPasteConstValue:o.noop,onRequestHistory:o.noop,parentInsId:"",onChangeVisibleInputs:o.noop,onChangeVisibleOutputs:o.noop,onConvertConstToEnv:o.noop,forceShowMinimized:"both"};return r.jsx("div",i({className:"part-preview"},{children:r.jsx(a.InstanceView,i({},n),void 0)}),void 0)}},90412:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},u=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FlowEditor=void 0;var c=n(24246),d=a(n(27378)),l=n(18265),p=n(12465),f=n(27234),v=s(n(63300)),m=n(14648),y=n(52395),h=n(99802),g=n(13957),b=n(12901),I=n(99743),C=s(n(98784)),_=n(63213),P=n(52178),x=n(40232),O=n(79927),E=n(47316),j=n(63131),w=n(51424),k=n(88331),S=n(24935),T=["select","drag-move","order-step"];t.FlowEditor=d.memo(d.forwardRef((function(e,t){var n=e.state,r=e.resolvedRepoWithDeps,o=e.onChangeState,a=e.onImportPart,s=d.useState([]),D=s[0],N=s[1],R=d.useState([]),M=R[0],A=R[1],q=n.flow,V=n.boardData,L=n.currentPartId,G=n.flow.parts[L],z=d.useCallback((function(e,t){console.log("onChangeFlow",t.type),"functional"===t.type&&(N(u([{flow:e}],D.slice(0,50))),A([])),o((function(t){return i(i({},t),{flow:e})}))}),[o,D]),H=d.useState({visible:!1,isCode:!1}),B=H[0],U=H[1],F=d.useState({instances:[],connections:[]}),$=F[0],W=F[1],J=d.useState(),Y=J[0],K=J[1],X=d.useState(),Z=X[0],Q=X[1],ee=d.useState(),te=ee[0],ne=ee[1],ie=d.useState(!1),re=ie[0],oe=ie[1],ae=d.useCallback((function(){return oe(!1)}),[]),ue=d.useCallback((function(){return oe(!0)}),[]),se=d.useCallback((function(e){o((function(t){return i(i({},t),{boardData:i(i({},t.boardData),e)})}))}),[o]),ce=d.useCallback((function(e){o((function(t){return i(i({},t),{currentPartId:e.id})}))}),[o]),de=d.useState(),le=de[0],pe=de[1];d.useEffect((function(){se({selected:[],viewPort:p.defaultViewPort,from:void 0,to:void 0,lastMousePos:{x:0,y:0}})}),[G.id]),m.useHotkeys("cmd+z",(function(e){A(u(u([],M),[n]));var t=D[0],r=D.slice(1);t&&(o((function(e){return i(i({},e),t)})),N(r)),e.preventDefault()}),[n,D,M]),m.useHotkeys("a",(function(e){e.preventDefault(),ue()}));var fe=d.useCallback((function(e,t){if(T.some((function(e){return t.message.includes(e)}))||A([]),q.parts[G.id]){var n=v.default(q,(function(t){t.parts[G.id]=e}));z(n,t)}}),[G.id,q,z]),ve=d.useCallback((function(e){var t=l.getPartDef(e,r);if(n.flow.parts[t.id]){if(l.isGroupedPart(t))ce(t);else if(l.isCodePart(t))if(b.isDefined(t.dataBuilderSource))if(b.isDefined(t.templateType))try{var i=atob(t.dataBuilderSource);pe({type:"existing",partId:e,value:i,codeType:t.templateType})}catch(a){x.toastMsg("Error decoding data builder source: "+a.message,"danger")}else try{var o=JSON.parse(atob(t.dataBuilderSource));ne({partId:e,src:o})}catch(a){ne({partId:e,src:t.dataBuilderSource})}else ce(t)}else x.toastMsg("Cannot edit imported part")}),[r,ce,n.flow.parts]),me=d.useCallback((function(e,t,n,i,r){Q({ins:e,pinId:t,pos:i});var o=e.inputConfig[t],a=l.isStaticInputPinConfig(o)?l.maybeGetStaticValuePartId(o&&o.value):null,u=a?q.parts[a]:void 0;if(u&&l.isGroupedPart(u))ce(u);else if(n.includes("part")){var s=y.parseInputOutputTypes(n),c=s.inputs,d=s.outputs,p={id:"HOP_"+e.id+"_"+t,outputsPosition:{},inputsPosition:{},inputs:c,outputs:d,instances:[],connections:[]},f=v.default(q,(function(n){n.parts[p.id]=p;var i=n.parts[G.id];if(!i)throw new Error("trying to edit inexisting part");if(!l.isGroupedPart(i))throw new Error("trying to edit non grouped part");var r=i.instances.find((function(t){return t.id===e.id}));if(!r)throw new Error("trying to edit non exiting instance "+e.id+" in part "+G.id);r.inputConfig[t]=l.staticInputPinConfig(l.staticPartRefence(p))}));z(f,w.functionalChange("add-new-static-part")),ce(p)}else if(r)pe({type:"new-connected",ins:e,pinId:t,pos:e.pos});else{var m=e.inputConfig[t];K({type:n,value:m&&l.isStaticInputPinConfig(m)?m.value:42})}}),[ce,q,z,G.id]),ye=d.useCallback((function(e){pe({pos:e,type:"new"})}),[]),he=d.useCallback((function(){var e=V.selected;if(e.length)if(l.isGroupedPart(G)){var t=f.groupSelected(e,G,r),n=t.newPart,i=t.currentPart,o=v.default(q,(function(e){e.parts[n.id]=n,e.parts[G.id]=i}));z(o,w.functionalChange("group part"))}else console.info("tried to group non grouped part");else console.info("tried to group without selection")}),[V,r,q,z,G]),ge=d.useCallback((function(e,t){if(!Y)throw new Error("impossible state");if(!Z)throw new Error("impossible state");var n=Z.ins,i=Z.pinId,o=h.getConstValuePlaceholders(e);if(o.length){var a=("string"===t?h.createConstStringBuilderPart:h.createConstObjectBuilderPart)({constValue:e,placeholders:o});if(!a)return;if(q.parts[a.id])return void alert("Part with id "+a.id+" already exists");if(!l.isGroupedPart(G))throw new Error("finishing const value on non grouped part - "+G.id);var u=y.createNewPartInstance(a,-150,Z.pos,r),s=v.default(G,(function(e){e.instances.push(u)}));if(n&&i){var c=v.default(s,(function(e){var t=e.instances.find((function(e){return e.id===n.id}));if(!t)throw new Error("Impossible state - no instance "+n.id);delete t.inputConfig[i]})),d=v.default(c,(function(e){e.connections.push({from:{insId:u.id,pinId:"r"},to:{insId:n.id,pinId:i}})})),p=v.default(q,(function(e){e.parts[L]=d,e.parts[a.id]=a}));z(p,w.functionalChange("new value builder part"))}else{p=v.default(q,(function(e){e.parts[G.id]=s,e.parts[a.id]=a}));z(p,w.functionalChange("new value builder part"))}Q(void 0),K(void 0)}else{p=v.default(q,(function(t){var r=t.parts[G.id];if(!r||!l.isGroupedPart(r))throw new Error("impossible");if(n&&i){var o=r.instances.find((function(e){var t=e.id;return n.id===t}));if(!o)throw new Error("cannot find instance "+n.id+" to apply const value changes");o.inputConfig[i]=l.staticInputPinConfig(e),r.connections=r.connections.filter((function(e){return!(e.to.pinId===Z.pinId&&e.to.insId===n.id)}))}else{var a=l.partInstance("const-val-"+I.rnd(9999),"Id",{val:l.staticInputPinConfig(e)},Z.pos);r.instances.push(a)}}));z(p,w.functionalChange("add new const part")),Q(void 0),K(void 0)}}),[Y,Z,q,G,r,z,L]),be=d.useCallback((function(e,t){if(!te)throw new Error("impossible state");var n=q.parts[te.partId];if(!n)throw new Error("impossible state no part "+te.partId+" to finish data builder editing");var i=te.partId,r=h.getConstValuePlaceholders(e),o=("string"===t?h.createConstStringBuilderPart:h.createConstObjectBuilderPart)({constValue:e,placeholders:r},i);if(o.id!==te.partId&&q.parts[o.id])alert("Part with id "+o.id+" already exists");else{var a=l.keys(n.inputs),u=l.keys(o.inputs),s=new Set(C.default.difference(a,u)),c=v.default(q,(function(e){e.parts[i]=o;var t=function(t){var n=e.parts[t];if(n&&l.isGroupedPart(n)){var r=new Set(n.instances.filter((function(e){return e.partId===i})).map((function(e){return e.id})));n.connections=n.connections.filter((function(e){var t=e.to,n=t.insId,i=t.pinId;return!(r.has(n)&&s.has(i))})),e.parts[t]=n}};for(var n in e.parts)t(n)}));z(c,w.functionalChange("edited data builder part")),ne(void 0)}}),[te,q,z]),Ie=function(){return K(void 0)},Ce=function(){return ne(void 0)},_e=d.useCallback((function(e,t){if(!le)throw new Error("Impossible state");var n=t.trim().substr(0,100);if("existing"===le.type){var i=P.createInlineCodePart({code:t,customView:n,partId:le.partId,type:e}),o=q.parts[le.partId];if(!o)throw new Error("Impossible state, no existing part "+le.partId);var a=l.keys(o.inputs),u=l.keys(i.inputs),s=new Set(C.default.difference(a,u)),c=v.default(q,(function(e){e.parts[o.id]=i;var t=function(t){var n=e.parts[t];if(n&&l.isGroupedPart(n)){var i=new Set(n.instances.filter((function(e){return e.partId===o.id})).map((function(e){return e.id})));n.connections=n.connections.filter((function(e){var t=e.to,n=t.insId,r=t.pinId;return!(i.has(n)&&s.has(r))})),e.parts[t]=n}};for(var n in e.parts)t(n)}));z(c,w.functionalChange("edited inline value code part")),x.toastMsg("Inline code part edited"),s.size&&x.toastMsg("Removal of inputs: "+Array.from(s).join(", ")+" detected. Removed matching connections."),pe(void 0)}else{var d=P.createInlineCodePart({code:t,customView:n,type:e});if(q.parts[d.id])return void alert("Part with id "+d.id+" already exists");if(!l.isGroupedPart(G))throw new Error("Impossible state, no grouped part to add inline code part to");var p=y.createNewPartInstance(d,150,le.pos,r),f=v.default(G,(function(e){e.instances.push(p)})),m=l.keys(d.inputs);c=v.default(q,(function(e){if(e.parts[d.id]=d,"new-connected"===le.type){var t=m.includes(le.pinId)?le.pinId:l.TRIGGER_PIN_ID;f.connections.push(l.connectionData(le.ins.id+"."+le.pinId,p.id+"."+t))}e.parts[f.id]=f,x.toastMsg("Inline code part "+d.id+" created")}));z(c,w.functionalChange("new value builder part")),pe(void 0)}}),[le,q,z,G,r]),Pe=d.useCallback((function(e){if(!l.isCodePart(G))throw new Error("Impossible state editing code part while non code part edited");var t=v.default(q,(function(t){t.parts[G.id]=e}));z(t,w.functionalChange("code part change"))}),[G,z,q]),xe=d.useCallback((function(e){U({visible:!0,isCode:"code"===e})}),[]),Oe=d.useCallback((function(e){if(!l.isGroupedPart(G))throw new Error("Impossible state, handling command handler on non grouped part");var t=k.handleCommand(e,{flow:q,boardData:V,currentPartId:G.id});z(t.flow,w.functionalChange(e.type)),se(t.boardData)}),[G,V,q,z,se]),Ee=d.useCallback((function(e,t){void 0===t&&(t=-1*p.PART_HEIGHT*1.5);var n=y.createNewPartInstance(e,t,V.lastMousePos,r);if(n){var i=v.default(q,(function(e){var t=e.parts[G.id];if(!l.isGroupedPart(t))throw new Error("Impossible state, adding part to non grouped part");t.instances.push(n)}));return z(i,w.functionalChange("add-part")),ae(),n}}),[G.id,V.lastMousePos,q,z,ae,r]),je=d.useCallback((function(e){switch(e.type){case S.OmniBarCmdType.ADD:return Ee(e.data);case S.OmniBarCmdType.ADD_VALUE:var t=y.domToViewPort(V.lastMousePos,V.viewPort);return ye(t);case S.OmniBarCmdType.CREATE_CODE_PART:xe("code");break;case S.OmniBarCmdType.CREATE_GROUPED_PART:xe("grouped");break;case S.OmniBarCmdType.IMPORT:a(e.data);break;default:x.AppToaster.show({intent:"warning",message:"Not supported yet"})}ae()}),[V.lastMousePos,V.viewPort,Ee,ae,xe,a,ye]),we=function(e){if(!l.isCodePart(e))throw new Error("WAT");var t=v.default(q,(function(t){t.parts[e.id]=e}));z(t,w.functionalChange("add/edit part")),ce(e),U({visible:!1,isCode:!1})},ke=d.useCallback((function(e){if(0!==l.keys(e.inputs).length||0!==l.keys(e.outputs).length){var t=l.keys(e.inputs).reduce((function(e,t,n){var r;return i(i({},e),((r={})[t]={x:200*n,y:0},r))}),{}),n=l.keys(e.outputs).reduce((function(e,t,n){var r;return i(i({},e),((r={})[t]={x:100+200*n,y:400},r))}),{});if(q.parts[e.id])alert("Part named "+e.id+" already exists");else{var r=i(i({},e),{inputsPosition:t,outputsPosition:n}),o=v.default(q,(function(t){t.parts[e.id]=r}));z(o,w.functionalChange("add part")),ce(r),U({visible:!1,isCode:!1})}}else alert("part must have one input or one output")}),[z,q,ce]);return c.jsxs("div",i({className:"project-editor"},{children:[l.isCodePart(G)?c.jsx(O.CodePartEditor,{part:G,onChange:Pe,editMode:!0},void 0):c.jsxs(d.Fragment,{children:[c.jsx(p.GroupedPartEditor,{insId:"root."+G.id,ref:t,boardData:V,onChangeBoardData:se,part:G,onEditPart:ve,editOrCreateConstValue:me,requestNewConstValue:ye,onGroupSelected:he,onChangePart:fe,repo:r,clipboardData:$,onCopy:W,partIoEditable:!G.id.startsWith("Trigger"),onInspectPin:e.onInspectPin,onRequestHistory:e.onRequestHistory,onNewEnvVar:e.onNewEnvVar,onCreateNewPart:xe,onRequestImportables:e.onQueryImportables,onCommand:Oe,onShowOmnibar:ue},G.id),Y?c.jsx(g.ValueBuilderView,{initialValue:Y.value,onCancel:Ie,onSubmit:ge,env:y.emptyObj,hideTemplatingTips:e.hideTemplatingTips},void 0):null,le?c.jsx(_.InlineCodeModal,{env:y.emptyObj,initialValue:"existing"===le.type?le.value:void 0,initialType:"existing"===le.type?le.codeType:void 0,onCancel:function(){return pe(void 0)},onSubmit:_e},void 0):null,re?c.jsx(S.Omnibar,{flow:q,repo:r,onCommand:je,visible:re,onClose:ae,onRequestImportables:e.onQueryImportables},void 0):null,te?c.jsx(g.ValueBuilderView,{initialValue:te.src,onCancel:Ce,onSubmit:be,hideTemplatingTips:e.hideTemplatingTips,env:y.emptyObj},void 0):null]},void 0),function(){if(B.visible)return B.isCode?c.jsx(E.ManageCodePartView,{externalModule:!1,title:"Add Part",onSave:we,onCancel:function(){return U({visible:!1,isCode:!1})}},void 0):c.jsx(j.ManageGroupedPartView,{externalModule:!1,title:"Add Part",onSave:ke,onCancel:function(){return U({visible:!1,isCode:!1})}},void 0)}()]}),void 0)})))},57779:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BasePartEditor=void 0;var a=n(24246),u=o(n(27378)),s=n(18265),c=n(42272),d=o(n(77324)),l=n(79927),p=o(n(63300)),f=n(18185),v=n(23489),m=f.MultiSelect.ofType();t.BasePartEditor=function(e){var t,n,o=e.part,f=e.onChange,y=s.entries(o.inputs),h=y.filter((function(e){return"required"===e[1].mode})).map((function(e){return e[0]})),g=y.filter((function(e){return"optional"===e[1].mode})).map((function(e){return e[0]})),b=y.filter((function(e){return"required-if-connected"===e[1].mode})).map((function(e){return e[0]})),I=u.default.useState(!1),C=I[0],_=I[1],P=s.okeys(o.outputs),x=u.default.useCallback((function(e){f(i(i({},o),{id:e}))}),[o,f]),O=u.default.useCallback((function(e){var t=e?e.split(","):void 0;"[]"===e&&(t=[]),console.log(e,t),f(i(i({},o),{completionOutputs:t}))}),[o,f]),E=u.default.useCallback((function(e){var t=e?e.split(","):void 0;f(i(i({},o),{reactiveInputs:t}))}),[o,f]),j=u.default.useCallback((function(e,t){var n=p.default(o,(function(n){n.inputs[e]=s.partInput("any",t)}));f(n)}),[o,f]),w=u.default.useCallback((function(e){var t=p.default(o,(function(t){delete t.inputs[e]}));f(t)}),[o,f]),k=u.default.useCallback((function(e){var t=p.default(o,(function(t){t.outputs[e]=s.partOutput("any")}));f(t)}),[o,f]),S=u.default.useCallback((function(e){var t=p.default(o,(function(t){delete t.outputs[e]}));f(t)}),[o,f]),T=u.default.useCallback((function(e){try{var t=JSON.parse(e),n=p.default(o,(function(e){Object.entries(t).forEach((function(t){var n=t[0],r=t[1],o=e.inputs[n],a=e.outputs[n];o?e.inputs[n]=i(i({},o),{type:r}):a&&(e.outputs[n]=i(i({},a),{type:r}))}))}));f(n)}catch(r){console.error("cannot parse")}}),[f,o]),D=r(r([],s.entries(o.inputs)),s.entries(o.outputs)).map((function(e){return[e[0],e[1].type]})).reduce((function(e,t){var n,r=t[0],o=t[1];return i(i({},e),((n={})[r]=o,n))}),{});return a.jsxs("div",i({className:"base-part-editor"},{children:[a.jsx("div",i({className:"form-row"},{children:a.jsx(c.FormGroup,i({label:"Part Name",labelFor:"text-input",labelInfo:"(required)"},{children:a.jsx(c.InputGroup,{id:"part-name",disabled:e.idDisabled,placeholder:"Part ID",value:o.id,onChange:function(e){return x(e.target.value)}},void 0)}),void 0)}),void 0),a.jsx(c.FormGroup,i({label:"Required Inputs"},{children:a.jsx(m,{selectedItems:h,placeholder:"Enter input names here",items:[],tagRenderer:function(e){return e},onItemSelect:function(e){return j(e,"required")},onRemove:w,resetOnSelect:!0,itemRenderer:function(e){return a.jsx("span",{children:e},void 0)},createNewItemFromQuery:function(e){return e},createNewItemRenderer:l.renderCreateIOOption,fill:!0},void 0)}),void 0),!0!==e.hiddenOutputs?a.jsx(c.FormGroup,i({label:"Outputs"},{children:a.jsx(m,{selectedItems:P,placeholder:"Enter output names here",items:[],tagRenderer:function(e){return e},onItemSelect:k,onRemove:S,resetOnSelect:!0,itemRenderer:function(e){return a.jsx("span",{children:e},void 0)},createNewItemFromQuery:function(e){return e},createNewItemRenderer:l.renderCreateIOOption,fill:!0},void 0)}),void 0):null,a.jsx(c.Checkbox,i({checked:C,onChange:function(e){return _(e.target.checked)}},{children:"Show advanced options"}),void 0),a.jsxs(c.Collapse,i({isOpen:C},{children:[a.jsx(c.FormGroup,i({label:"Optional Inputs"},{children:a.jsx(m,{selectedItems:g,placeholder:"Enter input names here",items:[],tagRenderer:function(e){return e},onItemSelect:function(e){return j(e,"optional")},onRemove:w,resetOnSelect:!0,itemRenderer:function(e){return a.jsx("span",{children:e},void 0)},createNewItemFromQuery:function(e){return e},createNewItemRenderer:l.renderCreateIOOption,fill:!0},void 0)}),void 0),a.jsx(c.FormGroup,i({label:"Required-if-connected Inputs"},{children:a.jsx(m,{selectedItems:b,placeholder:"Enter input names here",items:[],tagRenderer:function(e){return e},onItemSelect:function(e){return j(e,"required-if-connected")},onRemove:w,resetOnSelect:!0,itemRenderer:function(e){return a.jsx("span",{children:e},void 0)},createNewItemFromQuery:function(e){return e},createNewItemRenderer:l.renderCreateIOOption,fill:!0},void 0)}),void 0),a.jsx(c.FormGroup,i({label:"Types"},{children:a.jsx(d.default,{height:"100px",theme:"vs-dark",defaultLanguage:"json",value:JSON.stringify(D,null,4),onChange:function(e){return T(e||"")}},void 0)}),void 0),a.jsx(c.FormGroup,i({label:"Completion Outputs"},{children:a.jsx(c.InputGroup,{id:"completion-outputs",placeholder:"completion outputs",value:(null===(t=o.completionOutputs)||void 0===t?void 0:t.join(","))||"",onChange:function(e){return O(e.target.value)}},void 0)}),void 0),a.jsx(c.FormGroup,i({label:"Reactive Inputs"},{children:a.jsx(c.InputGroup,{id:"reactive-inputs",placeholder:"Reactive inputs",value:(null===(n=o.reactiveInputs)||void 0===n?void 0:n.join(","))||"",onChange:function(e){return E(e.target.value)}},void 0)}),void 0)]}),void 0),a.jsx(c.FormGroup,i({label:"Preview"},{children:a.jsx("div",i({className:"preview-wrapper"},{children:a.jsx(v.PartPreview,{part:o},void 0)}),void 0)}),void 0)]}),void 0)}},79927:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CodePartEditor=t.renderCreateIOOption=void 0;var o=n(24246),a=n(42272),u=r(n(27378)),s=r(n(77324)),c=n(57779);t.renderCreateIOOption=function(e,t,n){return o.jsx(a.MenuItem,{icon:"add",text:'Create "'+e+'"',active:t,onClick:n,shouldDismissPopover:!1},void 0)};t.CodePartEditor=function(e){var t=e.part,n=e.onChange,r=u.default.useCallback((function(e){n(i(i({},t),{fnCode:e}))}),[t,n]),d=u.default.useCallback((function(e){n(i(i({},t),{customViewCode:e}))}),[t,n]),l=u.default.useCallback((function(e){n(i(i(i({},t),e),{completionOutputs:e.completionOutputs}))}),[t,n]);return o.jsxs("div",i({className:"code-part-editor"},{children:[o.jsx(c.BasePartEditor,{part:t,onChange:l,idDisabled:e.editMode},void 0),o.jsx(a.FormGroup,i({label:"Code"},{children:o.jsx(s.default,{height:"200px",theme:"vs-dark",defaultLanguage:"javascript",value:t.fnCode,onChange:function(e){return r(e||"")}},void 0)}),void 0),o.jsxs(a.FormGroup,i({label:"Custom View"},{children:[o.jsx(s.default,{height:"100px",theme:"vs-dark",defaultLanguage:"ejs",value:t.customViewCode,onChange:function(e){return d(e||"")}},void 0),o.jsxs(a.Callout,{children:["Example:",o.jsx(a.Code,{children:'<% if (inputs.key) { %>\n              Pick "<%- inputs.key %>"\n              <% }  else { %>\n                Pick\n              <% } %>\n              '},void 0)]},void 0)]}),void 0)]}),void 0)}},88331:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleCommand=t.createEditorCommand=t.handlersMap=void 0;var i=n(63300),r=n(33885);t.handlersMap={"detach-const":r.handleDetachConstEditorCommand,"duplicate-selected":r.handleDuplicateSelectedEditorCommand,"close-connection":r.handleConnectionCloseEditorCommand,"paste-instances":r.handlePasteInstancesEditorCommand};t.createEditorCommand=function(e,t){return{type:e,payload:t}};t.handleCommand=function(e,n){var r=t.handlersMap[e.type];if(!r)throw new Error("no handler for command "+e.type);return i.produce(n,(function(t){return r(e.payload,t)}))}},33885:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.handlePasteInstancesEditorCommand=t.handleDuplicateSelectedEditorCommand=t.handleConnectionCloseEditorCommand=t.handleDetachConstEditorCommand=void 0;var r=n(18265),o=n(96149),a=n(52178);t.handleDetachConstEditorCommand=function(e,t){var n=e.insId,i=e.inputId,o=t.flow.parts[t.currentPartId],u=o.instances.find((function(e){return e.id===n}));if(!u)throw new Error("Impossible state ins id with no matching instance");var s=u.inputConfig[i];if(!s)throw new Error("impossible state detaching const from unexistent config");if(!r.isStaticInputPinConfig(s))throw new Error("impossible state detaching const with no value");var c=s.value,d=a.createInlineCodePart({code:""+c,type:r.CodePartTemplateTypeInline.VALUE});t.flow.parts[d.id]=d;var l=r.partInstance("value-"+r.randomInt(999),d.id,{},{x:u.pos.x,y:u.pos.y-100});if(!o.instances.find((function(e){return e.id===u.id})))throw new Error("impossible state instance not found");u.inputConfig[i]=r.queueInputPinConfig(),o.instances.push(l),o.connections.push(r.connectionData(l.id+".r",u.id+"."+i))};t.handleConnectionCloseEditorCommand=function(e,n){var i=e.from,o=e.to,a=n.flow.parts[n.currentPartId],u=a.instances,s=a.connections.find((function(e){var t=r.connectionNodeEquals(i,e.from),n=r.connectionNodeEquals(o,e.to);return t&&n}));if(s)a.connections=a.connections.filter((function(e){return e!==s}));else{a.connections.push({from:i,to:o});var c=r.isInternalConnectionNode(o)?u.find((function(e){return e.id===o.insId})):null,d=(c?c.inputConfig:{})[o.pinId];r.isStaticInputPinConfig(d)&&t.handleDetachConstEditorCommand({insId:o.insId,inputId:o.pinId},n)}n.boardData.from=void 0,n.boardData.to=void 0};t.handleDuplicateSelectedEditorCommand=function(e,t){var n=e.selected,o=t.flow.parts[t.currentPartId].instances;if(n.length){var u=[];n.forEach((function(e){var n=o.find((function(t){return t.id===e}));if(!n)throw new Error("impossible state duplicate selected no matching instance");var s=t.flow.parts[n.partId],c=n.partId;if(s&&r.isCodePart(s)&&s.templateType){var d=a.createInlineCodePart({code:atob(s.dataBuilderSource),type:s.templateType});t.flow.parts[d.id]=d,c=d.id}if(n){var l=n.pos,p=i(i({},n),{partId:c,pos:{x:l.x+20,y:l.y+20},id:n.id+"-d"+r.randomInt(999)});o.push(p),u.push(p.id)}})),t.boardData.selected=u}};t.handlePasteInstancesEditorCommand=function(e,t){var n,u,s=o.vec(10,10),c=e.instances,d=t.flow.parts[t.currentPartId],l=c.map((function(e){var n=t.flow.parts[e.partId],u=e.partId;if(n&&r.isCodePart(n)&&n.templateType){var c=a.createInlineCodePart({code:atob(n.dataBuilderSource),type:n.templateType});t.flow.parts[c.id]=c,u=c.id}return i(i({},e),{partId:u,pos:o.vAdd(e.pos,s),id:e.id+"-copy"})}));t.boardData.selected=l.map((function(e){return e.id})),(n=d.instances).push.apply(n,l);var p=d.connections.filter((function(e){var t=c.find((function(t){return t.id===e.from.insId})),n=c.find((function(t){return t.id===e.to.insId}));return t&&n})).map((function(e){var t=e.from,n=e.to;return{from:i(i({},t),{insId:t.insId+"-copy"}),to:i(i({},n),{insId:n.insId+"-copy"})}}));(u=d.connections).push.apply(u,p)}},99802:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.createConstObjectBuilderPart=t.createConstStringBuilderPart=t.getConstValuePlaceholders=void 0;var r=n(18265),o=n(18265);t.getConstValuePlaceholders=function(e){var t,n=/\$\{([a-zA-Z \d.]*)\}/g,i=[];do{(t=n.exec(JSON.stringify(e)))&&i.push(t[1])}while(t);return i};t.createConstStringBuilderPart=function(e,t){var n=e.placeholders,a=e.constValue,u=n.reduce((function(e,t){var n;return i(i({},e),((n={})[t]=r.partInput("any","required"),n))}),{}),s=t||"String-builder-"+o.randomInt(99999),c={r:r.partOutput("string")},d='outputs.r.next(compileStringTemplate("'+encodeURIComponent(a)+'", inputs));';return o.codePart({id:s,inputs:u,outputs:c,fnCode:d,customViewCode:a,dataBuilderSource:a,completionOutputs:["r"]})};t.createConstObjectBuilderPart=function(e,t){var n=e.placeholders,a=e.constValue,u=n.reduce((function(e,t){var n;return i(i({},e),((n={})[t]=r.partInput("any","required"),n))}),{}),s=t||"Object-builder-"+o.randomInt(99999),c={r:r.partOutput("object")},d=JSON.stringify(a),l='outputs.r.next(compileObjectTemplate("'+encodeURIComponent(d)+'", inputs));',p=btoa(d);return o.codePart({id:s,inputs:u,outputs:c,fnCode:l,customViewCode:d,dataBuilderSource:p})}},51424:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.metaChange=t.functionalChange=void 0;t.functionalChange=function(e){return{type:"functional",message:e}};t.metaChange=function(e){return void 0===e&&(e="n/a"),{type:"meta",message:e}}},63213:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InlineCodeModal=void 0;var s=n(24246),c=a(n(27378)),d=u(n(77324)),l=n(42272),p=u(n(60042)),f=n(52178),v=n(18265),m=n(28983),y="`Result is ${inputs.a + inputs.b}`";t.InlineCodeModal=c.memo((function(e){var t,n=e.initialValue,r=e.initialType,o=c.useState(v.isDefined(n)?n:y),a=o[0],u=o[1],h=c.useState(r||v.CodePartTemplateTypeInline.VALUE),g=h[0],b=h[1],I=s.jsxs("div",{children:[s.jsxs("p",{children:['You can add variables to by referrencing the "inputs" object.',s.jsx("br",{},void 0)," For example:",s.jsx(l.Code,{children:"`Hello {inputs.name}`"},void 0),' will expose an input pin named "name"']},void 0),s.jsxs("p",{children:["You can also use ternery expressions, arithmetic operators and more!",s.jsx("br",{},void 0),"For example:",s.jsx(l.Code,{children:"inputs.a > inputs.b ? inputs.a + 42 : Math.random() * inputs.b"},void 0)]},void 0)]},void 0),C=s.jsxs("span",{children:["Type in any valid JS value, such as ",s.jsx(l.Code,{children:"true"},void 0),", ",s.jsx(l.Code,{children:"42"},void 0),","," ",s.jsx(l.Code,{children:'["bob", "alice", "dave"]'},void 0),".",s.jsx("br",{},void 0)," Dynamic inputs may also be used"]},void 0),_=s.jsxs("span",{children:["Write any JS code and return a value.",s.jsx("br",{},void 0)," The returned value will be the output.",s.jsx("br",{},void 0)," Example:",s.jsx(l.Code,{children:"const a = inputs.a; const b = inputs.b; return Math.floor(a/b);"},void 0)]},void 0),P=f.getVariables(a);return c.useEffect((function(){a===y&&g===v.CodePartTemplateTypeInline.FUNCTION&&u("return "+y),a==="return "+y&&g===v.CodePartTemplateTypeInline.VALUE&&u(y)}),[a,g]),s.jsxs(l.Dialog,i({isOpen:!0,title:"Inline Value / Code",onClose:e.onCancel,canEscapeKeyClose:!1,className:"inline-code-modal"},{children:[s.jsxs("main",i({className:p.default(l.Classes.DIALOG_BODY),onKeyDown:function(t){"Enter"===t.key&&t.metaKey&&e.onSubmit(g,a)},tabIndex:0},{children:[s.jsxs(l.RadioGroup,i({inline:!0,onChange:function(e){return b(e.target.value)},selectedValue:g},{children:[s.jsx(l.Radio,{labelElement:s.jsxs(c.Fragment,{children:["Value"," ",s.jsx(m.Tooltip2,i({content:C,placement:"top"},{children:s.jsx(l.Icon,{icon:"info-sign",intent:"primary"},void 0)}),void 0)]},void 0),value:v.CodePartTemplateTypeInline.VALUE},void 0),s.jsx(l.Radio,{labelElement:s.jsxs(c.Fragment,{children:["Function"," ",s.jsx(m.Tooltip2,i({content:_,placement:"top"},{children:s.jsx(l.Icon,{icon:"info-sign",intent:"primary"},void 0)}),void 0)]},void 0),value:v.CodePartTemplateTypeInline.FUNCTION},void 0)]}),void 0),s.jsx(d.default,{height:"80px",theme:"vs-dark",defaultLanguage:"javascript",value:a,onChange:function(e){return u(e||"")},onMount:function(e){e&&e.updateOptions({lineNumbers:"off",minimap:{enabled:!1}})}},void 0),(t=a.includes("return"),t&&g===v.CodePartTemplateTypeInline.VALUE?s.jsx(l.Callout,i({intent:l.Intent.WARNING},{children:'When using the "value" type you are not expected to return anything'}),void 0):t||g!==v.CodePartTemplateTypeInline.FUNCTION?null:s.jsxs(l.Callout,i({intent:l.Intent.DANGER},{children:['When using the "function" type you are expected to ',s.jsx(l.Code,{children:"return"},void 0)," a value.",s.jsx("br",{},void 0),"Example: ",s.jsx(l.Code,{children:"return 42 + Date.now();"},void 0)]}),void 0)),s.jsxs(l.Callout,i({intent:l.Intent.NONE},{children:["Input pins detected: ",P.length?P.map((function(e){return s.jsx(l.Code,{children:e},e)})):"None",s.jsx(m.Tooltip2,i({content:I},{children:s.jsx(l.Icon,{icon:"info-sign",intent:l.Intent.PRIMARY},void 0)}),void 0)]}),void 0)]}),void 0),s.jsx("div",i({className:l.Classes.DIALOG_FOOTER},{children:s.jsxs("div",i({className:l.Classes.DIALOG_FOOTER_ACTIONS},{children:[s.jsx(l.Button,i({onClick:e.onCancel},{children:"Cancel"}),void 0),s.jsx(l.Button,i({onClick:function(){return e.onSubmit(g,a)},intent:l.Intent.PRIMARY,className:"save-btn"},{children:"Save"}),void 0)]}),void 0)}),void 0)]}),void 0)}))},52178:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.createInlineCodePart=t.getVariables=void 0;var r=n(18265),o=n(18265);t.getVariables=function(e){return(e.match(/inputs\.([a-zA-Z]\w*)/g)||[]).map((function(e){return e.replace(/inputs\./,"")}))};t.createInlineCodePart=function(e){var n=e.code,a=e.customView,u=e.partId,s=e.type,c=t.getVariables(n).reduce((function(e,t){var n;return i(i({},e),((n={})[t]=r.partInput("any","required"),n))}),{}),d={r:r.partOutput("any")},l=s===r.CodePartTemplateTypeInline.FUNCTION?"const result = (function() { "+n+"}());\n  outputs.r.next(result)":"outputs.r.next(("+n+"))",p=btoa(n);return o.codePart({id:u||"Inline Code "+r.randomInt(99999),inputs:c,outputs:d,fnCode:l,customViewCode:a||n,dataBuilderSource:p,templateType:s,completionOutputs:["r"]})}},47316:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageCodePartView=t.renderCreateIOOption=void 0;var o=n(24246),a=n(42272),u=r(n(60042)),s=r(n(27378)),c=n(79927);t.renderCreateIOOption=function(e,t,n){return o.jsx(a.MenuItem,{icon:"add",text:'Create "'+e+'"',active:t,onClick:n,shouldDismissPopover:!1},void 0)};var d={id:"NewPart",inputs:{},outputs:{},fnCode:"// magic here"};t.ManageCodePartView=function(e){var t=e.title,n=s.default.useState(d),r=n[0],l=n[1];return o.jsx("div",i({className:"manage-code-part-view"},{children:o.jsxs(a.Dialog,i({isOpen:!0,title:t,onClose:e.onCancel,canEscapeKeyClose:!1},{children:[o.jsxs("main",i({className:u.default(a.Classes.DIALOG_BODY)},{children:[o.jsx(c.CodePartEditor,{part:r,onChange:l,editMode:!1},void 0),e.externalModule?o.jsx("strong",{children:"External module, saving is disabled"},void 0):null]}),void 0),o.jsx("div",i({className:a.Classes.DIALOG_FOOTER},{children:o.jsxs("div",i({className:a.Classes.DIALOG_FOOTER_ACTIONS},{children:[o.jsx(a.Button,i({onClick:e.onCancel},{children:"Cancel"}),void 0),o.jsx(a.Button,i({onClick:function(){return e.onSave(r)},intent:a.Intent.PRIMARY,disabled:e.externalModule},{children:"Save"}),void 0)]}),void 0)}),void 0)]}),void 0)}),void 0)}},63131:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageGroupedPartView=t.renderCreateIOOption=void 0;var o=n(24246),a=n(42272),u=r(n(60042)),s=r(n(27378)),c=n(57779);t.renderCreateIOOption=function(e,t,n){return o.jsx(a.MenuItem,{icon:"add",text:'Create "'+e+'"',active:t,onClick:n,shouldDismissPopover:!1},void 0)};var d={id:"NewPart",inputs:{},outputs:{},instances:[],connections:[],inputsPosition:{},outputsPosition:{}};t.ManageGroupedPartView=function(e){var t=e.title,n=s.default.useState(e.initialPart||d),r=n[0],l=n[1],p=s.default.useCallback((function(e){l(i(i({},r),e))}),[r]);return o.jsx("div",i({className:"manage-grouped-part-view"},{children:o.jsxs(a.Dialog,i({isOpen:!0,title:t,onClose:e.onCancel,canEscapeKeyClose:!1},{children:[o.jsxs("main",i({className:u.default(a.Classes.DIALOG_BODY)},{children:[o.jsx(c.BasePartEditor,{part:r,onChange:p,idDisabled:!1},void 0),e.externalModule?o.jsx("strong",{children:"External module, saving is disabled"},void 0):null]}),void 0),o.jsx("div",i({className:a.Classes.DIALOG_FOOTER},{children:o.jsxs("div",i({className:a.Classes.DIALOG_FOOTER_ACTIONS},{children:[o.jsx(a.Button,i({onClick:e.onCancel},{children:"Cancel"}),void 0),o.jsx(a.Button,i({onClick:function(){return e.onSave(r)},intent:a.Intent.PRIMARY,disabled:e.externalModule},{children:"Save"}),void 0)]}),void 0)}),void 0)]}),void 0)}),void 0)}},24935:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},a=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.Omnibar=t.OmniBarCmdType=void 0;var u,s=n(24246),c=o(n(27378)),d=n(18185),l=n(18265),p=n(18265),f=n(42272);!function(e){e.ADD="add",e.ADD_VALUE="add-value",e.CREATE_CODE_PART="create-core-part",e.CREATE_GROUPED_PART="create-grouped-part",e.IMPORT="import"}(u=t.OmniBarCmdType||(t.OmniBarCmdType={}));var v=[{cmd:{type:u.CREATE_GROUPED_PART},title:"Create new grouped part",suggestOnEmpty:!0},{cmd:{type:u.CREATE_CODE_PART},title:"Create new code part",suggestOnEmpty:!0}];t.Omnibar=function(e){var t=e.repo,n=c.useState(""),i=n[0],r=n[1],o=c.useState([]),m=o[0],y=o[1],h=c.useState([]),g=h[0],b=h[1];c.useEffect((function(){var e=l.keys(t).map((function(e){var n=t[e];return{title:"Add - "+n.id,cmd:{type:u.ADD,data:e},extra:p.okeys(n.inputs)+" | "+p.okeys(n.outputs)}})),n=g.map((function(e){return{title:"Add - "+e.part.id,cmd:{type:u.IMPORT,data:e},extra:"(import from "+e.module+")"}})),i={title:"Add inline value or code",suggestOnEmpty:!0,cmd:{type:u.ADD_VALUE}},r=a(a(a(a([],v),n),[i]),e);y(r)}),[t,g]),c.useEffect((function(){e.onRequestImportables&&e.onRequestImportables(i).then((function(e){b(e)}))}),[e,i]);var I=c.useCallback((function(e,t){var n=t.handleClick,i=t.modifiers,r=(t.query,t.index);if(!i.matchesPredicate)return null;var o=""+e.title;return s.jsx(f.MenuItem,{active:i.active,disabled:i.disabled,label:e.extra,onClick:n,text:o},r)}),[]),C=c.useCallback((function(e,t){if(!e)return!!t.suggestOnEmpty;var n=e.toLowerCase().split("").map((function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")+".*"})).join(""),i=new RegExp(n);return!!t.title.toLowerCase().match(i)}),[]),_=c.useCallback((function(t){e.onCommand(t.cmd),e.onClose()}),[e]);return s.jsx(d.Omnibar,{query:i,onQueryChange:r,onClose:e.onClose,noResults:s.jsx(f.MenuItem,{disabled:!0,text:"No results."},void 0),itemPredicate:C,isOpen:e.visible,items:m,initialContent:void 0,onItemSelect:_,itemRenderer:I,inputProps:{placeholder:"Search for parts or commands.."}},void 0)}},13957:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ValueBuilderView=void 0;var s=n(24246),c=n(42272),d=u(n(60042)),l=a(n(27378)),p=u(n(77324)),f=n(18265),v=n(28983),m=function(e,t){switch(t){case"env":return f.getEnvKeyFromValue(e);case"object":return JSON.stringify(e,null,2);default:return e}},y={boolean:!0,string:"",number:42,object:m({name:"Yorai",age:9},"object"),env:""};t.ValueBuilderView=function(e){var t=e.onSubmit,n=e.initialValue,r=l.useState(function(e){var t=typeof e;switch(t){case"string":return f.isEnvValue(e)?"env":"string";case"object":case"number":case"boolean":return t;default:throw new Error("Unsupported data type!")}}(n)),o=r[0],a=r[1],u=m(n,o),h=l.useState(f.isDefined(n)?u:y[o]),g=h[0],b=h[1],I=function(e){e&&e.updateOptions({lineNumbers:"off",minimap:{enabled:!1}})},C=l.default.useCallback((function(){try{var e=function(e,t){switch(t){case"env":return"$ENV."+e;case"object":try{return JSON.parse(e)}catch(n){throw new Error("Invalid object")}default:return e}}(g,o);t(e,o)}catch(n){console.error("Error parsing value: "+n),alert("Something went wrong. Check the console for more info.")}}),[g,o,t]);return s.jsx("div",i({className:"value-builder-view"},{children:s.jsxs(c.Dialog,i({isOpen:!0,title:"Value Builder",onClose:e.onCancel,canEscapeKeyClose:!1,className:"value-builder-view"},{children:[s.jsxs("main",i({className:d.default(c.Classes.DIALOG_BODY),onKeyDown:function(t){"Enter"===t.key&&t.metaKey&&e.onSubmit(g,o)},tabIndex:0},{children:[s.jsxs(c.RadioGroup,i({label:"Data type:",inline:!0,onChange:function(e){var t;(t=e.target.value)!==o&&(a(t),b(y[t]))},selectedValue:o},{children:[s.jsx(c.Radio,{label:"Boolean",value:"boolean"},void 0),s.jsx(c.Radio,{label:"Number",value:"number"},void 0),s.jsx(c.Radio,{label:"String",value:"string"},void 0),s.jsx(c.Radio,{label:"Object",value:"object"},void 0),s.jsx(c.Radio,{label:"Env",value:"env"},void 0)]}),void 0),s.jsx(c.Divider,{},void 0),s.jsx("div",i({className:"value-builder-inner"},{children:function(){switch(o){case"boolean":return s.jsx(c.Checkbox,{checked:g,label:"Value: "+g,onChange:function(e){return b(e.target.checked)}},void 0);case"number":return s.jsx(c.NumericInput,{value:g,onValueChange:b,allowNumericCharactersOnly:!1,autoFocus:!0},void 0);case"string":return s.jsx(c.TextArea,{value:g,onChange:function(e){return b(e.target.value)},growVertically:!0,fill:!0,autoFocus:!0},void 0);case"object":return s.jsx(p.default,{value:g,onChange:function(e){return b(e||"")},theme:"vscode-dark",language:"json",height:"180px",onMount:I},void 0);case"env":if(0===Object.keys(e.env).length)return s.jsx(c.Callout,i({intent:c.Intent.WARNING},{children:"You have no environment variables set up. Use the header menu to set one up"}),void 0);var t=s.jsx(c.Menu,{children:function e(t,n){return void 0===n&&(n=""),Object.keys(t).map((function(r){var o="object"==typeof t[r],a=n+(n?".":"")+r;return s.jsx(c.MenuItem,i({text:r,onClick:function(){return b(a)}},{children:o?e(t[r],a):null}),void 0)}))}(e.env)},void 0);return s.jsxs("div",{children:[s.jsx(v.Popover2,i({content:t},{children:s.jsx(c.Button,{text:g||"Choose ENV variable"},void 0)}),void 0),s.jsx(c.Callout,i({intent:c.Intent.NONE},{children:"Edit environment variable from the header menu"}),void 0)]},void 0);default:return"not yet"}}()}),void 0),function(){if(e.hideTemplatingTips)return null;switch(o){case"string":return s.jsxs("div",i({className:"value-builder-tip"},{children:[s.jsx("br",{},void 0),s.jsxs(c.Callout,i({intent:c.Intent.PRIMARY},{children:["Add variables as ",s.jsx(c.Code,{children:"${thisOne}"},void 0)," or ",s.jsx(c.Code,{children:"${anotherOne}"},void 0)," to create a dynamid value builder."]}),void 0)]}),void 0);case"object":return s.jsxs("div",i({className:"value-builder-tip"},{children:[s.jsx("br",{},void 0),s.jsxs(c.Callout,i({intent:c.Intent.PRIMARY},{children:["Add variables as ",s.jsx(c.Code,{children:"${thisOne}"},void 0)," or ",s.jsx(c.Code,{children:"${anotherOne}"},void 0)," to create a dynamic value builder. To embed a boolean/number/object inside a property, you can use ",s.jsx(c.Code,{children:"$${anObjectHere}"},void 0)]}),void 0)]}),void 0)}}()]}),void 0),s.jsx("div",i({className:c.Classes.DIALOG_FOOTER},{children:s.jsxs("div",i({className:c.Classes.DIALOG_FOOTER_ACTIONS},{children:[s.jsx(c.Button,i({onClick:e.onCancel},{children:"Cancel"}),void 0),s.jsx(c.Button,i({onClick:C,intent:c.Intent.PRIMARY,className:"save-btn"},{children:"Save"}),void 0)]}),void 0)}),void 0)]}),void 0)}),void 0)}},27234:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.groupSelected=void 0;var a=n(18265),u=o(n(63300)),s=n(78504),c=n(52395);t.groupSelected=function(e,t,n){var o=t.instances,d=t.connections,l=o.filter((function(t){return e.includes(t.id)})),p=d.filter((function(t){var n=t.from,i=t.to;return-1!==e.indexOf(n.insId)||-1!==e.indexOf(i.insId)}));if(!l.length)throw new Error("grouped without selections");var f=s.createGroup(l,p,n),v=f.groupedPart,m=f.renamedInputs,y=f.renamedOutputs,h=l.reduce((function(e,t){return c.middlePos(t.pos,e)}),o[0].pos),g=a.partInstance(v.id+"-ins",v,{},h),b=o.filter((function(t){return-1===e.indexOf(t.id)})),I=d.map((function(e){var t=e.from.insId+"."+e.from.pinId,n=e.to.insId+"."+e.to.pinId;return m[n]?i(i({},e),{to:{insId:g.id,pinId:m[n]}}):y[t]?i(i({},e),{from:{insId:g.id,pinId:y[t]}}):e})).filter((function(t){return-1===e.indexOf(t.from.insId)&&-1===e.indexOf(t.to.insId)}));return{newPart:v,currentPart:u.default(t,(function(e){e.instances=r(r([],b),[g]),e.connections=I}))}}},12465:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},u=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{s(i.next(e))}catch(t){o(t)}}function u(e){try{s(i.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((i=i.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(u){o=[6,u],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},c=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GroupedPartEditor=t.defaultViewPort=t.PART_HEIGHT=void 0;var l=n(27378),p=n(24246),f=a(n(27378)),v=n(18265),m=n(53574),y=n(83685),h=n(12901),g=n(52395),b=n(63300),I=n(27378),C=n(14648),_=d(n(54037)),P=n(42272),x=n(20712),O=n(99743),E=n(35683),j=n(18265),w=n(56111),k=n(65883),S=n(14264),T=n(66820),D=n(40232),N=n(51424),R=n(88331),M=n(72419),A=f.memo(P.Slider),q=function(e){return p.jsx("div",{},void 0)};t.PART_HEIGHT=28;var V={x:0,y:0};t.defaultViewPort={pos:{x:0,y:0},zoom:1},t.GroupedPartEditor=f.memo(f.forwardRef((function(e,n){var r=e.onChangePart,o=e.onCommand,a=e.repo,d=e.partIoEditable,L=e.onCopy,G=e.onEditPart,z=e.editOrCreateConstValue,H=e.onGroupSelected,B=e.requestNewConstValue,U=e.onRequestHistory,F=e.onInspectPin,$=e.onNewEnvVar,W=e.boardData,J=e.onChangeBoardData,Y=e.insId,K=e.part,X=e.onShowOmnibar,Z=W.selected,Q=W.from,ee=W.to,te=K.instances,ne=K.connections,ie=K.inputsPosition,re=K.outputsPosition,oe=K.inputs,ae=K.outputs,ue=I.useState(),se=ue[0],ce=ue[1],de=I.useState(),le=de[0],pe=de[1],fe=I.useState(0),ve=fe[0],me=fe[1],ye=I.useState(),he=ye[0],ge=ye[1],be=I.useState(!1),Ie=be[0],Ce=be[1],_e=I.useState(),Pe=_e[0],xe=_e[1],Oe=I.useState(),Ee=Oe[0],je=Oe[1],we=I.useState(),ke=we[0],Se=we[1],Te=W.viewPort,De=f.useCallback((function(e){J({viewPort:e})}),[J]),Ne=f.useCallback((function(e,t,n){return U(Y+"."+e,t,n)}),[U,Y]),Re=f.useCallback((function(e,t,n){return F(Y+"."+e,t,n)}),[F,Y]),Me=f.useCallback((function(e,t){o(R.createEditorCommand("close-connection",{from:e,to:t}))}),[o]);I.useEffect((function(){if(he){var e=setTimeout((function(){ge(void 0)}),350);return function(){return clearTimeout(e)}}}),[he]);var Ae=I.useState(),qe=Ae[0],Ve=Ae[1],Le=M.useScrollBlock();Le.allowScroll,Le.blockScroll;I.useEffect((function(){S.preloadMonaco()}),[]);var Ge=I.useRef(),ze=_.default(Ge),He=f.useRef({x:400,y:400}),Be=Ge.current?Ge.current.getBoundingClientRect():V,Ue=function(){var e=g.fitViewPortToPart(K,a,ze);console.log({vp:e}),g.animatePos(Te.pos,e.pos,10,(function(t){De({pos:t,zoom:e.zoom})}))},Fe=f.useCallback((function(e,t){var n=W.to,i=W.from,r="input"===t?i:n,o="input"===t?n:i,a={pinId:e,insId:v.THIS_INS_ID},u="input"===t?{from:a}:{to:a};r&&r.pinId===e?J({from:void 0,to:void 0}):o?"input"===t&&n?Me(a,n):i&&Me(i,a):J(u)}),[W,J,Me]),$e=f.useCallback((function(e,t,n){var i=W.from,r=W.to;if("input"===n){var o={insId:e.id,pinId:t};!r||r.pinId!==t||v.isInternalConnectionNode(r)&&r.insId!==e.id?Q?Me(Q,o):J({to:o}):J({to:void 0})}else{var a={insId:e.id,pinId:t};!i||i.pinId!==t||v.isInternalConnectionNode(i)&&i.insId!==e.id?ee?Me(a,ee):J({from:a}):J({from:void 0})}}),[W,Q,J,Me,ee]);I.useEffect((function(){if(!Ie&&ze.width){var t=g.fitViewPortToPart(K,a,ze);e.thumbnailMode||De(t);var n=setTimeout((function(){var t=g.fitViewPortToPart(K,a,ze);e.thumbnailMode||De(t),Ce(!0)}),100);return function(){return clearTimeout(n)}}}),[K,ze,e.thumbnailMode,Ie,a,De]);var We=f.useCallback((function(){var e=W.selected,t=K.instances.filter((function(t){return e.includes(t.id)})).map((function(e){return i(i({},e),{id:e.id+"-copy"})})),n=K.connections.filter((function(t){var n=t.from,i=t.to;return e.includes(n.insId)&&e.includes(i.insId)})).map((function(e){var t=e.from,n=e.to;return{from:i(i({},t),{insId:t.insId+"-copy"}),to:i(i({},n),{insId:n.insId+"-copy"})}}));L({instances:t,connections:n})}),[W,L,K]),Je=f.useCallback((function(){o(R.createEditorCommand("paste-instances",{instances:e.clipboardData.instances}))}),[o,e.clipboardData.instances]),Ye=f.useCallback((function(){var e=K.id;qe?"input"===qe.type?qe.ins.id===e?Fe(qe.pin,"input"):$e(qe.ins,qe.pin,"input"):qe.ins.id===e?Fe(qe.pin,"output"):$e(qe.ins,qe.pin,"output"):console.warn("tried selecting closest with no pin nearby")}),[K.id,qe,Fe,$e]);C.useHotkeys("cmd+=",(function(e){De(i(i({},Te),{zoom:Te.zoom+.1})),e.preventDefault()}),[Te]),C.useHotkeys("cmd+-",(function(e){De(i(i({},Te),{zoom:Te.zoom-.1})),e.preventDefault()}),[]),C.useHotkeys("cmd+o",(function(e){e.preventDefault(),D.toastMsg("Ordering");var t=[];w.orderGroupedPart(K,a,200,(function(e,n){n%3==0&&t.push(e)})),u(void 0,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return t.length?(e=t.shift(),D.toastMsg("Step "+t.length+"!"),[4,v.delay(200)]):[3,2];case 1:return n.sent(),r(e,N.metaChange("order-step")),D.toastMsg("Step "+t.length+"! done"),[3,0];case 2:return[2]}}))}))}),[r,K,a]),C.useHotkeys("cmd+0",(function(e){De(i(i({},Te),{zoom:1})),e.preventDefault()}),[Te]);var Ke=function(){J({from:void 0,to:void 0,selected:[]})},Xe=f.useCallback((function(e,t){t.preventDefault(),t.stopPropagation(),ce(e.id),r(i({},K),N.metaChange("drag-start"))}),[r,K]),Ze=f.useCallback((function(e,t,n){var i=g.handleInstanceDrag(K,e,n,t,Z,se),o=i.newValue,a=i.newSelected;r(o,N.metaChange("drag-move")),a&&J({selected:a})}),[se,r,J,Z,K]),Qe=f.useCallback((function(e,t){t.preventDefault(),t.stopPropagation(),ce(void 0)}),[]),et=f.useCallback((function(e,t){t.preventDefault(),t.stopPropagation(),ce(v.THIS_INS_ID)}),[]),tt=f.useCallback((function(t,n,i,r){return u(void 0,void 0,void 0,(function(){var o,a,u;return s(this,(function(s){return i.preventDefault(),i.stopPropagation(),o=r.x,a=r.y,u=b.produce(K,(function(e){"input"===t?e.inputsPosition[n]={x:o,y:a}:e.outputsPosition[n]={x:o,y:a}})),e.onChangePart(u,N.metaChange("part-io-drag-move")),[2]}))}))}),[e,K]),nt=f.useCallback((function(e,t,n,i){return u(void 0,void 0,void 0,(function(){return s(this,(function(e){return n.preventDefault(),n.stopPropagation(),ce(void 0),[2]}))}))}),[]),it=f.useCallback((function(e,t){var n=e.id,i=t.shiftKey?Z.filter((function(e){return e!==n})):[],r=t.shiftKey?c(c([],Z),[n]):[n],o=Z.includes(n)?i:r;J({selected:o,from:void 0,to:void 0})}),[J,Z]),rt=f.useCallback((function(){var e=K.instances.map((function(e){return e.id}));J({selected:e,from:void 0,to:void 0})}),[J,K.instances]),ot=f.useCallback((function(){var e=W.selected,t=K.instances,n=K.connections;if(e.length){var i=n.filter((function(t){var n=t.from,i=t.to;return-1===e.indexOf(n.insId)&&-1===e.indexOf(i.insId)})),o=b.produce(K,(function(n){n.connections=i,n.instances=t.filter((function(t){return!e.includes(t.id)}))}));r(o,N.functionalChange("delete-ins")),J({selected:[]})}}),[W,r,J,K]),at=f.useCallback((function(e,t,n){r(g.toggleStickyPin(K,e.id,t,n),N.functionalChange("toggle-sticky"))}),[r,K]),ut=f.useCallback((function(){o({type:"duplicate-selected",payload:{selected:Z}})}),[o,Z]),st=I.useRef(),ct=I.useRef(),dt=f.useCallback((function(e){var t=e.target;if(0===e.button)if(e.shiftKey)ct.current={x:e.pageX,y:e.pageY},st.current=Te.pos;else if(t&&"board-editor-inner"===t.className){if(Date.now()-ve<300)return void X(e);me(Date.now());var n={x:e.clientX,y:e.clientY};pe({from:n,to:n})}}),[Te.pos,ve,X]),lt=f.useCallback((function(e){if(le){if(g.calcSelectionBoxArea(le)>50){var t=g.getInstancesInRect(le,a,Te,St.current,K.instances,Be),n=e.shiftKey?c(c([],Z),t):t;J({selected:n})}pe(void 0)}ct.current=void 0,st.current=void 0}),[le,a,Te,K.instances,Be,Z,J]),pt=f.useCallback((function(e){var t={x:e.clientX-Be.x,y:e.clientY-Be.y},n={x:e.clientX,y:e.clientY},r=O.vSub(n,Be),o=g.domToViewPort(r,Te);if(le&&pe(i(i({},le),{to:n})),ct.current&&st.current){console.log("changing VP");var u=g.calcMoveViewPort(e,ct.current,st.current,Te);De(u)}var s=g.findClosestPin(K,a,t,ze,Be,Y),c=qe;s&&((!c||c.ins!==s.ins||c.ins===s.ins&&c.pin!==s.pin)&&Ve({ins:s.ins,type:s.type,pin:s.id}));He.current=o,J({lastMousePos:He.current})}),[Be,le,K,a,ze,Y,qe,J,Te,De]),ft=f.useCallback((function(){Ve(void 0),ct.current=void 0,st.current=void 0}),[]),vt=f.useCallback((function(e,t){if(t){var n=a[e.partId];if(!n)throw new Error("Impossible state inspecting inexisting part");if(!v.isGroupedPart(n))return void D.toastMsg("Cannot inspect a non visual part","warning");Se({insId:Y+"."+e.id,part:n})}else G(e.partId)}),[G,a,Y]),mt=f.useCallback((function(e){var t=g.dismantleGroup(K,e,a);r(t,{type:"functional",message:"dismantle group"}),J({selected:[]})}),[K,a,r,J]),yt=f.useCallback((function(e,t){o(R.createEditorCommand("detach-const",{insId:e.id,inputId:t}))}),[o]),ht=f.useCallback((function(e,t){var n=e.inputConfig[t]||j.queueInputPinConfig();v.isStaticInputPinConfig(n)&&(je(n.value),D.AppToaster.show({message:"Value copied"}))}),[]),gt=f.useCallback((function(e,t){var n=b.produce(K,(function(n){var i=n.instances.find((function(t){return t.id===e.id}));if(!i)throw new Error("Impossible state");i.inputConfig[t]=v.staticInputPinConfig(Ee),n.connections=n.connections.filter((function(n){return!v.isInternalConnectionNode(n.to)||!(n.to.insId===e.id&&n.to.pinId===t)}))}));r(n,N.functionalChange("paste const value"))}),[K,r,Ee]),bt=f.useCallback((function(e,t){if(!$)throw new Error("Impossible state");var n=e.inputConfig[t];if(!v.isStaticInputPinConfig(n))throw new Error("Impossible state converting non const input to env var");var i=prompt("Env variable name?","myVar"+v.randomInt(9999));if(i){var o=b.produce(K,(function(n){n.instances.forEach((function(n){e.id===n.id&&(n.inputConfig[t]=v.staticInputPinConfig(v.toEnvValue(i)))}))}));r(o,N.functionalChange("convert const to env")),$(i,n.value)}}),[r,$,K]),It=f.useCallback((function(e){var t=prompt("New name?")||"na",n=prompt("type?")||"any",i=b.produce(K,(function(i){"input"===e?(K.inputs||(i.inputs={}),i.inputs[t]=v.partInput(n),i.inputsPosition[t]=He.current):(K.outputs||(i.outputs={}),i.outputs[t]=v.partOutput(n,!1,!1),i.outputsPosition[t]=He.current)}));r(i,N.functionalChange("add new io pin"))}),[K,r]),Ct=f.useCallback((function(){var e,t=null===(e=K.completionOutputs)||void 0===e?void 0:e.join(","),n=prompt("Edit completion outputs",t);if(h.isDefined(n)&&null!==n){var i=b.produce(K,(function(e){e.completionOutputs=""===n?void 0:n.split(",")}));r(i,N.functionalChange("change part completions"))}}),[r,K]),_t=f.useCallback((function(){var e,t=null===(e=K.reactiveInputs)||void 0===e?void 0:e.join(","),n=prompt("Edit reactive inputs",t);if(h.isDefined(n)&&null!==n){var i=b.produce(K,(function(e){e.reactiveInputs=""===n?void 0:n.split(",")}));r(i,N.functionalChange("change reactive inputs"))}}),[r,K]),Pt=f.useCallback((function(e,t){var n=b.produce(K,(function(n){"input"===e?(delete n.inputs[t],n.connections=n.connections.filter((function(e){return!(v.isExternalConnectionNode(e.from)&&e.from.pinId===t)}))):(n.connections=n.connections.filter((function(e){return!(v.isExternalConnectionNode(e.to)&&e.to.pinId===t)})),delete n.outputs[t])}));r(n,N.functionalChange("remove io pin"))}),[K,r]),xt=f.useCallback((function(e,t){var n=g.handleIoPinRename(K,e,t);r(n,N.functionalChange("rename io pin"))}),[K,r]),Ot=f.useCallback((function(e,t){var n=g.handleChangePartInputType(K,e,t);r(n,N.functionalChange("toggle io pin optional"))}),[K,r]),Et=f.useCallback((function(e,t,n,i){return u(void 0,void 0,void 0,(function(){var r,o,u,d,l,p;return s(this,(function(s){if("input"===n)r=v.getPartDef(e,a),o=r.inputs[t],u=o?o.type:"any",z(e,t,u,He.current);else{if(d=v.getPartDef(e,a),!(l=d.outputs[t]))throw new Error("Dbl clicked on un-existing pin");p=h.values(a).reduce((function(e,t){var n=h.entries(t.inputs).map((function(e){return{pinId:e[0],pinType:e[1].type,part:t,type:"part"}}));return c(c([],e),n)}),[{type:"value"}]),xe({pos:{x:i.clientX,y:i.clientY},matches:p,ins:e,pinId:t,pinType:l.type})}return[2]}))}))}),[a,He,z]),jt=f.useCallback((function(e,t){return u(void 0,void 0,void 0,(function(){var n,i;return s(this,(function(r){if(!(n=K.inputs[e]))throw new Error("Dbl clicked on un-existing pin");return i=h.values(a).reduce((function(e,t){var n=h.entries(t.inputs).map((function(e){return{pinId:e[0],pinType:e[1].type,part:t,type:"part"}}));return c(c([],e),n)}),[{type:"value"}]),xe({pos:{x:t.clientX,y:t.clientY},matches:i,pinId:e,pinType:n.type}),[2]}))}))}),[K,a]),wt=f.useCallback((function(e){if(e.metaKey){var t=-.001*e.deltaY;De(i(i({},Te),{zoom:Te.zoom+t})),e.preventDefault()}}),[De,Te]);I.useEffect((function(){var e=Ge.current;if(e)return e.addEventListener("wheel",wt),function(){e.removeEventListener("wheel",wt)}}),[wt]);var kt={backgroundPositionX:g.roundNumber(-Te.pos.x*Te.zoom),backgroundPositionY:g.roundNumber(-Te.pos.y*Te.zoom),backgroundSize:g.roundNumber(25*Te.zoom)+"px"},St=f.useRef(new Map);f.useEffect((function(){var e=te.reduce((function(e,t){var n=a[t.partId];return n&&e.set(t.id,v.keys(n.inputs)),e}),new Map),t=te.reduce((function(e,t){var n=a[t.partId];return n&&e.set(t.id,v.keys(n.outputs)),e}),new Map),n=ne.filter((function(n){if(v.isExternalConnectionNode(n.from)||v.isExternalConnectionNode(n.to))return!1;if(n.to.pinId===v.TRIGGER_PIN_ID)return!1;var i=e.get(n.to.insId)&&e.get(n.to.insId).includes(n.to.pinId),r=t.get(n.from.insId)&&t.get(n.from.insId).includes(n.from.pinId);return!(i&&r)}));if(n.length>0){D.toastMsg(n.length+" orphan connections removed","warning"),console.log(n.length+" orphan connections removed",n);var i=b.produce(K,(function(e){e.connections=K.connections.filter((function(e){return!n.includes(e)}))}));r(i,N.functionalChange("prune orphan connections"))}}),[te,r,ne,a,K]),I.useEffect((function(){var e=new Map(te.map((function(e){return[e.id,e]})));St.current=ne.reduce((function(t,n){var r,o=t.get(n.to.insId)||{},a=o[n.to.pinId]||[],u=i(i({},o),((r={})[n.to.pinId]=c(c([],a),[e.get(n.from.insId)]),r));return t.set(n.to.insId,u),t}),new Map)}),[ne,te]);var Tt=f.useCallback((function(){xe(void 0)}),[]),Dt=f.useCallback((function(e){if(!Pe)throw new Error("impossible state - quick add menu invoked but not available");var t=Pe.ins,n=Pe.pos,i=Pe.pinId;if("part"===e.type){var o=g.createNewPartInstance(e.part,100,He.current,a);if(o){var u=b.produce(K,(function(n){n.instances.push(o),n.connections.push({from:{insId:t?t.id:v.THIS_INS_ID,pinId:i},to:{insId:o.id,pinId:e.pinId}})}));r(u,N.functionalChange("add-item-quick-menu")),Tt()}}else{if(!t)return void D.toastMsg("Cannot add value to main input");z(t,i,"n/a",n,!0)}}),[Pe,Te,a,K,r,Tt,z]),Nt=f.useCallback((function(){return u(void 0,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return e=JSON.stringify(K),[4,navigator.clipboard.writeText(e)];case 1:return t.sent(),D.AppToaster.show({message:"Copied!"}),[2]}}))}))}),[K]),Rt=f.useCallback((function(e){var t,n,i=d?"":" (cannot edit main part, only grouped)";return p.jsxs(P.Menu,{children:[p.jsx(P.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},label:"New Value",onClick:h.preventDefaultAnd((function(){return B(e)}))},void 0),p.jsx(P.MenuItem,{label:"New input "+i,onMouseDown:function(e){return e.stopPropagation()},onClick:h.preventDefaultAnd((function(){return It("input")})),disabled:!d},void 0),p.jsx(P.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},label:"New output "+i,onClick:h.preventDefaultAnd((function(){return It("output")})),disabled:!d},void 0),p.jsx(P.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},label:"Copy part to clipboard",onClick:h.preventDefaultAnd(Nt)},void 0),p.jsx(P.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},label:"New Value",onClick:h.preventDefaultAnd((function(){return B(e)}))},void 0),p.jsx(P.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},label:"Edit Completion Outputs ("+((null===(t=K.completionOutputs)||void 0===t?void 0:t.join(","))||"n/a")+")",onClick:h.preventDefaultAnd((function(){return Ct()}))},void 0),p.jsx(P.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},label:"Edit Reactive inputs ("+((null===(n=K.reactiveInputs)||void 0===n?void 0:n.join(","))||"n/a")+")",onClick:h.preventDefaultAnd((function(){return _t()}))},void 0)]},void 0)}),[Nt,It,d,B,Ct,K,_t]),Mt=f.useCallback((function(e){e.preventDefault();var t=g.domToViewPort({x:e.clientX,y:e.clientY},Te),n=Rt(t);P.ContextMenu.show(n,{left:e.clientX,top:e.clientY})}),[Rt,Te]),At=f.useCallback((function(e){return De(i(i({},Te),{zoom:e}))}),[De,Te]);C.useHotkeys("shift+c",Ue),C.useHotkeys("cmd+c",We),C.useHotkeys("cmd+v",Je),C.useHotkeys("esc",Ke),C.useHotkeys("backspace",ot),C.useHotkeys("shift+g",H),C.useHotkeys("shift+d",ut),C.useHotkeys("cmd+a",rt),C.useHotkeys("s",Ye);var qt=f.useCallback((function(e,t){"meta"===t.type?Se((function(t){return i(i({},t),{part:e})})):D.toastMsg("Cannot change inspected part")}),[]),Vt=I.useState({selected:[],viewPort:t.defaultViewPort,lastMousePos:{x:0,y:0}}),Lt=Vt[0],Gt=Vt[1],zt=f.useCallback((function(e){return Gt((function(t){return i(i({},t),e)}))}),[]),Ht=function(){if(Q&&("input"===(null==qe?void 0:qe.type)||(null==qe?void 0:qe.ins.id)===K.id&&"output"===(null==qe?void 0:qe.type))){var e=qe.ins.id===K.id?{pinId:qe.pin,insId:v.THIS_INS_ID}:{insId:qe.ins.id,pinId:qe.pin};if(!v.isInternalConnectionNode(e)&&!v.isInternalConnectionNode(Q))return;return{from:Q,to:e}}if(ee&&("output"===(null==qe?void 0:qe.type)||(null==qe?void 0:qe.ins.id)===K.id&&"input"===(null==qe?void 0:qe.type))){var t=qe.ins.id===K.id?{pinId:qe.pin,insId:v.THIS_INS_ID}:{insId:qe.ins.id,pinId:qe.pin};if(!v.isInternalConnectionNode(ee)&&!v.isInternalConnectionNode(t))return;return{from:t,to:ee}}},Bt=f.useCallback((function(e,t){var n=b.produce(K,(function(n){n.instances=n.instances.map((function(n){return n.id===e.id?i(i({},n),{visibleInputs:t}):n}))}));r(n,N.functionalChange("change instance visible inputs"))}),[K,r]),Ut=f.useCallback((function(e,t){var n=b.produce(K,(function(n){n.instances=n.instances.map((function(n){return n.id===e.id?i(i({},n),{visibleOutputs:t}):n}))}));r(n,N.functionalChange("change instance visible outputs"))}),[K,r]);f.useImperativeHandle(n,(function(){return{centerInstance:function(e){var t=K.instances.find((function(t){return t.id===e}));if(t){var n=O.vSub(t.pos,O.vec(ze.width/2,ze.height/2));De(i(i({},Te),{pos:n}))}},centerViewPort:function(){Ue()},getViewPort:function(){return Te},clearSelection:function(){Ke()}}}));var Ft=f.useCallback((function(e,t){var n={visibleInputs:e.visibleInputs,visibleOutputs:e.visibleOutputs,inputConfig:e.inputConfig,displayName:e.displayName},o=b.produce(K,(function(t){t.instances=t.instances.map((function(t){return t.id===e.id?i(i({},t),n):t}))}));r(o,N.functionalChange("change instance config - "+t))}),[r,K]),$t=f.useState([]),Wt=$t[0];$t[1];try{return p.jsxs("div",i({className:"grouped-part-editor","data-id":K.id,onContextMenu:Mt},{children:[p.jsxs("main",i({className:"board-editor-inner",onMouseDown:dt,onMouseUp:lt,onMouseMove:pt,onMouseLeave:ft,ref:Ge,style:kt},{children:[p.jsx(f.Fragment,{children:Wt.map((function(e,t){return l.createElement(k.LayoutDebugger,i({viewPort:Te},e,{key:t}))}))},void 0),ne.filter((function(e){var t=Ht();return!t||!v.connectionDataEquals(t,e)})).map((function(e,t){return p.jsx(y.ConnectionView,{repo:a,parentInsId:Y,size:ze,part:K,boardPos:Be,instances:te,from:e.from,to:e.to,onDblClick:v.noop,viewPort:Te},t)})),function(){var e=Ht();if(e){var t=e.from,n=e.to,i=new Set(ne.map((function(e){return e.from.insId+"|"+e.from.pinId+"|"+e.to.insId+"|"+e.to.pinId}))),r=t.insId+"|"+t.pinId+"|"+n.insId+"|"+n.pinId;return p.jsx(y.ConnectionView,{from:t,to:n,repo:a,parentInsId:Y,size:ze,part:K,boardPos:Be,instances:te,onDblClick:v.noop,future:i.has(r)?"removal":"addition",viewPort:Te},"future-conn")}}(),function(){var e=W.from;return h.entries(oe).map((function(t){var n=t[0],i=t[1];return p.jsx(x.PartIoView,{insId:Y,type:"input",pos:ie[n]||{x:0,y:0},id:n,onDelete:d?Pt:void 0,onRename:d?xt:void 0,onDblClick:jt,closest:!(!qe||"input"!==qe.type||qe.ins.id!==K.id||qe.pin!==n),connected:!1,inputMode:i.mode,onChangeInputMode:Ot,viewPort:Te,onDragStart:et,onDragEnd:nt,onDragMove:tt,pinType:i.type,onSelect:Fe,selected:(null==e?void 0:e.pinId)===n},n)}))}(),te.map((function(t){return p.jsx(m.InstanceView,{onDismantleGroup:mt,onDetachConstValue:yt,onCopyConstValue:ht,onPasteConstValue:gt,copiedConstValue:Ee,connectionsPerInput:St.current.get(t.id)||g.emptyObj,connectionsPerOutput:g.emptyObj,part:v.getPartDef(t,a),parentInsId:Y,onPinClick:$e,onPinDblClick:Et,onDragStart:Xe,onDragEnd:Qe,partDefRepo:a,onDragMove:Ze,onDoubleClick:vt,onSelect:it,onToggleSticky:at,selected:-1!==Z.indexOf(t.id),dragged:se===t.id,onInspectPin:Re,onConvertConstToEnv:e.onNewEnvVar?bt:void 0,selectedInput:ee&&v.isInternalConnectionNode(ee)&&ee.insId===t.id?ee.pinId:void 0,selectedOutput:Q&&v.isInternalConnectionNode(Q)&&Q.insId===t.id?Q.pinId:void 0,closestPin:qe&&qe.ins.id===t.id?qe:void 0,instance:t,connections:ne,onTogglePinBreakpoint:v.noop,onTogglePinLog:v.noop,viewPort:Te,onRequestHistory:Ne,onChangeVisibleInputs:Bt,onChangeVisibleOutputs:Ut,forceShowMinimized:Q?"input":ee?"output":void 0},t.id)})),function(){if(le){var e=le.from,t=le.to,n=g.getSelectionBoxRect(e,t),i=n.x,r=n.y,o=n.w,a=n.h;return p.jsx("div",{className:"selection-box",style:{top:r,left:i,width:o,height:a}},void 0)}return null}(),function(){var e=W.to;return h.entries(ae).map((function(t){var n=t[0],i=t[1];return p.jsx(x.PartIoView,{insId:Y,type:"output",pos:re[n]||{x:0,y:0},id:n,onDelete:d?Pt:void 0,onRename:d?xt:void 0,closest:!(!qe||"output"!==qe.type||qe.ins.id!==K.id||qe.pin!==n),connected:!1,viewPort:Te,onDragStart:et,onDragEnd:nt,onDragMove:tt,pinType:i.type,onSelect:Fe,selected:(null==e?void 0:e.pinId)===n},n)}))}(),Pe?p.jsx(E.QuickAddMenu,i({},Pe,{onAdd:Dt,onClose:Tt}),void 0):null,p.jsx("div",i({className:"zoom-slider"},{children:p.jsx(A,{min:.05,max:3,stepSize:.05,labelStepSize:10,labelRenderer:q,onChange:At,value:Te.zoom},void 0)}),void 0)]}),void 0),ke?p.jsxs("div",i({className:"inspected-part-container"},{children:[p.jsx(P.Button,i({className:"close-btn",onClick:function(){return Se(void 0)}},{children:"Close"}),void 0),p.jsx(t.GroupedPartEditor,{insId:Y+"."+ke.insId,boardData:Lt,onChangeBoardData:zt,repo:a,onCopy:L,clipboardData:e.clipboardData,onInspectPin:e.onInspectPin,onEditPart:e.onEditPart,partIoEditable:e.partIoEditable,requestNewConstValue:e.requestNewConstValue,onGroupSelected:v.noop,onRequestHistory:U,editOrCreateConstValue:e.editOrCreateConstValue,part:ke.part,onChangePart:qt,onNewEnvVar:e.onNewEnvVar,onCreateNewPart:v.noop,onCommand:v.noop,onShowOmnibar:X},void 0)]}),void 0):null,function(){if(1===Z.length){var e=K.instances.find((function(e){return e.id===Z[0]}));if(!e)throw new Error("Selected instance not found");var t=a[e.partId];if(!t)throw new Error("Selected instance part not found");var n=K.connections.filter((function(t){return t.from.insId===e.id||t.to.insId===e.id}));return p.jsx(T.InstancePanel,{instance:e,part:t,connections:n,onChangeInstanceConfig:Ft},void 0)}return null}()]}),void 0)}catch(Jt){return console.error(Jt),p.jsxs("div",{children:["Error rendering board - ",Jt.toString()]},void 0)}})))},84320:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BasePartView=void 0;var s=n(24246),c=a(n(27378)),d=u(n(60042)),l=u(n(48304)),p=n(42272),f=n(65883);t.BasePartView=function(e){var t=e.selected,n=e.dragged,r=e.label,o=e.viewPort,a=e.pos,u=e.onClick,v=e.onDoubleClick,m=e.onDragEnd,y=e.onDragMove,h=e.onDragStart,g=e.displayMode,b=c.useCallback((function(e,t){h(e,t)}),[h]),I=c.useCallback((function(e,t){var n=a,r=(t.x-n.x)/o.zoom,u=(t.y-n.y)/o.zoom,s=n.x+r,c=n.y+u;m(e,i(i({},t),{x:s,y:c}))}),[a,m,o]),C=c.useCallback((function(e,t){y(e,{x:t.x,y:t.y})}),[y]),_={transform:"scale("+o.zoom+")"},P=d.default("base-part-view",e.className,{selected:t,dragged:n,"display-mode":g}),x=a.x*o.zoom-o.pos.x*o.zoom,O=a.y*o.zoom-o.pos.y*o.zoom,E={transform:"translate("+(x-a.x)+"px, "+(O-a.y)+"px)"},j=c.useCallback((function(){return s.jsx(p.Menu,{children:e.contextMenuItems.map((function(e){return s.jsx(p.MenuItem,{onClick:e.callback,label:e.label},e.label)}))},void 0)}),[e.contextMenuItems]),w=c.useCallback((function(e){e.preventDefault(),e.stopPropagation();var t=j();p.ContextMenu.show(t,{left:e.pageX,top:e.pageY})}),[j]),k=e.upperRenderer?e.upperRenderer():null,S=e.bottomRenderer?e.bottomRenderer():null,T=d.default("base-part-view-vp-fixer",{"display-mode":g});return s.jsx("div",i({className:T,style:E},{children:s.jsx(l.default,i({onStop:I,onStart:b,onDrag:C,position:a,cancel:".no-drag"},{children:s.jsxs("span",i({className:"base-part-view-wrapper"},{children:[s.jsx(f.PosDebugger,{pos:a},void 0),s.jsxs("div",i({className:P,style:_,id:e.domId},{children:[k,s.jsx("div",i({className:"base-part-view-inner",onClick:u,onDoubleClick:v,onContextMenu:w},{children:r}),void 0),S]}),void 0)]}),void 0)}),void 0)}),void 0)}},31872:function(e,t){"use strict";var n;function i(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function r(e){var t,r,o=e.pos,a=e.x1,u=e.y1,s=e.x2,c=e.y2,d=e.c;switch(o){case n.Left:t=a-i(a-s,d),r=u;break;case n.Right:t=a+i(s-a,d),r=u;break;case n.Top:t=a,r=u-i(u-c,d);break;case n.Bottom:t=a,r=u+i(c-u,d)}return[t,r]}Object.defineProperty(t,"__esModule",{value:!0}),t.getBezierCenter=t.calcBezierPath=t.Position=void 0,function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(n=t.Position||(t.Position={}));t.calcBezierPath=function(e){var t=e.sourceX,i=e.sourceY,o=e.sourcePosition,a=void 0===o?n.Bottom:o,u=e.targetX,s=e.targetY,c=e.targetPosition,d=void 0===c?n.Top:c,l=e.curvature,p=void 0===l?.25:l,f=r({pos:a,x1:t,y1:i,x2:u,y2:s,c:p}),v=f[0],m=f[1],y=r({pos:d,x1:u,y1:s,x2:t,y2:i,c:p});return"M"+t+","+i+" C"+v+","+m+" "+y[0]+","+y[1]+" "+u+","+s},t.getBezierCenter=function(e){var t=e.sourceX,i=e.sourceY,o=e.sourcePosition,a=void 0===o?n.Bottom:o,u=e.targetX,s=e.targetY,c=e.targetPosition,d=void 0===c?n.Top:c,l=e.curvature,p=void 0===l?.25:l,f=r({pos:a,x1:t,y1:i,x2:u,y2:s,c:p}),v=f[0],m=f[1],y=r({pos:d,x1:u,y1:s,x2:t,y2:i,c:p}),h=.125*t+.375*v+.375*y[0]+.125*u,g=.125*i+.375*m+.375*y[1]+.125*s;return[h,g,Math.abs(h-t),Math.abs(g-i)]}},48199:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcMainOutputPosition=t.calcMainInputPosition=t.calcPinPosition=void 0;var i=n(92548);t.calcPinPosition=function(e,t,n,r,o){var a=document.getElementById(i.getPinDomId(e,t,n,r));if(a){var u=a.getBoundingClientRect(),s=u.x,c=u.y,d=u.width,l=c+u.height/2;return{x:s+d/2-o.x,y:l-o.y}}return{x:99999,y:99999}};t.calcMainInputPosition=function(e,t,n,r,o,a){var u=i.getMainPinDomId(r,n,o),s=document.getElementById(u);if(s){var c=s.getBoundingClientRect(),d=c.x,l=c.y,p=c.width,f=l+c.height/2;return{x:d+p/2-a.x,y:f-a.y}}return console.warn("Cannot find element to draw connection to",u),{x:99999,y:99999}};t.calcMainOutputPosition=function(e,t,n,r,o,a){var u=i.getMainPinDomId(r,n,o),s=document.getElementById(u);if(s){var c=s.getBoundingClientRect(),d=c.x,l=c.y,p=c.width,f=l+c.height/2;return{x:d+p/2-a.x,y:f-a.y}}return console.warn("Cannot find element to draw connection to",u),{x:99999,y:99999}}},83685:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionView=void 0;var s=n(24246),c=a(n(27378)),d=u(n(60042)),l=n(18265),p=n(48199),f=n(31872),v=n(29768);t.ConnectionView=function(e){var t=v.useSsr().isBrowser,n=e.from,r=(e.onDblClick,e.part),o=e.viewPort,a=e.repo,u=e.future,m=e.instances,y=e.to,h=c.useState(0),g=(h[0],h[1]),b=l.isInternalConnectionNode(n)&&m.find((function(e){return e.id===n.insId}));if(!b&&l.isInternalConnectionNode(n))throw new Error('impossible state  - "from instance id - ['+n.insId+'] does not exist"');var I=(l.isInternalConnectionNode(n)&&b?l.getPartDef(b,a):r).outputs[n.pinId],C=I&&I.delayed,_=t?function(e){var t=e.from,n=e.part,i=e.size,r=e.boardPos,o=e.parentInsId;return l.isExternalConnectionNode(t)?p.calcMainInputPosition(n,i,t.pinId,o,"input",r):p.calcPinPosition(o,t.insId,t.pinId,"output",r)}(e):{x:0,y:0},P=_.x,x=_.y,O=t?function(e){var t=e.to,n=e.part,i=e.size,r=e.boardPos,o=e.parentInsId;return l.isExternalConnectionNode(t)?p.calcMainOutputPosition(n,i,t.pinId,o,"output",r):p.calcPinPosition(o,t.insId,t.pinId,"input",r)}(e):{x:0,y:0},E=O.x,j=O.y;c.useEffect((function(){var e=0;return e=function t(n){return requestAnimationFrame((function(){g((function(e){return e+1})),n&&(e=t(n-1))}))}(20),function(){cancelAnimationFrame(e)}}),[P,x,E,j]);var w=d.default("connection",{delayed:C},u?"future-"+u:void 0),k=f.calcBezierPath({sourceX:P,sourceY:x,targetX:E,targetY:j,curvature:.15});return s.jsx("span",i({className:w,style:{opacity:o.zoom},"data-from-id":n.insId+"."+n.pinId,"data-to-id":y.insId+"."+y.pinId},{children:s.jsx("svg",{children:s.jsx("path",{d:k},void 0)},void 0)}),void 0)}},92548:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMainPinDomId=t.getPinDomId=t.getInstanceDomId=void 0;t.getInstanceDomId=function(e,t){return("ins-view-"+e+"."+t).replace(/\s+/g,"-")};t.getPinDomId=function(e,t,n,i){return("pin-"+e+"."+t+"-"+n+"-"+i).replace(/\s+/g,"-")};t.getMainPinDomId=function(e,t,n){return("pin-main-"+e+"-"+t+"-"+n).replace(/\s+/g,"-")}},13844:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InstancePanelInputPinView=void 0;var s=n(24246),c=n(42272),d=n(18265),l=u(n(77324)),p=a(n(27378)),f=n(4287),v={required:"Required","required-if-connected":"Required only if connected",optional:"Optional"},m={static:"Static value",queue:"Dynamic value - queued",sticky:"Dynamic value - sticky"},y=function(e){var t=e.config,n=e.onChangeConfig,i=t.mode,r=p.useCallback((function(e){switch(e.target.value){case"static":n(d.staticInputPinConfig(""));break;case"queue":n(d.queueInputPinConfig());break;case"sticky":n(d.stickyInputPinConfig())}}),[n]),o=d.INPUT_MODES.map((function(e){return{label:m[e],value:e}}));return s.jsx(c.HTMLSelect,{options:o,value:i,onChange:r},void 0)};t.InstancePanelInputPinView=function(e){var t=e.id,n=e.config,r=e.pin,o=e.visible,a=e.onToggleVisible,u=e.onChangeConfig,m=n.mode,h=d.isStaticInputPinConfig(n)?n.value:42,g=p.default.useState(JSON.stringify(h)),b=g[0],I=g[1],C=p.default.useState(!1),_=C[0],P=C[1];p.useEffect((function(){}),[h]),p.useEffect((function(){if("static"===m)try{P(!1)}catch(e){P(!0)}}),[b]);var x=p.useCallback((function(e){a(t,e.target.checked)}),[t,a]),O=p.useCallback((function(e){u(t,e)}),[t,u]),E=f.useDebouncedCallback((function(e){u(t,d.staticInputPinConfig(e))}),400),j=p.useCallback((function(e){I(e||"");try{E(JSON.parse(e||"")),P(!1)}catch(t){P(!0)}}),[E]);if(!r)return s.jsx("div",{children:"Error - No pin"},void 0);var w=v[r.mode||"required"],k="static"!==m&&("required"===r.mode||"required-if-connected"===r.mode&&e.connected&&o);return s.jsxs(c.Card,i({className:"pin-view"},{children:[s.jsxs("h5",i({className:"bp3-heading"},{children:[s.jsx("span",{children:t},void 0)," ",s.jsx("em",{children:s.jsx("small",{children:w},void 0)},void 0)," ",s.jsx(c.Switch,{checked:o,disabled:k,inline:!0,onChange:x,innerLabel:"Hidden",innerLabelChecked:"Visible"},void 0)]}),void 0),s.jsx(c.FormGroup,i({label:"Input mode:",inline:!0},{children:s.jsx(y,{config:n||d.queueInputPinConfig(),onChangeConfig:O},void 0)}),void 0),"static"===m?s.jsxs(p.default.Fragment,{children:[s.jsx(l.default,{height:"80px",theme:"vs-dark",defaultLanguage:"plaintext",value:b,onMount:function(e){e&&e.updateOptions({lineNumbers:"off",minimap:{enabled:!1}})},onChange:j},void 0),_?s.jsx("div",i({className:"error"},{children:"Invalid JSON"}),void 0):null]},void 0):null]}),void 0)}},66820:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},u=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InstancePanel=void 0;var c=n(24246),d=n(18265),l=a(n(27378)),p=n(34026),f=n(77437),v=n(12901),m=n(42272),y=n(53574),h=s(n(63300)),g=n(13844),b=c.jsx("div",{className:"resizer"},void 0);t.InstancePanel=function(e){var t=e.instance,n=e.part,r=e.onChangeInstanceConfig,o=t.inputConfig,a=(t.id,v.keys(n.inputs)),s=f.useUserPref("instance-panel.width",220),I=s[0],C=s[1],_=l.useCallback((function(e,n){var i=h.default(t,(function(t){t.inputConfig[e]=n}));r(i,"Changed "+e+" config")}),[t,r]),P=l.useCallback((function(i,o){var a=h.default(t,(function(r){var a=r.visibleInputs||y.getDefaultVisibleInputs(t,n,e.connections),s=o?u(u([],a),[i]):a.filter((function(e){return e!==i}));r.visibleInputs=d.removeDupes(s)}));r(a,"Changed "+i+" visibility to "+o)}),[t,r,n,e.connections]),x=t.visibleInputs||y.getDefaultVisibleInputs(t,n,e.connections),O=e.connections.some((function(e){return e.to.insId===t.id&&e.to.pinId===d.TRIGGER_PIN_ID})),E=x.includes(d.TRIGGER_PIN_ID),j=l.useCallback((function(e){var n=h.default(t,(function(t){t.visibleInputs=e.target.checked?u(u([],x),[d.TRIGGER_PIN_ID]):x.filter((function(e){return e!==d.TRIGGER_PIN_ID}))}));r(n,"Changed trigger visibility to "+e.target.checked)}),[t,r,x]);return c.jsx("div",i({className:"instance-panel",style:{width:I}},{children:c.jsx("div",i({className:"instance-panel-inner"},{children:c.jsx(p.Resizable,i({width:I,height:0,handle:b,onResize:function(e,t){return C(t.size.width)},axis:"x",resizeHandles:["w"],minConstraints:[0,0],maxConstraints:[800,0]},{children:c.jsxs(l.default.Fragment,{children:[c.jsx("h3",i({className:"bp3-heading"},{children:"Inputs"}),void 0),a.map((function(t){return c.jsx(g.InstancePanelInputPinView,{visible:x.includes(t),id:t,config:o[t]||d.queueInputPinConfig(),pin:n.inputs[t]||d.partInput(),onToggleVisible:P,onChangeConfig:_,connected:e.connections.some((function(e){return e.to.pinId===t}))},t)})),c.jsx(m.Card,{children:c.jsxs("h5",i({className:"bp3-heading"},{children:[c.jsx("span",{children:"Trigger Pin"},void 0)," ",c.jsx(m.Switch,{checked:E,disabled:O&&E,inline:!0,onChange:j,innerLabel:"Hidden",innerLabelChecked:"Visible"},void 0)]}),void 0)},void 0)]},void 0)}),void 0)}),void 0)}),void 0)}},53574:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},u=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{s(i.next(e))}catch(t){o(t)}}function u(e){try{s(i.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((i=i.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(u){o=[6,u],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},c=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceView=t.getDefaultVisibleInputs=t.MAX_INSTANCE_WIDTH=t.MIN_WIDTH_PER_PIN=t.PIECE_CHAR_WIDTH=t.PIECE_HORIZONTAL_PADDING=void 0;var l=n(24246),p=a(n(27378)),f=n(18265),v=d(n(60042)),m=n(11901),y=n(18265),h=n(18265),g=n(42957),b=n(84320),I=n(18265),C=n(98784),_=n(92548),P=n(40232);t.PIECE_HORIZONTAL_PADDING=25,t.PIECE_CHAR_WIDTH=11,t.MIN_WIDTH_PER_PIN=40,t.MAX_INSTANCE_WIDTH=400;t.getDefaultVisibleInputs=function(e,t,n){var i=c(c([],f.keys(t.inputs)),[y.TRIGGER_PIN_ID]).filter((function(i,r){var o,a=n.some((function(t){return t.to.insId===e.id&&t.to.pinId===i})),u=I.isStaticInputPinConfig(e.inputConfig[i]),s=t.inputs[i]&&"required"===(null===(o=t.inputs[i])||void 0===o?void 0:o.mode);return!u&&(s||a)}));return 0===i.length?[y.TRIGGER_PIN_ID]:i};t.InstanceView=function(e){var n=this,r=e.selected,o=e.selectedInput,a=e.selectedOutput,d=e.connectionsPerInput,x=e.connectionsPerOutput,O=e.closestPin,E=e.dragged,j=e.onTogglePinLog,w=e.onTogglePinBreakpoint,k=e.onDetachConstValue,S=e.onCopyConstValue,T=e.onPasteConstValue,D=e.displayMode,N=e.connections,R=e.instance,M=e.viewPort,A=e.part,q=e.partDefRepo,V=e.onPinClick,L=e.onPinDblClick,G=e.onDragStart,z=e.onRequestHistory,H=e.onDragEnd,B=e.onDragMove,U=e.onToggleSticky,F=e.onSelect,$=e.onDoubleClick,W=e.onChangeVisibleInputs,J=e.onChangeVisibleOutputs,Y=e.onConvertConstToEnv,K=R.id,X=h.isNativePart(A),Z=p.useCallback((function(e){return V(R,e,"input")}),[R,V]),Q=p.useCallback((function(e,t){return L(R,e,"input",t)}),[R,L]),ee=p.useCallback((function(e,t){return L(R,e,"output",t)}),[R,L]),te=p.useCallback((function(e){return V(R,e,"output")}),[R,V]),ne=p.useCallback((function(e,t){G(R,e,t)}),[R,G]),ie=p.useCallback((function(e,t){var n=R.pos,r=(t.x-n.x)/M.zoom,o=(t.y-n.y)/M.zoom,a=n.x+r,u=n.y+o;H(R,e,i(i({},t),{x:a,y:u}))}),[R,H,M.zoom]),re=p.useCallback((function(e,t){B(R,e,{x:t.x,y:t.y})}),[R,B]),oe=p.useCallback((function(e){return U(R,e)}),[R,U]),ae=p.useCallback((function(e){return k(R,e)}),[R,k]),ue=p.useCallback((function(e){return S(R,e)}),[R,S]),se=p.useCallback((function(e){return T(R,e)}),[R,T]),ce=p.useCallback((function(e){return F(R,e)}),[R,F]),de=p.useCallback((function(e){return $(R,e.shiftKey)}),[R,$]),le=f.entries(A.inputs),pe=R.visibleInputs,fe=R.visibleOutputs;pe&&le.sort((function(e,t){return pe.indexOf(e[0])-pe.indexOf(t[0])}));var ve=f.entries(A.outputs);fe&&ve.sort((function(e,t){return fe.indexOf(e[0])-fe.indexOf(t[0])}));var me=v.default("ins-view",{selected:r,dragged:E,native:X,closest:O&&O.ins.id===R.id,"no-inputs":0===le.length,"no-outputs":0===ve.length,"display-mode":D,"force-minimized-input":"input"===e.forceShowMinimized||"both"===e.forceShowMinimized,"force-minimized-output":"output"===e.forceShowMinimized||"both"===e.forceShowMinimized}),ye=new Set(N.filter((function(e){return e.to.insId===K})).map((function(e){return e.to.pinId}))),he=new Set(N.filter((function(e){return e.from.insId===K})).map((function(e){return e.from.pinId}))),ge=new Set(f.entries(A.inputs).filter((function(e){e[0];var t=e[1];return y.isInputPinOptional(t)})).map(f.pickFirst)),be=f.entries(R.inputConfig).reduce((function(e,t){var n,r=t[0],o=t[1];return y.isStickyInputPinConfig(o)||o.sticky?i(i({},e),((n={})[r]=!0,n)):e}),{}),Ie=[],Ce=g.calcPartContent(R,A,r||!1,d,x,q),_e=function(e){var t=R.inputConfig[e];if(I.isStaticInputPinConfig(t))return t.value},Pe=he.has(y.ERROR_PIN_ID),xe=p.useState(Pe),Oe=xe[0],Ee=xe[1];Oe&&ve.push([y.ERROR_PIN_ID,y.partOutput("error")]);var je=p.useCallback((function(){var e=f.okeys(A.inputs),t=prompt("New order?",(R.visibleInputs||e).join(","));t&&W(R,t.split(","))}),[R,A.inputs,W]),we=p.useCallback((function(){var e=f.okeys(A.outputs),t=prompt("New order?",(R.visibleOutputs||e).join(","));t&&J(R,t.split(","))}),[R,A.outputs,J]),ke=c(c([{label:Oe?"Hide Error "+(Pe?"(is used, disconnect first)":""):"Show Error Pin",callback:function(){return!Pe&&Ee(!Oe)},disabled:Pe}],h.isGroupedPart(A)?[{label:"Dismantle Group",callback:function(){return e.onDismantleGroup(R)}}]:[]),[{label:"Ins id: "+R.id,callback:C.noop},{label:'Copy part - "'+R.partId+'""',callback:function(){return u(n,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return e=JSON.stringify(A,null,4),[4,navigator.clipboard.writeText(e)];case 1:return t.sent(),P.toastMsg("Copied!"),[2]}}))}))}},{label:"Reorder inputs",callback:je},{label:"Reorder outputs",callback:we}]),Se=p.useCallback((function(e,t){return z(R.id,e,t)}),[R,z]),Te=p.useCallback((function(e){Y&&Y(R,e)}),[R,Y]);le.push([y.TRIGGER_PIN_ID,f.partInput("trigger")]);var De=R.visibleInputs||t.getDefaultVisibleInputs(R,A,N),Ne=le.filter((function(e){var t=e[0];return De.includes(t)})),Re=ve.filter((function(e){var t=e[0];return!Ie.includes(t)}));return l.jsx("div",i({className:me,"data-part-id":A.id},{children:l.jsx(b.BasePartView,{label:Ce,onClick:ce,onDoubleClick:de,selected:r,pos:R.pos,viewPort:M,onDragStart:ne,onDragMove:re,onDragEnd:ie,contextMenuItems:ke,upperRenderer:function(){return l.jsx("div",i({className:"inputs no-drag"},{children:Ne.map((function(t){var n=t[0],i=t[1];return l.jsx(m.PinView,{type:"input",insId:R.id,parentInsId:e.parentInsId,id:n,optional:ge.has(n),connected:ye.has(n),isSticky:be[n],minimized:!r&&1===Ne.length,onToggleSticky:oe,onDetachConstValue:ae,onCopyConstValue:ue,onPasteConstValue:se,copiedConstValue:e.copiedConstValue,selected:n===o,onClick:Z,onDoubleClick:Q,isPart:0===i.type.indexOf("part"),isClosestToMouse:!!O&&"input"===O.type&&O.pin===n,onToggleLogged:j,onToggleBreakpoint:w,onInspect:e.onInspectPin,constValue:_e(n),dataType:i.type,onRequestHistory:Se,onConvertConstToEnv:e.onConvertConstToEnv?Te:void 0},n)}))}),void 0)},bottomRenderer:function(){return l.jsx("div",i({className:"outputs no-drag"},{children:Re.map((function(t){var n=t[0],i=t[1];return l.jsx(m.PinView,{insId:R.id,parentInsId:e.parentInsId,connected:he.has(n),type:"output",id:n,minimized:!r&&1===Re.length,optional:i.optional,isClosestToMouse:!!O&&"output"===O.type&&O.pin===n,selected:n===a,onClick:te,onDoubleClick:ee,onToggleLogged:j,onToggleBreakpoint:w,dataType:i.type,onInspect:e.onInspectPin,onRequestHistory:Se},n)}))}),void 0)},displayMode:D,domId:_.getInstanceDomId(e.parentInsId,R.id)},void 0)}),void 0)}},42957:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.calcInstancePosition=t.calcPartWidth=t.calcPartContent=void 0;var u=n(18265),s=a(n(78284)),c=n(12901),d=n(53574),l=n(98784),p=n(92548);t.calcPartContent=function(e,t,n,r,o,a){if(u.isCodePart(t)&&t.customViewCode)try{var d=Object.entries(e.inputConfig).filter((function(e){var t=e[1];return u.isStaticInputPinConfig(t)})).reduce((function(e,t){var n,r=t[0],o=t[1];return i(i({},e),((n={})[r]=o.value,n))}),{});return s.render(t.customViewCode,{inputs:d,isDefined:c.isDefined}).trim()}catch(l){return console.error("Error with custom view",l),"Error in custom view ["+t.id+"]"}return t.id};t.calcPartWidth=function(e,n,i,r,o,a){var s=u.okeys(n.inputs).length*d.MIN_WIDTH_PER_PIN,c=t.calcPartContent(e,n,i,r,o,a),p=d.PIECE_CHAR_WIDTH;return l.clamp(c.length*p+2*d.PIECE_HORIZONTAL_PADDING,s,d.MAX_INSTANCE_WIDTH)};t.calcInstancePosition=function(e,t,n){var i=p.getInstanceDomId(t,e),r=document.getElementById(i);if(r){var o=r.getBoundingClientRect(),a=o.x,u=o.y,s=o.width,c=u+o.height/2;return{x:a+s/2-n.x,y:c-n.y}}return console.warn("Cannot find element to draw connection to",i),{x:99999,y:99999}}},65883:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutDebugger=t.PosDebugger=void 0;var r=n(24246),o=n(11897);t.PosDebugger=function(e){var t=e.pos,n=t.x,a=t.y;return"true"===o.safeLocalstorage.getItem("debugger")?r.jsxs("span",i({className:"pos-debugger"},{children:[n.toFixed(1),",",a.toFixed(1)]}),void 0):null};t.LayoutDebugger=function(e){var n=e.pos,o=e.viewPort,a=e.size,u=e.color,s=o.zoom,c=n.x*s-o.pos.x*s,d=n.y*s-o.pos.y*s,l={transform:"translate("+(c-n.x)+"px, "+(d-n.y)+"px)"},p={transform:"scale("+o.zoom+")"},f={transform:"translate("+n.x+"px, "+n.y+"px)"},v={width:a.width+"px",height:a.height+"px",backgroundColor:u};return r.jsx("div",i({className:"layout-debugger",style:l},{children:r.jsxs("span",i({className:"drag-sim",style:f},{children:[r.jsx(t.PosDebugger,{pos:n},void 0),r.jsx("div",i({className:"layout-debugger-zoom-wrapper",style:p},{children:r.jsx("div",{className:"layout-debugger-inner",style:v},void 0)}),void 0)]}),void 0)}),void 0)}},56111:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.orderGroupedPart=t.layoutToInstances=void 0;var o=n(12465),a=n(18265),u=n(7979),s=r(n(63300)),c=n(98936),d=n(99743),l=n(42957);t.layoutToInstances=function(e,t){return s.default(t,(function(t){a.entries(e.nodes).forEach((function(e){var n=e[0],i=e[1];if(n.startsWith("ins-")){var r=n.replace("ins-",""),o=t.instances.find((function(e){return e.id===r}));o?o.pos=i.p:console.warn("WAT")}if(n.startsWith("part-input-")){var a=n.replace("part-input-","");t.inputsPosition[a]=i.p}if(n.startsWith("part-output-")){a=n.replace("part-output-","");t.outputsPosition[a]=i.p}}))}))};t.orderGroupedPart=function(e,n,r,s){var p=e.instances,f=e.connections,v=p.reduce((function(e,t){var r,u=d.size(l.calcPartWidth(t,a.getPartDef(t,n),!1,{},{},n),o.PART_HEIGHT);return i(i({},e),((r={})["ins-"+t.id]={p:t.pos,s:u},r))}),{}),m=a.okeys(e.inputsPosition).reduce((function(t,n){var r,a=e.inputsPosition[n],u=d.size(c.calcPartIoWidth(n),o.PART_HEIGHT);return i(i({},t),((r={})["part-input-"+n]={p:a,s:u},r))}),{}),y=a.okeys(e.outputsPosition).reduce((function(t,n){var r,a=e.outputsPosition[n],u=d.size(c.calcPartIoWidth(n),o.PART_HEIGHT);return i(i({},t),((r={})["part-output-"+n]={p:a,s:u},r))}),{}),h=i(i(i({},v),m),y),g=f.map((function(e){return[a.isExternalConnectionNode(e.from)?"part-input-"+e.from.pinId:"ins-"+e.from.insId,a.isExternalConnectionNode(e.to)?"part-output-"+e.to.pinId:"ins-"+e.to.insId]})),b=u.orderLayout({nodes:h,edges:g},r,(function(n,i){s&&s(t.layoutToInstances(n,e),i)}));return t.layoutToInstances(b,e)}},7979:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.orderLayout=void 0;var r=n(99743),o=400,a=function(e){return e.reduce((function(e,t){var n,o=r.vSub(t.p,r.vec(t.s.width/2,t.s.height/2));return i(i({},e),((n={})[t.id]={p:o,s:t.s},n))}),{})};t.orderLayout=function(e,t,n){for(var u=e.nodes,s=e.edges,c=Object.entries(u).map((function(e){var t=e[0],n=e[1];return{id:t,p:r.vAdd(n.p,r.vec(n.s.width/2,n.s.height/2)),f:r.vec(0,0),v:r.vec(0,0),m:1,s:n.s}})),d=0,l=function(){for(var e=c,t=0;t<e.length;t++)for(var u=t+1;u<e.length;u++)if(t!==u){var l=e[t],p=e[u],f=r.vSub(l.p,p.p),v=Math.abs(f.x),m=Math.abs(f.y),y=l.id.startsWith("part-input"),h=l.id.startsWith("part-output"),g=p.id.startsWith("part-input"),b=p.id.startsWith("part-output");if(v<o&&m<80){var I=1e3*(o-v);l.f=r.vAdd(l.f,r.vec(.5*I,0)),p.f=r.vAdd(p.f,r.vec(-.5*I,0))}if(m<50){var C=100*f.y;l.f=r.vAdd(l.f,r.vec(0,.5*C)),p.f=r.vAdd(p.f,r.vec(0,-.5*C))}if(y&&b){var _=r.vSub(l.p,p.p).y;if(_<-500){var P=100*(o-_);l.f=r.vAdd(l.f,r.vec(0,-.5*P)),p.f=r.vAdd(p.f,r.vec(0,.5*P))}}else if(h&&g){var x=r.vSub(l.p,p.p).y;if(x<500){var O=100*(o-x);l.f=r.vAdd(l.f,r.vec(0,-.5*O)),p.f=r.vAdd(p.f,r.vec(0,.5*O))}}var E=r.vSub(l.p,r.vec(0,l.p.y)),j=r.vLen(E),w=r.vMul(r.vNorm(E),-50*j);l.f=r.vAdd(l.f,w)}s.forEach((function(t){var n=e.find((function(e){return e.id===t[0]})),i=e.find((function(e){return e.id===t[1]}));if(n&&i){var o=r.vec(0,-200),a=r.vSub(n.p,i.p),u=r.vSub(o,a),s=1e3*r.vLen(u),c=r.vMul(r.vNorm(u),.5*s),d=r.vMul(r.vNorm(u),-.5*s);n.f=r.vAdd(n.f,c),i.f=r.vAdd(i.f,d)}else console.warn("weoops",t[0],t[1])})),e=(e=e.map((function(e){return r.itrPhysics(15,e)}))).map((function(e){var t=r.vMul(e.v,.5),n=r.vLen(t)>100?r.vMul(r.vNorm(t),100):t;return i(i({},e),{v:n})})),c=e,n&&n({nodes:a(e),edges:s},d),d++};d<t&&(d<2||r.totalEnergy(c)>.01);)l();return{nodes:a(c),edges:s,itrs:d,timeout:d>=t,total:r.totalEnergy(c)}}},8417:function(e,t){"use strict";var n=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.calculateInstancesWithSingleConstPinsMap=t.getLeafInstancesOfSelection=void 0;t.getLeafInstancesOfSelection=function(e,t,i){return e.reduce((function(e,r){var o=i.filter((function(e){return e.to.insId===r.id})).map((function(e){return t.find((function(t){return t.id===e.from.insId}))})).filter((function(e){return!!e}));return n(n([],e),o)}),[]).filter((function(t){return 1===i.filter((function(e){return e.from.insId===t.id||e.to.insId===t.id})).length&&!e.includes(t)}))};t.calculateInstancesWithSingleConstPinsMap=function(e,t){return e.connections.filter((function(e){return t.has(e.from.insId)})).reduce((function(e,n){var i=t.get(n.from.insId),r=n.to.insId,o=e.get(r)||new Map;return o.set(n.to.pinId,{val:i,insId:n.from.insId}),e.set(r,o),e}),new Map)}},20712:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},u=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PartIoView=void 0;var c=n(24246),d=a(n(27378)),l=n(18265),p=n(84320),f=n(92548),v=s(n(60042));t.PartIoView=d.memo((function(e){var t=e.viewPort,n=e.selected,r=e.pos,o=e.type,a=e.id,s=e.onDblClick,m=e.onRename,y=e.onDelete,h=e.onChangeInputMode,g=e.inputMode,b=e.onSelect,I=e.closest,C=d.useCallback((function(){y&&y(o,a)}),[o,a,y]),_=d.useCallback((function(){m&&m(o,a)}),[o,a,m]),P=d.useCallback((function(e){h&&h(a,e)}),[a,h]),x=d.useCallback((function(t){s&&s(e.id,t)}),[s,e.id]),O=d.useCallback((function(){b(a,o)}),[a,o,b]);return c.jsx(p.BasePartView,{className:v.default("part-io-view",o,{closest:I}),domId:f.getMainPinDomId(e.insId,a,o),pos:r,onDragEnd:function(n,r){var u=e.pos,s=(r.x-u.x)/t.zoom,c=(r.y-u.y)/t.zoom,d=u.x+s,l=u.y+c;e.onDragEnd(o,a,n,i(i({},r),{x:d,y:l}))},onDragStart:function(t,n){e.onDragStart(a,t,n)},onDragMove:function(n,r){var u=e.pos,s=(r.x-u.x)/t.zoom,c=(r.y-u.y)/t.zoom,d=u.x+s,l=u.y+c;e.onDragMove(o,a,n,i(i({},r),{x:d,y:l}))},onClick:O,label:a,viewPort:t,contextMenuItems:u(u([{label:"Current mode - "+g,callback:l.noop},{label:"Make required",callback:function(){return P("required")}},{label:"Make optional",callback:function(){return P("optional")}},{label:"Make required-if-connected",callback:function(){return P("required-if-connected")}}],e.onRename?[{label:"Rename",callback:_}]:[]),e.onDelete?[{label:"Delete",callback:C}]:[]),onDoubleClick:x,selected:n},void 0)}))},98936:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcPartIoWidth=t.MIN_WIDTH_PER_PIN=t.PIECE_CHAR_WIDTH=t.PIECE_HORIZONTAL_PADDING=void 0,t.PIECE_HORIZONTAL_PADDING=15,t.PIECE_CHAR_WIDTH=9,t.MIN_WIDTH_PER_PIN=40;t.calcPartIoWidth=function(e){return Math.max(t.MIN_WIDTH_PER_PIN,e.length*t.PIECE_CHAR_WIDTH+2*t.PIECE_HORIZONTAL_PADDING)}},11901:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PinView=t.PIN_HEIGHT=void 0;var s=n(24246),c=a(n(27378)),d=u(n(60042)),l=n(42272),p=n(12901),f=n(27378),v=n(18265),m=n(18265),y=n(92548),h=n(75579),g=u(n(49040));t.PIN_HEIGHT=23;t.PinView=c.memo((function(e){var t=e.selected,n=e.type,r=e.connected,o=e.rotate,a=e.optional,u=e.isClosestToMouse,b=(e.dataType,e.id),I=e.onRequestHistory,C=function(e){switch(e){case v.TRIGGER_PIN_ID:return"Trigger";case m.ERROR_PIN_ID:return"Error";default:return e}}(b),_=f.useState(),P=_[0],x=_[1],O="input"===e.type&&p.isDefined(e.constValue)?e.constValue:void 0,E=o&&"input"===n,j=c.useRef(),w=c.useCallback((function(){clearInterval(j.current),I(b,n).then((function(e){x(e)})),j.current=setInterval((function(){I(b,n).then((function(e){x(e)}))}),500)}),[I,b,n]),k=c.useCallback((function(){clearInterval(j.current),x(void 0)}),[]);return s.jsxs("div",i({className:function(){if("input"===e.type){var i=e.isSticky,s=e.isPart,c=e.constValue;return d.default("pin",{sticky:i,selected:t,closest:u,optional:a,connected:r,rotate:o,"const-value":p.isDefined(c),"env-value":p.isDefined(c)&&v.isEnvValue(c),"is-part":s,minimized:e.minimized},n)}return d.default("pin",{selected:t,connected:r,closest:u,rotate:o,optional:a,minimized:e.minimized},n,o)}(),onContextMenu:function(t){t.preventDefault(),t.stopPropagation();var n=function(){var t=s.jsx(l.MenuItem,{onClick:function(){return e.onToggleLogged(e.insId,e.id,e.type)}},void 0),n=s.jsx(l.MenuItem,{onClick:function(){return e.onToggleBreakpoint(e.insId,e.id,e.type)}},void 0),i=s.jsx(l.MenuItem,{onClick:function(){return e.onInspect(e.insId,e.id,e.type)},text:"Inspect"},void 0);if("input"===e.type){var r=e.onConvertConstToEnv;return p.isDefined(O)?s.jsxs(l.Menu,{children:[s.jsx(l.MenuItem,{onClick:function(){return e.onDetachConstValue(e.id)},text:"Detach value"},void 0),s.jsx(l.MenuItem,{onClick:function(){return e.onCopyConstValue(e.id)},text:"Copy value"},void 0),p.isDefined(e.copiedConstValue)?s.jsx(l.MenuItem,{onClick:function(){return e.onPasteConstValue(e.id)},text:"Paste value"},void 0):null,r?s.jsx(l.MenuItem,{onClick:function(){return r(e.id)},text:"Convert to Env Var"},void 0):null]},void 0):s.jsxs(l.Menu,{children:[s.jsx(l.MenuItem,{onClick:function(){return e.onToggleSticky(e.id)},text:"Toggle sticky (square means sticky)"},void 0),t,n,i,p.isDefined(e.copiedConstValue)?s.jsx(l.MenuItem,{onClick:function(){return e.onPasteConstValue(e.id)},text:"Paste value"},void 0):null]},void 0)}return s.jsxs(l.Menu,{children:[t,n,i]},void 0)}();l.ContextMenu.show(n,{left:t.pageX,top:t.pageY})},"data-pin-id":b},{children:[s.jsx(g.default,{className:"insights-tooltip",html:!0,id:b+e.insId,getContent:[function(e){if(p.isDefined(O))return"<div>"+C+" ("+n+")<div>Const Value: <strong>"+h.valuePreview(O).substr(0,200)+"</strong></div></div>";if(!P)return"<div>Loading..</div>";var t=P.total,i=P.lastSamples,r=i.length>0?"<div>Last value: <strong>"+h.valuePreview(i[0].val).substr(0,200)+"</strong></div>":"";return"<div><div>"+C+" ("+n+") </div>\n    <strong>Activated "+t+" times since last deployment</strong>\n    "+r},25]},void 0),s.jsxs("div",i({onMouseEnter:w,onMouseOut:k,"data-tip":"","data-html":!0,id:y.getPinDomId(e.parentInsId,e.insId,b,n),"data-for":b+e.insId,"data-place":E?"bottom":null,onDoubleClick:function(t){return e.onDoubleClick&&e.onDoubleClick(b,t)},className:"pin-inner",onClick:function(t){var i=e.onShiftClick,r=e.onClick,o=e.id;t.shiftKey&&i?i(o,t):r(o,n,t)}},{children:[p.isDefined(O)?s.jsxs(c.Fragment,{children:[C,": ",s.jsx("span",i({className:"value"},{children:p.toString(O)}),void 0)]},void 0):C,"input"===e.type&&e.isSticky?s.jsx("span",i({className:"suffix"},{children:"s"}),void 0):null,"input"===e.type&&e.queueSize?s.jsxs("span",i({className:"suffix"},{children:[e.queueSize," in Q"]}),void 0):null]}),void 0),s.jsx("div",{className:"wire"},void 0)]}),void 0)}))},35683:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.QuickAddMenu=void 0;var u=n(24246),s=a(n(27378)),c=n(42272),d=n(18185),l=n(10934),p=d.Select.ofType(),f=function(e){return"part"===e.type?e.part.id+" - "+e.pinId+" ("+e.pinType+")":"Add value"},v=function(e,t){var n=t.handleClick,i=t.modifiers,r=t.query;if(!i.matchesPredicate)return null;var o=f(e);return"value"===e.type?u.jsxs(s.Fragment,{children:[u.jsx(c.MenuDivider,{},void 0),u.jsx(c.MenuItem,{active:i.active,disabled:i.disabled,onClick:n,text:l.highlightText(o,r)},f(e))]},void 0):u.jsx(c.MenuItem,{active:i.active,disabled:i.disabled,onClick:n,text:l.highlightText(o,r)},f(e))},m=function(e,t,n,i){var r=f(t).toLocaleLowerCase(),o=e.toLowerCase();return i?r===o:r.includes(o)};t.QuickAddMenu=function(e){var t={left:e.pos.x,top:e.pos.y};return u.jsx("div",i({className:"quick-add-menu",style:t},{children:u.jsx(p,{className:"quick-add-parts-select",items:e.matches,itemPredicate:m,itemRenderer:v,inputProps:{className:"quick-add-input"},noResults:u.jsx(c.MenuItem,{disabled:!0,text:"No results."},void 0),onItemSelect:function(t){return e.onAdd(t)},popoverProps:{isOpen:!0,onClose:function(){return e.onClose()}}},void 0)}),void 0)}},867:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRuntimePlayer=void 0;var i=n(18265),r=n(77159),o=i.debugLogger("runtime-player");t.createRuntimePlayer=function(e){var t=0,n=[],i=!1,a=Date.now(),u=t,s=function s(){return requestAnimationFrame((function(){var c,d,l,p=Date.now();u=t,t+=p-a,a=p,c=u,d=t,l=n,n=[],l.length&&o("Playing "+l.length+" events from",c,d),l.forEach((function(t){o("Playing event",t),r.playEvent(e,t)})),i&&s()}))},c=function(){i=!1},d=function(){n=[],document.querySelectorAll("[data-runtime]").forEach((function(e){e.removeAttribute("data-runtime")})),document.querySelectorAll("[data-runtime-queue]").forEach((function(e){e.removeAttribute("data-runtime-queue")}))};return{stop:c,start:function(e){void 0===e&&(e=0),i=!0,t=e,a=Date.now(),s()},addEvents:function(e){n.push.apply(n,e),n.sort((function(e,t){return e.dt-t.dt}))},destroy:function(){c(),d()},clear:d,status:function(){return{running:i,currDt:t,lastDt:u,queue:n,last:a}}}}},77159:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.playEvent=t.cancelTimers=void 0;var i=n(18265),r=n(75579),o=n(92548),a=2e3,u=i.debugLogger("runtime-player:play-event"),s=function(e){return""+e.id};t.cancelTimers=new Map;t.playEvent=function(e,n){var c,d,l=s(n);switch(n.type){case r.RuntimeEventType.INPUT_CHANGE:case r.RuntimeEventType.OUTPUT_CHANGE:var p=n.id.split(".").reverse(),f=p[0],v=p[1],m=p[2],y=p.slice(3).reverse().join("."),h=o.getPinDomId(y,m,v,f),g=document.getElementById(h),b=m+"."+v,I=n.type===r.RuntimeEventType.OUTPUT_CHANGE?document.querySelectorAll('[data-from-id="'+b+'"]'):[];if(g){clearTimeout(t.cancelTimers.get(l)),g.removeAttribute("data-runtime"),I.forEach((function(e){e.removeAttribute("data-runtime")})),setTimeout((function(){g.setAttribute("data-runtime","active"),I.forEach((function(e){e.setAttribute("data-runtime","active")}))}),0);var C=setTimeout((function(){g.removeAttribute("data-runtime"),I.forEach((function(e){e.removeAttribute("data-runtime")})),t.cancelTimers.delete(l)}),a);t.cancelTimers.set(s(n),C)}else console.warn("No DOM element with Id ["+h+"] found to play event"),u("No DOM element with Id ["+h+"] found to play event",n);break;case r.RuntimeEventType.PROCESSING_CHANGE:var _=n.id.split(".").reverse(),P=(m=_[0],_.slice(1).reverse().join(".")),x=(h=o.getInstanceDomId(P,m),null===(c=document.getElementById(h))||void 0===c?void 0:c.parentElement);if(!x)return void u("No DOM element with Id ["+h+"] found to play event",n);if(!0===n.val)x.setAttribute("data-runtime","processing"),clearTimeout(t.cancelTimers.get(l));else{x.removeAttribute("data-runtime"),setTimeout((function(){x.setAttribute("data-runtime","done")}),0);C=setTimeout((function(){x.removeAttribute("data-runtime"),t.cancelTimers.delete(l)}),a);t.cancelTimers.set(l,C)}break;case r.RuntimeEventType.ERROR:var O=n.id.split(".").reverse(),E=(m=O[0],O.slice(1).reverse().join(".")),j=(h=o.getInstanceDomId(E,m),null===(d=document.getElementById(h))||void 0===d?void 0:d.parentElement);if(!j)return void u("No DOM element with Id ["+h+"] found to play event",n);clearTimeout(t.cancelTimers.get(l)),j.setAttribute("data-runtime","error");C=setTimeout((function(){j.removeAttribute("data-runtime"),t.cancelTimers.delete(l)}),a);t.cancelTimers.set(l,C);break;case r.RuntimeEventType.INPUTS_STATE_CHANGE:i.entries(n.val).forEach((function(e){var t=e[0],i=e[1],r=n.id.split(".").reverse(),a=r[0],s=r.slice(1).reverse().join("."),c=o.getPinDomId(s,a,t,"input"),d=document.getElementById(c);d?i>0?d.setAttribute("data-runtime-queue",""+i):d.removeAttribute("data-runtime-queue"):u("No DOM element with Id ["+c+"] found to play event",n)}))}}},13521:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useDebounce=void 0;var i=n(27378);t.useDebounce=function(e,t){var n=i.useState(e),r=n[0],o=n[1];return i.useEffect((function(){var n=setTimeout((function(){o(e)}),t);return function(){clearTimeout(n)}}),[e,t]),[r,o]}},52395:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},u=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.handleChangePartInputType=t.handleIoPinRename=t.calcMoveViewPort=t.handleInstanceDrag=t.getInstancesInRect=t.dismantleGroup=t.isJsxValue=t.fitViewPortToPart=t.getEffectivePartDimensions=t.calcPartsPositions=t.calcSelectionBoxArea=t.middlePos=t.calcCenter=t.animatePos=t.easeInOutPos=t.easeInOutQuad=t.center=t.distance=t.clamp=t.domToViewPort=t.roundNumber=t.createNewPartInstance=t.parseInputOutputTypes=t.promptConstValue=t.parsePromptValue=t.getSelectionBoxRect=t.findClosestPin=t.toggleStickyPin=t.emptyList=t.emptyObj=void 0;var s=a(n(63300)),c=n(12465),d=n(18265),l=n(48199),p=n(12901),f=n(18265),v=n(42957),m=n(98936),y=n(99743),h=n(8417);t.emptyObj={},t.emptyList=[];t.toggleStickyPin=function(e,t,n,r){return s.produce(e,(function(e){var r=e.instances,o=r.find((function(e){return e.id===t}));if(!o)throw new Error("blah");var a=o.inputConfig||{},u=a[n]||d.queueInputPinConfig();d.isStickyInputPinConfig(u)?a[n]=d.queueInputPinConfig():a[n]=d.stickyInputPinConfig(),e.instances=r.map((function(e){return e===o?i(i({},o),{inputConfig:a}):e}))}))};t.findClosestPin=function(e,t,n,i,r,o){var a=d.partInstance(e.id,e),s=f.okeys(e.inputs).map((function(t){return{id:t,type:"input",pos:l.calcMainInputPosition(e,i,t,o,"input",r),ins:a}})),c=f.okeys(e.outputs).map((function(t){return{id:t,type:"output",pos:l.calcMainOutputPosition(e,i,t,o,"output",r),ins:a}})),p=e.instances.reduce((function(e,n){var i=d.getPartDef(n,t),a=u(u([],f.okeys(i.inputs)),[d.TRIGGER_PIN_ID]),s=u(u([],f.okeys(i.outputs)),[d.ERROR_PIN_ID]),c=a.map((function(e){return{ins:n,type:"input",pos:l.calcPinPosition(o,n.id,e,"input",r),id:e}})),p=s.map((function(e){return{ins:n,type:"output",pos:l.calcPinPosition(o,n.id,e,"output",r),id:e}}));return u(u(u([],e),c),p)}),[]),v=u(u(u([],s),p),c),m={dis:1e5,item:v[0]};return v.forEach((function(e){var t=e.pos.x-n.x,i=e.pos.y-n.y,r=Math.sqrt(t*t+i*i);r<m.dis&&(m.dis=r,m.item=e)})),m.item};t.getSelectionBoxRect=function(e,t){var n=Math.min(e.x,t.x),i=Math.min(e.y,t.y);return{x:n,y:i,w:Math.max(e.x,t.x)-n,h:Math.max(e.y,t.y)-i}};t.parsePromptValue=function(e){if(null!==e){var t=parseInt(e,10),n=e;return t.toString()!=e||isNaN(t)||(n=t),n}};t.promptConstValue=function(e){var n=prompt("value?",e);return t.parsePromptValue(n)};t.parseInputOutputTypes=function(e){var t=e.match(/part\((.+)\|(.+)\)/)||[],n=t[1],i=t[2],r=f.entries(JSON.parse(n)).map((function(e){var t=e[0],n={type:e[1],optional:f.isOptionalType(t)};return[t.replace(/\?$/,""),n]})),o=f.entries(JSON.parse(i)).map((function(e){var t=e[0],n={type:e[1],optional:f.isOptionalType(t)};return[t.replace(/\?$/,""),n]}));return{inputs:f.fromEntries(r),outputs:f.fromEntries(o)}};t.createNewPartInstance=function(e,t,n,r){void 0===t&&(t=-1*c.PART_HEIGHT*1.5);var o="string"==typeof e?r[e]:e;if(!o)throw new Error(e+" part not found in repo");var a=d.partInstance(o.id+"-"+f.randomInt(999),o,{},{x:0,y:0}),u=v.calcPartWidth(a,o,!1,{},{},r),s={x:n.x-u/2,y:n.y+t};return i(i({},a),{pos:s})};t.roundNumber=function(e){return Math.round(100*e)/100};t.domToViewPort=function(e,n){return{x:t.roundNumber(n.pos.x+e.x/n.zoom),y:t.roundNumber(n.pos.y+e.y/n.zoom)}};t.clamp=function(e,t,n){return Math.max(e,Math.min(t,n))};t.distance=function(e,t){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)};t.center=function(e,t,n){var i=n.zoom,r=e.x+e.w/2,o=e.y+e.h/2;return{x:r-t.w/i/2,y:o-t.h/i/2}};t.easeInOutQuad=function(e){return e<.5?2*e*e:(4-2*e)*e-1};t.easeInOutPos=function(e,n,i,r,o){var a=t.clamp(0,1,(o-i)/r),u=t.easeInOutQuad(a),s=n.x-e.x,c=n.y-e.y;return{x:e.x+s*u,y:e.y+c*u}};t.animatePos=function(e,n,i,r){var o=t.distance(e,n),a=Date.now(),u=Math.sqrt(o)*i;if(0!==o){requestAnimationFrame((function i(){var o=Date.now(),s=t.easeInOutPos(e,n,a,u,o);o-a<u?(r(s),requestAnimationFrame(i)):(r(s),setTimeout((function(){r(s)}),10))}))}else r(e)};t.calcCenter=function(e){var t=e.w,n=e.h;return{x:e.x+t/2,y:e.y+n/2}};t.middlePos=function(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}};t.calcSelectionBoxArea=function(e){var n=t.getSelectionBoxRect(e.from,e.to);return n.h*n.w};var g=function(e,n,r,o){return{left:r.x,right:r.x+e,top:r.y,bottom:r.y+n,tag:o,center:t.calcCenter(i({w:e,h:n},r))}};t.calcPartsPositions=function(e,t){var n=e.instances.map((function(e){var n=v.calcPartWidth(e,d.getPartDef(e,t),!1,{},{},t),i=c.PART_HEIGHT;return g(n,i,e.pos,e.id)})),i=f.okeys(e.inputs).map((function(t){var n=m.calcPartIoWidth(t),i=c.PART_HEIGHT,r=e.inputsPosition[t]||{x:0,y:0};return g(n,i,r,"input_"+t)})),r=f.okeys(e.outputs).map((function(t){var n=m.calcPartIoWidth(t),i=c.PART_HEIGHT,r=e.outputsPosition[t]||{x:0,y:0};return g(n,i,r,"output"+t)}));return u(u(u([],n),i),r)};t.getEffectivePartDimensions=function(e,n){var r=t.calcPartsPositions(e,n),o=r[0]||{left:0,right:0,top:0,bottom:0},a=r.reduce((function(e,t){return t.left<e?t.left:e}),o.left),u=r.reduce((function(e,t){return t.right>e?t.right:e}),o.right),s=r.reduce((function(e,t){return t.top<e?t.top:e}),o.top),c=u-a,d=r.reduce((function(e,t){return t.bottom>e?t.bottom:e}),o.bottom)-s,l={x:a,y:s};return{size:{width:c,height:d},pos:l,center:t.calcCenter(i({w:c,h:d},l))}};t.fitViewPortToPart=function(e,n,i){var r=t.getEffectivePartDimensions(e,n),o=r.size,a=r.center,u=o.width+0,s=o.height+0,c=i.width/u,d=i.height/s,l=Math.min(c,d)/1.15,p=t.clamp(.3,1,l);return{zoom:p,pos:{x:a.x-i.width/2/p,y:a.y-i.height/2/p}}};t.isJsxValue=function(e){var t=function(e){return f.isDefined(e.ref)&&f.isDefined(e.type)&&f.isDefined(e.props)};try{var n=JSON.parse(e);return t(n)||Array.isArray(n)&&t(n[0])}catch(i){return!1}};t.dismantleGroup=function(e,t,n){return s.produce(e,(function(e){var i,r,o=d.getPartDef(t,n);if(!d.isGroupedPart(o))throw new Error("impossible state");var a=o.instances,u=o.connections,s=e.instances.filter((function(e){return e.partId===o.id})),c=s.map((function(e){return e.id}));e.instances=e.instances.filter((function(e){return!s.includes(e)})),e.connections=e.connections.filter((function(e){var t=e.from,n=e.to;return!c.includes(t.insId)&&!c.includes(n.insId)})),(i=e.instances).push.apply(i,a),(r=e.connections).push.apply(r,u.filter((function(e){return!d.isExternalConnectionNode(e.from)&&!d.isExternalConnectionNode(e.to)})))}))};t.getInstancesInRect=function(e,n,r,o,a,u){var s=e.from,l=e.to,f=t.domToViewPort(y.vSub(s,u),r),m=t.domToViewPort(y.vSub(l,u),r),h=t.getSelectionBoxRect(f,m);return a.filter((function(e){var t=e.pos,r=v.calcPartWidth(e,d.getPartDef(e,n),!1,o.get(e.id)||{},{},n),a=i(i({},t),{w:r,h:c.PART_HEIGHT});return p.intersectRect(h,a)||p.intersectRect(a,h)})).map((function(e){return e.id}))};t.handleInstanceDrag=function(e,t,n,i,r,o){i.preventDefault(),i.stopPropagation();var a,c=y.vSub(n,t.pos),d=s.produce(e,(function(e){var s=e.instances.find((function(e){return e.id===t.id}));if(!s)throw new Error("impossible state dragging instance that does not exist");!i.shiftKey&&o&&(a=[o]);var d=e.instances.filter((function(e){return r.includes(e.id)&&e!==s})),l=u([s],d),p=h.getLeafInstancesOfSelection(l,e.instances,e.connections);u(u([],d),p).forEach((function(e){e.pos=y.vAdd(e.pos,c)})),s.pos=n,!i.shiftKey&&o&&(a=[o])}));return{newValue:d,newSelected:a}};t.calcMoveViewPort=function(e,t,n,i){var r=e.pageX,o=e.pageY,a=t.x-r,u=t.y-o,c=n.x,d=n.y;return s.produce(i,(function(e){e.pos.x=c+3*a/e.zoom,e.pos.y=d+3*u/e.zoom}))};t.handleIoPinRename=function(e,t,n){return s.produce(e,(function(e){var r=prompt("New name?")||"na";"input"===t?(e.inputs[r]=e.inputs[n],e.inputsPosition[r]=e.inputsPosition[n],delete e.inputs[n],e.connections=e.connections.map((function(e){return d.isExternalConnectionNode(e.from)&&e.from.pinId===n?i(i({},e),{from:i(i({},e.from),{pinId:r})}):e}))):(e.outputs[r]=e.outputs[n],e.outputsPosition[r]=e.outputsPosition[n],e.connections=e.connections.map((function(e){return d.isExternalConnectionNode(e.to)&&e.to.pinId===n?i(i({},e),{to:i(i({},e.to),{pinId:r})}):e})),delete e.outputs[n])}))};t.handleChangePartInputType=function(e,t,n){return s.produce(e,(function(e){var i=e.inputs[t];if(!i)throw new Error("Wat");i.mode=n}))}},96149:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(90412),t),r(n(12901),t),r(n(77437),t),r(n(40232),t),r(n(99457),t),r(n(96041),t),r(n(51424),t),r(n(23489),t),r(n(13521),t),r(n(10934),t),r(n(4824),t),r(n(14648),t),r(n(26013),t),r(n(867),t),r(n(11897),t),r(n(99743),t),r(n(57779),t),r(n(52395),t),r(n(12887),t)},60614:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserOnlyReactJson=void 0;var r=n(24246);t.BrowserOnlyReactJson=function(e){if("undefined"==typeof window)return null;var t=n(51366).default;return r.jsx(t,i({},e),void 0)}},26013:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyticsValueRenderer=void 0;var i=n(24246),r=n(18265),o=n(60614);t.AnalyticsValueRenderer=function(e){var t=e.val;try{var n=JSON.parse(t),a="object"==typeof n?n:{value:n},u=n&&[n.type,n.key,n.props,n.ref].every(r.isDefined),s=u?{jsxValue:n}:a;return i.jsx(o.BrowserOnlyReactJson,{src:s,name:!1,collapseStringsAfterLength:50,groupArraysAfterLength:5,collapsed:u},void 0)}catch(c){return i.jsx(o.BrowserOnlyReactJson,{src:{value:t},name:!1,collapseStringsAfterLength:50,groupArraysAfterLength:5},void 0)}}},78504:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.createGroup=void 0;var o=n(18265),a=n(18265),u=n(52395),s=n(99743);t.createGroup=function(e,t,n){if(0===e.length)throw new Error("cannot create group without instances");var c=e.map((function(e){return e.id})),d=prompt("Name your part!")||"n/a",l=t.filter((function(e){var t=c.includes(e.from.insId),n=c.includes(e.to.insId);return!t&&n})).filter((function(e,t,n){return n.findIndex((function(t){return a.connectionNodeEquals(t.to,e.to)}))===t})),p=t.filter((function(e){var t=c.includes(e.from.insId),n=c.includes(e.to.insId);return t&&!n})).filter((function(e,t,n){return n.findIndex((function(t){return a.connectionNodeEquals(t.from,e.from)}))===t})),f={},v={},m={},y={},h=[],g=l.reduce((function(e,t){var n,r=t.to.insId+"."+t.to.pinId,o=t.from.insId+"."+t.from.pinId,u=t.to.pinId;if(m[o])return h.push({from:a.externalConnectionNode(m[o]),to:a.connectionNode(t.to.insId,t.to.pinId)}),e;var c=e[u]?prompt("Name this input ("+u+" of "+t.to.insId+") is already taken:")||"i"+s.rnd():u;return f[r]=c,m[o]=c,h.push({from:a.externalConnectionNode(c),to:a.connectionNode(t.to.insId,t.to.pinId)}),i(i({},e),((n={})[c]=a.partInput("any"),n))}),{}),b=p.reduce((function(e,t){var n,r=t.to.insId+"."+t.to.pinId,o=t.from.insId+"."+t.from.pinId,u=t.from.pinId;if(y[r])return h.push({from:a.connectionNode(t.from.insId,t.from.pinId),to:a.externalConnectionNode(y[r])}),e;var c=e[u]?prompt("Name this output ("+u+" of "+t.from.insId+" is already taken:")||"i"+s.rnd():u;return v[o]=c,y[r]=c,h.push({from:a.connectionNode(t.from.insId,t.from.pinId),to:a.externalConnectionNode(c)}),i(i({},e),((n={})[c]=a.partInput("any"),n))}),{}),I=(e.reduce((function(e,t){return u.middlePos(t.pos,e)}),e[0].pos),t.filter((function(e){return c.includes(e.from.insId)&&c.includes(e.to.insId)})));return delete g[o.TRIGGER_PIN_ID],{groupedPart:{id:d,inputs:g,outputs:b,instances:e,inputsPosition:o.okeys(g).reduce((function(e,t,n){var r;return i(i({},e),((r={})[t]={x:0+100*n,y:0},r))}),{}),outputsPosition:o.okeys(b).reduce((function(e,t,n){var r;return i(i({},e),((r={})[t]={x:0+100*n,y:400},r))}),{}),connections:r(r([],I),h),completionOutputs:o.okeys(b)},renamedInputs:f,renamedOutputs:v}}},10934:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.highlightText=void 0;var i=n(24246);function r(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}t.highlightText=function(e,t){var n=0,o=t.split(/\s+/).filter((function(e){return e.length>0})).map(r);if(0===o.length)return[e];for(var a=new RegExp(o.join("|"),"gi"),u=[];;){var s=a.exec(e);if(!s)break;var c=s[0].length,d=e.slice(n,a.lastIndex-c);d.length>0&&u.push(d),n=a.lastIndex,u.push(i.jsx("strong",{children:s[0]},n))}var l=e.slice(n);return l.length>0&&u.push(l),u}},99457:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Loader=void 0;var r=n(24246),o=i(n(44271));t.Loader=function(){return r.jsx(o.default,{type:"ball-clip-rotate",active:!0},void 0)}},12887:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0;var i=n(18265);t.logger=i.debugLogger("editor")},96041:function(e,t,n){"use strict";var i=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.buildPartsRelationshipData=t.isProject=t.isFlow=void 0;var r=n(18265),o=n(12901);t.isFlow=function(e){return void 0!==e.parts};t.isProject=function(e){return void 0!==e.customRepo};t.buildPartsRelationshipData=function(e){var n=t.isFlow(e)?e.parts:e.customRepo,a=t.isFlow(e)?[]:e.triggers,u=o.values(n).reduce((function(e,t){return r.isGroupedPart(t)&&t.instances.forEach((function(r){if(n[r.partId]){var o=e[r.partId]||[];o.includes(t.id)||r.partId===t.id||(e[r.partId]=i(i([],o),[t.id]))}})),e}),{}),s=new Set,c=function(e){return u[e]||[]},d={},l=function e(t,o){return t.instances.reduce((function(t,a){var l=a.partId;if((u[l]||[]).length>1)return t;var p=n[l];if(!p)return t;if(r.isCodePart(p)){s.add(p.id);var f={part:p,parent:o,children:[],usedByPartIds:c(l)};return d[p.id]=f,i(i([],t),[f])}return s.has(l)?t:(s.add(p.id),(f={part:p,parent:o,children:[],usedByPartIds:c(l)}).children=e(p,f),d[p.id]=f,i(i([],t),[f]))}),[])},p=a.map((function(e){return e.partId})),f=new Set(p),v=o.values(n).filter((function(e){return 0===(u[e.id]||[]).length&&f.has(e.id)})).map((function(e){s.add(e.id);var t={part:e,children:[],usedByPartIds:c(e.id)};return t.children=l(e,t),d[e.id]=t,t})).sort((function(e,t){return p.indexOf(e.part.id)-p.indexOf(t.part.id)})),m=o.values(n).filter((function(e){return(u[e.id]||[]).length>1&&!s.has(e.id)})).map((function(e){s.add(e.id);var t={part:e,children:[],usedByPartIds:c(e.id)};return r.isGroupedPart(e)&&(t.children=l(e,t)),d[e.id]=t,t})),y=o.values(n).filter((function(e){return 0===(u[e.id]||[]).length&&!s.has(e.id)})).map((function(e){s.add(e.id);var t={part:e,children:[],usedByPartIds:c(e.id)};return r.isGroupedPart(e)&&(t.children=l(e,t)),d[e.id]=t,t}));if(o.keys(n).length!==s.size)throw new Error("built incomplete relationship graph - "+o.keys(n).length+" parts, but only "+s.size+" traversed");var h=new Set(m.map((function(e){return e.part.id}))),g=new Set(y.map((function(e){return e.part.id})));return{all:i(i(i([],v),m),y),triggers:{nodes:v,ids:f},shared:{nodes:m,ids:h},orphan:{nodes:y,ids:g},nodeMap:d}}},14264:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.preloadMonaco=void 0;var i=n(77324),r=n(12887),o=!1;t.preloadMonaco=function(){o||i.loader.init().then((function(){r.logger("monaco preloaded"),o=!0}))}},4824:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.appHotkeysConfig=t.hotkey=t.EditorHotkeyCmd=t.AppHotkeyCmd=void 0,function(e){e.SAVE_PART="save-part",e.NEW_PROJECT="new-project",e.SAVE_PROJECT="save-project",e.TOGGLE_SIDE="toggle-side",e.RUN="run",e.UNDO="undo"}(n=t.AppHotkeyCmd||(t.AppHotkeyCmd={})),function(e){e.SHOW_OMNIBAR="show-omnibar",e.CLEAR_SELECTION="clear-selection",e.DELETE_COMP="delete-comp",e.DUPLICATE_COMP="duplicate-comp",e.GROUP="group",e.SELECT_ALL="select-all",e.SELECT_CLOSEST="select-closest"}(t.EditorHotkeyCmd||(t.EditorHotkeyCmd={}));t.hotkey=function(e,t,n,i,r){return{combo:e,label:t,cmd:n,global:i,preventDefault:r}},t.appHotkeysConfig=[t.hotkey("shift+p","Save part",n.SAVE_PART,!0,!0),t.hotkey("shift+t","New project",n.NEW_PROJECT,!0,!0),t.hotkey("cmd+shift+s","Toggle side",n.TOGGLE_SIDE,!0,!0),t.hotkey("cmd+s","Toggle side",n.SAVE_PROJECT,!0,!0),t.hotkey("shift+r","Run",n.RUN,!0,!0),t.hotkey("cmd+z","Undo",n.UNDO,!0,!0)]},14648:function(e,t,n){"use strict";var i=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useHotkeys=void 0;var o=r(n(34618)),a=n(27378);t.useHotkeys=function(e,t,n,r){void 0===n&&(n=[]),void 0===r&&(r={});var u=a.useCallback(t,i(i([],n),[t]));a.useEffect((function(){return o.default(e,r,u),function(){return o.default.unbind(e,u)}}),[e,u,r])}},72419:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useScrollBlock=void 0;var i=n(27378);t.useScrollBlock=function(){var e=i.useRef(!1);return{blockScroll:function(){if("undefined"!=typeof document){var t=document.documentElement,n=document.body;if(n&&n.style&&!e.current){var i=window.innerWidth-t.clientWidth,r=parseInt(window.getComputedStyle(n).getPropertyValue("padding-right"))||0;t.style.position="relative",n.style.position="relative",t.style.overflow="hidden",n.style.overflow="hidden",n.style.paddingRight=r+i+"px",e.current=!0}}},allowScroll:function(){if("undefined"!=typeof document){var t=document.documentElement,n=document.body;n&&n.style&&e.current&&(t.style.position="",t.style.overflow="",n.style.position="",n.style.overflow="",n.style.paddingRight="",e.current=!1)}}}}},11897:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.safeSessionStorage=t.safeLocalstorage=void 0,t.safeLocalstorage={getItem:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return localStorage.getItem.apply(localStorage,e)}catch(n){return null}},setItem:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return localStorage.setItem.apply(localStorage,e)}catch(n){return null}}},t.safeSessionStorage={getItem:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return sessionStorage.getItem.apply(sessionStorage,e)}catch(n){return null}},setItem:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return sessionStorage.setItem.apply(sessionStorage,e)}catch(n){return null}}}},49040:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomReactTooltip=void 0;var o=n(24246),a=n(27378),u=r(n(31542)),s=r(n(87661));function c(e){var t=e.children,n=e.domNode;return u.default.createPortal(t,n)}t.CustomReactTooltip=function(e){var t=a.useRef();return a.useEffect((function(){t.current=document.createElement("div"),document.body.appendChild(t.current)}),[]),t.current?o.jsx(c,i({domNode:t.current},{children:o.jsx(s.default,i({},e),void 0)}),void 0):null},t.default=t.CustomReactTooltip},77437:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useLocalStorage=t.useResizePref=t.userPreferences=t.useUserPref=void 0;var a,u=o(n(27378)),s=n(12901),c=n(11897);t.useUserPref=function(e,n){var i=u.useState((function(){var i=t.userPreferences.getItem(e);return s.isDefined(i)?i:n})),r=i[0],o=i[1];u.useEffect((function(){var i=t.userPreferences.getItem(e),r=s.isDefined(i)?i:n;o(r)}),[e]);return[r,function(n){t.userPreferences.setItem(e,n),console.log("Saved",e,n),o(n)}]},t.userPreferences=(a=function(e){return"up."+e},{getItem:function(e){var t=c.safeLocalstorage.getItem(a(e))||"",n=c.safeSessionStorage.getItem(a(e))||"";try{return JSON.parse(n||t).value}catch(i){return}},setItem:function(e,t,n){void 0===n&&(n=!1);var i=n?sessionStorage:c.safeLocalstorage;try{var r=JSON.stringify({value:t});return i.setItem(a(e),r),!0}catch(o){return console.error("Error saving user preference",o),!1}}});t.useResizePref=function(e,n){var i="resize."+e;return t.useUserPref(i,n)};var d=function(e){var t=c.safeLocalstorage.getItem(e);if(!t)return null;try{return JSON.parse(t).value}catch(n){return null}};t.useLocalStorage=function(e,t){var n=u.useState(d(e)||t),i=n[0],r=n[1],o=u.useCallback((function(t){c.safeLocalstorage.setItem(e,JSON.stringify({value:t})),r(t)}),[e]);return u.useEffect((function(){d(e)||c.safeLocalstorage.setItem(e,JSON.stringify({value:t}))}),[e,t,o]),[i,o]}},99743:function(e,t){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.totalEnergy=t.itrPhysics=t.hookes=t.coulombs=t.vNorm=t.vLen=t.vSub=t.vAdd=t.vDiv=t.vMul=t.rnd=t.vec=t.size=void 0;t.size=function(e,t){return{width:e,height:t}};t.vec=function(e,t){return{x:e,y:t}};t.rnd=function(e,t){return void 0===e&&(e=100),void 0===t&&(t=0),Math.floor(Math.random()*(e-t))+t};t.vMul=function(e,t){return{x:e.x*t,y:e.y*t}};t.vDiv=function(e,n){var i=e.x,r=e.y;return t.vMul({x:i,y:r},1/n)};t.vAdd=function(e,t){return{x:e.x+t.x,y:e.y+t.y}};t.vSub=function(e,n){return t.vAdd(e,t.vMul(n,-1))};t.vLen=function(e){var t=e.x,n=e.y;return Math.sqrt(t*t+n*n)};t.vNorm=function(e){return t.vDiv(e,t.vLen(e)||1)};t.coulombs=function(e,n,i){var r=t.vLen(t.vSub(e.p,n.p));if(0===r){var o=t.vec(2*Math.random()-1,2*Math.random()-1),a=e.m*n.m/Math.pow(10,2);return t.vMul(o,a*i)}o=t.vNorm(t.vSub(n.p,e.p)),a=e.m*n.m/Math.pow(r+.1,2);return t.vMul(o,a*i)};t.hookes=function(e,n,i,r,o){var a=t.vLen(t.vSub(e.p,n.p)),u=t.vNorm(t.vSub(e.p,n.p)),s=0;return a<i?s=i-a:a>r&&(s=r-a),t.vMul(u,o*s)};t.itrPhysics=function(e,i){var r=i.p,o=i.v,a=i.f,u=i.m,s=t.vDiv(a,u),c=e/1e3,d=t.vAdd(t.vMul(s,c),o),l=t.vAdd(t.vMul(d,c),r);return n(n({},i),{p:l,v:d,f:t.vec(0,0)})};t.totalEnergy=function(e){return e.reduce((function(e,n){var i=t.vLen(n.v);return e+.5*n.m*i*i}),0)}},40232:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateToast=t.toastMsg=t.AppToaster=void 0;var i=n(42272);t.AppToaster=function(){try{return i.Toaster.create({className:"app-toaster",position:i.Position.BOTTOM_RIGHT})}catch(e){return{}}}();t.toastMsg=function(e,n,i){return t.AppToaster.show({message:e,intent:n,timeout:i})};t.updateToast=function(e,n,i){return t.AppToaster.show({message:n,intent:i},e)}},12901:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.preventDefaultAnd=t.isLocal=t.fullTime=t.timeAgoFromDt=t.timeAgo=t.toString=t.intersectRect=t.isDefined=t.set=t.createOmap=t.toOmap=t.values=t.keys=t.entries=void 0;var o=n(52395),a=n(18265),u=r(n(61320));t.entries=function(e){return Object.keys(e).map((function(t){return[t,e[t]]}))};t.keys=function(e){return Object.keys(e)};t.values=function(e){return Object.keys(e).map((function(t){return e[t]}))};t.toOmap=function(e){return Array.from(e.entries()).reduce((function(e,t){var n,r=t[0],o=t[1];return i(i({},e),((n={})[r]=o,n))}),{})};t.createOmap=function(e){return void 0===e&&(e=[]),e.reduce((function(e,t){var n;return i(i({},e),((n={})[t[0]]=t[1],n))}),{})};t.set=function(e,t,n){e[t]=n};t.isDefined=function(e){return void 0!==e};t.intersectRect=function(e,t){var n=e.x+e.w,i=t.x+t.w;return!(t.x>n||i<e.x||t.y>e.y+e.h||t.y+t.h<e.y)};t.toString=function(e){var t=typeof e;if(""===e)return"(empty string)";if(o.isJsxValue(e))return"JSX Value";if(a.isStaticValueGroupedPart(e))return"Embedded Part";if(a.isEnvValue(e))return a.getEnvKeyFromValue(e);if("object"===t)try{var n=JSON.stringify(e);return"{}"===n?"Empty object":n}catch(i){return"Object (cannot stringify)"}return""+e};t.timeAgo=function(e){return u.default(new Date(e)).fromNow()};t.timeAgoFromDt=function(e){return u.default(Date.now()-e).fromNow()};t.fullTime=function(e){return u.default(new Date(e)).toString()};t.isLocal=function(){return location.href.includes(":300")};t.preventDefaultAnd=function(e){return function(t){t.preventDefault(),e(t)}}},17229:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.createEditorClient=void 0;var r=n(18265),o=n(14206),a=n(50208),u=n(19389),s=n(63726),c=r.debugLogger("runtime-editor-client");t.createEditorClient=function(e,t){var n=new URL(e),r=a.default(n.origin,{path:("/"===n.pathname?"":n.pathname)+"/socket.io/editor"});return r.emit("join-room-editor",t),{emitChange:function(e){r.emit(u.EventType.CHANGE_EVENT_NAME,e)},emitBreakpointsChange:function(e){r.emit(u.EventType.UPDATE_BREAKPOINTS,e)},onInputValueChange:function(e){return r.on(u.EventType.INPUT_VALUE_CHANGE,e),function(){return r.off(u.EventType.INPUT_VALUE_CHANGE,e)}},interceptInput:function(e){r.emit(u.EventType.INPUT_VALUE_OVERRIDE,e)},onOutputValueChange:function(e){return r.on(u.EventType.OUTPUT_VALUE_CHANGE,e),function(){return r.off(u.EventType.OUTPUT_VALUE_CHANGE,e)}},interceptOutput:function(e){r.emit(u.EventType.OUTPUT_VALUE_OVERRIDE,e)},onRuntimeReady:function(e){return r.on(u.EventType.RUNTIME_READY,e),function(){return r.off(u.EventType.RUNTIME_READY,e)}},onChangeAwk:function(e){return r.on(u.EventType.CHANGE_AWK,e),function(){return r.off(u.EventType.CHANGE_AWK,e)}},onChangeError:function(e){return r.on(u.EventType.CHANGE_ERROR,e),function(){return r.off(u.EventType.CHANGE_ERROR,e)}},onIsAlive:function(e){return r.on(u.EventType.IS_ALIVE,e),function(){return r.off(u.EventType.IS_ALIVE,e)}},emitInputValue:function(e,t){c("Emitting push input value to "+e+" %o",t),r.emit(u.EventType.PUSH_INPUT_VALUE,{pinId:e,value:t})},destroy:function(){r.disconnect(),u.enumToArray(u.EventType).forEach((function(e){return r.off(e)}))},onDisconnect:function(e){return r.on("disconnect",e),function(){return r.off("disconnect",e)}},debugInfo:function(){return"Remote debugger for "+e},onProcessingChange:function(e){return r.on(u.EventType.PROCESSING_CHANGE,e),function(){return r.off(u.EventType.PROCESSING_CHANGE,e)}},onInputsStateChange:function(e){return r.on(u.EventType.INPUTS_STATE_CHANGE,e),function(){return r.off(u.EventType.INPUTS_STATE_CHANGE,e)}},onPartError:function(e){return r.on(u.EventType.PART_ERROR,(function(t){var n=s.deserializeError(t.error);e(i(i({},t),{error:n}))})),function(){return r.off(u.EventType.PART_ERROR,e)}},onBatchedEvents:function(e){return r.on(u.EventType.EVENTS_BATCH,e),function(){return r.off(u.EventType.EVENTS_BATCH,e)}},requestState:function(){return o.default.get(e+"/state").then((function(e){return e.data.state}))},getHistory:function(t){return o.default.get(e+"/history",{params:{id:t.id,types:t.types,limit:t.limit}}).then((function(e){return e.data}))},clearHistory:function(){return o.default.delete(e+"/history").then((function(){}))},triggerPart:function(t,n){return o.default.post(e+"/trigger",{partId:t,inputs:n}).then((function(e){return e.data}))}}}},4278:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRuntimeClient=t.DEFAULT_DT_SCALE=void 0;var i=n(18265),r=n(63726),o=n(50208),a=n(19389),u=i.debugLogger("debugger-runtime-client");t.DEFAULT_DT_SCALE=1;t.createRuntimeClient=function(e,n){var s=new URL(e),c=o.io(s.origin,{path:("/"===s.pathname?"":s.pathname)+"/socket.io/runtime"});c.emit("join-room-runtime",n);new Set;c.on(a.EventType.UPDATE_BREAKPOINTS,(function(e){new Set(e)}));var d=Date.now(),l=function(){var e=Date.now()-d;return Math.round(e/t.DEFAULT_DT_SCALE)},p=i.cappedArrayDebounce((function(e){u("Emitting debounced batched events - "+e.length),c.emit(a.EventType.EVENTS_BATCH,e)}),100,200),f={onChange:function(e){return c.on(a.EventType.CHANGE_EVENT_NAME,e),function(){return c.off(a.EventType.CHANGE_EVENT_NAME,e)}},onInput:function(e){return c.on(a.EventType.PUSH_INPUT_VALUE,e),function(){return c.off(a.EventType.PUSH_INPUT_VALUE,e)}},emitInputChange:function(e){u("Emitting input change event of "+e.insId+":"+e.pinId);e.insId.split(".").length;p({type:a.RuntimeEventType.INPUT_CHANGE,id:e.insId+"."+e.pinId+".input",dt:l(),val:a.toString(e.val),t:Date.now()})},emitOutputChange:function(e){u("Emitting output change event of "+e.insId+":"+e.pinId+" -> [o%]",e.val),p({type:a.RuntimeEventType.OUTPUT_CHANGE,id:e.insId+"."+e.pinId+".output",dt:l(),val:a.toString(e.val),t:Date.now()})},emitProcessing:function(e){e.insId.split(".").length;p({type:a.RuntimeEventType.PROCESSING_CHANGE,id:e.insId,dt:l(),val:e.processing,t:Date.now()})},emitInputsStateChange:function(e){e.insId.split(".").length;p({type:a.RuntimeEventType.INPUTS_STATE_CHANGE,id:e.insId,dt:l(),val:e.inputs,t:Date.now()})},emitPartError:function(e){e.insId.split(".").length;u("Emitting error event of "+e.insId+", error - ["+e+"]");var t=r.serializeError(e);p({type:a.RuntimeEventType.ERROR,id:e.insId,dt:l(),val:t,t:Date.now()}),p({type:a.RuntimeEventType.OUTPUT_CHANGE,id:e.insId+"."+i.ERROR_PIN_ID+".output",dt:l(),val:a.toString(e),t:Date.now()})},emitRuntimeReady:function(){c.emit(a.EventType.RUNTIME_READY,{})},emitChangeAwk:function(){c.emit(a.EventType.CHANGE_AWK,{})},emitChangeError:function(e){c.emit(a.EventType.CHANGE_ERROR,{error:e})},emitIsAlive:function(e){c.emit(a.EventType.IS_ALIVE,{time:e})},destroy:function(){a.enumToArray(a.EventType).forEach((function(e){return c.off(e)})),c.disconnect()},onDisconnect:function(e){return c.on("disconnect",e),function(){return c.off("disconnect",e)}}};return new Promise((function(e,t){c.connected?e(f):(c.on("connect_error",(function(e){t("Socket connect error: "+e)})),c.on("connect",(function(){e(f)})))}))}},19389:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MINOR_EVENT_TYPES=t.MAJOR_EVENT_TYPES=t.RuntimeEventType=t.EventType=t.enumToArray=t.isNumber=t.isSimpleType=t.valuePreview=t.toString=void 0;var i=n(63726);t.toString=function(e){if("object"===typeof e){if(e instanceof Error)return JSON.stringify(i.serializeError(e));try{return JSON.stringify(e).substr(0,250)}catch(t){return"Object (cannot stringify)"}}return(""+e).substr(0,250)};t.valuePreview=function(e){return t.toString(e).substr(0,100)};t.isSimpleType=function(e){return["number","string","boolean"].includes(typeof e)};var r;t.isNumber=function(e){return!1===isNaN(Number(e))},t.enumToArray=function(e){return Object.keys(e).filter(t.isNumber).map((function(t){return e[t]}))},function(e){e.RUNTIME_READY="runtime-ready",e.CHANGE_EVENT_NAME="change",e.PUSH_INPUT_VALUE="push-input-value",e.CHANGE_AWK="live-change-awk",e.CHANGE_ERROR="live-change-error",e.IS_ALIVE="is-alive",e.UPDATE_BREAKPOINTS="update-breakpoints",e.INPUT_VALUE_OVERRIDE="input-value-override",e.OUTPUT_VALUE_OVERRIDE="output-value-override",e.INPUT_VALUE_CHANGE="input-value-changed",e.OUTPUT_VALUE_CHANGE="output-value-changed",e.PROCESSING_CHANGE="processing-changed",e.INPUTS_STATE_CHANGE="inputs-state-changed",e.PART_ERROR="part-error",e.EVENTS_BATCH="events-batch"}(t.EventType||(t.EventType={})),function(e){e.INPUT_CHANGE="i",e.OUTPUT_CHANGE="o",e.PROCESSING_CHANGE="pc",e.ERROR="err",e.INPUTS_STATE_CHANGE="isc"}(r=t.RuntimeEventType||(t.RuntimeEventType={})),t.MAJOR_EVENT_TYPES=[r.INPUT_CHANGE,r.OUTPUT_CHANGE,r.ERROR],t.MINOR_EVENT_TYPES=[r.PROCESSING_CHANGE,r.INPUTS_STATE_CHANGE]},75579:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(19389),t),r(n(17229),t),r(n(4278),t)},62830:function(e,t,n){"use strict";n.d(t,{I:function(){return _}});var i=n(27378),r=n(67651),o=n(50353),a=n(49274),u=n(38944),s=n(96149),c=n(18265),d={VMScript:function(e){this.script=e},VM:function(){function e(e){this.context=e}return e.prototype.run=function(e){var t=(0,c.okeys)(this.context.sandbox),n=Object.values(this.context.sandbox);Function.apply(void 0,t.concat([e.script])).apply(void 0,n)},e}()},l=n(81884),p=n(44305),f=n(13127),v=200,m=n(75579),y=n(31808),h=n(60904);n.g.vm2=d;var g,b,I=(b=new Map,{requestHistory:(g=(0,f.Z)((0,p.Z)().mark((function e(t,n,i){var r,o,a;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t+"."+n+"."+i,o=b.get(r)||{total:0,lastSamples:[]},a=o.lastSamples.slice(0,v),e.abrupt("return",Object.assign({},o,{lastSamples:a}));case 4:case"end":return e.stop()}}),e)}))),function(e,t,n){return g.apply(this,arguments)}),addEvents:function(e){e.forEach((function(e){var t=b.get(e.id)||{total:0,lastSamples:[]};t.lastSamples.unshift(e),t.lastSamples.length>v&&t.lastSamples.splice(v,t.lastSamples.length-v),t.total++,b.set(e.id,t)}))}}),C=function(e){var t=e.parts,n=e.output,i=e.inputs,o=e.onError,a=e.mainId,u=e.debugDelay,s=function(e,t){return{onInput:function(n){var i=[{type:m.RuntimeEventType.INPUT_CHANGE,t:n.time,id:n.insId+"."+n.pinId+".input",dt:0,val:n.val}];e.addEvents(i),t.addEvents(i)},onOutput:function(n){var i=[{type:m.RuntimeEventType.OUTPUT_CHANGE,t:n.time,id:n.insId+"."+n.pinId+".output",dt:0,val:n.val}];t.addEvents(i),e.addEvents(i)},onInputsStateChange:function(t){e.addEvents([{type:m.RuntimeEventType.INPUTS_STATE_CHANGE,t:Date.now(),id:""+t.insId,dt:0,val:t.inputs}])},onProcessing:function(t){e.addEvents([{type:m.RuntimeEventType.PROCESSING_CHANGE,t:Date.now(),id:""+t.insId,dt:0,val:t.processing}])},onError:function(t){e.addEvents([{type:m.RuntimeEventType.ERROR,t:Date.now(),id:""+t.insId,dt:0,val:t.message}])}}}(e.player,I);return s.debugDelay=u,(0,c.execute)({part:t[a],inputs:i,outputs:{result:n},partsRepo:Object.assign({},h,t),_debugger:s,onBubbleError:function(e){o(e)},extraContext:{PubSub:r}})},_=function(e){(0,o.Z)().siteConfig;var t=e.flowProps,n=t.flow,r=t.inputs,d=t.output,p=(0,i.useState)(e.defaultDelay||0),f=p[0],v=p[1],m=(0,i.useRef)((0,s.createRuntimePlayer)(e.flowProps.flow.mainId)),g=(0,i.useState)({flow:n,boardData:{viewPort:{pos:{x:0,y:0},zoom:1},lastMousePos:{x:0,y:0},selected:[]},currentPartId:n.mainId||(0,c.keys)(n.parts)[0]}),b=g[0],_=g[1];(0,i.useEffect)((function(){_((function(e){return Object.assign({},e,{flow:n})}))}),[n]);var P=(0,i.useState)(Object.assign({},b.flow.parts,h)),x=P[0],O=P[1],E={state:b,resolvedRepoWithDeps:x,onChangeState:_,onInspectPin:c.noop,onRequestHistory:I.requestHistory,hideTemplatingTips:!1,onImportPart:c.noop};return(0,i.useEffect)((function(){m.current.start()}),[]),(0,i.useEffect)((function(){O(Object.assign({},h,b.flow.parts))}),[b.flow.parts]),(0,i.useEffect)((function(){var e=C({parts:x,output:d,inputs:r,onError:c.noop,mainId:n.mainId||"Main",debugDelay:f,player:m.current});return function(){e()}}),[f,x]),i.createElement(a.Z,{title:e.meta.title+" | Playground",description:"Description will go into a meta tag in <head />"},i.createElement("header",{className:(0,u.Z)("hero hero--primary",y.Z.heroBanner)},i.createElement("div",{className:"container"},i.createElement("h2",{className:"hero__title"},"Flyde Playground"),i.createElement("p",{className:"hero__subtitle"},"Flyde's playground allows you to see how Flyde looks and feels like. Choose one of the examples below to get started. Feel free to play aroung with the canvas and see how your changes affect the result!"),i.createElement("ul",{className:"examples__menu"},i.createElement("li",null,i.createElement(l.Z,{to:"/playground/hello"},"Hello World")," "),i.createElement("li",null,i.createElement(l.Z,{to:"/playground/debounce-throttling"},"Debounce vs. Throttling")),i.createElement("li",null,i.createElement(l.Z,{to:"/playground/react-counter"},"React Counter")),i.createElement("li",null,i.createElement(l.Z,{to:"/playground/fibonacci"},"Fibonnaci Sequence"))))),i.createElement("div",{className:"playground-container"},i.createElement("header",null,i.createElement("h3",{className:"playground-title"},e.meta.title),i.createElement("div",{className:"playground-description"},e.meta.description),i.createElement("div",null,i.createElement("input",{type:"range",id:"volume",name:"delay",value:f,step:"100",min:"0",max:"300",onChange:function(e){return v(Number(e.target.value))}}),i.createElement("label",{htmlFor:"volume"},"Debug Delay - ",f,"ms"))),i.createElement("div",{className:"playground"},i.createElement("div",{className:"flow-container"},i.createElement(s.FlowEditor,E)),i.createElement("div",{className:"output-container"},e.children))))}},96099:function(e,t,n){var i=n(93119);e.exports=function(e,t){var n=i.createElement("button",{onClick:function(e){return t.click.next(e)}},e.children);t.jsx.next(n)}},23460:function(e,t,n){var i=n(93119);e.exports=function(e,t){var n=i.createElement("span",{},e.children);t.jsx.next(n)}},14295:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var i=n(27378),r=n(18265),o=n(62830),a={Main:{id:"Main",inputs:{},outputs:{result:{type:"any"}},inputsPosition:{},outputsPosition:{result:{x:-321.3338928563413,y:690.4970809936208}},completionOutputs:["result"],instances:[{partId:"Button",pos:{x:-112.55849853515622,y:264.69233886718746},id:"Button-410",inputConfig:{children:{mode:"static",value:"+ 1"}},visibleInputs:["children"]},{partId:"Span",pos:{x:-316.5079125976563,y:277.8121800231934},id:"Span-677",inputConfig:{children:{mode:"queue"}},visibleInputs:["__trigger","children"]},{partId:"Inline Code 73878",pos:{x:-434.4105419921875,y:150.16451232910157},id:"Inline Code 73878-936",inputConfig:{count:{mode:"queue"}},visibleInputs:["count"]},{partId:"ListFrom3",pos:{x:-347.506982421875,y:450.8367645263672},id:"ListFrom3-404",inputConfig:{item1:{mode:"sticky"},item3:{mode:"sticky"},item2:{mode:"queue"}}},{partId:"Button",pos:{x:-515.2419702148437,y:266.9907855224609},id:"Button-410-d44",inputConfig:{children:{mode:"static",value:"- 1"}},visibleInputs:["children"]},{partId:"Publish",pos:{x:-90.45,y:472.37},id:"Publish-107",inputConfig:{key:{mode:"static",value:"inc"},value:{mode:"static",value:1}}},{partId:"Subscribe",pos:{x:-201.807001953125,y:-187.86253479003906},id:"Subscribe-896",inputConfig:{key:{mode:"static",value:"inc"}}},{partId:"Add",pos:{x:-272.72882080078125,y:-9.603830566406259},id:"Add-138",inputConfig:{n1:{mode:"sticky"}}},{partId:"Subscribe",pos:{x:-387.2609814453125,y:-186.2929638671875},id:"Subscribe-227",inputConfig:{key:{mode:"static",value:"value"}}},{partId:"Publish",pos:{x:-541.97,y:466.84},id:"Publish-441",inputConfig:{key:{mode:"static",value:"inc"},value:{mode:"static",value:-1}}},{partId:"Publish",pos:{x:-599.5746044921875,y:-143.15812744140624},id:"Publish-817",inputConfig:{key:{mode:"static",value:"value"},value:{mode:"static",value:0}}},{partId:"Inline Code 6685",pos:{x:-429.99247314453123,y:-53.56334594726559},id:"Inline Code 6685-155",inputConfig:{}},{partId:"Publish",pos:{x:-36.03804443359377,y:138.30580078125},id:"Publish-817-d15",inputConfig:{key:{mode:"static",value:"value"},value:{mode:"queue"}},visibleInputs:["value"]}],connections:[{from:{insId:"Inline Code 73878-936",pinId:"r"},to:{insId:"Span-677",pinId:"children"}},{from:{insId:"Span-677",pinId:"jsx"},to:{insId:"ListFrom3-404",pinId:"item2"}},{from:{insId:"Button-410",pinId:"jsx"},to:{insId:"ListFrom3-404",pinId:"item3"}},{from:{insId:"Button-410-d44",pinId:"jsx"},to:{insId:"ListFrom3-404",pinId:"item1"}},{from:{insId:"ListFrom3-404",pinId:"list"},to:{insId:"__this",pinId:"result"}},{from:{insId:"Button-410",pinId:"click"},to:{insId:"Publish-107",pinId:"__trigger"}},{from:{insId:"Subscribe-896",pinId:"val"},to:{insId:"Add-138",pinId:"n2"}},{from:{insId:"Button-410-d44",pinId:"click"},to:{insId:"Publish-441",pinId:"__trigger"}},{from:{insId:"Subscribe-227",pinId:"val"},to:{insId:"Add-138",pinId:"n1"}},{from:{insId:"Add-138",pinId:"r"},to:{insId:"Inline Code 73878-936",pinId:"count"}},{from:{insId:"Inline Code 6685-155",pinId:"r"},to:{insId:"Inline Code 73878-936",pinId:"count"}},{from:{insId:"Add-138",pinId:"r"},to:{insId:"Publish-817-d15",pinId:"value"}}]},Button:{id:"Button",inputs:{children:{mode:"required-if-connected",type:"any"}},outputs:{jsx:{type:"any"},click:{type:"any"}},completionOutputs:["jsx"],fn:n(96099)},Span:{id:"Span",inputs:{children:{mode:"required",type:"any"}},outputs:{jsx:{type:"any"}},fn:n(23460)},"Inline Code 73878":{id:"Inline Code 73878",inputs:{count:{mode:"required",type:"any"}},outputs:{r:{type:"any"}},customViewCode:"`Value is ${inputs.count}`",dataBuilderSource:"YFZhbHVlIGlzICR7aW5wdXRzLmNvdW50fWA=",templateType:"value",completionOutputs:["r"],fnCode:"outputs.r.next((`Value is ${inputs.count}`))"},"Inline Code 33269":{id:"Inline Code 33269",inputs:{},outputs:{r:{type:"any"}},customViewCode:"",dataBuilderSource:"",templateType:"value",completionOutputs:["r"],fnCode:"outputs.r.next(())"},"Inline Code 6685":{id:"Inline Code 6685",inputs:{},outputs:{r:{type:"any"}},customViewCode:"0",dataBuilderSource:"MA==",templateType:"value",completionOutputs:["r"],fnCode:"outputs.r.next((0))"},"Inline Code 70187":{id:"Inline Code 70187",inputs:{},outputs:{r:{type:"any"}},customViewCode:"",dataBuilderSource:"",templateType:"value",completionOutputs:["r"],fnCode:"outputs.r.next(())"},HtmlSpan:{id:"HtmlSpan",inputs:{children:{mode:"optional",type:"any"},className:{mode:"required",type:"any"},style:{mode:"optional",type:"any"},extra:{mode:"required",type:"any"},id:{mode:"required",type:"any"}},outputs:{jsx:{type:"any"},click:{type:"any"}},inputsPosition:{children:{x:427.3633539266118,y:18.715560526434157},className:{x:79.49840810022538,y:-190.6116525494369},style:{x:-115.72005229266348,y:-241.4589222372525},extra:{x:250.068522112266,y:-182.374320409234},id:{x:-248.71519834765635,y:-202.88061148563915}},outputsPosition:{jsx:{x:-150.11084357782397,y:424.0177174689956},click:{x:178.6462610269776,y:423.83950155636643},style:{x:1.46,y:-24.05}},instances:[{partId:"HtmlSpan__HtmlTag",pos:{x:-145.77105590820312,y:179.20621673583986},id:"HtmlTag-344",inputConfig:{tagName:{mode:"static",value:"span"},children:{mode:"sticky"}}}],connections:[{from:{insId:"HtmlTag-344",pinId:"jsx"},to:{insId:"__this",pinId:"jsx"}},{from:{insId:"__this",pinId:"style"},to:{insId:"HtmlTag-344",pinId:"style"}},{from:{insId:"__this",pinId:"className"},to:{insId:"HtmlTag-344",pinId:"className"}},{from:{insId:"__this",pinId:"children"},to:{insId:"HtmlTag-344",pinId:"children"}},{from:{insId:"__this",pinId:"extra"},to:{insId:"HtmlTag-344",pinId:"extra"}},{from:{insId:"__this",pinId:"id"},to:{insId:"HtmlTag-344",pinId:"id"}},{from:{insId:"HtmlTag-344",pinId:"click"},to:{insId:"__this",pinId:"click"}}]},HtmlSpan__HtmlTag:{id:"HtmlSpan__HtmlTag",inputs:{id:{mode:"required-if-connected",type:"any"},style:{mode:"required-if-connected",type:"any"},className:{mode:"required-if-connected",type:"any"},tagName:{mode:"required",type:"any"},extra:{mode:"required-if-connected",type:"any"},children:{mode:"required-if-connected",type:"any"}},outputs:{jsx:{type:"any"},click:{type:"any"}},fnCode:"// magic here\nconst props = {\n    className: inputs.className,\n    id: inputs.id,\n    style: inputs.style\n}\n\nconst onClick = outputs.click ? (e) => outputs.click.next(e) : undefined;\nconst comp = React.createElement(inputs.tagName, {\n    ...props,\n    ...(inputs.extra || {}),\n    onClick\n}, inputs.children);\n\noutputs.jsx.next(comp);"},ListFrom3:{id:"ListFrom3",inputs:{item1:{mode:"required",type:"any"},item2:{mode:"required",type:"any"},item3:{mode:"required",type:"any"}},outputs:{list:{type:"any"}},completionOutputs:["list"],fnCode:"// magic here\noutputs.list.next(\n    [\n        inputs.item1,\n        inputs.item2,\n        inputs.item3\n    ]\n);"},ListFrom2:{id:"ListFrom2",inputs:{item1:{mode:"required",type:"any"},item2:{mode:"required",type:"any"}},outputs:{list:{type:"any"}},completionOutputs:["list"],fnCode:"// magic here\noutputs.list.next(\n    [\n        inputs.item1,\n        inputs.item2\n    ]\n);"},SpreadList3:{id:"SpreadList3",inputs:{list:{mode:"required",type:"any"}},outputs:{first:{type:"any"},second:{type:"any"},third:{type:"any"}},inputsPosition:{list:{x:326.68066376398093,y:7.352935664945553}},outputsPosition:{first:{x:100,y:400},second:{x:300,y:400},third:{x:500,y:400},rest:{x:726.2604947250959,y:383.1932748030569}},instances:[{partId:"SpreadList3__GetListItem",pos:{x:65.52127563476563,y:153.09548217773437},id:"GetListItem-877",inputConfig:{idx:{mode:"static",value:0}}},{partId:"SpreadList3__GetListItem",pos:{x:267.9924060058594,y:186.69313079833984},id:"GetListItem-877-d285",inputConfig:{idx:{mode:"static",value:1}}},{partId:"SpreadList3__GetListItem",pos:{x:431.89740478515625,y:176.2309420776367},id:"GetListItem-877-d285-d900",inputConfig:{idx:{mode:"static",value:2}}}],connections:[{from:{insId:"__this",pinId:"list"},to:{insId:"GetListItem-877",pinId:"list"}},{from:{insId:"GetListItem-877",pinId:"r"},to:{insId:"__this",pinId:"first"}},{from:{insId:"__this",pinId:"list"},to:{insId:"GetListItem-877-d285",pinId:"list"}},{from:{insId:"GetListItem-877-d285",pinId:"r"},to:{insId:"__this",pinId:"second"}},{from:{insId:"GetListItem-877-d285-d900",pinId:"r"},to:{insId:"__this",pinId:"third"}},{from:{insId:"__this",pinId:"list"},to:{insId:"GetListItem-877-d285-d900",pinId:"list"}}]},SpreadList3__GetListItem:{id:"SpreadList3__GetListItem",inputs:{list:{mode:"required",type:"any"},idx:{mode:"required",type:"any"}},outputs:{r:{type:"any"}},completionOutputs:["r"],fnCode:"// magic here\noutputs.r.next(inputs.list[inputs.idx]);"},SetState:{id:"SetState",inputs:{key:{mode:"required",type:"any"},value:{mode:"required",type:"any"}},outputs:{r:{type:"any"}},fnCode:"const {state} = adv;\nconst {key, value} = inputs;\n\nstate.set(key, value);\noutputs.r.next(value);\n\n"},"Boolean Split":{id:"Boolean Split",inputs:{val:{mode:"required",type:"any"}},outputs:{true:{type:"any"},false:{type:"any"}},inputsPosition:{val:{x:-53.899108855416266,y:-19.49542241235728}},outputsPosition:{true:{x:-107.53062440952482,y:361.3771973987992},false:{x:75.17321928763755,y:350.95064554922453}},instances:[{partId:"Boolean Split__Equals",pos:{x:-55.038107910156256,y:123.8628857421875},id:"Equals-530",inputConfig:{compare:{mode:"static",value:!0}}}],connections:[{from:{insId:"__this",pinId:"val"},to:{insId:"Equals-530",pinId:"val"}},{from:{insId:"Equals-530",pinId:"r"},to:{insId:"__this",pinId:"true"}},{from:{insId:"Equals-530",pinId:"else"},to:{insId:"__this",pinId:"false"}}]},"Boolean Split__Equals":{id:"Boolean Split__Equals",inputs:{val:{mode:"required",type:"any"},compare:{mode:"required",type:"any"},transform:{mode:"required-if-connected",type:"any"}},outputs:{r:{type:"any"},else:{type:"any"}},customViewCode:"<% if (isDefined(inputs.compare)) { %>Equals <%- inputs.compare %> <% } else { %> Equals <% } %>",completionOutputs:["r","else"],fnCode:"const { val, compare, transform } = inputs;\nconst { r } = outputs;\n\nconst valueToPush = isDefined(transform) ? transform : val;\n        \n// magic here\nif (val === compare) {\n    r.next(valueToPush);\n}  else {\n    outputs['else'].next(valueToPush);\n}"},Publish:{id:"Publish",inputs:{key:{mode:"required",type:"any"},value:{mode:"required",type:"any"}},outputs:{},fnCode:"// magic here\n\nPubSub.publish(inputs.key, inputs.value);"},Subscribe:{id:"Subscribe",inputs:{key:{mode:"required",type:"any"}},outputs:{val:{type:"any"}},completionOutputs:["never"],fnCode:"// magic here\nconst token = PubSub.subscribe(inputs.key, (_, data) => {\n    outputs.val.next(data);\n});\n\nadv.onCleanup(() => {\n    log('Unsubscribing!');\n    PubSub.unsubscribe(token);\n});"},Add:{id:"Add",inputs:{n1:{mode:"required",type:"any"},n2:{mode:"required",type:"any"}},outputs:{r:{type:"any"}},customViewCode:'<%= isDefined(inputs.n1) ? inputs.n1 : "n1" %> + <%= isDefined(inputs.n2) ? inputs.n2 : "n2" %>',completionOutputs:["r"],fnCode:"const {n1, n2} = inputs;\nconst {r} = outputs;\n\nlog({n1, n2})\nr.next( n1 + n2 );"}},u={title:"React Counter Example",description:"In this example the output JSX is rendered into an element",key:"react-counter"};function s(){var e,t,n=(0,i.useState)(i.createElement("div",null,"Loading")),s=n[0],c=n[1],d=(0,i.useRef)((e=function(e){return c(e)},(t=(0,r.dynamicOutput)()).subscribe(e),t)),l=(0,i.useRef)({}),p=(0,i.useState)({flow:{imports:{},exports:[],parts:a},resolvedFlow:a,inputs:l.current,output:d.current}),f=p[0];p[1];return i.createElement(o.I,{meta:u,flowProps:f},i.createElement("div",{className:"output-container"},i.createElement("div",null,i.createElement("h3",null,"Result"),i.createElement("div",null,s))))}},31808:function(e,t){"use strict";t.Z={heroBanner:"heroBanner_qdFl",buttons:"buttons_AeoN","project-editor":"project-editor_XBpx"}},95126:function(e,t,n){var i={"./af":1009,"./af.js":1009,"./ar":88769,"./ar-dz":23739,"./ar-dz.js":23739,"./ar-kw":93745,"./ar-kw.js":93745,"./ar-ly":99576,"./ar-ly.js":99576,"./ar-ma":67408,"./ar-ma.js":67408,"./ar-sa":48781,"./ar-sa.js":48781,"./ar-tn":87856,"./ar-tn.js":87856,"./ar.js":88769,"./az":2030,"./az.js":2030,"./be":56476,"./be.js":56476,"./bg":25304,"./bg.js":25304,"./bm":48125,"./bm.js":48125,"./bn":34,"./bn-bd":29835,"./bn-bd.js":29835,"./bn.js":34,"./bo":64082,"./bo.js":64082,"./br":8317,"./br.js":8317,"./bs":93107,"./bs.js":93107,"./ca":68272,"./ca.js":68272,"./cs":98567,"./cs.js":98567,"./cv":61583,"./cv.js":61583,"./cy":10076,"./cy.js":10076,"./da":31760,"./da.js":31760,"./de":8973,"./de-at":63214,"./de-at.js":63214,"./de-ch":74728,"./de-ch.js":74728,"./de.js":8973,"./dv":54053,"./dv.js":54053,"./el":7499,"./el.js":7499,"./en-au":67876,"./en-au.js":67876,"./en-ca":47010,"./en-ca.js":47010,"./en-gb":34239,"./en-gb.js":34239,"./en-ie":99830,"./en-ie.js":99830,"./en-il":28438,"./en-il.js":28438,"./en-in":25322,"./en-in.js":25322,"./en-nz":43264,"./en-nz.js":43264,"./en-sg":55449,"./en-sg.js":55449,"./eo":39486,"./eo.js":39486,"./es":32430,"./es-do":16310,"./es-do.js":16310,"./es-mx":27038,"./es-mx.js":27038,"./es-us":73099,"./es-us.js":73099,"./es.js":32430,"./et":34975,"./et.js":34975,"./eu":87063,"./eu.js":87063,"./fa":68073,"./fa.js":68073,"./fi":50957,"./fi.js":50957,"./fil":8764,"./fil.js":8764,"./fo":81775,"./fo.js":81775,"./fr":74179,"./fr-ca":14306,"./fr-ca.js":14306,"./fr-ch":73791,"./fr-ch.js":73791,"./fr.js":74179,"./fy":47014,"./fy.js":47014,"./ga":46911,"./ga.js":46911,"./gd":62958,"./gd.js":62958,"./gl":87344,"./gl.js":87344,"./gom-deva":33161,"./gom-deva.js":33161,"./gom-latn":35798,"./gom-latn.js":35798,"./gu":68485,"./gu.js":68485,"./he":27917,"./he.js":27917,"./hi":52159,"./hi.js":52159,"./hr":95842,"./hr.js":95842,"./hu":30005,"./hu.js":30005,"./hy-am":51312,"./hy-am.js":51312,"./id":60781,"./id.js":60781,"./is":64101,"./is.js":64101,"./it":43467,"./it-ch":4759,"./it-ch.js":4759,"./it.js":43467,"./ja":44164,"./ja.js":44164,"./jv":70079,"./jv.js":70079,"./ka":57036,"./ka.js":57036,"./kk":92022,"./kk.js":92022,"./km":63418,"./km.js":63418,"./kn":43655,"./kn.js":43655,"./ko":30986,"./ko.js":30986,"./ku":91902,"./ku.js":91902,"./ky":4604,"./ky.js":4604,"./lb":99026,"./lb.js":99026,"./lo":20537,"./lo.js":20537,"./lt":22288,"./lt.js":22288,"./lv":1495,"./lv.js":1495,"./me":60690,"./me.js":60690,"./mi":2571,"./mi.js":2571,"./mk":93959,"./mk.js":93959,"./ml":97225,"./ml.js":97225,"./mn":88,"./mn.js":88,"./mr":46622,"./mr.js":46622,"./ms":11070,"./ms-my":48899,"./ms-my.js":48899,"./ms.js":11070,"./mt":63931,"./mt.js":63931,"./my":95393,"./my.js":95393,"./nb":4274,"./nb.js":4274,"./ne":8914,"./ne.js":8914,"./nl":33114,"./nl-be":68479,"./nl-be.js":68479,"./nl.js":33114,"./nn":4513,"./nn.js":4513,"./oc-lnc":46549,"./oc-lnc.js":46549,"./pa-in":28264,"./pa-in.js":28264,"./pl":32848,"./pl.js":32848,"./pt":90899,"./pt-br":55077,"./pt-br.js":55077,"./pt.js":90899,"./ro":92512,"./ro.js":92512,"./ru":21753,"./ru.js":21753,"./sd":16840,"./sd.js":16840,"./se":78362,"./se.js":78362,"./si":50464,"./si.js":50464,"./sk":66324,"./sk.js":66324,"./sl":41963,"./sl.js":41963,"./sq":53039,"./sq.js":53039,"./sr":93454,"./sr-cyrl":10466,"./sr-cyrl.js":10466,"./sr.js":93454,"./ss":95158,"./ss.js":95158,"./sv":28859,"./sv.js":28859,"./sw":57594,"./sw.js":57594,"./ta":26915,"./ta.js":26915,"./te":15677,"./te.js":15677,"./tet":92154,"./tet.js":92154,"./tg":74098,"./tg.js":74098,"./th":89071,"./th.js":89071,"./tk":49381,"./tk.js":49381,"./tl-ph":1869,"./tl-ph.js":1869,"./tlh":92346,"./tlh.js":92346,"./tr":71483,"./tr.js":71483,"./tzl":30266,"./tzl.js":30266,"./tzm":33138,"./tzm-latn":32960,"./tzm-latn.js":32960,"./tzm.js":33138,"./ug-cn":29456,"./ug-cn.js":29456,"./uk":50805,"./uk.js":50805,"./ur":61127,"./ur.js":61127,"./uz":29628,"./uz-latn":80840,"./uz-latn.js":80840,"./uz.js":29628,"./vi":56962,"./vi.js":56962,"./x-pseudo":49257,"./x-pseudo.js":49257,"./yo":62423,"./yo.js":62423,"./zh-cn":61002,"./zh-cn.js":61002,"./zh-hk":6046,"./zh-hk.js":6046,"./zh-mo":36903,"./zh-mo.js":36903,"./zh-tw":24710,"./zh-tw.js":24710};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=o,e.exports=r,r.id=95126},91764:function(){},60904:function(e){"use strict";e.exports=JSON.parse('{"Accumulate":{"id":"Accumulate","inputs":{"count":{"mode":"required","type":"any"},"val":{"mode":"optional","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"reactiveInputs":["val"],"fnCode":"const {count, val} = inputs;\\nconst {r} = outputs;\\n\\nconst {state} = adv;\\n\\nlet list = state.get(\\"list\\") || [];\\n\\nif (count !== state.get(\\"count\\")) {\\n    list = [];\\n    state.set(\\"count\\", count);\\n}\\n\\nif (isDefined(val)) {\\n    list.push(val);\\n}\\n\\n\\nstate.set(\\"list\\", list);\\n\\nif (list.length === state.get(\\"count\\")) {\\n    r.next(list);\\n}"},"AccumulateSome":{"id":"AccumulateSome","inputs":{"count":{"mode":"required","type":"any"},"allow":{"mode":"optional","type":"any"},"filter":{"mode":"optional","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"reactiveInputs":["allow","filter"],"fnCode":"const {count, allow, filter} = inputs;\\nconst {r} = outputs;\\n\\nconst {state} = adv;\\n\\nlet allowedList = state.get(\\"allowed-list\\") || [];\\nlet filterList = state.get(\\"filter-list\\") || [];\\n\\nif (count !== state.get(\\"count\\")) {\\n    state.set(\\"count\\", count);\\n}\\n\\nif (isDefined(allow)) {\\n    allowedList.push(allow);\\n}\\n\\nif (isDefined(filter)) {\\n    filterList.push(filter);\\n}\\n\\nstate.set(\\"allowed-list\\", allowedList);\\nstate.set(\\"filter-list\\", filterList);\\n\\nif (allowedList.length + filterList.length === state.get(\\"count\\")) {\\n    r.next(allowedList);\\n}\\n"},"AccumulateUntil":{"id":"AccumulateUntil","inputs":{"item":{"mode":"optional","type":"any"},"until":{"mode":"optional","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"reactiveInputs":["item","until"],"fnCode":"// magic here\\nconst {item, until} = inputs;\\nconst {r} = outputs;\\nconst {state} = adv;\\n\\nlet list = state.get(\\"list\\") || [];\\n\\n    if (isDefined(item)) {\\n      list.push(item);\\n      state.set(\\"list\\", list);\\n    }\\n\\n    if (isDefined(until)) {\\n      r.next(list);\\n    }"},"AccumulateUntilTime":{"id":"AccumulateUntilTime","inputs":{"time":{"mode":"required","type":"any"},"item":{"mode":"optional","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"reactiveInputs":["item"],"fnCode":"const {item, time} = inputs;\\nconst {r} = outputs;\\nconst {state} = adv;\\n\\n\\nlet list = state.get(\\"list\\") || [];\\nif (isDefined(item)) {\\n  list.push(item);\\n  state.set(\\"list\\", list);\\n\\n  const timer = state.get(\\"timer\\");\\n  \\n  if (timer) {\\n    clearTimeout(timer);\\n  } \\n  \\n  const newTimer = setTimeout(() => {\\n      r.next(state.get(\\"list\\") || []);\\n  }, time);\\n  \\n  state.set(\\"timer\\", newTimer)\\n}\\n\\n\\n"},"Add":{"id":"Add","inputs":{"n1":{"mode":"required","type":"any"},"n2":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const {n1, n2} = inputs;\\nconst {r} = outputs;\\n\\nlog({n1, n2})\\nr.next( n1 + n2 );"},"CollectionCountDocuments":{"id":"CollectionCountDocuments","inputs":{"options":{"mode":"optional","type":"any"},"collectionName":{"mode":"required","type":"any"},"filter":{"mode":"required","type":"any"},"":{"mode":"optional","type":"any"}},"outputs":{"count":{"type":"any"}},"completionOutputs":["count"],"fnCode":"// magic here\\nmongoDb\\n    .collection(inputs.collectionName)\\n    .countDocuments(inputs.filter, inputs.options)\\n    .then((count) => {\\n        outputs.count.next(count);\\n    });"},"CollectionDeleteOne":{"id":"CollectionDeleteOne","inputs":{"collectionName":{"mode":"required","type":"any"},"filter":{"mode":"required","type":"any"},"options":{"mode":"optional","type":"any"}},"outputs":{"result":{"type":"any"}},"completionOutputs":["result"],"fnCode":"mongoDb.collection(inputs.collectionName)\\n    .deleteOne(inputs.filter, inputs.options)\\n    .then(res => {\\n        outputs.result.next(res);\\n    })\\n    .catch((e) => adv.onError(e));"},"CollectionFind":{"id":"CollectionFind","inputs":{"options":{"mode":"optional","type":"any"},"collectionName":{"mode":"required","type":"any"},"filter":{"mode":"required","type":"any"}},"outputs":{"items":{"type":"any"}},"completionOutputs":["items"],"fnCode":"// magic here\\nmongoDb\\n    .collection(inputs.collectionName)\\n    .find(inputs.filter, inputs.options)\\n    .toArray()\\n    .then((doc) => {\\n        outputs.items.next(doc);\\n    })\\n    .catch((e) => adv.onError(e))"},"CollectionFindOne":{"id":"CollectionFindOne","inputs":{"collectionName":{"mode":"required","type":"any"},"filter":{"mode":"required","type":"any"},"options":{"mode":"optional","type":"any"}},"outputs":{"item":{"type":"any"}},"completionOutputs":["item"],"fnCode":"mongoDb.collection(inputs.collectionName)\\n    .findOne(inputs.filter, inputs.options)\\n    .then(res => {\\n        if (res === null) {\\n            adv.onError(new Error(\'not found\'));\\n        } else {\\n            outputs.item.next(res);\\n        }\\n    })\\n    .catch((e) => adv.onError(e));"},"CollectionFindOneAndUpdate":{"id":"CollectionFindOneAndUpdate","inputs":{"options":{"mode":"optional","type":"any"},"collectionName":{"mode":"required","type":"any"},"filter":{"mode":"required","type":"any"},"update":{"mode":"required","type":"any"}},"outputs":{"updatedItem":{"type":"any"}},"completionOutputs":["updatedItem"],"fnCode":"// magic here\\nconst options = inputs.options || {returnDocument: \'after\'};\\nmongoDb\\n    .collection(inputs.collectionName)\\n    .findOneAndUpdate(inputs.filter, inputs.update, options)\\n    .then((doc) => {\\n        outputs.updatedItem.next(doc);\\n    });"},"CollectionInsertOne":{"id":"CollectionInsertOne","inputs":{"collectionName":{"mode":"required","type":"any"},"item":{"mode":"required","type":"any"}},"outputs":{"success":{"type":"any"}},"completionOutputs":["success"],"fnCode":"// magic here\\nmongoDb.collection(inputs.collectionName)\\n    .insertOne(inputs.item)\\n    .then(res => outputs.success.next({...inputs.item, _id: res.insertedId}))\\n    .catch((e) => adv.onError(e));\\n"},"concat":{"id":"concat","inputs":{"a":{"mode":"required","type":"any"},"b":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"object"}},"completionOutputs":["r"],"fnCode":"\\n          let val = \'\\"${a}${b}\\"\';\\n\\n          Object.keys(inputs).forEach((key) => {\\n\\n            const _inpVal = inputs[key]; \\n            const inpVal = typeof _inpVal === \'object\' ? JSON.stringify(_inpVal) : _inpVal;\\n\\n            val = val\\n              .replace(\'${\' + key + \'}\', inpVal)\\n              .replace(\'${\' + key + \'}\', inpVal)\\n              .replace(\'${\' + key + \'}\', inpVal) // todo - support more than 3 instances in a nicer way\\n          })\\n          outputs.r.next(JSON.parse(val));"},"Cuid":{"id":"Cuid","inputs":{"trigger":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"// magic here\\noutputs.r.next(cuid());"},"DbCount":{"id":"DbCount","inputs":{"query":{"mode":"required","type":"any"}},"outputs":{"count":{"type":"any"}},"completionOutputs":["count"],"fnCode":"// magic here\\nconst {query} = inputs;\\n\\nconst {onError} = adv;\\n\\ndb.count(query)\\n    .then(d => outputs.count.next(d))\\n    .catch(err => {\\n        onError(err);\\n    });\\n"},"DbFind":{"id":"DbFind","inputs":{"query":{"mode":"required","type":"any"},"sort":{"mode":"required-if-connected","type":"any"},"limit":{"mode":"required-if-connected","type":"any"},"skip":{"mode":"required-if-connected","type":"any"}},"outputs":{"res":{"type":"any"},"err":{"type":"any"}},"fnCode":"// magic here\\nconst {query, sort, limit, skip} = inputs;\\ndb.find(query, sort || {}, Math.min(limit, 1000), {}, skip)\\n    .then(d => outputs.res.next(d))\\n    .catch(err => outputs.err.next(err.toString()));\\n"},"DbFindOne":{"id":"DbFindOne","inputs":{"query":{"mode":"required","type":"any"}},"outputs":{"res":{"type":"any"}},"completionOutputs":["res"],"fnCode":"// magic here\\ndb.findOne(inputs.query)\\n    .then((doc) => {\\n        if (isDefined(doc)) {\\n            outputs.res.next(doc)\\n        } else {\\n            adv.onError(\'Not found\');\\n        }\\n    })\\n    .catch((err) => adv.onError(err))"},"DbInsert":{"id":"DbInsert","inputs":{"doc":{"mode":"required","type":"any"}},"outputs":{"ok":{"type":"any"},"err":{"type":"any"}},"fnCode":"// magic here\\nlog(\'Going to insert doc\')\\nconst {onError} = adv;\\n\\ndb.insert(inputs.doc)\\n    .then((doc) => {\\n        log(\'Inserted doc\')\\n        outputs.ok.next(doc)\\n    }, (err) => {\\n        log(\'Failed to insert doc\')\\n        outputs.err.next(err);\\n        onError(err);\\n    });\\n"},"DbRemove":{"id":"DbRemove","inputs":{"query":{"mode":"required","type":"any"},"options":{"mode":"required-if-connected","type":"any"}},"outputs":{"ok":{"type":"any"},"err":{"type":"any"}},"fnCode":"// magic here\\nconst {query, options} = inputs;\\nconst {onError} = adv;\\n\\ndb.remove(query, isDefined(options) ? options : {})\\n.then((num) => outputs.ok.next(num))\\n.catch((err) => {\\n    outputs.err.next(err)\\n    onError(err);\\n});\\n\\n"},"DbUpdate":{"id":"DbUpdate","inputs":{"query":{"mode":"required","type":"any"},"update":{"mode":"required","type":"any"},"options":{"mode":"optional","type":"any"}},"outputs":{"ok":{"type":"any"},"err":{"type":"any"}},"fnCode":"// magic here\\nconst {query, update, options} = inputs;\\nconst {ok, err} = outputs;\\ndb.update(query, update, options)\\n    .then((doc) => ok.next(doc))\\n    .catch((e) => err.next(e));"},"Debounce":{"id":"Debounce","inputs":{"i":{"mode":"required","type":"any"},"ms":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"customViewCode":"","completionOutputs":["r"],"reactiveInputs":["i"],"fnCode":"const { i, ms } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nconst timer = adv.state.get(\\"timer\\");\\n  if (timer) {\\n    clearTimeout(timer);\\n  }\\n\\n  const newTimer = setTimeout(() => {\\n    r.next(i);\\n  }, ms);\\n\\n  adv.state.set(\\"timer\\", newTimer);\\n\\n  adv.onCleanup(() => {\\n    clearTimeout(timer);\\n  })"},"Delay":{"id":"Delay","inputs":{"value":{"mode":"required","type":"any"},"ms":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"customViewCode":"","completionOutputs":["r"],"fnCode":"// magic here\\nconst {value, ms} = inputs;\\n const timer = setTimeout(() => {\\n    outputs.r.next(value);\\n}, ms);\\n\\nadv.onCleanup(() => clearTimeout(timer));"},"Delay2":{"id":"Delay2","inputs":{"value":{"mode":"required","type":"any"},"ms":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"customViewCode":"","completionOutputs":["r"],"fnCode":"// magic here\\nconst {value, ms} = inputs;\\n const timer = setTimeout(() => {\\n    outputs.r.next(value);\\n}, ms);\\n\\nadv.onCleanup(() => clearTimeout(timer));"},"Divide":{"id":"Divide","inputs":{"n1":{"mode":"required","type":"any"},"n2":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"},"divByZero":{"type":"any"}},"fnCode":"const { n1, n2 } = inputs;\\nconst { r, divByZero } = outputs;\\n      \\nif (n2 === 0) {\\n      divByZero.next(n1);\\n} else {\\n      r.next(n1 / n2);\\n}\\n      "},"Dot":{"id":"Dot","inputs":{"obj":{"mode":"required","type":"any"},"key":{"mode":"required","type":"any"}},"outputs":{"value":{"type":"any"}},"customViewCode":"<% if (inputs.key) { %> .<%- inputs.key %> <% } else { %> Dot <% } %>","completionOutputs":["value"],"fnCode":"const { obj, key } = inputs;\\nconst { value } = outputs;\\n\\n// magic here\\n\\nlet hadError = false;\\n\\nconst matches = {};\\n\\nconst normalized = key.replace(/\\\\[\\"(([^\\"])+)\\"\\\\]/g, (match, p1, p2, offset) => {\\n  const key = `__$$KEY$$__${offset}`;\\n  matches[key] = p1;\\n  return `.${key}`;\\n});\\n\\nconst path = normalized.split(\\".\\");\\nlet o = { ...obj };\\nfor (let p of path) {\\n  const key = matches[p] || p;\\n  if (o && isDefined(o[key]) && o[key] !== null) {\\n    o = o[key];\\n  } else {\\n    value.next(null);\\n    hadError = true;\\n  }\\n}\\n\\nif (!hadError) {\\n  value.next(o);\\n}\\n"},"EachMs":{"id":"EachMs","inputs":{"ms":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["never"],"fnCode":"const { ms } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nconst s = setInterval(() => {\\n    r.next();\\n}, ms);\\n\\nadv.onCleanup(() => {\\n    clearInterval(s);\\n})        "},"EmptyList":{"id":"EmptyList","inputs":{},"outputs":{"list":{"type":"any"}},"completionOutputs":["list"],"fnCode":"// magic here\\noutputs.list.next(\\n    []\\n);"},"EmptyObject":{"id":"EmptyObject","inputs":{},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const {  } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nr.next({});"},"epochToString":{"id":"epochToString","inputs":{"epoch":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"// magic here\\n\\nconst d = new Date(inputs.epoch);\\noutputs.r.next(d.toLocaleString());"},"Equals":{"id":"Equals","inputs":{"val":{"mode":"required","type":"any"},"compare":{"mode":"required","type":"any"},"transform":{"mode":"required-if-connected","type":"any"}},"outputs":{"r":{"type":"any"},"else":{"type":"any"}},"customViewCode":"<% if (inputs.compare) { %>Equals <%- inputs.compare %> <% } else { %> Equals <% } %>","completionOutputs":["r","else"],"fnCode":"const { val, compare, transform } = inputs;\\nconst { r } = outputs;\\n\\nconst valueToPush = isDefined(transform) ? transform : val;\\n        \\n// magic here\\nif (val === compare) {\\n    r.next(valueToPush);\\n}  else {\\n    outputs[\'else\'].next(valueToPush);\\n}"},"FirstSecondOnlyRest":{"id":"FirstSecondOnlyRest","inputs":{"list":{"mode":"required","type":"any"}},"outputs":{"i0":{"type":"any"},"i1":{"type":"any"},"rest":{"type":"any"}},"fnCode":"const { list } = inputs;\\nconst { i0, i1, rest } = outputs;\\n      \\nconst [_i0, _i1, ...r] = list;\\n\\n[i0, i1].forEach((o, idx) => {\\n    if (typeof list[idx] !== \'undefined\') {\\n        o.next(list[idx]);\\n    }\\n});\\n\\nr.length && rest.next(r)\\n      "},"FirstSecondRest":{"id":"FirstSecondRest","inputs":{"list":{"mode":"required","type":"any"}},"outputs":{"i0":{"type":"any"},"i1":{"type":"any"},"i2":{"type":"any"},"i3":{"type":"any"},"i4":{"type":"any"},"rest":{"type":"any"}},"fnCode":"const { list } = inputs;\\nconst { i0, i1, i2, i3, i4, rest } = outputs;\\n      \\nconst [_i0, _i1, _i2, _i3, _i4, _i5, ...r] = list;\\n\\n[i0, i1, i2, i3, i4].forEach((o, idx) => {\\n    if (typeof list[idx] !== \'undefined\') {\\n        o.next(list[idx]);\\n    }\\n});\\n\\nr.length && rest.next(r)\\n      "},"FlattenArray":{"id":"FlattenArray","inputs":{"arrayOfArrays":{"mode":"required","type":"any"},"depth":{"mode":"required-if-connected","type":"any"}},"outputs":{"array":{"type":"any"}},"completionOutputs":["array"],"fnCode":"// magic here\\n\\nconst flattened = inputs.arrayOfArrays.flat(inputs.depth || 1);\\noutputs.array.next(flattened);"},"Floor":{"id":"Floor","inputs":{"n":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { n } = inputs;\\nconst { r } = outputs;\\n      \\nr.next(Math.floor(n));\\n      "},"FormatMessage":{"id":"FormatMessage","inputs":{"template":{"mode":"required","type":"any"},"var1":{"mode":"required","type":"any"},"var2":{"mode":"required-if-connected","type":"any"},"var3":{"mode":"required-if-connected","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { template, var1, var2, var3 } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\n const replaced = template\\n    .replace(\\"$VAL3\\", var3)\\n    .replace(\\"$VAL2\\", var2)\\n    .replace(\\"$VAL\\", var1)\\n    .replace(\\"$VAR3\\", var3)\\n    .replace(\\"$VAR2\\", var2)\\n    .replace(\\"$VAR\\", var1);\\nr.next(replaced);"},"FormatModel":{"id":"FormatModel","inputs":{"template":{"mode":"required","type":"any"},"model":{"mode":"required","type":"any"},"model2":{"mode":"required-if-connected","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { template, model, model2 } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nconst combined = { ...model, ...(model2 || {}) };\\n  const find = (_, key) => {\\n    const path = key.split(\\".\\");\\n    let o = { ...combined };\\n    for (let p of path) {\\n      if (o && o[p]) {\\n        o = o[p];\\n      } else {\\n        return key;\\n      }\\n    }\\n    return o;\\n  };\\n\\nconst replaced = template\\n  .replace(/\\\\$\\\\{([a-zA-Z \\\\d\\\\.]*)\\\\}/g, find)\\n  .replace(/<%=([a-zA-Z \\\\d\\\\.]*)%>/g, find);\\n\\nr.next(replaced);"},"GetItem":{"id":"GetItem","inputs":{"key":{"mode":"required","type":"any"},"defaultValue":{"mode":"required-if-connected","type":"any"}},"outputs":{"ok":{"type":"any"}},"completionOutputs":["ok"],"fnCode":"// magic here\\nconst {ok, err} = outputs;\\nconst {key, defaultValue} = inputs;\\nconst {onError} = adv;\\n\\nmongoDb.collection(\'__KVStore\').findOne({id: key})\\n    .then((doc) => {\\n        if (doc === null) {\\n            if (isDefined(defaultValue)) {\\n                ok.next(defaultValue);\\n            } else {\\n                onError(new Error(\'Key not found and no default value\'));\\n            }\\n        } else {\\n            ok.next(doc.value);\\n        }\\n    })\\n    .catch((e) => {\\n        onError(e);\\n    });"},"GetListItem":{"id":"GetListItem","inputs":{"list":{"mode":"required","type":"any"},"idx":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"// magic here\\noutputs.r.next(inputs.list[inputs.idx]);"},"GetState":{"id":"GetState","inputs":{"key":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"},"err":{"type":"any"}},"fnCode":"const {state} = adv;\\nconst {key} = inputs;\\nconst {r, err} = outputs;\\n\\nconst val = state.get(key);\\nif (isDefined(val)) {\\n    r.next(val);\\n} else {\\n    err.next(key);\\n}\\n"},"HeadCSS":{"id":"HeadCSS","inputs":{"css":{"mode":"required","type":"any"},"key":{"mode":"optional","type":"any"}},"outputs":{},"fnCode":"try {\\n    const document = getDocument();\\n    const normKey = inputs.key || \\"default-css\\";\\n    const tag = document.createElement(\\"style\\");\\n    tag.innerHTML = inputs.css;\\n    tag.id = normKey;\\n    \\n    const existing = document.getElementById(normKey);\\n    if (existing) {\\n      existing.remove();\\n    }\\n    document.head.appendChild(tag);\\n} catch (e) {\\n    log(`Unable to run head css part`, e);\\n}"},"HtmlTag":{"id":"HtmlTag","inputs":{"id":{"mode":"required-if-connected","type":"any"},"style":{"mode":"required-if-connected","type":"any"},"className":{"mode":"required-if-connected","type":"any"},"tagName":{"mode":"required","type":"any"},"extra":{"mode":"required-if-connected","type":"any"},"children":{"mode":"required-if-connected","type":"any"}},"outputs":{"jsx":{"type":"any"},"click":{"type":"any"}},"fnCode":"// magic here\\nconst props = {\\n    className: inputs.className,\\n    id: inputs.id,\\n    style: inputs.style\\n}\\n\\nconst onClick = outputs.click ? (e) => outputs.click.next(e) : undefined;\\nconst comp = React.createElement(inputs.tagName, {\\n    ...props,\\n    ...(inputs.extra || {}),\\n    onClick\\n}, inputs.children);\\n\\noutputs.jsx.next(comp);"},"HtmlValueTag":{"id":"HtmlValueTag","inputs":{"id":{"mode":"required-if-connected","type":"any"},"style":{"mode":"required-if-connected","type":"any"},"className":{"mode":"required-if-connected","type":"any"},"tagName":{"mode":"required","type":"any"},"extra":{"mode":"required-if-connected","type":"any"},"children":{"mode":"required-if-connected","type":"any"},"value":{"mode":"required-if-connected","type":"any"},"placeholder":{"mode":"required-if-connected","type":"any"}},"outputs":{"jsx":{"type":"any"},"click":{"type":"any"},"change":{"type":"any"}},"fnCode":"// magic here\\nconst props = {\\n    className: inputs.className,\\n    id: inputs.id,\\n    style: inputs.style\\n}\\n\\nconst onClick = outputs.click ? (e) => outputs.click.next(e) : undefined;\\nconst onChange = outputs.change ? (e) => outputs.change.next(e.target.value) : undefined;\\nconst comp = React.createElement(inputs.tagName, {\\n    ...props,\\n    ...(inputs.extra || {}),\\n    onClick,\\n    onChange\\n}, inputs.children);\\n\\noutputs.jsx.next(comp);"},"HttpGet":{"id":"HttpGet","inputs":{"url":{"mode":"required","type":"any"},"headers":{"mode":"required-if-connected","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { url, headers } = inputs;\\nconst { r, error } = outputs;\\n\\nconst {onError} = adv;\\n        \\n// magic here\\naxios.get(url, { headers, timeout: DEFAULT_AXIOS_TIMEOUT }).then((res) => {\\n    r.next(res.data);\\n}, (err) => {\\n    onError(err);\\n});"},"HttpPost":{"id":"HttpPost","inputs":{"url":{"mode":"required","type":"any"},"body":{"mode":"required","type":"any"},"headers":{"mode":"required-if-connected","type":"any"},"bodyType":{"mode":"required-if-connected","type":"any"}},"outputs":{"r":{"type":"any"},"e":{"type":"any"}},"fnCode":"const { url, body, headers, bodyType } = inputs;\\nconst { r, e } = outputs;\\n\\nconst {onError} = adv;\\n\\nconst config = {\\n    headers,\\n    timeout: DEFAULT_AXIOS_TIMEOUT\\n}\\n        \\n// magic here\\nif (bodyType === \\"form\\") {\\n    const parts = [];\\n    Object.keys(body).forEach((key) => {\\n      parts.push(`${key}=${encodeURIComponent(body[key])}`);\\n    });\\n    axios.post(url, parts.join(\\"&\\"), config).then(\\n      (res) => {\\n        r.next(res.data);\\n      },\\n      (err) => {\\n        const {response, message} = err;\\n        const errorObj = response ? {data:response.data, status: response.status} : {data: message, status: -1};\\n        e.next(errorObj)\\n        onError(errorObj);\\n      }\\n    );\\n  } else {\\n    axios.post(url, body, config).then(\\n      (res) => {\\n        r.next(res.data);\\n      },\\n      (err) => {\\n        const {response, message} = err;\\n        const errorObj = response ? {data:response.data, status: response.status} : {data: message, status: -1};\\n        e.next(errorObj)\\n        onError(errorObj);\\n      }\\n    );\\n  }"},"HttpRequest":{"id":"HttpRequest","inputs":{"url":{"mode":"required","type":"any"},"method":{"mode":"required","type":"any"},"headers":{"mode":"required-if-connected","type":"any"},"data":{"mode":"required-if-connected","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { url, headers, method, data } = inputs;\\nconst { r } = outputs;\\n\\nconst {onError} = adv;\\n        \\n// magic here\\naxios({ url, method, data, headers, timeout: DEFAULT_AXIOS_TIMEOUT }).then((res) => {\\n    r.next(res.data);\\n}, (err) => {\\n    onError(err);\\n});"},"Id":{"id":"Id","inputs":{"v":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"object"}},"customViewCode":"","completionOutputs":["r"],"fnCode":"outputs.r.next(inputs.v)"},"IndexOf":{"id":"IndexOf","inputs":{"str":{"mode":"required","type":"any"},"char":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"},"notFound":{"type":"any"}},"fnCode":"const { str, char } = inputs;\\nconst { r, notFound } = outputs;\\n        \\n// magic here\\nconst i = str.indexOf(char);\\nif (i !== -1) {\\n    r.next(str.indexOf(char));\\n} else {\\n    notFound.next(str);\\n}  "},"IsEmpty":{"id":"IsEmpty","inputs":{"str":{"mode":"required","type":"any"}},"outputs":{"true":{"type":"any"},"false":{"type":"any"}},"fnCode":"const { str } = inputs;\\n        \\n// magic here\\nif (str === \\"\\") {\\n    outputs.true.next(str);\\n} else {\\n    outputs.false.next(str);\\n}"},"IsGreater bool ":{"id":"IsGreater bool ","inputs":{"n1":{"mode":"required","type":"any"},"n2":{"mode":"required","type":"any"},"transform":{"mode":"required-if-connected","type":"any"}},"outputs":{"result":{"type":"any"}},"customViewCode":"<% if (inputs.n2) { %>  > <%- inputs.n2 %> <% } else { %> Is Greater <% } %>","fnCode":"const { n1, n2, transform} = inputs;\\n\\n\\noutputs.result.next(n1 > n2);\\n      "},"IsGreater":{"id":"IsGreater","inputs":{"n1":{"mode":"required","type":"any"},"n2":{"mode":"required","type":"any"},"transform":{"mode":"required-if-connected","type":"any"}},"outputs":{"true":{"type":"any"},"false":{"type":"any"}},"customViewCode":"<% if (inputs.n2) { %>  > <%- inputs.n2 %> <% } else { %> Is Greater <% } %>","fnCode":"const { n1, n2, transform} = inputs;\\n\\n\\n      \\nif (n1 > n2) {\\n      outputs.true.next(isDefined(transform) ? transform : n1);\\n} else {\\n      outputs.false.next(isDefined(transform) ? transform : n2);\\n}\\n// magic here\\n      "},"isLess bool":{"id":"isLess bool","inputs":{"n1":{"mode":"required","type":"any"},"n2":{"mode":"required","type":"any"},"transform":{"mode":"required-if-connected","type":"any"}},"outputs":{"result":{"type":"any"}},"customViewCode":"<% if (inputs.n2) { %>  < <%- inputs.n2 %> <% } else { %> Is Less <% } %>","fnCode":"const { n1, n2, transform} = inputs;\\n\\n\\noutputs.result.next(n1 < n2);\\n      "},"isLess":{"id":"isLess","inputs":{"n1":{"mode":"required","type":"any"},"n2":{"mode":"required","type":"any"}},"outputs":{"true":{"type":"any"},"false":{"type":"any"}},"customViewCode":"","completionOutputs":["true","false"],"fnCode":"const { n1, n2 } = inputs;\\n      \\nif (n1 < n2) {\\n      outputs.true.next(n1);\\n} else {\\n      outputs.false.next(n1);\\n}\\n// magic here\\n      "},"isPropertyGreater":{"id":"isPropertyGreater","inputs":{"obj":{"mode":"required","type":"any"},"key":{"mode":"required","type":"any"},"value":{"mode":"required","type":"any"}},"outputs":{"true":{"type":"any"},"false":{"type":"any"}},"customViewCode":"<% if (inputs.key && inputs.value) { %>  .<%- inputs.key %> > <%- inputs.value %> <% } else { %> Is Property Greater <% } %>","fnCode":"const objVal = inputs.obj[inputs.key];\\n\\nif (objVal > inputs.value) {\\n    outputs.true.next(inputs.obj)\\n} else {\\n    outputs.false.next(inputs.obj)\\n}"},"LimitTimes":{"id":"LimitTimes","inputs":{"item":{"mode":"required","type":"any"},"times":{"mode":"required","type":"any"}},"outputs":{"ok":{"type":"any"},"breach":{"type":"any"}},"completionOutputs":["breach"],"reactiveInputs":["item"],"fnCode":"// magic here\\nconst {state} = adv;\\nconst {item, times} = inputs;\\nconst {ok, breach} = outputs;\\n\\nlet curr = state.get(\'val\') || 0;\\ncurr++;\\nstate.set(\'val\', curr);\\nif (curr >= times) {\\n    breach.next(item);\\n} else {\\n    ok.next(item);\\n}\\n"},"ListAppend":{"id":"ListAppend","inputs":{"list":{"mode":"required","type":"any"},"item":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"// magic here// magic here\\noutputs.r.next(\\n    [...inputs.list, inputs.item]\\n);"},"ListConcat2":{"id":"ListConcat2","inputs":{"list1":{"mode":"required","type":"any"},"list2":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"// magic here\\nconst {list1, list2} = inputs;\\noutputs.r.next(list1.concat(list2));"},"ListFilter":{"id":"ListFilter","inputs":{"list":{"mode":"required","type":"any"},"fn":{"mode":"required","type":"part({\\"item\\": \\"any\\", \\"idx?\\": \\"any\\"}|{\\"allow\\": \\"any\\", \\"block\\": \\"any\\"})"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const o = outputs;\\nconst {list, fn} = inputs;\\n\\nconst allowSet = new Set();\\nconst blockSet = new Set();\\nconst newList = [];\\n\\nconst uns = [];\\n\\nconst maybeSendNewList = () => {\\n  if (allowSet.size + blockSet.size === list.length) {\\n    o.r.next(newList.filter((item) => item !== undefined));\\n  }\\n};\\n\\nlist.forEach((item, idx) => {\\n  const itemInput = dynamicPartInput();\\n  const idxInput = dynamicPartInput();\\n  const outputs = Object.keys(fn.outputs).reduce(\\n    (p, k) => ({ ...p, [k]: dynamicOutput() }),\\n    {}\\n  );\\n  outputs.allow.subscribe(() => {\\n    newList.push(item);\\n    allowSet.add(idx);\\n    maybeSendNewList();\\n  });\\n\\n  outputs.block.subscribe(() => {\\n    blockSet.add(idx);\\n    maybeSendNewList();\\n  });\\n\\n  Object.keys(outputs)\\n    .filter((k) => k !== \\"allow\\" && k !== \\"block\\")\\n    .forEach((k) => {\\n      outputs[k].subscribe(() => {\\n        o.rs.next({ key: k, v: item, idx });\\n      });\\n    });\\n  const clean = adv.execute(\\n    fn,\\n    { item: itemInput, idx: idxInput },\\n    outputs,\\n    `${adv.insId}-fn`\\n  );\\n\\n  idxInput.subject.next(idx);\\n  itemInput.subject.next(item);\\n  uns.push(clean);\\n});\\n\\nadv.onCleanup(() => {\\n  uns.forEach((fn) => fn());\\n});\\n"},"ListFrom2":{"id":"ListFrom2","inputs":{"item1":{"mode":"required","type":"any"},"item2":{"mode":"required","type":"any"}},"outputs":{"list":{"type":"any"}},"completionOutputs":["list"],"fnCode":"// magic here\\noutputs.list.next(\\n    [\\n        inputs.item1,\\n        inputs.item2\\n    ]\\n);"},"ListFrom3":{"id":"ListFrom3","inputs":{"item1":{"mode":"required","type":"any"},"item2":{"mode":"required","type":"any"},"item3":{"mode":"required","type":"any"}},"outputs":{"list":{"type":"any"}},"completionOutputs":["list"],"fnCode":"// magic here\\noutputs.list.next(\\n    [\\n        inputs.item1,\\n        inputs.item2,\\n        inputs.item3\\n    ]\\n);"},"ListFromStr":{"id":"ListFromStr","inputs":{"count":{"mode":"required","type":"any"},"char":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"// magic here\\n\\noutputs\\n    .r\\n    .next(new Array(inputs.count).fill(inputs.char));"},"ListJoin":{"id":"ListJoin","inputs":{"list":{"mode":"required","type":"any"},"delimiter":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { list, delimiter } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nr.next(list.join(delimiter));"},"ListLength":{"id":"ListLength","inputs":{"list":{"mode":"required","type":"any"}},"outputs":{"length":{"type":"any"}},"completionOutputs":["length"],"fnCode":"// magic here\\noutputs.length.next(inputs.list.length);"},"ListMap":{"id":"ListMap","inputs":{"list":{"mode":"required","type":"any"},"fn":{"mode":"required","type":"part({\\"item?\\": \\"any\\", \\"idx?\\": \\"any\\"}|{\\"r\\": \\"any\\", \\"rs\\": \\"any\\"})"}},"outputs":{"r":{"type":"any"},"rs":{"type":"any"}},"fnCode":"let newList = [];\\n\\nconst { list, fn} = inputs;\\nconst o = outputs;\\n\\nlet received = new Set();\\n\\nconst cleanUps = [];\\n\\nlist.forEach((item, idx) => {\\n  const itemInput = dynamicPartInput();\\n  const idxInput = dynamicPartInput();\\n  const mainOutput = dynamicOutput();\\n  const sideOutput = dynamicOutput();\\n  mainOutput.subscribe((receivedItem) => {\\n    newList[idx] = receivedItem;\\n    received.add(idx);\\n    if (received.size === list.length) {\\n      o.r.next(newList);\\n    }\\n  });\\n\\n  sideOutput.subscribe((v) => {\\n    o.rs.next(v);\\n  });\\n\\n  const clean = adv.execute(\\n    fn,\\n    { item: itemInput, idx: idxInput },\\n    { r: mainOutput, rs: sideOutput },\\n    `${adv.insId}-fn`\\n  );\\n\\n  cleanUps.push(clean);\\n\\n  itemInput.subject.next(item);\\n  idxInput.subject.next(idx);\\n});\\n\\nif (list.length === 0) {\\n  o.r.next(list);\\n}\\n\\nadv.onCleanup(() => {\\n  cleanUps.forEach((fn) => fn());\\n});\\n"},"ListPrepend":{"id":"ListPrepend","inputs":{"list":{"mode":"required","type":"any"},"item":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"// magic here// magic here\\noutputs.r.next(\\n    [inputs.item, ...inputs.list]\\n);"},"MathMin":{"id":"MathMin","inputs":{"n1":{"mode":"required","type":"any"},"n2":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { n1, n2 } = inputs;\\n      \\noutputs.r.next(Math.min(n1, n2));\\n// magic here\\n      "},"MD5HashString":{"id":"MD5HashString","inputs":{"str":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"function md5cycle(x, k) {\\n  var a = x[0],\\n    b = x[1],\\n    c = x[2],\\n    d = x[3];\\n\\n  a = ff(a, b, c, d, k[0], 7, -680876936);\\n  d = ff(d, a, b, c, k[1], 12, -389564586);\\n  c = ff(c, d, a, b, k[2], 17, 606105819);\\n  b = ff(b, c, d, a, k[3], 22, -1044525330);\\n  a = ff(a, b, c, d, k[4], 7, -176418897);\\n  d = ff(d, a, b, c, k[5], 12, 1200080426);\\n  c = ff(c, d, a, b, k[6], 17, -1473231341);\\n  b = ff(b, c, d, a, k[7], 22, -45705983);\\n  a = ff(a, b, c, d, k[8], 7, 1770035416);\\n  d = ff(d, a, b, c, k[9], 12, -1958414417);\\n  c = ff(c, d, a, b, k[10], 17, -42063);\\n  b = ff(b, c, d, a, k[11], 22, -1990404162);\\n  a = ff(a, b, c, d, k[12], 7, 1804603682);\\n  d = ff(d, a, b, c, k[13], 12, -40341101);\\n  c = ff(c, d, a, b, k[14], 17, -1502002290);\\n  b = ff(b, c, d, a, k[15], 22, 1236535329);\\n\\n  a = gg(a, b, c, d, k[1], 5, -165796510);\\n  d = gg(d, a, b, c, k[6], 9, -1069501632);\\n  c = gg(c, d, a, b, k[11], 14, 643717713);\\n  b = gg(b, c, d, a, k[0], 20, -373897302);\\n  a = gg(a, b, c, d, k[5], 5, -701558691);\\n  d = gg(d, a, b, c, k[10], 9, 38016083);\\n  c = gg(c, d, a, b, k[15], 14, -660478335);\\n  b = gg(b, c, d, a, k[4], 20, -405537848);\\n  a = gg(a, b, c, d, k[9], 5, 568446438);\\n  d = gg(d, a, b, c, k[14], 9, -1019803690);\\n  c = gg(c, d, a, b, k[3], 14, -187363961);\\n  b = gg(b, c, d, a, k[8], 20, 1163531501);\\n  a = gg(a, b, c, d, k[13], 5, -1444681467);\\n  d = gg(d, a, b, c, k[2], 9, -51403784);\\n  c = gg(c, d, a, b, k[7], 14, 1735328473);\\n  b = gg(b, c, d, a, k[12], 20, -1926607734);\\n\\n  a = hh(a, b, c, d, k[5], 4, -378558);\\n  d = hh(d, a, b, c, k[8], 11, -2022574463);\\n  c = hh(c, d, a, b, k[11], 16, 1839030562);\\n  b = hh(b, c, d, a, k[14], 23, -35309556);\\n  a = hh(a, b, c, d, k[1], 4, -1530992060);\\n  d = hh(d, a, b, c, k[4], 11, 1272893353);\\n  c = hh(c, d, a, b, k[7], 16, -155497632);\\n  b = hh(b, c, d, a, k[10], 23, -1094730640);\\n  a = hh(a, b, c, d, k[13], 4, 681279174);\\n  d = hh(d, a, b, c, k[0], 11, -358537222);\\n  c = hh(c, d, a, b, k[3], 16, -722521979);\\n  b = hh(b, c, d, a, k[6], 23, 76029189);\\n  a = hh(a, b, c, d, k[9], 4, -640364487);\\n  d = hh(d, a, b, c, k[12], 11, -421815835);\\n  c = hh(c, d, a, b, k[15], 16, 530742520);\\n  b = hh(b, c, d, a, k[2], 23, -995338651);\\n\\n  a = ii(a, b, c, d, k[0], 6, -198630844);\\n  d = ii(d, a, b, c, k[7], 10, 1126891415);\\n  c = ii(c, d, a, b, k[14], 15, -1416354905);\\n  b = ii(b, c, d, a, k[5], 21, -57434055);\\n  a = ii(a, b, c, d, k[12], 6, 1700485571);\\n  d = ii(d, a, b, c, k[3], 10, -1894986606);\\n  c = ii(c, d, a, b, k[10], 15, -1051523);\\n  b = ii(b, c, d, a, k[1], 21, -2054922799);\\n  a = ii(a, b, c, d, k[8], 6, 1873313359);\\n  d = ii(d, a, b, c, k[15], 10, -30611744);\\n  c = ii(c, d, a, b, k[6], 15, -1560198380);\\n  b = ii(b, c, d, a, k[13], 21, 1309151649);\\n  a = ii(a, b, c, d, k[4], 6, -145523070);\\n  d = ii(d, a, b, c, k[11], 10, -1120210379);\\n  c = ii(c, d, a, b, k[2], 15, 718787259);\\n  b = ii(b, c, d, a, k[9], 21, -343485551);\\n\\n  x[0] = add32(a, x[0]);\\n  x[1] = add32(b, x[1]);\\n  x[2] = add32(c, x[2]);\\n  x[3] = add32(d, x[3]);\\n}\\n\\nfunction cmn(q, a, b, x, s, t) {\\n  a = add32(add32(a, q), add32(x, t));\\n  return add32((a << s) | (a >>> (32 - s)), b);\\n}\\n\\nfunction ff(a, b, c, d, x, s, t) {\\n  return cmn((b & c) | (~b & d), a, b, x, s, t);\\n}\\n\\nfunction gg(a, b, c, d, x, s, t) {\\n  return cmn((b & d) | (c & ~d), a, b, x, s, t);\\n}\\n\\nfunction hh(a, b, c, d, x, s, t) {\\n  return cmn(b ^ c ^ d, a, b, x, s, t);\\n}\\n\\nfunction ii(a, b, c, d, x, s, t) {\\n  return cmn(c ^ (b | ~d), a, b, x, s, t);\\n}\\n\\nfunction md51(s) {\\n  txt = \\"\\";\\n  var n = s.length,\\n    state = [1732584193, -271733879, -1732584194, 271733878],\\n    i;\\n  for (i = 64; i <= s.length; i += 64) {\\n    md5cycle(state, md5blk(s.substring(i - 64, i)));\\n  }\\n  s = s.substring(i - 64);\\n  var tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\\n  for (i = 0; i < s.length; i++)\\n    tail[i >> 2] |= s.charCodeAt(i) << (i % 4 << 3);\\n  tail[i >> 2] |= 0x80 << (i % 4 << 3);\\n  if (i > 55) {\\n    md5cycle(state, tail);\\n    for (i = 0; i < 16; i++) tail[i] = 0;\\n  }\\n  tail[14] = n * 8;\\n  md5cycle(state, tail);\\n  return state;\\n}\\n\\n/* there needs to be support for Unicode here,\\n * unless we pretend that we can redefine the MD-5\\n * algorithm for multi-byte characters (perhaps\\n * by adding every four 16-bit characters and\\n * shortening the sum to 32 bits). Otherwise\\n * I suggest performing MD-5 as if every character\\n * was two bytes--e.g., 0040 0025 = @%--but then\\n * how will an ordinary MD-5 sum be matched?\\n * There is no way to standardize text to something\\n * like UTF-8 before transformation; speed cost is\\n * utterly prohibitive. The JavaScript standard\\n * itself needs to look at this: it should start\\n * providing access to strings as preformed UTF-8\\n * 8-bit unsigned value arrays.\\n */\\nfunction md5blk(s) {\\n  /* I figured global was faster.   */\\n  var md5blks = [],\\n    i; /* Andy King said do it this way. */\\n  for (i = 0; i < 64; i += 4) {\\n    md5blks[i >> 2] =\\n      s.charCodeAt(i) +\\n      (s.charCodeAt(i + 1) << 8) +\\n      (s.charCodeAt(i + 2) << 16) +\\n      (s.charCodeAt(i + 3) << 24);\\n  }\\n  return md5blks;\\n}\\n\\nvar hex_chr = \\"0123456789abcdef\\".split(\\"\\");\\n\\nfunction rhex(n) {\\n  var s = \\"\\",\\n    j = 0;\\n  for (; j < 4; j++)\\n    s += hex_chr[(n >> (j * 8 + 4)) & 0x0f] + hex_chr[(n >> (j * 8)) & 0x0f];\\n  return s;\\n}\\n\\nfunction hex(x) {\\n  for (var i = 0; i < x.length; i++) x[i] = rhex(x[i]);\\n  return x.join(\\"\\");\\n}\\n\\nfunction md5(s) {\\n  return hex(md51(s));\\n}\\n\\nfunction add32(a, b) {\\n  return (a + b) & 0xffffffff;\\n}\\n\\noutputs.r.next(md5(inputs.str));\\n"},"MergeObjects":{"id":"MergeObjects","inputs":{"obj1":{"mode":"required","type":"any"},"obj2":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"// magic here\\nconst {obj1, obj2} = inputs;\\noutputs.r.next({...obj1, ...obj2});"},"MillisToDateString":{"id":"MillisToDateString","inputs":{"ms":{"mode":"required","type":"any"},"locale":{"mode":"required-if-connected","type":"any"},"options":{"mode":"required-if-connected","type":"any"}},"outputs":{"dateString":{"type":"any"}},"completionOutputs":["dateString"],"fnCode":"// magic here\\n\\nconst {ms, locale, options} = inputs;\\nconst {dateString} = outputs;\\n\\nconst _locale = locale || \'en-US\';\\nconst _options = options || {};\\n\\nconst str = new Date(ms).toLocaleDateString(_locale, _options);\\n\\ndateString.next(str);"},"MillisToString":{"id":"MillisToString","inputs":{"ms":{"mode":"required","type":"any"},"locale":{"mode":"required-if-connected","type":"any"},"options":{"mode":"required-if-connected","type":"any"}},"outputs":{"dateString":{"type":"any"}},"completionOutputs":["dateString"],"fnCode":"// magic here\\n\\nconst {ms, locale, options} = inputs;\\nconst {dateString} = outputs;\\n\\nconst _locale = locale || \'en-US\';\\nconst _options = options || {};\\n\\nconst str = new Date(ms).toLocaleString(_locale, _options);\\n\\ndateString.next(str);"},"Modulo":{"id":"Modulo","inputs":{"n1":{"mode":"required","type":"any"},"n2":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { n1, n2 } = inputs;\\nconst { r } = outputs;\\n      \\n// magic here\\nr.next(n1 % n2);\\n      "},"MouseEvent":{"id":"MouseEvent","inputs":{},"outputs":{"event":{"type":"any"}},"completionOutputs":["never"],"fnCode":"getDocument().body.addEventListener(\'mousemove\', ev => {\\n  outputs.event.next(ev);\\n})"},"Multiply":{"id":"Multiply","inputs":{"n1":{"mode":"required","type":"any"},"n2":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { n1, n2 } = inputs;\\nconst { r } = outputs;\\n      \\n// magic here\\nr.next(n1 * n2);\\n      "},"Now":{"id":"Now","inputs":{"trigger":{"mode":"optional","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { trigger } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nr.next(Date.now());\\n        "},"Object-builder-75360":{"id":"Object-builder-75360","inputs":{"statusCode":{"mode":"required","type":"any"},"body":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"object"}},"customViewCode":"{\\"statusCode\\":\\"${statusCode}\\",\\"body\\":\\"${body}\\"}","fnCode":"outputs.r.next(compileObjectTemplate(\\"%7B%22statusCode%22%3A%22%24%7BstatusCode%7D%22%2C%22body%22%3A%22%24%7Bbody%7D%22%7D\\", inputs));"},"Parse":{"id":"Parse","inputs":{"str":{"mode":"required","type":"any"}},"outputs":{"obj":{"type":"any"},"e":{"type":"any"}},"fnCode":"const { str } = inputs;\\nconst { obj, e } = outputs;\\n        \\n// magic here\\ntry {\\n    obj.next(JSON.parse(str));\\n} catch (err) {\\n    console.error(\\"error parsing json\\", err, str);\\n    e.next({str, e});\\n}"},"ParseInt":{"id":"ParseInt","inputs":{"str":{"mode":"required","type":"any"},"base":{"mode":"optional","type":"any"}},"outputs":{"r":{"type":"any"},"e":{"type":"any"}},"fnCode":"const { str, base } = inputs;\\nconst { r, e } = outputs;\\n        \\n// magic here\\nconst int = parseInt(str, base || 10);\\nif (isNaN(int)) {\\n    e.next(str);\\n} else {\\n    r.next(int);\\n}  "},"Pick":{"id":"Pick","inputs":{"obj":{"mode":"required","type":"any"},"key":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"},"e":{"type":"any"}},"customViewCode":"<% if (inputs.key) { %> Pick \\"<%- inputs.key %>\\" <% } else { %> Pick <% } %>","completionOutputs":["r","e"],"fnCode":"const { obj, key } = inputs;\\nconst { r, e } = outputs;\\n\\n// magic here\\n\\nlet hadError = false;\\n\\nconst matches = {};\\n\\nconst normalized = key.replace(/\\\\[\\"(([^\\"])+)\\"\\\\]/g, (match, p1, p2, offset) => {\\n  const key = `__$$KEY$$__${offset}`;\\n  matches[key] = p1;\\n  return `.${key}`;\\n});\\n\\n// outputs.log.next({matches, normalized});\\n\\nconst path = normalized.split(\\".\\");\\nlet o = { ...obj };\\nfor (let p of path) {\\n  const key = matches[p] || p;\\n  if (o && isDefined(o[key]) && o[key] !== null) {\\n    o = o[key];\\n  } else {\\n    e.next(obj);\\n    hadError = true;\\n  }\\n}\\n\\nif (!hadError) {\\n  r.next(o);\\n}\\n"},"Publish":{"id":"Publish","inputs":{"key":{"mode":"required","type":"any"},"value":{"mode":"required","type":"any"}},"outputs":{},"fnCode":"// magic here\\n\\nPubSub.publish(inputs.key, inputs.value);"},"Random":{"id":"Random","inputs":{"trigger":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { trigger } = inputs;\\nconst { r } = outputs;\\n      \\nr.next(Math.random());\\n      "},"RegexMatch":{"id":"RegexMatch","inputs":{"str":{"mode":"required","type":"any"},"pattern":{"mode":"required","type":"any"}},"outputs":{"match":{"type":"any"},"noMatch":{"type":"any"}},"fnCode":"const { str, pattern } = inputs;\\nconst { match, noMatch } = outputs;\\n        \\n// magic here\\nconst regex = new RegExp(pattern);\\nconst matches = str.match(regex);\\n\\nif (matches) {\\n    match.next(matches);\\n} else {\\n    noMatch.next(str);\\n}   "},"ReloadPage":{"id":"ReloadPage","inputs":{"reload":{"mode":"required","type":"any"}},"outputs":{},"fnCode":"const document = getDocument();\\ndocument.location.reload();\\n"},"RemoveAttr":{"id":"RemoveAttr","inputs":{"obj":{"mode":"required","type":"any"},"k":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { obj, k } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nconst o = { ...obj };\\ndelete o[k];\\nr.next(o);        "},"Repeat":{"id":"Repeat","inputs":{"val":{"mode":"required","type":"any"},"count":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"// magic here\\nconst {val, count} = inputs;\\nconst {r} = outputs;\\n\\nfor (let i = 0; i < count; i++) {\\n    r.next(val);\\n}\\n"},"Replace":{"id":"Replace","inputs":{"str":{"mode":"required","type":"any"},"from":{"mode":"required","type":"any"},"to":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { str, from, to } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nr.next(str.replace(from, to));"},"Round":{"id":"Round","inputs":{"n":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { n } = inputs;\\nconst { r } = outputs;\\n      \\n// magic here\\nr.next(Math.round(n));\\n      "},"RoundRobin3":{"id":"RoundRobin3","inputs":{"item":{"mode":"required","type":"any"}},"outputs":{"r1":{"type":"any"},"r2":{"type":"any"},"r3":{"type":"any"}},"completionOutputs":["never"],"reactiveInputs":["item"],"fnCode":"// magic here\\nconst {state} = adv;\\nconst {r1, r2, r3} = outputs;\\nconst curr = state.get(\'curr\') || 0;\\n\\nconst o = [r1, r2, r3][curr];\\n\\nconst nextCurr = (curr + 1) % 3;\\n\\nlog(nextCurr, curr);\\no.next(inputs.item);\\nstate.set(\'curr\', nextCurr);"},"ScanValue":{"id":"ScanValue","inputs":{"value":{"mode":"required","type":"any"},"initial":{"mode":"required","type":"any"},"onValue":{"mode":"required","type":"part({\\"prevValue\\": \\"any\\", \\"currValue\\": \\"any\\"}|{\\"newVal\\": \\"any\\"})"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["none"],"reactiveInputs":["value"],"fnCode":"const { state, insId, execute, onCleanup, onArg } = adv;\\nconst {initial, value, onValue } = inputs;\\nconst {r} = outputs;\\n\\nconst prevValue = state.get(\\"prevValue\\") || initial;\\n  \\nconst newVal = dynamicOutput();\\nconst prevValueArg = dynamicPartInput();\\nconst currValue = dynamicPartInput();\\nconst clean = execute(\\nonValue,\\n{ prevValue: prevValueArg, currValue },\\n{ newVal },\\n`${insId}-scan`\\n);\\n\\nlog({value, prevValue});\\n\\nconst s = newVal.subscribe((val) => {\\n    state.set(\\"prevValue\\", val);\\n    r.next(val);\\n    s.unsubscribe();\\n    clean();\\n});\\n\\ncurrValue.subject.next(value);\\nprevValueArg.subject.next(prevValue);\\n\\n"},"SetAttr":{"id":"SetAttr","inputs":{"obj":{"mode":"required","type":"any"},"k":{"mode":"required","type":"any"},"v":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { obj, k, v } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nr.next({ ...obj, [k]: v });"},"SetItem":{"id":"SetItem","inputs":{"key":{"mode":"required","type":"any"},"value":{"mode":"required","type":"any"}},"outputs":{"ok":{"type":"any"}},"completionOutputs":["ok"],"fnCode":"// magic here\\n\\nconst {key, value} = inputs;\\nmongoDb.collection(\'__KVStore\').updateOne({id: key}, {$set: {value}}, {upsert: true})\\n    .then(() => outputs.ok.next(value))\\n    .catch((err) => adv.onError(err));"},"SetState":{"id":"SetState","inputs":{"key":{"mode":"required","type":"any"},"value":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"fnCode":"const {state} = adv;\\nconst {key, value} = inputs;\\n\\nstate.set(key, value);\\noutputs.r.next(value);\\n\\n"},"SliceList":{"id":"SliceList","inputs":{"list":{"mode":"required","type":"any"},"begin":{"mode":"required","type":"any"},"end":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"// magic here\\nconst { list, begin, end} = inputs;\\noutputs.r.next(\\n    list.slice(begin, end)\\n);"},"Split":{"id":"Split","inputs":{"str":{"mode":"required","type":"any"},"by":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { str, by } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nr.next(str.split(by));"},"SpreadList":{"id":"SpreadList","inputs":{"list":{"mode":"required","type":"any"}},"outputs":{"length":{"type":"any"},"idx":{"type":"any"},"val":{"type":"any"}},"fnCode":"// magic here\\nconst { list } = inputs;\\nconst { val, idx, length } = outputs;\\nlength.next(list.length);\\nlist.forEach((v, i) => {\\n    val.next(v);\\n    idx.next(i);\\n});"},"SpreadList5":{"id":"SpreadList5","inputs":{"list":{"mode":"required","type":"any"}},"outputs":{"first":{"type":"any"},"second":{"type":"any"},"rest":{"type":"any"}},"fnCode":"const { list } = inputs;\\nconst { first, second, rest } = outputs;\\n      \\nconst [f, s, r] = list;\\n\\nf && first.next(f);\\ns && second.next(s);\\n\\nr.length && rest.next(r)\\n      "},"SpreadListDelayed":{"id":"SpreadListDelayed","inputs":{"list":{"mode":"required","type":"any"}},"outputs":{"val":{"type":"any"},"idx":{"type":"any"},"length":{"type":"any"}},"fnCode":"// magic here\\nconst { list } = inputs;\\nconst { val, idx, length } = outputs;\\nlength.next(list.length);\\nlist.forEach((v, i) => {\\n    setTimeout(() => {\\n        val.next(v);\\n        idx.next(i);\\n    }, 100 * idx);\\n});"},"StringAppend":{"id":"StringAppend","inputs":{"str":{"mode":"required","type":"any"},"strToAppend":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"// magic here// magic here\\noutputs.r.next(`${inputs.str}${inputs.strToAppend}`);"},"Stringify":{"id":"Stringify","inputs":{"obj":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { obj } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nr.next(JSON.stringify(obj));"},"StringIncludes":{"id":"StringIncludes","inputs":{"str":{"mode":"required","type":"any"},"strToFind":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"},"else":{"type":"any"}},"customViewCode":"","fnCode":"const { str, strToFind } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nif (str.includes(strToFind)) {\\n    r.next(str);\\n}  else {\\n    outputs[\'else\'].next(str);\\n}"},"Subscribe":{"id":"Subscribe","inputs":{"key":{"mode":"required","type":"any"}},"outputs":{"val":{"type":"any"}},"completionOutputs":["never"],"fnCode":"// magic here\\nconst token = PubSub.subscribe(inputs.key, (_, data) => {\\n    outputs.val.next(data);\\n});\\n\\nadv.onCleanup(() => {\\n    log(\'Unsubscribing!\');\\n    PubSub.unsubscribe(token);\\n});"},"SubStr":{"id":"SubStr","inputs":{"str":{"mode":"required","type":"any"},"from":{"mode":"required","type":"any"},"to":{"mode":"optional","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { str, from, to } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nr.next(str.substring(from, to));    "},"Subtract":{"id":"Subtract","inputs":{"n1":{"mode":"required","type":"any"},"n2":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"customViewCode":"<% if (inputs.n2) { %>\\n-<%-inputs.n2%>\\n<% } %>","completionOutputs":["r"],"fnCode":"const { n1, n2 } = inputs;\\nconst { r } = outputs;\\n      \\nr.next(n1 - n2);\\n      "},"Switch":{"id":"Switch","inputs":{"val":{"mode":"required","type":"any"},"case1":{"mode":"required","type":"any"},"case2":{"mode":"required-if-connected","type":"any"},"case3":{"mode":"required-if-connected","type":"any"},"case4":{"mode":"required-if-connected","type":"any"},"case5":{"mode":"required-if-connected","type":"any"},"transform":{"mode":"required-if-connected","type":"any"}},"outputs":{"is1":{"type":"any"},"is2":{"type":"any"},"is3":{"type":"any"},"is4":{"type":"any"},"is5":{"type":"any"},"other":{"type":"any"}},"fnCode":"const { val, case1, case2, case3, case4, case5, transform } = inputs;\\nconst { is1, is2, is3, is4, is5, other } = outputs;\\n\\nconst valueToRespond = isDefined(transform) ? transform : val;\\n// magic here\\nswitch (val) {\\n    case case1:\\n        is1.next(valueToRespond);\\n        break;\\n    case case2:\\n        is2.next(valueToRespond);\\n        break;\\n    case case3:\\n        is3.next(valueToRespond);\\n        break;\\n    case case4:\\n        is4.next(valueToRespond);\\n        break;\\n    case case4:\\n        is5.next(valueToRespond);\\n        break;\\n    default:\\n        other.next(valueToRespond);\\n        break;\\n}"},"Throttle":{"id":"Throttle","inputs":{"value":{"mode":"required","type":"any"},"threshold":{"mode":"required","type":"any"}},"outputs":{"result":{"type":"any"}},"customViewCode":"","reactiveInputs":["value"],"fnCode":"const { value, ms } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\n\\nconst last = adv.state.get(\\"last\\") || 0;\\nconst now = Date.now();\\nconst delta = now - last;\\nadv.state.set(\\"last\\", Date.now());\\n  \\nif (delta > ms) {\\n    result.next(value);\\n} "},"Transform":{"id":"Transform","inputs":{"from":{"mode":"required","type":"any"},"to":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"customViewCode":"<% if (inputs.to) { %> to \\"<%- inputs.to %>\\" <% } %>","completionOutputs":["r"],"fnCode":"const { to } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nr.next(to);"},"WebScraper":{"id":"WebScraper","inputs":{"url":{"mode":"required","type":"any"},"config":{"mode":"required","type":"any"}},"outputs":{"result":{"type":"any"}},"completionOutputs":["result"],"fnCode":"// magic here\\nconst {onError} = adv;\\n\\nscrapeIt(inputs.url, inputs.config).then(({ data, response }) => {\\n    outputs.result.next(data)\\n}, err => {\\n    onError(err);\\n})"}}')}}]);