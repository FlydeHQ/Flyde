"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[710],{7695:function(n,e,t){var r=this&&this.__assign||function(){return r=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},r.apply(this,arguments)},o=this&&this.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]])}return t},i=this&&this.__spreadArray||function(n,e){for(var t=0,r=e.length,o=n.length;t<r;t++,o++)n[o]=e[t];return n};Object.defineProperty(e,"__esModule",{value:!0}),e.customRepoToPartRepo=e.codePartToNative=void 0;var u=t(4206),s=t(8265),a=t(4048),c=t(8265);e.codePartToNative=function(n,e){void 0===e&&(e={});var p=t.g&&t.g.vm2||"undefined"==typeof window?t.g.vm2:window&&window.vm2,d=n.fnCode,l=o(n,["fnCode"]),y=s.debugLogger("code-part:"+n.id),f="\n  try {\n    "+d+"\n  } catch (e) {\n    adv.onError(e);\n  }\n  ",m=new p.VMScript(f),h=r(r({},l),{fn:function(t,o,d){var l=new p.VM({sandbox:r({inputs:t,outputs:o,setInterval:setInterval,clearInterval:clearInterval,setTimeout:setTimeout,clearTimeout:clearTimeout,encodeURIComponent:encodeURIComponent,adv:d,log:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];y.apply(void 0,i(["Log from code part "+n.id+" ["+d.insId+"]"],e))},axios:u.default,DEFAULT_AXIOS_TIMEOUT:15e3,dynamicPartInput:a.dynamicPartInput,dynamicPartArg:a.dynamicPartInput,dynamicOutput:c.dynamicOutput,isDefined:c.isDefined,compileStringTemplate:s.compileStringTemplate,compileObjectTemplate:s.compileObjectTemplate,__FLYDE_MODE:"production"},e)});l.run(m)}});return h};e.customRepoToPartRepo=function(n,t){void 0===t&&(t={});var r={};for(var o in n){var i=n[o];r[o]=a.isCodePart(i)?e.codePartToNative(i,t):i}return r}},8541:function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.cappedArrayDebounce=void 0;e.cappedArrayDebounce=function(n,e,t,r){void 0===r&&(r=500);var o=[],i=null,u=null;return function(s){clearTimeout(i),o.push(s),u||(u=setTimeout((function(){n(o),clearTimeout(i),u=null}),r)),o.length>=t?(n(o),clearTimeout(u),u=null,o=[]):i=setTimeout((function(){n(o),clearTimeout(u),u=null,o=[]}),e)}}},6615:function(n,e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.dataShaper=e.DataShapeType=void 0,function(n){n[n.STRING=0]="STRING",n[n.NUMBER=1]="NUMBER",n[n.BOOLEAN=2]="BOOLEAN",n[n.ARRAY=3]="ARRAY",n[n.OBJECT=4]="OBJECT",n[n.NULL=5]="NULL"}(t=e.DataShapeType||(e.DataShapeType={}));var r={string:t.STRING,number:t.NUMBER,boolean:t.BOOLEAN,object:t.OBJECT,array:t.ARRAY,null:t.NULL};e.dataShaper=function(n,t,o){void 0===t&&(t=5),void 0===o&&(o=5);var i,u,s=null===(i=n)?"null":typeof i;if("object"===s){if(Array.isArray(n))return t>1?n.filter((function(n,e){return e<o})).map((function(n){return e.dataShaper(n,t-1,o)})):r.array;if(t>1){var a={};for(var c in n)a[c]=e.dataShaper(n[c],t-1,o);return u=a,Object.keys(u).sort().reduce((function(n,e){return n[e]=u[e],n}),{})}return r.object}return r[s]}},189:function(n,e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.debugLogger=void 0;var r=t(6292).default("flyde");e.debugLogger=function(n){return r.extend(n)}},8132:function(n,e,t){var r=this&&this.__assign||function(){return r=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},r.apply(this,arguments)},o=this&&this.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]])}return t},i=this&&this.__spreadArray||function(n,e){for(var t=0,r=e.length,o=n.length;t<r;t++,o++)n[o]=e[t];return n};Object.defineProperty(e,"__esModule",{value:!0}),e.hashProject=e.hashPart=void 0;var u=t(1586),s=t(8265),a=function(n){return u(n)};e.hashPart=function(n){var e={id:n.id,completionOutputs:n.completionOutputs,reactiveInputs:n.reactiveInputs,inputs:n.inputs,outputs:n.outputs};if(s.isGroupedPart(n)){var t=n.instances,u=n.id,c=n.connections,p=t.map((function(n){n.pos;return o(n,["pos"])}));p.sort((function(n,e){return n.id.localeCompare(e.id)}));var d=i([],c);d.sort((function(n,e){var t=n.from.insId+"."+n.from.pinId,r=e.from.insId+"."+e.from.pinId;return t.localeCompare(r)}));var l=JSON.stringify(r({id:u,cleanedInstances:p,conns:d},e));return a(l)}if(s.isCodePart(n)){var y=n.fnCode,f=n.customViewCode;l=JSON.stringify(r({fnCode:y,customViewCode:f},e));return a(l)}throw new Error("Hashing native parts unsupported")};e.hashProject=function(n){var t=n.slug,r=n.id,o=n.customRepo,i=n.env,u=n.triggers,s=Object.values(o).map(e.hashPart).join(""),c=JSON.stringify({id:r,slug:t,env:i,triggers:u});return a(c+s)}},5821:function(n,e,t){var r=this&&this.__createBinding||(Object.create?function(n,e,t,r){void 0===r&&(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){void 0===r&&(r=t),n[r]=e[t]}),o=this&&this.__exportStar||function(n,e){for(var t in n)"default"===t||Object.prototype.hasOwnProperty.call(e,t)||r(e,n,t)};Object.defineProperty(e,"__esModule",{value:!0}),e.DepGraph=void 0,o(t(9985),e),o(t(4919),e),o(t(189),e),o(t(8541),e),o(t(4919),e),o(t(8132),e),o(t(7748),e),o(t(6615),e),e.DepGraph=t(9280).DepGraph},9985:function(n,e){var t=this&&this.__assign||function(){return t=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.testDataCreator=void 0;e.testDataCreator=function(n){return function(e){void 0===e&&(e={});var r="function"==typeof n?n():n,o=e;return t(t({},r),o)}}},4919:function(n,e){var t=this&&this.__assign||function(){return t=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},t.apply(this,arguments)},r=this&&this.__awaiter||function(n,e,t,r){return new(t||(t=Promise))((function(o,i){function u(n){try{a(r.next(n))}catch(e){i(e)}}function s(n){try{a(r.throw(n))}catch(e){i(e)}}function a(n){var e;n.done?o(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(u,s)}a((r=r.apply(n,e||[])).next())}))},o=this&&this.__generator||function(n,e){var t,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;u;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(n,u)}catch(s){i=[6,s],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__spreadArray||function(n,e){for(var t=0,r=e.length,o=n.length;t<r;t++,o++)n[o]=e[t];return n};Object.defineProperty(e,"__esModule",{value:!0}),e.eventually=e.delay=e.noop=e.removeDupes=e.ensure=e.isOptionalType=e.isDefined=e.containsAll=e.shuffle=e.randomInts=e.repeat=e.pickRandom=e.randomPos=e.randomInt=e.pickSecond=e.pickFirst=e.fromEntries=e.entries=e.okeys=e.values=e.keys=e.filterOMap=e.mapOMap=void 0;e.mapOMap=function(n,r){return e.entries(n).map((function(n){var e=n[0],t=n[1];return[e,r(e,t)]})).reduce((function(n,e){var r,o=e[0],i=e[1];return t(t({},n),((r={})[o]=i,r))}),{})};e.filterOMap=function(n,r){return e.entries(n).filter((function(n){var e=n[0],t=n[1];return r(e,t)})).reduce((function(n,e){var r,o=e[0],i=e[1];return t(t({},n),((r={})[o]=i,r))}),{})};e.keys=function(n){return Object.keys(n)};e.values=function(n){return Object.values(n)},e.okeys=e.keys;e.entries=function(n){return e.okeys(n).map((function(e){return[e,n[e]]}))};e.fromEntries=function(n){return n.reduce((function(n,e){var r,o=e[0],i=e[1];return t(t({},n),((r={})[o]=i,r))}),{})};e.pickFirst=function(n){return n[0]};e.pickSecond=function(n){return n[1]};e.randomInt=function(n,e){void 0===e&&(e=0);var t=Math.random();return e+Math.floor((n-e)*t)};e.randomPos=function(n,t){return void 0===n&&(n=1e3),void 0===t&&(t=0),{x:e.randomInt(n,t),y:e.randomInt(n,t)}};e.pickRandom=function(n){return n[e.randomInt(n.length)]};e.repeat=function(n,e){return"x".repeat(n).split("").map((function(n,t){return e(t)}))};e.randomInts=function(n,t,r){return void 0===t&&(t=100),void 0===r&&(r=0),e.repeat(n,(function(){return e.randomInt(t,r)}))};e.shuffle=function(n){for(var e,t=i([],n),r=t.length-1;r>=0;r--){var o=Math.floor(Math.random()*(r+1));e=[t[o],t[r]],t[r]=e[0],t[o]=e[1]}return t};e.containsAll=function(n,e){return e.every((function(e){return n.includes(e)}))};e.isDefined=function(n){return void 0!==n};e.isOptionalType=function(n){return/\?$/.test(n)};e.ensure=function(n,e){if(void 0===n)throw new Error(e||"Undefined value passed");return n};e.removeDupes=function(n){return Array.from(new Set(n))};e.noop=function(){};e.delay=function(n){return new Promise((function(e){return setTimeout(e,n)}))};e.eventually=function(n,t,i,u){return void 0===t&&(t=3e3),void 0===i&&(i=100),void 0===u&&(u=new Set),r(void 0,void 0,void 0,(function(){var r,s,a,c;return o(this,(function(o){switch(o.label){case 0:if(t<0)throw r=Array.from(u).reduce((function(n,e,t){return n+"\n\t\t"+(t+1)+". "+e}),""),new Error("[Eventually timeout exceeded after: timeout with error]: "+r);o.label=1;case 1:return o.trys.push([1,3,,5]),[4,n()];case 2:return o.sent(),[3,5];case 3:return s=o.sent(),a=Date.now(),[4,e.delay(i)];case 4:return o.sent(),c=Date.now()-a,u.add(s.message),[2,e.eventually(n,t-c,i,u)];case 5:return[2]}}))}))}},7748:function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.compileObjectTemplate=e.compileStringTemplate=void 0;e.compileStringTemplate=function(n,e){var t=decodeURIComponent(n);return Object.keys(e).forEach((function(n){var r=e[n],o=new RegExp("\\$\\{"+n+"\\}","g");t=t.replace(o,r)})),t};e.compileObjectTemplate=function(n,e){var t=decodeURIComponent(n);return Object.keys(e).forEach((function(n){var r=e[n],o=JSON.stringify(r),i=new RegExp('"\\$\\$\\{'+n+'\\}"',"g"),u=new RegExp("\\$\\{"+n+"\\}","g"),s="string"==typeof r?r.replace(/"/g,(function(n,e,t){return"\\"!==t[e-1]?'\\"':t[e]})):r;t=t.replace(i,o).replace(u,s).replace(/\n/g,"\\n")})),JSON.parse(t)}},1076:function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.connection=e.connectionData=e.connectionDataEquals=e.connectionNodeEquals=e.connectionNode=e.externalConnectionNode=e.isInternalConnection=e.isExternalConnection=e.isInternalConnectionNode=e.isExternalConnectionNode=e.TRIGGER_PIN_ID=e.ERROR_PIN_ID=e.THIS_INS_ID=void 0,e.THIS_INS_ID="__this",e.ERROR_PIN_ID="__error",e.TRIGGER_PIN_ID="__trigger";e.isExternalConnectionNode=function(n){return n.insId===e.THIS_INS_ID};e.isInternalConnectionNode=function(n){return n.insId!==e.THIS_INS_ID};e.isExternalConnection=function(n){var t=n.from,r=n.to;return e.isExternalConnectionNode(t)||e.isExternalConnectionNode(r)};e.isInternalConnection=function(n){return!e.isExternalConnection(n)};e.externalConnectionNode=function(n){return{insId:e.THIS_INS_ID,pinId:n}};e.connectionNode=function(n,e){return{insId:n,pinId:e}};e.connectionNodeEquals=function(n,e){return n.insId===e.insId&&n.pinId===e.pinId};e.connectionDataEquals=function(n,t){return!(!n||!t)&&(e.connectionNodeEquals(n.from,t.from)&&e.connectionNodeEquals(n.to,t.to))},e.connectionData=function(n,t,r){var o="string"==typeof n?n.split("."):n,i="string"==typeof t?t.split("."):t;if(o.length>2||i.length>2)throw new Error("invalid source or target to connection data - "+n+" / "+t);return{from:2===o.length?e.connectionNode(o[0],o[1]):e.externalConnectionNode(o[0]),to:2===i.length?e.connectionNode(i[0],i[1]):e.externalConnectionNode(i[0]),delayed:r}};e.connection=function(n,e,t){return void 0===t&&(t=!1),{from:n,to:e,delayed:t}}},6485:function(n,e,t){var r=this&&this.__createBinding||(Object.create?function(n,e,t,r){void 0===r&&(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){void 0===r&&(r=t),n[r]=e[t]}),o=this&&this.__exportStar||function(n,e){for(var t in n)"default"===t||Object.prototype.hasOwnProperty.call(e,t)||r(e,n,t)},i=this&&this.__awaiter||function(n,e,t,r){return new(t||(t=Promise))((function(o,i){function u(n){try{a(r.next(n))}catch(e){i(e)}}function s(n){try{a(r.throw(n))}catch(e){i(e)}}function a(n){var e;n.done?o(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(u,s)}a((r=r.apply(n,e||[])).next())}))},u=this&&this.__generator||function(n,e){var t,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;u;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(n,u)}catch(s){i=[6,s],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.connect=void 0;var s=t(4048),a=t(385),c=t(5821),p=t(1076);o(t(1076),e);e.connect=function(n,e,t,r,o,d,l){void 0===t&&(t={}),void 0===r&&(r="root"),void 0===o&&(o={bob:new Map}),void 0===d&&(d=c.noop),void 0===l&&(l={});var y=n.id,f=n.connections,m=n.instances,h=y||"connected-part"+c.randomInt(999);return{inputs:n.inputs,outputs:n.outputs,id:h,completionOutputs:n.completionOutputs,reactiveInputs:n.reactiveInputs,fn:function(y,v){var g=[],b=new c.DepGraph({}),I=new Map,x=new Map,C=new Map,O=new Map,k=new Map,q=new Map;m.forEach((function(n){var t=s.getPart(n,e),r=n.id;I.set(n,r),x.set(r,n),b.addNode(r);var o=Object.keys(t.inputs),i=Object.keys(t.outputs),u={},a={};if(o.forEach((function(e){var t=(n.inputConfig||{})[e]||s.queueInputPinConfig();s.isStaticInputPinConfig(t)?u[e]=s.staticPartInput(t.value):u[e]=s.dynamicPartInput({config:t})})),u[p.TRIGGER_PIN_ID]=s.dynamicPartInput({config:s.queueInputPinConfig()}),f.some((function(e){return p.isInternalConnectionNode(e.to)&&e.to.insId===n.id&&e.to.pinId===p.TRIGGER_PIN_ID}))&&n.inputConfig&&n.inputConfig[p.TRIGGER_PIN_ID])throw"Trigger connection can not be configured";i.forEach((function(n){var e=s.dynamicOutput();a[n]=e})),f.some((function(e){return p.isInternalConnectionNode(e.from)&&e.from.insId===n.id&&e.from.pinId===p.ERROR_PIN_ID}))&&(a[p.ERROR_PIN_ID]=s.dynamicOutput()),C.set(r,u),O.set(r,a)}));var E=new Set;return f.forEach((function(t){var r=t.from,o=t.to,a=r.insId,c=r.pinId,d=o.insId,l=o.pinId,y=O.get(a),f=C.get(d);if(p.isInternalConnectionNode(o)&&E.add(o.insId+"."+o.pinId),p.isExternalConnection(t))if(p.isExternalConnectionNode(r)){var m=f[o.pinId];if(!m)throw new Error("Input "+o.pinId+" of instance "+d+" not found");(v=k.get(r.pinId)||[]).push(m),k.set(r.pinId,v)}else{var v,I=y[r.pinId];if(!I)throw new Error("Output "+r.pinId+" of instance "+a+" not found");(v=q.get(o.pinId)||[]).push(I),q.set(o.pinId,v)}else{if(!y)throw new Error("No outputs found for instance ["+a+"]");if(!f)throw x.has(d)?new Error("No inputs found for instance ["+d+"]"):new Error("Instance with id ["+d+"] does not exist!");var w=y[c];if(!w)throw new Error("Output source - ["+r+"] not found in part ["+h+"]");var S=f[l],_=x.get(a);if(!_&&a!==p.THIS_INS_ID)throw new Error("Instance ["+a+"] does not exist! failed to connect ["+r+"] -> ["+o+"]");var P=(_?s.getPart(_,e):n).outputs[c];if(P&&P.delayed||t.delayed||a!==p.THIS_INS_ID&&d!==p.THIS_INS_ID&&b.addDependency(a,d),!S)throw new Error("Target arg - ["+o+"] not found in part ["+h+"]");var T=w.subscribe((function(n){return i(void 0,void 0,void 0,(function(){return u(this,(function(e){if(!s.isDynamicInput(S))throw console.info(S),new Error("Impossible state listening to non dynamic input - "+d+"."+l);return S.subject.next(n),[2]}))}))}));g.push((function(){return T.unsubscribe()}))}})),c.okeys(v).forEach((function(n){(q.get(n)||[]).forEach((function(e){var t=e.subscribe((function(e){return i(void 0,void 0,void 0,(function(){return u(this,(function(t){return v[n].next(e),[2]}))}))}));g.push((function(){return t.unsubscribe()}))}))})),b.overallOrder().map((function(n){return x.get(n)})).forEach((function(n){var i=C.get(n.id),u=O.get(n.id),c=s.getPart(n,e);if(!i)throw new Error("Unexpected error - args not found when running "+n);if(!u)throw new Error("Unexpected error - outputs not found when running "+n);for(var p in i){var y=n.inputConfig[p];E.has(n.id+"."+p)||s.isStaticInputPinConfig(y)||delete i[p]}var f=a.execute({part:c,inputs:i,outputs:u,partsRepo:e,_debugger:t,insId:n.id,extraContext:{},mainState:o,parentInsId:r,onBubbleError:d,env:l});g.push(f)})),Object.keys(y).forEach((function(n){return i(void 0,void 0,void 0,(function(){return u(this,(function(e){return(k.get(n)||[]).forEach((function(e){var t=y[n];if(!s.isDynamicInput(e))throw"todo";c.isDefined(t)&&e.subject.next(t)})),[2]}))}))})),function(){return g.forEach((function(n){try{n()}catch(e){console.error("error unsubscribing",e)}}))}}}}},385:function(n,e,t){var r=this&&this.__assign||function(){return r=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},r.apply(this,arguments)},o=this&&this.__awaiter||function(n,e,t,r){return new(t||(t=Promise))((function(o,i){function u(n){try{a(r.next(n))}catch(e){i(e)}}function s(n){try{a(r.throw(n))}catch(e){i(e)}}function a(n){var e;n.done?o(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(u,s)}a((r=r.apply(n,e||[])).next())}))},i=this&&this.__generator||function(n,e){var t,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;u;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(n,u)}catch(s){i=[6,s],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.execute=e.INPUTS_STATE_SUFFIX=e.INNER_STATE_SUFFIX=void 0;var u=t(6845),s=t(1730),a=t(8739),c=t(4048),p=t(6485),d=t(3939),l=t(5821),y=t(189),f=t(8265);e.INNER_STATE_SUFFIX="_inner",e.INPUTS_STATE_SUFFIX="_inputs";e.execute=function(n){var t=n.part,m=n.inputs,h=n.outputs,v=n.partsRepo,g=n._debugger,b=void 0===g?{}:g,I=n.insId,x=void 0===I?t.id:I,C=n.extraContext,O=void 0===C?{}:C,k=n.mainState,q=void 0===k?{}:k,E=n.parentInsId,w=void 0===E?"root":E,S=n.onBubbleError,_=void 0===S?u.noop:S,P=n.env,T=void 0===P?{}:P,j=[],D=a(),N=r(r({},O),{ENV:T}),V=f.customRepoToPartRepo(v,N),R=function(n){if(h[p.ERROR_PIN_ID])h[p.ERROR_PIN_ID].next(n);else{var e=n instanceof Error?n:new Error("Raw error: "+n.toString());if(e.message="error in child instance "+x+": "+e.message,e.insId=x,_(e),b.onError){var t=e;t.insId=w+"."+x,b.onError(t)}}},F=function(n){return c.isGroupedPart(n)?p.connect(n,V,b,w+"."+x,q,R,T):c.isCodePart(n)?f.codePartToNative(n,N):n}(t),z=b.onInput||u.noop,A=b.onOutput||u.noop,M={},L={},G=w+"."+x;l.entries(m).forEach((function(n){var e=n[0],t=n[1];if(c.isDynamicInput(t)){var r=c.dynamicPartInput({config:t.config}),u=t.subject.subscribe((function(n){return o(void 0,void 0,void 0,(function(){var t,o;return i(this,(function(i){switch(i.label){case 0:return(t=z({insId:G,pinId:e,val:n,time:Date.now(),partId:F.id,executionId:D}))?[4,t.valuePromise]:[3,2];case 1:return o=i.sent(),r.subject.next(o),[3,5];case 2:return b.debugDelay?[4,l.delay(b.debugDelay)]:[3,4];case 3:i.sent(),i.label=4;case 4:r.subject.next(n),i.label=5;case 5:return[2]}}))}))}));j.push((function(){return u.unsubscribe()})),L[e]=r}else{var s=c.staticPartInput(c.getStaticValue(t.config.value,V,x));L[e]=s}})),l.entries(h).forEach((function(n){var e=n[0],t=n[1],r=c.dynamicOutput(),u=r.subscribe((function(n){return o(void 0,void 0,void 0,(function(){var r,o;return i(this,(function(i){switch(i.label){case 0:return(r=A({insId:G,pinId:e,val:n,time:Date.now(),partId:F.id,executionId:D}))?[4,r.valuePromise]:[3,2];case 1:return o=i.sent(),t.next(o),[3,3];case 2:t.next(n),i.label=3;case 3:return[2]}}))}))}));j.push((function(){return u.unsubscribe()})),M[e]=r}));var U=function(n){var t,o=n.part,i=n.inputs,a=n.outputs,p=n.repo,f=n._debugger,m=n.insId,h=n.parentInsId,v=n.mainState,g=n.onError,b=(n.onBubbleError,n.env),I=o.fn,x=y.debugLogger("core"),C=[],O=f.onProcessing||u.noop,k=f.onInputsStateChange||u.noop,q=(h||"root")+"."+m,E=""+q+e.INNER_STATE_SUFFIX,w=""+q+e.INPUTS_STATE_SUFFIX,S=x.extend(q);v[E]||(v[E]=new Map),v[w]||(v[w]=new Map),v[E];var _,P=v[w],T=function(){var n=Array.from(P.entries()).reduce((function(n,e){var t,o=e[0],u=e[1],s=c.isQueueInputPinConfig(i[o].config,i[o]);return r(r({},n),((t={})[o]=s?null==u?void 0:u.length:1,t))}),{});k({inputs:n,insId:q})},j={execute:function(n,t,r,o){return e.execute({part:n,inputs:t,outputs:r,partsRepo:p,_debugger:f,insId:o})},insId:m,state:v[E],onCleanup:function(n){C.push(n)},onError:function(n){g(n)}},D=!1,N=o.reactiveInputs||[],V=function(){v[E].clear(),l.keys(v).filter((function(n){return n.startsWith(q+".")})).forEach((function(n){v[n]=new Map}))},R=function n(e){var u,p=N.includes(null==e?void 0:e.key);if(D&&!p);else{var y=D&&p;if(d.isPartStateValid(i,P,o,_)||y){var f=void 0;if(D){if(!e)throw new Error("Unexpected state,  got reactive part while not processing and not valid");var m=d.pullValueForExecution(e.key,i[e.key],P,b);f=r(r({},_),((u={})[e.key]=m,u)),T()}else f=d.pullValuesForExecution(i,P,b),_=f,T();var h=new Set;if(o.completionOutputs){O({processing:D=!0,insId:q});var v=new Set(o.completionOutputs);l.entries(a).forEach((function(e){var r=e[0];e[1].pipe(s.first()).subscribe((function(e){h.add(r),Array.from(v.keys()).join(","),Array.from(h.keys()).join(","),v.has(r)&&(O({processing:D=!1,insId:q}),V(),t&&!o.outputs.jsx&&(t(),t=void 0),h.clear(),d.hasNewSignificantValues(i,P,b,o.id)&&n())}))}))}else V();try{S("Running part %s with values %o",o.id,f),t=I(f,a,j)}catch(w){O({processing:D=!1,insId:q}),g(w)}var x=N.find((function(n){return i[n]&&d.peekValueForExecution(n,i[n],P,b,o.id)}));if(x)m=d.peekValueForExecution(x,i[x],P,b,o.id),n({key:x,value:m});else{var C=l.entries(i).find((function(n){var e=n[0],t=n[1],r=c.isQueueInputPinConfig(t.config,t),i=d.peekValueForExecution(e,t,P,b,o.id);if(r)return l.isDefined(i)}));if(C){var k=C[0],E=C[1];m=d.peekValueForExecution(k,E,P,b,o.id),n({key:k,value:m})}}}}};R();var F=d.subscribeInputsToState(i,P,p,m,(function(n,e){x("Got input %s - value is [%o]",n,e),T(),R({key:n,value:e})}));return C.push(F),function(){t&&t(),C.forEach((function(n){return n()}))}}({part:F,inputs:L,outputs:M,repo:V,_debugger:b,insId:x,mainState:q,parentInsId:w,onError:R,onBubbleError:_,env:T});return function(){j.forEach((function(n){return n()})),U()}}},3939:function(n,e,t){var r=this&&this.__assign||function(){return r=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},r.apply(this,arguments)},o=this&&this.__spreadArray||function(n,e){for(var t=0,r=e.length,o=n.length;t<r;t++,o++)n[o]=e[t];return n};Object.defineProperty(e,"__esModule",{value:!0}),e.subscribeInputsToState=e.isPartStateValid=e.hasNewSignificantValues=e.peekValuesForExecution=e.pullValuesForExecution=e.pullValueForExecution=e.peekValueForExecution=void 0;var i=t(4048),u=t(5821),s=t(6485),a=function(n,e){var t=i.extractStaticValue(n);return i.isEnvValue(t)?function(n,e){for(var t=n.split("."),o=r({},e),i=0,s=t;i<s.length;i++){var a=s[i];if(!o||!u.isDefined(o[a])||null===o[a])throw new Error("Cannot find key "+n+" inside obj "+e);o=o[a]}return o}(i.getEnvKeyFromValue(t),e):t};e.peekValueForExecution=function(n,e,t,r,u){var s=t.get(n);if(!e)throw new Error('Trying to peek value of inexsting input in key "'+n+'" in part "'+u+'"');return i.isStaticInput(e)?a(e,r):i.isQueueInputPinConfig(e.config,e)?s?o([],s).shift():void 0:s};e.pullValueForExecution=function(n,e,t,r){var o,u=t.get(n);return i.isStaticInput(e)?o=a(e,r):i.isQueueInputPinConfig(e.config,e)?(o=(u||[]).shift(),t.set(n,u)):(o=u,i.isStickyInputPinConfig(e.config)||t.delete(n)),o};e.pullValuesForExecution=function(n,t,r){return u.entries(n).reduce((function(n,o){var i=o[0],u=o[1];return n[i]=e.pullValueForExecution(i,u,t,r),n}),{})};e.peekValuesForExecution=function(n,t,r,o){return u.entries(n).reduce((function(n,i){var u=i[0],s=i[1];return n[u]=e.peekValueForExecution(u,s,t,r,o),n}),{})};e.hasNewSignificantValues=function(n,t,r,o){return u.entries(n).some((function(n){var s=n[0],a=n[1],c=i.isStaticInput(a),p=e.peekValueForExecution(s,a,t,r,o);return u.isDefined(p)&&!c}))};e.isPartStateValid=function(n,e,t,r){var o=u.keys(n),a=u.keys(t.inputs).filter((function(n){return"required"===t.inputs[n].mode}));return o.includes(s.TRIGGER_PIN_ID)&&a.push(s.TRIGGER_PIN_ID),!!u.containsAll(o,a)&&u.entries(n).filter((function(n){var e=n[0];return!!t.inputs[e]||e===s.TRIGGER_PIN_ID})).every((function(n){var r,o=n[0],s=n[1],a=e.get(o);return"optional"===((null===(r=t.inputs[o])||void 0===r?void 0:r.mode)||"required")||(!!i.isStaticInput(s)||(i.isQueueInputPinConfig(s.config,s)?u.isDefined(a)&&a.length>0:u.isDefined(a)))}))};e.subscribeInputsToState=function(n,e,t,r,o){var s=[];return u.entries(n).forEach((function(n){var t=n[0],r=n[1];if(r&&!i.isStaticInput(r)){var u=r.subject.subscribe((function(n){if(i.isQueueInputPinConfig(r.config,r)){var u=e.get(t)||[];if(!Array.isArray(u))throw new Error("impossible state - state of key "+t+" is set but not an array");u.push(n),e.set(t,u),o(t,n)}else e.set(t,n),o(t,n)}));s.push((function(){return u.unsubscribe()}))}})),function(){return s.forEach((function(n){return n()}))}}},9735:function(n,e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.flydeFlowSchema=void 0;var r=t(9510),o=r.z.strictObject({name:r.z.string(),alias:r.z.string()}),i=r.z.union([r.z.string(),o]),u=r.z.record(r.z.string(),r.z.array(i)),s=r.z.strictObject({x:r.z.number(),y:r.z.number()}),a=r.z.object({fnCode:r.z.string(),templateType:r.z.optional(r.z.string())}),c=r.z.discriminatedUnion("mode",[r.z.strictObject({mode:r.z.literal("static"),value:r.z.any()}),r.z.strictObject({mode:r.z.literal("queue")}),r.z.strictObject({mode:r.z.literal("sticky")})]),p=r.z.object({instances:r.z.array(r.z.strictObject({partId:r.z.string(),pos:s.default({x:0,y:0}),id:r.z.string(),inputConfig:r.z.optional(r.z.record(r.z.string(),c)).default({}),visibleInputs:r.z.optional(r.z.array(r.z.string()))})),connections:r.z.array(r.z.strictObject({from:r.z.strictObject({insId:r.z.string(),pinId:r.z.string()}),to:r.z.strictObject({insId:r.z.string(),pinId:r.z.string()})}))}),d=r.z.object({id:r.z.optional(r.z.string()),inputs:r.z.record(r.z.string(),r.z.union([r.z.string(),r.z.object({mode:r.z.enum(["required","optional","required-if-connected"]),type:r.z.string()})])),outputs:r.z.record(r.z.string(),r.z.union([r.z.string(),r.z.object({type:r.z.string()})])),inputsPosition:r.z.optional(r.z.record(r.z.string(),s)),outputsPosition:r.z.optional(r.z.record(r.z.string(),s)),customViewCode:r.z.optional(r.z.string()),dataBuilderSource:r.z.optional(r.z.string()),templateType:r.z.optional(r.z.string()),completionOutputs:r.z.optional(r.z.array(r.z.string())),reactiveInputs:r.z.optional(r.z.array(r.z.string()))}).and(r.z.union([a,p]));e.flydeFlowSchema=r.z.strictObject({imports:r.z.optional(u).default({}),exports:r.z.optional(r.z.array(r.z.string())).default([]),mainId:r.z.optional(r.z.string()),main:r.z.optional(r.z.any()),parts:r.z.record(r.z.string(),d).default({}),exposedFunctionality:r.z.optional(r.z.array(r.z.strictObject({codeName:r.z.string(),displayName:r.z.string(),inputs:r.z.optional(r.z.array(r.z.string())),path:r.z.string(),line:r.z.string()}))).default([])})},8265:function(n,e,t){var r=this&&this.__createBinding||(Object.create?function(n,e,t,r){void 0===r&&(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){void 0===r&&(r=t),n[r]=e[t]}),o=this&&this.__exportStar||function(n,e){for(var t in n)"default"===t||Object.prototype.hasOwnProperty.call(e,t)||r(e,n,t)};Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectType=e.isStaticValueGroupedPart=void 0,o(t(5821),e);var i=t(4048);o(t(6485),e),o(t(385),e),o(t(4048),e),o(t(163),e),o(t(1922),e),o(t(7695),e),o(t(5281),e),o(t(5596),e),o(t(9735),e);e.isStaticValueGroupedPart=function(n){return n&&!!i.maybeGetStaticValuePartId(""+n)},function(n){n.WEB_UI="web-ui",n.SERVER="server",n.MOBILE="mobile",n.CLI="cli"}(e.ProjectType||(e.ProjectType={}))},163:function(n,e,t){var r=this&&this.__spreadArray||function(n,e){for(var t=0,r=e.length,o=n.length;t<r;t++,o++)n[o]=e[t];return n};Object.defineProperty(e,"__esModule",{value:!0}),e.getPartWithDependencies=void 0;var o=t(4048),i=t(8265);e.getPartWithDependencies=function(n,t,u){if(void 0===u&&(u=[]),o.isCodePart(n))return[n];if(u.includes(n.id))return[];var s=i.removeDupes(n.instances.map((function(n){return n.partId})).filter((function(n){return t[n]}))),a=s.map((function(n){return t[n]})).reduce((function(n,o){return r(r([],n),e.getPartWithDependencies(o,t,r(r([],u),s)))}),[]);return r([n],a)}},4048:function(n,e,t){var r=this&&this.__assign||function(){return r=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},r.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(n,e,t,r){void 0===r&&(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){void 0===r&&(r=t),n[r]=e[t]}),i=this&&this.__exportStar||function(n,e){for(var t in n)"default"===t||Object.prototype.hasOwnProperty.call(e,t)||o(e,n,t)};Object.defineProperty(e,"__esModule",{value:!0}),e.getPartDef=e.getPart=e.getStaticValue=e.maybeGetStaticValuePartId=e.staticPartRefence=e.fromSimplified=e.codePart=e.nativePart=e.groupedPart=e.isCodePart=e.isGroupedPart=e.isNativePart=e.CodePartTemplateTypeInline=void 0;var u=t(5821);i(t(704),e),i(t(5089),e),i(t(4702),e),function(n){n.VALUE="value",n.FUNCTION="function"}(e.CodePartTemplateTypeInline||(e.CodePartTemplateTypeInline={}));e.isNativePart=function(n){return!e.isGroupedPart(n)};e.isGroupedPart=function(n){return!!n.instances};e.isCodePart=function(n){return u.isDefined(n)&&u.isDefined(n.fnCode)},e.groupedPart=u.testDataCreator({id:"grouped-part",inputs:{},outputs:{},instances:[],connections:[],outputsPosition:{},inputsPosition:{}}),e.nativePart=u.testDataCreator({id:"part",inputs:{},outputs:{},fn:u.noop}),e.codePart=u.testDataCreator({id:"part",inputs:{},outputs:{},fnCode:""});e.fromSimplified=function(n){var e=n.fn,t=n.inputTypes,o=n.outputTypes,i=n.id,s=u.entries(t).reduce((function(n,e){var t,o=e[0],i=e[1];return r(r({},n),((t={})[o]={type:i},t))}),{}),a=u.entries(o).reduce((function(n,e){var t,o=e[0],i=e[1];return r(r({},n),((t={})[o]={type:i},t))}),{});return{id:i,inputs:s,outputs:a,fn:e}};e.staticPartRefence=function(n){return"__part:"+n.id};e.maybeGetStaticValuePartId=function(n){var e="string"==typeof n&&n.match(/^__part\:(.*)/);return e?e[1]:null};e.getStaticValue=function(n,t,r){var o=e.maybeGetStaticValuePartId(n);if(o){var i=t[o];if(!i)throw new Error("Instance "+r+" referrer to a part reference "+o+" that does not exist");return i}return n};e.getPart=function(n,e){var t="string"==typeof n?n:n.partId,r=e[t];if(!r)throw new Error("Part with id "+t+" not found");return r};e.getPartDef=function(n,e){var t="string"==typeof n?n:n.partId,r=e[t];if(!r)throw console.error("Part with id "+t+" not found"),new Error("Part with id "+t+" not found");return r}},704:function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.PartInstance=e.partInstance=void 0;e.partInstance=function(n,e,t,r){return{id:n,partId:"string"==typeof e?e:e.id,inputConfig:t||{},pos:r||{x:0,y:0}}};e.PartInstance=function(n,e,t,r){return{id:n,partId:e.id,inputConfig:t||{},pos:r||{x:0,y:0}}}},5089:function(n,e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.getEnvKeyFromValue=e.toEnvValue=e.isEnvValue=e.extractStaticValue=e.isStaticInput=e.isDynamicInput=e.staticPartInput=e.dynamicPartInputs=e.dynamicPartInput=e.dynamicOutput=e.partOutputs=e.partOutput=e.partInputs=e.isInputPinOptional=e.partInput=void 0;var r=t(6845),o=t(4048),i=t(5821),u=t(4702);e.partInput=function(n,e){return void 0===n&&(n="any"),void 0===e&&(e="required"),{type:n,mode:e}};e.isInputPinOptional=function(n){return"optional"===n.mode};e.partInputs=function(n,t){return i.repeat(n,(function(n){return e.partInput("any",t[n]||"required")}))};e.partOutput=function(n,e,t){return void 0===n&&(n="any"),void 0===e&&(e=!1),void 0===t&&(t=!1),{type:n,delayed:e,optional:t}};e.partOutputs=function(n){return i.repeat(n,(function(){return e.partOutput("any")}))};e.dynamicOutput=function(){return new r.Subject},e.dynamicPartInput=i.testDataCreator((function(){return{subject:new r.Subject,config:u.queueInputPinConfig()}}));e.dynamicPartInputs=function(n){return void 0===n&&(n=10),i.repeat(n,(function(){return i.testDataCreator((function(){return{subject:new r.Subject,config:u.queueInputPinConfig()}}))()}))};e.staticPartInput=function(n){return{config:u.staticInputPinConfig(n)}};e.isDynamicInput=function(n){var e=n;return e&&e.subject&&!!e.subject.next};e.isStaticInput=function(n){return o.isStaticInputPinConfig(n.config)};e.extractStaticValue=function(n){if(e.isStaticInput(n))return n.config.value;throw new Error("Cannot extract static value from non static arg")};e.isEnvValue=function(n){return"string"==typeof n&&n.startsWith("$ENV.")};e.toEnvValue=function(n){return"$ENV."+n};e.getEnvKeyFromValue=function(n){return"string"==typeof n?n.replace(/^\$ENV\./,""):n}},4702:function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isStaticInputPinConfig=e.isStickyInputPinConfig=e.isQueueInputPinConfig=e.staticInputPinConfig=e.stickyInputPinConfig=e.queueInputPinConfig=e.INPUT_MODES=void 0,e.INPUT_MODES=["queue","sticky","static"];e.queueInputPinConfig=function(){return{mode:"queue"}};e.stickyInputPinConfig=function(){return{mode:"sticky"}};e.staticInputPinConfig=function(n){return{mode:"static",value:n}};e.isQueueInputPinConfig=function(n,e){return"queue"===n.mode};e.isStickyInputPinConfig=function(n){return n&&"sticky"===n.mode};e.isStaticInputPinConfig=function(n){return n&&"static"===n.mode}},5596:function(n,e){Object.defineProperty(e,"__esModule",{value:!0})},1922:function(n,e){Object.defineProperty(e,"__esModule",{value:!0})},5281:function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isScheduledTrigger=e.isRestApiTrigger=e.isWebAppTrigger=void 0;e.isWebAppTrigger=function(n){return"web-app"===n.type};e.isRestApiTrigger=function(n){return"rest-api"===n.type};e.isScheduledTrigger=function(n){return"scheduled"===n.type}},3281:function(n,e,t){t.d(e,{I:function(){return m}});var r=t(7378),o=(t(7651),t(9274)),i=t(8944),u=t(8265),s={VMScript:function(n){this.script=n},VM:function(){function n(n){this.context=n}return n.prototype.run=function(n){var e=(0,u.okeys)(this.context.sandbox),t=Object.values(this.context.sandbox);Function.apply(void 0,e.concat([n.script])).apply(void 0,t)},n}()},a=t(1884),c=t(4305),p=t(3127),d=200,l=t(1808);t(904);t.g.vm2=s;f=new Map,y=(0,p.Z)((0,c.Z)().mark((function n(e,t,r){var o,i,u;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e+"."+t+"."+r,i=f.get(o)||{total:0,lastSamples:[]},u=i.lastSamples.slice(0,d),n.abrupt("return",Object.assign({},i,{lastSamples:u}));case 4:case"end":return n.stop()}}),n)})));var y,f,m=function(n){var e=(0,r.useState)(n.defaultDelay||0),t=e[0],u=e[1];return r.createElement(o.Z,{title:n.meta.title+" | Playground",description:"Description will go into a meta tag in <head />"},r.createElement("header",{className:(0,i.Z)("hero hero--primary",l.Z.heroBanner)},r.createElement("div",{className:"container"},r.createElement("h2",{className:"hero__title"},"Flyde Playground"),r.createElement("p",{className:"hero__subtitle"},"Flyde's playground allows you to see how Flyde looks and feels like. Choose one of the examples below to get started. Feel free to play aroung with the canvas and see how your changes affect the result!"),r.createElement("ul",{className:"examples__menu"},r.createElement("li",null,r.createElement(a.Z,{to:"/playground/hello"},"Hello World")," "),r.createElement("li",null,r.createElement(a.Z,{to:"/playground/debounce-throttling"},"Debounce vs. Throttling")),r.createElement("li",null,r.createElement(a.Z,{to:"/playground/react-counter"},"React Counter")),r.createElement("li",null,r.createElement(a.Z,{to:"/playground/fibonacci"},"Fibonnaci Sequence"))))),r.createElement("div",{className:"playground-container"},r.createElement("header",null,r.createElement("h3",{className:"playground-title"},n.meta.title),r.createElement("div",{className:"playground-description"},n.meta.description),r.createElement("div",null,r.createElement("input",{type:"range",id:"volume",name:"delay",value:t,step:"100",min:"0",max:"300",onChange:function(n){return u(Number(n.target.value))}}),r.createElement("label",{htmlFor:"volume"},"Debug Delay - ",t,"ms"))),r.createElement("div",{className:"playground"},r.createElement("div",{className:"flow-container"}),r.createElement("div",{className:"output-container"},n.children))))}},4880:function(n,e,t){t.r(e),t.d(e,{default:function(){return a}});var r=t(7378),o=t(8265),i=t(3281),u={Main:{id:"Main",inputs:{number:{mode:"required",type:"any"}},outputs:{result:{type:"any"}},inputsPosition:{click:{x:-125.66545105324758,y:-263.4653616952434},number:{x:-123.90573217544589,y:-331.72275376891196}},outputsPosition:{result:{x:-117.25574185038472,y:248.13999284260964}},completionOutputs:["result"],instances:[{partId:"Fibonacci",pos:{x:-143.56120117187498,y:-102.25517944335937},id:"Fibonacci-900",inputConfig:{}}],connections:[{from:{insId:"__this",pinId:"number"},to:{insId:"Fibonacci-900",pinId:"n"}},{from:{insId:"Fibonacci-900",pinId:"result"},to:{insId:"__this",pinId:"result"}}]},"Inline Code 3497":{id:"Inline Code 3497",inputs:{},outputs:{r:{type:"any"}},customViewCode:'"Debounce 1"',dataBuilderSource:"IkRlYm91bmNlIDEi",templateType:"value",completionOutputs:["r"],fnCode:"bob"},"Inline Code 58421":{id:"Inline Code 58421",inputs:{},outputs:{r:{type:"any"}},customViewCode:'"Debounce 2"',dataBuilderSource:"IkRlYm91bmNlIDIi",templateType:"value",completionOutputs:["r"],fnCode:'outputs.r.next(("Debounce 2"))'},"Inline Code 59172":{id:"Inline Code 59172",inputs:{},outputs:{r:{type:"any"}},customViewCode:'"Throttled Value"',dataBuilderSource:"IlRocm90dGxlZCBWYWx1ZSI=",templateType:"value",completionOutputs:["r"],fnCode:'outputs.r.next(("Throttled Value"))'},"Inline Code 4796":{id:"Inline Code 4796",inputs:{},outputs:{r:{type:"any"}},customViewCode:"'Hello World'",dataBuilderSource:"J0hlbGxvIFdvcmxkJw==",templateType:"value",completionOutputs:["r"],fnCode:"outputs.r.next(('Hello World'))"},Fibonacci:{id:"Fibonacci",inputs:{n:{mode:"required",type:"any"}},outputs:{result:{type:"any"}},inputsPosition:{n:{x:-143.86010604896114,y:-152.48753764734144}},outputsPosition:{result:{x:-112.36608834597975,y:704.1733607816236}},completionOutputs:["result"],instances:[{partId:"Equals",pos:{x:-178.1720971679688,y:-34.94999176025391},id:"Equals-364",inputConfig:{compare:{mode:"static",value:0}}},{partId:"Equals",pos:{x:-65.86722656250001,y:85.62096923828125},id:"Equals-364-d95",inputConfig:{compare:{mode:"static",value:1}}},{partId:"Add",pos:{x:60.215429687500006,y:501.717759475708},id:"Add-539",inputConfig:{}},{partId:"Subtract",pos:{x:-2.407990722656251,y:260.93969085693357},id:"Subtract-210",inputConfig:{n2:{mode:"static",value:1}}},{partId:"Subtract",pos:{x:177.77401611328128,y:257.0448468017578},id:"Subtract-210-d215",inputConfig:{n2:{mode:"static",value:2}}},{partId:"Fibonacci",pos:{x:-25.2734521484375,y:367.05894348144534},id:"Fibonacci-261",inputConfig:{}},{partId:"Fibonacci",pos:{x:173.19598388671875,y:372.0815182495117},id:"Fibonacci-379",inputConfig:{}}],connections:[{from:{insId:"__this",pinId:"n"},to:{insId:"Equals-364",pinId:"val"}},{from:{insId:"Equals-364",pinId:"else"},to:{insId:"Equals-364-d95",pinId:"val"}},{from:{insId:"Equals-364-d95",pinId:"r"},to:{insId:"__this",pinId:"result"}},{from:{insId:"Equals-364",pinId:"r"},to:{insId:"__this",pinId:"result"}},{from:{insId:"Add-539",pinId:"r"},to:{insId:"__this",pinId:"result"}},{from:{insId:"Equals-364-d95",pinId:"else"},to:{insId:"Subtract-210",pinId:"n1"}},{from:{insId:"Equals-364-d95",pinId:"else"},to:{insId:"Subtract-210-d215",pinId:"n1"}},{from:{insId:"Subtract-210",pinId:"r"},to:{insId:"Fibonacci-261",pinId:"n"}},{from:{insId:"Fibonacci-261",pinId:"result"},to:{insId:"Add-539",pinId:"n1"}},{from:{insId:"Subtract-210-d215",pinId:"r"},to:{insId:"Fibonacci-379",pinId:"n"}},{from:{insId:"Fibonacci-379",pinId:"result"},to:{insId:"Add-539",pinId:"n2"}}]},Debounce:{id:"Debounce",inputs:{i:{mode:"required",type:"any"},ms:{mode:"required",type:"any"}},outputs:{r:{type:"any"}},customViewCode:"<% if (inputs.ms) { %> Debounce  <%- inputs.ms %>ms <% } else { %> Debounce <% } %>",completionOutputs:["r"],reactiveInputs:["i"],fnCode:'const { i, ms } = inputs;\nconst { r } = outputs;\n        \n// magic here\nconst timer = adv.state.get("timer");\n  if (timer) {\n    clearTimeout(timer);\n  }\n\n  const newTimer = setTimeout(() => {\n    r.next(i);\n  }, ms);\n\n  adv.state.set("timer", newTimer);\n\n  adv.onCleanup(() => {\n    clearTimeout(timer);\n  })'},Throttle:{id:"Throttle",inputs:{value:{mode:"required",type:"any"},threshold:{mode:"required",type:"any"}},outputs:{result:{type:"any"},available:{type:"any"}},customViewCode:"<% if (inputs.threshold) { %> Throttle  <%- inputs.threshold %>ms <% } else { %> Throttle <% } %>",completionOutputs:["available"],reactiveInputs:["value"],fnCode:'const { value, threshold } = inputs;\nconst { result, available } = outputs;\n\nif (!adv.state.get("locked")) {\n  adv.state.set("locked", true);\n  result.next(value);\n  const timer = setTimeout(() => {\n    available.next(true);\n  }, threshold)\n  adv.onCleanup(() => clearTimeout(timer));\n} else {\n  adv.onError(new Error(`Throttled. Try again later`));\n}'},Equals:{id:"Equals",inputs:{val:{mode:"required",type:"any"},compare:{mode:"required",type:"any"},transform:{mode:"required-if-connected",type:"any"}},outputs:{r:{type:"any"},else:{type:"any"}},customViewCode:"<% if (isDefined(inputs.compare)) { %>Equals <%- inputs.compare %> <% } else { %> Equals <% } %>",completionOutputs:["r","else"],fnCode:"const { val, compare, transform } = inputs;\nconst { r } = outputs;\n\nconst valueToPush = isDefined(transform) ? transform : val;\n        \n// magic here\nif (val === compare) {\n    r.next(valueToPush);\n}  else {\n    outputs['else'].next(valueToPush);\n}"},Add:{id:"Add",inputs:{n1:{mode:"required",type:"any"},n2:{mode:"required",type:"any"}},outputs:{r:{type:"any"}},customViewCode:'<%= isDefined(inputs.n1) ? inputs.n1 : "n1" %> + <%= isDefined(inputs.n2) ? inputs.n2 : "n2" %>',completionOutputs:["r"],fnCode:"const {n1, n2} = inputs;\nconst {r} = outputs;\n\nlog({n1, n2})\nr.next( n1 + n2 );"},Subtract:{id:"Subtract",inputs:{n1:{mode:"required",type:"any"},n2:{mode:"required",type:"any"}},outputs:{r:{type:"any"}},customViewCode:'<%= isDefined(inputs.n1) ? inputs.n1 : "n1" %> - <%= isDefined(inputs.n2) ? inputs.n2 : "n2" %>',completionOutputs:["r"],fnCode:"const { n1, n2 } = inputs;\nconst { r } = outputs;\n      \nr.next(n1 - n2);\n      "}},s={title:"Fibonacci Sequence",description:'This example showcases a classical recursion - the Fibonacci sequence. On numbers higher than 1, the "Fibonacci" part calls itself recursively!',key:"fibo"};function a(){var n,e,t=(0,r.useState)(4),a=t[0],c=t[1],p=(0,r.useState)(5),d=p[0],l=p[1],y=(0,r.useRef)((n=function(n){return l(n)},(e=(0,o.dynamicOutput)()).subscribe(n),e)),f=(0,r.useRef)({n:(0,o.dynamicPartInput)()}),m=(0,r.useState)({flow:{imports:{},exports:[],parts:u,mainId:"Fibonacci"},resolvedFlow:u,inputs:f.current,output:y.current}),h=m[0],v=(m[1],(0,r.useCallback)((function(){(a<=8||confirm("This is an unoptimized Fib. calculator and larger numbers might take a long time to calculate. Are you sure?"))&&f.current.n.subject.next(a)}),[a]));return r.createElement(i.I,{meta:s,flowProps:h,defaultDelay:100},r.createElement("div",{className:"output-container"},r.createElement("div",null,r.createElement("input",{type:"number",value:a,max:10,onChange:function(n){return c(Number(n.target.value))}}),r.createElement("button",{onClick:v},"Calculate!"),r.createElement("h3",null,"Result: ",d))))}},1808:function(n,e){e.Z={heroBanner:"heroBanner_qdFl",buttons:"buttons_AeoN","project-editor":"project-editor_XBpx"}},904:function(n){n.exports=JSON.parse('{"Accumulate":{"id":"Accumulate","inputs":{"count":{"mode":"required","type":"any"},"val":{"mode":"optional","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"reactiveInputs":["val"],"fnCode":"const {count, val} = inputs;\\nconst {r} = outputs;\\n\\nconst {state} = adv;\\n\\nlet list = state.get(\\"list\\") || [];\\n\\nif (count !== state.get(\\"count\\")) {\\n    list = [];\\n    state.set(\\"count\\", count);\\n}\\n\\nif (isDefined(val)) {\\n    list.push(val);\\n}\\n\\n\\nstate.set(\\"list\\", list);\\n\\nif (list.length === state.get(\\"count\\")) {\\n    r.next(list);\\n}"},"AccumulateSome":{"id":"AccumulateSome","inputs":{"count":{"mode":"required","type":"any"},"allow":{"mode":"optional","type":"any"},"filter":{"mode":"optional","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"reactiveInputs":["allow","filter"],"fnCode":"const {count, allow, filter} = inputs;\\nconst {r} = outputs;\\n\\nconst {state} = adv;\\n\\nlet allowedList = state.get(\\"allowed-list\\") || [];\\nlet filterList = state.get(\\"filter-list\\") || [];\\n\\nif (count !== state.get(\\"count\\")) {\\n    state.set(\\"count\\", count);\\n}\\n\\nif (isDefined(allow)) {\\n    allowedList.push(allow);\\n}\\n\\nif (isDefined(filter)) {\\n    filterList.push(filter);\\n}\\n\\nstate.set(\\"allowed-list\\", allowedList);\\nstate.set(\\"filter-list\\", filterList);\\n\\nif (allowedList.length + filterList.length === state.get(\\"count\\")) {\\n    r.next(allowedList);\\n}\\n"},"AccumulateUntil":{"id":"AccumulateUntil","inputs":{"item":{"mode":"optional","type":"any"},"until":{"mode":"optional","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"reactiveInputs":["item","until"],"fnCode":"// magic here\\nconst {item, until} = inputs;\\nconst {r} = outputs;\\nconst {state} = adv;\\n\\nlet list = state.get(\\"list\\") || [];\\n\\n    if (isDefined(item)) {\\n      list.push(item);\\n      state.set(\\"list\\", list);\\n    }\\n\\n    if (isDefined(until)) {\\n      r.next(list);\\n    }"},"AccumulateUntilTime":{"id":"AccumulateUntilTime","inputs":{"time":{"mode":"required","type":"any"},"item":{"mode":"optional","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"reactiveInputs":["item"],"fnCode":"const {item, time} = inputs;\\nconst {r} = outputs;\\nconst {state} = adv;\\n\\n\\nlet list = state.get(\\"list\\") || [];\\nif (isDefined(item)) {\\n  list.push(item);\\n  state.set(\\"list\\", list);\\n\\n  const timer = state.get(\\"timer\\");\\n  \\n  if (timer) {\\n    clearTimeout(timer);\\n  } \\n  \\n  const newTimer = setTimeout(() => {\\n      r.next(state.get(\\"list\\") || []);\\n  }, time);\\n  \\n  state.set(\\"timer\\", newTimer)\\n}\\n\\n\\n"},"Add":{"id":"Add","inputs":{"n1":{"mode":"required","type":"any"},"n2":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const {n1, n2} = inputs;\\nconst {r} = outputs;\\n\\nlog({n1, n2})\\nr.next( n1 + n2 );"},"CollectionCountDocuments":{"id":"CollectionCountDocuments","inputs":{"options":{"mode":"optional","type":"any"},"collectionName":{"mode":"required","type":"any"},"filter":{"mode":"required","type":"any"},"":{"mode":"optional","type":"any"}},"outputs":{"count":{"type":"any"}},"completionOutputs":["count"],"fnCode":"// magic here\\nmongoDb\\n    .collection(inputs.collectionName)\\n    .countDocuments(inputs.filter, inputs.options)\\n    .then((count) => {\\n        outputs.count.next(count);\\n    });"},"CollectionDeleteOne":{"id":"CollectionDeleteOne","inputs":{"collectionName":{"mode":"required","type":"any"},"filter":{"mode":"required","type":"any"},"options":{"mode":"optional","type":"any"}},"outputs":{"result":{"type":"any"}},"completionOutputs":["result"],"fnCode":"mongoDb.collection(inputs.collectionName)\\n    .deleteOne(inputs.filter, inputs.options)\\n    .then(res => {\\n        outputs.result.next(res);\\n    })\\n    .catch((e) => adv.onError(e));"},"CollectionFind":{"id":"CollectionFind","inputs":{"options":{"mode":"optional","type":"any"},"collectionName":{"mode":"required","type":"any"},"filter":{"mode":"required","type":"any"}},"outputs":{"items":{"type":"any"}},"completionOutputs":["items"],"fnCode":"// magic here\\nmongoDb\\n    .collection(inputs.collectionName)\\n    .find(inputs.filter, inputs.options)\\n    .toArray()\\n    .then((doc) => {\\n        outputs.items.next(doc);\\n    })\\n    .catch((e) => adv.onError(e))"},"CollectionFindOne":{"id":"CollectionFindOne","inputs":{"collectionName":{"mode":"required","type":"any"},"filter":{"mode":"required","type":"any"},"options":{"mode":"optional","type":"any"}},"outputs":{"item":{"type":"any"}},"completionOutputs":["item"],"fnCode":"mongoDb.collection(inputs.collectionName)\\n    .findOne(inputs.filter, inputs.options)\\n    .then(res => {\\n        if (res === null) {\\n            adv.onError(new Error(\'not found\'));\\n        } else {\\n            outputs.item.next(res);\\n        }\\n    })\\n    .catch((e) => adv.onError(e));"},"CollectionFindOneAndUpdate":{"id":"CollectionFindOneAndUpdate","inputs":{"options":{"mode":"optional","type":"any"},"collectionName":{"mode":"required","type":"any"},"filter":{"mode":"required","type":"any"},"update":{"mode":"required","type":"any"}},"outputs":{"updatedItem":{"type":"any"}},"completionOutputs":["updatedItem"],"fnCode":"// magic here\\nconst options = inputs.options || {returnDocument: \'after\'};\\nmongoDb\\n    .collection(inputs.collectionName)\\n    .findOneAndUpdate(inputs.filter, inputs.update, options)\\n    .then((doc) => {\\n        outputs.updatedItem.next(doc);\\n    });"},"CollectionInsertOne":{"id":"CollectionInsertOne","inputs":{"collectionName":{"mode":"required","type":"any"},"item":{"mode":"required","type":"any"}},"outputs":{"success":{"type":"any"}},"completionOutputs":["success"],"fnCode":"// magic here\\nmongoDb.collection(inputs.collectionName)\\n    .insertOne(inputs.item)\\n    .then(res => outputs.success.next({...inputs.item, _id: res.insertedId}))\\n    .catch((e) => adv.onError(e));\\n"},"concat":{"id":"concat","inputs":{"a":{"mode":"required","type":"any"},"b":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"object"}},"completionOutputs":["r"],"fnCode":"\\n          let val = \'\\"${a}${b}\\"\';\\n\\n          Object.keys(inputs).forEach((key) => {\\n\\n            const _inpVal = inputs[key]; \\n            const inpVal = typeof _inpVal === \'object\' ? JSON.stringify(_inpVal) : _inpVal;\\n\\n            val = val\\n              .replace(\'${\' + key + \'}\', inpVal)\\n              .replace(\'${\' + key + \'}\', inpVal)\\n              .replace(\'${\' + key + \'}\', inpVal) // todo - support more than 3 instances in a nicer way\\n          })\\n          outputs.r.next(JSON.parse(val));"},"Cuid":{"id":"Cuid","inputs":{"trigger":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"// magic here\\noutputs.r.next(cuid());"},"DbCount":{"id":"DbCount","inputs":{"query":{"mode":"required","type":"any"}},"outputs":{"count":{"type":"any"}},"completionOutputs":["count"],"fnCode":"// magic here\\nconst {query} = inputs;\\n\\nconst {onError} = adv;\\n\\ndb.count(query)\\n    .then(d => outputs.count.next(d))\\n    .catch(err => {\\n        onError(err);\\n    });\\n"},"DbFind":{"id":"DbFind","inputs":{"query":{"mode":"required","type":"any"},"sort":{"mode":"required-if-connected","type":"any"},"limit":{"mode":"required-if-connected","type":"any"},"skip":{"mode":"required-if-connected","type":"any"}},"outputs":{"res":{"type":"any"},"err":{"type":"any"}},"fnCode":"// magic here\\nconst {query, sort, limit, skip} = inputs;\\ndb.find(query, sort || {}, Math.min(limit, 1000), {}, skip)\\n    .then(d => outputs.res.next(d))\\n    .catch(err => outputs.err.next(err.toString()));\\n"},"DbFindOne":{"id":"DbFindOne","inputs":{"query":{"mode":"required","type":"any"}},"outputs":{"res":{"type":"any"}},"completionOutputs":["res"],"fnCode":"// magic here\\ndb.findOne(inputs.query)\\n    .then((doc) => {\\n        if (isDefined(doc)) {\\n            outputs.res.next(doc)\\n        } else {\\n            adv.onError(\'Not found\');\\n        }\\n    })\\n    .catch((err) => adv.onError(err))"},"DbInsert":{"id":"DbInsert","inputs":{"doc":{"mode":"required","type":"any"}},"outputs":{"ok":{"type":"any"},"err":{"type":"any"}},"fnCode":"// magic here\\nlog(\'Going to insert doc\')\\nconst {onError} = adv;\\n\\ndb.insert(inputs.doc)\\n    .then((doc) => {\\n        log(\'Inserted doc\')\\n        outputs.ok.next(doc)\\n    }, (err) => {\\n        log(\'Failed to insert doc\')\\n        outputs.err.next(err);\\n        onError(err);\\n    });\\n"},"DbRemove":{"id":"DbRemove","inputs":{"query":{"mode":"required","type":"any"},"options":{"mode":"required-if-connected","type":"any"}},"outputs":{"ok":{"type":"any"},"err":{"type":"any"}},"fnCode":"// magic here\\nconst {query, options} = inputs;\\nconst {onError} = adv;\\n\\ndb.remove(query, isDefined(options) ? options : {})\\n.then((num) => outputs.ok.next(num))\\n.catch((err) => {\\n    outputs.err.next(err)\\n    onError(err);\\n});\\n\\n"},"DbUpdate":{"id":"DbUpdate","inputs":{"query":{"mode":"required","type":"any"},"update":{"mode":"required","type":"any"},"options":{"mode":"optional","type":"any"}},"outputs":{"ok":{"type":"any"},"err":{"type":"any"}},"fnCode":"// magic here\\nconst {query, update, options} = inputs;\\nconst {ok, err} = outputs;\\ndb.update(query, update, options)\\n    .then((doc) => ok.next(doc))\\n    .catch((e) => err.next(e));"},"Debounce":{"id":"Debounce","inputs":{"i":{"mode":"required","type":"any"},"ms":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"customViewCode":"","completionOutputs":["r"],"reactiveInputs":["i"],"fnCode":"const { i, ms } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nconst timer = adv.state.get(\\"timer\\");\\n  if (timer) {\\n    clearTimeout(timer);\\n  }\\n\\n  const newTimer = setTimeout(() => {\\n    r.next(i);\\n  }, ms);\\n\\n  adv.state.set(\\"timer\\", newTimer);\\n\\n  adv.onCleanup(() => {\\n    clearTimeout(timer);\\n  })"},"Delay":{"id":"Delay","inputs":{"value":{"mode":"required","type":"any"},"ms":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"customViewCode":"","completionOutputs":["r"],"fnCode":"// magic here\\nconst {value, ms} = inputs;\\n const timer = setTimeout(() => {\\n    outputs.r.next(value);\\n}, ms);\\n\\nadv.onCleanup(() => clearTimeout(timer));"},"Delay2":{"id":"Delay2","inputs":{"value":{"mode":"required","type":"any"},"ms":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"customViewCode":"","completionOutputs":["r"],"fnCode":"// magic here\\nconst {value, ms} = inputs;\\n const timer = setTimeout(() => {\\n    outputs.r.next(value);\\n}, ms);\\n\\nadv.onCleanup(() => clearTimeout(timer));"},"Divide":{"id":"Divide","inputs":{"n1":{"mode":"required","type":"any"},"n2":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"},"divByZero":{"type":"any"}},"fnCode":"const { n1, n2 } = inputs;\\nconst { r, divByZero } = outputs;\\n      \\nif (n2 === 0) {\\n      divByZero.next(n1);\\n} else {\\n      r.next(n1 / n2);\\n}\\n      "},"Dot":{"id":"Dot","inputs":{"obj":{"mode":"required","type":"any"},"key":{"mode":"required","type":"any"}},"outputs":{"value":{"type":"any"}},"customViewCode":"<% if (inputs.key) { %> .<%- inputs.key %> <% } else { %> Dot <% } %>","completionOutputs":["value"],"fnCode":"const { obj, key } = inputs;\\nconst { value } = outputs;\\n\\n// magic here\\n\\nlet hadError = false;\\n\\nconst matches = {};\\n\\nconst normalized = key.replace(/\\\\[\\"(([^\\"])+)\\"\\\\]/g, (match, p1, p2, offset) => {\\n  const key = `__$$KEY$$__${offset}`;\\n  matches[key] = p1;\\n  return `.${key}`;\\n});\\n\\nconst path = normalized.split(\\".\\");\\nlet o = { ...obj };\\nfor (let p of path) {\\n  const key = matches[p] || p;\\n  if (o && isDefined(o[key]) && o[key] !== null) {\\n    o = o[key];\\n  } else {\\n    value.next(null);\\n    hadError = true;\\n  }\\n}\\n\\nif (!hadError) {\\n  value.next(o);\\n}\\n"},"EachMs":{"id":"EachMs","inputs":{"ms":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["never"],"fnCode":"const { ms } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nconst s = setInterval(() => {\\n    r.next();\\n}, ms);\\n\\nadv.onCleanup(() => {\\n    clearInterval(s);\\n})        "},"EmptyList":{"id":"EmptyList","inputs":{},"outputs":{"list":{"type":"any"}},"completionOutputs":["list"],"fnCode":"// magic here\\noutputs.list.next(\\n    []\\n);"},"EmptyObject":{"id":"EmptyObject","inputs":{},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const {  } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nr.next({});"},"epochToString":{"id":"epochToString","inputs":{"epoch":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"// magic here\\n\\nconst d = new Date(inputs.epoch);\\noutputs.r.next(d.toLocaleString());"},"Equals":{"id":"Equals","inputs":{"val":{"mode":"required","type":"any"},"compare":{"mode":"required","type":"any"},"transform":{"mode":"required-if-connected","type":"any"}},"outputs":{"r":{"type":"any"},"else":{"type":"any"}},"customViewCode":"<% if (inputs.compare) { %>Equals <%- inputs.compare %> <% } else { %> Equals <% } %>","completionOutputs":["r","else"],"fnCode":"const { val, compare, transform } = inputs;\\nconst { r } = outputs;\\n\\nconst valueToPush = isDefined(transform) ? transform : val;\\n        \\n// magic here\\nif (val === compare) {\\n    r.next(valueToPush);\\n}  else {\\n    outputs[\'else\'].next(valueToPush);\\n}"},"FirstSecondOnlyRest":{"id":"FirstSecondOnlyRest","inputs":{"list":{"mode":"required","type":"any"}},"outputs":{"i0":{"type":"any"},"i1":{"type":"any"},"rest":{"type":"any"}},"fnCode":"const { list } = inputs;\\nconst { i0, i1, rest } = outputs;\\n      \\nconst [_i0, _i1, ...r] = list;\\n\\n[i0, i1].forEach((o, idx) => {\\n    if (typeof list[idx] !== \'undefined\') {\\n        o.next(list[idx]);\\n    }\\n});\\n\\nr.length && rest.next(r)\\n      "},"FirstSecondRest":{"id":"FirstSecondRest","inputs":{"list":{"mode":"required","type":"any"}},"outputs":{"i0":{"type":"any"},"i1":{"type":"any"},"i2":{"type":"any"},"i3":{"type":"any"},"i4":{"type":"any"},"rest":{"type":"any"}},"fnCode":"const { list } = inputs;\\nconst { i0, i1, i2, i3, i4, rest } = outputs;\\n      \\nconst [_i0, _i1, _i2, _i3, _i4, _i5, ...r] = list;\\n\\n[i0, i1, i2, i3, i4].forEach((o, idx) => {\\n    if (typeof list[idx] !== \'undefined\') {\\n        o.next(list[idx]);\\n    }\\n});\\n\\nr.length && rest.next(r)\\n      "},"FlattenArray":{"id":"FlattenArray","inputs":{"arrayOfArrays":{"mode":"required","type":"any"},"depth":{"mode":"required-if-connected","type":"any"}},"outputs":{"array":{"type":"any"}},"completionOutputs":["array"],"fnCode":"// magic here\\n\\nconst flattened = inputs.arrayOfArrays.flat(inputs.depth || 1);\\noutputs.array.next(flattened);"},"Floor":{"id":"Floor","inputs":{"n":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { n } = inputs;\\nconst { r } = outputs;\\n      \\nr.next(Math.floor(n));\\n      "},"FormatMessage":{"id":"FormatMessage","inputs":{"template":{"mode":"required","type":"any"},"var1":{"mode":"required","type":"any"},"var2":{"mode":"required-if-connected","type":"any"},"var3":{"mode":"required-if-connected","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { template, var1, var2, var3 } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\n const replaced = template\\n    .replace(\\"$VAL3\\", var3)\\n    .replace(\\"$VAL2\\", var2)\\n    .replace(\\"$VAL\\", var1)\\n    .replace(\\"$VAR3\\", var3)\\n    .replace(\\"$VAR2\\", var2)\\n    .replace(\\"$VAR\\", var1);\\nr.next(replaced);"},"FormatModel":{"id":"FormatModel","inputs":{"template":{"mode":"required","type":"any"},"model":{"mode":"required","type":"any"},"model2":{"mode":"required-if-connected","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { template, model, model2 } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nconst combined = { ...model, ...(model2 || {}) };\\n  const find = (_, key) => {\\n    const path = key.split(\\".\\");\\n    let o = { ...combined };\\n    for (let p of path) {\\n      if (o && o[p]) {\\n        o = o[p];\\n      } else {\\n        return key;\\n      }\\n    }\\n    return o;\\n  };\\n\\nconst replaced = template\\n  .replace(/\\\\$\\\\{([a-zA-Z \\\\d\\\\.]*)\\\\}/g, find)\\n  .replace(/<%=([a-zA-Z \\\\d\\\\.]*)%>/g, find);\\n\\nr.next(replaced);"},"GetItem":{"id":"GetItem","inputs":{"key":{"mode":"required","type":"any"},"defaultValue":{"mode":"required-if-connected","type":"any"}},"outputs":{"ok":{"type":"any"}},"completionOutputs":["ok"],"fnCode":"// magic here\\nconst {ok, err} = outputs;\\nconst {key, defaultValue} = inputs;\\nconst {onError} = adv;\\n\\nmongoDb.collection(\'__KVStore\').findOne({id: key})\\n    .then((doc) => {\\n        if (doc === null) {\\n            if (isDefined(defaultValue)) {\\n                ok.next(defaultValue);\\n            } else {\\n                onError(new Error(\'Key not found and no default value\'));\\n            }\\n        } else {\\n            ok.next(doc.value);\\n        }\\n    })\\n    .catch((e) => {\\n        onError(e);\\n    });"},"GetListItem":{"id":"GetListItem","inputs":{"list":{"mode":"required","type":"any"},"idx":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"// magic here\\noutputs.r.next(inputs.list[inputs.idx]);"},"GetState":{"id":"GetState","inputs":{"key":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"},"err":{"type":"any"}},"fnCode":"const {state} = adv;\\nconst {key} = inputs;\\nconst {r, err} = outputs;\\n\\nconst val = state.get(key);\\nif (isDefined(val)) {\\n    r.next(val);\\n} else {\\n    err.next(key);\\n}\\n"},"HeadCSS":{"id":"HeadCSS","inputs":{"css":{"mode":"required","type":"any"},"key":{"mode":"optional","type":"any"}},"outputs":{},"fnCode":"try {\\n    const document = getDocument();\\n    const normKey = inputs.key || \\"default-css\\";\\n    const tag = document.createElement(\\"style\\");\\n    tag.innerHTML = inputs.css;\\n    tag.id = normKey;\\n    \\n    const existing = document.getElementById(normKey);\\n    if (existing) {\\n      existing.remove();\\n    }\\n    document.head.appendChild(tag);\\n} catch (e) {\\n    log(`Unable to run head css part`, e);\\n}"},"HtmlTag":{"id":"HtmlTag","inputs":{"id":{"mode":"required-if-connected","type":"any"},"style":{"mode":"required-if-connected","type":"any"},"className":{"mode":"required-if-connected","type":"any"},"tagName":{"mode":"required","type":"any"},"extra":{"mode":"required-if-connected","type":"any"},"children":{"mode":"required-if-connected","type":"any"}},"outputs":{"jsx":{"type":"any"},"click":{"type":"any"}},"fnCode":"// magic here\\nconst props = {\\n    className: inputs.className,\\n    id: inputs.id,\\n    style: inputs.style\\n}\\n\\nconst onClick = outputs.click ? (e) => outputs.click.next(e) : undefined;\\nconst comp = React.createElement(inputs.tagName, {\\n    ...props,\\n    ...(inputs.extra || {}),\\n    onClick\\n}, inputs.children);\\n\\noutputs.jsx.next(comp);"},"HtmlValueTag":{"id":"HtmlValueTag","inputs":{"id":{"mode":"required-if-connected","type":"any"},"style":{"mode":"required-if-connected","type":"any"},"className":{"mode":"required-if-connected","type":"any"},"tagName":{"mode":"required","type":"any"},"extra":{"mode":"required-if-connected","type":"any"},"children":{"mode":"required-if-connected","type":"any"},"value":{"mode":"required-if-connected","type":"any"},"placeholder":{"mode":"required-if-connected","type":"any"}},"outputs":{"jsx":{"type":"any"},"click":{"type":"any"},"change":{"type":"any"}},"fnCode":"// magic here\\nconst props = {\\n    className: inputs.className,\\n    id: inputs.id,\\n    style: inputs.style\\n}\\n\\nconst onClick = outputs.click ? (e) => outputs.click.next(e) : undefined;\\nconst onChange = outputs.change ? (e) => outputs.change.next(e.target.value) : undefined;\\nconst comp = React.createElement(inputs.tagName, {\\n    ...props,\\n    ...(inputs.extra || {}),\\n    onClick,\\n    onChange\\n}, inputs.children);\\n\\noutputs.jsx.next(comp);"},"HttpGet":{"id":"HttpGet","inputs":{"url":{"mode":"required","type":"any"},"headers":{"mode":"required-if-connected","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { url, headers } = inputs;\\nconst { r, error } = outputs;\\n\\nconst {onError} = adv;\\n        \\n// magic here\\naxios.get(url, { headers, timeout: DEFAULT_AXIOS_TIMEOUT }).then((res) => {\\n    r.next(res.data);\\n}, (err) => {\\n    onError(err);\\n});"},"HttpPost":{"id":"HttpPost","inputs":{"url":{"mode":"required","type":"any"},"body":{"mode":"required","type":"any"},"headers":{"mode":"required-if-connected","type":"any"},"bodyType":{"mode":"required-if-connected","type":"any"}},"outputs":{"r":{"type":"any"},"e":{"type":"any"}},"fnCode":"const { url, body, headers, bodyType } = inputs;\\nconst { r, e } = outputs;\\n\\nconst {onError} = adv;\\n\\nconst config = {\\n    headers,\\n    timeout: DEFAULT_AXIOS_TIMEOUT\\n}\\n        \\n// magic here\\nif (bodyType === \\"form\\") {\\n    const parts = [];\\n    Object.keys(body).forEach((key) => {\\n      parts.push(`${key}=${encodeURIComponent(body[key])}`);\\n    });\\n    axios.post(url, parts.join(\\"&\\"), config).then(\\n      (res) => {\\n        r.next(res.data);\\n      },\\n      (err) => {\\n        const {response, message} = err;\\n        const errorObj = response ? {data:response.data, status: response.status} : {data: message, status: -1};\\n        e.next(errorObj)\\n        onError(errorObj);\\n      }\\n    );\\n  } else {\\n    axios.post(url, body, config).then(\\n      (res) => {\\n        r.next(res.data);\\n      },\\n      (err) => {\\n        const {response, message} = err;\\n        const errorObj = response ? {data:response.data, status: response.status} : {data: message, status: -1};\\n        e.next(errorObj)\\n        onError(errorObj);\\n      }\\n    );\\n  }"},"HttpRequest":{"id":"HttpRequest","inputs":{"url":{"mode":"required","type":"any"},"method":{"mode":"required","type":"any"},"headers":{"mode":"required-if-connected","type":"any"},"data":{"mode":"required-if-connected","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { url, headers, method, data } = inputs;\\nconst { r } = outputs;\\n\\nconst {onError} = adv;\\n        \\n// magic here\\naxios({ url, method, data, headers, timeout: DEFAULT_AXIOS_TIMEOUT }).then((res) => {\\n    r.next(res.data);\\n}, (err) => {\\n    onError(err);\\n});"},"Id":{"id":"Id","inputs":{"v":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"object"}},"customViewCode":"","completionOutputs":["r"],"fnCode":"outputs.r.next(inputs.v)"},"IndexOf":{"id":"IndexOf","inputs":{"str":{"mode":"required","type":"any"},"char":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"},"notFound":{"type":"any"}},"fnCode":"const { str, char } = inputs;\\nconst { r, notFound } = outputs;\\n        \\n// magic here\\nconst i = str.indexOf(char);\\nif (i !== -1) {\\n    r.next(str.indexOf(char));\\n} else {\\n    notFound.next(str);\\n}  "},"IsEmpty":{"id":"IsEmpty","inputs":{"str":{"mode":"required","type":"any"}},"outputs":{"true":{"type":"any"},"false":{"type":"any"}},"fnCode":"const { str } = inputs;\\n        \\n// magic here\\nif (str === \\"\\") {\\n    outputs.true.next(str);\\n} else {\\n    outputs.false.next(str);\\n}"},"IsGreater bool ":{"id":"IsGreater bool ","inputs":{"n1":{"mode":"required","type":"any"},"n2":{"mode":"required","type":"any"},"transform":{"mode":"required-if-connected","type":"any"}},"outputs":{"result":{"type":"any"}},"customViewCode":"<% if (inputs.n2) { %>  > <%- inputs.n2 %> <% } else { %> Is Greater <% } %>","fnCode":"const { n1, n2, transform} = inputs;\\n\\n\\noutputs.result.next(n1 > n2);\\n      "},"IsGreater":{"id":"IsGreater","inputs":{"n1":{"mode":"required","type":"any"},"n2":{"mode":"required","type":"any"},"transform":{"mode":"required-if-connected","type":"any"}},"outputs":{"true":{"type":"any"},"false":{"type":"any"}},"customViewCode":"<% if (inputs.n2) { %>  > <%- inputs.n2 %> <% } else { %> Is Greater <% } %>","fnCode":"const { n1, n2, transform} = inputs;\\n\\n\\n      \\nif (n1 > n2) {\\n      outputs.true.next(isDefined(transform) ? transform : n1);\\n} else {\\n      outputs.false.next(isDefined(transform) ? transform : n2);\\n}\\n// magic here\\n      "},"isLess bool":{"id":"isLess bool","inputs":{"n1":{"mode":"required","type":"any"},"n2":{"mode":"required","type":"any"},"transform":{"mode":"required-if-connected","type":"any"}},"outputs":{"result":{"type":"any"}},"customViewCode":"<% if (inputs.n2) { %>  < <%- inputs.n2 %> <% } else { %> Is Less <% } %>","fnCode":"const { n1, n2, transform} = inputs;\\n\\n\\noutputs.result.next(n1 < n2);\\n      "},"isLess":{"id":"isLess","inputs":{"n1":{"mode":"required","type":"any"},"n2":{"mode":"required","type":"any"}},"outputs":{"true":{"type":"any"},"false":{"type":"any"}},"customViewCode":"","completionOutputs":["true","false"],"fnCode":"const { n1, n2 } = inputs;\\n      \\nif (n1 < n2) {\\n      outputs.true.next(n1);\\n} else {\\n      outputs.false.next(n1);\\n}\\n// magic here\\n      "},"isPropertyGreater":{"id":"isPropertyGreater","inputs":{"obj":{"mode":"required","type":"any"},"key":{"mode":"required","type":"any"},"value":{"mode":"required","type":"any"}},"outputs":{"true":{"type":"any"},"false":{"type":"any"}},"customViewCode":"<% if (inputs.key && inputs.value) { %>  .<%- inputs.key %> > <%- inputs.value %> <% } else { %> Is Property Greater <% } %>","fnCode":"const objVal = inputs.obj[inputs.key];\\n\\nif (objVal > inputs.value) {\\n    outputs.true.next(inputs.obj)\\n} else {\\n    outputs.false.next(inputs.obj)\\n}"},"LimitTimes":{"id":"LimitTimes","inputs":{"item":{"mode":"required","type":"any"},"times":{"mode":"required","type":"any"}},"outputs":{"ok":{"type":"any"},"breach":{"type":"any"}},"completionOutputs":["breach"],"reactiveInputs":["item"],"fnCode":"// magic here\\nconst {state} = adv;\\nconst {item, times} = inputs;\\nconst {ok, breach} = outputs;\\n\\nlet curr = state.get(\'val\') || 0;\\ncurr++;\\nstate.set(\'val\', curr);\\nif (curr >= times) {\\n    breach.next(item);\\n} else {\\n    ok.next(item);\\n}\\n"},"ListAppend":{"id":"ListAppend","inputs":{"list":{"mode":"required","type":"any"},"item":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"// magic here// magic here\\noutputs.r.next(\\n    [...inputs.list, inputs.item]\\n);"},"ListConcat2":{"id":"ListConcat2","inputs":{"list1":{"mode":"required","type":"any"},"list2":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"// magic here\\nconst {list1, list2} = inputs;\\noutputs.r.next(list1.concat(list2));"},"ListFilter":{"id":"ListFilter","inputs":{"list":{"mode":"required","type":"any"},"fn":{"mode":"required","type":"part({\\"item\\": \\"any\\", \\"idx?\\": \\"any\\"}|{\\"allow\\": \\"any\\", \\"block\\": \\"any\\"})"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const o = outputs;\\nconst {list, fn} = inputs;\\n\\nconst allowSet = new Set();\\nconst blockSet = new Set();\\nconst newList = [];\\n\\nconst uns = [];\\n\\nconst maybeSendNewList = () => {\\n  if (allowSet.size + blockSet.size === list.length) {\\n    o.r.next(newList.filter((item) => item !== undefined));\\n  }\\n};\\n\\nlist.forEach((item, idx) => {\\n  const itemInput = dynamicPartInput();\\n  const idxInput = dynamicPartInput();\\n  const outputs = Object.keys(fn.outputs).reduce(\\n    (p, k) => ({ ...p, [k]: dynamicOutput() }),\\n    {}\\n  );\\n  outputs.allow.subscribe(() => {\\n    newList.push(item);\\n    allowSet.add(idx);\\n    maybeSendNewList();\\n  });\\n\\n  outputs.block.subscribe(() => {\\n    blockSet.add(idx);\\n    maybeSendNewList();\\n  });\\n\\n  Object.keys(outputs)\\n    .filter((k) => k !== \\"allow\\" && k !== \\"block\\")\\n    .forEach((k) => {\\n      outputs[k].subscribe(() => {\\n        o.rs.next({ key: k, v: item, idx });\\n      });\\n    });\\n  const clean = adv.execute(\\n    fn,\\n    { item: itemInput, idx: idxInput },\\n    outputs,\\n    `${adv.insId}-fn`\\n  );\\n\\n  idxInput.subject.next(idx);\\n  itemInput.subject.next(item);\\n  uns.push(clean);\\n});\\n\\nadv.onCleanup(() => {\\n  uns.forEach((fn) => fn());\\n});\\n"},"ListFrom2":{"id":"ListFrom2","inputs":{"item1":{"mode":"required","type":"any"},"item2":{"mode":"required","type":"any"}},"outputs":{"list":{"type":"any"}},"completionOutputs":["list"],"fnCode":"// magic here\\noutputs.list.next(\\n    [\\n        inputs.item1,\\n        inputs.item2\\n    ]\\n);"},"ListFrom3":{"id":"ListFrom3","inputs":{"item1":{"mode":"required","type":"any"},"item2":{"mode":"required","type":"any"},"item3":{"mode":"required","type":"any"}},"outputs":{"list":{"type":"any"}},"completionOutputs":["list"],"fnCode":"// magic here\\noutputs.list.next(\\n    [\\n        inputs.item1,\\n        inputs.item2,\\n        inputs.item3\\n    ]\\n);"},"ListFromStr":{"id":"ListFromStr","inputs":{"count":{"mode":"required","type":"any"},"char":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"// magic here\\n\\noutputs\\n    .r\\n    .next(new Array(inputs.count).fill(inputs.char));"},"ListJoin":{"id":"ListJoin","inputs":{"list":{"mode":"required","type":"any"},"delimiter":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { list, delimiter } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nr.next(list.join(delimiter));"},"ListLength":{"id":"ListLength","inputs":{"list":{"mode":"required","type":"any"}},"outputs":{"length":{"type":"any"}},"completionOutputs":["length"],"fnCode":"// magic here\\noutputs.length.next(inputs.list.length);"},"ListMap":{"id":"ListMap","inputs":{"list":{"mode":"required","type":"any"},"fn":{"mode":"required","type":"part({\\"item?\\": \\"any\\", \\"idx?\\": \\"any\\"}|{\\"r\\": \\"any\\", \\"rs\\": \\"any\\"})"}},"outputs":{"r":{"type":"any"},"rs":{"type":"any"}},"fnCode":"let newList = [];\\n\\nconst { list, fn} = inputs;\\nconst o = outputs;\\n\\nlet received = new Set();\\n\\nconst cleanUps = [];\\n\\nlist.forEach((item, idx) => {\\n  const itemInput = dynamicPartInput();\\n  const idxInput = dynamicPartInput();\\n  const mainOutput = dynamicOutput();\\n  const sideOutput = dynamicOutput();\\n  mainOutput.subscribe((receivedItem) => {\\n    newList[idx] = receivedItem;\\n    received.add(idx);\\n    if (received.size === list.length) {\\n      o.r.next(newList);\\n    }\\n  });\\n\\n  sideOutput.subscribe((v) => {\\n    o.rs.next(v);\\n  });\\n\\n  const clean = adv.execute(\\n    fn,\\n    { item: itemInput, idx: idxInput },\\n    { r: mainOutput, rs: sideOutput },\\n    `${adv.insId}-fn`\\n  );\\n\\n  cleanUps.push(clean);\\n\\n  itemInput.subject.next(item);\\n  idxInput.subject.next(idx);\\n});\\n\\nif (list.length === 0) {\\n  o.r.next(list);\\n}\\n\\nadv.onCleanup(() => {\\n  cleanUps.forEach((fn) => fn());\\n});\\n"},"ListPrepend":{"id":"ListPrepend","inputs":{"list":{"mode":"required","type":"any"},"item":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"// magic here// magic here\\noutputs.r.next(\\n    [inputs.item, ...inputs.list]\\n);"},"MathMin":{"id":"MathMin","inputs":{"n1":{"mode":"required","type":"any"},"n2":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { n1, n2 } = inputs;\\n      \\noutputs.r.next(Math.min(n1, n2));\\n// magic here\\n      "},"MD5HashString":{"id":"MD5HashString","inputs":{"str":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"function md5cycle(x, k) {\\n  var a = x[0],\\n    b = x[1],\\n    c = x[2],\\n    d = x[3];\\n\\n  a = ff(a, b, c, d, k[0], 7, -680876936);\\n  d = ff(d, a, b, c, k[1], 12, -389564586);\\n  c = ff(c, d, a, b, k[2], 17, 606105819);\\n  b = ff(b, c, d, a, k[3], 22, -1044525330);\\n  a = ff(a, b, c, d, k[4], 7, -176418897);\\n  d = ff(d, a, b, c, k[5], 12, 1200080426);\\n  c = ff(c, d, a, b, k[6], 17, -1473231341);\\n  b = ff(b, c, d, a, k[7], 22, -45705983);\\n  a = ff(a, b, c, d, k[8], 7, 1770035416);\\n  d = ff(d, a, b, c, k[9], 12, -1958414417);\\n  c = ff(c, d, a, b, k[10], 17, -42063);\\n  b = ff(b, c, d, a, k[11], 22, -1990404162);\\n  a = ff(a, b, c, d, k[12], 7, 1804603682);\\n  d = ff(d, a, b, c, k[13], 12, -40341101);\\n  c = ff(c, d, a, b, k[14], 17, -1502002290);\\n  b = ff(b, c, d, a, k[15], 22, 1236535329);\\n\\n  a = gg(a, b, c, d, k[1], 5, -165796510);\\n  d = gg(d, a, b, c, k[6], 9, -1069501632);\\n  c = gg(c, d, a, b, k[11], 14, 643717713);\\n  b = gg(b, c, d, a, k[0], 20, -373897302);\\n  a = gg(a, b, c, d, k[5], 5, -701558691);\\n  d = gg(d, a, b, c, k[10], 9, 38016083);\\n  c = gg(c, d, a, b, k[15], 14, -660478335);\\n  b = gg(b, c, d, a, k[4], 20, -405537848);\\n  a = gg(a, b, c, d, k[9], 5, 568446438);\\n  d = gg(d, a, b, c, k[14], 9, -1019803690);\\n  c = gg(c, d, a, b, k[3], 14, -187363961);\\n  b = gg(b, c, d, a, k[8], 20, 1163531501);\\n  a = gg(a, b, c, d, k[13], 5, -1444681467);\\n  d = gg(d, a, b, c, k[2], 9, -51403784);\\n  c = gg(c, d, a, b, k[7], 14, 1735328473);\\n  b = gg(b, c, d, a, k[12], 20, -1926607734);\\n\\n  a = hh(a, b, c, d, k[5], 4, -378558);\\n  d = hh(d, a, b, c, k[8], 11, -2022574463);\\n  c = hh(c, d, a, b, k[11], 16, 1839030562);\\n  b = hh(b, c, d, a, k[14], 23, -35309556);\\n  a = hh(a, b, c, d, k[1], 4, -1530992060);\\n  d = hh(d, a, b, c, k[4], 11, 1272893353);\\n  c = hh(c, d, a, b, k[7], 16, -155497632);\\n  b = hh(b, c, d, a, k[10], 23, -1094730640);\\n  a = hh(a, b, c, d, k[13], 4, 681279174);\\n  d = hh(d, a, b, c, k[0], 11, -358537222);\\n  c = hh(c, d, a, b, k[3], 16, -722521979);\\n  b = hh(b, c, d, a, k[6], 23, 76029189);\\n  a = hh(a, b, c, d, k[9], 4, -640364487);\\n  d = hh(d, a, b, c, k[12], 11, -421815835);\\n  c = hh(c, d, a, b, k[15], 16, 530742520);\\n  b = hh(b, c, d, a, k[2], 23, -995338651);\\n\\n  a = ii(a, b, c, d, k[0], 6, -198630844);\\n  d = ii(d, a, b, c, k[7], 10, 1126891415);\\n  c = ii(c, d, a, b, k[14], 15, -1416354905);\\n  b = ii(b, c, d, a, k[5], 21, -57434055);\\n  a = ii(a, b, c, d, k[12], 6, 1700485571);\\n  d = ii(d, a, b, c, k[3], 10, -1894986606);\\n  c = ii(c, d, a, b, k[10], 15, -1051523);\\n  b = ii(b, c, d, a, k[1], 21, -2054922799);\\n  a = ii(a, b, c, d, k[8], 6, 1873313359);\\n  d = ii(d, a, b, c, k[15], 10, -30611744);\\n  c = ii(c, d, a, b, k[6], 15, -1560198380);\\n  b = ii(b, c, d, a, k[13], 21, 1309151649);\\n  a = ii(a, b, c, d, k[4], 6, -145523070);\\n  d = ii(d, a, b, c, k[11], 10, -1120210379);\\n  c = ii(c, d, a, b, k[2], 15, 718787259);\\n  b = ii(b, c, d, a, k[9], 21, -343485551);\\n\\n  x[0] = add32(a, x[0]);\\n  x[1] = add32(b, x[1]);\\n  x[2] = add32(c, x[2]);\\n  x[3] = add32(d, x[3]);\\n}\\n\\nfunction cmn(q, a, b, x, s, t) {\\n  a = add32(add32(a, q), add32(x, t));\\n  return add32((a << s) | (a >>> (32 - s)), b);\\n}\\n\\nfunction ff(a, b, c, d, x, s, t) {\\n  return cmn((b & c) | (~b & d), a, b, x, s, t);\\n}\\n\\nfunction gg(a, b, c, d, x, s, t) {\\n  return cmn((b & d) | (c & ~d), a, b, x, s, t);\\n}\\n\\nfunction hh(a, b, c, d, x, s, t) {\\n  return cmn(b ^ c ^ d, a, b, x, s, t);\\n}\\n\\nfunction ii(a, b, c, d, x, s, t) {\\n  return cmn(c ^ (b | ~d), a, b, x, s, t);\\n}\\n\\nfunction md51(s) {\\n  txt = \\"\\";\\n  var n = s.length,\\n    state = [1732584193, -271733879, -1732584194, 271733878],\\n    i;\\n  for (i = 64; i <= s.length; i += 64) {\\n    md5cycle(state, md5blk(s.substring(i - 64, i)));\\n  }\\n  s = s.substring(i - 64);\\n  var tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\\n  for (i = 0; i < s.length; i++)\\n    tail[i >> 2] |= s.charCodeAt(i) << (i % 4 << 3);\\n  tail[i >> 2] |= 0x80 << (i % 4 << 3);\\n  if (i > 55) {\\n    md5cycle(state, tail);\\n    for (i = 0; i < 16; i++) tail[i] = 0;\\n  }\\n  tail[14] = n * 8;\\n  md5cycle(state, tail);\\n  return state;\\n}\\n\\n/* there needs to be support for Unicode here,\\n * unless we pretend that we can redefine the MD-5\\n * algorithm for multi-byte characters (perhaps\\n * by adding every four 16-bit characters and\\n * shortening the sum to 32 bits). Otherwise\\n * I suggest performing MD-5 as if every character\\n * was two bytes--e.g., 0040 0025 = @%--but then\\n * how will an ordinary MD-5 sum be matched?\\n * There is no way to standardize text to something\\n * like UTF-8 before transformation; speed cost is\\n * utterly prohibitive. The JavaScript standard\\n * itself needs to look at this: it should start\\n * providing access to strings as preformed UTF-8\\n * 8-bit unsigned value arrays.\\n */\\nfunction md5blk(s) {\\n  /* I figured global was faster.   */\\n  var md5blks = [],\\n    i; /* Andy King said do it this way. */\\n  for (i = 0; i < 64; i += 4) {\\n    md5blks[i >> 2] =\\n      s.charCodeAt(i) +\\n      (s.charCodeAt(i + 1) << 8) +\\n      (s.charCodeAt(i + 2) << 16) +\\n      (s.charCodeAt(i + 3) << 24);\\n  }\\n  return md5blks;\\n}\\n\\nvar hex_chr = \\"0123456789abcdef\\".split(\\"\\");\\n\\nfunction rhex(n) {\\n  var s = \\"\\",\\n    j = 0;\\n  for (; j < 4; j++)\\n    s += hex_chr[(n >> (j * 8 + 4)) & 0x0f] + hex_chr[(n >> (j * 8)) & 0x0f];\\n  return s;\\n}\\n\\nfunction hex(x) {\\n  for (var i = 0; i < x.length; i++) x[i] = rhex(x[i]);\\n  return x.join(\\"\\");\\n}\\n\\nfunction md5(s) {\\n  return hex(md51(s));\\n}\\n\\nfunction add32(a, b) {\\n  return (a + b) & 0xffffffff;\\n}\\n\\noutputs.r.next(md5(inputs.str));\\n"},"MergeObjects":{"id":"MergeObjects","inputs":{"obj1":{"mode":"required","type":"any"},"obj2":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"// magic here\\nconst {obj1, obj2} = inputs;\\noutputs.r.next({...obj1, ...obj2});"},"MillisToDateString":{"id":"MillisToDateString","inputs":{"ms":{"mode":"required","type":"any"},"locale":{"mode":"required-if-connected","type":"any"},"options":{"mode":"required-if-connected","type":"any"}},"outputs":{"dateString":{"type":"any"}},"completionOutputs":["dateString"],"fnCode":"// magic here\\n\\nconst {ms, locale, options} = inputs;\\nconst {dateString} = outputs;\\n\\nconst _locale = locale || \'en-US\';\\nconst _options = options || {};\\n\\nconst str = new Date(ms).toLocaleDateString(_locale, _options);\\n\\ndateString.next(str);"},"MillisToString":{"id":"MillisToString","inputs":{"ms":{"mode":"required","type":"any"},"locale":{"mode":"required-if-connected","type":"any"},"options":{"mode":"required-if-connected","type":"any"}},"outputs":{"dateString":{"type":"any"}},"completionOutputs":["dateString"],"fnCode":"// magic here\\n\\nconst {ms, locale, options} = inputs;\\nconst {dateString} = outputs;\\n\\nconst _locale = locale || \'en-US\';\\nconst _options = options || {};\\n\\nconst str = new Date(ms).toLocaleString(_locale, _options);\\n\\ndateString.next(str);"},"Modulo":{"id":"Modulo","inputs":{"n1":{"mode":"required","type":"any"},"n2":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { n1, n2 } = inputs;\\nconst { r } = outputs;\\n      \\n// magic here\\nr.next(n1 % n2);\\n      "},"MouseEvent":{"id":"MouseEvent","inputs":{},"outputs":{"event":{"type":"any"}},"completionOutputs":["never"],"fnCode":"getDocument().body.addEventListener(\'mousemove\', ev => {\\n  outputs.event.next(ev);\\n})"},"Multiply":{"id":"Multiply","inputs":{"n1":{"mode":"required","type":"any"},"n2":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { n1, n2 } = inputs;\\nconst { r } = outputs;\\n      \\n// magic here\\nr.next(n1 * n2);\\n      "},"Now":{"id":"Now","inputs":{"trigger":{"mode":"optional","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { trigger } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nr.next(Date.now());\\n        "},"Object-builder-75360":{"id":"Object-builder-75360","inputs":{"statusCode":{"mode":"required","type":"any"},"body":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"object"}},"customViewCode":"{\\"statusCode\\":\\"${statusCode}\\",\\"body\\":\\"${body}\\"}","fnCode":"outputs.r.next(compileObjectTemplate(\\"%7B%22statusCode%22%3A%22%24%7BstatusCode%7D%22%2C%22body%22%3A%22%24%7Bbody%7D%22%7D\\", inputs));"},"Parse":{"id":"Parse","inputs":{"str":{"mode":"required","type":"any"}},"outputs":{"obj":{"type":"any"},"e":{"type":"any"}},"fnCode":"const { str } = inputs;\\nconst { obj, e } = outputs;\\n        \\n// magic here\\ntry {\\n    obj.next(JSON.parse(str));\\n} catch (err) {\\n    console.error(\\"error parsing json\\", err, str);\\n    e.next({str, e});\\n}"},"ParseInt":{"id":"ParseInt","inputs":{"str":{"mode":"required","type":"any"},"base":{"mode":"optional","type":"any"}},"outputs":{"r":{"type":"any"},"e":{"type":"any"}},"fnCode":"const { str, base } = inputs;\\nconst { r, e } = outputs;\\n        \\n// magic here\\nconst int = parseInt(str, base || 10);\\nif (isNaN(int)) {\\n    e.next(str);\\n} else {\\n    r.next(int);\\n}  "},"Pick":{"id":"Pick","inputs":{"obj":{"mode":"required","type":"any"},"key":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"},"e":{"type":"any"}},"customViewCode":"<% if (inputs.key) { %> Pick \\"<%- inputs.key %>\\" <% } else { %> Pick <% } %>","completionOutputs":["r","e"],"fnCode":"const { obj, key } = inputs;\\nconst { r, e } = outputs;\\n\\n// magic here\\n\\nlet hadError = false;\\n\\nconst matches = {};\\n\\nconst normalized = key.replace(/\\\\[\\"(([^\\"])+)\\"\\\\]/g, (match, p1, p2, offset) => {\\n  const key = `__$$KEY$$__${offset}`;\\n  matches[key] = p1;\\n  return `.${key}`;\\n});\\n\\n// outputs.log.next({matches, normalized});\\n\\nconst path = normalized.split(\\".\\");\\nlet o = { ...obj };\\nfor (let p of path) {\\n  const key = matches[p] || p;\\n  if (o && isDefined(o[key]) && o[key] !== null) {\\n    o = o[key];\\n  } else {\\n    e.next(obj);\\n    hadError = true;\\n  }\\n}\\n\\nif (!hadError) {\\n  r.next(o);\\n}\\n"},"Publish":{"id":"Publish","inputs":{"key":{"mode":"required","type":"any"},"value":{"mode":"required","type":"any"}},"outputs":{},"fnCode":"// magic here\\n\\nPubSub.publish(inputs.key, inputs.value);"},"Random":{"id":"Random","inputs":{"trigger":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { trigger } = inputs;\\nconst { r } = outputs;\\n      \\nr.next(Math.random());\\n      "},"RegexMatch":{"id":"RegexMatch","inputs":{"str":{"mode":"required","type":"any"},"pattern":{"mode":"required","type":"any"}},"outputs":{"match":{"type":"any"},"noMatch":{"type":"any"}},"fnCode":"const { str, pattern } = inputs;\\nconst { match, noMatch } = outputs;\\n        \\n// magic here\\nconst regex = new RegExp(pattern);\\nconst matches = str.match(regex);\\n\\nif (matches) {\\n    match.next(matches);\\n} else {\\n    noMatch.next(str);\\n}   "},"ReloadPage":{"id":"ReloadPage","inputs":{"reload":{"mode":"required","type":"any"}},"outputs":{},"fnCode":"const document = getDocument();\\ndocument.location.reload();\\n"},"RemoveAttr":{"id":"RemoveAttr","inputs":{"obj":{"mode":"required","type":"any"},"k":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { obj, k } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nconst o = { ...obj };\\ndelete o[k];\\nr.next(o);        "},"Repeat":{"id":"Repeat","inputs":{"val":{"mode":"required","type":"any"},"count":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"// magic here\\nconst {val, count} = inputs;\\nconst {r} = outputs;\\n\\nfor (let i = 0; i < count; i++) {\\n    r.next(val);\\n}\\n"},"Replace":{"id":"Replace","inputs":{"str":{"mode":"required","type":"any"},"from":{"mode":"required","type":"any"},"to":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { str, from, to } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nr.next(str.replace(from, to));"},"Round":{"id":"Round","inputs":{"n":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { n } = inputs;\\nconst { r } = outputs;\\n      \\n// magic here\\nr.next(Math.round(n));\\n      "},"RoundRobin3":{"id":"RoundRobin3","inputs":{"item":{"mode":"required","type":"any"}},"outputs":{"r1":{"type":"any"},"r2":{"type":"any"},"r3":{"type":"any"}},"completionOutputs":["never"],"reactiveInputs":["item"],"fnCode":"// magic here\\nconst {state} = adv;\\nconst {r1, r2, r3} = outputs;\\nconst curr = state.get(\'curr\') || 0;\\n\\nconst o = [r1, r2, r3][curr];\\n\\nconst nextCurr = (curr + 1) % 3;\\n\\nlog(nextCurr, curr);\\no.next(inputs.item);\\nstate.set(\'curr\', nextCurr);"},"ScanValue":{"id":"ScanValue","inputs":{"value":{"mode":"required","type":"any"},"initial":{"mode":"required","type":"any"},"onValue":{"mode":"required","type":"part({\\"prevValue\\": \\"any\\", \\"currValue\\": \\"any\\"}|{\\"newVal\\": \\"any\\"})"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["none"],"reactiveInputs":["value"],"fnCode":"const { state, insId, execute, onCleanup, onArg } = adv;\\nconst {initial, value, onValue } = inputs;\\nconst {r} = outputs;\\n\\nconst prevValue = state.get(\\"prevValue\\") || initial;\\n  \\nconst newVal = dynamicOutput();\\nconst prevValueArg = dynamicPartInput();\\nconst currValue = dynamicPartInput();\\nconst clean = execute(\\nonValue,\\n{ prevValue: prevValueArg, currValue },\\n{ newVal },\\n`${insId}-scan`\\n);\\n\\nlog({value, prevValue});\\n\\nconst s = newVal.subscribe((val) => {\\n    state.set(\\"prevValue\\", val);\\n    r.next(val);\\n    s.unsubscribe();\\n    clean();\\n});\\n\\ncurrValue.subject.next(value);\\nprevValueArg.subject.next(prevValue);\\n\\n"},"SetAttr":{"id":"SetAttr","inputs":{"obj":{"mode":"required","type":"any"},"k":{"mode":"required","type":"any"},"v":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { obj, k, v } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nr.next({ ...obj, [k]: v });"},"SetItem":{"id":"SetItem","inputs":{"key":{"mode":"required","type":"any"},"value":{"mode":"required","type":"any"}},"outputs":{"ok":{"type":"any"}},"completionOutputs":["ok"],"fnCode":"// magic here\\n\\nconst {key, value} = inputs;\\nmongoDb.collection(\'__KVStore\').updateOne({id: key}, {$set: {value}}, {upsert: true})\\n    .then(() => outputs.ok.next(value))\\n    .catch((err) => adv.onError(err));"},"SetState":{"id":"SetState","inputs":{"key":{"mode":"required","type":"any"},"value":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"fnCode":"const {state} = adv;\\nconst {key, value} = inputs;\\n\\nstate.set(key, value);\\noutputs.r.next(value);\\n\\n"},"SliceList":{"id":"SliceList","inputs":{"list":{"mode":"required","type":"any"},"begin":{"mode":"required","type":"any"},"end":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"// magic here\\nconst { list, begin, end} = inputs;\\noutputs.r.next(\\n    list.slice(begin, end)\\n);"},"Split":{"id":"Split","inputs":{"str":{"mode":"required","type":"any"},"by":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { str, by } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nr.next(str.split(by));"},"SpreadList":{"id":"SpreadList","inputs":{"list":{"mode":"required","type":"any"}},"outputs":{"length":{"type":"any"},"idx":{"type":"any"},"val":{"type":"any"}},"fnCode":"// magic here\\nconst { list } = inputs;\\nconst { val, idx, length } = outputs;\\nlength.next(list.length);\\nlist.forEach((v, i) => {\\n    val.next(v);\\n    idx.next(i);\\n});"},"SpreadList5":{"id":"SpreadList5","inputs":{"list":{"mode":"required","type":"any"}},"outputs":{"first":{"type":"any"},"second":{"type":"any"},"rest":{"type":"any"}},"fnCode":"const { list } = inputs;\\nconst { first, second, rest } = outputs;\\n      \\nconst [f, s, r] = list;\\n\\nf && first.next(f);\\ns && second.next(s);\\n\\nr.length && rest.next(r)\\n      "},"SpreadListDelayed":{"id":"SpreadListDelayed","inputs":{"list":{"mode":"required","type":"any"}},"outputs":{"val":{"type":"any"},"idx":{"type":"any"},"length":{"type":"any"}},"fnCode":"// magic here\\nconst { list } = inputs;\\nconst { val, idx, length } = outputs;\\nlength.next(list.length);\\nlist.forEach((v, i) => {\\n    setTimeout(() => {\\n        val.next(v);\\n        idx.next(i);\\n    }, 100 * idx);\\n});"},"StringAppend":{"id":"StringAppend","inputs":{"str":{"mode":"required","type":"any"},"strToAppend":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"// magic here// magic here\\noutputs.r.next(`${inputs.str}${inputs.strToAppend}`);"},"Stringify":{"id":"Stringify","inputs":{"obj":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { obj } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nr.next(JSON.stringify(obj));"},"StringIncludes":{"id":"StringIncludes","inputs":{"str":{"mode":"required","type":"any"},"strToFind":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"},"else":{"type":"any"}},"customViewCode":"","fnCode":"const { str, strToFind } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nif (str.includes(strToFind)) {\\n    r.next(str);\\n}  else {\\n    outputs[\'else\'].next(str);\\n}"},"Subscribe":{"id":"Subscribe","inputs":{"key":{"mode":"required","type":"any"}},"outputs":{"val":{"type":"any"}},"completionOutputs":["never"],"fnCode":"// magic here\\nconst token = PubSub.subscribe(inputs.key, (_, data) => {\\n    outputs.val.next(data);\\n});\\n\\nadv.onCleanup(() => {\\n    log(\'Unsubscribing!\');\\n    PubSub.unsubscribe(token);\\n});"},"SubStr":{"id":"SubStr","inputs":{"str":{"mode":"required","type":"any"},"from":{"mode":"required","type":"any"},"to":{"mode":"optional","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { str, from, to } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nr.next(str.substring(from, to));    "},"Subtract":{"id":"Subtract","inputs":{"n1":{"mode":"required","type":"any"},"n2":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"customViewCode":"<% if (inputs.n2) { %>\\n-<%-inputs.n2%>\\n<% } %>","completionOutputs":["r"],"fnCode":"const { n1, n2 } = inputs;\\nconst { r } = outputs;\\n      \\nr.next(n1 - n2);\\n      "},"Switch":{"id":"Switch","inputs":{"val":{"mode":"required","type":"any"},"case1":{"mode":"required","type":"any"},"case2":{"mode":"required-if-connected","type":"any"},"case3":{"mode":"required-if-connected","type":"any"},"case4":{"mode":"required-if-connected","type":"any"},"case5":{"mode":"required-if-connected","type":"any"},"transform":{"mode":"required-if-connected","type":"any"}},"outputs":{"is1":{"type":"any"},"is2":{"type":"any"},"is3":{"type":"any"},"is4":{"type":"any"},"is5":{"type":"any"},"other":{"type":"any"}},"fnCode":"const { val, case1, case2, case3, case4, case5, transform } = inputs;\\nconst { is1, is2, is3, is4, is5, other } = outputs;\\n\\nconst valueToRespond = isDefined(transform) ? transform : val;\\n// magic here\\nswitch (val) {\\n    case case1:\\n        is1.next(valueToRespond);\\n        break;\\n    case case2:\\n        is2.next(valueToRespond);\\n        break;\\n    case case3:\\n        is3.next(valueToRespond);\\n        break;\\n    case case4:\\n        is4.next(valueToRespond);\\n        break;\\n    case case4:\\n        is5.next(valueToRespond);\\n        break;\\n    default:\\n        other.next(valueToRespond);\\n        break;\\n}"},"Throttle":{"id":"Throttle","inputs":{"value":{"mode":"required","type":"any"},"threshold":{"mode":"required","type":"any"}},"outputs":{"result":{"type":"any"}},"customViewCode":"","reactiveInputs":["value"],"fnCode":"const { value, ms } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\n\\nconst last = adv.state.get(\\"last\\") || 0;\\nconst now = Date.now();\\nconst delta = now - last;\\nadv.state.set(\\"last\\", Date.now());\\n  \\nif (delta > ms) {\\n    result.next(value);\\n} "},"Transform":{"id":"Transform","inputs":{"from":{"mode":"required","type":"any"},"to":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"customViewCode":"<% if (inputs.to) { %> to \\"<%- inputs.to %>\\" <% } %>","completionOutputs":["r"],"fnCode":"const { to } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nr.next(to);"},"WebScraper":{"id":"WebScraper","inputs":{"url":{"mode":"required","type":"any"},"config":{"mode":"required","type":"any"}},"outputs":{"result":{"type":"any"}},"completionOutputs":["result"],"fnCode":"// magic here\\nconst {onError} = adv;\\n\\nscrapeIt(inputs.url, inputs.config).then(({ data, response }) => {\\n    outputs.result.next(data)\\n}, err => {\\n    onError(err);\\n})"}}')}}]);