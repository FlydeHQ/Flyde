(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[710],{67695:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n},o=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.customRepoToPartRepo=t.codePartToNative=void 0;var u=n(14206),a=n(18265),s=n(24048),c=n(18265);t.codePartToNative=function(e,t){void 0===t&&(t={});var l=n.g&&n.g.vm2||"undefined"==typeof window?n.g.vm2:window&&window.vm2,d=e.fnCode,p=r(e,["fnCode"]),f=a.debugLogger("code-part:"+e.id),v="\n  try {\n    "+d+"\n  } catch (e) {\n    adv.onError(e);\n  }\n  ",m=new l.VMScript(v),h=i(i({},p),{fn:function(n,r,d){var p=new l.VM({sandbox:i({inputs:n,outputs:r,setInterval:setInterval,clearInterval:clearInterval,setTimeout:setTimeout,clearTimeout:clearTimeout,encodeURIComponent:encodeURIComponent,adv:d,log:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];f.apply(void 0,o(["Log from code part "+e.id+" ["+d.insId+"]"],t))},axios:u.default,DEFAULT_AXIOS_TIMEOUT:15e3,dynamicPartInput:s.dynamicPartInput,dynamicPartArg:s.dynamicPartInput,dynamicOutput:c.dynamicOutput,isDefined:c.isDefined,compileStringTemplate:a.compileStringTemplate,compileObjectTemplate:a.compileObjectTemplate,__FLYDE_MODE:"production"},t)});p.run(m)}});return h};t.customRepoToPartRepo=function(e,n){void 0===n&&(n={});var i={};for(var r in e){var o=e[r];i[r]=s.isCodePart(o)?t.codePartToNative(o,n):o}return i}},8541:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cappedArrayDebounce=void 0;t.cappedArrayDebounce=function(e,t,n,i){void 0===i&&(i=500);var r=[],o=null,u=null;return function(a){clearTimeout(o),r.push(a),u||(u=setTimeout((function(){e(r),clearTimeout(o),u=null}),i)),r.length>=n?(e(r),clearTimeout(u),u=null,r=[]):o=setTimeout((function(){e(r),clearTimeout(u),u=null,r=[]}),t)}}},96615:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.dataShaper=t.DataShapeType=void 0,function(e){e[e.STRING=0]="STRING",e[e.NUMBER=1]="NUMBER",e[e.BOOLEAN=2]="BOOLEAN",e[e.ARRAY=3]="ARRAY",e[e.OBJECT=4]="OBJECT",e[e.NULL=5]="NULL"}(n=t.DataShapeType||(t.DataShapeType={}));var i={string:n.STRING,number:n.NUMBER,boolean:n.BOOLEAN,object:n.OBJECT,array:n.ARRAY,null:n.NULL};t.dataShaper=function(e,n,r){void 0===n&&(n=5),void 0===r&&(r=5);var o,u,a=null===(o=e)?"null":typeof o;if("object"===a){if(Array.isArray(e))return n>1?e.filter((function(e,t){return t<r})).map((function(e){return t.dataShaper(e,n-1,r)})):i.array;if(n>1){var s={};for(var c in e)s[c]=t.dataShaper(e[c],n-1,r);return u=s,Object.keys(u).sort().reduce((function(e,t){return e[t]=u[t],e}),{})}return i.object}return i[a]}},40189:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debugLogger=void 0;var i=n(96292).default("flyde");t.debugLogger=function(e){return i.extend(e)}},68132:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n},o=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.hashFlow=t.hashPart=void 0;var u=n(61586),a=n(18265),s=function(e){return u(e)};t.hashPart=function(e,t){void 0===t&&(t=!0);var n={id:e.id,completionOutputs:e.completionOutputs,reactiveInputs:e.reactiveInputs,inputs:e.inputs,outputs:e.outputs};if(a.isGroupedPart(e)){var u=e.instances,c=e.id,l=e.connections,d=e.inputsPosition,p=e.outputsPosition,f=u.map((function(e){e.pos;return r(e,["pos"])})),v=t?{}:{inputsPosition:d,outputsPosition:p},m=t?f:u;m.sort((function(e,t){return e.id.localeCompare(t.id)}));var h=o([],l);h.sort((function(e,t){var n=e.from.insId+"."+e.from.pinId,i=t.from.insId+"."+t.from.pinId;return n.localeCompare(i)}));var y=JSON.stringify(i(i({id:c,instancesToUse:m,conns:h},n),{maybeIoPos:v}));return s(y)}if(a.isCodePart(e)){var g=e.fnCode,I=e.customViewCode;y=JSON.stringify(i({fnCode:g,customViewCode:I},n));return s(y)}throw new Error("Hashing native parts unsupported")};t.hashFlow=function(e,n){void 0===n&&(n=!0);var r=e.part,o=e.imports,u=t.hashPart(r,!1),a=Object.entries(o).sort((function(e,t){var n=e[0],i=t[0];return n.localeCompare(i)})).map((function(e){return[e[0],e[1].sort()]})).reduce((function(e,t){var n,r=t[0],o=t[1];return i(i({},e),((n={})[r]=o,n))}),{}),c=JSON.stringify(a);return s(u+c)}},45821:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.DepGraph=void 0,r(n(69985),t),r(n(94919),t),r(n(40189),t),r(n(8541),t),r(n(94919),t),r(n(68132),t),r(n(67748),t),r(n(96615),t),t.DepGraph=n(59280).DepGraph},69985:function(e,t){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.testDataCreator=void 0;t.testDataCreator=function(e){return function(t){void 0===t&&(t={});var i="function"==typeof e?e():e,r=t;return n(n({},i),r)}}},94919:function(e,t){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function u(e){try{s(i.next(e))}catch(t){o(t)}}function a(e){try{s(i.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,a)}s((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,r,o,u={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,i=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(r=u.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){u.label=o[1];break}if(6===o[0]&&u.label<r[1]){u.label=r[1],r=o;break}if(r&&u.label<r[2]){u.label=r[2],u.ops.push(o);break}r[2]&&u.ops.pop(),u.trys.pop();continue}o=t.call(e,u)}catch(a){o=[6,a],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.eventually=t.delay=t.noop=t.removeDupes=t.ensure=t.isOptionalType=t.isDefined=t.containsAll=t.shuffle=t.randomInts=t.repeat=t.pickRandom=t.randomPos=t.randomInt=t.pickSecond=t.pickFirst=t.fromEntries=t.entries=t.okeys=t.values=t.keys=t.filterOMap=t.mapOMap=void 0;t.mapOMap=function(e,i){return t.entries(e).map((function(e){var t=e[0],n=e[1];return[t,i(t,n)]})).reduce((function(e,t){var i,r=t[0],o=t[1];return n(n({},e),((i={})[r]=o,i))}),{})};t.filterOMap=function(e,i){return t.entries(e).filter((function(e){var t=e[0],n=e[1];return i(t,n)})).reduce((function(e,t){var i,r=t[0],o=t[1];return n(n({},e),((i={})[r]=o,i))}),{})};t.keys=function(e){return Object.keys(e)};t.values=function(e){return Object.values(e)},t.okeys=t.keys;t.entries=function(e){return t.okeys(e).map((function(t){return[t,e[t]]}))};t.fromEntries=function(e){return e.reduce((function(e,t){var i,r=t[0],o=t[1];return n(n({},e),((i={})[r]=o,i))}),{})};t.pickFirst=function(e){return e[0]};t.pickSecond=function(e){return e[1]};t.randomInt=function(e,t){void 0===t&&(t=0);var n=Math.random();return t+Math.floor((e-t)*n)};t.randomPos=function(e,n){return void 0===e&&(e=1e3),void 0===n&&(n=0),{x:t.randomInt(e,n),y:t.randomInt(e,n)}};t.pickRandom=function(e){return e[t.randomInt(e.length)]};t.repeat=function(e,t){return"x".repeat(e).split("").map((function(e,n){return t(n)}))};t.randomInts=function(e,n,i){return void 0===n&&(n=100),void 0===i&&(i=0),t.repeat(e,(function(){return t.randomInt(n,i)}))};t.shuffle=function(e){for(var t,n=o([],e),i=n.length-1;i>=0;i--){var r=Math.floor(Math.random()*(i+1));t=[n[r],n[i]],n[i]=t[0],n[r]=t[1]}return n};t.containsAll=function(e,t){return t.every((function(t){return e.includes(t)}))};t.isDefined=function(e){return void 0!==e};t.isOptionalType=function(e){return/\?$/.test(e)};t.ensure=function(e,t){if(void 0===e)throw new Error(t||"Undefined value passed");return e};t.removeDupes=function(e){return Array.from(new Set(e))};t.noop=function(){};t.delay=function(e){return new Promise((function(t){return setTimeout(t,e)}))};t.eventually=function(e,n,o,u){return void 0===n&&(n=3e3),void 0===o&&(o=100),void 0===u&&(u=new Set),i(void 0,void 0,void 0,(function(){var i,a,s,c;return r(this,(function(r){switch(r.label){case 0:if(n<0)throw i=Array.from(u).reduce((function(e,t,n){return e+"\n\t\t"+(n+1)+". "+t}),""),new Error("[Eventually timeout exceeded after: timeout with error]: "+i);r.label=1;case 1:return r.trys.push([1,3,,5]),[4,e()];case 2:return r.sent(),[3,5];case 3:return a=r.sent(),s=Date.now(),[4,t.delay(o)];case 4:return r.sent(),c=Date.now()-s,u.add(a.message),[2,t.eventually(e,n-c,o,u)];case 5:return[2]}}))}))}},67748:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compileObjectTemplate=t.compileStringTemplate=void 0;t.compileStringTemplate=function(e,t){var n=decodeURIComponent(e);return Object.keys(t).forEach((function(e){var i=t[e],r=new RegExp("\\$\\{"+e+"\\}","g");n=n.replace(r,i)})),n};t.compileObjectTemplate=function(e,t){var n=decodeURIComponent(e);return Object.keys(t).forEach((function(e){var i=t[e],r=JSON.stringify(i),o=new RegExp('"\\$\\$\\{'+e+'\\}"',"g"),u=new RegExp("\\$\\{"+e+"\\}","g"),a="string"==typeof i?i.replace(/"/g,(function(e,t,n){return"\\"!==n[t-1]?'\\"':n[t]})):i;n=n.replace(o,r).replace(u,a).replace(/\n/g,"\\n")})),JSON.parse(n)}},1076:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.connection=t.connectionData=t.connectionDataEquals=t.connectionNodeEquals=t.connectionNode=t.externalConnectionNode=t.isInternalConnection=t.isExternalConnection=t.isInternalConnectionNode=t.isExternalConnectionNode=t.TRIGGER_PIN_ID=t.ERROR_PIN_ID=t.THIS_INS_ID=void 0,t.THIS_INS_ID="__this",t.ERROR_PIN_ID="__error",t.TRIGGER_PIN_ID="__trigger";t.isExternalConnectionNode=function(e){return e.insId===t.THIS_INS_ID};t.isInternalConnectionNode=function(e){return e.insId!==t.THIS_INS_ID};t.isExternalConnection=function(e){var n=e.from,i=e.to;return t.isExternalConnectionNode(n)||t.isExternalConnectionNode(i)};t.isInternalConnection=function(e){return!t.isExternalConnection(e)};t.externalConnectionNode=function(e){return{insId:t.THIS_INS_ID,pinId:e}};t.connectionNode=function(e,t){return{insId:e,pinId:t}};t.connectionNodeEquals=function(e,t){return e.insId===t.insId&&e.pinId===t.pinId};t.connectionDataEquals=function(e,n){return!(!e||!n)&&(t.connectionNodeEquals(e.from,n.from)&&t.connectionNodeEquals(e.to,n.to))},t.connectionData=function(e,n,i){var r="string"==typeof e?e.split("."):e,o="string"==typeof n?n.split("."):n;if(r.length>2||o.length>2)throw new Error("invalid source or target to connection data - "+e+" / "+n);return{from:2===r.length?t.connectionNode(r[0],r[1]):t.externalConnectionNode(r[0]),to:2===o.length?t.connectionNode(o[0],o[1]):t.externalConnectionNode(o[0]),delayed:i}};t.connection=function(e,t,n){return void 0===n&&(n=!1),{from:e,to:t,delayed:n}}},6485:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)},o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function u(e){try{s(i.next(e))}catch(t){o(t)}}function a(e){try{s(i.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,a)}s((i=i.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var n,i,r,o,u={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,i=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(r=u.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){u.label=o[1];break}if(6===o[0]&&u.label<r[1]){u.label=r[1],r=o;break}if(r&&u.label<r[2]){u.label=r[2],u.ops.push(o);break}r[2]&&u.ops.pop(),u.trys.pop();continue}o=t.call(e,u)}catch(a){o=[6,a],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.connect=void 0;var a=n(24048),s=n(30385),c=n(45821),l=n(1076);r(n(1076),t);t.connect=function(e,t,n,i,r,d,p){void 0===n&&(n={}),void 0===i&&(i="root"),void 0===r&&(r={bob:new Map}),void 0===d&&(d=c.noop),void 0===p&&(p={});var f=e.id,v=e.connections,m=e.instances,h=f||"connected-part"+c.randomInt(999);return{inputs:e.inputs,outputs:e.outputs,id:h,completionOutputs:e.completionOutputs,reactiveInputs:e.reactiveInputs,fn:function(f,y){var g=[],I=new c.DepGraph({}),b=new Map,P=new Map,_=new Map,C=new Map,E=new Map,O=new Map;m.forEach((function(e){var n=a.getPart(e,t),i=e.id;b.set(e,i),P.set(i,e),I.addNode(i);var r=Object.keys(n.inputs),o=Object.keys(n.outputs),u={},s={};if(r.forEach((function(t){var n=(e.inputConfig||{})[t]||a.queueInputPinConfig();a.isStaticInputPinConfig(n)?u[t]=a.staticPartInput(n.value):u[t]=a.dynamicPartInput({config:n})})),u[l.TRIGGER_PIN_ID]=a.dynamicPartInput({config:a.queueInputPinConfig()}),v.some((function(t){return l.isInternalConnectionNode(t.to)&&t.to.insId===e.id&&t.to.pinId===l.TRIGGER_PIN_ID}))&&e.inputConfig&&e.inputConfig[l.TRIGGER_PIN_ID])throw"Trigger connection can not be configured";o.forEach((function(e){var t=a.dynamicOutput();s[e]=t})),v.some((function(t){return l.isInternalConnectionNode(t.from)&&t.from.insId===e.id&&t.from.pinId===l.ERROR_PIN_ID}))&&(s[l.ERROR_PIN_ID]=a.dynamicOutput()),_.set(i,u),C.set(i,s)}));var j=new Set;return v.forEach((function(n){var i=n.from,r=n.to,s=i.insId,c=i.pinId,d=r.insId,p=r.pinId,f=C.get(s),v=_.get(d);if(l.isInternalConnectionNode(r)&&j.add(r.insId+"."+r.pinId),l.isExternalConnection(n))if(l.isExternalConnectionNode(i)){var m=v[r.pinId];if(!m)throw new Error("Input "+r.pinId+" of instance "+d+" not found");(y=E.get(i.pinId)||[]).push(m),E.set(i.pinId,y)}else{var y,b=f[i.pinId];if(!b)throw new Error("Output "+i.pinId+" of instance "+s+" not found");(y=O.get(r.pinId)||[]).push(b),O.set(r.pinId,y)}else{if(!f)throw new Error("No outputs found for instance ["+s+"]");if(!v)throw P.has(d)?new Error("No inputs found for instance ["+d+"]"):new Error("Instance with id ["+d+"] does not exist!");var w=f[c];if(!w)throw new Error("Output source - ["+i+"] not found in part ["+h+"]");var x=v[p],T=P.get(s);if(!T&&s!==l.THIS_INS_ID)throw new Error("Instance ["+s+"] does not exist! failed to connect ["+i+"] -> ["+r+"]");var S=(T?a.getPart(T,t):e).outputs[c];if(S&&S.delayed||n.delayed||s!==l.THIS_INS_ID&&d!==l.THIS_INS_ID&&I.addDependency(s,d),!x)throw new Error("Target arg - ["+r+"] not found in part ["+h+"]");var D=w.subscribe((function(e){return o(void 0,void 0,void 0,(function(){return u(this,(function(t){if(!a.isDynamicInput(x))throw console.info(x),new Error("Impossible state listening to non dynamic input - "+d+"."+p);return x.subject.next(e),[2]}))}))}));g.push((function(){return D.unsubscribe()}))}})),c.okeys(y).forEach((function(e){(O.get(e)||[]).forEach((function(t){var n=t.subscribe((function(t){return o(void 0,void 0,void 0,(function(){return u(this,(function(n){return y[e].next(t),[2]}))}))}));g.push((function(){return n.unsubscribe()}))}))})),I.overallOrder().map((function(e){return P.get(e)})).forEach((function(e){var o=_.get(e.id),u=C.get(e.id),c=a.getPart(e,t);if(!o)throw new Error("Unexpected error - args not found when running "+e);if(!u)throw new Error("Unexpected error - outputs not found when running "+e);for(var l in o){var f=e.inputConfig[l];j.has(e.id+"."+l)||a.isStaticInputPinConfig(f)||delete o[l]}var v=s.execute({part:c,inputs:o,outputs:u,partsRepo:t,_debugger:n,insId:e.id,extraContext:{},mainState:r,parentInsId:i,onBubbleError:d,env:p});g.push(v)})),Object.keys(f).forEach((function(e){return o(void 0,void 0,void 0,(function(){return u(this,(function(t){return(E.get(e)||[]).forEach((function(t){var n=f[e];if(!a.isDynamicInput(t))throw new Error("Unsure what to do with key "+e+", input: "+t+" of ins "+i);c.isDefined(n)&&t.subject.next(n)})),[2]}))}))})),function(){return g.forEach((function(e){try{e()}catch(t){console.error("error unsubscribing",t)}}))}}}}},30385:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function u(e){try{s(i.next(e))}catch(t){o(t)}}function a(e){try{s(i.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,a)}s((i=i.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,i,r,o,u={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,i=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(r=u.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){u.label=o[1];break}if(6===o[0]&&u.label<r[1]){u.label=r[1],r=o;break}if(r&&u.label<r[2]){u.label=r[2],u.ops.push(o);break}r[2]&&u.ops.pop(),u.trys.pop();continue}o=t.call(e,u)}catch(a){o=[6,a],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.execute=t.INPUTS_STATE_SUFFIX=t.INNER_STATE_SUFFIX=void 0;var u=n(71542),a=n(21730),s=n(98739),c=n(24048),l=n(6485),d=n(23939),p=n(45821),f=n(40189),v=n(18265);t.INNER_STATE_SUFFIX="_inner",t.INPUTS_STATE_SUFFIX="_inputs";t.execute=function(e){var n=e.part,m=e.inputs,h=e.outputs,y=e.partsRepo,g=e._debugger,I=void 0===g?{}:g,b=e.insId,P=void 0===b?n.id:b,_=e.extraContext,C=void 0===_?{}:_,E=e.mainState,O=void 0===E?{}:E,j=e.parentInsId,w=void 0===j?"root":j,x=e.onBubbleError,T=void 0===x?u.noop:x,S=e.env,D=void 0===S?{}:S,N=[],k=s(),R=i(i({},C),{ENV:D}),M=v.customRepoToPartRepo(y,R);console.log({part:n});var A=function(e){if(h[l.ERROR_PIN_ID])h[l.ERROR_PIN_ID].next(e);else{var t=e instanceof Error?e:new Error("Raw error: "+e.toString());if(t.message="error in child instance "+P+": "+t.message,t.insId=P,T(t),I.onError){var n=t;n.insId=w+"."+P,I.onError(n)}}},V=function(e){return c.isGroupedPart(e)?l.connect(e,M,I,w+"."+P,O,A,D):c.isCodePart(e)?v.codePartToNative(e,R):e}(n),z=I.onInput||u.noop,G=I.onOutput||u.noop,H={},q={},L=w+"."+P;p.entries(m).forEach((function(e){var t=e[0],n=e[1];if(c.isDynamicInput(n)){var i=c.dynamicPartInput({config:n.config}),u=n.subject.subscribe((function(e){return r(void 0,void 0,void 0,(function(){var n,r;return o(this,(function(o){switch(o.label){case 0:return(n=z({insId:L,pinId:t,val:e,time:Date.now(),partId:V.id,executionId:k}))?[4,n.valuePromise]:[3,2];case 1:return r=o.sent(),i.subject.next(r),[3,5];case 2:return I.debugDelay?[4,p.delay(I.debugDelay)]:[3,4];case 3:o.sent(),o.label=4;case 4:i.subject.next(e),o.label=5;case 5:return[2]}}))}))}));N.push((function(){return u.unsubscribe()})),q[t]=i}else{var a=c.staticPartInput(c.getStaticValue(n.config.value,M,P));q[t]=a}})),p.entries(h).forEach((function(e){var t=e[0],n=e[1],i=c.dynamicOutput(),u=i.subscribe((function(e){return r(void 0,void 0,void 0,(function(){var i,r;return o(this,(function(o){switch(o.label){case 0:return(i=G({insId:L,pinId:t,val:e,time:Date.now(),partId:V.id,executionId:k}))?[4,i.valuePromise]:[3,2];case 1:return r=o.sent(),n.next(r),[3,3];case 2:n.next(e),o.label=3;case 3:return[2]}}))}))}));N.push((function(){return u.unsubscribe()})),H[t]=i}));var F=function(e){var n,r=e.part,o=e.inputs,s=e.outputs,l=e.repo,v=e._debugger,m=e.insId,h=e.parentInsId,y=e.mainState,g=e.onError,I=(e.onBubbleError,e.env),b=r.fn,P=f.debugLogger("core"),_=[],C=v.onProcessing||u.noop,E=v.onInputsStateChange||u.noop,O=(h||"root")+"."+m,j=""+O+t.INNER_STATE_SUFFIX,w=""+O+t.INPUTS_STATE_SUFFIX,x=P.extend(O);y[j]||(y[j]=new Map),y[w]||(y[w]=new Map),y[j];var T,S=y[w],D=function(){var e=Array.from(S.entries()).reduce((function(e,t){var n,r=t[0],u=t[1],a=c.isQueueInputPinConfig(o[r].config,o[r]);return i(i({},e),((n={})[r]=a?null==u?void 0:u.length:1,n))}),{});E({inputs:e,insId:O})},N={execute:function(e,n,i,r){return t.execute({part:e,inputs:n,outputs:i,partsRepo:l,_debugger:v,insId:r})},insId:m,state:y[j],onCleanup:function(e){_.push(e)},onError:function(e){g(e)}},k=!1,R=r.reactiveInputs||[],M=function(){y[j].clear(),p.keys(y).filter((function(e){return e.startsWith(O+".")})).forEach((function(e){y[e]=new Map}))},A=function e(t){var u,l=R.includes(null==t?void 0:t.key);if(k&&!l);else{var f=k&&l;if(d.isPartStateValid(o,S,r,T)||f){var v=void 0;if(k){if(!t)throw new Error("Unexpected state,  got reactive part while not processing and not valid");var m=d.pullValueForExecution(t.key,o[t.key],S,I);v=i(i({},T),((u={})[t.key]=m,u)),D()}else v=d.pullValuesForExecution(o,S,I),T=v,D();var h=new Set;if(r.completionOutputs){C({processing:k=!0,insId:O});var y=new Set(r.completionOutputs);p.entries(s).forEach((function(t){var i=t[0];t[1].pipe(a.first()).subscribe((function(t){h.add(i),Array.from(y.keys()).join(","),Array.from(h.keys()).join(","),y.has(i)&&(C({processing:k=!1,insId:O}),M(),n&&!r.outputs.jsx&&(n(),n=void 0),h.clear(),d.hasNewSignificantValues(o,S,I,r.id)&&e())}))}))}else M();try{x("Running part %s with values %o",r.id,v),n=b(v,s,N)}catch(w){C({processing:k=!1,insId:O}),g(w)}var P=R.find((function(e){return o[e]&&d.peekValueForExecution(e,o[e],S,I,r.id)}));if(P)m=d.peekValueForExecution(P,o[P],S,I,r.id),e({key:P,value:m});else{var _=p.entries(o).find((function(e){var t=e[0],n=e[1],i=c.isQueueInputPinConfig(n.config,n),o=d.peekValueForExecution(t,n,S,I,r.id);if(i)return p.isDefined(o)}));if(_){var E=_[0],j=_[1];m=d.peekValueForExecution(E,j,S,I,r.id),e({key:E,value:m})}}}}};A();var V=d.subscribeInputsToState(o,S,l,m,(function(e,t){P("Got input %s - value is [%o]",e,t),D(),A({key:e,value:t})}));return _.push(V),function(){n&&n(),_.forEach((function(e){return e()}))}}({part:V,inputs:q,outputs:H,repo:M,_debugger:I,insId:P,mainState:O,parentInsId:w,onError:A,onBubbleError:T,env:D});return function(){N.forEach((function(e){return e()})),F()}}},23939:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeInputsToState=t.isPartStateValid=t.hasNewSignificantValues=t.peekValuesForExecution=t.pullValuesForExecution=t.pullValueForExecution=t.peekValueForExecution=void 0;var o=n(24048),u=n(45821),a=n(6485),s=function(e,t){var n=o.extractStaticValue(e);return o.isEnvValue(n)?function(e,t){for(var n=e.split("."),r=i({},t),o=0,a=n;o<a.length;o++){var s=a[o];if(!r||!u.isDefined(r[s])||null===r[s])throw new Error("Cannot find key "+e+" inside obj "+t);r=r[s]}return r}(o.getEnvKeyFromValue(n),t):n};t.peekValueForExecution=function(e,t,n,i,u){var a=n.get(e);if(!t)throw new Error('Trying to peek value of inexsting input in key "'+e+'" in part "'+u+'"');return o.isStaticInput(t)?s(t,i):o.isQueueInputPinConfig(t.config,t)?a?r([],a).shift():void 0:a};t.pullValueForExecution=function(e,t,n,i){var r,u=n.get(e);return o.isStaticInput(t)?r=s(t,i):o.isQueueInputPinConfig(t.config,t)?(r=(u||[]).shift(),n.set(e,u)):(r=u,o.isStickyInputPinConfig(t.config)||n.delete(e)),r};t.pullValuesForExecution=function(e,n,i){return u.entries(e).reduce((function(e,r){var o=r[0],u=r[1];return e[o]=t.pullValueForExecution(o,u,n,i),e}),{})};t.peekValuesForExecution=function(e,n,i,r){return u.entries(e).reduce((function(e,o){var u=o[0],a=o[1];return e[u]=t.peekValueForExecution(u,a,n,i,r),e}),{})};t.hasNewSignificantValues=function(e,n,i,r){return u.entries(e).some((function(e){var a=e[0],s=e[1],c=o.isStaticInput(s),l=t.peekValueForExecution(a,s,n,i,r);return u.isDefined(l)&&!c}))};t.isPartStateValid=function(e,t,n,i){var r=u.keys(e),s=u.keys(n.inputs).filter((function(e){return"required"===n.inputs[e].mode}));return r.includes(a.TRIGGER_PIN_ID)&&s.push(a.TRIGGER_PIN_ID),!!u.containsAll(r,s)&&u.entries(e).filter((function(e){var t=e[0];return!!n.inputs[t]||t===a.TRIGGER_PIN_ID})).every((function(e){var i,r=e[0],a=e[1],s=t.get(r);return"optional"===((null===(i=n.inputs[r])||void 0===i?void 0:i.mode)||"required")||(!!o.isStaticInput(a)||(o.isQueueInputPinConfig(a.config,a)?u.isDefined(s)&&s.length>0:u.isDefined(s)))}))};t.subscribeInputsToState=function(e,t,n,i,r){var a=[];return u.entries(e).forEach((function(e){var n=e[0],i=e[1];if(i&&!o.isStaticInput(i)){var u=i.subject.subscribe((function(e){if(o.isQueueInputPinConfig(i.config,i)){var u=t.get(n)||[];if(!Array.isArray(u))throw new Error("impossible state - state of key "+n+" is set but not an array");u.push(e),t.set(n,u),r(n,e)}else t.set(n,e),r(n,e)}));a.push((function(){return u.unsubscribe()}))}})),function(){return a.forEach((function(e){return e()}))}}},19735:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flydeFlowSchema=void 0;var i=n(89510),r=i.z.record(i.z.string(),i.z.string().or(i.z.array(i.z.string()))),o=i.z.strictObject({x:i.z.number(),y:i.z.number()}),u=i.z.discriminatedUnion("mode",[i.z.strictObject({mode:i.z.literal("static"),value:i.z.any()}),i.z.strictObject({mode:i.z.literal("queue")}),i.z.strictObject({mode:i.z.literal("sticky")})]),a=i.z.object({pos:o.default({x:0,y:0}),id:i.z.string(),inputConfig:i.z.optional(i.z.record(i.z.string(),u)).default({}),visibleInputs:i.z.optional(i.z.array(i.z.string())),partId:i.z.optional(i.z.string()),part:i.z.optional(i.z.any())}).refine((function(e){return e.part||e.partId}),{message:"Instance must have either an inline part or refer to a partId"}),s=i.z.object({id:i.z.optional(i.z.string()),inputs:i.z.record(i.z.string(),i.z.union([i.z.string(),i.z.object({mode:i.z.enum(["required","optional","required-if-connected"]),type:i.z.string()})])),outputs:i.z.record(i.z.string(),i.z.union([i.z.string(),i.z.object({type:i.z.string(),optional:i.z.optional(i.z.boolean()),delayed:i.z.optional(i.z.boolean())})])),inputsPosition:i.z.optional(i.z.record(i.z.string(),o)),outputsPosition:i.z.optional(i.z.record(i.z.string(),o)),customViewCode:i.z.optional(i.z.string()),dataBuilderSource:i.z.optional(i.z.string()),templateType:i.z.optional(i.z.string()),completionOutputs:i.z.optional(i.z.array(i.z.string())),reactiveInputs:i.z.optional(i.z.array(i.z.string()))}),c=i.z.object({instances:i.z.array(a),connections:i.z.array(i.z.strictObject({from:i.z.strictObject({insId:i.z.string(),pinId:i.z.string()}),to:i.z.strictObject({insId:i.z.string(),pinId:i.z.string()}),delayed:i.z.optional(i.z.boolean())}))}).and(s);t.flydeFlowSchema=i.z.strictObject({imports:i.z.optional(r).default({}),part:c})},18265:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectType=t.isStaticValueGroupedPart=void 0,r(n(45821),t);var o=n(24048);r(n(6485),t),r(n(30385),t),r(n(24048),t),r(n(90163),t),r(n(51922),t),r(n(67695),t),r(n(55281),t),r(n(75596),t),r(n(19735),t);t.isStaticValueGroupedPart=function(e){return e&&!!o.maybeGetStaticValuePartId(""+e)},function(e){e.WEB_UI="web-ui",e.SERVER="server",e.MOBILE="mobile",e.CLI="cli"}(t.ProjectType||(t.ProjectType={}))},90163:function(e,t,n){"use strict";var i=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.getPartWithDependencies=void 0;var r=n(24048),o=n(18265),u=n(93471);t.getPartWithDependencies=function(e,n,a){if(void 0===a&&(a=[]),r.isCodePart(e))return[e];if(a.includes(e.id))return[];var s=o.removeDupes(e.instances.filter((function(e){return u.isRefPartInstance(e)})).map((function(e){return e.partId})).filter((function(e){return n[e]}))),c=s.map((function(e){return n[e]})).reduce((function(e,r){return i(i([],e),t.getPartWithDependencies(r,n,i(i([],a),s)))}),[]);return i([e],c)}},24048:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.getPartDef=t.getPart=t.getStaticValue=t.maybeGetStaticValuePartId=t.staticPartRefence=t.fromSimplified=t.codePart=t.nativePart=t.groupedPart=t.isCodePart=t.isGroupedPart=t.isNativePart=t.CodePartTemplateTypeInline=void 0;var u=n(45821),a=n(93471);o(n(93471),t),o(n(85089),t),o(n(34702),t),function(e){e.VALUE="value",e.FUNCTION="function"}(t.CodePartTemplateTypeInline||(t.CodePartTemplateTypeInline={}));t.isNativePart=function(e){return!t.isGroupedPart(e)};t.isGroupedPart=function(e){return!!e.instances};t.isCodePart=function(e){return u.isDefined(e)&&u.isDefined(e.fnCode)},t.groupedPart=u.testDataCreator({id:"grouped-part",inputs:{},outputs:{},instances:[],connections:[],outputsPosition:{},inputsPosition:{}}),t.nativePart=u.testDataCreator({id:"part",inputs:{},outputs:{},fn:u.noop}),t.codePart=u.testDataCreator({id:"part",inputs:{},outputs:{},fnCode:""});t.fromSimplified=function(e){var t=e.fn,n=e.inputTypes,r=e.outputTypes,o=e.id,a=u.entries(n).reduce((function(e,t){var n,r=t[0],o=t[1];return i(i({},e),((n={})[r]={type:o},n))}),{}),s=u.entries(r).reduce((function(e,t){var n,r=t[0],o=t[1];return i(i({},e),((n={})[r]={type:o},n))}),{});return{id:o,inputs:a,outputs:s,fn:t}};t.staticPartRefence=function(e){return"__part:"+e.id};t.maybeGetStaticValuePartId=function(e){var t="string"==typeof e&&e.match(/^__part\:(.*)/);return t?t[1]:null};t.getStaticValue=function(e,n,i){var r=t.maybeGetStaticValuePartId(e);if(r){var o=n[r];if(!o)throw new Error("Instance "+i+" referrer to a part reference "+r+" that does not exist");return o}return e};t.getPart=function(e,t){if("string"!=typeof e&&a.isInlinePartInstance(e))return e.part;var n="string"==typeof e?e:e.partId,i=t[n];if(!i)throw new Error("Part with id "+n+" not found");return i};t.getPartDef=function(e,t){if("string"!=typeof e&&a.isInlinePartInstance(e))return e.part;var n="string"==typeof e?e:e.partId,i=t[n];if(!i)throw console.error("Part with id "+n+" not found"),new Error("Part with id "+n+" not found");return i}},93471:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PartInstance=t.isRefPartInstance=t.isInlinePartInstance=t.inlinePartInstance=t.partInstance=void 0;t.partInstance=function(e,t,n,i){return{id:e,partId:t,inputConfig:n||{},pos:i||{x:0,y:0}}};t.inlinePartInstance=function(e,t,n,i){return{id:e,part:t,inputConfig:n||{},pos:i||{x:0,y:0}}};t.isInlinePartInstance=function(e){return!!e.part};t.isRefPartInstance=function(e){return!t.isInlinePartInstance(e)};t.PartInstance=function(e,t,n,i){return{id:e,partId:t.id,inputConfig:n||{},pos:i||{x:0,y:0}}}},85089:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEnvKeyFromValue=t.toEnvValue=t.isEnvValue=t.extractStaticValue=t.isStaticInput=t.isDynamicInput=t.staticPartInput=t.dynamicPartInputs=t.dynamicPartInput=t.dynamicOutput=t.partOutputs=t.partOutput=t.partInputs=t.isInputPinOptional=t.partInput=void 0;var i=n(71542),r=n(24048),o=n(45821),u=n(34702);t.partInput=function(e,t){return void 0===e&&(e="any"),void 0===t&&(t="required"),{type:e,mode:t}};t.isInputPinOptional=function(e){return"optional"===e.mode};t.partInputs=function(e,n){return o.repeat(e,(function(e){return t.partInput("any",n[e]||"required")}))};t.partOutput=function(e,t,n){return void 0===e&&(e="any"),void 0===t&&(t=!1),void 0===n&&(n=!1),{type:e,delayed:t,optional:n}};t.partOutputs=function(e){return o.repeat(e,(function(){return t.partOutput("any")}))};t.dynamicOutput=function(){return new i.Subject},t.dynamicPartInput=o.testDataCreator((function(){return{subject:new i.Subject,config:u.queueInputPinConfig()}}));t.dynamicPartInputs=function(e){return void 0===e&&(e=10),o.repeat(e,(function(){return o.testDataCreator((function(){return{subject:new i.Subject,config:u.queueInputPinConfig()}}))()}))};t.staticPartInput=function(e){return{config:u.staticInputPinConfig(e)}};t.isDynamicInput=function(e){var t=e;return t&&t.subject&&!!t.subject.next};t.isStaticInput=function(e){return r.isStaticInputPinConfig(e.config)};t.extractStaticValue=function(e){if(t.isStaticInput(e))return e.config.value;throw new Error("Cannot extract static value from non static arg")};t.isEnvValue=function(e){return"string"==typeof e&&e.startsWith("$ENV.")};t.toEnvValue=function(e){return"$ENV."+e};t.getEnvKeyFromValue=function(e){return"string"==typeof e?e.replace(/^\$ENV\./,""):e}},34702:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isStaticInputPinConfig=t.isStickyInputPinConfig=t.isQueueInputPinConfig=t.staticInputPinConfig=t.stickyInputPinConfig=t.queueInputPinConfig=t.INPUT_MODES=void 0,t.INPUT_MODES=["queue","sticky","static"];t.queueInputPinConfig=function(){return{mode:"queue"}};t.stickyInputPinConfig=function(){return{mode:"sticky"}};t.staticInputPinConfig=function(e){return{mode:"static",value:e}};t.isQueueInputPinConfig=function(e,t){return"queue"===e.mode};t.isStickyInputPinConfig=function(e){return e&&"sticky"===e.mode};t.isStaticInputPinConfig=function(e){return e&&"static"===e.mode}},75596:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},51922:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},55281:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isScheduledTrigger=t.isRestApiTrigger=t.isWebAppTrigger=void 0;t.isWebAppTrigger=function(e){return"web-app"===e.type};t.isRestApiTrigger=function(e){return"rest-api"===e.type};t.isScheduledTrigger=function(e){return"scheduled"===e.type}},23489:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.PartPreview=void 0;var r=n(24246),o=n(18265),u=n(53574);t.PartPreview=function(e){var t=e.part,n={part:t,instance:o.partInstance("bob",t.id,{}),connections:[],connectionsPerInput:{},connectionsPerOutput:{},viewPort:{pos:{x:0,y:0},zoom:1},partDefRepo:{},onDismantleGroup:o.noop,onDblClick:o.noop,onDragEnd:o.noop,onDragMove:o.noop,onDragStart:o.noop,onPinClick:o.noop,onPinDblClick:o.noop,onSelect:o.noop,onTogglePinBreakpoint:o.noop,onTogglePinLog:o.noop,onToggleSticky:o.noop,displayMode:!0,onInspectPin:o.noop,onDetachConstValue:o.noop,onCopyConstValue:o.noop,onPasteConstValue:o.noop,onRequestHistory:o.noop,parentInsId:"",onChangeVisibleInputs:o.noop,onChangeVisibleOutputs:o.noop,onConvertConstToEnv:o.noop,forceShowMinimized:"both"};return r.jsx("div",i({className:"part-preview"},{children:r.jsx(u.InstanceView,i({},n),void 0)}),void 0)}},90412:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},s=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FlowEditor=void 0;var l=n(24246),d=u(n(27378)),p=n(18265),f=n(12465),v=c(n(63300)),m=n(14648),h=n(52395),y=n(40232),g=n(51424),I=n(88331),b=n(24935),P=n(91312);a(n(91312),t);var _=["select","drag-move","order-step"];t.FlowEditor=d.memo(d.forwardRef((function(e,t){var n=e.state,r=e.resolvedRepoWithDeps,o=e.onChangeEditorState,u=e.onImportPart,a=d.useState([]),c=a[0],C=a[1],E=d.useState([]),O=E[0],j=E[1],w=n.flow,x=n.boardData,T=n.flow.part,S=P.usePorts().openFile,D=d.useCallback((function(e,t){console.log("onChangeFlow",t.type),"functional"===t.type&&(C(s([{flow:e}],c.slice(0,50))),j([])),o((function(t){return i(i({},t),{flow:e})}))}),[o,c]),N=d.useState({instances:[],connections:[]}),k=N[0],R=N[1],M=d.useState(!1),A=M[0],V=M[1],z=d.useCallback((function(){return V(!1)}),[]),G=d.useCallback((function(){return V(!0)}),[]),H=d.useCallback((function(e){o((function(t){return i(i({},t),{boardData:i(i({},t.boardData),e)})}))}),[o]);d.useEffect((function(){H({selected:[],viewPort:f.defaultViewPort,from:void 0,to:void 0,lastMousePos:{x:0,y:0}})}),[T.id]),m.useHotkeys("cmd+z",(function(e){j(s(s([],O),[n]));var t=c[0],r=c.slice(1);t&&(o((function(e){return i(i({},e),t)})),C(r)),e.preventDefault()}),[n,c,O]),m.useHotkeys("a",(function(e){e.preventDefault(),G()}));var q=d.useCallback((function(e,t){_.some((function(e){return t.message.includes(e)}))||j([]);var n=v.default(w,(function(t){t.part=e}));D(n,t)}),[w,D]),L=d.useCallback((function(e){S({absPath:e.importPath})}),[S]),F=d.useCallback((function(e){if(!p.isGroupedPart(T))throw new Error("Impossible state, handling command handler on non grouped part");var t=I.handleCommand(e,{flow:w,boardData:x,currentPartId:T.id});D(t.flow,g.functionalChange(e.type)),H(t.boardData)}),[T,x,w,D,H]),U=d.useCallback((function(e,t){void 0===t&&(t=-1*f.PART_HEIGHT*1.5);var n=h.createNewPartInstance(e,t,x.lastMousePos,function(e){var t;return i(i({},e.dependencies),((t={})[e.main.id]=e.main,t))}(r));if(n){var o=v.default(w,(function(e){var t=e.part;if(!p.isGroupedPart(t))throw new Error("Impossible state, adding part to non grouped part");t.instances.push(n)}));return D(o,g.functionalChange("add-part")),z(),n}}),[x.lastMousePos,w,D,z,r]),B=d.useCallback((function(e){switch(e.type){case b.OmniBarCmdType.ADD:return U(e.data);case b.OmniBarCmdType.ADD_VALUE:h.domToViewPort(x.lastMousePos,x.viewPort);y.toastMsg("TODO");break;case b.OmniBarCmdType.CREATE_CODE_PART:case b.OmniBarCmdType.CREATE_GROUPED_PART:y.toastMsg("TODO");break;case b.OmniBarCmdType.IMPORT:u(e.data);break;default:y.AppToaster.show({intent:"warning",message:"Not supported yet"})}z()}),[x.lastMousePos,x.viewPort,U,z,u]);return l.jsx("div",i({className:"project-editor"},{children:function(){if(p.isCodePart(T))throw new Error("Impossible state");return l.jsxs(d.Fragment,{children:[l.jsx(f.GroupedPartEditor,{insId:"root."+T.id,ref:t,boardData:x,onChangeBoardData:H,part:T,onGoToPartDef:L,onChangePart:q,resolvedFlow:r,clipboardData:k,onCopy:R,partIoEditable:!T.id.startsWith("Trigger"),onInspectPin:e.onInspectPin,onRequestHistory:e.onRequestHistory,onRequestImportables:e.onQueryImportables,onCommand:F,onShowOmnibar:G},T.id),A?l.jsx(b.Omnibar,{flow:w,repo:r.dependencies,onCommand:B,visible:A,onClose:z,onRequestImportables:e.onQueryImportables},void 0):null]},void 0)}()}),void 0)})))},57779:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BasePartEditor=void 0;var u=n(24246),a=o(n(27378)),s=n(18265),c=n(42272),l=o(n(77324)),d=n(79927),p=o(n(63300)),f=n(18185),v=n(23489),m=f.MultiSelect.ofType();t.BasePartEditor=function(e){var t,n,o=e.part,f=e.onChange,h=s.entries(o.inputs),y=h.filter((function(e){return"required"===e[1].mode})).map((function(e){return e[0]})),g=h.filter((function(e){return"optional"===e[1].mode})).map((function(e){return e[0]})),I=h.filter((function(e){return"required-if-connected"===e[1].mode})).map((function(e){return e[0]})),b=a.default.useState(!1),P=b[0],_=b[1],C=s.okeys(o.outputs),E=a.default.useCallback((function(e){f(i(i({},o),{id:e}))}),[o,f]),O=a.default.useCallback((function(e){var t=e?e.split(","):void 0;"[]"===e&&(t=[]),console.log(e,t),f(i(i({},o),{completionOutputs:t}))}),[o,f]),j=a.default.useCallback((function(e){var t=e?e.split(","):void 0;f(i(i({},o),{reactiveInputs:t}))}),[o,f]),w=a.default.useCallback((function(e,t){var n=p.default(o,(function(n){n.inputs[e]=s.partInput("any",t)}));f(n)}),[o,f]),x=a.default.useCallback((function(e){var t=p.default(o,(function(t){delete t.inputs[e]}));f(t)}),[o,f]),T=a.default.useCallback((function(e){var t=p.default(o,(function(t){t.outputs[e]=s.partOutput("any")}));f(t)}),[o,f]),S=a.default.useCallback((function(e){var t=p.default(o,(function(t){delete t.outputs[e]}));f(t)}),[o,f]),D=a.default.useCallback((function(e){try{var t=JSON.parse(e),n=p.default(o,(function(e){Object.entries(t).forEach((function(t){var n=t[0],r=t[1],o=e.inputs[n],u=e.outputs[n];o?e.inputs[n]=i(i({},o),{type:r}):u&&(e.outputs[n]=i(i({},u),{type:r}))}))}));f(n)}catch(r){console.error("cannot parse")}}),[f,o]),N=r(r([],s.entries(o.inputs)),s.entries(o.outputs)).map((function(e){return[e[0],e[1].type]})).reduce((function(e,t){var n,r=t[0],o=t[1];return i(i({},e),((n={})[r]=o,n))}),{});return u.jsxs("div",i({className:"base-part-editor"},{children:[u.jsx("div",i({className:"form-row"},{children:u.jsx(c.FormGroup,i({label:"Part Name",labelFor:"text-input",labelInfo:"(required)"},{children:u.jsx(c.InputGroup,{id:"part-name",disabled:e.idDisabled,placeholder:"Part ID",value:o.id,onChange:function(e){return E(e.target.value)}},void 0)}),void 0)}),void 0),u.jsx(c.FormGroup,i({label:"Required Inputs"},{children:u.jsx(m,{selectedItems:y,placeholder:"Enter input names here",items:[],tagRenderer:function(e){return e},onItemSelect:function(e){return w(e,"required")},onRemove:x,resetOnSelect:!0,itemRenderer:function(e){return u.jsx("span",{children:e},void 0)},createNewItemFromQuery:function(e){return e},createNewItemRenderer:d.renderCreateIOOption,fill:!0},void 0)}),void 0),!0!==e.hiddenOutputs?u.jsx(c.FormGroup,i({label:"Outputs"},{children:u.jsx(m,{selectedItems:C,placeholder:"Enter output names here",items:[],tagRenderer:function(e){return e},onItemSelect:T,onRemove:S,resetOnSelect:!0,itemRenderer:function(e){return u.jsx("span",{children:e},void 0)},createNewItemFromQuery:function(e){return e},createNewItemRenderer:d.renderCreateIOOption,fill:!0},void 0)}),void 0):null,u.jsx(c.Checkbox,i({checked:P,onChange:function(e){return _(e.target.checked)}},{children:"Show advanced options"}),void 0),u.jsxs(c.Collapse,i({isOpen:P},{children:[u.jsx(c.FormGroup,i({label:"Optional Inputs"},{children:u.jsx(m,{selectedItems:g,placeholder:"Enter input names here",items:[],tagRenderer:function(e){return e},onItemSelect:function(e){return w(e,"optional")},onRemove:x,resetOnSelect:!0,itemRenderer:function(e){return u.jsx("span",{children:e},void 0)},createNewItemFromQuery:function(e){return e},createNewItemRenderer:d.renderCreateIOOption,fill:!0},void 0)}),void 0),u.jsx(c.FormGroup,i({label:"Required-if-connected Inputs"},{children:u.jsx(m,{selectedItems:I,placeholder:"Enter input names here",items:[],tagRenderer:function(e){return e},onItemSelect:function(e){return w(e,"required-if-connected")},onRemove:x,resetOnSelect:!0,itemRenderer:function(e){return u.jsx("span",{children:e},void 0)},createNewItemFromQuery:function(e){return e},createNewItemRenderer:d.renderCreateIOOption,fill:!0},void 0)}),void 0),u.jsx(c.FormGroup,i({label:"Types"},{children:u.jsx(l.default,{height:"100px",theme:"vs-dark",defaultLanguage:"json",value:JSON.stringify(N,null,4),onChange:function(e){return D(e||"")}},void 0)}),void 0),u.jsx(c.FormGroup,i({label:"Completion Outputs"},{children:u.jsx(c.InputGroup,{id:"completion-outputs",placeholder:"completion outputs",value:(null===(t=o.completionOutputs)||void 0===t?void 0:t.join(","))||"",onChange:function(e){return O(e.target.value)}},void 0)}),void 0),u.jsx(c.FormGroup,i({label:"Reactive Inputs"},{children:u.jsx(c.InputGroup,{id:"reactive-inputs",placeholder:"Reactive inputs",value:(null===(n=o.reactiveInputs)||void 0===n?void 0:n.join(","))||"",onChange:function(e){return j(e.target.value)}},void 0)}),void 0)]}),void 0),u.jsx(c.FormGroup,i({label:"Preview"},{children:u.jsx("div",i({className:"preview-wrapper"},{children:u.jsx(v.PartPreview,{part:o},void 0)}),void 0)}),void 0)]}),void 0)}},79927:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CodePartEditor=t.renderCreateIOOption=void 0;var o=n(24246),u=n(42272),a=r(n(27378)),s=r(n(77324)),c=n(57779);t.renderCreateIOOption=function(e,t,n){return o.jsx(u.MenuItem,{icon:"add",text:'Create "'+e+'"',active:t,onClick:n,shouldDismissPopover:!1},void 0)};t.CodePartEditor=function(e){var t=e.part,n=e.onChange,r=a.default.useCallback((function(e){n(i(i({},t),{fnCode:e}))}),[t,n]),l=a.default.useCallback((function(e){n(i(i({},t),{customViewCode:e}))}),[t,n]),d=a.default.useCallback((function(e){n(i(i(i({},t),e),{completionOutputs:e.completionOutputs}))}),[t,n]);return o.jsxs("div",i({className:"code-part-editor"},{children:[o.jsx(c.BasePartEditor,{part:t,onChange:d,idDisabled:e.editMode},void 0),o.jsx(u.FormGroup,i({label:"Code"},{children:o.jsx(s.default,{height:"200px",theme:"vs-dark",defaultLanguage:"javascript",value:t.fnCode,onChange:function(e){return r(e||"")}},void 0)}),void 0),o.jsxs(u.FormGroup,i({label:"Custom View"},{children:[o.jsx(s.default,{height:"100px",theme:"vs-dark",defaultLanguage:"ejs",value:t.customViewCode,onChange:function(e){return l(e||"")}},void 0),o.jsxs(u.Callout,{children:["Example:",o.jsx(u.Code,{children:'<% if (inputs.key) { %>\n              Pick "<%- inputs.key %>"\n              <% }  else { %>\n                Pick\n              <% } %>\n              '},void 0)]},void 0)]}),void 0)]}),void 0)}},88331:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleCommand=t.createEditorCommand=t.handlersMap=void 0;var i=n(63300),r=n(33885);t.handlersMap={"detach-const":r.handleDetachConstEditorCommand,"duplicate-selected":r.handleDuplicateSelectedEditorCommand,"close-connection":r.handleConnectionCloseEditorCommand,"paste-instances":r.handlePasteInstancesEditorCommand};t.createEditorCommand=function(e,t){return{type:e,payload:t}};t.handleCommand=function(e,n){var r=t.handlersMap[e.type];if(!r)throw new Error("no handler for command "+e.type);return i.produce(n,(function(t){return r(e.payload,t)}))}},33885:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.handlePasteInstancesEditorCommand=t.handleDuplicateSelectedEditorCommand=t.handleConnectionCloseEditorCommand=t.handleDetachConstEditorCommand=void 0;var r=n(18265),o=n(96149),u=n(52178);t.handleDetachConstEditorCommand=function(e,t){var n=e.insId,i=e.inputId,o=t.flow.part,a=o.instances.find((function(e){return e.id===n}));if(!a)throw new Error("Impossible state ins id with no matching instance");var s=a.inputConfig[i];if(!s)throw new Error("impossible state detaching const from unexistent config");if(!r.isStaticInputPinConfig(s))throw new Error("impossible state detaching const with no value");var c=s.value,l=u.createInlineCodePart({code:""+c,type:r.CodePartTemplateTypeInline.VALUE}),d=r.inlinePartInstance("value-"+r.randomInt(999),l,{},{x:a.pos.x,y:a.pos.y-100});if(!o.instances.find((function(e){return e.id===a.id})))throw new Error("impossible state instance not found");a.inputConfig[i]=r.queueInputPinConfig(),o.instances.push(d),o.connections.push(r.connectionData(d.id+".r",a.id+"."+i))};t.handleConnectionCloseEditorCommand=function(e,n){var i=e.from,o=e.to,u=n.flow.part,a=u.instances,s=u.connections.find((function(e){var t=r.connectionNodeEquals(i,e.from),n=r.connectionNodeEquals(o,e.to);return t&&n}));if(s)u.connections=u.connections.filter((function(e){return e!==s}));else{u.connections.push({from:i,to:o});var c=r.isInternalConnectionNode(o)?a.find((function(e){return e.id===o.insId})):null,l=(c?c.inputConfig:{})[o.pinId];r.isStaticInputPinConfig(l)&&t.handleDetachConstEditorCommand({insId:o.insId,inputId:o.pinId},n)}n.boardData.from=void 0,n.boardData.to=void 0};t.handleDuplicateSelectedEditorCommand=function(e,t){var n=e.selected,o=t.flow.part.instances;if(n.length){var u=[];n.forEach((function(e){var t=o.find((function(t){return t.id===e}));if(!t)throw new Error("impossible state duplicate selected no matching instance");if(t){var n=t.pos,a=i(i({},t),{pos:{x:n.x+20,y:n.y+20},id:t.id+"-d"+r.randomInt(999)});o.push(a),u.push(a.id)}})),t.boardData.selected=u}};t.handlePasteInstancesEditorCommand=function(e,t){var n,r,u=o.vec(10,10),a=e.instances,s=t.flow.part,c=a.map((function(e){return i(i({},e),{pos:o.vAdd(e.pos,u),id:e.id+"-copy"})}));t.boardData.selected=c.map((function(e){return e.id})),(n=s.instances).push.apply(n,c);var l=s.connections.filter((function(e){var t=a.find((function(t){return t.id===e.from.insId})),n=a.find((function(t){return t.id===e.to.insId}));return t&&n})).map((function(e){var t=e.from,n=e.to;return{from:i(i({},t),{insId:t.insId+"-copy"}),to:i(i({},n),{insId:n.insId+"-copy"})}}));(r=s.connections).push.apply(r,l)}},51424:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.metaChange=t.functionalChange=void 0;t.functionalChange=function(e){return{type:"functional",message:e}};t.metaChange=function(e){return void 0===e&&(e="n/a"),{type:"meta",message:e}}},63213:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InlineCodeModal=void 0;var s=n(24246),c=u(n(27378)),l=a(n(77324)),d=n(42272),p=a(n(60042)),f=n(52178),v=n(18265),m=n(28983),h="`Result is ${inputs.a + inputs.b}`";t.InlineCodeModal=c.memo((function(e){var t,n=e.initialValue,r=e.initialType,o=c.useState(v.isDefined(n)?n:h),u=o[0],a=o[1],y=c.useState(r||v.CodePartTemplateTypeInline.VALUE),g=y[0],I=y[1],b=s.jsxs("div",{children:[s.jsxs("p",{children:['You can add variables to by referrencing the "inputs" object.',s.jsx("br",{},void 0)," For example:",s.jsx(d.Code,{children:"`Hello {inputs.name}`"},void 0),' will expose an input pin named "name"']},void 0),s.jsxs("p",{children:["You can also use ternery expressions, arithmetic operators and more!",s.jsx("br",{},void 0),"For example:",s.jsx(d.Code,{children:"inputs.a > inputs.b ? inputs.a + 42 : Math.random() * inputs.b"},void 0)]},void 0)]},void 0),P=s.jsxs("span",{children:["Type in any valid JS value, such as ",s.jsx(d.Code,{children:"true"},void 0),", ",s.jsx(d.Code,{children:"42"},void 0),","," ",s.jsx(d.Code,{children:'["bob", "alice", "dave"]'},void 0),".",s.jsx("br",{},void 0)," Dynamic inputs may also be used"]},void 0),_=s.jsxs("span",{children:["Write any JS code and return a value.",s.jsx("br",{},void 0)," The returned value will be the output.",s.jsx("br",{},void 0)," Example:",s.jsx(d.Code,{children:"const a = inputs.a; const b = inputs.b; return Math.floor(a/b);"},void 0)]},void 0),C=f.getVariables(u);return c.useEffect((function(){u===h&&g===v.CodePartTemplateTypeInline.FUNCTION&&a("return "+h),u==="return "+h&&g===v.CodePartTemplateTypeInline.VALUE&&a(h)}),[u,g]),s.jsxs(d.Dialog,i({isOpen:!0,title:"Inline Value / Code",onClose:e.onCancel,canEscapeKeyClose:!1,className:"inline-code-modal"},{children:[s.jsxs("main",i({className:p.default(d.Classes.DIALOG_BODY),onKeyDown:function(t){"Enter"===t.key&&t.metaKey&&e.onSubmit(g,u)},tabIndex:0},{children:[s.jsxs(d.RadioGroup,i({inline:!0,onChange:function(e){return I(e.target.value)},selectedValue:g},{children:[s.jsx(d.Radio,{labelElement:s.jsxs(c.Fragment,{children:["Value"," ",s.jsx(m.Tooltip2,i({content:P,placement:"top"},{children:s.jsx(d.Icon,{icon:"info-sign",intent:"primary"},void 0)}),void 0)]},void 0),value:v.CodePartTemplateTypeInline.VALUE},void 0),s.jsx(d.Radio,{labelElement:s.jsxs(c.Fragment,{children:["Function"," ",s.jsx(m.Tooltip2,i({content:_,placement:"top"},{children:s.jsx(d.Icon,{icon:"info-sign",intent:"primary"},void 0)}),void 0)]},void 0),value:v.CodePartTemplateTypeInline.FUNCTION},void 0)]}),void 0),s.jsx(l.default,{height:"80px",theme:"vs-dark",defaultLanguage:"javascript",value:u,onChange:function(e){return a(e||"")},onMount:function(e){e&&e.updateOptions({lineNumbers:"off",minimap:{enabled:!1}})}},void 0),(t=u.includes("return"),t&&g===v.CodePartTemplateTypeInline.VALUE?s.jsx(d.Callout,i({intent:d.Intent.WARNING},{children:'When using the "value" type you are not expected to return anything'}),void 0):t||g!==v.CodePartTemplateTypeInline.FUNCTION?null:s.jsxs(d.Callout,i({intent:d.Intent.DANGER},{children:['When using the "function" type you are expected to ',s.jsx(d.Code,{children:"return"},void 0)," a value.",s.jsx("br",{},void 0),"Example: ",s.jsx(d.Code,{children:"return 42 + Date.now();"},void 0)]}),void 0)),s.jsxs(d.Callout,i({intent:d.Intent.NONE},{children:["Input pins detected: ",C.length?C.map((function(e){return s.jsx(d.Code,{children:e},e)})):"None",s.jsx(m.Tooltip2,i({content:b},{children:s.jsx(d.Icon,{icon:"info-sign",intent:d.Intent.PRIMARY},void 0)}),void 0)]}),void 0)]}),void 0),s.jsx("div",i({className:d.Classes.DIALOG_FOOTER},{children:s.jsxs("div",i({className:d.Classes.DIALOG_FOOTER_ACTIONS},{children:[s.jsx(d.Button,i({onClick:e.onCancel},{children:"Cancel"}),void 0),s.jsx(d.Button,i({onClick:function(){return e.onSubmit(g,u)},intent:d.Intent.PRIMARY,className:"save-btn"},{children:"Save"}),void 0)]}),void 0)}),void 0)]}),void 0)}))},52178:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.createInlineCodePart=t.getVariables=void 0;var r=n(18265),o=n(18265);t.getVariables=function(e){return(e.match(/inputs\.([a-zA-Z]\w*)/g)||[]).map((function(e){return e.replace(/inputs\./,"")}))};t.createInlineCodePart=function(e){var n=e.code,u=e.customView,a=e.partId,s=e.type,c=t.getVariables(n).reduce((function(e,t){var n;return i(i({},e),((n={})[t]=r.partInput("any","required"),n))}),{}),l={r:r.partOutput("any")},d=s===r.CodePartTemplateTypeInline.FUNCTION?"const result = (function() { "+n+"}());\n  outputs.r.next(result)":"outputs.r.next(("+n+"))",p=btoa(n);return o.codePart({id:a||"Inline Code "+r.randomInt(99999),inputs:c,outputs:l,fnCode:d,customViewCode:u||n,dataBuilderSource:p,templateType:s,completionOutputs:["r"]})}},24935:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},u=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.Omnibar=t.OmniBarCmdType=void 0;var a,s=n(24246),c=o(n(27378)),l=n(18185),d=n(18265),p=n(18265),f=n(42272);!function(e){e.ADD="add",e.ADD_VALUE="add-value",e.CREATE_CODE_PART="create-core-part",e.CREATE_GROUPED_PART="create-grouped-part",e.IMPORT="import"}(a=t.OmniBarCmdType||(t.OmniBarCmdType={}));var v=[{cmd:{type:a.CREATE_GROUPED_PART},title:"Create new grouped part",suggestOnEmpty:!0},{cmd:{type:a.CREATE_CODE_PART},title:"Create new code part",suggestOnEmpty:!0}];t.Omnibar=function(e){var t=e.repo,n=c.useState(""),i=n[0],r=n[1],o=c.useState([]),m=o[0],h=o[1],y=c.useState([]),g=y[0],I=y[1];c.useEffect((function(){var e=d.keys(t).map((function(e){var n=t[e];return{title:"Add - "+n.id,cmd:{type:a.ADD,data:e},extra:p.okeys(n.inputs)+" | "+p.okeys(n.outputs)}})),n=g.map((function(e){return{title:"Add - "+e.part.id,cmd:{type:a.IMPORT,data:e},extra:"(import from "+e.module+")"}})),i={title:"Add inline value or code",suggestOnEmpty:!0,cmd:{type:a.ADD_VALUE}},r=u(u(u(u([],v),n),[i]),e);h(r)}),[t,g]),c.useEffect((function(){e.onRequestImportables&&e.onRequestImportables(i).then((function(e){I(e)}))}),[e,i]);var b=c.useCallback((function(e,t){var n=t.handleClick,i=t.modifiers,r=(t.query,t.index);if(!i.matchesPredicate)return null;var o=""+e.title;return s.jsx(f.MenuItem,{active:i.active,disabled:i.disabled,label:e.extra,onClick:n,text:o},r)}),[]),P=c.useCallback((function(e,t){if(!e)return!!t.suggestOnEmpty;var n=e.toLowerCase().split("").map((function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")+".*"})).join(""),i=new RegExp(n);return!!t.title.toLowerCase().match(i)}),[]),_=c.useCallback((function(t){e.onCommand(t.cmd),e.onClose()}),[e]);return s.jsx(l.Omnibar,{query:i,onQueryChange:r,onClose:e.onClose,noResults:s.jsx(f.MenuItem,{disabled:!0,text:"No results."},void 0),itemPredicate:P,isOpen:e.visible,items:m,initialContent:void 0,onItemSelect:_,itemRenderer:b,inputProps:{placeholder:"Search for parts or commands.."}},void 0)}},91312:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(2297),t)},2297:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function u(e){try{s(i.next(e))}catch(t){o(t)}}function a(e){try{s(i.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,a)}s((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,r,o,u={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,i=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(r=u.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){u.label=o[1];break}if(6===o[0]&&u.label<r[1]){u.label=r[1],r=o;break}if(r&&u.label<r[2]){u.label=r[2],u.ops.push(o);break}r[2]&&u.ops.pop(),u.trys.pop();continue}o=t.call(e,u)}catch(a){o=[6,a],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.usePorts=t.usePrompt=t.PortsContext=t.defaultPorts=void 0;var o=n(40232),u=n(27378),a=function(){return i(void 0,void 0,void 0,(function(){return r(this,(function(e){throw new Error("Not implemented")}))}))};t.defaultPorts={prompt:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=e.text,n=e.defaultValue;return i(void 0,void 0,void 0,(function(){return r(this,(function(e){return[2,prompt(""+t,n)]}))}))})),openFile:function(e){return i(void 0,void 0,void 0,(function(){return r(this,(function(t){return o.toastMsg("Open "+e),[2]}))}))},readFlow:a,saveFlow:a,resolveDeps:a,getImportables:a,onFlowChange:a},t.PortsContext=u.createContext(t.defaultPorts);t.usePrompt=function(){var e=u.useContext(t.PortsContext).prompt;return function(t,n){return e({text:t,defaultValue:n})}};t.usePorts=function(){return u.useContext(t.PortsContext)}},27234:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.groupSelected=void 0;var u=n(18265),a=o(n(63300)),s=n(78504),c=n(52395);t.groupSelected=function(e,t,n,o){var l=t.instances,d=t.connections,p=l.filter((function(t){return e.includes(t.id)})),f=d.filter((function(t){var n=t.from,i=t.to;return-1!==e.indexOf(n.insId)||-1!==e.indexOf(i.insId)}));if(!p.length)throw new Error("grouped without selections");var v=s.createGroup(p,f,n),m=v.groupedPart,h=v.renamedInputs,y=v.renamedOutputs,g=p.reduce((function(e,t){return c.middlePos(t.pos,e)}),l[0].pos),I="ref"===o?u.partInstance(m.id+"-ins",m.id,{},g):u.inlinePartInstance(m.id+"-ins",m,{},g),b=l.filter((function(t){return-1===e.indexOf(t.id)})),P=d.map((function(e){var t=e.from.insId+"."+e.from.pinId,n=e.to.insId+"."+e.to.pinId;return h[n]?i(i({},e),{to:{insId:I.id,pinId:h[n]}}):y[t]?i(i({},e),{from:{insId:I.id,pinId:y[t]}}):e})).filter((function(t){return-1===e.indexOf(t.from.insId)&&-1===e.indexOf(t.to.insId)}));return{newPart:m,currentPart:a.default(t,(function(e){e.instances=r(r([],b),[I]),e.connections=P}))}}},12465:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function u(e){try{s(i.next(e))}catch(t){o(t)}}function a(e){try{s(i.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,a)}s((i=i.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,i,r,o,u={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,i=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(r=u.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){u.label=o[1];break}if(6===o[0]&&u.label<r[1]){u.label=r[1],r=o;break}if(r&&u.label<r[2]){u.label=r[2],u.ops.push(o);break}r[2]&&u.ops.pop(),u.trys.pop();continue}o=t.call(e,u)}catch(a){o=[6,a],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},c=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GroupedPartEditor=t.defaultViewPort=t.PART_HEIGHT=void 0;var d=n(24246),p=u(n(27378)),f=n(18265),v=n(53574),m=n(64153),h=n(12901),y=n(87944),g=n(52395),I=n(63300),b=n(27378),P=n(14648),_=l(n(54037)),C=n(42272),E=n(20712),O=n(99743),j=n(35683),w=n(18265),x=n(56111),T=n(65883),S=n(14264),D=n(40232),N=n(51424),k=n(88331),R=n(63213),M=n(52178),A=l(n(98784)),V=n(27234),z=n(91312),G=p.memo(C.Slider),H=function(e){return d.jsx("div",{},void 0)};t.PART_HEIGHT=28;t.defaultViewPort={pos:{x:0,y:0},zoom:1},t.GroupedPartEditor=p.memo(p.forwardRef((function(e,n){var r,o=e.onChangePart,u=e.onCommand,l=e.partIoEditable,q=e.onCopy,L=e.onGoToPartDef,F=e.onRequestHistory,U=e.onInspectPin,B=e.boardData,W=e.onChangeBoardData,J=e.insId,Y=e.part,X=e.onShowOmnibar,Z=e.resolvedFlow,K=b.useState(i(i({},Z.dependencies),((r={})[Z.main.id]=Z.main,r))),Q=K[0],$=K[1];b.useEffect((function(){var e;$(i(i({},Z.dependencies),((e={})[Z.main.id]=Z.main,e)))}),[Z]);var ee=B.selected,te=B.from,ne=B.to,ie=Y.instances,re=Y.connections,oe=Y.inputsPosition,ue=Y.outputsPosition,ae=Y.inputs,se=Y.outputs,ce=b.useState(),le=ce[0],de=ce[1],pe=b.useState(),fe=pe[0],ve=pe[1],me=b.useState(0),he=me[0],ye=me[1],ge=b.useState(),Ie=ge[0],be=ge[1],Pe=b.useState(!1),_e=Pe[0],Ce=Pe[1],Ee=b.useState(),Oe=Ee[0],je=Ee[1],we=b.useState(),xe=we[0],Te=we[1],Se=b.useState(),De=Se[0],Ne=Se[1],ke=b.useState(),Re=ke[0],Me=ke[1],Ae=z.usePrompt(),Ve=B.viewPort,ze=p.useCallback((function(e){W({viewPort:e})}),[W]),Ge=p.useCallback((function(e,t,n){return F(J+"."+e,t,n)}),[F,J]),He=p.useCallback((function(e,t,n){return U(J+"."+e,t,n)}),[U,J]),qe=p.useCallback((function(e,t){u(k.createEditorCommand("close-connection",{from:e,to:t}))}),[u]),Le=p.useCallback((function(){return a(void 0,void 0,void 0,(function(){var e,t;return s(this,(function(n){switch(n.label){case 0:return[4,Ae("Part name?")];case 1:return e=n.sent(),t=V.groupSelected(B.selected,Y,e,"inline").currentPart,o(t,N.functionalChange("group part")),D.toastMsg("Part grouped!"),[2]}}))}))}),[Ae,B.selected,o,Y]);b.useEffect((function(){if(Ie){var e=setTimeout((function(){be(void 0)}),350);return function(){return clearTimeout(e)}}}),[Ie]);var Fe=b.useState(),Ue=Fe[0],Be=Fe[1];b.useEffect((function(){S.preloadMonaco()}),[]);var We=b.useRef(),Je=_.default(We),Ye=p.useRef({x:400,y:400}),Xe=y.useBoundingclientrect(We)||O.vZero,Ze=function(){var e=g.fitViewPortToPart(Y,Q,Je);g.animatePos(Ve.pos,e.pos,10,(function(t){ze({pos:t,zoom:e.zoom})}))},Ke=p.useCallback((function(e,t){var n=B.to,i=B.from,r="input"===t?i:n,o="input"===t?n:i,u={pinId:e,insId:f.THIS_INS_ID},a="input"===t?{from:u}:{to:u};r&&r.pinId===e?W({from:void 0,to:void 0}):o?"input"===t&&n?qe(u,n):i&&qe(i,u):W(a)}),[B,W,qe]),Qe=p.useCallback((function(e,t,n){var i=B.from,r=B.to;if("input"===n){var o={insId:e.id,pinId:t};!r||r.pinId!==t||f.isInternalConnectionNode(r)&&r.insId!==e.id?te?qe(te,o):W({to:o}):W({to:void 0})}else{var u={insId:e.id,pinId:t};!i||i.pinId!==t||f.isInternalConnectionNode(i)&&i.insId!==e.id?ne?qe(u,ne):W({from:u}):W({from:void 0})}}),[B,te,W,qe,ne]);b.useEffect((function(){if(!_e&&Je.width){var t=g.fitViewPortToPart(Y,Q,Je);e.thumbnailMode||ze(t);var n=setTimeout((function(){var t=g.fitViewPortToPart(Y,Q,Je);e.thumbnailMode||ze(t),Ce(!0)}),100);return function(){return clearTimeout(n)}}}),[Y,Je,e.thumbnailMode,_e,Q,ze]);var $e=p.useCallback((function(){var e=B.selected,t=Y.instances.filter((function(t){return e.includes(t.id)})).map((function(e){return i(i({},e),{id:e.id+"-copy"})})),n=Y.connections.filter((function(t){var n=t.from,i=t.to;return e.includes(n.insId)&&e.includes(i.insId)})).map((function(e){var t=e.from,n=e.to;return{from:i(i({},t),{insId:t.insId+"-copy"}),to:i(i({},n),{insId:n.insId+"-copy"})}}));q({instances:t,connections:n})}),[B,q,Y]),et=p.useCallback((function(){u(k.createEditorCommand("paste-instances",{instances:e.clipboardData.instances}))}),[u,e.clipboardData.instances]),tt=p.useCallback((function(){var e=Y.id;Ue?"input"===Ue.type?Ue.ins.id===e?Ke(Ue.pin,"input"):Qe(Ue.ins,Ue.pin,"input"):Ue.ins.id===e?Ke(Ue.pin,"output"):Qe(Ue.ins,Ue.pin,"output"):console.warn("tried selecting closest with no pin nearby")}),[Y.id,Ue,Ke,Qe]),nt=p.useCallback((function(e,t){var n="mouse"===t?Ye.current:{x:Ve.pos.x+Je.width/2,y:Ve.pos.y+Je.height/2},r=g.centerBoardPosOnTarget(n,Je,e,Ve);ze(i(i({},Ve),{zoom:e,pos:r}))}),[ze,Ve,Je]);P.useHotkeys("cmd+=",(function(e){nt(Ve.zoom+.1,"hotkey"),e.preventDefault()}),[Ve,nt]),P.useHotkeys("cmd+-",(function(e){nt(Ve.zoom-.1,"hotkey"),e.preventDefault()}),[nt,Ve.zoom]),P.useHotkeys("cmd+o",(function(e){e.preventDefault(),D.toastMsg("Ordering");var t=[];x.orderGroupedPart(Y,Q,200,(function(e,n){n%3==0&&t.push(e)})),a(void 0,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return t.length?(e=t.shift(),D.toastMsg("Step "+t.length+"!"),[4,f.delay(200)]):[3,2];case 1:return n.sent(),o(e,N.metaChange("order-step")),D.toastMsg("Step "+t.length+"! done"),[3,0];case 2:return[2]}}))}))}),[o,Y,Z]),P.useHotkeys("cmd+0",(function(e){nt(1),e.preventDefault()}),[Ve,nt]);var it=function(){W({from:void 0,to:void 0,selected:[]})},rt=p.useCallback((function(e,t){t.preventDefault(),t.stopPropagation(),de(e.id),o(i({},Y),N.metaChange("drag-start"))}),[o,Y]),ot=p.useCallback((function(e,t,n){var i=g.handleInstanceDrag(Y,e,n,t,ee,le),r=i.newValue,u=i.newSelected;o(r,N.metaChange("drag-move")),u&&W({selected:u})}),[le,o,W,ee,Y]),ut=p.useCallback((function(e,t){t.preventDefault(),t.stopPropagation(),de(void 0)}),[]),at=p.useCallback((function(e,t){t.preventDefault(),t.stopPropagation(),de(f.THIS_INS_ID)}),[]),st=p.useCallback((function(t,n,i,r){return a(void 0,void 0,void 0,(function(){var o,u,a;return s(this,(function(s){return i.preventDefault(),i.stopPropagation(),o=r.x,u=r.y,a=I.produce(Y,(function(e){"input"===t?e.inputsPosition[n]={x:o,y:u}:e.outputsPosition[n]={x:o,y:u}})),e.onChangePart(a,N.metaChange("part-io-drag-move")),[2]}))}))}),[e,Y]),ct=p.useCallback((function(e,t,n,i){return a(void 0,void 0,void 0,(function(){return s(this,(function(e){return n.preventDefault(),n.stopPropagation(),de(void 0),[2]}))}))}),[]),lt=p.useCallback((function(e,t){var n=e.id,i=t.shiftKey?ee.filter((function(e){return e!==n})):[],r=t.shiftKey?c(c([],ee),[n]):[n],o=ee.includes(n)?i:r;W({selected:o,from:void 0,to:void 0})}),[W,ee]),dt=p.useCallback((function(){var e=Y.instances.map((function(e){return e.id}));W({selected:e,from:void 0,to:void 0})}),[W,Y.instances]),pt=p.useCallback((function(){var e=B.selected,t=Y.instances,n=Y.connections;if(e.length){var i=n.filter((function(t){var n=t.from,i=t.to;return-1===e.indexOf(n.insId)&&-1===e.indexOf(i.insId)})),r=I.produce(Y,(function(n){n.connections=i,n.instances=t.filter((function(t){return!e.includes(t.id)}))}));o(r,N.functionalChange("delete-ins")),W({selected:[]})}}),[B,o,W,Y]),ft=p.useCallback((function(e,t,n){o(g.toggleStickyPin(Y,e.id,t,n),N.functionalChange("toggle-sticky"))}),[o,Y]),vt=p.useCallback((function(){u({type:"duplicate-selected",payload:{selected:ee}})}),[u,ee]),mt=b.useRef(),ht=b.useRef(),yt=p.useCallback((function(e){var t=e.target;if(0===e.button)if(e.shiftKey)ht.current={x:e.pageX,y:e.pageY},mt.current=Ve.pos;else if(t&&"board-editor-inner"===t.className){if(Date.now()-he<300)return void X(e);ye(Date.now());var n={x:e.clientX,y:e.clientY};ve({from:n,to:n})}}),[Ve.pos,he,X]),gt=p.useCallback((function(e){if(fe){if(g.calcSelectionBoxArea(fe)>50){var t=g.getInstancesInRect(fe,Q,Ve,At.current,Y.instances,Xe),n=e.shiftKey?c(c([],ee),t):t;W({selected:n})}ve(void 0)}ht.current=void 0,mt.current=void 0}),[fe,Q,Ve,Y.instances,Xe,ee,W]),It=p.useCallback((function(e){var t={x:e.clientX-Xe.x,y:e.clientY-Xe.y},n={x:e.clientX,y:e.clientY},r=O.vSub(n,Xe),o=g.domToViewPort(r,Ve);if(fe&&ve(i(i({},fe),{to:n})),ht.current&&mt.current){console.log("changing VP");var u=g.calcMoveViewPort(e,ht.current,mt.current,Ve);ze(u)}var a=g.findClosestPin(Y,Q,t,Je,Xe,J),s=Ue;a&&((!s||s.ins!==a.ins||s.ins===a.ins&&s.pin!==a.pin)&&Be({ins:a.ins,type:a.type,pin:a.id}));Ye.current=o,W({lastMousePos:Ye.current})}),[Xe,Ve,fe,Y,Q,Je,J,Ue,W,ze]),bt=p.useCallback((function(){Be(void 0),ht.current=void 0,mt.current=void 0}),[]),Pt=p.useCallback((function(e,t){if(t){var n=f.isInlinePartInstance(e)?e.part:f.getPartDef(e.partId,Q);if(!n)throw new Error("Impossible state inspecting inexisting part");if(!f.isGroupedPart(n))return void D.toastMsg("Cannot inspect a non visual part","warning");Me({insId:J+"."+e.id,part:n})}else if(f.isRefPartInstance(e)){var i=f.getPartDef(e,Q);L(i)}else{var r=e.part;if(!f.isCodePart(r))return void D.toastMsg("Editing non code inline part is not supported");var o=atob(r.dataBuilderSource);Ne({insId:e.id,templateType:r.templateType,value:o,type:"existing"}),D.toastMsg("Editing inline grouped part not supported yet")}}),[L,Q,J]),_t=p.useCallback((function(e){var t=g.dismantleGroup(Y,e,Q);o(t,{type:"functional",message:"dismantle group"}),W({selected:[]})}),[Y,Q,o,W]),Ct=p.useCallback((function(e,t){u(k.createEditorCommand("detach-const",{insId:e.id,inputId:t}))}),[u]),Et=p.useCallback((function(e,t){var n=e.inputConfig[t]||w.queueInputPinConfig();f.isStaticInputPinConfig(n)&&(Te(n.value),D.AppToaster.show({message:"Value copied"}))}),[]),Ot=p.useCallback((function(e,t){var n=I.produce(Y,(function(n){var i=n.instances.find((function(t){return t.id===e.id}));if(!i)throw new Error("Impossible state");i.inputConfig[t]=f.staticInputPinConfig(xe),n.connections=n.connections.filter((function(n){return!f.isInternalConnectionNode(n.to)||!(n.to.insId===e.id&&n.to.pinId===t)}))}));o(n,N.functionalChange("paste const value"))}),[Y,o,xe]),jt=p.useCallback((function(e){return a(void 0,void 0,void 0,(function(){var t,n,i;return s(this,(function(r){switch(r.label){case 0:return[4,Ae("New name?")];case 1:return t=r.sent()||"na",[4,Ae("type?")];case 2:return n=r.sent()||"any",i=I.produce(Y,(function(i){"input"===e?(Y.inputs||(i.inputs={}),i.inputs[t]=f.partInput(n),i.inputsPosition[t]=Ye.current):(Y.outputs||(i.outputs={}),i.outputs[t]=f.partOutput(n,!1,!1),i.outputsPosition[t]=Ye.current)})),o(i,N.functionalChange("add new io pin")),[2]}}))}))}),[Ae,Y,o]),wt=p.useCallback((function(){return a(void 0,void 0,void 0,(function(){var e,t,n,i;return s(this,(function(r){switch(r.label){case 0:return e=null===(i=Y.completionOutputs)||void 0===i?void 0:i.join(","),[4,Ae("Edit completion outputs",e)];case 1:return t=r.sent(),h.isDefined(t)&&null!==t&&(n=I.produce(Y,(function(e){e.completionOutputs=""===t?void 0:t.split(",")})),o(n,N.functionalChange("change part completions"))),[2]}}))}))}),[Ae,o,Y]),xt=p.useCallback((function(){return a(void 0,void 0,void 0,(function(){var e,t,n,i;return s(this,(function(r){switch(r.label){case 0:return e=null===(i=Y.reactiveInputs)||void 0===i?void 0:i.join(","),[4,Ae("Edit reactive inputs",e)];case 1:return t=r.sent(),h.isDefined(t)&&null!==t&&(n=I.produce(Y,(function(e){e.reactiveInputs=""===t?void 0:t.split(",")})),o(n,N.functionalChange("change reactive inputs"))),[2]}}))}))}),[Ae,o,Y]),Tt=p.useCallback((function(e,t){var n=I.produce(Y,(function(n){"input"===e?(delete n.inputs[t],n.connections=n.connections.filter((function(e){return!(f.isExternalConnectionNode(e.from)&&e.from.pinId===t)}))):(n.connections=n.connections.filter((function(e){return!(f.isExternalConnectionNode(e.to)&&e.to.pinId===t)})),delete n.outputs[t])}));o(n,N.functionalChange("remove io pin"))}),[Y,o]),St=p.useCallback((function(e,t){var n=g.handleIoPinRename(Y,e,t);o(n,N.functionalChange("rename io pin"))}),[Y,o]),Dt=p.useCallback((function(e,t){var n=g.handleChangePartInputType(Y,e,t);o(n,N.functionalChange("toggle io pin optional"))}),[Y,o]),Nt=p.useCallback((function(e,t,n,r){return a(void 0,void 0,void 0,(function(){var o,u,a,l,d,p;return s(this,(function(s){if("input"===n)o=e.inputConfig[t],u=f.isStaticInputPinConfig(o)?""+o.value:void 0,Ne({type:"static-input",insId:e.id,pinId:t,value:u});else{if(a=f.getPartDef(e,Q),!(l=a.outputs[t]))throw new Error("Dbl clicked on un-existing pin");d=h.values(i(i({},Z.dependencies),(p={},p[Z.main.id]=Z.main,p))).reduce((function(e,t){var n=h.entries(t.inputs).map((function(e){return{pinId:e[0],pinType:e[1].type,part:t,type:"part"}}));return c(c([],e),n)}),[{type:"value"}]),je({pos:{x:r.clientX,y:r.clientY},matches:d,ins:e,pinId:t,pinType:l.type})}return[2]}))}))}),[Q,Z.dependencies,Z.main]),kt=p.useCallback((function(e,t){return a(void 0,void 0,void 0,(function(){var n,i;return s(this,(function(r){if(!(n=Y.inputs[e]))throw new Error("Dbl clicked on un-existing pin");return i=h.values(Q).reduce((function(e,t){var n=h.entries(t.inputs).map((function(e){return{pinId:e[0],pinType:e[1].type,part:t,type:"part"}}));return c(c([],e),n)}),[{type:"value"}]),je({pos:{x:t.clientX,y:t.clientY},matches:i,pinId:e,pinType:n.type}),[2]}))}))}),[Y.inputs,Q]),Rt=p.useCallback((function(e){if(e.metaKey){var t=-.001*e.deltaY;nt(Ve.zoom+t,"mouse"),e.preventDefault()}}),[nt,Ve.zoom]);b.useEffect((function(){var e=We.current;if(e)return e.addEventListener("wheel",Rt),function(){e.removeEventListener("wheel",Rt)}}),[Rt]);var Mt={backgroundPositionX:g.roundNumber(-Ve.pos.x*Ve.zoom),backgroundPositionY:g.roundNumber(-Ve.pos.y*Ve.zoom),backgroundSize:g.roundNumber(25*Ve.zoom)+"px"},At=p.useRef(new Map);p.useEffect((function(){var e=ie.reduce((function(e,t){var n=f.getPartDef(t,Q);return n&&e.set(t.id,f.keys(n.inputs)),e}),new Map),t=ie.reduce((function(e,t){var n=f.getPartDef(t,Q);return n&&e.set(t.id,f.keys(n.outputs)),e}),new Map),n=re.filter((function(n){if(f.isExternalConnectionNode(n.from)||f.isExternalConnectionNode(n.to))return!1;if(n.to.pinId===f.TRIGGER_PIN_ID||n.from.pinId===f.ERROR_PIN_ID)return!1;var i=e.get(n.to.insId)&&e.get(n.to.insId).includes(n.to.pinId),r=t.get(n.from.insId)&&t.get(n.from.insId).includes(n.from.pinId);return!(i&&r)}));if(n.length>0){D.toastMsg(n.length+" orphan connections removed","warning"),console.log(n.length+" orphan connections removed",n);var i=I.produce(Y,(function(e){e.connections=Y.connections.filter((function(e){return!n.includes(e)}))}));o(i,N.functionalChange("prune orphan connections"))}}),[ie,o,re,Z,Y,Q]),b.useEffect((function(){var e=new Map(ie.map((function(e){return[e.id,e]})));At.current=re.reduce((function(t,n){var r,o=t.get(n.to.insId)||{},u=o[n.to.pinId]||[],a=i(i({},o),((r={})[n.to.pinId]=c(c([],u),[e.get(n.from.insId)]),r));return t.set(n.to.insId,a),t}),new Map)}),[re,ie]);var Vt=p.useCallback((function(){je(void 0)}),[]),zt=p.useCallback((function(e){if(!Oe)throw new Error("impossible state - quick add menu invoked but not available");var t=Oe.ins,n=(Oe.pos,Oe.pinId);if("part"===e.type){var i=g.createNewPartInstance(e.part.id,100,Ye.current,Q);if(i){var r=I.produce(Y,(function(r){r.instances.push(i),r.connections.push({from:{insId:t?t.id:f.THIS_INS_ID,pinId:n},to:{insId:i.id,pinId:e.pinId}})}));o(r,N.functionalChange("add-item-quick-menu")),Vt()}}else{if(!t)return void D.toastMsg("Cannot add value to main input");Ne({type:"new-output",insId:t.id,pinId:n})}}),[Oe,Q,Y,o,Vt]),Gt=p.useCallback((function(){return a(void 0,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return e=JSON.stringify(Y),[4,navigator.clipboard.writeText(e)];case 1:return t.sent(),D.AppToaster.show({message:"Copied!"}),[2]}}))}))}),[Y]),Ht=p.useCallback((function(e){var t,n,i=l?"":" (cannot edit main part, only grouped)";return d.jsxs(C.Menu,{children:[d.jsx(C.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},label:"New Value",onClick:h.preventDefaultAnd((function(){return Ne({type:"new-floating",pos:Ye.current})}))},void 0),d.jsx(C.MenuItem,{label:"New input "+i,onMouseDown:function(e){return e.stopPropagation()},onClick:h.preventDefaultAnd((function(){return jt("input")})),disabled:!l},void 0),d.jsx(C.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},label:"New output "+i,onClick:h.preventDefaultAnd((function(){return jt("output")})),disabled:!l},void 0),d.jsx(C.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},label:"Copy part to clipboard",onClick:h.preventDefaultAnd(Gt)},void 0),d.jsx(C.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},label:"Edit Completion Outputs ("+((null===(t=Y.completionOutputs)||void 0===t?void 0:t.join(","))||"n/a")+")",onClick:h.preventDefaultAnd((function(){return wt()}))},void 0),d.jsx(C.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},label:"Edit Reactive inputs ("+((null===(n=Y.reactiveInputs)||void 0===n?void 0:n.join(","))||"n/a")+")",onClick:h.preventDefaultAnd((function(){return xt()}))},void 0)]},void 0)}),[Gt,jt,l,wt,Y,xt]),qt=p.useCallback((function(e){e.preventDefault();var t=g.domToViewPort({x:e.clientX,y:e.clientY},Ve),n=Ht(t);C.ContextMenu.show(n,{left:e.clientX,top:e.clientY})}),[Ht,Ve]);P.useHotkeys("shift+c",Ze),P.useHotkeys("cmd+c",$e),P.useHotkeys("cmd+v",et),P.useHotkeys("esc",it),P.useHotkeys("backspace",pt),P.useHotkeys("shift+g",Le),P.useHotkeys("shift+d",vt),P.useHotkeys("cmd+a",dt),P.useHotkeys("s",tt);var Lt=p.useCallback((function(e,t){"meta"===t.type?Me((function(t){return i(i({},t),{part:e})})):D.toastMsg("Cannot change inspected part")}),[]),Ft=b.useState({selected:[],viewPort:t.defaultViewPort,lastMousePos:{x:0,y:0}}),Ut=Ft[0],Bt=Ft[1],Wt=p.useCallback((function(e){return Bt((function(t){return i(i({},t),e)}))}),[]),Jt=function(){if(te&&("input"===(null==Ue?void 0:Ue.type)||(null==Ue?void 0:Ue.ins.id)===Y.id&&"output"===(null==Ue?void 0:Ue.type))){var e=Ue.ins.id===Y.id?{pinId:Ue.pin,insId:f.THIS_INS_ID}:{insId:Ue.ins.id,pinId:Ue.pin};if(!f.isInternalConnectionNode(e)&&!f.isInternalConnectionNode(te))return;return{from:te,to:e}}if(ne&&("output"===(null==Ue?void 0:Ue.type)||(null==Ue?void 0:Ue.ins.id)===Y.id&&"input"===(null==Ue?void 0:Ue.type))){var t=Ue.ins.id===Y.id?{pinId:Ue.pin,insId:f.THIS_INS_ID}:{insId:Ue.ins.id,pinId:Ue.pin};if(!f.isInternalConnectionNode(ne)&&!f.isInternalConnectionNode(t))return;return{from:t,to:ne}}},Yt=p.useCallback((function(e,t){var n=I.produce(Y,(function(n){n.instances=n.instances.map((function(n){return n.id===e.id?i(i({},n),{visibleInputs:t}):n}))}));o(n,N.functionalChange("change instance visible inputs"))}),[Y,o]),Xt=p.useCallback((function(e,t){var n=I.produce(Y,(function(n){n.instances=n.instances.map((function(n){return n.id===e.id?i(i({},n),{visibleOutputs:t}):n}))}));o(n,N.functionalChange("change instance visible outputs"))}),[Y,o]);p.useImperativeHandle(n,(function(){return{centerInstance:function(e){var t=Y.instances.find((function(t){return t.id===e}));if(t){var n=O.vSub(t.pos,O.vec(Je.width/2,Je.height/2));ze(i(i({},Ve),{pos:n}))}},centerViewPort:function(){Ze()},getViewPort:function(){return Ve},clearSelection:function(){it()}}}));p.useCallback((function(e,t){var n={visibleInputs:e.visibleInputs,visibleOutputs:e.visibleOutputs,inputConfig:e.inputConfig,displayName:e.displayName},r=I.produce(Y,(function(t){t.instances=t.instances.map((function(t){return t.id===e.id?i(i({},t),n):t}))}));o(r,N.functionalChange("change instance config - "+t))}),[o,Y]);var Zt=p.useState([]),Kt=(Zt[0],Zt[1],p.useCallback((function(e,t){var n=t.trim().substr(0,100),i="Inline-value-"+n.substr(0,15).replace(/["'`]/g,""),r=M.createInlineCodePart({code:t,customView:n,partId:i,type:e});switch(De.type){case"existing":var u=Y.instances.filter((function(e){return e.id===De.insId})).filter((function(e){return f.isInlinePartInstance(e)})).map((function(e){return e.part}))[0];if(!u)throw new Error("Unable to find inline part to save to");var a=f.keys(u.inputs),s=f.keys(r.inputs),c=new Set(A.default.difference(a,s)),l=I.produce(Y,(function(e){e.instances=e.instances.map((function(e){return e.id===De.insId?f.inlinePartInstance(e.id,r,e.inputConfig,e.pos):e})),e.connections=e.connections.filter((function(e){return!(e.to.insId===De.insId&&c.has(e.to.pinId))}))}));o(l,N.functionalChange("change inline value")),Ne(void 0);break;case"static-input":var d;try{var p=t.replace(/^'/,'"').replace(/'$/,'"');d=JSON.parse(p)}catch(b){return void D.toastMsg("Input values must not be formulas or code")}l=I.produce(Y,(function(e){e.instances.find((function(e){return e.id===De.insId})).inputConfig[De.pinId]=f.staticInputPinConfig(d)}));o(l,N.functionalChange("set static input value")),Ne(void 0);break;case"new-floating":var v=f.inlinePartInstance(i+O.rnd(100),r,{},De.pos);l=I.produce(Y,(function(e){e.instances.push(v)}));o(l,N.functionalChange("new floating value")),Ne(void 0);break;case"new-output":var m=De.insId,h=De.pinId,y=Y.instances.find((function(e){return e.id===m}));if(!y)throw new Error("Impossible state");var g=f.inlinePartInstance(i+O.rnd(100),r,{},O.vAdd(y.pos,{x:-50,y:150}));l=I.produce(Y,(function(e){e.instances.push(g),e.connections.push({from:f.connectionNode(m,h),to:f.connectionNode(g.id,f.TRIGGER_PIN_ID)})}));o(l,N.functionalChange("new value connected to output")),Ne(void 0)}}),[De,o,Y])),Qt=re.filter((function(e){var t=Jt();return!t||!f.connectionDataEquals(t,e)}));try{return d.jsxs("div",i({className:"grouped-part-editor","data-id":Y.id,onContextMenu:qt},{children:[d.jsxs("main",i({className:"board-editor-inner",onMouseDown:yt,onMouseUp:gt,onMouseMove:It,onMouseLeave:bt,ref:We,style:Mt},{children:[d.jsx(p.Fragment,{children:d.jsx(T.LayoutDebugger,{vp:Ve,part:Y,extraDebug:g.emptyList,mousePos:Ye.current},void 0)},void 0),d.jsx(m.ConnectionView,{repo:Q,parentInsId:J,size:Je,part:Y,boardPos:Xe,instances:ie,connections:Qt,futureConnection:function(){var e=Jt();if(e){var t=e.from,n=e.to,i=new Set(re.map((function(e){return e.from.insId+"|"+e.from.pinId+"|"+e.to.insId+"|"+e.to.pinId}))),r=t.insId+"|"+t.pinId+"|"+n.insId+"|"+n.pinId;return{connection:{from:t,to:n},type:i.has(r)?"future-remove":"future-add"}}}(),onDblClick:f.noop,viewPort:Ve},void 0),function(){var e=B.from;return h.entries(ae).map((function(t){var n=t[0],i=t[1];return d.jsx(E.PartIoView,{insId:J,type:"input",pos:oe[n]||{x:0,y:0},id:n,onDelete:l?Tt:void 0,onRename:l?St:void 0,onDblClick:kt,closest:!(!Ue||"input"!==Ue.type||Ue.ins.id!==Y.id||Ue.pin!==n),connected:!1,inputMode:i.mode,onChangeInputMode:Dt,viewPort:Ve,onDragStart:at,onDragEnd:ct,onDragMove:st,pinType:i.type,onSelect:Ke,selected:(null==e?void 0:e.pinId)===n},n)}))}(),ie.map((function(e){return d.jsx(v.InstanceView,{onDismantleGroup:_t,onDetachConstValue:Ct,onCopyConstValue:Et,onPasteConstValue:Ot,copiedConstValue:xe,connectionsPerInput:At.current.get(e.id)||g.emptyObj,connectionsPerOutput:g.emptyObj,part:f.getPartDef(e,Q),parentInsId:J,onPinClick:Qe,onPinDblClick:Nt,onDragStart:rt,onDragEnd:ut,partDefRepo:Q,onDragMove:ot,onDblClick:Pt,onSelect:lt,onToggleSticky:ft,selected:-1!==ee.indexOf(e.id),dragged:le===e.id,onInspectPin:He,selectedInput:ne&&f.isInternalConnectionNode(ne)&&ne.insId===e.id?ne.pinId:void 0,selectedOutput:te&&f.isInternalConnectionNode(te)&&te.insId===e.id?te.pinId:void 0,closestPin:Ue&&Ue.ins.id===e.id?Ue:void 0,instance:e,connections:re,onTogglePinBreakpoint:f.noop,onTogglePinLog:f.noop,viewPort:Ve,onRequestHistory:Ge,onChangeVisibleInputs:Yt,onChangeVisibleOutputs:Xt,forceShowMinimized:te?"input":ne?"output":void 0},e.id)})),function(){if(fe){var e=fe.from,t=fe.to,n=g.getSelectionBoxRect(e,t),i=n.x,r=n.y,o=n.w,u=n.h;return d.jsx("div",{className:"selection-box",style:{top:r,left:i,width:o,height:u}},void 0)}return null}(),function(){var e=B.to;return h.entries(se).map((function(t){var n=t[0],i=t[1];return d.jsx(E.PartIoView,{insId:J,type:"output",pos:ue[n]||{x:0,y:0},id:n,onDelete:l?Tt:void 0,onRename:l?St:void 0,closest:!(!Ue||"output"!==Ue.type||Ue.ins.id!==Y.id||Ue.pin!==n),connected:!1,viewPort:Ve,onDragStart:at,onDragEnd:ct,onDragMove:st,pinType:i.type,onSelect:Ke,selected:(null==e?void 0:e.pinId)===n},n)}))}(),Oe?d.jsx(j.QuickAddMenu,i({},Oe,{onAdd:zt,onClose:Vt}),void 0):null,d.jsx("div",i({className:"zoom-slider"},{children:d.jsx(G,{min:.05,max:3,stepSize:.05,labelStepSize:10,labelRenderer:H,onChange:nt,value:Ve.zoom},void 0)}),void 0),De?d.jsx(R.InlineCodeModal,{env:g.emptyObj,initialValue:De.value,initialType:"existing"===De.type?De.templateType:void 0,onCancel:function(){return Ne(void 0)},onSubmit:Kt},void 0):null]}),void 0),Re?d.jsxs("div",i({className:"inspected-part-container"},{children:[d.jsx(C.Button,i({className:"close-btn",onClick:function(){return Me(void 0)}},{children:"Close"}),void 0),d.jsx(t.GroupedPartEditor,{insId:J+"."+Re.insId,boardData:Ut,onChangeBoardData:Wt,resolvedFlow:Z,onCopy:q,clipboardData:e.clipboardData,onInspectPin:e.onInspectPin,onGoToPartDef:e.onGoToPartDef,partIoEditable:e.partIoEditable,onRequestHistory:F,part:Re.part,onChangePart:Lt,onCommand:f.noop,onShowOmnibar:X},void 0)]}),void 0):null]}),void 0)}catch($t){return console.error($t),d.jsxs("div",{children:["Error rendering board - ",$t.toString()]},void 0)}})))},84320:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BasePartView=void 0;var s=n(24246),c=u(n(27378)),l=a(n(60042)),d=a(n(48304)),p=n(42272);t.BasePartView=function(e){var t=e.selected,n=e.dragged,r=e.label,o=e.viewPort,u=e.pos,a=e.onClick,f=e.onDoubleClick,v=e.onDragEnd,m=e.onDragMove,h=e.onDragStart,y=e.displayMode,g=c.useCallback((function(e,t){h(e,t)}),[h]),I=c.useCallback((function(e,t){var n=u,r=(t.x-n.x)/o.zoom,a=(t.y-n.y)/o.zoom,s=n.x+r,c=n.y+a;v(e,i(i({},t),{x:s,y:c}))}),[u,v,o]),b=c.useCallback((function(e,t){m(e,{x:t.x,y:t.y})}),[m]),P={transform:"scale("+o.zoom+")"},_=l.default("base-part-view",e.className,{selected:t,dragged:n,"display-mode":y}),C=u.x*o.zoom-o.pos.x*o.zoom,E=u.y*o.zoom-o.pos.y*o.zoom,O={transform:"translate("+(C-u.x)+"px, "+(E-u.y)+"px)"},j=c.useCallback((function(){return s.jsx(p.Menu,{children:e.contextMenuItems.map((function(e){return s.jsx(p.MenuItem,i({},e),void 0)}))},void 0)}),[e.contextMenuItems]),w=c.useCallback((function(e){e.preventDefault(),e.stopPropagation();var t=j();p.ContextMenu.show(t,{left:e.pageX,top:e.pageY})}),[j]),x=e.upperRenderer?e.upperRenderer():null,T=e.bottomRenderer?e.bottomRenderer():null,S=l.default("base-part-view-vp-fixer",{"display-mode":y});return s.jsx("div",i({className:S,style:O},{children:s.jsx(d.default,i({onStop:I,onStart:g,onDrag:b,position:u,cancel:".no-drag"},{children:s.jsx("span",i({className:"base-part-view-wrapper"},{children:s.jsxs("div",i({className:_,style:P,id:e.domId},{children:[x,s.jsx("div",i({className:"base-part-view-inner",onClick:a,onDoubleClick:f,onContextMenu:w},{children:r}),void 0),T]}),void 0)}),void 0)}),void 0)}),void 0)}},68357:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcZoom=void 0;var i=n(43761);t.calcZoom=function(){var e=i.zoomLevel();return function(){if(window.matchMedia){var e=window.matchMedia("only screen and (min--moz-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen  and (min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx)");return e&&e.matches||window.devicePixelRatio>1}}()?e/2:e}},64153:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionView=t.SingleConnectionView=void 0;var s=n(24246),c=u(n(27378)),l=a(n(60042)),d=n(18265),p=n(48199),f=n(31872),v=n(29768);t.SingleConnectionView=function(e){var t=v.useSsr().isBrowser,n=e.connection,i=e.part,r=e.repo,o=e.instances,u=(e.viewPort,n.from),a=d.isInternalConnectionNode(u)&&o.find((function(e){return e.id===u.insId}));if(!a&&d.isInternalConnectionNode(u))throw new Error('impossible state  - "from instance id - ['+u.insId+'] does not exist"');var c=(d.isInternalConnectionNode(u)&&a?d.getPartDef(a,r):i).outputs[u.pinId],m=c&&c.delayed,h=t?function(e){var t=e.connection,n=e.part,i=e.size,r=e.boardPos,o=e.parentInsId,u=t.from;return d.isExternalConnectionNode(u)?p.calcMainInputPosition(n,i,u.pinId,o,"input",r):p.calcPinPosition(o,u.insId,u.pinId,"output",r)}(e):{x:0,y:0},y=t?function(e){var t=e.connection,n=e.part,i=e.size,r=e.boardPos,o=e.parentInsId,u=t.to;return d.isExternalConnectionNode(u)?p.calcMainOutputPosition(n,i,u.pinId,o,"output",r):p.calcPinPosition(o,u.insId,u.pinId,"input",r)}(e):{x:0,y:0},g=h.x,I=h.y,b=y.x,P=y.y,_=l.default("connection",{delayed:m},e.type),C=f.calcBezierPath({sourceX:g,sourceY:I,targetX:b,targetY:P,curvature:.15});return s.jsx("path",{d:C,className:_},void 0)};t.ConnectionView=function(e){var n=e.viewPort,r=e.futureConnection,o=c.useState(0),u=o[0],a=o[1],l=c.useCallback((function(e){return requestAnimationFrame((function(){a((function(e){return(e+1)%9})),e>0&&l(e-1)}))}),[]);c.useEffect((function(){var e=l(10);return function(){cancelAnimationFrame(e)}}),[l]),c.useEffect((function(){var e=function(){l(3)};return window.addEventListener("scroll",e),window.addEventListener("resize",e),function(){window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}}),[l,u]);var d=e.connections.map((function(n){return s.jsx(t.SingleConnectionView,i({},e,{connection:n,type:"regular"}),void 0)}));return r&&d.push(s.jsx(t.SingleConnectionView,i({},e,{connection:r.connection,type:r.type}),void 0)),s.jsx("span",i({className:"connections-view",style:{opacity:n.zoom}},{children:s.jsx("svg",{children:d},void 0)}),void 0)}},31872:function(e,t){"use strict";var n;function i(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function r(e){var t,r,o=e.pos,u=e.x1,a=e.y1,s=e.x2,c=e.y2,l=e.c;switch(o){case n.Left:t=u-i(u-s,l),r=a;break;case n.Right:t=u+i(s-u,l),r=a;break;case n.Top:t=u,r=a-i(a-c,l);break;case n.Bottom:t=u,r=a+i(c-a,l)}return[t,r]}Object.defineProperty(t,"__esModule",{value:!0}),t.getBezierCenter=t.calcBezierPath=t.Position=void 0,function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(n=t.Position||(t.Position={}));t.calcBezierPath=function(e){var t=e.sourceX,i=e.sourceY,o=e.sourcePosition,u=void 0===o?n.Bottom:o,a=e.targetX,s=e.targetY,c=e.targetPosition,l=void 0===c?n.Top:c,d=e.curvature,p=void 0===d?.25:d,f=r({pos:u,x1:t,y1:i,x2:a,y2:s,c:p}),v=f[0],m=f[1],h=r({pos:l,x1:a,y1:s,x2:t,y2:i,c:p});return"M"+t+","+i+" C"+v+","+m+" "+h[0]+","+h[1]+" "+a+","+s},t.getBezierCenter=function(e){var t=e.sourceX,i=e.sourceY,o=e.sourcePosition,u=void 0===o?n.Bottom:o,a=e.targetX,s=e.targetY,c=e.targetPosition,l=void 0===c?n.Top:c,d=e.curvature,p=void 0===d?.25:d,f=r({pos:u,x1:t,y1:i,x2:a,y2:s,c:p}),v=f[0],m=f[1],h=r({pos:l,x1:a,y1:s,x2:t,y2:i,c:p}),y=.125*t+.375*v+.375*h[0]+.125*a,g=.125*i+.375*m+.375*h[1]+.125*s;return[y,g,Math.abs(y-t),Math.abs(g-i)]}},48199:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcMainOutputPosition=t.calcMainInputPosition=t.calcPinPosition=void 0;var i=n(68357),r=n(92548),o={x:99999,y:99999},u=function(e,t,n){if(!e)return console.warn("Cannot find element "+n+" to render connection"),o;var r=e.getBoundingClientRect(),u=r.x,a=r.y,s=r.width,c=a+r.height/2;return{x:(u+s/2-t.x)*i.calcZoom(),y:c-t.y*i.calcZoom()}};t.calcPinPosition=function(e,t,n,i,o){var a=r.getPinDomId(e,t,n,i),s=document.getElementById(a);return u(s,o,a)};t.calcMainInputPosition=function(e,t,n,i,o,a){var s=r.getMainPinDomId(i,n,o),c=document.getElementById(s);return u(c,a,s)};t.calcMainOutputPosition=function(e,t,n,i,o,a){var s=r.getMainPinDomId(i,n,o),c=document.getElementById(s);return u(c,a,s)}},92548:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMainPinDomId=t.getPinDomId=t.getInstanceDomId=void 0;t.getInstanceDomId=function(e,t){return("ins-view-"+e+"."+t).replace(/\s+/g,"-")};t.getPinDomId=function(e,t,n,i){return("pin-"+e+"."+t+"-"+n+"-"+i).replace(/\s+/g,"-")};t.getMainPinDomId=function(e,t,n){return("pin-main-"+e+"-"+t+"-"+n).replace(/\s+/g,"-")}},53574:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function u(e){try{s(i.next(e))}catch(t){o(t)}}function a(e){try{s(i.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,a)}s((i=i.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,i,r,o,u={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,i=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(r=u.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){u.label=o[1];break}if(6===o[0]&&u.label<r[1]){u.label=r[1],r=o;break}if(r&&u.label<r[2]){u.label=r[2],u.ops.push(o);break}r[2]&&u.ops.pop(),u.trys.pop();continue}o=t.call(e,u)}catch(a){o=[6,a],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},c=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceView=t.getVisibleOutputs=t.getVisibleInputs=t.MAX_INSTANCE_WIDTH=t.MIN_WIDTH_PER_PIN=t.PIECE_CHAR_WIDTH=t.PIECE_HORIZONTAL_PADDING=void 0;var d=n(24246),p=u(n(27378)),f=n(18265),v=l(n(60042)),m=n(11901),h=n(18265),y=n(18265),g=n(42957),I=n(84320),b=n(18265),P=n(92548),_=n(96149);t.PIECE_HORIZONTAL_PADDING=25,t.PIECE_CHAR_WIDTH=11,t.MIN_WIDTH_PER_PIN=40,t.MAX_INSTANCE_WIDTH=400;t.getVisibleInputs=function(e,t,n){var i=e.visibleInputs;if(i)return i;var r=c(c([],f.keys(t.inputs)),[h.TRIGGER_PIN_ID]).filter((function(i,r){var o,u;n.some((function(t){return t.to.insId===e.id&&t.to.pinId===i})),b.isStaticInputPinConfig(e.inputConfig[i]),t.inputs[i]&&(null===(o=t.inputs[i])||void 0===o||o.mode);return!(t.inputs[i]&&"optional"===(null===(u=t.inputs[i])||void 0===u?void 0:u.mode))&&i!==h.TRIGGER_PIN_ID}));return 0===r.length?[h.TRIGGER_PIN_ID]:r};t.getVisibleOutputs=function(e,t,n){var i=e.visibleOutputs;if(i)return i;var r=Object.keys(t.outputs);return n.some((function(t){return t.from.insId===e.id&&t.from.pinId===h.ERROR_PIN_ID}))?c(c([],r),[h.ERROR_PIN_ID]):r};t.InstanceView=function(e){var n=this,r=e.selected,o=e.selectedInput,u=e.selectedOutput,l=(e.connectionsPerInput,e.connectionsPerOutput,e.closestPin),C=e.dragged,E=e.onTogglePinLog,O=e.onTogglePinBreakpoint,j=e.onDetachConstValue,w=e.onCopyConstValue,x=e.onPasteConstValue,T=e.displayMode,S=e.connections,D=e.instance,N=e.viewPort,k=e.part,R=(e.partDefRepo,e.onPinClick),M=e.onPinDblClick,A=e.onDragStart,V=e.onRequestHistory,z=e.onDragEnd,G=e.onDragMove,H=e.onToggleSticky,q=e.onSelect,L=e.onDblClick,F=e.onChangeVisibleInputs,U=e.onChangeVisibleOutputs,B=e.onConvertConstToEnv,W=D.id,J=y.isNativePart(k),Y=_.usePrompt(),X=p.useCallback((function(e){return R(D,e,"input")}),[D,R]),Z=p.useCallback((function(e,t){return M(D,e,"input",t)}),[D,M]),K=p.useCallback((function(e,t){return M(D,e,"output",t)}),[D,M]),Q=p.useCallback((function(e){return R(D,e,"output")}),[D,R]),$=p.useCallback((function(e,t){A(D,e,t)}),[D,A]),ee=p.useCallback((function(e,t){var n=D.pos,r=(t.x-n.x)/N.zoom,o=(t.y-n.y)/N.zoom,u=n.x+r,a=n.y+o;z(D,e,i(i({},t),{x:u,y:a}))}),[D,z,N.zoom]),te=p.useCallback((function(e,t){G(D,e,{x:t.x,y:t.y})}),[D,G]),ne=p.useCallback((function(e){return H(D,e)}),[D,H]),ie=p.useCallback((function(e){return j(D,e)}),[D,j]),re=p.useCallback((function(e){return w(D,e)}),[D,w]),oe=p.useCallback((function(e){return x(D,e)}),[D,x]),ue=p.useCallback((function(e){return q(D,e)}),[D,q]),ae=p.useCallback((function(e){return L(D,e.shiftKey)}),[D,L]),se=f.entries(k.inputs),ce=D.visibleInputs,le=D.visibleOutputs;ce&&se.sort((function(e,t){return ce.indexOf(e[0])-ce.indexOf(t[0])}));var de=f.entries(k.outputs);le&&de.sort((function(e,t){return le.indexOf(e[0])-le.indexOf(t[0])}));var pe=t.getVisibleInputs(D,k,S),fe=t.getVisibleOutputs(D,k,S);se.push([h.TRIGGER_PIN_ID,f.partInput("trigger")]),de.push([h.ERROR_PIN_ID,h.partOutput("error")]);var ve=se.filter((function(e){var t=e[0];return pe.includes(t)})),me=de.filter((function(e){var t=e[0];return fe.includes(t)})),he=v.default("ins-view",{selected:r,dragged:C,native:J,closest:l&&l.ins.id===D.id,"no-inputs":0===se.length,"no-outputs":0===de.length,"display-mode":T,"force-minimized-input":"input"===e.forceShowMinimized||"both"===e.forceShowMinimized,"force-minimized-output":"output"===e.forceShowMinimized||"both"===e.forceShowMinimized}),ye=new Set(S.filter((function(e){return e.to.insId===W})).map((function(e){return e.to.pinId}))),ge=new Set(S.filter((function(e){return e.from.insId===W})).map((function(e){return e.from.pinId}))),Ie=new Set(f.entries(k.inputs).filter((function(e){e[0];var t=e[1];return h.isInputPinOptional(t)})).map(f.pickFirst)),be=f.entries(D.inputConfig).reduce((function(e,t){var n,r=t[0],o=t[1];return h.isStickyInputPinConfig(o)||o.sticky?i(i({},e),((n={})[r]=!0,n)):e}),{}),Pe=g.calcPartContent(D,k),_e=function(e){var t=D.inputConfig[e];if(b.isStaticInputPinConfig(t))return t.value},Ce=p.useCallback((function(){return a(n,void 0,void 0,(function(){var e,t;return s(this,(function(n){switch(n.label){case 0:return e=f.okeys(k.inputs),[4,Y("New order?",(D.visibleInputs||e).join(","))];case 1:return(t=n.sent())&&F(D,t.split(",")),[2]}}))}))}),[k.inputs,Y,D,F]),Ee=p.useCallback((function(){return a(n,void 0,void 0,(function(){var e,t;return s(this,(function(n){switch(n.label){case 0:return e=f.okeys(k.outputs),[4,Y("New order?",(D.visibleOutputs||e).join(","))];case 1:return(t=n.sent())&&U(D,t.split(",")),[2]}}))}))}),[k.outputs,Y,D,U]),Oe=c(c([],Object.keys(k.inputs)),[h.TRIGGER_PIN_ID]),je=c(c([],Object.keys(k.outputs)),[h.ERROR_PIN_ID]),we=Oe.map((function(e){var t=pe.includes(e),n=ye.has(e),i=e===h.TRIGGER_PIN_ID?"Trigger Pin":e;return{text:t?n?'Hide input "'+i+'" (disconnect first)':'Hide input "'+i+'"':'Show input "'+i+'"',onClick:function(){return F(D,t?pe.filter((function(t){return t!==e})):c(c([],pe),[e]))},disabled:n&&t}})),xe=je.map((function(e){var t=fe.includes(e),n=ge.has(e),i=e===h.ERROR_PIN_ID?"Error Pin":e;return{text:t?n?'Hide output "'+i+'" (disconnect first)':'Hide output "'+i+'"':'Show output "'+i+'"',onClick:function(){return U(D,t?fe.filter((function(t){return t!==e})):c(c([],fe),[e]))},disabled:n&&t}})),Te=c(c(c(c([],we),xe),y.isGroupedPart(k)?[{text:"Dismantle Group",onClick:function(){return e.onDismantleGroup(D)}}]:[]),[{text:"Reorder inputs",onClick:Ce},{text:"Reorder outputs",onClick:Ee}]),Se=p.useCallback((function(e,t){return V(D.id,e,t)}),[D,V]),De=p.useCallback((function(e){B&&B(D,e)}),[D,B]);return d.jsx("div",i({className:he,"data-part-id":k.id},{children:d.jsx(I.BasePartView,{label:Pe,onClick:ue,onDoubleClick:ae,selected:r,pos:D.pos,viewPort:N,onDragStart:$,onDragMove:te,onDragEnd:ee,contextMenuItems:Te,upperRenderer:function(){return d.jsx("div",i({className:"inputs no-drag"},{children:ve.map((function(t){var n=t[0],i=t[1];return d.jsx(m.PinView,{type:"input",insId:D.id,parentInsId:e.parentInsId,id:n,optional:Ie.has(n),connected:ye.has(n),isSticky:be[n],minimized:!r&&1===ve.length,onToggleSticky:ne,onDetachConstValue:ie,onCopyConstValue:re,onPasteConstValue:oe,copiedConstValue:e.copiedConstValue,selected:n===o,onClick:X,onDoubleClick:Z,isPart:0===i.type.indexOf("part"),isClosestToMouse:!!l&&"input"===l.type&&l.pin===n,onToggleLogged:E,onToggleBreakpoint:O,onInspect:e.onInspectPin,constValue:_e(n),dataType:i.type,onRequestHistory:Se,onConvertConstToEnv:e.onConvertConstToEnv?De:void 0},n)}))}),void 0)},bottomRenderer:function(){return d.jsx("div",i({className:"outputs no-drag"},{children:me.map((function(t){var n=t[0],i=t[1];return d.jsx(m.PinView,{insId:D.id,parentInsId:e.parentInsId,connected:ge.has(n),type:"output",id:n,minimized:!r&&1===me.length,optional:i.optional,isClosestToMouse:!!l&&"output"===l.type&&l.pin===n,selected:n===u,onClick:Q,onDoubleClick:K,onToggleLogged:E,onToggleBreakpoint:O,dataType:i.type,onInspect:e.onInspectPin,onRequestHistory:Se},n)}))}),void 0)},displayMode:T,domId:P.getInstanceDomId(e.parentInsId,D.id)},void 0)}),void 0)}},83100:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(53574),t)},42957:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.calcInstancePosition=t.calcPartWidth=t.calcPartContent=void 0;var a=n(18265),s=u(n(78284)),c=n(12901),l=n(53574),d=n(98784),p=n(92548);t.calcPartContent=function(e,t){if(t.customViewCode)try{var n=Object.entries(e.inputConfig).filter((function(e){var t=e[1];return a.isStaticInputPinConfig(t)})).reduce((function(e,t){var n,r=t[0],o=t[1];return i(i({},e),((n={})[r]=o.value,n))}),{});return s.render(t.customViewCode,{inputs:n,isDefined:c.isDefined}).trim()}catch(r){return console.error("Error with custom view",r),"Error in custom view ["+t.id+"]"}return t.id};t.calcPartWidth=function(e,n){var i=a.okeys(n.inputs).length*l.MIN_WIDTH_PER_PIN,r=t.calcPartContent(e,n),o=l.PIECE_CHAR_WIDTH;return d.clamp(r.length*o+2*l.PIECE_HORIZONTAL_PADDING,i,l.MAX_INSTANCE_WIDTH)};t.calcInstancePosition=function(e,t,n){var i=p.getInstanceDomId(t,e),r=document.getElementById(i);if(r){var o=r.getBoundingClientRect(),u=o.x,a=o.y,s=o.width,c=a+o.height/2;return{x:u+s/2-n.x,y:c-n.y}}return console.warn("Cannot find element to draw connection to",i),{x:99999,y:99999}}},58651:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutDebugger=t.LayoutDebuggerItem=t.PosDebugger=void 0;var u=n(27378),a=n(24246),s=n(18265),c=o(n(27378)),l=n(96149),d=function(e){var t=e.pos;return a.jsxs("span",{children:[t.x.toFixed(1),", ",t.y.toFixed(1)]},void 0)};t.PosDebugger=function(e){return a.jsx("span",i({className:"pos-debugger"},{children:a.jsx(d,{pos:e.pos},void 0)}),void 0)};t.LayoutDebuggerItem=function(e){var n=e.pos,r=e.viewPort,o=e.size,u=e.color,s=r.zoom,c=n.x*s-r.pos.x*s,l=n.y*s-r.pos.y*s,d={transform:"translate("+(c-n.x)+"px, "+(l-n.y)+"px)"},p={transform:"scale("+r.zoom+")"},f={transform:"translate("+n.x+"px, "+n.y+"px)"},v={width:o.width+"px",height:o.height+"px",backgroundColor:u};return a.jsx("div",i({className:"layout-debugger",style:d},{children:a.jsxs("span",i({className:"drag-sim",style:f},{children:[a.jsx(t.PosDebugger,{pos:n},void 0),a.jsx("div",i({className:"layout-debugger-zoom-wrapper",style:p},{children:a.jsx("div",{className:"layout-debugger-inner",style:v},void 0)}),void 0)]}),void 0)}),void 0)};var p=function(){try{return"true"===localStorage.getItem("pos-debugger")}catch(e){return!1}}();t.LayoutDebugger=function(e){var n=e.extraDebug,o=e.vp,f=e.part,v=e.mousePos;if(!p)return null;var m=n.map((function(e,n){return u.createElement(t.LayoutDebuggerItem,i({},e,{key:n}))})),h=r(r(r([],f.instances.map((function(e){return e.pos}))),s.values(f.inputsPosition)),s.values(f.outputsPosition)).map((function(e){return a.jsx(t.LayoutDebuggerItem,{pos:e,viewPort:o,size:{width:0,height:0},color:"red"},void 0)})),y=l.logicalPosToRenderedPos(v,o),g=a.jsxs("div",i({className:"viewport-data"},{children:[a.jsxs("div",{children:["Pos: ",a.jsx(d,{pos:o.pos},void 0)]},void 0),a.jsxs("div",{children:["Zoom: ",o.zoom.toFixed(2)," "]},void 0),a.jsxs("div",{children:["Mouse (logical): ",a.jsx(d,{pos:v},void 0)]},void 0),a.jsxs("div",{children:["Rendered (rendered): ",a.jsx(d,{pos:y},void 0)]},void 0)]}),void 0);return a.jsxs(c.default.Fragment,{children:[g,m,h]},void 0)}},65883:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(58651),t)},56111:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.orderGroupedPart=t.layoutToInstances=void 0;var o=n(12465),u=n(18265),a=n(7979),s=r(n(63300)),c=n(98936),l=n(99743),d=n(42957);t.layoutToInstances=function(e,t){return s.default(t,(function(t){u.entries(e.nodes).forEach((function(e){var n=e[0],i=e[1];if(n.startsWith("ins-")){var r=n.replace("ins-",""),o=t.instances.find((function(e){return e.id===r}));o?o.pos=i.p:console.warn("WAT")}if(n.startsWith("part-input-")){var u=n.replace("part-input-","");t.inputsPosition[u]=i.p}if(n.startsWith("part-output-")){u=n.replace("part-output-","");t.outputsPosition[u]=i.p}}))}))};t.orderGroupedPart=function(e,n,r,s){var p=e.instances,f=e.connections,v=p.reduce((function(e,t){var r,a=l.size(d.calcPartWidth(t,u.getPartDef(t,n)),o.PART_HEIGHT);return i(i({},e),((r={})["ins-"+t.id]={p:t.pos,s:a},r))}),{}),m=u.okeys(e.inputsPosition).reduce((function(t,n){var r,u=e.inputsPosition[n],a=l.size(c.calcPartIoWidth(n),o.PART_HEIGHT);return i(i({},t),((r={})["part-input-"+n]={p:u,s:a},r))}),{}),h=u.okeys(e.outputsPosition).reduce((function(t,n){var r,u=e.outputsPosition[n],a=l.size(c.calcPartIoWidth(n),o.PART_HEIGHT);return i(i({},t),((r={})["part-output-"+n]={p:u,s:a},r))}),{}),y=i(i(i({},v),m),h),g=f.map((function(e){return[u.isExternalConnectionNode(e.from)?"part-input-"+e.from.pinId:"ins-"+e.from.insId,u.isExternalConnectionNode(e.to)?"part-output-"+e.to.pinId:"ins-"+e.to.insId]})),I=a.orderLayout({nodes:y,edges:g},r,(function(n,i){s&&s(t.layoutToInstances(n,e),i)}));return t.layoutToInstances(I,e)}},7979:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.orderLayout=void 0;var r=n(99743),o=400,u=function(e){return e.reduce((function(e,t){var n,o=r.vSub(t.p,r.vec(t.s.width/2,t.s.height/2));return i(i({},e),((n={})[t.id]={p:o,s:t.s},n))}),{})};t.orderLayout=function(e,t,n){for(var a=e.nodes,s=e.edges,c=Object.entries(a).map((function(e){var t=e[0],n=e[1];return{id:t,p:r.vAdd(n.p,r.vec(n.s.width/2,n.s.height/2)),f:r.vec(0,0),v:r.vec(0,0),m:1,s:n.s}})),l=0,d=function(){for(var e=c,t=0;t<e.length;t++)for(var a=t+1;a<e.length;a++)if(t!==a){var d=e[t],p=e[a],f=r.vSub(d.p,p.p),v=Math.abs(f.x),m=Math.abs(f.y),h=d.id.startsWith("part-input"),y=d.id.startsWith("part-output"),g=p.id.startsWith("part-input"),I=p.id.startsWith("part-output");if(v<o&&m<80){var b=1e3*(o-v);d.f=r.vAdd(d.f,r.vec(.5*b,0)),p.f=r.vAdd(p.f,r.vec(-.5*b,0))}if(m<50){var P=100*f.y;d.f=r.vAdd(d.f,r.vec(0,.5*P)),p.f=r.vAdd(p.f,r.vec(0,-.5*P))}if(h&&I){var _=r.vSub(d.p,p.p).y;if(_<-500){var C=100*(o-_);d.f=r.vAdd(d.f,r.vec(0,-.5*C)),p.f=r.vAdd(p.f,r.vec(0,.5*C))}}else if(y&&g){var E=r.vSub(d.p,p.p).y;if(E<500){var O=100*(o-E);d.f=r.vAdd(d.f,r.vec(0,-.5*O)),p.f=r.vAdd(p.f,r.vec(0,.5*O))}}var j=r.vSub(d.p,r.vec(0,d.p.y)),w=r.vLen(j),x=r.vMul(r.vNorm(j),-50*w);d.f=r.vAdd(d.f,x)}s.forEach((function(t){var n=e.find((function(e){return e.id===t[0]})),i=e.find((function(e){return e.id===t[1]}));if(n&&i){var o=r.vec(0,-200),u=r.vSub(n.p,i.p),a=r.vSub(o,u),s=1e3*r.vLen(a),c=r.vMul(r.vNorm(a),.5*s),l=r.vMul(r.vNorm(a),-.5*s);n.f=r.vAdd(n.f,c),i.f=r.vAdd(i.f,l)}else console.warn("weoops",t[0],t[1])})),e=(e=e.map((function(e){return r.itrPhysics(15,e)}))).map((function(e){var t=r.vMul(e.v,.5),n=r.vLen(t)>100?r.vMul(r.vNorm(t),100):t;return i(i({},e),{v:n})})),c=e,n&&n({nodes:u(e),edges:s},l),l++};l<t&&(l<2||r.totalEnergy(c)>.01);)d();return{nodes:u(c),edges:s,itrs:l,timeout:l>=t,total:r.totalEnergy(c)}}},8417:function(e,t){"use strict";var n=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.calculateInstancesWithSingleConstPinsMap=t.getLeafInstancesOfSelection=void 0;t.getLeafInstancesOfSelection=function(e,t,i){return e.reduce((function(e,r){var o=i.filter((function(e){return e.to.insId===r.id})).map((function(e){return t.find((function(t){return t.id===e.from.insId}))})).filter((function(e){return!!e}));return n(n([],e),o)}),[]).filter((function(t){return 1===i.filter((function(e){return e.from.insId===t.id||e.to.insId===t.id})).length&&!e.includes(t)}))};t.calculateInstancesWithSingleConstPinsMap=function(e,t){return e.connections.filter((function(e){return t.has(e.from.insId)})).reduce((function(e,n){var i=t.get(n.from.insId),r=n.to.insId,o=e.get(r)||new Map;return o.set(n.to.pinId,{val:i,insId:n.from.insId}),e.set(r,o),e}),new Map)}},20712:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},a=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PartIoView=void 0;var c=n(24246),l=u(n(27378)),d=n(18265),p=n(84320),f=n(92548),v=s(n(60042));t.PartIoView=l.memo((function(e){var t=e.viewPort,n=e.selected,r=e.pos,o=e.type,u=e.id,s=e.onDblClick,m=e.onRename,h=e.onDelete,y=e.onChangeInputMode,g=e.inputMode,I=e.onSelect,b=e.closest,P=l.useCallback((function(){h&&h(o,u)}),[o,u,h]),_=l.useCallback((function(){m&&m(o,u)}),[o,u,m]),C=l.useCallback((function(e){y&&y(u,e)}),[u,y]),E=l.useCallback((function(t){s&&s(e.id,t)}),[s,e.id]),O=l.useCallback((function(){I(u,o)}),[u,o,I]);return c.jsx(p.BasePartView,{className:v.default("part-io-view",o,{closest:b}),domId:f.getMainPinDomId(e.insId,u,o),pos:r,onDragEnd:function(n,r){var a=e.pos,s=(r.x-a.x)/t.zoom,c=(r.y-a.y)/t.zoom,l=a.x+s,d=a.y+c;e.onDragEnd(o,u,n,i(i({},r),{x:l,y:d}))},onDragStart:function(t,n){e.onDragStart(u,t,n)},onDragMove:function(n,r){var a=e.pos,s=(r.x-a.x)/t.zoom,c=(r.y-a.y)/t.zoom,l=a.x+s,d=a.y+c;e.onDragMove(o,u,n,i(i({},r),{x:l,y:d}))},onClick:O,label:u,viewPort:t,contextMenuItems:a(a([{text:"Current mode - "+g,onClick:d.noop},{text:"Make required",onClick:function(){return C("required")}},{text:"Make optional",onClick:function(){return C("optional")}},{text:"Make required-if-connected",onClick:function(){return C("required-if-connected")}}],e.onRename?[{text:"Rename",onClick:_}]:[]),e.onDelete?[{text:"Delete",onClick:P}]:[]),onDoubleClick:E,selected:n},void 0)}))},98936:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcPartIoWidth=t.MIN_WIDTH_PER_PIN=t.PIECE_CHAR_WIDTH=t.PIECE_HORIZONTAL_PADDING=void 0,t.PIECE_HORIZONTAL_PADDING=15,t.PIECE_CHAR_WIDTH=9,t.MIN_WIDTH_PER_PIN=40;t.calcPartIoWidth=function(e){return Math.max(t.MIN_WIDTH_PER_PIN,e.length*t.PIECE_CHAR_WIDTH+2*t.PIECE_HORIZONTAL_PADDING)}},11901:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PinView=t.PIN_HEIGHT=void 0;var s=n(24246),c=u(n(27378)),l=a(n(60042)),d=n(42272),p=n(12901),f=n(27378),v=n(18265),m=n(18265),h=n(92548),y=n(75579),g=a(n(49040));t.PIN_HEIGHT=23;t.PinView=c.memo((function(e){var t=e.selected,n=e.type,r=e.connected,o=e.rotate,u=e.optional,a=e.isClosestToMouse,I=(e.dataType,e.id),b=e.onRequestHistory,P=function(e){switch(e){case v.TRIGGER_PIN_ID:return"Trigger";case m.ERROR_PIN_ID:return"Error";default:return e}}(I),_=f.useState(),C=_[0],E=_[1],O="input"===e.type&&p.isDefined(e.constValue)?e.constValue:void 0,j=o&&"input"===n,w=c.useRef(),x=c.useCallback((function(){clearInterval(w.current),b(I,n).then((function(e){E(e)})),w.current=setInterval((function(){b(I,n).then((function(e){E(e)}))}),500)}),[b,I,n]),T=c.useCallback((function(){clearInterval(w.current),E(void 0)}),[]);return s.jsxs("div",i({className:function(){if("input"===e.type){var i=e.isSticky,s=e.isPart,c=e.constValue;return l.default("pin",{sticky:i,selected:t,closest:a,optional:u,connected:r,rotate:o,"const-value":p.isDefined(c),"env-value":p.isDefined(c)&&v.isEnvValue(c),"is-part":s,minimized:e.minimized},n)}return l.default("pin",{selected:t,connected:r,closest:a,rotate:o,optional:u,minimized:e.minimized},n,o)}(),onContextMenu:function(t){t.preventDefault(),t.stopPropagation();var n=function(){var t=s.jsx(d.MenuItem,{onClick:function(){return e.onToggleLogged(e.insId,e.id,e.type)}},void 0),n=s.jsx(d.MenuItem,{onClick:function(){return e.onToggleBreakpoint(e.insId,e.id,e.type)}},void 0),i=s.jsx(d.MenuItem,{onClick:function(){return e.onInspect(e.insId,e.id,e.type)},text:"Inspect"},void 0);if("input"===e.type){var r=e.onConvertConstToEnv;return p.isDefined(O)?s.jsxs(d.Menu,{children:[s.jsx(d.MenuItem,{onClick:function(){return e.onDetachConstValue(e.id)},text:"Detach value"},void 0),s.jsx(d.MenuItem,{onClick:function(){return e.onCopyConstValue(e.id)},text:"Copy value"},void 0),p.isDefined(e.copiedConstValue)?s.jsx(d.MenuItem,{onClick:function(){return e.onPasteConstValue(e.id)},text:"Paste value"},void 0):null,r?s.jsx(d.MenuItem,{onClick:function(){return r(e.id)},text:"Convert to Env Var"},void 0):null]},void 0):s.jsxs(d.Menu,{children:[s.jsx(d.MenuItem,{onClick:function(){return e.onToggleSticky(e.id)},text:"Toggle sticky (square means sticky)"},void 0),t,n,i,p.isDefined(e.copiedConstValue)?s.jsx(d.MenuItem,{onClick:function(){return e.onPasteConstValue(e.id)},text:"Paste value"},void 0):null]},void 0)}return s.jsxs(d.Menu,{children:[t,n,i]},void 0)}();d.ContextMenu.show(n,{left:t.pageX,top:t.pageY})},"data-pin-id":I},{children:[s.jsx(g.default,{className:"insights-tooltip",html:!0,id:I+e.insId,getContent:[function(e){if(p.isDefined(O))return"<div>"+P+" ("+n+")<div>Const Value: <strong>"+y.valuePreview(O).substr(0,200)+"</strong></div></div>";if(!C)return"<div>Loading..</div>";var t=C.total,i=C.lastSamples,r=i.length>0?"<div>Last value: <strong>"+y.valuePreview(i[0].val).substr(0,200)+"</strong></div>":"";return"<div><div>"+P+" ("+n+") </div>\n    <strong>Activated "+t+" times this session</strong>\n    "+r},25]},void 0),s.jsxs("div",i({onMouseEnter:x,onMouseOut:T,"data-tip":"","data-html":!0,id:h.getPinDomId(e.parentInsId,e.insId,I,n),"data-for":I+e.insId,"data-place":j?"bottom":null,onDoubleClick:function(t){return e.onDoubleClick&&e.onDoubleClick(I,t)},className:"pin-inner",onClick:function(t){var i=e.onShiftClick,r=e.onClick,o=e.id;t.shiftKey&&i?i(o,t):r(o,n,t)}},{children:[p.isDefined(O)?s.jsxs(c.Fragment,{children:[P,": ",s.jsx("span",i({className:"value"},{children:p.toString(O)}),void 0)]},void 0):P,"input"===e.type&&e.isSticky?s.jsx("span",i({className:"suffix"},{children:"s"}),void 0):null,"input"===e.type&&e.queueSize?s.jsxs("span",i({className:"suffix"},{children:[e.queueSize," in Q"]}),void 0):null]}),void 0),s.jsx("div",{className:"wire"},void 0)]}),void 0)}))},35683:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.QuickAddMenu=void 0;var a=n(24246),s=u(n(27378)),c=n(42272),l=n(18185),d=n(10934),p=l.Select.ofType(),f=function(e){return"part"===e.type?e.part.id+" - "+e.pinId+" ("+e.pinType+")":"Add value"},v=function(e,t){var n=t.handleClick,i=t.modifiers,r=t.query;if(!i.matchesPredicate)return null;var o=f(e);return"value"===e.type?a.jsxs(s.Fragment,{children:[a.jsx(c.MenuDivider,{},void 0),a.jsx(c.MenuItem,{active:i.active,disabled:i.disabled,onClick:n,text:d.highlightText(o,r)},f(e))]},void 0):a.jsx(c.MenuItem,{active:i.active,disabled:i.disabled,onClick:n,text:d.highlightText(o,r)},f(e))},m=function(e,t,n,i){var r=f(t).toLocaleLowerCase(),o=e.toLowerCase();return i?r===o:r.includes(o)};t.QuickAddMenu=function(e){var t={left:e.pos.x,top:e.pos.y};return a.jsx("div",i({className:"quick-add-menu",style:t},{children:a.jsx(p,{className:"quick-add-parts-select",items:e.matches,itemPredicate:m,itemRenderer:v,inputProps:{className:"quick-add-input"},noResults:a.jsx(c.MenuItem,{disabled:!0,text:"No results."},void 0),onItemSelect:function(t){return e.onAdd(t)},popoverProps:{isOpen:!0,onClose:function(){return e.onClose()}}},void 0)}),void 0)}},867:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRuntimePlayer=void 0;var i=n(18265),r=n(77159),o=i.debugLogger("runtime-player");t.createRuntimePlayer=function(e){var t=0,n=[],i=!1,u=Date.now(),a=t,s=function s(){return requestAnimationFrame((function(){var c,l,d,p=Date.now();a=t,t+=p-u,u=p,c=a,l=t,d=n,n=[],d.length&&o("Playing "+d.length+" events from",c,l),d.forEach((function(t){o("Playing event",t),r.playEvent(e,t)})),i&&s()}))},c=function(){i=!1},l=function(){n=[],document.querySelectorAll("[data-runtime]").forEach((function(e){e.removeAttribute("data-runtime")})),document.querySelectorAll("[data-runtime-queue]").forEach((function(e){e.removeAttribute("data-runtime-queue")}))};return{stop:c,start:function(e){void 0===e&&(e=0),i=!0,t=e,u=Date.now(),s()},addEvents:function(e){n.push.apply(n,e),n.sort((function(e,t){return e.dt-t.dt}))},destroy:function(){c(),l()},clear:l,status:function(){return{running:i,currDt:t,lastDt:a,queue:n,last:u}}}}},77159:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.playEvent=t.cancelTimers=void 0;var i=n(18265),r=n(75579),o=n(92548),u=2e3,a=i.debugLogger("runtime-player:play-event"),s=function(e){return""+e.id};t.cancelTimers=new Map;t.playEvent=function(e,n){var c,l,d=s(n);switch(n.type){case r.RuntimeEventType.INPUT_CHANGE:case r.RuntimeEventType.OUTPUT_CHANGE:var p=n.id.split(".").reverse(),f=p[0],v=p[1],m=p[2],h=p.slice(3).reverse().join("."),y=o.getPinDomId(h,m,v,f),g=document.getElementById(y),I=m+"."+v,b=n.type===r.RuntimeEventType.OUTPUT_CHANGE?document.querySelectorAll('[data-from-id="'+I+'"]'):[];if(g){clearTimeout(t.cancelTimers.get(d)),g.removeAttribute("data-runtime"),b.forEach((function(e){e.removeAttribute("data-runtime")})),setTimeout((function(){g.setAttribute("data-runtime","active"),b.forEach((function(e){e.setAttribute("data-runtime","active")}))}),0);var P=setTimeout((function(){g.removeAttribute("data-runtime"),b.forEach((function(e){e.removeAttribute("data-runtime")})),t.cancelTimers.delete(d)}),u);t.cancelTimers.set(s(n),P)}else console.warn("No DOM element with Id ["+y+"] found to play event"),a("No DOM element with Id ["+y+"] found to play event",n);break;case r.RuntimeEventType.PROCESSING_CHANGE:var _=n.id.split(".").reverse(),C=(m=_[0],_.slice(1).reverse().join(".")),E=(y=o.getInstanceDomId(C,m),null===(c=document.getElementById(y))||void 0===c?void 0:c.parentElement);if(!E)return void a("No DOM element with Id ["+y+"] found to play event",n);if(!0===n.val)E.setAttribute("data-runtime","processing"),clearTimeout(t.cancelTimers.get(d));else{E.removeAttribute("data-runtime"),setTimeout((function(){E.setAttribute("data-runtime","done")}),0);P=setTimeout((function(){E.removeAttribute("data-runtime"),t.cancelTimers.delete(d)}),u);t.cancelTimers.set(d,P)}break;case r.RuntimeEventType.ERROR:var O=n.id.split(".").reverse(),j=(m=O[0],O.slice(1).reverse().join(".")),w=(y=o.getInstanceDomId(j,m),null===(l=document.getElementById(y))||void 0===l?void 0:l.parentElement);if(!w)return void a("No DOM element with Id ["+y+"] found to play event",n);clearTimeout(t.cancelTimers.get(d)),w.removeAttribute("data-runtime"),setTimeout((function(){w.setAttribute("data-runtime","error")}));P=setTimeout((function(){w.removeAttribute("data-runtime"),t.cancelTimers.delete(d)}),u);t.cancelTimers.set(d,P);break;case r.RuntimeEventType.INPUTS_STATE_CHANGE:i.entries(n.val).forEach((function(e){var t=e[0],i=e[1],r=n.id.split(".").reverse(),u=r[0],s=r.slice(1).reverse().join("."),c=o.getPinDomId(s,u,t,"input"),l=document.getElementById(c);l?i>0?l.setAttribute("data-runtime-queue",""+i):l.removeAttribute("data-runtime-queue"):a("No DOM element with Id ["+c+"] found to play event",n)}))}}},13521:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useDebounce=void 0;var i=n(27378);t.useDebounce=function(e,t){var n=i.useState(e),r=n[0],o=n[1];return i.useEffect((function(){var n=setTimeout((function(){o(e)}),t);return function(){clearTimeout(n)}}),[e,t]),[r,o]}},52395:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},a=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.handleChangePartInputType=t.handleIoPinRename=t.calcMoveViewPort=t.handleInstanceDrag=t.getInstancesInRect=t.dismantleGroup=t.isJsxValue=t.fitViewPortToPart=t.centerBoardPosOnTarget=t.renderedPosToLogicalPos=t.logicalPosToRenderedPos=t.getEffectivePartDimensions=t.calcPartsPositions=t.calcSelectionBoxArea=t.middlePos=t.calcCenter=t.animatePos=t.easeInOutPos=t.easeInOutQuad=t.center=t.distance=t.clamp=t.domToViewPort=t.roundNumber=t.createNewPartInstance=t.createNewInlinePartInstance=t.parseInputOutputTypes=t.parsePromptValue=t.getSelectionBoxRect=t.findClosestPin=t.toggleStickyPin=t.emptyList=t.emptyObj=void 0;var s=u(n(63300)),c=n(12465),l=n(18265),d=n(48199),p=n(12901),f=n(18265),v=n(42957),m=n(98936),h=n(99743),y=n(8417),g=n(40232),I=n(83100);t.emptyObj={},t.emptyList=[];t.toggleStickyPin=function(e,t,n,r){return s.produce(e,(function(e){var r=e.instances,o=r.find((function(e){return e.id===t}));if(!o)throw new Error("blah");var u=o.inputConfig||{},a=u[n]||l.queueInputPinConfig();l.isStickyInputPinConfig(a)?u[n]=l.queueInputPinConfig():u[n]=l.stickyInputPinConfig(),e.instances=r.map((function(e){return e===o?i(i({},o),{inputConfig:u}):e}))}))};t.findClosestPin=function(e,t,n,i,r,o){var u=l.partInstance(e.id,e.id),s=f.okeys(e.inputs).map((function(t){return{id:t,type:"input",pos:d.calcMainInputPosition(e,i,t,o,"input",r),ins:u}})),c=f.okeys(e.outputs).map((function(t){return{id:t,type:"output",pos:d.calcMainOutputPosition(e,i,t,o,"output",r),ins:u}})),p=e.instances.reduce((function(n,i){var u=l.getPartDef(i,t),s=I.getVisibleInputs(i,u,e.connections),c=I.getVisibleOutputs(i,u,e.connections),p=s.map((function(e){return{ins:i,type:"input",pos:d.calcPinPosition(o,i.id,e,"input",r),id:e}})),f=c.map((function(e){return{ins:i,type:"output",pos:d.calcPinPosition(o,i.id,e,"output",r),id:e}}));return a(a(a([],n),p),f)}),[]),v=a(a(a([],s),p),c),m={dis:1e5,item:v[0]};return v.forEach((function(e){var t=e.pos.x-n.x,i=e.pos.y-n.y,r=Math.sqrt(t*t+i*i);r<m.dis&&(m.dis=r,m.item=e)})),m.item};t.getSelectionBoxRect=function(e,t){var n=Math.min(e.x,t.x),i=Math.min(e.y,t.y);return{x:n,y:i,w:Math.max(e.x,t.x)-n,h:Math.max(e.y,t.y)-i}};t.parsePromptValue=function(e){if(null!==e){var t=parseInt(e,10),n=e;return t.toString()!=e||isNaN(t)||(n=t),n}};t.parseInputOutputTypes=function(e){var t=e.match(/part\((.+)\|(.+)\)/)||[],n=t[1],i=t[2],r=f.entries(JSON.parse(n)).map((function(e){var t=e[0],n={type:e[1],optional:f.isOptionalType(t)};return[t.replace(/\?$/,""),n]})),o=f.entries(JSON.parse(i)).map((function(e){var t=e[0],n={type:e[1],optional:f.isOptionalType(t)};return[t.replace(/\?$/,""),n]}));return{inputs:f.fromEntries(r),outputs:f.fromEntries(o)}};t.createNewInlinePartInstance=function(e,t,n){void 0===t&&(t=-1*c.PART_HEIGHT*1.5);var r=l.inlinePartInstance(e.id+"-"+f.randomInt(999),e,{},{x:0,y:0}),o=v.calcPartWidth(r,e),u={x:n.x-o/2,y:n.y+t};return i(i({},r),{pos:u})};t.createNewPartInstance=function(e,t,n,r){void 0===t&&(t=-1*c.PART_HEIGHT*1.5);var o="string"==typeof e?l.getPartDef(e,r):e;if(!o)throw new Error(e+" part not found in repo");var u=l.partInstance(o.id+"-"+f.randomInt(999),o.id,{},{x:0,y:0}),a=v.calcPartWidth(u,o),s={x:n.x-a/2,y:n.y+t};return i(i({},u),{pos:s})};t.roundNumber=function(e){return Math.round(100*e)/100};t.domToViewPort=function(e,n){return{x:t.roundNumber(n.pos.x+e.x/n.zoom),y:t.roundNumber(n.pos.y+e.y/n.zoom)}};t.clamp=function(e,t,n){return Math.max(e,Math.min(t,n))};t.distance=function(e,t){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)};t.center=function(e,t,n){var i=n.zoom,r=e.x+e.w/2,o=e.y+e.h/2;return{x:r-t.w/i/2,y:o-t.h/i/2}};t.easeInOutQuad=function(e){return e<.5?2*e*e:(4-2*e)*e-1};t.easeInOutPos=function(e,n,i,r,o){var u=t.clamp(0,1,(o-i)/r),a=t.easeInOutQuad(u),s=n.x-e.x,c=n.y-e.y;return{x:e.x+s*a,y:e.y+c*a}};t.animatePos=function(e,n,i,r){var o=t.distance(e,n),u=Date.now(),a=Math.sqrt(o)*i;if(0!==o){requestAnimationFrame((function i(){var o=Date.now(),s=t.easeInOutPos(e,n,u,a,o);o-u<a?(r(s),requestAnimationFrame(i)):(r(s),setTimeout((function(){r(s)}),10))}))}else r(e)};t.calcCenter=function(e){var t=e.w,n=e.h;return{x:e.x+t/2,y:e.y+n/2}};t.middlePos=function(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}};t.calcSelectionBoxArea=function(e){var n=t.getSelectionBoxRect(e.from,e.to);return n.h*n.w};var b=function(e,n,r,o){return{left:r.x,right:r.x+e,top:r.y,bottom:r.y+n,tag:o,center:t.calcCenter(i({w:e,h:n},r))}};t.calcPartsPositions=function(e,t){var n=e.instances.map((function(e){var n=v.calcPartWidth(e,l.getPartDef(e,t)),i=c.PART_HEIGHT;return b(n,i,e.pos,e.id)})),i=f.okeys(e.inputs).map((function(t){var n=m.calcPartIoWidth(t),i=c.PART_HEIGHT,r=e.inputsPosition[t]||{x:0,y:0};return b(n,i,r,"input_"+t)})),r=f.okeys(e.outputs).map((function(t){var n=m.calcPartIoWidth(t),i=c.PART_HEIGHT,r=e.outputsPosition[t]||{x:0,y:0};return b(n,i,r,"output"+t)}));return a(a(a([],n),i),r)};t.getEffectivePartDimensions=function(e,n){var r=t.calcPartsPositions(e,n),o=r[0]||{left:0,right:0,top:0,bottom:0},u=r.reduce((function(e,t){return t.left<e?t.left:e}),o.left),a=r.reduce((function(e,t){return t.right>e?t.right:e}),o.right),s=r.reduce((function(e,t){return t.top<e?t.top:e}),o.top),c=a-u,l=r.reduce((function(e,t){return t.bottom>e?t.bottom:e}),o.bottom)-s,d={x:u,y:s};return{size:{width:c,height:l},pos:d,center:t.calcCenter(i({w:c,h:l},d))}};t.logicalPosToRenderedPos=function(e,t){var n=h.vSub(e,t.pos);return h.vDiv(n,t.zoom)};t.renderedPosToLogicalPos=function(e,t){var n=h.vMul(e,t.zoom);return h.vAdd(t.pos,n)};t.centerBoardPosOnTarget=function(e,n,r,o){var u=t.logicalPosToRenderedPos(e,o),a=t.renderedPosToLogicalPos(u,i(i({},o),{zoom:r})),s=Math.max(e.x,a.x)-Math.min(e.x,a.x),c=Math.max(e.y,a.y)-Math.min(e.y,a.y);return{x:r>o.zoom?o.pos.x+s:o.pos.x-s,y:r>o.zoom?o.pos.y+c:o.pos.y-c}};t.fitViewPortToPart=function(e,n,i){var r=t.getEffectivePartDimensions(e,n),o=r.size,u=r.center,a=o.width+0,s=o.height+0,c=i.width/a,l=i.height/s,d=Math.min(c,l)/1.15,p=t.clamp(.3,1,d);return{zoom:p,pos:{x:u.x-i.width/2/p,y:u.y-i.height/2/p}}};t.isJsxValue=function(e){var t=function(e){return f.isDefined(e.ref)&&f.isDefined(e.type)&&f.isDefined(e.props)};try{var n=JSON.parse(e);return t(n)||Array.isArray(n)&&t(n[0])}catch(i){return!1}};t.dismantleGroup=function(e,t,n){return s.produce(e,(function(e){var i=l.getPartDef(t,n);if(!l.isGroupedPart(i))throw new Error("impossible state");g.toastMsg("TODO","danger")}))};t.getInstancesInRect=function(e,n,r,o,u,a){var s=e.from,d=e.to,f=t.domToViewPort(h.vSub(s,a),r),m=t.domToViewPort(h.vSub(d,a),r),y=t.getSelectionBoxRect(f,m);return u.filter((function(e){var t=e.pos,r=v.calcPartWidth(e,l.getPartDef(e,n)),o=i(i({},t),{w:r,h:c.PART_HEIGHT});return p.intersectRect(y,o)||p.intersectRect(o,y)})).map((function(e){return e.id}))};t.handleInstanceDrag=function(e,t,n,i,r,o){i.preventDefault(),i.stopPropagation();var u,c=h.vSub(n,t.pos),l=s.produce(e,(function(e){var s=e.instances.find((function(e){return e.id===t.id}));if(!s)throw new Error("impossible state dragging instance that does not exist");!i.shiftKey&&o&&(u=[o]);var l=e.instances.filter((function(e){return r.includes(e.id)&&e!==s})),d=a([s],l),p=y.getLeafInstancesOfSelection(d,e.instances,e.connections);a(a([],l),p).forEach((function(e){e.pos=h.vAdd(e.pos,c)})),s.pos=n,!i.shiftKey&&o&&(u=[o])}));return{newValue:l,newSelected:u}};t.calcMoveViewPort=function(e,t,n,i){var r=e.pageX,o=e.pageY,u=t.x-r,a=t.y-o,c=n.x,l=n.y;return s.produce(i,(function(e){e.pos.x=c+3*u/e.zoom,e.pos.y=l+3*a/e.zoom}))};t.handleIoPinRename=function(e,t,n){return s.produce(e,(function(e){var r=prompt("New name?")||"na";"input"===t?(e.inputs[r]=e.inputs[n],e.inputsPosition[r]=e.inputsPosition[n],delete e.inputs[n],e.connections=e.connections.map((function(e){return l.isExternalConnectionNode(e.from)&&e.from.pinId===n?i(i({},e),{from:i(i({},e.from),{pinId:r})}):e}))):(e.outputs[r]=e.outputs[n],e.outputsPosition[r]=e.outputsPosition[n],e.connections=e.connections.map((function(e){return l.isExternalConnectionNode(e.to)&&e.to.pinId===n?i(i({},e),{to:i(i({},e.to),{pinId:r})}):e})),delete e.outputs[n])}))};t.handleChangePartInputType=function(e,t,n){return s.produce(e,(function(e){var i=e.inputs[t];if(!i)throw new Error("Wat");i.mode=n}))}},96149:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(90412),t),r(n(12901),t),r(n(77437),t),r(n(40232),t),r(n(99457),t),r(n(51424),t),r(n(23489),t),r(n(13521),t),r(n(10934),t),r(n(4824),t),r(n(14648),t),r(n(26013),t),r(n(867),t),r(n(11897),t),r(n(99743),t),r(n(57779),t),r(n(52395),t),r(n(12887),t)},60614:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserOnlyReactJson=void 0;var r=n(24246);t.BrowserOnlyReactJson=function(e){if("undefined"==typeof window)return null;var t=n(51366).default;return r.jsx(t,i({},e),void 0)}},26013:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyticsValueRenderer=void 0;var i=n(24246),r=n(18265),o=n(60614);t.AnalyticsValueRenderer=function(e){var t=e.val;try{var n=JSON.parse(t),u="object"==typeof n?n:{value:n},a=n&&[n.type,n.key,n.props,n.ref].every(r.isDefined),s=a?{jsxValue:n}:u;return i.jsx(o.BrowserOnlyReactJson,{src:s,name:!1,collapseStringsAfterLength:50,groupArraysAfterLength:5,collapsed:a},void 0)}catch(c){return i.jsx(o.BrowserOnlyReactJson,{src:{value:t},name:!1,collapseStringsAfterLength:50,groupArraysAfterLength:5},void 0)}}},78504:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.createGroup=void 0;var o=n(18265),u=n(18265),a=n(52395),s=n(99743);t.createGroup=function(e,t,n){if(0===e.length)throw new Error("cannot create group without instances");var c=e.map((function(e){return e.id})),l=t.filter((function(e){var t=c.includes(e.from.insId),n=c.includes(e.to.insId);return!t&&n})).filter((function(e,t,n){return n.findIndex((function(t){return u.connectionNodeEquals(t.to,e.to)}))===t})),d=t.filter((function(e){var t=c.includes(e.from.insId),n=c.includes(e.to.insId);return t&&!n})).filter((function(e,t,n){return n.findIndex((function(t){return u.connectionNodeEquals(t.from,e.from)}))===t})),p={},f={},v={},m={},h=[],y=l.reduce((function(e,t){var n,r=t.to.insId+"."+t.to.pinId,o=t.from.insId+"."+t.from.pinId,a=t.to.pinId;if(v[o])return h.push({from:u.externalConnectionNode(v[o]),to:u.connectionNode(t.to.insId,t.to.pinId)}),e;var c=e[a]?prompt("Name this input ("+a+" of "+t.to.insId+") is already taken:")||"i"+s.rnd():a;return p[r]=c,v[o]=c,h.push({from:u.externalConnectionNode(c),to:u.connectionNode(t.to.insId,t.to.pinId)}),i(i({},e),((n={})[c]=u.partInput("any"),n))}),{}),g=d.reduce((function(e,t){var n,r=t.to.insId+"."+t.to.pinId,o=t.from.insId+"."+t.from.pinId,a=t.from.pinId;if(m[r])return h.push({from:u.connectionNode(t.from.insId,t.from.pinId),to:u.externalConnectionNode(m[r])}),e;var c=e[a]?prompt("Name this output ("+a+" of "+t.from.insId+" is already taken:")||"i"+s.rnd():a;return f[o]=c,m[r]=c,h.push({from:u.connectionNode(t.from.insId,t.from.pinId),to:u.externalConnectionNode(c)}),i(i({},e),((n={})[c]=u.partInput("any"),n))}),{}),I=(e.reduce((function(e,t){return a.middlePos(t.pos,e)}),e[0].pos),t.filter((function(e){return c.includes(e.from.insId)&&c.includes(e.to.insId)})));return{groupedPart:{id:n,inputs:y,outputs:g,instances:e,inputsPosition:o.okeys(y).reduce((function(e,t,n){var r;return i(i({},e),((r={})[t]={x:0+100*n,y:0},r))}),{}),outputsPosition:o.okeys(g).reduce((function(e,t,n){var r;return i(i({},e),((r={})[t]={x:0+100*n,y:400},r))}),{}),connections:r(r([],I),h),completionOutputs:o.okeys(g)},renamedInputs:p,renamedOutputs:f}}},10934:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.highlightText=void 0;var i=n(24246);function r(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}t.highlightText=function(e,t){var n=0,o=t.split(/\s+/).filter((function(e){return e.length>0})).map(r);if(0===o.length)return[e];for(var u=new RegExp(o.join("|"),"gi"),a=[];;){var s=u.exec(e);if(!s)break;var c=s[0].length,l=e.slice(n,u.lastIndex-c);l.length>0&&a.push(l),n=u.lastIndex,a.push(i.jsx("strong",{children:s[0]},n))}var d=e.slice(n);return d.length>0&&a.push(d),a}},99457:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Loader=void 0;var r=n(24246),o=i(n(44271));t.Loader=function(){return r.jsx(o.default,{type:"ball-clip-rotate",active:!0},void 0)}},12887:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0;var i=n(18265);t.logger=i.debugLogger("editor")},14264:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.preloadMonaco=void 0;var i=n(77324),r=n(12887),o=!1;t.preloadMonaco=function(){o||i.loader.init().then((function(){r.logger("monaco preloaded"),o=!0}))}},4824:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.appHotkeysConfig=t.hotkey=t.EditorHotkeyCmd=t.AppHotkeyCmd=void 0,function(e){e.SAVE_PART="save-part",e.NEW_PROJECT="new-project",e.SAVE_PROJECT="save-project",e.TOGGLE_SIDE="toggle-side",e.RUN="run",e.UNDO="undo"}(n=t.AppHotkeyCmd||(t.AppHotkeyCmd={})),function(e){e.SHOW_OMNIBAR="show-omnibar",e.CLEAR_SELECTION="clear-selection",e.DELETE_COMP="delete-comp",e.DUPLICATE_COMP="duplicate-comp",e.GROUP="group",e.SELECT_ALL="select-all",e.SELECT_CLOSEST="select-closest"}(t.EditorHotkeyCmd||(t.EditorHotkeyCmd={}));t.hotkey=function(e,t,n,i,r){return{combo:e,label:t,cmd:n,global:i,preventDefault:r}},t.appHotkeysConfig=[t.hotkey("shift+p","Save part",n.SAVE_PART,!0,!0),t.hotkey("shift+t","New project",n.NEW_PROJECT,!0,!0),t.hotkey("cmd+shift+s","Toggle side",n.TOGGLE_SIDE,!0,!0),t.hotkey("cmd+s","Toggle side",n.SAVE_PROJECT,!0,!0),t.hotkey("shift+r","Run",n.RUN,!0,!0),t.hotkey("cmd+z","Undo",n.UNDO,!0,!0)]},14648:function(e,t,n){"use strict";var i=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useHotkeys=void 0;var o=r(n(34618)),u=n(27378);t.useHotkeys=function(e,t,n,r){void 0===n&&(n=[]),void 0===r&&(r={});var a=u.useCallback(t,i(i([],n),[t]));u.useEffect((function(){return o.default(e,r,a),function(){return o.default.unbind(e,a)}}),[e,a,r])}},11897:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.safeSessionStorage=t.safeLocalstorage=void 0,t.safeLocalstorage={getItem:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return localStorage.getItem.apply(localStorage,e)}catch(n){return null}},setItem:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return localStorage.setItem.apply(localStorage,e)}catch(n){return null}}},t.safeSessionStorage={getItem:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return sessionStorage.getItem.apply(sessionStorage,e)}catch(n){return null}},setItem:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return sessionStorage.setItem.apply(sessionStorage,e)}catch(n){return null}}}},49040:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomReactTooltip=void 0;var o=n(24246),u=n(27378),a=r(n(31542)),s=r(n(87661));function c(e){var t=e.children,n=e.domNode;return a.default.createPortal(t,n)}t.CustomReactTooltip=function(e){var t=u.useRef();return u.useEffect((function(){t.current=document.createElement("div"),document.body.appendChild(t.current)}),[]),t.current?o.jsx(c,i({domNode:t.current},{children:o.jsx(s.default,i({},e),void 0)}),void 0):null},t.default=t.CustomReactTooltip},77437:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useLocalStorage=t.useResizePref=t.userPreferences=t.useUserPref=void 0;var u,a=o(n(27378)),s=n(12901),c=n(11897);t.useUserPref=function(e,n){var i=a.useState((function(){var i=t.userPreferences.getItem(e);return s.isDefined(i)?i:n})),r=i[0],o=i[1];a.useEffect((function(){var i=t.userPreferences.getItem(e),r=s.isDefined(i)?i:n;o(r)}),[e]);return[r,function(n){t.userPreferences.setItem(e,n),console.log("Saved",e,n),o(n)}]},t.userPreferences=(u=function(e){return"up."+e},{getItem:function(e){var t=c.safeLocalstorage.getItem(u(e))||"",n=c.safeSessionStorage.getItem(u(e))||"";try{return JSON.parse(n||t).value}catch(i){return}},setItem:function(e,t,n){void 0===n&&(n=!1);var i=n?sessionStorage:c.safeLocalstorage;try{var r=JSON.stringify({value:t});return i.setItem(u(e),r),!0}catch(o){return console.error("Error saving user preference",o),!1}}});t.useResizePref=function(e,n){var i="resize."+e;return t.useUserPref(i,n)};var l=function(e){var t=c.safeLocalstorage.getItem(e);if(!t)return null;try{return JSON.parse(t).value}catch(n){return null}};t.useLocalStorage=function(e,t){var n=a.useState(l(e)||t),i=n[0],r=n[1],o=a.useCallback((function(t){c.safeLocalstorage.setItem(e,JSON.stringify({value:t})),r(t)}),[e]);return a.useEffect((function(){l(e)||c.safeLocalstorage.setItem(e,JSON.stringify({value:t}))}),[e,t,o]),[i,o]}},99743:function(e,t){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.totalEnergy=t.itrPhysics=t.hookes=t.coulombs=t.vToStr=t.vNorm=t.vLen=t.vSub=t.vAdd=t.vDiv=t.vMul=t.vZero=t.rnd=t.vec=t.size=void 0;t.size=function(e,t){return{width:e,height:t}};t.vec=function(e,t){return{x:e,y:t}};t.rnd=function(e,t){return void 0===e&&(e=100),void 0===t&&(t=0),Math.floor(Math.random()*(e-t))+t},t.vZero={x:0,y:0};t.vMul=function(e,t){return{x:e.x*t,y:e.y*t}};t.vDiv=function(e,n){var i=e.x,r=e.y;return t.vMul({x:i,y:r},1/n)};t.vAdd=function(e,t){return{x:e.x+t.x,y:e.y+t.y}};t.vSub=function(e,n){return t.vAdd(e,t.vMul(n,-1))};t.vLen=function(e){var t=e.x,n=e.y;return Math.sqrt(t*t+n*n)};t.vNorm=function(e){return t.vDiv(e,t.vLen(e)||1)};t.vToStr=function(e){var t=e.x,n=e.y;return t.toFixed(1)+","+n.toFixed(1)};t.coulombs=function(e,n,i){var r=t.vLen(t.vSub(e.p,n.p));if(0===r){var o=t.vec(2*Math.random()-1,2*Math.random()-1),u=e.m*n.m/Math.pow(10,2);return t.vMul(o,u*i)}o=t.vNorm(t.vSub(n.p,e.p)),u=e.m*n.m/Math.pow(r+.1,2);return t.vMul(o,u*i)};t.hookes=function(e,n,i,r,o){var u=t.vLen(t.vSub(e.p,n.p)),a=t.vNorm(t.vSub(e.p,n.p)),s=0;return u<i?s=i-u:u>r&&(s=r-u),t.vMul(a,o*s)};t.itrPhysics=function(e,i){var r=i.p,o=i.v,u=i.f,a=i.m,s=t.vDiv(u,a),c=e/1e3,l=t.vAdd(t.vMul(s,c),o),d=t.vAdd(t.vMul(l,c),r);return n(n({},i),{p:d,v:l,f:t.vec(0,0)})};t.totalEnergy=function(e){return e.reduce((function(e,n){var i=t.vLen(n.v);return e+.5*n.m*i*i}),0)}},40232:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateToast=t.toastMsg=t.AppToaster=void 0;var i=n(42272);t.AppToaster=function(){try{return i.Toaster.create({className:"app-toaster",position:i.Position.BOTTOM_RIGHT})}catch(e){return{}}}();t.toastMsg=function(e,n,i){return t.AppToaster.show({message:e,intent:n,timeout:i})};t.updateToast=function(e,n,i){return t.AppToaster.show({message:n,intent:i},e)}},12901:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.preventDefaultAnd=t.isLocal=t.fullTime=t.timeAgoFromDt=t.timeAgo=t.toString=t.intersectRect=t.isDefined=t.set=t.createOmap=t.toOmap=t.values=t.keys=t.entries=void 0;var o=n(52395),u=n(18265),a=r(n(61320));t.entries=function(e){return Object.keys(e).map((function(t){return[t,e[t]]}))};t.keys=function(e){return Object.keys(e)};t.values=function(e){return Object.keys(e).map((function(t){return e[t]}))};t.toOmap=function(e){return Array.from(e.entries()).reduce((function(e,t){var n,r=t[0],o=t[1];return i(i({},e),((n={})[r]=o,n))}),{})};t.createOmap=function(e){return void 0===e&&(e=[]),e.reduce((function(e,t){var n;return i(i({},e),((n={})[t[0]]=t[1],n))}),{})};t.set=function(e,t,n){e[t]=n};t.isDefined=function(e){return void 0!==e};t.intersectRect=function(e,t){var n=e.x+e.w,i=t.x+t.w;return!(t.x>n||i<e.x||t.y>e.y+e.h||t.y+t.h<e.y)};t.toString=function(e){var t=typeof e;if(""===e)return"(empty string)";if(o.isJsxValue(e))return"JSX Value";if(u.isStaticValueGroupedPart(e))return"Embedded Part";if(u.isEnvValue(e))return u.getEnvKeyFromValue(e);if("object"===t)try{var n=JSON.stringify(e);return"{}"===n?"Empty object":n}catch(i){return"Object (cannot stringify)"}return""+e};t.timeAgo=function(e){return a.default(new Date(e)).fromNow()};t.timeAgoFromDt=function(e){return a.default(Date.now()-e).fromNow()};t.fullTime=function(e){return a.default(new Date(e)).toString()};t.isLocal=function(){return location.href.includes(":300")};t.preventDefaultAnd=function(e){return function(t){t.preventDefault(),e(t)}}},17229:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.createEditorClient=void 0;var r=n(18265),o=n(14206),u=n(50208),a=n(19389),s=n(63726),c=r.debugLogger("runtime-editor-client");t.createEditorClient=function(e,t){var n=new URL(e),r=u.default(n.origin,{path:("/"===n.pathname?"":n.pathname)+"/socket.io/editor"});return r.emit("join-room-editor",t),{emitChange:function(e){r.emit(a.EventType.CHANGE_EVENT_NAME,e)},emitBreakpointsChange:function(e){r.emit(a.EventType.UPDATE_BREAKPOINTS,e)},onInputValueChange:function(e){return r.on(a.EventType.INPUT_VALUE_CHANGE,e),function(){return r.off(a.EventType.INPUT_VALUE_CHANGE,e)}},interceptInput:function(e){r.emit(a.EventType.INPUT_VALUE_OVERRIDE,e)},onOutputValueChange:function(e){return r.on(a.EventType.OUTPUT_VALUE_CHANGE,e),function(){return r.off(a.EventType.OUTPUT_VALUE_CHANGE,e)}},interceptOutput:function(e){r.emit(a.EventType.OUTPUT_VALUE_OVERRIDE,e)},onRuntimeReady:function(e){return r.on(a.EventType.RUNTIME_READY,e),function(){return r.off(a.EventType.RUNTIME_READY,e)}},onChangeAwk:function(e){return r.on(a.EventType.CHANGE_AWK,e),function(){return r.off(a.EventType.CHANGE_AWK,e)}},onChangeError:function(e){return r.on(a.EventType.CHANGE_ERROR,e),function(){return r.off(a.EventType.CHANGE_ERROR,e)}},onIsAlive:function(e){return r.on(a.EventType.IS_ALIVE,e),function(){return r.off(a.EventType.IS_ALIVE,e)}},emitInputValue:function(e,t){c("Emitting push input value to "+e+" %o",t),r.emit(a.EventType.PUSH_INPUT_VALUE,{pinId:e,value:t})},destroy:function(){r.disconnect(),a.enumToArray(a.EventType).forEach((function(e){return r.off(e)}))},onDisconnect:function(e){return r.on("disconnect",e),function(){return r.off("disconnect",e)}},debugInfo:function(){return"Remote debugger for "+e},onProcessingChange:function(e){return r.on(a.EventType.PROCESSING_CHANGE,e),function(){return r.off(a.EventType.PROCESSING_CHANGE,e)}},onInputsStateChange:function(e){return r.on(a.EventType.INPUTS_STATE_CHANGE,e),function(){return r.off(a.EventType.INPUTS_STATE_CHANGE,e)}},onPartError:function(e){return r.on(a.EventType.PART_ERROR,(function(t){var n=s.deserializeError(t.error);e(i(i({},t),{error:n}))})),function(){return r.off(a.EventType.PART_ERROR,e)}},onBatchedEvents:function(e){return r.on(a.EventType.EVENTS_BATCH,e),function(){return r.off(a.EventType.EVENTS_BATCH,e)}},requestState:function(){return o.default.get(e+"/state").then((function(e){return e.data.state}))},getHistory:function(t){return o.default.get(e+"/history",{params:{id:t.id,types:t.types,limit:t.limit}}).then((function(e){return e.data}))},clearHistory:function(){return o.default.delete(e+"/history").then((function(){}))},triggerPart:function(t,n){return o.default.post(e+"/trigger",{partId:t,inputs:n}).then((function(e){return e.data}))}}}},4278:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRuntimeClient=t.DEFAULT_DT_SCALE=void 0;var i=n(18265),r=n(63726),o=n(50208),u=n(19389),a=i.debugLogger("debugger-runtime-client");t.DEFAULT_DT_SCALE=1;t.createRuntimeClient=function(e,n){var s=new URL(e),c=o.io(s.origin,{path:("/"===s.pathname?"":s.pathname)+"/socket.io/runtime"});c.emit("join-room-runtime",n);new Set;c.on(u.EventType.UPDATE_BREAKPOINTS,(function(e){new Set(e)}));var l=Date.now(),d=function(){var e=Date.now()-l;return Math.round(e/t.DEFAULT_DT_SCALE)},p=i.cappedArrayDebounce((function(e){a("Emitting debounced batched events - "+e.length),c.emit(u.EventType.EVENTS_BATCH,e)}),100,200),f={onChange:function(e){return c.on(u.EventType.CHANGE_EVENT_NAME,e),function(){return c.off(u.EventType.CHANGE_EVENT_NAME,e)}},onInput:function(e){return c.on(u.EventType.PUSH_INPUT_VALUE,e),function(){return c.off(u.EventType.PUSH_INPUT_VALUE,e)}},emitInputChange:function(e){a("Emitting input change event of "+e.insId+":"+e.pinId);e.insId.split(".").length;p({type:u.RuntimeEventType.INPUT_CHANGE,id:e.insId+"."+e.pinId+".input",dt:d(),val:u.toString(e.val),t:Date.now()})},emitOutputChange:function(e){a("Emitting output change event of "+e.insId+":"+e.pinId+" -> [o%]",e.val),p({type:u.RuntimeEventType.OUTPUT_CHANGE,id:e.insId+"."+e.pinId+".output",dt:d(),val:u.toString(e.val),t:Date.now()})},emitProcessing:function(e){e.insId.split(".").length;p({type:u.RuntimeEventType.PROCESSING_CHANGE,id:e.insId,dt:d(),val:e.processing,t:Date.now()})},emitInputsStateChange:function(e){e.insId.split(".").length;p({type:u.RuntimeEventType.INPUTS_STATE_CHANGE,id:e.insId,dt:d(),val:e.inputs,t:Date.now()})},emitPartError:function(e){e.insId.split(".").length;a("Emitting error event of "+e.insId+", error - ["+e+"]");var t=r.serializeError(e);p({type:u.RuntimeEventType.ERROR,id:e.insId,dt:d(),val:t,t:Date.now()}),p({type:u.RuntimeEventType.OUTPUT_CHANGE,id:e.insId+"."+i.ERROR_PIN_ID+".output",dt:d(),val:u.toString(e),t:Date.now()})},emitRuntimeReady:function(){c.emit(u.EventType.RUNTIME_READY,{})},emitChangeAwk:function(){c.emit(u.EventType.CHANGE_AWK,{})},emitChangeError:function(e){c.emit(u.EventType.CHANGE_ERROR,{error:e})},emitIsAlive:function(e){c.emit(u.EventType.IS_ALIVE,{time:e})},destroy:function(){u.enumToArray(u.EventType).forEach((function(e){return c.off(e)})),c.disconnect()},onDisconnect:function(e){return c.on("disconnect",e),function(){return c.off("disconnect",e)}}};return new Promise((function(e,t){c.connected?e(f):(c.on("connect_error",(function(e){t("Socket connect error: "+e)})),c.on("connect",(function(){e(f)})))}))}},19389:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MINOR_EVENT_TYPES=t.MAJOR_EVENT_TYPES=t.RuntimeEventType=t.EventType=t.enumToArray=t.isNumber=t.isSimpleType=t.valuePreview=t.toString=void 0;var i=n(63726);t.toString=function(e){if("object"===typeof e){if(e instanceof Error)return JSON.stringify(i.serializeError(e));try{return JSON.stringify(e).substr(0,250)}catch(t){return"Object (cannot stringify)"}}return(""+e).substr(0,250)};t.valuePreview=function(e){return t.toString(e).substr(0,100)};t.isSimpleType=function(e){return["number","string","boolean"].includes(typeof e)};var r;t.isNumber=function(e){return!1===isNaN(Number(e))},t.enumToArray=function(e){return Object.keys(e).filter(t.isNumber).map((function(t){return e[t]}))},function(e){e.RUNTIME_READY="runtime-ready",e.CHANGE_EVENT_NAME="change",e.PUSH_INPUT_VALUE="push-input-value",e.CHANGE_AWK="live-change-awk",e.CHANGE_ERROR="live-change-error",e.IS_ALIVE="is-alive",e.UPDATE_BREAKPOINTS="update-breakpoints",e.INPUT_VALUE_OVERRIDE="input-value-override",e.OUTPUT_VALUE_OVERRIDE="output-value-override",e.INPUT_VALUE_CHANGE="input-value-changed",e.OUTPUT_VALUE_CHANGE="output-value-changed",e.PROCESSING_CHANGE="processing-changed",e.INPUTS_STATE_CHANGE="inputs-state-changed",e.PART_ERROR="part-error",e.EVENTS_BATCH="events-batch"}(t.EventType||(t.EventType={})),function(e){e.INPUT_CHANGE="i",e.OUTPUT_CHANGE="o",e.PROCESSING_CHANGE="pc",e.ERROR="err",e.INPUTS_STATE_CHANGE="isc"}(r=t.RuntimeEventType||(t.RuntimeEventType={})),t.MAJOR_EVENT_TYPES=[r.INPUT_CHANGE,r.OUTPUT_CHANGE,r.ERROR],t.MINOR_EVENT_TYPES=[r.PROCESSING_CHANGE,r.INPUTS_STATE_CHANGE]},75579:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(19389),t),r(n(17229),t),r(n(4278),t)},99186:function(e){e.exports={id:"Add",inputs:{n1:{mode:"required",type:"any"},n2:{mode:"required",type:"any"}},outputs:{r:{type:"any"}},customViewCode:'<%= isDefined(inputs.n1) ? inputs.n1 : "n1" %> + <%= isDefined(inputs.n2) ? inputs.n2 : "n2" %>',completionOutputs:["r"],fn:function(e,t,n){var i=e.n1,r=e.n2;t.r.next(i+r)}}},3429:function(e){e.exports={id:"Equals",inputs:{val:{mode:"required",type:"any"},compare:{mode:"required",type:"any"},transform:{mode:"required-if-connected",type:"any"}},outputs:{r:{type:"any"},else:{type:"any"}},customViewCode:"<% if (isDefined(inputs.compare)) { %>Equals <%- inputs.compare %> <% } else { %> Equals <% } %>",completionOutputs:["r","else"],fn:function(e,t,n){var i=e.val,r=e.compare,o=e.transform,u=t.r,a=void 0!==o?o:i;i===r?u.next(a):t.else.next(a)}}},52727:function(e){e.exports={id:"Subtract",inputs:{n1:{mode:"required",type:"any"},n2:{mode:"required",type:"any"}},outputs:{r:{type:"any"}},customViewCode:'<%= isDefined(inputs.n1) ? inputs.n1 : "n1" %> - <%= isDefined(inputs.n2) ? inputs.n2 : "n2" %>',completionOutputs:["r"],fn:function(e,t,n){var i=e.n1,r=e.n2;t.r.next(i-r)}}},42716:function(e,t,n){"use strict";n.d(t,{V:function(){return u}});var i=n(52685),r=n(27378),o=function(e){return r.createElement("li",{className:"log-item"},r.createElement("main",{className:"content"},e.value),r.createElement("aside",null,new Date(e.time).toLocaleTimeString()))},u=function(e){var t=r.useState([]),n=t[0],u=t[1];return r.useEffect((function(){e.output.subscribe((function(e){u((function(t){return[{value:e,time:Date.now()}].concat(t)}))}))}),[]),r.createElement("div",{className:"output-log"},r.createElement("header",null,"Output Log"," ",r.createElement("button",{className:"clear-btn button button--outline button--secondary button--sm",onClick:function(){return u([])}},"Clear")),r.createElement("main",null,r.createElement("ul",null,n.map((function(e,t){return r.createElement(o,(0,i.Z)({},e,{key:t}))}))),0===n.length?r.createElement("div",{className:"empty-state"},"Nothing to show. Interact with the example to emit some outputs!"):null))}},38941:function(e,t,n){"use strict";n.d(t,{I:function(){return _}});var i=n(27378),r=n(67651),o=n(59821),u=n(38944),a=n(96149),s=n(18265),c={VMScript:function(e){this.script=e},VM:function(){function e(e){this.context=e}return e.prototype.run=function(e){var t=(0,s.okeys)(this.context.sandbox),n=Object.values(this.context.sandbox);Function.apply(void 0,t.concat([e.script])).apply(void 0,n)},e}()},l=n(81884),d=n(44305),p=n(13127),f=200,v=n(75579),m=n(60512),h=n(1706),y=n(12902);n.g.vm2=c;var g,I,b=(I=new Map,{requestHistory:(g=(0,p.Z)((0,d.Z)().mark((function e(t,n,i){var r,o,u;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t+"."+n+"."+i,o=I.get(r)||{total:0,lastSamples:[]},u=o.lastSamples.slice(0,f),e.abrupt("return",Object.assign({},o,{lastSamples:u}));case 4:case"end":return e.stop()}}),e)}))),function(e,t,n){return g.apply(this,arguments)}),addEvents:function(e){e.forEach((function(e){var t=I.get(e.id)||{total:0,lastSamples:[]};t.lastSamples.unshift(e),t.lastSamples.length>f&&t.lastSamples.splice(f,t.lastSamples.length-f),t.total++,I.set(e.id,t)}))}}),P=function(e){var t,n,i=e.flow,o=e.output,u=e.inputs,a=e.onError,c=e.debugDelay,l=function(e,t){return{onInput:function(n){var i=[{type:v.RuntimeEventType.INPUT_CHANGE,t:n.time,id:n.insId+"."+n.pinId+".input",dt:0,val:n.val}];e.addEvents(i),t.addEvents(i)},onOutput:function(n){var i=[{type:v.RuntimeEventType.OUTPUT_CHANGE,t:n.time,id:n.insId+"."+n.pinId+".output",dt:0,val:n.val}];t.addEvents(i),e.addEvents(i)},onInputsStateChange:function(t){e.addEvents([{type:v.RuntimeEventType.INPUTS_STATE_CHANGE,t:Date.now(),id:""+t.insId,dt:0,val:t.inputs}])},onProcessing:function(t){e.addEvents([{type:v.RuntimeEventType.PROCESSING_CHANGE,t:Date.now(),id:""+t.insId,dt:0,val:t.processing}])},onError:function(t){e.addEvents([{type:v.RuntimeEventType.ERROR,t:Date.now(),id:""+t.insId,dt:0,val:t.message}])}}}(e.player,b);l.debugDelay=c;var d=(0,s.keys)(i.main.outputs)[0];return(0,s.execute)({part:i.main,inputs:u,outputs:(t={},t[d]=o,t),partsRepo:Object.assign({},i.dependencies,(n={},n[i.main.id]=i.main,n)),_debugger:l,onBubbleError:function(e){a(e)},extraContext:{PubSub:r}})},_=function(e){var t=e.flowProps,n=t.flow,r=t.inputs,c=t.output,d=(0,i.useState)(e.initWidth||500),p=d[0],f=d[1],v=(0,i.useState)(e.defaultDelay||0),g=v[0],I=v[1],_=(0,i.useState)(!1),C=_[0],E=_[1],O=(0,i.useRef)((0,a.createRuntimePlayer)(e.flowProps.flow.part.id)),j=(0,i.useState)(e.flowProps.resolvedFlow),w=j[0],x=j[1],T=(0,i.useState)({flow:n,boardData:{viewPort:{pos:{x:0,y:0},zoom:1},lastMousePos:{x:0,y:0},selected:[]}}),S=T[0],D=T[1];(0,i.useEffect)((function(){x((function(e){return Object.assign({},e,{main:S.flow.part})}))}),[S.flow.part]);var N={state:S,resolvedRepoWithDeps:w,onChangeEditorState:D,onInspectPin:s.noop,onRequestHistory:b.requestHistory,hideTemplatingTips:!0,onImportPart:s.noop};(0,i.useEffect)((function(){O.current.start()}),[]),(0,i.useEffect)((function(){var t=P({flow:w,output:c,inputs:r,onError:s.noop,debugDelay:g,player:O.current}),n=e.flowProps.output.subscribe((function(){return E(!0)}));return function(){t(),n.unsubscribe()}}),[g,w]);var k=(0,i.useCallback)((function(e,t){var n=t.size;f(n.width),D((function(e){var t=document.querySelector(".flow-container"),n=t?t.getBoundingClientRect():{width:500,height:500};return(0,y.ZP)(e,(function(e){e.boardData.viewPort=(0,a.fitViewPortToPart)(e.flow.part,w.dependencies,n)}))}))}),[]),R=i.createElement("div",{className:"delay-container"},i.createElement("input",{type:"range",id:"volume",name:"delay",value:g,step:"100",min:"0",max:"300",onChange:function(e){return I(Number(e.target.value))}}),i.createElement("label",{htmlFor:"volume"},"Debug Delay: ",g,"ms"));return i.createElement(o.Z,{title:e.meta.title+" | Playground",description:"Flyde Playground - "+e.meta.title+" example"},i.createElement("header",{className:(0,u.Z)("hero hero--primary",m.Z.heroBanner)},i.createElement("div",{className:"container"},i.createElement("h2",{className:"hero__title"},"Flyde Playground"),i.createElement("p",{className:"hero__subtitle"},"Flyde's playground allows you to see how Flyde looks and feels like. Choose one of the examples below to get started. Feel free to play around with the canvas and see how your changes affect the result!"),i.createElement("ul",{className:"examples__menu"},i.createElement("li",null,i.createElement(l.Z,{to:"/playground/hello"},"Hello World")," "),i.createElement("li",null,i.createElement(l.Z,{to:"/playground/debounce-throttling"},"Debounce vs. Throttling")),i.createElement("li",null,i.createElement(l.Z,{to:"/playground/react-counter"},"React Counter")),i.createElement("li",null,i.createElement(l.Z,{to:"/playground/fibonacci"},"Fibonacci Sequence"))))),i.createElement("div",{className:"playground-container"},i.createElement("header",null,i.createElement("h2",{className:"playground-title"},e.meta.title),i.createElement("div",{className:"playground-description"},e.meta.description),C?i.createElement(i.Fragment,null,i.createElement("hr",null),i.createElement("div",{className:"playground-extra"},e.extraInfo||e.meta.extraInfo)):null,e.prefixComponent),i.createElement("div",{className:"playground"},i.createElement("div",{className:"flow-container"},!0!==e.hideDelay?R:null,i.createElement(a.FlowEditor,N)),i.createElement(h.Resizable,{height:0,width:p,onResize:k,axis:"x",handle:i.createElement("div",{className:"handle"}),resizeHandles:["w"]},i.createElement("div",{className:"output-container",style:{flexBasis:p}},e.children)))))}},44880:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var i=n(27378),r=n(18265),o=n(38941),u={resolvedFlow:{main:{instances:[{pos:{x:-249.1657495117188,y:-105.87720733642578},id:"Equals-364",inputConfig:{compare:{mode:"static",value:0}},partId:"Equals"},{pos:{x:-75.12186523437501,y:22.182240905761716},id:"Equals-364-d95",inputConfig:{compare:{mode:"static",value:1}},visibleInputs:["val","compare"],partId:"Equals"},{pos:{x:29.675939941406256,y:398.8068879699707},id:"Add-539",inputConfig:{},partId:"Add"},{pos:{x:-34.96145751953125,y:161.11758544921872},id:"Subtract-210",inputConfig:{n2:{mode:"static",value:1}},visibleInputs:["n1","n2"],partId:"Subtract"},{pos:{x:109.47726318359378,y:158.06905105590818},id:"Subtract-210-d215",inputConfig:{n2:{mode:"static",value:2}},visibleInputs:["n1","n2"],partId:"Subtract"},{pos:{x:-49.93635498046875,y:267.77435180664065},id:"Fibonacci-261",inputConfig:{},partId:"Fibonacci"},{pos:{x:97.69393920898438,y:268.03501136779784},id:"Fibonacci-379",inputConfig:{},partId:"Fibonacci"}],connections:[{from:{insId:"__this",pinId:"n"},to:{insId:"Equals-364",pinId:"val"}},{from:{insId:"Equals-364",pinId:"else"},to:{insId:"Equals-364-d95",pinId:"val"}},{from:{insId:"Equals-364-d95",pinId:"r"},to:{insId:"__this",pinId:"result"}},{from:{insId:"Equals-364",pinId:"r"},to:{insId:"__this",pinId:"result"}},{from:{insId:"Add-539",pinId:"r"},to:{insId:"__this",pinId:"result"}},{from:{insId:"Equals-364-d95",pinId:"else"},to:{insId:"Subtract-210",pinId:"n1"}},{from:{insId:"Equals-364-d95",pinId:"else"},to:{insId:"Subtract-210-d215",pinId:"n1"}},{from:{insId:"Subtract-210",pinId:"r"},to:{insId:"Fibonacci-261",pinId:"n"}},{from:{insId:"Fibonacci-261",pinId:"result"},to:{insId:"Add-539",pinId:"n1"}},{from:{insId:"Subtract-210-d215",pinId:"r"},to:{insId:"Fibonacci-379",pinId:"n"}},{from:{insId:"Fibonacci-379",pinId:"result"},to:{insId:"Add-539",pinId:"n2"}}],id:"Fibonacci",inputs:{n:{mode:"required",type:"any"}},outputs:{result:{type:"any"}},inputsPosition:{n:{x:-205.84801890123222,y:-182.4127543301569}},outputsPosition:{result:{x:-135.1549331794976,y:533.2568633719678}},completionOutputs:["result"]},dependencies:{Equals:{id:"Equals",inputs:{val:{mode:"required",type:"any"},compare:{mode:"required",type:"any"},transform:{mode:"required-if-connected",type:"any"}},outputs:{r:{type:"any"},else:{type:"any"}},customViewCode:"<% if (isDefined(inputs.compare)) { %>Equals <%- inputs.compare %> <% } else { %> Equals <% } %>",completionOutputs:["r","else"],fn:n(3429).fn,importPath:"/Users/gabrielgrinberg/projects/flyde/stdlib/parts/Equals.flyde.js",part:{id:"Equals",inputs:{val:{mode:"required",type:"any"},compare:{mode:"required",type:"any"},transform:{mode:"required-if-connected",type:"any"}},outputs:{r:{type:"any"},else:{type:"any"}},customViewCode:"<% if (isDefined(inputs.compare)) { %>Equals <%- inputs.compare %> <% } else { %> Equals <% } %>",completionOutputs:["r","else"],fn:n(3429).fn,importPath:"/Users/gabrielgrinberg/projects/flyde/stdlib/parts/Equals.flyde.js"}},Add:{id:"Add",inputs:{n1:{mode:"required",type:"any"},n2:{mode:"required",type:"any"}},outputs:{r:{type:"any"}},customViewCode:'<%= isDefined(inputs.n1) ? inputs.n1 : "n1" %> + <%= isDefined(inputs.n2) ? inputs.n2 : "n2" %>',completionOutputs:["r"],fn:n(99186).fn,importPath:"/Users/gabrielgrinberg/projects/flyde/stdlib/parts/Add.flyde.js",part:{id:"Add",inputs:{n1:{mode:"required",type:"any"},n2:{mode:"required",type:"any"}},outputs:{r:{type:"any"}},customViewCode:'<%= isDefined(inputs.n1) ? inputs.n1 : "n1" %> + <%= isDefined(inputs.n2) ? inputs.n2 : "n2" %>',completionOutputs:["r"],fn:n(99186).fn,importPath:"/Users/gabrielgrinberg/projects/flyde/stdlib/parts/Add.flyde.js"}},Subtract:{id:"Subtract",inputs:{n1:{mode:"required",type:"any"},n2:{mode:"required",type:"any"}},outputs:{r:{type:"any"}},customViewCode:'<%= isDefined(inputs.n1) ? inputs.n1 : "n1" %> - <%= isDefined(inputs.n2) ? inputs.n2 : "n2" %>',completionOutputs:["r"],fn:n(52727).fn,importPath:"/Users/gabrielgrinberg/projects/flyde/stdlib/parts/Subtract.flyde.js",part:{id:"Subtract",inputs:{n1:{mode:"required",type:"any"},n2:{mode:"required",type:"any"}},outputs:{r:{type:"any"}},customViewCode:'<%= isDefined(inputs.n1) ? inputs.n1 : "n1" %> - <%= isDefined(inputs.n2) ? inputs.n2 : "n2" %>',completionOutputs:["r"],fn:n(52727).fn,importPath:"/Users/gabrielgrinberg/projects/flyde/stdlib/parts/Subtract.flyde.js"}}}},flow:{imports:{"@flyde/stdlib":["Equals","Subtract","Add","Merge","HtmlH1"]},part:{instances:[{pos:{x:-249.1657495117188,y:-105.87720733642578},id:"Equals-364",inputConfig:{compare:{mode:"static",value:0}},partId:"Equals"},{pos:{x:-75.12186523437501,y:22.182240905761716},id:"Equals-364-d95",inputConfig:{compare:{mode:"static",value:1}},visibleInputs:["val","compare"],partId:"Equals"},{pos:{x:29.675939941406256,y:398.8068879699707},id:"Add-539",inputConfig:{},partId:"Add"},{pos:{x:-34.96145751953125,y:161.11758544921872},id:"Subtract-210",inputConfig:{n2:{mode:"static",value:1}},visibleInputs:["n1","n2"],partId:"Subtract"},{pos:{x:109.47726318359378,y:158.06905105590818},id:"Subtract-210-d215",inputConfig:{n2:{mode:"static",value:2}},visibleInputs:["n1","n2"],partId:"Subtract"},{pos:{x:-49.93635498046875,y:267.77435180664065},id:"Fibonacci-261",inputConfig:{},partId:"Fibonacci"},{pos:{x:97.69393920898438,y:268.03501136779784},id:"Fibonacci-379",inputConfig:{},partId:"Fibonacci"}],connections:[{from:{insId:"__this",pinId:"n"},to:{insId:"Equals-364",pinId:"val"}},{from:{insId:"Equals-364",pinId:"else"},to:{insId:"Equals-364-d95",pinId:"val"}},{from:{insId:"Equals-364-d95",pinId:"r"},to:{insId:"__this",pinId:"result"}},{from:{insId:"Equals-364",pinId:"r"},to:{insId:"__this",pinId:"result"}},{from:{insId:"Add-539",pinId:"r"},to:{insId:"__this",pinId:"result"}},{from:{insId:"Equals-364-d95",pinId:"else"},to:{insId:"Subtract-210",pinId:"n1"}},{from:{insId:"Equals-364-d95",pinId:"else"},to:{insId:"Subtract-210-d215",pinId:"n1"}},{from:{insId:"Subtract-210",pinId:"r"},to:{insId:"Fibonacci-261",pinId:"n"}},{from:{insId:"Fibonacci-261",pinId:"result"},to:{insId:"Add-539",pinId:"n1"}},{from:{insId:"Subtract-210-d215",pinId:"r"},to:{insId:"Fibonacci-379",pinId:"n"}},{from:{insId:"Fibonacci-379",pinId:"result"},to:{insId:"Add-539",pinId:"n2"}}],id:"Fibonacci",inputs:{n:{mode:"required",type:"any"}},outputs:{result:{type:"any"}},inputsPosition:{n:{x:-205.84801890123222,y:-182.4127543301569}},outputsPosition:{result:{x:-135.1549331794976,y:533.2568633719678}},completionOutputs:["result"]}}},a=n(42716),s={title:"Fibonacci Sequence",description:'This example showcases a classical recursion - the Fibonacci sequence. On numbers higher than 1, the "Fibonacci" part calls itself recursively!',key:"fibo",extraInfo:"Cool right? everything is editable, so try changing the algorithm and see how it affects the end result!"};function c(){var e,t,n=(0,i.useState)(4),c=n[0],l=(n[1],(0,i.useState)(5)),d=(l[0],l[1]),p=(0,i.useRef)((e=function(e){return d(e)},(t=(0,r.dynamicOutput)()).subscribe(e),t)),f=(0,i.useRef)({n:(0,r.dynamicPartInput)()}),v=(0,i.useState)({flow:u.flow,resolvedFlow:u.resolvedFlow,inputs:f.current,output:p.current}),m=v[0],h=(v[1],(0,i.useCallback)((function(e){return function(){-1===e&&(e=Number(prompt("N?")),isNaN(e)||e<0)?alert("Invalid input. Please try again using a positive integer"):(e<=8||confirm("This is an unoptimized Fib. calculator and larger numbers might take a long time to calculate. Are you sure?"))&&f.current.n.subject.next(e)}}),[c])),y=i.createElement("div",null,i.createElement("button",{className:"fib-btn button button--outline button--primary button-sm",onClick:h(0)},"Calc Fib(0)"),i.createElement("button",{className:"fib-btn button button--outline button--primary button-sm",onClick:h(1)},"Calc Fib(1)"),i.createElement("button",{className:"fib-btn button button--outline button--primary button-sm",onClick:h(3)},"Calc Fib(3)"),i.createElement("button",{className:"fib-btn button button--outline button--primary button-sm",onClick:h(5)},"Calc Fib(5)"),i.createElement("button",{className:"fib-btn button button--outline button--primary button-sm",onClick:h(-1)},"Calc Fib(N)"));return i.createElement(o.I,{meta:s,flowProps:m,defaultDelay:100,prefixComponent:y},i.createElement(a.V,{output:p.current}))}},60512:function(e,t){"use strict";t.Z={heroBanner:"heroBanner_qdFl",buttons:"buttons_AeoN","project-editor":"project-editor_XBpx"}},95126:function(e,t,n){var i={"./af":1009,"./af.js":1009,"./ar":88769,"./ar-dz":23739,"./ar-dz.js":23739,"./ar-kw":93745,"./ar-kw.js":93745,"./ar-ly":99576,"./ar-ly.js":99576,"./ar-ma":67408,"./ar-ma.js":67408,"./ar-sa":48781,"./ar-sa.js":48781,"./ar-tn":87856,"./ar-tn.js":87856,"./ar.js":88769,"./az":2030,"./az.js":2030,"./be":56476,"./be.js":56476,"./bg":25304,"./bg.js":25304,"./bm":48125,"./bm.js":48125,"./bn":34,"./bn-bd":29835,"./bn-bd.js":29835,"./bn.js":34,"./bo":64082,"./bo.js":64082,"./br":8317,"./br.js":8317,"./bs":93107,"./bs.js":93107,"./ca":68272,"./ca.js":68272,"./cs":98567,"./cs.js":98567,"./cv":61583,"./cv.js":61583,"./cy":10076,"./cy.js":10076,"./da":31760,"./da.js":31760,"./de":8973,"./de-at":63214,"./de-at.js":63214,"./de-ch":74728,"./de-ch.js":74728,"./de.js":8973,"./dv":54053,"./dv.js":54053,"./el":7499,"./el.js":7499,"./en-au":67876,"./en-au.js":67876,"./en-ca":47010,"./en-ca.js":47010,"./en-gb":34239,"./en-gb.js":34239,"./en-ie":99830,"./en-ie.js":99830,"./en-il":28438,"./en-il.js":28438,"./en-in":25322,"./en-in.js":25322,"./en-nz":43264,"./en-nz.js":43264,"./en-sg":55449,"./en-sg.js":55449,"./eo":39486,"./eo.js":39486,"./es":32430,"./es-do":16310,"./es-do.js":16310,"./es-mx":27038,"./es-mx.js":27038,"./es-us":73099,"./es-us.js":73099,"./es.js":32430,"./et":34975,"./et.js":34975,"./eu":87063,"./eu.js":87063,"./fa":68073,"./fa.js":68073,"./fi":50957,"./fi.js":50957,"./fil":8764,"./fil.js":8764,"./fo":81775,"./fo.js":81775,"./fr":74179,"./fr-ca":14306,"./fr-ca.js":14306,"./fr-ch":73791,"./fr-ch.js":73791,"./fr.js":74179,"./fy":47014,"./fy.js":47014,"./ga":46911,"./ga.js":46911,"./gd":62958,"./gd.js":62958,"./gl":87344,"./gl.js":87344,"./gom-deva":33161,"./gom-deva.js":33161,"./gom-latn":35798,"./gom-latn.js":35798,"./gu":68485,"./gu.js":68485,"./he":27917,"./he.js":27917,"./hi":52159,"./hi.js":52159,"./hr":95842,"./hr.js":95842,"./hu":30005,"./hu.js":30005,"./hy-am":51312,"./hy-am.js":51312,"./id":60781,"./id.js":60781,"./is":64101,"./is.js":64101,"./it":43467,"./it-ch":4759,"./it-ch.js":4759,"./it.js":43467,"./ja":44164,"./ja.js":44164,"./jv":70079,"./jv.js":70079,"./ka":57036,"./ka.js":57036,"./kk":92022,"./kk.js":92022,"./km":63418,"./km.js":63418,"./kn":43655,"./kn.js":43655,"./ko":30986,"./ko.js":30986,"./ku":91902,"./ku.js":91902,"./ky":4604,"./ky.js":4604,"./lb":99026,"./lb.js":99026,"./lo":20537,"./lo.js":20537,"./lt":22288,"./lt.js":22288,"./lv":1495,"./lv.js":1495,"./me":60690,"./me.js":60690,"./mi":2571,"./mi.js":2571,"./mk":93959,"./mk.js":93959,"./ml":97225,"./ml.js":97225,"./mn":88,"./mn.js":88,"./mr":46622,"./mr.js":46622,"./ms":11070,"./ms-my":48899,"./ms-my.js":48899,"./ms.js":11070,"./mt":63931,"./mt.js":63931,"./my":95393,"./my.js":95393,"./nb":4274,"./nb.js":4274,"./ne":8914,"./ne.js":8914,"./nl":33114,"./nl-be":68479,"./nl-be.js":68479,"./nl.js":33114,"./nn":4513,"./nn.js":4513,"./oc-lnc":46549,"./oc-lnc.js":46549,"./pa-in":28264,"./pa-in.js":28264,"./pl":32848,"./pl.js":32848,"./pt":90899,"./pt-br":55077,"./pt-br.js":55077,"./pt.js":90899,"./ro":92512,"./ro.js":92512,"./ru":21753,"./ru.js":21753,"./sd":16840,"./sd.js":16840,"./se":78362,"./se.js":78362,"./si":50464,"./si.js":50464,"./sk":66324,"./sk.js":66324,"./sl":41963,"./sl.js":41963,"./sq":53039,"./sq.js":53039,"./sr":93454,"./sr-cyrl":10466,"./sr-cyrl.js":10466,"./sr.js":93454,"./ss":95158,"./ss.js":95158,"./sv":28859,"./sv.js":28859,"./sw":57594,"./sw.js":57594,"./ta":26915,"./ta.js":26915,"./te":15677,"./te.js":15677,"./tet":92154,"./tet.js":92154,"./tg":74098,"./tg.js":74098,"./th":89071,"./th.js":89071,"./tk":49381,"./tk.js":49381,"./tl-ph":1869,"./tl-ph.js":1869,"./tlh":92346,"./tlh.js":92346,"./tr":71483,"./tr.js":71483,"./tzl":30266,"./tzl.js":30266,"./tzm":33138,"./tzm-latn":32960,"./tzm-latn.js":32960,"./tzm.js":33138,"./ug-cn":29456,"./ug-cn.js":29456,"./uk":50805,"./uk.js":50805,"./ur":61127,"./ur.js":61127,"./uz":29628,"./uz-latn":80840,"./uz-latn.js":80840,"./uz.js":29628,"./vi":56962,"./vi.js":56962,"./x-pseudo":49257,"./x-pseudo.js":49257,"./yo":62423,"./yo.js":62423,"./zh-cn":61002,"./zh-cn.js":61002,"./zh-hk":6046,"./zh-hk.js":6046,"./zh-mo":36903,"./zh-mo.js":36903,"./zh-tw":24710,"./zh-tw.js":24710};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=o,e.exports=r,r.id=95126},91764:function(){}}]);