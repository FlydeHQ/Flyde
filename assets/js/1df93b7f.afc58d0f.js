(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3237],{19121:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cappedArrayDebounce=void 0;t.cappedArrayDebounce=function(e,t,n,o){void 0===o&&(o=500);let i=[],s=null,r=null;return{addItem:a=>{clearTimeout(s),i.push(a),r||(r=setTimeout((()=>{e(i),clearTimeout(s),r=null}),o)),i.length>=n?(e(i),clearTimeout(r),r=null,i=[]):s=setTimeout((()=>{e(i),clearTimeout(r),r=null,i=[]}),t)},flush:()=>{i.length&&(e(i),i=[],clearTimeout(r))},pendingItems:()=>i.length}}},59792:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.dataShaper=t.DataShapeType=void 0,function(e){e[e.STRING=0]="STRING",e[e.NUMBER=1]="NUMBER",e[e.BOOLEAN=2]="BOOLEAN",e[e.ARRAY=3]="ARRAY",e[e.OBJECT=4]="OBJECT",e[e.NULL=5]="NULL",e[e.UNSUPPORTED=6]="UNSUPPORTED"}(n=t.DataShapeType||(t.DataShapeType={}));const o={string:n.STRING,number:n.NUMBER,boolean:n.BOOLEAN,object:n.OBJECT,array:n.ARRAY,null:n.NULL,symbol:n.UNSUPPORTED,undefined:n.UNSUPPORTED,function:n.UNSUPPORTED,bigint:n.UNSUPPORTED};t.dataShaper=function(e,n,i){void 0===n&&(n=5),void 0===i&&(i=5);const s=null===(r=e)?"null":typeof r;var r,a;if("object"===s){if(Array.isArray(e))return n>1?e.filter(((e,t)=>t<i)).map((e=>(0,t.dataShaper)(e,n-1,i))):o.array;if(n>1){const o={};for(const s in e)o[s]=(0,t.dataShaper)(e[s],n-1,i);return a=o,Object.keys(a).sort().reduce(((e,t)=>(e[t]=a[t],e)),{})}return o.object}return o[s]}},23046:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.debugLogger=void 0;const i=(0,o(n(55899)).default)("flyde");t.debugLogger=e=>i.extend(e)},24331:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fullInsIdPath=void 0,t.fullInsIdPath=function(e,t){if(!e)throw new Error("insId is not defined");return t?`${t}.${e}`:e}},34459:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hashFlow=t.hashNode=void 0;const i=o(n(68805)),s=n(30292),r=e=>(0,i.default)(e);t.hashNode=function(e,t){void 0===t&&(t=!0);const{id:n,completionOutputs:o,reactiveInputs:i,inputs:a,outputs:l}=e,u={id:n,completionOutputs:o,reactiveInputs:i,inputs:a,outputs:l};if((0,s.isVisualNode)(e)){const{instances:n,connections:o,inputsPosition:i,outputsPosition:s}=e,a=n.map((e=>{const{pos:t,...n}=e;return n})),l=t?{}:{inputsPosition:i,outputsPosition:s},d=t?a:n;d.sort(((e,t)=>e.id.localeCompare(t.id)));const c=[...o];c.sort(((e,t)=>{const n=`${e.from.insId}.${e.from.pinId}`,o=`${t.from.insId}.${t.from.pinId}`;return n.localeCompare(o)}));const p=JSON.stringify({instancesToUse:d,conns:c,...u,maybeIoPos:l});return r(p)}throw new Error("Hashing code nodes unsupported")};t.hashFlow=e=>{const{node:n,imports:o}=e,i=(0,t.hashNode)(n,!1),s=Object.entries(null!=o?o:{}).sort(((e,t)=>{let[n]=e,[o]=t;return n.localeCompare(o)})).map((e=>{let[t,n]=e;return[t,n.sort()]})).reduce(((e,t)=>{let[n,o]=t;return{...e,[n]:o}}),{}),a=JSON.stringify(s);return r(i+a)}},86873:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.DepGraph=void 0,i(n(3172),t),i(n(59962),t),i(n(23046),t),i(n(19121),t),i(n(59962),t),i(n(34459),t),i(n(39043),t),i(n(59792),t),i(n(24331),t),t.DepGraph=n(60359).DepGraph},3172:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.testDataCreator=void 0;t.testDataCreator=e=>function(t){void 0===t&&(t={});return{..."function"==typeof e?e():e,...t}}},59962:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.simplePluralize=t.eventually=t.delay=t.noop=t.removeDupes=t.ensure=t.isOptionalType=t.callFnOrFnPromise=t.isPromise=t.isDefined=t.containsAll=t.shuffle=t.randomInts=t.repeat=t.pickRandom=t.randomPos=t.randomInt=t.pickSecond=t.pickFirst=t.fromEntries=t.entries=t.okeys=t.values=t.keys=t.filterOMap=t.mapOMap=t.middlePos=t.calcCenter=t.intersectRect=void 0;t.intersectRect=(e,t)=>{const n=e.x+e.w,o=t.x+t.w;return!(t.x>n||o<e.x||t.y>e.y+e.h||t.y+t.h<e.y)};t.calcCenter=e=>{let{w:t,h:n,x:o,y:i}=e;return{x:o+t/2,y:i+n/2}};t.middlePos=(e,t)=>({x:(e.x+t.x)/2,y:(e.y+t.y)/2});t.mapOMap=(e,n)=>(0,t.entries)(e).map((e=>{let[t,o]=e;return[t,n(t,o)]})).reduce(((e,t)=>{let[n,o]=t;return{...e,[n]:o}}),{});t.filterOMap=(e,n)=>(0,t.entries)(e).filter((e=>{let[t,o]=e;return n(t,o)})).reduce(((e,t)=>{let[n,o]=t;return{...e,[n]:o}}),{});t.keys=e=>Object.keys(e);t.values=e=>Object.values(e),t.okeys=t.keys;t.entries=e=>(0,t.okeys)(e).map((t=>[t,e[t]]));t.fromEntries=e=>e.reduce(((e,t)=>{let[n,o]=t;return{...e,[n]:o}}),{});t.pickFirst=e=>e[0];t.pickSecond=e=>e[1];t.randomInt=function(e,t){void 0===t&&(t=0);const n=Math.random();return t+Math.floor((e-t)*n)};t.randomPos=function(e,n){void 0===e&&(e=1e3),void 0===n&&(n=0);return{x:(0,t.randomInt)(e,n),y:(0,t.randomInt)(e,n)}};t.pickRandom=e=>e[(0,t.randomInt)(e.length)];t.repeat=(e,t)=>"x".repeat(e).split("").map(((e,n)=>t(n)));t.randomInts=function(e,n,o){return void 0===n&&(n=100),void 0===o&&(o=0),(0,t.repeat)(e,(()=>(0,t.randomInt)(n,o)))};t.shuffle=e=>{const t=[...e];for(let n=t.length-1;n>=0;n--){const e=Math.floor(Math.random()*(n+1));[t[n],t[e]]=[t[e],t[n]]}return t};t.containsAll=(e,t)=>t.every((t=>e.includes(t)));t.isDefined=e=>void 0!==e;t.isPromise=e=>e&&"function"==typeof e.then;t.callFnOrFnPromise=(e,n)=>{if(!(0,t.isDefined)(e))return;const o=e=>{try{e()}catch(t){console.error(n,t)}};"function"==typeof e?o(e):Promise.resolve(e).then((e=>{"function"==typeof e&&o(e)}))};t.isOptionalType=e=>/\?$/.test(e);t.ensure=(e,t)=>{if(void 0===e)throw new Error(t||"Undefined value passed");return e};t.removeDupes=e=>Array.from(new Set(e));t.noop=()=>{};t.delay=e=>new Promise((t=>setTimeout(t,e)));t.eventually=async function(e,n,o,i){if(void 0===n&&(n=1e3),void 0===o&&(o=100),void 0===i&&(i=new Set),n<0){const e=Array.from(i).reduce(((e,t,n)=>`${e}\n\t\t${n+1}. ${t}`),"");throw new Error(`[Eventually timeout exceeded after: timeout with error]: ${e}`)}try{await e()}catch(s){const r=Date.now();await(0,t.delay)(o);const a=Date.now()-r;return i.add(null==s?void 0:s.message),(0,t.eventually)(e,n-a,o,i)}},t.simplePluralize=function(e,t){return`${e} ${t}${1!==e?"s":""}`}},39043:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compileObjectTemplate=t.compileStringTemplate=void 0;t.compileStringTemplate=(e,t)=>{let n=decodeURIComponent(e);return Object.keys(t).forEach((e=>{const o=t[e],i=new RegExp("\\$\\{"+e+"\\}","g");n=n.replace(i,o)})),n};t.compileObjectTemplate=(e,t)=>{let n=decodeURIComponent(e);return Object.keys(t).forEach((e=>{const o=t[e],i=JSON.stringify(o),s=new RegExp('"\\$\\$\\{'+e+'\\}"',"g"),r=new RegExp("\\$\\{"+e+"\\}","g"),a="string"==typeof o?o.replace(/"/g,((e,t,n)=>"\\"!==n[t-1]?'\\"':n[t])):o;n=n.replace(s,i).replace(r,a).replace(/\n/g,"\\n")})),JSON.parse(n)}},69150:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.connection=t.connectionData=t.connectionDataEquals=t.connectionNodeEquals=t.connectionNode=t.externalConnectionNode=t.isInternalConnection=t.isExternalConnection=t.isInternalConnectionNode=t.isExternalConnectionNode=t.getNodeOutputs=t.getOutputName=t.getInputName=t.getNodeInputs=t.TRIGGER_PIN_ID=t.ERROR_PIN_ID=t.THIS_INS_ID=void 0;const o=n(30292);t.THIS_INS_ID="__this",t.ERROR_PIN_ID="__error",t.TRIGGER_PIN_ID="__trigger";t.getNodeInputs=e=>({...e.inputs,[t.TRIGGER_PIN_ID]:(0,o.nodeInput)()});t.getInputName=e=>e===t.TRIGGER_PIN_ID?"Trigger Node":e;t.getOutputName=e=>e===t.ERROR_PIN_ID?"Error":e;t.getNodeOutputs=e=>({...e.outputs,[t.ERROR_PIN_ID]:(0,o.nodeOutput)()});t.isExternalConnectionNode=e=>e&&e.insId===t.THIS_INS_ID;t.isInternalConnectionNode=e=>e.insId!==t.THIS_INS_ID;t.isExternalConnection=e=>{let{from:n,to:o}=e;return(0,t.isExternalConnectionNode)(n)||(0,t.isExternalConnectionNode)(o)};t.isInternalConnection=e=>!(0,t.isExternalConnection)(e);t.externalConnectionNode=e=>({insId:t.THIS_INS_ID,pinId:e});t.connectionNode=(e,t)=>({insId:e,pinId:t});t.connectionNodeEquals=(e,t)=>e.insId===t.insId&&e.pinId===t.pinId;t.connectionDataEquals=(e,n)=>!(!e||!n)&&((0,t.connectionNodeEquals)(e.from,n.from)&&(0,t.connectionNodeEquals)(e.to,n.to)),t.connectionData=function(e,n,o){const i="string"==typeof e?e.split("."):e,s="string"==typeof n?n.split("."):n;if(i.length>2||s.length>2)throw new Error(`invalid source or target to connection data - ${e} / ${n}`);return{from:2===i.length?(0,t.connectionNode)(i[0],i[1]):(0,t.externalConnectionNode)(i[0]),to:2===s.length?(0,t.connectionNode)(s[0],s[1]):(0,t.externalConnectionNode)(s[0]),delayed:o}};t.connection=function(e,t,n){return void 0===n&&(n=!1),{from:e,to:t,delayed:n}}},6775:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.connect=void 0;const s=n(30292),r=n(47025),a=n(86873),l=n(69150);i(n(69150),t);t.connect=function(e,t,n,o,i,u,d){void 0===n&&(n={}),void 0===i&&(i={}),void 0===u&&(u=a.noop),void 0===d&&(d={});const{id:c,connections:p,instances:f}=e,m=c||"connected-node"+(0,a.randomInt)(999);return{inputs:e.inputs,outputs:e.outputs,id:m,completionOutputs:e.completionOutputs,reactiveInputs:e.reactiveInputs,run:(c,v)=>{let g=[];const h=new a.DepGraph({}),y=new Map,b=new Map,I=new Map,_=new Map,x=new Map,C=new Map;let j;const w=new Set;f.forEach((e=>{const n=(0,s.getNode)(e,t),o=e.id;y.set(e,o),b.set(o,e),h.addNode(o);const i=Object.keys(n.inputs),r=Object.keys(n.outputs),a={},u={};i.forEach((t=>{const n=(e.inputConfig||{})[t]||(0,s.queueInputPinConfig)();a[t]=(0,s.dynamicNodeInput)({config:n})})),a[l.TRIGGER_PIN_ID]=(0,s.dynamicNodeInput)({config:(0,s.queueInputPinConfig)()});if(p.some((t=>(0,l.isInternalConnectionNode)(t.to)&&t.to.insId===e.id&&t.to.pinId===l.TRIGGER_PIN_ID))&&e.inputConfig&&e.inputConfig[l.TRIGGER_PIN_ID])throw"Trigger connection can not be configured";r.forEach((e=>{const t=(0,s.dynamicOutput)();u[e]=t}));p.some((t=>(0,l.isInternalConnectionNode)(t.from)&&t.from.insId===e.id&&t.from.pinId===l.ERROR_PIN_ID))&&(u[l.ERROR_PIN_ID]=(0,s.dynamicOutput)()),I.set(o,a),_.set(o,u)}));const E=new Set;return p.forEach((n=>{const{from:o,to:i}=n,{insId:r,pinId:a}=o,{insId:u,pinId:d}=i,c=_.get(r),p=I.get(u);if((0,l.isInternalConnectionNode)(i)&&E.add(`${i.insId}.${i.pinId}`),(0,l.isExternalConnection)(n)){if((0,l.isExternalConnectionNode)(o)){const e=null==p?void 0:p[i.pinId];if(!e)throw new Error(`Input ${i.pinId} of instance ${u} not found`);const t=x.get(o.pinId)||[];t.push(e),x.set(o.pinId,t)}else{let e=null==c?void 0:c[o.pinId];if(!e)throw new Error(`Output ${o.pinId} of instance ${r} not found`);const t=C.get(i.pinId)||[];t.push(e),C.set(i.pinId,t)}return}if(!c)throw new Error(`No outputs found for instance [${r}]`);if(!p)throw b.has(u)?new Error(`No inputs found for instance [${u}]`):new Error(`Instance with id [${u}] does not exist!`);const f=c[a];if(!f)throw new Error(`Output source - [${a}] not found in node [${m}]`);const v=p[d],y=b.get(r);if(!y&&r!==l.THIS_INS_ID)throw new Error(`Instance [${r}] does not exist! failed to connect [${o}] -> [${i}]`);const j=(y?(0,s.getNode)(y,t):e).outputs[a];if(j&&j.delayed||n.delayed||r!==l.THIS_INS_ID&&u!==l.THIS_INS_ID&&h.addDependency(r,u),!v)throw new Error(`Target arg - [${i}] not found in node [${m}]`);const w=f.subscribe((async e=>{v.subject.next(e)}));g.push((()=>w.unsubscribe()))})),(0,a.okeys)(v).forEach((e=>{(C.get(e)||[]).forEach((t=>{const n=t.subscribe((async t=>{if(!v[e])throw new Error(`Impossible state - output ${e} does not exist`);v[e].next(t)}));g.push((()=>n.unsubscribe()))}))})),h.overallOrder().map((e=>b.get(e))).forEach((e=>{const a=I.get(e.id),l=_.get(e.id),c=(0,s.getNode)(e,t);if(!a)throw new Error(`Unexpected error - args not found when running ${e}`);if(!l)throw new Error(`Unexpected error - outputs not found when running ${e}`);for(const t in a)E.has(`${e.id}.${t}`)||delete a[t];const p=(0,r.execute)({node:c,inputs:a,outputs:l,resolvedDeps:t,_debugger:n,insId:e.id,extraContext:d,mainState:i,ancestorsInsIds:o,onBubbleError:u,onCompleted:()=>{return t=e.id,w.delete(t),void(0===w.size&&j&&j());var t},onStarted:()=>{return t=e.id,void w.add(t);var t}});g.push(p)})),Object.keys(c).forEach((async e=>{(x.get(e)||[]).forEach((t=>{const n=c[e];(0,a.isDefined)(n)&&t.subject.next(n)}))})),void 0===e.completionOutputs&&w.size>0?new Promise((e=>{j=e})):()=>g.forEach((e=>{try{e()}catch(t){console.error("error unsubscribing",t)}}))}}}},26488:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.MINOR_DEBUGGER_EVENT_TYPES=t.MAJOR_DEBUGGER_EVENT_TYPES=t.DebuggerEventType=void 0,function(e){e.INPUT_CHANGE="i",e.OUTPUT_CHANGE="o",e.PROCESSING_CHANGE="pc",e.ERROR="err",e.INPUTS_STATE_CHANGE="isc"}(n=t.DebuggerEventType||(t.DebuggerEventType={})),t.MAJOR_DEBUGGER_EVENT_TYPES=[n.INPUT_CHANGE,n.OUTPUT_CHANGE,n.ERROR],t.MINOR_DEBUGGER_EVENT_TYPES=[n.PROCESSING_CHANGE,n.INPUTS_STATE_CHANGE]},43686:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatEvent=void 0;const o=n(26488);t.formatEvent=function(e){var t,n,i;const s=[e.insId,...null!==(n=null===(t=e.ancestorsInsIds)||void 0===t?void 0:t.split("."))&&void 0!==n?n:[]];(null===(i=e.ancestorsInsIds)||void 0===i?void 0:i.length)>0&&e.ancestorsInsIds;const r=`Node <${e.nodeId}> `,a=`| Ins. id: ${s.join(" -> ")}`;return`${r} - ${function(e){switch(e.type){case o.DebuggerEventType.PROCESSING_CHANGE:return e.val?"started processing":"stopped processing";case o.DebuggerEventType.INPUT_CHANGE:return`Input pin <${e.pinId}> received value: ${e.val}`;case o.DebuggerEventType.OUTPUT_CHANGE:return`Output pin <${e.pinId}> emitted value: ${e.val}`;case o.DebuggerEventType.INPUTS_STATE_CHANGE:return`Inputs queue size changed to ${Object.entries(e.val).map((e=>{let[t,n]=e;return`${t}: ${n}`})).join(", ")}`;case o.DebuggerEventType.ERROR:return`Error: ${e.val}`}}(e)} ${a}`}},99896:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(26488),t),i(n(43686),t)},47025:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.execute=t.GLOBAL_STATE_NS=t.ROOT_INS_ID=t.INPUTS_STATE_SUFFIX=t.INNER_STATE_SUFFIX=void 0;const s=n(62600),r=n(87794);i(n(99896),t);const a=n(30292),l=n(6775),u=n(84479),d=n(86873),c=n(23046),p=n(99896);t.INNER_STATE_SUFFIX="_inner",t.INPUTS_STATE_SUFFIX="_inputs";t.ROOT_INS_ID="__root",t.GLOBAL_STATE_NS="____global";t.execute=e=>{let{node:n,inputs:o,outputs:i,resolvedDeps:f,_debugger:m={},insId:v=t.ROOT_INS_ID,extraContext:g={},mainState:h={},ancestorsInsIds:y,onBubbleError:b=s.noop,onCompleted:I=s.noop,onStarted:_=s.noop}=e;const x=[];h[t.GLOBAL_STATE_NS]||(h[t.GLOBAL_STATE_NS]=new Map);const C=f,j=e=>{const t=e instanceof a.NodeInstanceError?e:new a.NodeInstanceError(e,(0,d.fullInsIdPath)(v,y),n.id);m.onEvent&&m.onEvent({type:p.DebuggerEventType.ERROR,val:t,insId:v,ancestorsInsIds:y,nodeId:n.id}),i[l.ERROR_PIN_ID]?i[l.ERROR_PIN_ID].next(t):b(t)},w=(e=>(0,a.isVisualNode)(e)?(0,l.connect)(e,C,m,(0,d.fullInsIdPath)(v,y),h,j,g):e)(n),E=m.onEvent||s.noop,O={},N={};(0,d.entries)(o).forEach((e=>{let[t,o]=e;const i=(0,a.dynamicNodeInput)({config:o.config}),s=o.subject.subscribe((async e=>{const o=E({type:p.DebuggerEventType.INPUT_CHANGE,insId:v,pinId:t,val:e,ancestorsInsIds:y,nodeId:n.id});if(o){const e=await o.valuePromise;i.subject.next(e)}else m.debugDelay&&await(0,d.delay)(m.debugDelay),i.subject.next(e)}));x.push((()=>s.unsubscribe())),N[t]=i})),(0,d.entries)(i).forEach((e=>{let[t,o]=e;const i=(0,a.dynamicOutput)(),s=i.subscribe((async e=>{const i=E({type:p.DebuggerEventType.OUTPUT_CHANGE,insId:v,pinId:t,val:e,ancestorsInsIds:y,nodeId:n.id});if(i){const e=await i.valuePromise;o.next(e)}else o.next(e)}));x.push((()=>s.unsubscribe())),O[t]=i}));const S=(e=>{var n,o;const{node:i,inputs:l,outputs:f,resolvedDeps:m,_debugger:v,insId:g,ancestorsInsIds:h,mainState:y,onError:b,onStarted:I,onCompleted:_,extraContext:x}=e,{run:C,fn:j}=i,w=(0,c.debugLogger)("core"),E=[];let O;const N=(null==v?void 0:v.onEvent)||s.noop,S=(0,d.fullInsIdPath)(g,h),P=`${S}${t.INNER_STATE_SUFFIX}`,D=`${S}${t.INPUTS_STATE_SUFFIX}`,T=w.extend(S),M=y[t.GLOBAL_STATE_NS];y[P]||(y[P]=new Map),y[D]||(y[D]=new Map);let k=null!==(n=y[D])&&void 0!==n?n:new Map;const R=()=>{const e=Array.from(k.entries()).reduce(((e,t)=>{let[n,o]=t;return{...e,[n]:(0,a.isQueueInputPinConfig)(l[n].config)?null==o?void 0:o.length:1}}),{});N({type:p.DebuggerEventType.INPUTS_STATE_CHANGE,val:e,insId:g,ancestorsInsIds:h,nodeId:i.id})},A={execute:(e,n,o,i)=>(0,t.execute)({node:e,inputs:n,outputs:o,resolvedDeps:m,_debugger:v,insId:i,onCompleted:_,onStarted:I}),insId:g,state:null!==(o=y[P])&&void 0!==o?o:new Map,onCleanup:e=>{E.push(e)},onError:e=>{b(e)},context:null!=x?x:{},ancestorsInsIds:h,globalState:M};let V,z=!1;const L=i.reactiveInputs||[],$=()=>{var e;null===(e=y[P])||void 0===e||e.clear(),(0,d.keys)(y).filter((e=>e.startsWith(`${S}.`))).forEach((e=>{y[e]=new Map}))},H=e=>{const t=(null==e?void 0:e.key)&&L.includes(null==e?void 0:e.key);if(z&&!t);else{const o=z&&t;if((0,u.isNodeStateValid)(l,k,i)||o){let t;if(z){if(!e)throw new Error("Unexpected state,  got reactive node while not processing and not valid");const n=(0,u.pullValueForExecution)(e.key,l[e.key],k);t={...V,[e.key]:n},R()}else t=(0,u.pullValuesForExecution)(l,k),V=t,R();let o=new Set,s={};if(z=!0,N({type:p.DebuggerEventType.PROCESSING_CHANGE,val:z,insId:g,ancestorsInsIds:h,nodeId:i.id}),i.completionOutputs){const e=i.completionOutputs.map((e=>e.split("+"))).reduce(((e,t)=>(t.forEach((n=>{e.set(n,t)})),e)),new Map);(0,d.entries)(f).forEach((t=>{let[n,a]=t;a.pipe((0,r.first)()).subscribe((t=>{o.add(n),s[n]=t;let r=e.get(n);r&&(r.splice(r.indexOf(n),1),0===r.length&&(z=!1,N({type:p.DebuggerEventType.PROCESSING_CHANGE,val:z,insId:g,ancestorsInsIds:h,nodeId:i.id}),_&&_(s),$(),(0,d.callFnOrFnPromise)(O,`Error with cleanup function of ${i.id}`),O=void 0,o.clear(),s={},(0,u.hasNewSignificantValues)(l,k,i.id)&&H()))}))}))}else(0,d.entries)(f).forEach((e=>{let[t,n]=e;n.subscribe((e=>{s[t]=e}))}));try{T("Running node %s with values %o",i.id,t),I&&I(),O=(null!=j?j:C)(t,f,A),(0,d.isPromise)(O)?O.then((()=>{void 0===i.completionOutputs&&_&&(z=!1,N({type:p.DebuggerEventType.PROCESSING_CHANGE,val:z,insId:g,ancestorsInsIds:h,nodeId:i.id}),_(s),$(),(0,u.hasNewSignificantValues)(l,k,i.id)&&H())})).catch((e=>{b(e),z=!1,T("Error in node %s - value %e",i.id,e),N({type:p.DebuggerEventType.PROCESSING_CHANGE,val:z,insId:g,ancestorsInsIds:h,nodeId:i.id})})):void 0===i.completionOutputs&&_&&(z=!1,N({type:p.DebuggerEventType.PROCESSING_CHANGE,val:z,insId:g,ancestorsInsIds:h,nodeId:i.id}),_(s),$())}catch(n){b(n),z=!1,T("Error in node %s - value %e",i.id,n),N({type:p.DebuggerEventType.PROCESSING_CHANGE,val:z,insId:g,ancestorsInsIds:h,nodeId:i.id})}const c=L.find((e=>l[e]&&(0,u.peekValueForExecution)(e,l[e],k,i.id)));if(c){const e=(0,u.peekValueForExecution)(c,l[c],k,i.id);H({key:c,value:e})}else{const e=(0,d.entries)(l).find((e=>{let[t,n]=e;const o=(0,a.isQueueInputPinConfig)(n.config),s=(0,u.peekValueForExecution)(t,n,k,i.id);return!!o&&(0,d.isDefined)(s)}));if(e){const[t,n]=e,o=(0,u.peekValueForExecution)(t,n,k,i.id);H({key:t,value:o})}}}}};H();const q=(0,u.subscribeInputsToState)(l,k,((e,t)=>{w("Got input %s - value is [%o]",e,t),R();try{H({key:e,value:t})}catch(n){b(n)}}));return E.push(q),()=>{(0,d.callFnOrFnPromise)(O,`Error with cleanup function of ${i.id}`),E.forEach((e=>e()))}})({node:w,inputs:N,outputs:O,resolvedDeps:C,_debugger:m,insId:v,mainState:h,ancestorsInsIds:y,onError:j,onBubbleError:b,extraContext:g,onCompleted:I,onStarted:_});return()=>{x.forEach((e=>e())),S()}}},84479:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeInputsToState=t.isNodeStateValid=t.hasNewSignificantValues=t.peekValuesForExecution=t.pullValuesForExecution=t.pullValueForExecution=t.peekValueForExecution=void 0;const o=n(30292),i=n(86873),s=n(6775);t.peekValueForExecution=(e,t,n,i)=>{const s=n.get(e);let r;if(!t)throw new Error(`Trying to peek value of inexsting input in key "${e}" in node "${i}"`);return r=(0,o.isQueueInputPinConfig)(t.config)?s?[...s].shift():void 0:s,r};t.pullValueForExecution=(e,t,n)=>{const i=n.get(e);let s;return(0,o.isQueueInputPinConfig)(t.config)?(s=(i||[]).shift(),n.set(e,i)):(s=i,(0,o.isStickyInputPinConfig)(t.config)||n.delete(e)),s};t.pullValuesForExecution=(e,n)=>(0,i.entries)(e).reduce(((e,o)=>{let[i,s]=o;return e[i]=(0,t.pullValueForExecution)(i,s,n),e}),{});t.peekValuesForExecution=(e,n,o)=>(0,i.entries)(e).reduce(((e,i)=>{let[s,r]=i;return e[s]=(0,t.peekValueForExecution)(s,r,n,o),e}),{});t.hasNewSignificantValues=(e,n,s)=>(0,i.entries)(e).some((e=>{let[r,a]=e;const l=(0,o.isQueueInputPinConfig)(a.config),u=(0,t.peekValueForExecution)(r,a,n,s);return(0,i.isDefined)(u)&&l}));t.isNodeStateValid=(e,t,n)=>{const r=(0,i.keys)(e),a=(0,i.keys)(n.inputs).filter((e=>{var t;const o=null===(t=n.inputs[e])||void 0===t?void 0:t.mode;return!o||"required"===o}));r.includes(s.TRIGGER_PIN_ID)&&a.push(s.TRIGGER_PIN_ID);return!!(0,i.containsAll)(r,a)&&(0,i.entries)(e).filter((e=>{let[t]=e;return!!n.inputs[t]||t===s.TRIGGER_PIN_ID})).every((e=>{let[s,r]=e;var a;const l=t.get(s);return"optional"===((null===(a=n.inputs[s])||void 0===a?void 0:a.mode)||"required")||((0,o.isQueueInputPinConfig)(r.config)?(0,i.isDefined)(l)&&l.length>0:(0,i.isDefined)(l))}))};t.subscribeInputsToState=(e,t,n)=>{const s=[];return(0,i.entries)(e).forEach((e=>{let[i,r]=e;if(!r)return;const a=r.subject.subscribe((e=>{if((0,o.isQueueInputPinConfig)(r.config)){const o=t.get(i)||[];if(!Array.isArray(o))throw new Error(`impossible state - state of key ${i} is set but not an array`);o.push(e),t.set(i,o),n(i,e)}else t.set(i,e),n(i,e)}));s.push((()=>a.unsubscribe()))})),()=>s.forEach((e=>e()))}},5474:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flydeFlowSchema=void 0;const o=n(29022),i=o.z.record(o.z.string(),o.z.string().or(o.z.array(o.z.string()))),s=o.z.strictObject({x:o.z.number(),y:o.z.number()}),r=o.z.discriminatedUnion("mode",[o.z.strictObject({mode:o.z.literal("queue")}),o.z.strictObject({mode:o.z.literal("sticky")})]),a=o.z.object({size:o.z.optional(o.z.enum(["small","regular","large"])),icon:o.z.optional(o.z.any()),color:o.z.optional(o.z.string()),cssOverride:o.z.optional(o.z.record(o.z.string()))}),l=o.z.object({pos:s.default({x:0,y:0}),id:o.z.string(),inputConfig:o.z.optional(o.z.record(o.z.string(),r)).default({}),visibleInputs:o.z.optional(o.z.array(o.z.string())),visibleOutputs:o.z.optional(o.z.array(o.z.string())),nodeId:o.z.optional(o.z.string()),node:o.z.optional(o.z.lazy((()=>p))),macroId:o.z.optional(o.z.string()),macroData:o.z.optional(o.z.any()),style:o.z.optional(a)}).refine((e=>e.node||e.nodeId||e.macroId&&void 0!==e.macroData),{message:"Instance must have either an inline node or refer to a nodeId, or be a macro instance"}),u=o.z.union([o.z.string(),o.z.object({mode:o.z.enum(["required","optional","required-if-connected"]),type:o.z.optional(o.z.string()),description:o.z.optional(o.z.string()),defaultValue:o.z.optional(o.z.any())})]),d=o.z.object({type:o.z.optional(o.z.string()),optional:o.z.optional(o.z.boolean()),delayed:o.z.optional(o.z.boolean()),description:o.z.optional(o.z.string())}),c=o.z.object({id:o.z.optional(o.z.string()),inputs:o.z.record(o.z.string(),u),outputs:o.z.record(o.z.string(),d),inputsPosition:o.z.optional(o.z.record(o.z.string(),s)),outputsPosition:o.z.optional(o.z.record(o.z.string(),s)),completionOutputs:o.z.optional(o.z.array(o.z.string())),reactiveInputs:o.z.optional(o.z.array(o.z.string())),defaultStyle:o.z.optional(a),description:o.z.optional(o.z.string()),searchKeywords:o.z.optional(o.z.array(o.z.string()))}),p=o.z.object({instances:o.z.array(l),connections:o.z.array(o.z.strictObject({from:o.z.strictObject({insId:o.z.string(),pinId:o.z.string()}),to:o.z.strictObject({insId:o.z.string(),pinId:o.z.string()}),delayed:o.z.optional(o.z.boolean()),hidden:o.z.optional(o.z.boolean())}))}).and(c);t.flydeFlowSchema=o.z.strictObject({imports:o.z.optional(i).default({}),node:p})},74762:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(86873),t),i(n(6775),t),i(n(47025),t),i(n(10418),t),i(n(30292),t),i(n(3320),t),i(n(5474),t)},3320:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeWithDependencies=void 0;const o=n(74762),i=n(88270);t.getNodeWithDependencies=function(e,n,s){if(void 0===s&&(s=[]),s.includes(e.id))return[];const r=(0,o.removeDupes)(e.instances.filter((e=>(0,i.isRefNodeInstance)(e))).map((e=>e.nodeId)).filter((e=>n[e])));return[e,...r.flatMap((e=>{var t;return null!==(t=n[e])&&void 0!==t?t:[]})).reduce(((e,o)=>[...e,...(0,t.getNodeWithDependencies)(o,n,[...s,...r])]),[])]}},30292:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(88270),t),i(n(43069),t),i(n(79426),t),i(n(44535),t),i(n(18063),t),i(n(20359),t)},29862:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},18063:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeInstanceError=void 0;class n extends Error{constructor(e,t,n){let o="Unknown error";o="string"==typeof e?e:e instanceof Error?e.message:null!==e&&"object"==typeof e?JSON.stringify(e):String(e),super(`${o} (insId: ${t}, nodeId: ${n})`),this.name=this.constructor.name,this.message=`${o} (insId: ${t}, nodeId: ${n})`,Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.fullInsIdsPath=t,this.nodeId=n}}t.NodeInstanceError=n},88270:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createInsId=t.NodeInstance=t.isResolvedMacroNodeInstance=t.isMacroNodeInstance=t.isRefNodeInstance=t.isInlineNodeInstance=t.macroNodeInstance=t.inlineNodeInstance=t.nodeInstance=void 0;const o=n(36618);t.nodeInstance=(e,t,n,o)=>({id:e,nodeId:t,inputConfig:n||{},pos:o||{x:0,y:0}});t.inlineNodeInstance=(e,t,n,o)=>({id:e,node:t,inputConfig:n||{},pos:o||{x:0,y:0}});t.macroNodeInstance=(e,t,n,o,i)=>({id:e,macroId:t,macroData:n,inputConfig:o||{},nodeId:`${t}__${e}`,pos:i||{x:0,y:0}});t.isInlineNodeInstance=e=>!!e.node;t.isRefNodeInstance=e=>!!e.nodeId&&!e.macroId;t.isMacroNodeInstance=e=>!!e.macroId;t.isResolvedMacroNodeInstance=e=>!!e.macroId&&!!e.nodeId;t.NodeInstance=(e,t,n,o)=>({id:e,nodeId:t.id,inputConfig:n||{},pos:o||{x:0,y:0}});t.createInsId=e=>`${e.id}-${(0,o.slug)()}`},43069:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dynamicNodeInputs=t.dynamicNodeInput=t.dynamicOutput=t.nodeOutputs=t.nodeOutput=t.nodeInputs=t.isInputPinOptional=t.nodeInput=void 0;const o=n(62600),i=n(86873),s=n(79426);t.nodeInput=function(e){return void 0===e&&(e="required"),{mode:e}};t.isInputPinOptional=e=>"optional"===e.mode;t.nodeInputs=(e,n)=>(0,i.repeat)(e,(e=>(0,t.nodeInput)((null==n?void 0:n[e])||"required")));t.nodeOutput=function(e){return void 0===e&&(e=!1),{delayed:e}};t.nodeOutputs=e=>(0,i.repeat)(e,(()=>(0,t.nodeOutput)()));t.dynamicOutput=()=>new o.Subject,t.dynamicNodeInput=(0,i.testDataCreator)((()=>({subject:new o.Subject,config:(0,s.queueInputPinConfig)()})));t.dynamicNodeInputs=function(e){return void 0===e&&(e=10),(0,i.repeat)(e,(()=>(0,i.testDataCreator)((()=>({subject:new o.Subject,config:(0,s.queueInputPinConfig)()})))()))}},20359:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.codeFromFunction=t.getNodeDef=t.getNode=t.fromSimplified=t.codeNode=t.visualNode=t.isVisualNode=t.isMacroNodeDefinition=t.extractMetadata=t.isMacroNode=t.isCodeNode=t.isBaseNode=void 0;const s=n(86873),r=n(88270),a=n(43069);i(n(29862),t);t.isBaseNode=e=>e&&e.id&&e.inputs&&e.outputs;t.isCodeNode=e=>(0,t.isBaseNode)(e)&&"function"==typeof e.run;t.isMacroNode=e=>e&&"function"==typeof e.runFnBuilder;t.extractMetadata=e=>{const{id:t,displayName:n,description:o,namespace:i,defaultStyle:s,searchKeywords:r}=e;return{id:t,displayName:n,description:o,namespace:i,defaultStyle:s,searchKeywords:r}};t.isMacroNodeDefinition=e=>e&&void 0===e.definitionBuilder;t.isVisualNode=e=>!!e.instances,t.visualNode=(0,s.testDataCreator)({id:"visual-node",inputs:{},outputs:{},instances:[],connections:[],outputsPosition:{},inputsPosition:{}}),t.codeNode=(0,s.testDataCreator)({id:"node",inputs:{},outputs:{},run:s.noop});t.fromSimplified=e=>{let{run:t,inputTypes:n,outputTypes:o,id:i}=e;return{id:i,inputs:(0,s.entries)(n).reduce(((e,t)=>{let[n]=t;return{...e,[n]:{}}}),{}),outputs:(0,s.entries)(o).reduce(((e,t)=>{let[n]=t;return{...e,[n]:{}}}),{}),run:t}};t.getNode=(e,t)=>{const n=e;if("string"!=typeof n&&(0,r.isInlineNodeInstance)(n))return n.node;const o="string"==typeof n?n:n.nodeId,i=t[o];if(!i)throw new Error(`Node with id ${o} not found`);return i};t.getNodeDef=(e,t)=>{if("string"!=typeof e&&(0,r.isInlineNodeInstance)(e))return e.node;const n="string"==typeof e?e:e.nodeId,o=t[n];if(!o)throw console.error(`Node with id ${n} not found`),new Error(`Node with id ${n} not found`);return o};t.codeFromFunction=e=>{let{id:t,fn:n,inputNames:o,outputName:i,defaultStyle:s}=e;return{id:t,inputs:o.reduce(((e,t)=>({...e,[t]:(0,a.nodeInput)()})),{}),outputs:{[i]:(0,a.nodeOutput)()},run:(e,t)=>{const s=o.map((t=>e[t])),r=t[i],a=n(...s);return Promise.resolve(a).then((e=>null==r?void 0:r.next(e)))},completionOutputs:[i],defaultStyle:s}}},44535:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nodeFromSimpleFunction=void 0,t.nodeFromSimpleFunction=function(e){var t;return{...e,id:e.id,description:e.description,namespace:e.namespace,inputs:e.inputs?e.inputs.reduce(((e,t)=>{let{name:n,description:o,mode:i,defaultValue:s}=t;return{...e,[n]:{description:o,mode:null!=i?i:"required",defaultValue:s}}}),{}):{},outputs:e.output?{[e.output.name]:{description:e.output.description}}:{},defaultStyle:{icon:e.icon,size:e.size},run:null!==(t=e.fullRunFn)&&void 0!==t?t:async function(t,n,o){var i,s;const r=(null!==(i=e.inputs)&&void 0!==i?i:[]).map((e=>{let{name:n}=e;return t[n]}));try{const t=await Promise.resolve(e.run(...r));e.output&&(null===(s=n[e.output.name])||void 0===s||s.next(t))}catch(a){console.error("Error in node",a),o.onError(a)}}}}},79426:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isStickyInputPinConfig=t.isQueueInputPinConfig=t.stickyInputPinConfig=t.queueInputPinConfig=t.INPUT_MODES=void 0,t.INPUT_MODES=["queue","sticky","static"];t.queueInputPinConfig=()=>({mode:"queue"});t.stickyInputPinConfig=()=>({mode:"sticky"});t.isQueueInputPinConfig=e=>"queue"===e.mode;t.isStickyInputPinConfig=e=>!!e&&"sticky"===e.mode},10418:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.simplifiedExecute=void 0;const o=n(74762),i=n(47025);t.simplifiedExecute=function(e,t,n,s,r){void 0===n&&(n={}),void 0===r&&(r={});const a=(0,o.keys)(e.outputs),l=Object.keys(n).reduce(((e,t)=>({...e,[t]:(0,o.dynamicNodeInput)()})),{}),u=a.reduce(((e,t)=>{const n=(0,o.dynamicOutput)();return s&&n.subscribe((e=>{s(t,e)})),{...e,[t]:n}}),{}),d=(0,i.execute)({node:e,inputs:l,outputs:u,resolvedDeps:t,onBubbleError:e=>{throw e},...r});return Object.entries(n).forEach((e=>{let[t,n]=e;l[t].subject.next(n)})),d}},25779:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodePreview=void 0;const o=n(35250),i=n(74762),s=n(86553);t.NodePreview=e=>{let{node:t}=e;const n={node:t,instance:(0,i.nodeInstance)("bob",t.id,{}),connections:[],viewPort:{pos:{x:0,y:0},zoom:1},resolvedDeps:{},connectionsPerInput:{},onUngroup:i.noop,onDblClick:i.noop,onDragEnd:i.noop,onDragMove:i.noop,onDragStart:i.noop,onPinClick:i.noop,onPinDblClick:i.noop,onSelect:i.noop,onTogglePinBreakpoint:i.noop,onTogglePinLog:i.noop,onToggleSticky:i.noop,displayMode:!0,onInspectPin:i.noop,ancestorsInsIds:"",onChangeVisibleInputs:i.noop,onChangeVisibleOutputs:i.noop,forceShowMinimized:"both",onExtractInlineNode:i.noop,onCloseInlineEditor:i.noop,isConnectedInstanceSelected:!1,inlineEditorPortalDomNode:null,onChangeStyle:i.noop,onDeleteInstance:i.noop,onGroupSelected:i.noop,onSetDisplayName:i.noop,hadError:!1,queuedInputsData:{},onPinMouseDown:i.noop,onPinMouseUp:i.noop};return(0,o.jsx)("div",{className:"node-preview",children:(0,o.jsx)(s.InstanceView,{...n})})}},30653:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useDarkMode=t.DarkModeProvider=void 0;const o=n(70079),i=(0,o.createContext)(!0);t.DarkModeProvider=i.Provider;t.useDarkMode=()=>(0,o.useContext)(i)},29183:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DataInspectionModal=void 0;const a=n(35250),l=n(50382),u=r(n(26372)),d=s(n(70079)),c=n(74089),p=n(83938),f=n(17102),m=n(98158);t.DataInspectionModal=e=>{var t;const{onRequestHistory:n}=(0,m.useDebuggerContext)(),{item:o}=e,[i,s]=d.default.useState(),[r,v]=d.default.useState(0),[g,h]=d.default.useState(""),[y,b]=d.default.useState(),[I]=(0,c.useDebounce)(g,300);(0,d.useEffect)((()=>{b(null==i?void 0:i.lastSamples.filter((e=>"object"==typeof e.val?JSON.stringify(e.val).includes(I):e.val.toString().includes(I)))),v(0)}),[null==i?void 0:i.lastSamples,I]),d.default.useEffect((()=>{!async function(){var e,t;const i=await n(o.insId,null===(e=o.pin)||void 0===e?void 0:e.id,null===(t=o.pin)||void 0===t?void 0:t.type);s(i)}()}),[o,n]);const _=e=>{const t=e.val;return"object"==typeof t?(0,a.jsx)(p.BrowserOnlyReactJson,{src:t}):(0,a.jsx)(l.Code,{children:t.toString()})},x=`"${o.insId}" ${(null===(t=o.pin)||void 0===t?void 0:t.id)?`(${o.pin.id})`:""}`;return(0,a.jsx)(l.Dialog,{isOpen:!0,title:`Inspecting data for instance ${x}`,onClose:e.onClose,canEscapeKeyClose:!1,className:"data-inspection-modal",children:(0,a.jsx)("main",{className:(0,u.default)(l.Classes.DIALOG_BODY),tabIndex:0,children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("header",{children:[i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("em",{children:[x," called ",i.total," time(s)"]}),i.total>10&&(0,a.jsx)("span",{children:"Showing last 10 samples"})]}):null,(0,a.jsx)("input",{className:"bp5-input bp5-small bp5-fill",type:"search",placeholder:"Search for values",dir:"auto",onChange:e=>h(e.target.value),value:g}),I.length>0&&(0,a.jsxs)("span",{children:["Showing ",null==y?void 0:y.length," of ",i.lastSamples.length," ",'samples matching query "',I,'"']})]}),(0,a.jsx)("main",{className:"main-wrapper",children:(()=>{if(!i)return(0,a.jsx)(f.Loader,{});if(0===i.total)return(0,a.jsxs)(l.Callout,{intent:"warning",children:["No events captured for instance ",(0,a.jsx)("em",{children:o.insId})," ",o.pin?(0,a.jsxs)(d.default.Fragment,{children:["and pin ",(0,a.jsx)("em",{children:o.pin.id})]}):null,". Make sure debugger is running and your program was triggered."]});const e=null==y?void 0:y[r];return e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l.Card,{className:"content-wrapper",children:[e?(0,a.jsxs)("div",{className:"info",children:[(0,a.jsxs)("div",{children:["Showing sample ",r," of event from"," ",(0,a.jsx)("strong",{children:(0,c.timeAgo)(e.time)})," (",new Date(e.time).toLocaleString(),")"]}),(0,a.jsxs)("div",{children:["Instance: ",(0,a.jsx)("strong",{children:e.insId}),", Pin id:"," ",(0,a.jsx)("strong",{children:e.pinId})," "]}),(0,a.jsx)("div",{children:"Value:"})]}):null,_(e)]}),(0,a.jsx)(l.Menu,{className:"samples-menu",children:y.map(((e,t)=>{const n=e.pinId,o=`${i.total-t}. from pin "${n}"`;return(0,a.jsx)(l.MenuItem,{text:o,onClick:()=>v(t)},t)}))})]}):i.lastSamples.length>0&&g.length>0?(0,a.jsxs)(l.Callout,{intent:"warning",children:['No data found for search query "',g,'"']}):(0,a.jsxs)(l.Callout,{intent:"warning",children:["No events captured for instance ",o.insId," ",o.pin?`and ${o.pin.id}`:"",". Make sure a debugger is connected and your program was triggered."]})})()})]})})})}},40471:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(29183),t)},98158:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useDebuggerContext=t.DebuggerContextProvider=void 0;const o=n(70079),i=(0,o.createContext)({onRequestHistory:()=>Promise.reject(new Error("Not implemented"))});t.DebuggerContextProvider=i.Provider;t.useDebuggerContext=()=>(0,o.useContext)(i)},86125:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useDependenciesContext=t.DependenciesContextProvider=void 0;const o=n(70079),i=(0,o.createContext)({resolvedDependencies:{},onImportNode:()=>Promise.reject(new Error("Not implemented")),onRequestImportables:()=>Promise.reject(new Error("Not implemented")),libraryData:{groups:[]}});t.DependenciesContextProvider=i.Provider;t.useDependenciesContext=()=>(0,o.useContext)(i)},97106:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.FlowEditor=void 0;const a=n(35250),l=s(n(70079)),u=n(74762),d=n(63521),c=n(68120),p=n(43490),f=n(68840),m=n(78087),v=n(20079),g=n(40471),h=n(98158),y=n(86125),b=n(30653),I=n(77852);r(n(43490),t),r(n(98158),t),r(n(86125),t),f.library.add(m.fab,v.fas);const _=["select","drag-move","order-step"];t.FlowEditor=l.memo(l.forwardRef(((e,t)=>{const{state:n,onChangeEditorState:o}=e,{resolvedDependencies:i}=(0,y.useDependenciesContext)(),[s,r]=l.useState([]),[f,m]=l.useState([]),{boardData:v}=n,x=n.flow.node,[C,j]=l.useState({}),[w,E]=l.useState(new Set),{debuggerClient:O}=(0,h.useDebuggerContext)();l.useEffect((()=>{if(O)return O.onBatchedEvents((e=>{e.forEach((e=>{e.type===u.DebuggerEventType.INPUTS_STATE_CHANGE&&j((t=>({...t,[e.insId]:e.val}))),e.type===u.DebuggerEventType.ERROR&&E((t=>{const n=new Set(t);return n.add(e.insId),n}))}))}))}),[O]);const{openFile:N}=(0,p.usePorts)(),S=l.useCallback(((e,t)=>{console.info("onChangeFlow",t.type),"functional"===t.type&&(r([{flow:{...n.flow,...e}},...s.slice(0,50)]),m([])),o((t=>({...t,flow:{...t.flow,...e}})))}),[o,n.flow,s]),[P,D]=l.useState({instances:[],connections:[]}),T=l.useCallback((e=>{o((t=>({...t,boardData:{...t.boardData,...e}})))}),[o]);l.useEffect((()=>{T({selected:[],viewPort:d.defaultViewPort,from:void 0,to:void 0,lastMousePos:{x:0,y:0}})}),[x.id]),(0,c.useHotkeys)("cmd+z",(e=>{m([...f,n]);const[t,...i]=s;t&&(o((e=>({...e,...t}))),r(i)),e.preventDefault()}),{text:"Undo last change",group:"Editing"},[n,s,f]);const M=l.useCallback(((e,t)=>{_.some((e=>t.message.includes(e)))||m([]),S({node:e},t)}),[S]),k=l.useCallback((e=>{N({absPath:e.source.path})}),[N]),[R,A]=l.useState(),V=l.useCallback((()=>A(void 0)),[]),z=l.useCallback(((e,t)=>{A({insId:e,pin:t})}),[]),{isDarkMode:L}=(0,I.useDarkMode)();return(0,a.jsx)("div",{className:"flyde-flow-editor",children:(0,a.jsx)(b.DarkModeProvider,{value:null!==($=e.darkMode)&&void 0!==$?$:L,children:(0,a.jsxs)(l.Fragment,{children:[R?(0,a.jsx)(g.DataInspectionModal,{item:R,onClose:V}):null,(0,a.jsx)(d.VisualNodeEditor,{currentInsId:u.ROOT_INS_ID,ref:t,boardData:v,onChangeBoardData:T,node:x,onGoToNodeDef:k,onChangeNode:M,resolvedDependencies:i,clipboardData:P,onCopy:D,nodeIoEditable:!x.id.startsWith("Trigger"),onInspectPin:z,onExtractInlineNode:e.onExtractInlineNode,queuedInputsData:C,initialPadding:e.initialPadding,instancesWithErrors:w,disableScrolling:e.disableScrolling},x.id)]})})});var $})))},9001:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseNodeEditor=t.renderCreateIOOption=void 0;const i=n(35250),s=o(n(70079)),r=n(74762),a=n(50382),l=o(n(53865)),u=n(70457),d=n(25779);t.renderCreateIOOption=(e,t,n)=>(0,i.jsx)(a.MenuItem,{icon:"add",text:`Create "${e}"`,active:t,onClick:n,shouldDismissPopover:!1});const c=u.MultiSelect.ofType();t.BaseNodeEditor=e=>{var n,o;const{node:u,onChange:p}=e,f=(0,r.entries)(u.inputs),m=f.filter((e=>{let[,t]=e;return"required"===t.mode})).map((e=>{let[t]=e;return t})),v=f.filter((e=>{let[,t]=e;return"optional"===t.mode})).map((e=>{let[t]=e;return t})),g=f.filter((e=>{let[,t]=e;return"required-if-connected"===t.mode})).map((e=>{let[t]=e;return t})),[h,y]=s.default.useState(!1),b=(0,r.okeys)(u.outputs),I=s.default.useCallback((e=>{p({...u,id:e})}),[u,p]),_=s.default.useCallback((e=>{let t=e?e.split(","):void 0;"[]"===e&&(t=[]),p({...u,completionOutputs:t})}),[u,p]),x=s.default.useCallback((e=>{let t=e?e.split(","):void 0;p({...u,reactiveInputs:t})}),[u,p]),C=s.default.useCallback(((e,t)=>{const n=(0,l.default)(u,(n=>{n.inputs[e]=(0,r.nodeInput)(t)}));p(n)}),[u,p]),j=s.default.useCallback((e=>{const t=(0,l.default)(u,(t=>{delete t.inputs[e]}));p(t)}),[u,p]),w=s.default.useCallback((e=>{const t=(0,l.default)(u,(t=>{t.outputs[e]=(0,r.nodeOutput)()}));p(t)}),[u,p]),E=s.default.useCallback((e=>{const t=(0,l.default)(u,(t=>{delete t.outputs[e]}));p(t)}),[u,p]);return(0,i.jsxs)("div",{className:"base-node-editor",children:[(0,i.jsx)("div",{className:"form-row",children:(0,i.jsx)(a.FormGroup,{label:"Node Name",labelFor:"text-input",labelInfo:"(required)",children:(0,i.jsx)(a.InputGroup,{id:"node-name",disabled:e.idDisabled,placeholder:"Node ID",value:u.id,onChange:e=>I(e.target.value)})})}),(0,i.jsx)(a.FormGroup,{label:"Required Inputs",children:(0,i.jsx)(c,{selectedItems:m,placeholder:"Enter input names here",items:[],tagRenderer:e=>e,onItemSelect:e=>C(e,"required"),onRemove:j,resetOnSelect:!0,itemRenderer:e=>(0,i.jsx)("span",{children:e}),createNewItemFromQuery:e=>e,createNewItemRenderer:t.renderCreateIOOption,fill:!0})}),!0!==e.hiddenOutputs?(0,i.jsx)(a.FormGroup,{label:"Outputs",children:(0,i.jsx)(c,{selectedItems:b,placeholder:"Enter output names here",items:[],tagRenderer:e=>e,onItemSelect:w,onRemove:E,resetOnSelect:!0,itemRenderer:e=>(0,i.jsx)("span",{children:e}),createNewItemFromQuery:e=>e,createNewItemRenderer:t.renderCreateIOOption,fill:!0})}):null,(0,i.jsx)(a.Checkbox,{checked:h,onChange:e=>y(e.target.checked),children:"Show advanced options"}),(0,i.jsxs)(a.Collapse,{isOpen:h,children:[(0,i.jsx)(a.FormGroup,{label:"Optional Inputs",children:(0,i.jsx)(c,{selectedItems:v,placeholder:"Enter input names here",items:[],tagRenderer:e=>e,onItemSelect:e=>C(e,"optional"),onRemove:j,resetOnSelect:!0,itemRenderer:e=>(0,i.jsx)("span",{children:e}),createNewItemFromQuery:e=>e,createNewItemRenderer:t.renderCreateIOOption,fill:!0})}),(0,i.jsx)(a.FormGroup,{label:"Required-if-connected Inputs",children:(0,i.jsx)(c,{selectedItems:g,placeholder:"Enter input names here",items:[],tagRenderer:e=>e,onItemSelect:e=>C(e,"required-if-connected"),onRemove:j,resetOnSelect:!0,itemRenderer:e=>(0,i.jsx)("span",{children:e}),createNewItemFromQuery:e=>e,createNewItemRenderer:t.renderCreateIOOption,fill:!0})}),(0,i.jsx)(a.FormGroup,{label:"Completion Outputs",children:(0,i.jsx)(a.InputGroup,{id:"completion-outputs",placeholder:"completion outputs",value:(null===(n=u.completionOutputs)||void 0===n?void 0:n.join(","))||"",onChange:e=>_(e.target.value)})}),(0,i.jsx)(a.FormGroup,{label:"Reactive Inputs",children:(0,i.jsx)(a.InputGroup,{id:"reactive-inputs",placeholder:"Reactive inputs",value:(null===(o=u.reactiveInputs)||void 0===o?void 0:o.join(","))||"",onChange:e=>x(e.target.value)})})]}),(0,i.jsx)(a.FormGroup,{label:"Preview",children:(0,i.jsx)("div",{className:"preview-wrapper",children:(0,i.jsx)(d.NodePreview,{node:u})})})]})}},82232:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.metaChange=t.functionalChange=void 0;t.functionalChange=e=>({type:"functional",message:e});t.metaChange=function(e){return void 0===e&&(e="n/a"),{type:"meta",message:e}}},41032:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.safelyGetNodeDef=t.loadingDef=void 0;const o=n(74762);t.loadingDef={id:"Loading",displayName:"Loading definition",inputs:{},outputs:{}};t.safelyGetNodeDef=(e,n)=>{try{return(0,o.getNodeDef)(e,n)}catch(i){const n="string"==typeof e?e:e.nodeId;return{...t.loadingDef,id:n}}}},60698:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},43490:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(31874),t)},31874:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.usePorts=t.useConfirm=t.usePrompt=t.PortsContext=t.defaultPorts=void 0;const s=n(70079),r=n(74762),a=n(84472);i(n(60698),t);const l=e=>async()=>{console.warn(`${e} Not implemented`),(0,a.toastMsg)("Feature not implemented in this context yet","warning")};t.defaultPorts={prompt:async e=>{let{text:t,defaultValue:n}=e;return prompt(`${t}`,n)},openFile:async e=>{},confirm:async e=>{let{text:t}=e;return confirm(t)},readFlow:l("readFlow"),setFlow:l("setFlow"),resolveDeps:l("resolveDeps"),getImportables:l("getImportables"),onExternalFlowChange:l("onExternalFlowChange"),onInstallRuntimeRequest:l("onInstallRuntimeRequest"),onRunFlow:l("onRunFlow"),onStopFlow:l("onStopFlow"),reportEvent:r.noop,generateNodeFromPrompt:l("generateNodeFromPrompt"),hasOpenAiToken:()=>Promise.resolve(!1),getLibraryData:()=>Promise.resolve({groups:[]})},t.PortsContext=(0,s.createContext)(t.defaultPorts);t.usePrompt=()=>{const e=(0,s.useContext)(t.PortsContext).prompt;return(t,n)=>e({text:t,defaultValue:n})};t.useConfirm=()=>{const e=(0,s.useContext)(t.PortsContext).confirm;return t=>e({text:t})};t.usePorts=()=>(0,s.useContext)(t.PortsContext)},65758:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.groupSelected=void 0;const i=n(74762),s=o(n(53865)),r=n(22513);t.groupSelected=async(e,t,n,o,a)=>{const{instances:l,connections:u}=t,d=l.filter((t=>e.includes(t.id))),c=u.filter((t=>{let{from:n,to:o}=t;return-1!==e.indexOf(n.insId)||-1!==e.indexOf(o.insId)}));if(!d.length)throw new Error("visual without selections");const{visualNode:p,renamedInputs:f,renamedOutputs:m}=await(0,r.createGroup)(d,c,n,a),v=d.reduce(((e,t)=>(0,i.middlePos)(t.pos,e)),l[0].pos),g="ref"===o?(0,i.nodeInstance)((0,i.createInsId)(p),p.id,{},v):(0,i.inlineNodeInstance)((0,i.createInsId)(p),p,{},v),h=l.filter((t=>-1===e.indexOf(t.id))),y=u.map((e=>{const t=`${e.from.insId}.${e.from.pinId}`,n=`${e.to.insId}.${e.to.pinId}`;return f[n]?{...e,to:{insId:g.id,pinId:f[n]}}:m[t]?{...e,from:{insId:g.id,pinId:m[t]}}:e})).filter((t=>-1===e.indexOf(t.from.insId)&&-1===e.indexOf(t.to.insId)));return{newNode:p,currentNode:(0,s.default)(t,(e=>{e.instances=[...h,g],e.connections=y}))}}},74089:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(97106),t),i(n(18420),t),i(n(90680),t),i(n(84472),t),i(n(17102),t),i(n(82232),t),i(n(25779),t),i(n(25804),t),i(n(9958),t),i(n(68120),t),i(n(94651),t),i(n(73470),t),i(n(94007),t),i(n(60190),t),i(n(9001),t),i(n(7047),t),i(n(23386),t)},31745:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InfoTooltip=void 0;const o=n(35250),i=n(50382),s=n(50382),r=n(44470),a=n(50382);t.InfoTooltip=e=>{const{content:t}=e;return(0,o.jsx)(s.Tooltip,{content:t,placement:"top",className:"info-tooltip",children:(0,o.jsx)(i.Icon,{icon:(0,o.jsx)(r.InfoSign,{className:a.Classes.INTENT_PRIMARY}),intent:i.Intent.SUCCESS,className:"info-tooltip-icon"})})}},83938:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserOnlyReactJson=void 0;const o=n(35250);t.BrowserOnlyReactJson=e=>{if("undefined"==typeof window)return null;const t=n(73541).Z;return(0,o.jsx)(t,{...e})}},94651:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyticsValueRenderer=void 0;const o=n(35250),i=n(74762),s=n(83938);t.AnalyticsValueRenderer=e=>{let{val:t}=e;try{const e=JSON.parse(t),n="object"==typeof e?e:{value:e},r=e&&[e.type,e.key,e.props,e.ref].every(i.isDefined),a=r?{jsxValue:e}:n;return(0,o.jsx)(s.BrowserOnlyReactJson,{src:a,collapseStringsAfterLength:50,collapsed:r})}catch(n){return(0,o.jsx)(s.BrowserOnlyReactJson,{src:{value:t},collapseStringsAfterLength:50})}}},22513:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createGroup=void 0;const o=n(74762),i=n(74762),s=n(60190),r=n(88593);t.createGroup=async(e,t,n,a)=>{if(0===e.length)throw new Error("cannot create group without instances");const l=e.map((e=>e.id)),u=t.filter((e=>{const t=l.includes(e.from.insId),n=l.includes(e.to.insId);return!t&&n})).filter(((e,t,n)=>n.findIndex((t=>(0,i.connectionNodeEquals)(t.to,e.to)))===t)),d=t.filter((e=>{const t=l.includes(e.from.insId),n=l.includes(e.to.insId);return t&&!n})).filter(((e,t,n)=>n.findIndex((t=>(0,i.connectionNodeEquals)(t.from,e.from)))===t));let c={},p={},f={},m={};const v=[],g={};for(const o of u){const e=`${o.to.insId}.${o.to.pinId}`,t=`${o.from.insId}.${o.from.pinId}`,n=o.to.pinId;if(f[t]){v.push({from:(0,i.externalConnectionNode)(f[t]),to:(0,i.connectionNode)(o.to.insId,o.to.pinId)});continue}const r=g[n]?await a(`Name this input (${n} of ${o.to.insId}) is already taken:`)||`i${(0,s.rnd)()}`:n;c[e]=r,f[t]=r,v.push({from:(0,i.externalConnectionNode)(r),to:(0,i.connectionNode)(o.to.insId,o.to.pinId)}),g[r]=(0,i.nodeInput)()}const h={};for(const r of d){const e=`${r.to.insId}.${r.to.pinId}`,t=`${r.from.insId}.${r.from.pinId}`,n=r.from.pinId;if(m[e]){v.push({from:(0,i.connectionNode)(r.from.insId,r.from.pinId),to:(0,i.externalConnectionNode)(m[e])});continue}const l=h[n]?await a(`Name this output (${n} of ${r.from.insId} is already taken:`)||`i${(0,s.rnd)()}`:n;p[t]=l,m[e]=l,v.push({from:(0,i.connectionNode)(r.from.insId,r.from.pinId),to:(0,i.externalConnectionNode)(l)}),h[l]=(0,o.nodeOutput)()}e.reduce(((e,t)=>(0,i.middlePos)(t.pos,e)),e[0].pos);const y=t.filter((e=>l.includes(e.from.insId)&&l.includes(e.to.insId)));return{visualNode:{id:n,inputs:g,outputs:h,instances:e,defaultStyle:{size:"large",color:(0,o.pickRandom)(r.nodeStylePresetColors.map((e=>e.color)))},inputsPosition:(0,o.okeys)(g).reduce(((e,t,n)=>({...e,[t]:{x:0+100*n,y:0}})),{}),outputsPosition:(0,o.okeys)(h).reduce(((e,t,n)=>({...e,[t]:{x:0+100*n,y:400}})),{}),connections:[...y,...v],completionOutputs:(0,o.okeys)(h)},renamedInputs:c,renamedOutputs:p}}},9958:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.highlightText=void 0;const o=n(35250);function i(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}t.highlightText=(e,t)=>{let n=0;const s=t.split(/\s+/).filter((e=>e.length>0)).map(i);if(0===s.length)return[e];const r=new RegExp(s.join("|"),"gi"),a=[];for(;;){const t=r.exec(e);if(!t)break;const i=t[0].length,s=e.slice(n,r.lastIndex-i);s.length>0&&a.push(s),n=r.lastIndex,a.push((0,o.jsx)("strong",{children:t[0]},n))}const l=e.slice(n);return l.length>0&&a.push(l),a}},17102:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Loader=void 0;const o=n(35250);t.Loader=()=>(0,o.jsx)("div",{className:"loader",children:(0,o.jsx)("svg",{width:"38",height:"38",viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:"#007ec6",children:(0,o.jsx)("g",{fill:"none",fillRule:"evenodd",children:(0,o.jsxs)("g",{transform:"translate(1 1)",strokeWidth:"2",children:[(0,o.jsx)("circle",{strokeOpacity:".5",cx:"18",cy:"18",r:"18"}),(0,o.jsx)("path",{d:"M36 18c0-9.94-8.06-18-18-18",children:(0,o.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})})]})})})})},23386:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0;const o=n(74762);t.logger=(0,o.debugLogger)("editor")},561:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.preloadMonaco=void 0;const o=n(51848),i=n(23386);let s=!1;t.preloadMonaco=()=>{s||o.loader.init().then((()=>{(0,i.logger)("monaco preloaded"),s=!0}))}},68120:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useHotkeys=t.currentHotkeys=void 0;const i=o(n(45240)),s=n(70079);t.currentHotkeys=new Map,t.useHotkeys=function(e,n,o,r,a){void 0===r&&(r=[]);const l=(0,s.useCallback)((function(){a&&!a.current||n(...arguments)}),[...r,n]);(0,s.useEffect)((()=>((0,i.default)(e,{},l),t.currentHotkeys.set(e,o),()=>{t.currentHotkeys.delete(e),i.default.unbind(e,l)})),[e,l,o])}},94007:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.safeSessionStorage=t.safeLocalStorage=void 0,t.safeLocalStorage={getItem:function(){try{return localStorage.getItem(...arguments)}catch(e){return null}},setItem:function(){try{return localStorage.setItem(...arguments)}catch(e){return null}}},t.safeSessionStorage={getItem:function(){try{return sessionStorage.getItem(...arguments)}catch(e){return null}},setItem:function(){try{return sessionStorage.setItem(...arguments)}catch(e){return null}}}},90680:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useLocalStorage=t.useResizePref=t.userPreferences=t.useUserPref=void 0;const r=s(n(70079)),a=n(18420),l=n(94007);t.useUserPref=(e,n)=>{const[o,i]=r.useState((()=>{const o=t.userPreferences.getItem(e);return(0,a.isDefined)(o)?o:n}));r.useEffect((()=>{const o=t.userPreferences.getItem(e),s=(0,a.isDefined)(o)?o:n;i(s)}),[e]);return[o,n=>{t.userPreferences.setItem(e,n),i(n)}]},t.userPreferences=(()=>{const e=e=>`up.${e}`;return{getItem:t=>{const n=l.safeLocalStorage.getItem(e(t))||"",o=l.safeSessionStorage.getItem(e(t))||"";try{return JSON.parse(o||n).value}catch(i){return}},setItem:function(t,n,o){void 0===o&&(o=!1);const i=o?sessionStorage:l.safeLocalStorage;try{const o=JSON.stringify({value:n});return i.setItem(e(t),o),!0}catch(s){return console.error("Error saving user preference",s),!1}}}})();t.useResizePref=(e,n)=>{const o=`resize.${e}`;return(0,t.useUserPref)(o,n)};const u=e=>{const t=l.safeLocalStorage.getItem(e);if(!t)return null;try{return JSON.parse(t).value}catch(n){return null}};t.useLocalStorage=(e,t)=>{const[n,o]=r.useState(u(e)||t),i=r.useCallback((t=>{l.safeLocalStorage.setItem(e,JSON.stringify({value:t})),o(t)}),[e]);return r.useEffect((()=>{u(e)||l.safeLocalStorage.setItem(e,JSON.stringify({value:t}))}),[e,t,i]),[n,i]}},60190:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.totalEnergy=t.itrPhysics=t.hookes=t.coulombs=t.vToStr=t.vNorm=t.vLen=t.vSub=t.vAdd=t.vDiv=t.vMul=t.vZero=t.rnd=t.vec=t.size=void 0;t.size=(e,t)=>({width:e,height:t});t.vec=(e,t)=>({x:e,y:t});t.rnd=function(e,t){return void 0===e&&(e=100),void 0===t&&(t=0),Math.floor(Math.random()*(e-t))+t},t.vZero={x:0,y:0};t.vMul=(e,t)=>{let{x:n,y:o}=e;return{x:n*t,y:o*t}};t.vDiv=(e,n)=>{let{x:o,y:i}=e;return(0,t.vMul)({x:o,y:i},1/n)};t.vAdd=(e,t)=>({x:e.x+t.x,y:e.y+t.y});t.vSub=(e,n)=>(0,t.vAdd)(e,(0,t.vMul)(n,-1));t.vLen=e=>{let{x:t,y:n}=e;return Math.sqrt(t*t+n*n)};t.vNorm=e=>(0,t.vDiv)(e,(0,t.vLen)(e)||1);t.vToStr=e=>{let{x:t,y:n}=e;return`${t.toFixed(1)},${n.toFixed(1)}`};t.coulombs=(e,n,o)=>{const i=(0,t.vLen)((0,t.vSub)(e.p,n.p));if(0===i){const i=(0,t.vec)(2*Math.random()-1,2*Math.random()-1),s=e.m*n.m/Math.pow(10,2);return(0,t.vMul)(i,s*o)}{const s=(0,t.vNorm)((0,t.vSub)(n.p,e.p)),r=e.m*n.m/Math.pow(i+.1,2);return(0,t.vMul)(s,r*o)}};t.hookes=(e,n,o,i,s)=>{const r=(0,t.vLen)((0,t.vSub)(e.p,n.p)),a=(0,t.vNorm)((0,t.vSub)(e.p,n.p));let l=0;return r<o?l=o-r:r>i&&(l=i-r),(0,t.vMul)(a,s*l)};t.itrPhysics=(e,n)=>{const{p:o,v:i,f:s,m:r}=n,a=(0,t.vDiv)(s,r),l=e/1e3,u=(0,t.vAdd)((0,t.vMul)(a,l),i),d=(0,t.vAdd)((0,t.vMul)(u,l),o);return{...n,p:d,v:u,f:(0,t.vec)(0,0)}};t.totalEnergy=e=>e.reduce(((e,n)=>{const o=(0,t.vLen)(n.v);return e+.5*n.m*o*o}),0)},84472:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateToast=t.toastMsg=t.AppToaster=void 0;const o=n(50382);t.AppToaster=(()=>{try{return o.OverlayToaster.create({className:"app-toaster",position:o.Position.BOTTOM_RIGHT})}catch(e){return{}}})();t.toastMsg=(e,n,o)=>t.AppToaster.show({message:e,intent:n,timeout:o});t.updateToast=(e,n,o)=>t.AppToaster.show({message:n,intent:o},e)},18420:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.preventDefaultAnd=t.isLocal=t.fullTime=t.timeAgoFromDt=t.timeAgo=t.toString=t.isDefined=t.set=t.createOmap=t.toOmap=t.values=t.keys=t.entries=void 0;const i=n(7047),s=o(n(73136));t.entries=e=>Object.keys(e).map((t=>[t,e[t]]));t.keys=e=>Object.keys(e);t.values=e=>Object.keys(e).map((t=>e[t]));t.toOmap=e=>Array.from(e.entries()).reduce(((e,t)=>{let[n,o]=t;return{...e,[n]:o}}),{});t.createOmap=function(e){return void 0===e&&(e=[]),e.reduce(((e,t)=>({...e,[t[0]]:t[1]})),{})};t.set=(e,t,n)=>{e[t]=n};t.isDefined=e=>void 0!==e;t.toString=e=>{const t=typeof e;if(""===e)return"(empty string)";if((0,i.isJsxValue)(e))return"JSX Value";if("object"===t)try{const t=JSON.stringify(e);return"{}"===t?"Empty object":t}catch(n){return"Object (cannot stringify)"}return`${e}`};t.timeAgo=e=>(0,s.default)(new Date(e)).fromNow();t.timeAgoFromDt=e=>(0,s.default)(Date.now()-e).fromNow();t.fullTime=e=>(0,s.default)(new Date(e)).toString();t.isLocal=()=>location.href.includes(":300");t.preventDefaultAnd=e=>t=>{t.preventDefault(),e(t)}},63755:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AddMainPinModal=void 0;const a=n(35250),l=n(50382),u=n(44470),d=r(n(26372)),c=s(n(70079));t.AddMainPinModal=e=>{let{type:t,onAdd:n,onClose:o}=e;const[i,s]=c.default.useState(""),r=(0,c.useCallback)((()=>{n(t,i)}),[i,n,t]),p=(0,c.useMemo)((()=>{const e=(0,a.jsxs)(a.Fragment,{children:["Learn how to connect this flow with your casebase"," ",(0,a.jsx)("a",{href:"https://www.flyde.dev/docs/integrate-flows",children:"here"})]});switch(t){case"input":return(0,a.jsxs)(l.Callout,{intent:"primary",icon:(0,a.jsx)(u.InfoSign,{}),children:["Main inputs are Flyde's way of receiving external data.",(0,a.jsx)("div",{children:e})]});case"output":(0,a.jsxs)(l.Callout,{intent:"primary",icon:(0,a.jsx)(u.InfoSign,{}),children:["Main outputs are Flyde's way of emitting values externally.",(0,a.jsx)("div",{children:e})]})}}),[t]);return(0,a.jsxs)(l.Dialog,{isOpen:!0,onClose:o,className:"add-main-pin-modal",children:[(0,a.jsxs)("main",{className:(0,d.default)(l.Classes.DIALOG_BODY),tabIndex:0,children:[(0,a.jsxs)(l.FormGroup,{children:[(0,a.jsxs)("label",{className:l.Classes.LABEL,children:["New main ",t," name:"]}),(0,a.jsx)("input",{className:l.Classes.INPUT,type:"text",placeholder:"Enter name",value:i,onChange:e=>s(e.target.value)})]}),p]}),(0,a.jsx)("div",{className:l.Classes.DIALOG_FOOTER,children:(0,a.jsxs)("div",{className:l.Classes.DIALOG_FOOTER_ACTIONS,children:[(0,a.jsx)(l.Button,{onClick:o,children:"Close"}),(0,a.jsx)(l.Button,{onClick:r,intent:l.Intent.PRIMARY,children:"Add"})]})})]})}},68532:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(63755),t)},1237:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HelpBubble=void 0;const i=n(70079),s=n(35250),r=n(50382),a=n(99489),l=n(50382),u=o(n(70079)),d=n(68120),c=n(43490),p={offset:{enabled:!0,options:{offset:[0,20]}},preventOverflow:{enabled:!0,options:{padding:10}}};const f=["Viewport Controls","Editing","Selection"],m=[{title:"Core Concepts",link:"https://www.flyde.dev/docs/core-concepts/"},{title:"Integrate With Existing Code",link:"https://www.flyde.dev/docs/integrate-flows/"},{title:"Creating Custom Nodes",link:"https://www.flyde.dev/docs/custom-nodes/"},{title:"Trouble-shooting",link:"https://www.flyde.dev/docs/troubleshooting/"},{title:"Trigg - Cloud Managed Flyde",link:"https://www.trigg.dev/?ref=help-menu"}];t.HelpBubble=()=>{const[e,t]=u.default.useState(!1),n=Array.from(d.currentHotkeys.entries()).map((e=>{let[t,n]=e;return{combo:(o={key:t,menuData:n}).key,label:o.menuData.text,group:o.menuData.group};var o})).reduce(((e,t)=>(e[t.group]||(e[t.group]=[]),e[t.group].push(t),e)),{}),o=Object.entries(n).sort(((e,t)=>f.indexOf(t[0])-f.indexOf(e[0]))),{reportEvent:v}=(0,c.usePorts)(),g=(0,s.jsx)(r.Dialog,{isOpen:e,onClose:()=>t(!1),children:(0,s.jsx)("div",{className:r.Classes.DIALOG_BODY,children:o.map((e=>{let[t,n]=e;return(0,s.jsxs)(u.default.Fragment,{children:[(0,s.jsx)(r.H4,{children:t}),n.map((e=>(0,i.createElement)(a.Hotkey,{...e,key:e.combo})))]},t)}))})}),h=(0,s.jsxs)(r.Menu,{children:[m.map((e=>(0,s.jsx)(r.MenuItem,{text:e.title,onClick:()=>{v("helpMenuItem",{item:e.title})},href:e.link,target:"_blank"},e.title))),(0,s.jsx)(r.MenuDivider,{}),(0,s.jsx)(r.MenuItem,{text:"Discord",onClick:()=>v("helpMenuItem",{item:"discord"}),href:"https://discord.gg/x7t4tjZQP8",target:"_blank"}),(0,s.jsx)(r.MenuItem,{text:"Hotkeys",onClick:()=>{t(!0),v("helpMenuItem",{item:"hotkeys"})}}),(0,s.jsx)(r.MenuItem,{text:"Full Documentation",onClick:()=>v("helpMenuItem",{item:"documentation"}),href:"https://www.flyde.dev/docs",target:"_blank"})]});return(0,s.jsxs)("div",{className:"help-bubble","data-tip":"Help",children:[(0,s.jsx)(l.Popover,{content:h,modifiers:p,onOpened:()=>v("helpMenuOpen",{}),children:(0,s.jsx)(r.Button,{children:"Help"})}),g]})}},3354:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(1237),t)},63463:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createConfigurableInputEditor=t.ConfigurableInputEditor=void 0;const i=n(35250),s=n(50382),r=o(n(70079));t.ConfigurableInputEditor=function(e){let{value:t,onChange:n,valueRenderer:o,defaultStaticValue:a,modeLabel:l}=e;const u=r.default.useMemo((()=>o),[]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s.RadioGroup,{label:l,onChange:e=>{n({mode:e.currentTarget.value,value:"static"===e.currentTarget.value?a:void 0})},selectedValue:t.mode,inline:!0,children:[(0,i.jsx)(s.Radio,{label:"Static",value:"static"}),(0,i.jsx)(s.Radio,{label:"Dynamic",value:"dynamic"})]}),"static"===t.mode?(0,i.jsx)(u,{value:t.value,onChange:e=>{n({value:e,mode:"static"})}}):null]})};t.createConfigurableInputEditor=e=>n=>(0,i.jsx)(t.ConfigurableInputEditor,{...n,valueRenderer:e})},79354:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MacroInstanceEditor=void 0;const a=n(35250),l=n(50382),u=n(74762),d=r(n(26372)),c=n(14035),p=s(n(70079)),f=n(39936);t.MacroInstanceEditor=e=>{var t;const{deps:n,ins:o}=e,[i,s]=p.default.useState(o.macroData),r=(0,p.useMemo)((()=>{const e=n[o.macroId];if(!e||!(0,u.isMacroNodeDefinition)(e))throw new Error(`Macro ${o.macroId} not found `);return e}),[n,o.macroId]),m=(0,p.useMemo)((()=>{const e=n[o.macroId];if(!e||!(0,u.isMacroNodeDefinition)(e))throw new Error(`Macro ${o.macroId} not found `);return(0,f.loadMacroEditor)(e)}),[n,o]);return(0,a.jsxs)(l.Dialog,{isOpen:!0,title:`Edit ${null!==(t=r.displayName)&&void 0!==t?t:r.id} Configuration`,onClose:e.onCancel,className:"macro-instance-editor no-drag",children:[(0,a.jsx)("main",{className:(0,d.default)(l.Classes.DIALOG_BODY),tabIndex:0,children:(0,a.jsx)(c.ErrorBoundary,{fallback:(0,a.jsx)("span",{children:"bob"}),children:(0,a.jsx)(m,{value:i,onChange:s})})}),(0,a.jsx)("div",{className:l.Classes.DIALOG_FOOTER,children:(0,a.jsxs)("div",{className:l.Classes.DIALOG_FOOTER_ACTIONS,children:[(0,a.jsx)(l.Button,{onClick:e.onCancel,children:"Cancel"}),(0,a.jsx)(l.Button,{onClick:()=>e.onSubmit(i),intent:l.Intent.PRIMARY,className:"save-btn",children:"Save"})]})})]})}},36692:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleJsonEditor=void 0;const r=n(35250),a=n(50382),l=s(n(70079));t.SimpleJsonEditor=function(e){const[t,n]=l.default.useState(JSON.stringify(e.value,null,2)),[o,i]=l.default.useState(),s=(0,l.useCallback)((t=>{n(t.target.value);try{const n=JSON.parse(t.target.value);i(void 0),e.onChange(n)}catch(t){i(t.message)}}),[e]);return(0,r.jsx)(a.FormGroup,{label:e.label,intent:o?"danger":void 0,helperText:o,children:(0,r.jsx)(a.TextArea,{value:t,fill:!0,onChange:s})})}},7818:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildStructuredMacroEditorComp=t.MacroEditorFieldDefinitionRenderer=t.MacroEditorBaseValueComp=void 0;const o=n(35250),i=n(50382),s=n(36692),r=n(63463);function a(e){switch(e.config.value){case"number":return(0,o.jsx)(i.NumericInput,{value:e.value,onValueChange:t=>e.onChange(t)});case"string":return(0,o.jsx)(i.InputGroup,{value:e.value,onChange:t=>e.onChange(t.target.value)});case"json":return(0,o.jsx)(s.SimpleJsonEditor,{value:e.value,onChange:t=>e.onChange(t),label:e.config.label});case"boolean":return(0,o.jsx)(i.Checkbox,{checked:e.value,onChange:t=>e.onChange(t)});case"select":return(0,o.jsx)(i.HTMLSelect,{value:e.value,onChange:t=>e.onChange(t.target.value),children:e.config.items.map((e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value)))})}}function l(e){const{config:t}=e;return e.config.allowDynamic?(0,o.jsx)(r.ConfigurableInputEditor,{value:e.value,onChange:e.onChange,valueRenderer:n=>(0,o.jsx)(i.FormGroup,{label:`${t.label}:`,inline:!0,children:(0,o.jsx)(a,{value:n.value,onChange:n.onChange,config:e.config.type})}),modeLabel:`${e.config.label} mode:`,defaultStaticValue:e.config.defaultValue}):(0,o.jsx)(i.FormGroup,{label:`${t.label}:`,inline:!0,children:(0,o.jsx)(a,{value:e.value,onChange:e.onChange,config:e.config.type})})}t.MacroEditorBaseValueComp=a,t.MacroEditorFieldDefinitionRenderer=l,t.buildStructuredMacroEditorComp=function(e){return t=>(0,o.jsx)(o.Fragment,{children:e.fields.map((e=>(0,o.jsx)(l,{value:t.value[e.configKey],onChange:n=>t.onChange({...t.value,[e.configKey]:n}),config:e},e.configKey)))})}},25660:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(79354),t)},39936:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&__createBinding(t,e,n);return __setModuleDefault(t,e),t},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadMacroEditor=void 0;const jsx_runtime_1=__webpack_require__(35250),react_1=__importDefault(__webpack_require__(70079)),Blueprint=__importStar(__webpack_require__(50382)),BlueprintSelect=__importStar(__webpack_require__(70457)),buildStructuredMacroEditor_1=__webpack_require__(7818);function loadMacroEditor(macroNode){const w=window,{id:id,editorConfig:editorConfig}=macroNode,exportId=`__MacroNode__${id}`;if(w.React=react_1.default,w.Blueprint=Blueprint,w.BlueprintSelect=BlueprintSelect,"custom"!==editorConfig.type)return(0,buildStructuredMacroEditor_1.buildStructuredMacroEditorComp)(editorConfig);try{eval(editorConfig.editorComponentBundleContent);const compModule=w[exportId],comp=(null==compModule?void 0:compModule.default)||compModule;return comp?(w.Comp=comp,comp):function(){return(0,jsx_runtime_1.jsxs)("span",{children:["Failed to load macro node - please check that bundle that ",id," ","exposes an editable component to window.",exportId]})}}catch(e){return console.error(e),function(){return(0,jsx_runtime_1.jsxs)("span",{children:["Failed to load macro node - please check that bundle that ",id," ","exposes an editable component to window.",exportId]})}}}exports.loadMacroEditor=loadMacroEditor},7011:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MainInstanceEventsIndicator=void 0;const o=n(35250),i=n(30994),s=n(66189),r=n(50382);t.MainInstanceEventsIndicator=e=>{const{currentInsId:t,ancestorsInsIds:n}=e,{history:a,refreshHistory:l,resetHistory:u}=(0,s.useHistoryHelpers)(t),d=`main-indicator-${t}}`;return(0,o.jsx)("div",{className:"main-instance-events-indicator",children:(0,o.jsx)(r.Tooltip,{content:(0,s.calcHistoryContent)(a),children:(0,o.jsx)("span",{onMouseEnter:l,onMouseOut:u,id:(0,i.getMainInstanceIndicatorDomId)(t,n),className:"status-text","data-tip":"","data-html":!0,"data-for":d})})})}},22714:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(7011),t)},15617:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AddNodeMenu=t.AddNodeMenuFilterTree=void 0;const a=n(35250),l=n(50382),u=n(74762),d=r(n(26372)),c=s(n(70079)),p=n(43490),f=n(31745),m=n(17102),v=n(84418),g=n(95385),h=n(44470);t.AddNodeMenuFilterTree=l.Tree.ofType();function y(e,t,n){return[...e.external.map((e=>({id:e.module,label:e.module,hasCaret:!0,nodeData:{type:"external",module:e.module},isSelected:"external"===(null==t?void 0:t.type)&&t.module===e.module,isExpanded:n.has(e.module),childNodes:e.namespaces.map((o=>({id:`${e.module}/${o}`,label:o,hasCaret:!1,isSelected:"external"===(null==t?void 0:t.type)&&t.module===e.module&&t.namespace===o,isExpanded:n.has(`${e.module}/${o}`),nodeData:{type:"external",module:e.module,namespace:o}})))}))),{id:"internal",label:"Current Project",nodeData:{type:"internal"},isExpanded:n.has("internal"),hasCaret:!0,isSelected:"internal"===t.type,childNodes:e.internal.files.map((e=>({id:e,label:e,isSelected:"internal"===t.type&&t.file===e,hasCaret:!1,isExpanded:n.has(e),nodeData:{type:"internal",file:e}})))}]}function b(e){return/\.flyde(\.[jt]s)?$/.test(e.module)}t.AddNodeMenu=e=>{const{onRequestImportables:n,onAddNode:o,onClose:i}=e,[s,r]=c.default.useState(),[I,_]=c.default.useState([]),[x,C]=c.default.useState(new Set),[j,w]=c.default.useState(""),[E,O]=c.default.useState({type:"all"}),[N,S]=c.default.useState(null),[P,D]=c.default.useState(null),[T,M]=c.default.useState(null),k=(0,c.useCallback)((e=>{x.add(e.id),C(new Set(x))}),[x]),R=(0,c.useCallback)((e=>{x.delete(e.id),C(new Set(x))}),[x]),A=(0,c.useCallback)((e=>{o(e),i()}),[o,i]),{onInstallRuntimeRequest:V,reportEvent:z}=(0,p.usePorts)();(0,c.useEffect)((()=>{z("addNodeMenuOpen",{})}),[z]),(0,c.useEffect)((()=>{D(null==s?void 0:s.flatMap((e=>{var t,n,o,i;if(E)if("external"===E.type){if((e.module!==E.module||E.namespace)&&e.node.namespace!==E.namespace)return[]}else if("internal"===E.type&&(!b(e)||E.file&&e.module!==E.file))return[];if(j){const s=`${null!==(n=null===(t=e.node.searchKeywords)||void 0===t?void 0:t.join(" "))&&void 0!==n?n:[]} ${e.node.id} ${null!==(o=e.node.displayName)&&void 0!==o?o:""} ${null!==(i=e.node.namespace)&&void 0!==i?i:""} ${e.node.description}`.toLowerCase().indexOf(j.toLowerCase());return-1===s?[]:[{importable:e,score:s}]}return[{importable:e,score:1}]})).sort(((e,t)=>e.score-t.score)).map((e=>{let{importable:t}=e;return t})))}),[s,E,j]),(0,c.useEffect)((()=>{n().then((e=>{let{importables:t,errors:n}=e;_(n);const o=t.filter((e=>!b(e))).reduce(((e,t)=>{var n,o,i;null!==(n=e[i=t.module])&&void 0!==n||(e[i]=[]);const s=null!==(o=t.node.namespace)&&void 0!==o?o:"";return e[t.module].includes(s)||e[t.module].push(s),e}),{}),i=t.filter(b).map((e=>e.module));S({external:Object.entries(o).map((e=>{let[t,n]=e;return{module:t,namespaces:n}})),internal:{files:i}}),r(t),C(new Set(["internal",...Object.keys(o)]))}))}),[n]);const L=(0,c.useCallback)((e=>{switch(e.key){case"ArrowDown":case"ArrowUp":if(e.preventDefault(),P&&!T)return void M(P["ArrowDown"===e.key?0:P.length-1]);if(P&&T){const t=P.findIndex((e=>e===T));let n="ArrowDown"===e.key?t+1:t-1;n=n<0?P.length-1:n,n=n>=P.length?0:n,M(P[n])}break;case"Enter":T&&A(T)}}),[P,T,A]),$=(0,c.useCallback)((e=>{let{nodeData:t}=e;JSON.stringify(t)===JSON.stringify(E)?"external"===t.type?t.namespace?O({type:"external",module:t.module}):O({type:"all"}):"internal"===t.type&&(t.file?O({type:"internal"}):O({type:"all"})):O(t)}),[E]),H=!s||s.some((e=>e.module.includes("@flyde/stdlib"))),q=(0,c.useCallback)((()=>{V(),i()}),[i,V]);return(0,a.jsx)(l.Dialog,{isOpen:!0,title:"Add Node Menu",onClose:e.onClose,className:"add-node-menu",isCloseButtonShown:!0,children:(0,a.jsxs)("main",{className:(0,d.default)(l.Classes.DIALOG_BODY),children:[(0,a.jsxs)("header",{children:[(0,a.jsxs)("div",{className:"bp5-input-group",children:[(0,a.jsx)(h.Search,{}),(0,a.jsx)("input",{className:"bp5-input",type:"search",placeholder:"Search input",dir:"auto",autoFocus:!0,onChange:e=>w(e.target.value),value:j,onKeyDown:L})]}),H?null:(0,a.jsxs)(l.Callout,{intent:l.Intent.NONE,style:{marginTop:10},children:["Using built-in @flyde/stdlib. It's recommended to explicitly install it instead."," ",(0,a.jsx)(l.Button,{minimal:!0,small:!0,intent:l.Intent.PRIMARY,onClick:q,children:"Click here to install it using npm/yarn"})]})]}),(0,a.jsx)("div",{className:"content-wrapper",children:s?(0,a.jsxs)(c.default.Fragment,{children:[(0,a.jsxs)("aside",{children:[(0,a.jsxs)("div",{className:"filter-header",children:["Filter by package"," ",(0,a.jsx)(l.Tooltip,{content:(0,a.jsxs)("span",{children:["Click to learn more about how packages work in Flyde"," "]}),hoverCloseDelay:1500,children:(0,a.jsx)("a",{target:"_blank",href:"https://www.flyde.dev/docs/packages",rel:"noreferrer",children:(0,a.jsx)(l.Icon,{icon:(0,a.jsx)(h.Help,{}),intent:"primary",iconSize:12})})})]}),(0,a.jsx)("div",{className:"tree-container",children:(0,a.jsx)(t.AddNodeMenuFilterTree,{contents:y(N,E,x),onNodeCollapse:R,onNodeExpand:k,onNodeClick:$,className:l.Classes.ELEVATION_0})})]}),(0,a.jsx)("main",{children:P?0===P.length?(0,a.jsxs)("div",{className:"no-results",children:[(0,a.jsx)(g.AddNodeMenuResultsSummary,{filter:E,onChangeFilter:O,query:j,onChangeQuery:w,resultsCount:P.length}),(0,a.jsxs)(l.Callout,{className:"callout",intent:"primary",children:["Can't find a suitable node? Create one yourself!"," ",(0,a.jsx)("a",{href:"https://www.flyde.dev/docs/code-nodes",target:"_blank",rel:"noreferrer",children:"Learn more"})]})]}):(0,a.jsxs)(c.default.Fragment,{children:[(0,a.jsx)(g.AddNodeMenuResultsSummary,{filter:E,onChangeFilter:O,query:j,onChangeQuery:w,resultsCount:P.length}),(0,a.jsx)("div",{className:"results",children:P.map((e=>(0,a.jsx)(v.AddNodeMenuListItem,{importableNode:e,onAdd:A,selected:(null==T?void 0:T.node)===e.node,onSelect:M,onSetFilter:O},e.node.id+e.node.namespace+e.module)))})]}):(0,a.jsx)(m.Loader,{})})]}):(0,a.jsx)(m.Loader,{})}),I.length>0?(0,a.jsxs)(l.Callout,{intent:"warning",style:{marginTop:"10px"},children:["Found ",(0,u.simplePluralize)(I.length,"corrupt flow"),(0,a.jsx)(f.InfoTooltip,{content:I.map((e=>{let{path:t,message:n}=e;return`${t}: ${n}`})).join(", ")})," "]}):null]})})}},2470:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AddNodeMenuListItem=void 0;const a=n(35250),l=n(50382),u=r(n(26372)),d=s(n(70079));t.AddNodeMenuListItem=e=>{const{importableNode:t,onSetFilter:n,onAdd:o,onSelect:i}=e,{node:s,module:r}=t,{id:c,description:p,displayName:f}=s,m=d.default.useRef(null);d.default.useEffect((()=>{e.selected&&m.current&&m.current.scrollIntoView({block:"center"})}),[e.selected]);const v=(0,d.useCallback)((()=>{o(t)}),[o,t]),g=(0,d.useCallback)((()=>{i(t)}),[i,t]);return(0,a.jsxs)("div",{className:(0,u.default)("add-node-menu-list-item",{selected:e.selected}),ref:m,onClick:g,children:[(0,a.jsxs)("div",{className:"content",children:[(0,a.jsxs)("header",{children:[(0,a.jsx)("span",{className:"name",children:null!=f?f:c}),(0,a.jsxs)(l.Tag,{interactive:!0,onClick:()=>n({type:"external",module:r,namespace:s.namespace}),className:"source",minimal:!0,children:[r,s.namespace?` / ${s.namespace}`:null]})]}),(0,a.jsx)("div",{className:"description",children:p||(0,a.jsx)("em",{children:"No description"})})]}),(0,a.jsx)("aside",{children:(0,a.jsx)(l.Button,{onClick:v,children:"Add"})})]})}},84418:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(2470),t)},63582:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddNodeMenuResultsSummary=void 0;const o=n(35250),i=n(50382);t.AddNodeMenuResultsSummary=e=>{const{resultsCount:t,query:n,filter:s,onChangeFilter:r,onChangeQuery:a}=e;return(0,o.jsxs)("div",{className:"add-node-menu-results-summary",children:[t?`Showing ${t} result${t>1?"s":""}`:"No results found","\xa0",n?(0,o.jsxs)(o.Fragment,{children:["matching query\xa0",(0,o.jsxs)(i.Tag,{minimal:!0,interactive:!0,onRemove:()=>a(""),children:['"',n,'"']})]}):null,"all"===s.type?null:"external"===s.type?(0,o.jsxs)(o.Fragment,{children:["from \xa0",(0,o.jsxs)(i.Tag,{minimal:!0,interactive:!0,onRemove:()=>r({type:"all"}),children:["package ",s.module,s.namespace?` / ${s.namespace}`:null]})]}):(0,o.jsxs)(o.Fragment,{children:["from \xa0",(0,o.jsxs)(i.Tag,{minimal:!0,interactive:!0,onRemove:()=>r({type:"all"}),children:["\xa0this project ",s.file?` / ${s.file}`:null]})]})]})}},95385:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(63582),t)},90542:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(15617),t)},15742:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.NodesLibrary=void 0;const a=n(35250),l=n(50382),u=r(n(26372)),d=s(n(70079)),c=n(86125),p=n(90542),f=n(30653),m=n(77852);t.NodesLibrary=(0,d.memo)((e=>{var t,n;const{groups:o}=e,[i,s]=d.default.useState(!1),[r,v]=d.default.useState(!1),g=(0,m.useIsFirstRender)(),[h,y]=d.default.useState(!1),{onRequestImportables:b}=(0,c.useDependenciesContext)(),I=(0,f.useDarkMode)(),[_,x]=(0,d.useState)(null!==(n=null===(t=o[0])||void 0===t?void 0:t.title)&&void 0!==n?n:"");return(0,d.useEffect)((()=>{g||v(!0)}),[i]),(0,d.useEffect)((()=>{o.length&&x(o[0].title)}),[o]),(0,a.jsxs)("div",{className:(0,u.default)("nodes-library",{closed:i,open:!i,animate:r,dark:I}),children:[(0,a.jsx)("div",{className:"header",onClick:()=>s(!i),children:(0,a.jsx)("strong",{children:"Nodes Library"})}),(0,a.jsx)("div",{className:"list",children:o.map((t=>(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:(0,u.default)("group-title",{open:_===t.title,selected:_===t.title}),onClick:()=>x(t.title),children:t.title}),(0,a.jsx)("div",{className:"group-items",children:t.nodes.map((t=>{var n;return(0,a.jsx)("div",{className:"group-item",onClick:()=>e.onAddNode({module:"@flyde/stdlib",node:t}),children:(0,a.jsx)(l.Tooltip,{content:t.description,portalClassName:"menu-tooltip",compact:!0,minimal:!0,children:null!==(n=t.displayName)&&void 0!==n?n:t.id})})}))})]})))}),(0,a.jsx)("div",{className:"view-all-container",children:(0,a.jsx)("div",{className:"view-all",children:(0,a.jsx)(l.Button,{minimal:!0,small:!0,onClick:()=>y(!0),intent:"primary",children:"View all"})})}),h?(0,a.jsx)(p.AddNodeMenu,{onRequestImportables:b,onAddNode:e.onAddNode,onClose:()=>y(!1)}):null]})}))},86997:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(15742),t)},90911:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RunFlowModal=void 0;const a=n(35250),l=s(n(70079)),u=r(n(51848)),d=n(50382),c=r(n(26372)),p=n(90680),f=n(31745),m=n(43490);t.RunFlowModal=l.memo((function(e){const{onClose:t,node:n}=e,{onRunFlow:o}=(0,m.usePorts)(),[i,s]=l.useState(0),[r,v]=(0,p.useLocalStorage)(`run-inputs-${n.id}`,Object.keys(n.inputs).reduce(((e,t)=>(e[t]=`Enter a value for input ${t}`,e)),{})),[g,h]=l.useState(JSON.stringify(r,null,2)),y=e=>{e&&e.updateOptions({lineNumbers:"off",minimap:{enabled:!1}})},b=l.useCallback((()=>{const e=JSON.parse(g);v(e),o(e,i),t()}),[g,v,o,i,t]),I=Object.keys(n.inputs),_=I.filter((e=>"required"!==n.inputs[e].mode)),x=l.useMemo((()=>I.length?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("strong",{children:"This node receives external inputs. Enter values for each input below:"}),(0,a.jsx)(u.default,{height:"80px",theme:"vs-dark",defaultLanguage:"json",value:g,onChange:e=>h(null!=e?e:""),onMount:y}),_.length>0?(0,a.jsxs)(d.Callout,{intent:d.Intent.NONE,children:["Note: input(s) ",(0,a.jsx)("code",{children:_.join(", ")})," are optional"]}):null]}):(0,a.jsx)("strong",{children:"This node does not receive any external inputs."})),[I.length,_,g]);return(0,a.jsxs)(d.Dialog,{isOpen:!0,onClose:e.onClose,className:"run-flow-modal",children:[(0,a.jsxs)("main",{className:(0,c.default)(d.Classes.DIALOG_BODY),onKeyDown:e=>{"Enter"===e.key&&e.metaKey&&b()},tabIndex:0,children:[x,(0,a.jsxs)("div",{className:"execution-delay-wrapper",children:[(0,a.jsxs)("label",{children:["Execution delay:"," ",(0,a.jsx)(f.InfoTooltip,{content:"Delay between each node execution. Useful for debugging."})]}),(0,a.jsx)(d.Slider,{value:i,onChange:s,min:0,labelStepSize:500,stepSize:100,labelRenderer:e=>`${e}ms`,max:1e3})]})]}),(0,a.jsx)("div",{className:d.Classes.DIALOG_FOOTER,children:(0,a.jsxs)("div",{className:d.Classes.DIALOG_FOOTER_ACTIONS,children:[(0,a.jsx)(d.Button,{onClick:t,children:"Close"}),(0,a.jsx)(d.Button,{onClick:b,intent:d.Intent.PRIMARY,className:"run-btn",children:"Run"})]})})]})}))},80589:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(90911),t)},38370:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionIndicator=void 0;const i=n(35250),s=n(50382),r=n(70079),a=n(30653),l=o(n(26372));t.SelectionIndicator=e=>{const{selection:t,onCenter:n,onGroup:o,onDelete:u}=e,d=(0,a.useDarkMode)(),c=(0,r.useMemo)((()=>{switch(t.type){case"input":return(0,i.jsxs)("span",{children:[(0,i.jsxs)("strong",{children:['"',t.pinId,'"']})," input selected"]});case"output":return(0,i.jsxs)("span",{children:[(0,i.jsxs)("strong",{children:['"',t.pinId,'"']})," output selected"]});case"instances":return(0,i.jsxs)("span",{children:[t.ids.length," instance",t.ids.length>1?"s":""," selected"]})}}),[t]);return(0,i.jsxs)("div",{className:(0,l.default)("selection-indicator",{dark:d}),children:[c," ",(0,i.jsx)(s.Button,{onClick:n,small:!0,minimal:!0,outlined:!0,children:"Center"}),"instances"===t.type?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.Button,{onClick:o,small:!0,minimal:!0,outlined:!0,children:"Group"}),(0,i.jsx)(s.Button,{onClick:()=>u(t.ids),small:!0,minimal:!0,outlined:!0,intent:"danger",children:"Delete"})]}):null]})}},8319:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(38370),t)},63521:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VisualNodeEditor=t.defaultBoardData=t.defaultViewPort=t.NODE_HEIGHT=void 0;const a=n(35250),l=s(n(70079)),u=n(74762),d=n(86553),c=n(65082),p=n(18420),f=n(26701),m=n(7047),v=n(53865),g=n(70079),h=n(68120),y=r(n(27942)),b=n(50382),I=n(66005),_=n(60190),x=n(71033),C=n(74762),j=n(99942),w=n(44338),E=n(561),O=n(84472),N=n(82232),S=n(65758),P=n(43490),D=r(n(26372)),T=n(25044),M=n(80510),k=n(2130),R=n(88593),A=n(97106),V=n(22714),z=n(3354),L=n(41032),$=n(30653),H=n(25660),q=n(8319),F=n(86997),G=n(80589),B=n(44470),U=n(68532),W=l.memo(b.Slider),J=()=>null;t.NODE_HEIGHT=28,t.defaultViewPort={pos:{x:0,y:0},zoom:1},t.defaultBoardData={selected:[],viewPort:t.defaultViewPort,lastMousePos:{x:0,y:0}},t.VisualNodeEditor=l.memo(l.forwardRef(((e,n)=>{const{onChangeNode:o,nodeIoEditable:i,onCopy:s,onGoToNodeDef:r,onInspectPin:Y,boardData:Z,onChangeBoardData:Q,currentInsId:X,ancestorsInsIds:ee,node:te,resolvedDependencies:ne,queuedInputsData:oe,initialPadding:ie,disableScrolling:se}=e,{onImportNode:re,libraryData:ae}=(0,A.useDependenciesContext)(),le=(0,$.useDarkMode)(),{reportEvent:ue}=(0,P.usePorts)(),de=e.parentViewport||t.defaultViewPort,[ce,pe]=(0,g.useState)({...ne,[te.id]:te});(0,g.useEffect)((()=>{pe({...ne,[te.id]:te})}),[ne,te]);const{selected:fe,from:me,to:ve}=Z,{instances:ge,connections:he,inputsPosition:ye,outputsPosition:be,inputs:Ie,outputs:_e}=te,[xe,Ce]=(0,g.useState)(),[je,we]=(0,g.useState)(),Ee=void 0===ee,[Oe,Ne]=(0,g.useState)(),[Se,Pe]=(0,g.useState)(!1),[De,Te]=(0,g.useState)(!1),[Me,ke]=(0,g.useState)(),[Re,Ae]=(0,g.useState)(),[Ve,ze]=(0,g.useState)(),[Le,$e]=(0,g.useState)(),He=(0,g.useRef)();(0,f.useDidMount)((()=>{He.current=et.current.querySelector(".inline-editor-portal-root")}));const qe=(0,P.useConfirm)(),Fe=(0,P.usePrompt)(),Ge=Z.viewPort,Be=(0,g.useRef)(!0),[Ue,We]=(0,g.useState)(null),Je=l.useCallback((e=>{Q({viewPort:e})}),[Q]),Ke=l.useCallback(((e,t)=>Y(e,t)),[Y]),Ye=l.useCallback(((e,t,n)=>{const i=(0,M.handleConnectionCloseEditorCommand)(te,{from:e,to:t});o(i,(0,N.functionalChange)("close-connection")),Q({from:void 0,to:void 0}),ue("createConnection",{source:n})}),[o,Q,te,ue]),Ze=l.useCallback((async()=>{const e=await Fe("New visual node name?");if(!e)return;const{currentNode:t}=await(0,S.groupSelected)(Z.selected,te,e,"inline",Fe);o(t,(0,N.functionalChange)("group node")),Q({selected:[]}),(0,O.toastMsg)("Node grouped"),ue("groupSelected",{count:Z.selected.length})}),[Fe,Z.selected,te,o,Q,ue]);(0,g.useEffect)((()=>{if(Oe){const e=setTimeout((()=>{Ne(void 0)}),350);return()=>clearTimeout(e)}}),[Oe]);const[Qe,Xe]=(0,g.useState)();(0,g.useEffect)((()=>{(0,E.preloadMonaco)()}),[]);const et=(0,g.useRef)(),tt=(0,y.default)(et),nt=l.useRef({x:400,y:400}),ot=(0,f.useBoundingclientrect)(et)||_.vZero,it=()=>{const e=(0,m.fitViewPortToNode)(te,ce,tt);(0,m.animateViewPort)(Ge,e,500,(e=>{Je(e)}))},st=l.useCallback(((e,t)=>{const{to:n,from:o}=Z,i="input"===t?o:n,s="input"===t?n:o,r={pinId:e,insId:u.THIS_INS_ID},a="input"===t?{from:r}:{to:r};i&&i.pinId===e?Q({from:void 0,to:void 0}):s?"input"===t&&n?Ye(r,n,"nodeIoClick"):o&&Ye(o,r,"nodeIoClick"):Q(a)}),[Z,Q,Ye]),rt=l.useCallback(((e,t,n)=>{const i=(0,v.produce)(te,(o=>{"input"===e?o.inputs[t].description=n:o.outputs[t].description=n}));o(i,(0,N.functionalChange)("Node io description"))}),[o,te]),at=l.useCallback(((e,t,n)=>{const{from:o,to:i}=Z;if(me&&me.insId===e.id||ve&&ve.insId===e.id)Q({from:void 0,to:void 0});else if("input"===n){const n={insId:e.id,pinId:t};!i||i.pinId!==t||(0,u.isInternalConnectionNode)(i)&&i.insId!==e.id?me?Ye(me,n,"pinClick"):Q({to:n,selected:[]}):Q({to:void 0})}else{const n={insId:e.id,pinId:t};!o||o.pinId!==t||(0,u.isInternalConnectionNode)(o)&&o.insId!==e.id?ve?Ye(n,ve,"pinClick"):Q({from:n,selected:[]}):Q({from:void 0})}}),[Z,me,Q,Ye,ve]);(0,g.useEffect)((()=>{if(!Se&&tt.width){const t=(0,m.fitViewPortToNode)(te,ce,tt,ie);Je(t);const n=setTimeout((()=>{const t=(0,m.fitViewPortToNode)(te,ce,tt,ie);e.thumbnailMode||Je(t),Pe(!0)}),100);return()=>clearTimeout(n)}}),[te,ie,tt,e.thumbnailMode,Se,ce,Je]);const lt=l.useCallback((()=>{const{selected:e}=Z,t=te.instances.filter((t=>e.includes(t.id))).map((e=>({...e,id:e.id+"-copy"}))),n=te.connections.filter((t=>{let{from:n,to:o}=t;return e.includes(n.insId)&&e.includes(o.insId)}));s({instances:t,connections:n})}),[Z,s,te]),ut=l.useCallback((()=>{const{newNode:t,newInstances:n}=(0,T.pasteInstancesCommand)(te,nt.current,e.clipboardData);o(t,(0,N.functionalChange)("paste instances")),Q({selected:n.map((e=>e.id))})}),[o,Q,te,e.clipboardData]),dt=l.useCallback((()=>{const e=te.id;Qe?"input"===Qe.type?Qe.ins.id===e?st(Qe.pin,"input"):at(Qe.ins,Qe.pin,"input"):Qe.ins.id===e?st(Qe.pin,"output"):at(Qe.ins,Qe.pin,"output"):console.warn("tried selecting closest with no pin nearby")}),[te.id,Qe,st,at]),ct=l.useCallback(((e,t)=>{const n=Math.min(Math.max(e,.1),3),o="mouse"===t?nt.current:{x:Ge.pos.x+tt.width/2,y:Ge.pos.y+tt.height/2},i=(0,m.centerBoardPosOnTarget)(o,tt,n,Ge);Je({...Ge,zoom:n,pos:i})}),[Je,Ge,tt]);(0,h.useHotkeys)("cmd+=",(e=>{ct(Ge.zoom+.1,"hotkey"),e.preventDefault()}),{text:"Zoom in board",group:"Viewport Controls"},[Ge,ct],Be),(0,h.useHotkeys)("cmd+-",(e=>{ct(Ge.zoom-.1,"hotkey"),e.preventDefault()}),{text:"Zoom out board",group:"Viewport Controls"},[ct,Ge.zoom],Be),(0,h.useHotkeys)("cmd+o",(e=>{e.preventDefault(),(0,O.toastMsg)("Ordering");const t=[];(0,j.orderVisualNode)(te,ce,200,((e,n)=>{n%3==0&&t.push(e)})),(async()=>{for(;t.length;){const e=t.shift();(0,O.toastMsg)(`Step ${t.length}!`),await(0,u.delay)(200),o(e,(0,N.metaChange)("order-step")),(0,O.toastMsg)(`Step ${t.length}! done`)}})()}),{text:"Auto-layout (experimental)",group:"Misc."},[o,te,ne],Be),(0,h.useHotkeys)("cmd+0",(e=>{ct(1),e.preventDefault()}),{text:"Reset zoom",group:"Viewport Controls"},[Ge,ct],Be);const pt=()=>{Q({from:void 0,to:void 0,selected:[]})},ft=l.useCallback(((e,t)=>{Ce(e.id),o({...te},(0,N.metaChange)("drag-start"))}),[o,te]),mt=l.useCallback(((e,t,n)=>{const{newValue:i,newSelected:s}=(0,m.handleInstanceDrag)(te,e,n,t,fe,xe);o(i,(0,N.metaChange)("drag-move")),s&&Q({selected:s})}),[xe,o,Q,fe,te]),vt=l.useCallback(((e,t)=>{t.preventDefault(),t.stopPropagation(),Ce(void 0)}),[]),gt=l.useCallback(((e,t)=>{t.preventDefault(),t.stopPropagation(),Ce(u.THIS_INS_ID)}),[]),ht=l.useCallback((async(t,n,o,i)=>{o.preventDefault(),o.stopPropagation();const{x:s,y:r}=i,a=(0,v.produce)(te,(e=>{"input"===t?e.inputsPosition[n]={x:s,y:r}:e.outputsPosition[n]={x:s,y:r}}));e.onChangeNode(a,(0,N.metaChange)("node-io-drag-move"))}),[e,te]),yt=l.useCallback((async(e,t,n,o)=>{n.preventDefault(),n.stopPropagation(),Ce(void 0)}),[]),bt=l.useCallback(((e,t)=>{let{id:n}=e;const o=t.shiftKey?fe.filter((e=>e!==n)):[],i=t.shiftKey?[...fe,n]:[n],s=fe.includes(n)?o:i;Q({selected:s,from:void 0,to:void 0})}),[Q,fe]),It=l.useCallback((()=>{const e=te.instances.map((e=>e.id));Q({selected:e,from:void 0,to:void 0})}),[Q,te.instances]),_t=l.useCallback((e=>{const t=he.filter((t=>{let{from:n,to:o}=t;return-1===e.indexOf(n.insId)&&-1===e.indexOf(o.insId)})),n=(0,v.produce)(te,(n=>{n.connections=t,n.instances=n.instances.filter((t=>!e.includes(t.id)))}));Q({selected:[]}),o(n,(0,N.functionalChange)("delete-ins"))}),[he,o,Q,te]),xt=l.useCallback((e=>{_t([e.id])}),[_t]),Ct=l.useCallback(((e,t)=>{const n=(0,v.produce)(te,(n=>{"input"===e?(delete n.inputs[t],n.connections=n.connections.filter((e=>!((0,u.isExternalConnectionNode)(e.from)&&e.from.pinId===t)))):(n.connections=n.connections.filter((e=>!((0,u.isExternalConnectionNode)(e.to)&&e.to.pinId===t))),n.completionOutputs=(n.completionOutputs||[]).map((e=>e.split("+").filter((e=>e!==t)).join("+"))).filter((e=>!!e)),delete n.outputs[t])}));me&&me.insId===u.THIS_INS_ID&&me.pinId===t?Q({from:void 0}):ve&&ve.insId===u.THIS_INS_ID&&ve.pinId===t&&Q({to:void 0}),o(n,(0,N.functionalChange)("remove io pin"))}),[te,me,ve,o,Q]),jt=l.useCallback((async()=>{const{selected:e,from:t,to:n}=Z;0===e.length?t&&(0,u.isExternalConnectionNode)(t)?await qe(`Are you sure you want to remove main input ${t.pinId}?`)&&Ct("input",t.pinId):n&&(0,u.isExternalConnectionNode)(n)&&await qe(`Are you sure you want to remove main output ${n.pinId}?`)&&Ct("output",n.pinId):_t(e)}),[qe,Z,_t,Ct]),wt=l.useCallback(((e,t,n)=>{const i=(0,m.getInstancePinConfig)(te,e.id,t),s=(0,u.isStickyInputPinConfig)(i)?(0,C.queueInputPinConfig)():(0,u.stickyInputPinConfig)();o((0,m.changePinConfig)(te,e.id,t,s),(0,N.functionalChange)("toggle-sticky")),ue("togglePinSticky",{isSticky:(0,u.isStickyInputPinConfig)(s)})}),[o,te,ue]),Et=l.useCallback((()=>{const{newNode:e,newInstances:t}=(0,k.handleDuplicateSelectedEditorCommand)(te,fe);o(e,(0,N.functionalChange)("duplicated instances")),Q({selected:t.map((e=>e.id))})}),[o,Q,te,fe]),Ot=l.useCallback((e=>{const t=e.nativeEvent.target;if(0===e.button&&K(e.nativeEvent,te.id)&&t&&"board-editor-inner"===t.className){const t={x:e.clientX,y:e.clientY},n=(0,_.vSub)(t,ot),o=(0,m.domToViewPort)(n,Ge,de);we({from:o,to:o})}}),[te.id,Ge,ot,de]),Nt=l.useCallback((e=>{if(We(null),K(e.nativeEvent,te.id)&&je){if((0,m.calcSelectionBoxArea)(je)>50){const t=(0,m.getInstancesInRect)(je,ce,Ge,Yt.current,te.instances,ot,de),n=e.shiftKey?[...fe,...t]:t;Q({selected:n})}we(void 0)}}),[te.id,te.instances,je,ce,Ge,ot,de,fe,Q]),St=l.useCallback((e=>{if(!K(e.nativeEvent,te.id))return void(Be.current=!1);Be.current=!0;const t={x:e.clientX,y:e.clientY},n=(0,_.vSub)(t,(0,_.vAdd)(ot,_.vZero)),o=(0,m.domToViewPort)(n,Ge,de);je&&we({...je,to:o});const i=(0,m.findClosestPin)(te,ce,n,ot,X,ee,Ge),s=Qe;if(i){(!s||s.ins!==i.ins||s.ins===i.ins&&s.pin!==i.pin)&&Xe({ins:i.ins,type:i.type,pin:i.id})}nt.current=o,Q({lastMousePos:nt.current})}),[te,ot,Ge,de,je,ce,X,ee,Qe,Q]),Pt=l.useCallback((e=>{var t;"bp5-menu"!==(null===(t=e.relatedTarget)||void 0===t?void 0:t.className)&&(Xe(void 0),Be.current=!1)}),[]),Dt=l.useCallback(((e,t)=>{if(t){if((0,u.isMacroNodeInstance)(e))return void(0,O.toastMsg)("Cannot edit macro node instance");const t=(0,u.isInlineNodeInstance)(e)?e.node:(0,L.safelyGetNodeDef)(e.nodeId,ce);if(!t)throw new Error("Impossible state inspecting inexisting node");if(!(0,u.isVisualNode)(t))return void(0,O.toastMsg)("Cannot inspect a non visual node","warning");ze({insId:`${X}.${e.id}`,node:t})}else if((0,u.isRefNodeInstance)(e)){const t=(0,L.safelyGetNodeDef)(e,ce);r(t)}else{if((0,u.isInlineNodeInstance)(e)){const t=e.node;return void((0,u.isVisualNode)(t)?ze({insId:e.id,node:t}):(0,O.toastMsg)("Editing this type of node is not supported"))}(0,u.isResolvedMacroNodeInstance)(e)?$e({ins:e}):(0,O.toastMsg)("Editing this type of node is not supported")}}),[r,ce,X]),Tt=l.useCallback((e=>{if((0,u.isInlineNodeInstance)(e)){const t=e.node;if(!(0,u.isVisualNode)(t))return void(0,O.toastMsg)("Not supported","warning");const n=(0,v.produce)(te,(n=>{n.instances=n.instances.filter((t=>t.id!==e.id)),n.connections=n.connections.filter((t=>{let{from:n,to:o}=t;return n.insId!==e.id&&o.insId!==e.id})),n.instances.push(...t.instances),n.connections.push(...t.connections.filter((e=>(0,u.isInternalConnectionNode)(e.from)&&(0,u.isInternalConnectionNode)(e.to))))}));o(n,{type:"functional",message:"ungroup"}),Q({selected:[]})}else(0,O.toastMsg)("Cannot ungroup an imported group")}),[te,o,Q]),Mt=l.useCallback((async e=>{}),[]),kt=l.useCallback(((e,t)=>{if(!t)return;const n=(0,v.produce)(te,(n=>{var o;"input"===e?(te.inputs||(n.inputs={}),n.inputs[t]=(0,u.nodeInput)(),n.inputsPosition[t]=nt.current):(te.outputs||(n.outputs={}),n.outputs[t]=(0,u.nodeOutput)(),n.outputsPosition[t]=nt.current,(null===(o=n.completionOutputs)||void 0===o?void 0:o.length)&&(0,O.toastMsg)("Note that this node has explicit completion outputs set. You may need to update them."))}));o(n,(0,N.functionalChange)("add new io pin")),ue("addIoPin",{type:e}),ke(void 0)}),[te,o,ue]),Rt=l.useCallback((()=>{ke(void 0)}),[]),At=l.useCallback((async()=>{var e;const t=null===(e=te.completionOutputs)||void 0===e?void 0:e.join(","),n=await Fe("Edit completion outputs",t);if((0,p.isDefined)(n)&&null!==n){const e=(0,v.produce)(te,(e=>{e.completionOutputs=""===n?void 0:n.split(",")}));o(e,(0,N.functionalChange)("change node completions")),ue("editCompletionOutputs",{count:n?n.split(",").length:0})}}),[Fe,o,te,ue]),Vt=l.useCallback((async()=>{var e;const t=null===(e=te.reactiveInputs)||void 0===e?void 0:e.join(","),n=await Fe("Edit reactive inputs",t);if((0,p.isDefined)(n)&&null!==n){const e=(0,v.produce)(te,(e=>{e.reactiveInputs=""===n?void 0:n.split(",")}));o(e,(0,N.functionalChange)("change reactive inputs")),ue("editReactiveInputs",{count:n?n.split(",").length:0})}}),[Fe,o,te,ue]),zt=l.useCallback((async()=>{const e=await Fe("Description?",te.description),t=(0,v.produce)(te,(t=>{t.description=e}));o(t,(0,N.functionalChange)("Edit node description"))}),[Fe,o,te]),Lt=l.useCallback((e=>{const t=(0,v.produce)(te,(t=>{t.defaultStyle=e}));o(t,(0,N.functionalChange)("change default style")),ue("changeStyle",{isDefault:!0})}),[o,te,ue]),$t=l.useCallback((async(e,t)=>{const n=await Fe("New name?",t)||t,i=(0,m.handleIoPinRename)(te,e,t,n);o(i,(0,N.functionalChange)("rename io pin"))}),[te,o,Fe]),Ht=l.useCallback(((e,t)=>{const n=(0,m.handleChangeNodeInputType)(te,e,t);o(n,(0,N.functionalChange)("toggle io pin optional"))}),[te,o]),qt=l.useCallback((async e=>{const t=await re(e),n=(0,_.vSub)(nt.current,{x:200,y:50*Ge.zoom}),i=(0,u.isMacroNodeDefinition)(e.node)?(0,m.createNewMacroNodeInstance)(e.node,0,n):(0,m.createNewNodeInstance)(e.node.id,0,n,t),s=(0,v.produce)(te,(e=>{e.instances.push(i)})),r=(0,v.produce)(Z,(e=>{e.selected=[i.id]}));o(s,(0,N.functionalChange)("add new instance")),Q(r),(0,u.isResolvedMacroNodeInstance)(i)&&setTimeout((()=>{$e({ins:i})}),100),ue("addNode",{nodeId:e.node.id,source:"actionMenu"})}),[Z,te,o,Q,re,ue,Ge.zoom]),Ft=()=>{const t=Z.from;return(0,p.entries)(Ie).map((n=>{let[o,s]=n;return(0,a.jsx)(I.NodeIoView,{currentInsId:X,ancestorInsIds:e.ancestorsInsIds,type:"input",pos:ye[o]||{x:0,y:0},id:o,onDelete:i?Ct:void 0,onRename:i?$t:void 0,onDblClick:Wt,closest:!(!Qe||"input"!==Qe.type||Qe.ins.id!==te.id||Qe.pin!==o),connected:!1,inputMode:s.mode,onChangeInputMode:Ht,viewPort:Ge,onDragStart:gt,onDragEnd:yt,onDragMove:ht,onSelect:st,onSetDescription:rt,selected:(null==t?void 0:t.pinId)===o,description:s.description,onMouseUp:xn,onMouseDown:_n},o)}))},Gt=()=>{const{to:t}=Z;return(0,p.entries)(_e).map((n=>{let[o,s]=n;return(0,a.jsx)(I.NodeIoView,{currentInsId:X,ancestorInsIds:e.ancestorsInsIds,type:"output",pos:be[o]||{x:0,y:0},id:o,onDelete:i?Ct:void 0,onRename:i?$t:void 0,closest:!(!Qe||"output"!==Qe.type||Qe.ins.id!==te.id||Qe.pin!==o),connected:!1,viewPort:Ge,onDragStart:gt,onDragEnd:yt,onDragMove:ht,onSelect:st,onSetDescription:rt,description:s.description,selected:(null==t?void 0:t.pinId)===o,onMouseUp:xn,onMouseDown:_n},o)}))},Bt=()=>{if(je){const{from:e,to:t}=je,n=(0,m.logicalPosToRenderedPos)(e,Ge),o=(0,m.logicalPosToRenderedPos)(t,Ge),{x:i,y:s,w:r,h:l}=(0,m.getSelectionBoxRect)(n,o);return(0,a.jsx)("div",{className:"selection-box",style:{top:s,left:i,width:r,height:l}})}return null},Ut=l.useCallback((async(e,t,n,o)=>{if("input"===n);else{const i=(0,L.safelyGetNodeDef)(e,ce);if(!(0,u.getNodeOutputs)(i)[t])throw new Error("Dbl clicked on un-existing pin");Ae({pos:{x:o.clientX,y:o.clientY},ins:e,targetNode:i,pinId:t,pinType:n})}}),[ce]),Wt=l.useCallback((async(e,t)=>{if(!te.inputs[e])throw new Error("Dbl clicked on un-existing pin");Ae({pos:{x:t.clientX,y:t.clientY},pinId:e,pinType:"input",targetNode:te})}),[te]),Jt=l.useCallback((e=>{if(e.metaKey||e.ctrlKey){const t=-.005*e.deltaY;ct(Ge.zoom+t,"mouse"),e.preventDefault(),e.stopPropagation()}else{if(se)return;const t=e.deltaX,n=e.deltaY,o=(0,v.produce)(Ge,(e=>{e.pos.x=e.pos.x+t/e.zoom,e.pos.y=e.pos.y+n/e.zoom}));Je(o),e.stopPropagation(),e.preventDefault()}}),[se,ct,Je,Ge]);(0,g.useEffect)((()=>{const{current:e}=et;if(e)return e.addEventListener("wheel",Jt),()=>{e.removeEventListener("wheel",Jt)}}),[Jt]);const Kt={backgroundPositionX:(0,m.roundNumber)(-Ge.pos.x*Ge.zoom),backgroundPositionY:(0,m.roundNumber)(-Ge.pos.y*Ge.zoom),backgroundSize:(0,m.roundNumber)(10*Ge.zoom)+"px"},Yt=l.useRef(new Map);l.useEffect((()=>{const e=ge.reduce(((e,t)=>{const n=(0,L.safelyGetNodeDef)(t,ce);return n&&e.set(t.id,(0,u.keys)((0,u.getNodeInputs)(n))),e}),new Map),t=ge.reduce(((e,t)=>{const n=(0,L.safelyGetNodeDef)(t,ce);return n&&e.set(t.id,(0,u.keys)((0,u.getNodeOutputs)(n))),e}),new Map);e.set(u.THIS_INS_ID,(0,u.keys)(te.outputs)),t.set(u.THIS_INS_ID,(0,u.keys)(te.inputs));const n=he.filter((n=>{const o=e.get(n.to.insId)&&e.get(n.to.insId).includes(n.to.pinId),i=t.get(n.from.insId)&&t.get(n.from.insId).includes(n.from.pinId);return!(o&&i)}));if(n.length>0){(0,O.toastMsg)(`${n.length} orphan connections removed`,"warning"),console.warn(`${n.length} orphan connections removed`,n);const e=(0,v.produce)(te,(e=>{e.connections=te.connections.filter((e=>!n.includes(e)))}));o(e,(0,N.functionalChange)("prune orphan connections"))}}),[ge,o,he,te,ce]),l.useEffect((()=>{let e=[];const t=(0,v.produce)(te,(t=>{t.instances=t.instances.map((t=>{const n=(0,L.safelyGetNodeDef)(t,ce);if(n){const o=(0,u.getNodeInputs)(n),i=(0,u.getNodeOutputs)(n);if(t.visibleInputs){const n=t.visibleInputs.filter((e=>!o[e]));n.length>0&&(t.visibleInputs=(0,u.keys)(o),e.push(...n))}if(t.visibleOutputs){const n=t.visibleOutputs.filter((e=>!i[e]));n.length>0&&(t.visibleOutputs=(0,u.keys)(i),e.push(...n))}}return t}))}));e.length>0&&((0,O.toastMsg)(`Found ${e.length} invalid visible inputs/outputs: ${e.join(", ")}. Reset them`,"warning"),o(t,(0,N.functionalChange)("reset corrupt visible inputs/outputs")))}),[ge,o,te,ce]),(0,g.useEffect)((()=>{const e=new Map(ge.map((e=>[e.id,e])));Yt.current=he.reduce(((t,n)=>{const o=t.get(n.to.insId)||{},i=o[n.to.pinId]||[],s={...o,[n.to.pinId]:[...i,e.get(n.from.insId)]};return t.set(n.to.insId,s),t}),new Map)}),[he,ge]);const Zt=l.useCallback((()=>{Ae(void 0)}),[]),Qt=l.useCallback((async e=>{if(!Re)throw new Error("impossible state - quick add menu invoked but not available");const{ins:t,pinId:n}=Re;switch(e.type){case"import":case"node":{const i="import"===e.type?await re(e.importableNode):ce,s="import"===e.type?e.importableNode.node:e.node,r=(0,m.createNewNodeInstance)(s.id,100,nt.current,i);if(r){const e=(0,v.produce)(te,(e=>{e.instances.push(r),e.connections.push({from:{insId:t?t.id:u.THIS_INS_ID,pinId:n},to:{insId:r.id,pinId:u.TRIGGER_PIN_ID}})}));o(e,(0,N.functionalChange)("add-item-quick-menu")),Zt()}ue("addNode",{nodeId:s.id,source:"quickAdd"});break}case"value":if(!t)return void(0,O.toastMsg)("Cannot add value to main input")}}),[Re,ce,ue,te,o,Zt,re]),Xt=l.useCallback((async()=>{const e=JSON.stringify(te);await navigator.clipboard.writeText(e),O.AppToaster.show({message:"Copied!"})}),[te]),en=l.useCallback((()=>{var e,t;const n=i?"":" (cannot edit main node, only visual)";return(0,a.jsxs)(b.Menu,{children:[(0,a.jsx)(b.MenuItem,{text:`New main input ${n}`,onMouseDown:e=>e.stopPropagation(),onClick:(0,p.preventDefaultAnd)((()=>ke("input"))),disabled:!i}),(0,a.jsx)(b.MenuItem,{onMouseDown:e=>e.stopPropagation(),text:`New main output ${n}`,onClick:(0,p.preventDefaultAnd)((()=>ke("input"))),disabled:!i}),(0,a.jsx)(b.MenuItem,{onMouseDown:e=>e.stopPropagation(),text:"Integrate with existing code (docs link)",href:"https://www.flyde.dev/docs/integrate-flows/",target:"_blank",disabled:!i}),(0,a.jsx)(b.MenuItem,{onMouseDown:e=>e.stopPropagation(),text:"Copy node to clipboard",onClick:(0,p.preventDefaultAnd)(Xt)}),(0,a.jsx)(b.MenuItem,{onMouseDown:e=>e.stopPropagation(),text:`Edit Completion Outputs (${(null===(e=te.completionOutputs)||void 0===e?void 0:e.join(","))||"n/a"})`,onClick:(0,p.preventDefaultAnd)((()=>At()))}),(0,a.jsx)(b.MenuItem,{onMouseDown:e=>e.stopPropagation(),text:`Edit Reactive inputs (${(null===(t=te.reactiveInputs)||void 0===t?void 0:t.join(","))||"n/a"})`,onClick:(0,p.preventDefaultAnd)((()=>Vt()))}),(0,a.jsx)(b.MenuItem,{onMouseDown:e=>e.stopPropagation(),text:"Edit description",onClick:(0,p.preventDefaultAnd)((()=>zt()))}),(0,a.jsx)(b.MenuDivider,{}),(0,a.jsx)(b.MenuItem,{text:"Default Style",children:(0,a.jsx)(R.NodeStyleMenu,{style:te.defaultStyle,onChange:Lt,promptFn:Fe})})]})}),[i,Xt,te.completionOutputs,te.reactiveInputs,te.defaultStyle,Lt,Fe,At,Vt,zt]);(0,h.useHotkeys)("shift+c",it,{text:"Center viewport",group:"Viewport Controls"},[],Be),(0,h.useHotkeys)("cmd+c",lt,{text:"Copy instances",group:"Editing"},[],Be),(0,h.useHotkeys)("cmd+v",ut,{text:"Paste instances",group:"Editing"},[],Be),(0,h.useHotkeys)("esc",pt,{text:"Clear selections",group:"Selection"},[],Be),(0,h.useHotkeys)("backspace",jt,{text:"Delete instances",group:"Editing"},[],Be),(0,h.useHotkeys)("shift+d",Et,{text:"Duplicate selected instances",group:"Editing"},[],Be),(0,h.useHotkeys)("cmd+a",It,{text:"Select all",group:"Selection"},[],Be),(0,h.useHotkeys)("s",dt,{text:"Select pin closest to mouse",group:"Selection"},[],Be);const tn=l.useCallback(((e,t)=>{if(!Ve)throw new Error("impossible state");const n=(0,v.produce)(te,(t=>{const n=t.instances.find((e=>e.id===Ve.insId));if(!n||!(0,u.isInlineNodeInstance)(n))throw new Error("impossible state");n.node=e}));o(n,(0,N.functionalChange)("Inner change: "+t.message)),ze((t=>({...t,node:e})))}),[o,Ve,te]),[nn,on]=(0,g.useState)({selected:[],viewPort:t.defaultViewPort,lastMousePos:{x:0,y:0}}),sn=l.useCallback((e=>on((t=>({...t,...e})))),[]),rn=n=>Ve&&Ve.insId===n.id?{currentInsId:Ve.insId,ancestorsInsIds:(0,u.fullInsIdPath)(X,ee),boardData:nn,onChangeBoardData:sn,resolvedDependencies:ne,onCopy:s,clipboardData:e.clipboardData,onInspectPin:e.onInspectPin,onGoToNodeDef:e.onGoToNodeDef,nodeIoEditable:e.nodeIoEditable,node:Ve.node,onChangeNode:tn,parentViewport:t.defaultViewPort,parentBoardPos:ot,onExtractInlineNode:e.onExtractInlineNode,queuedInputsData:e.queuedInputsData}:void 0,an=()=>{if(me&&("input"===(null==Qe?void 0:Qe.type)&&(null==Qe?void 0:Qe.ins.id)!==te.id||(null==Qe?void 0:Qe.ins.id)===te.id&&"output"===(null==Qe?void 0:Qe.type))){const e=Qe.ins.id===te.id?{pinId:Qe.pin,insId:u.THIS_INS_ID}:{insId:Qe.ins.id,pinId:Qe.pin};if(!(0,u.isInternalConnectionNode)(e)&&!(0,u.isInternalConnectionNode)(me))return;return{from:me,to:e}}if(ve&&("output"===(null==Qe?void 0:Qe.type)&&(null==Qe?void 0:Qe.ins.id)!==te.id||(null==Qe?void 0:Qe.ins.id)===te.id&&"input"===(null==Qe?void 0:Qe.type))){const e=Qe.ins.id===te.id?{pinId:Qe.pin,insId:u.THIS_INS_ID}:{insId:Qe.ins.id,pinId:Qe.pin};if(!(0,u.isInternalConnectionNode)(ve)&&!(0,u.isInternalConnectionNode)(e))return;return{from:e,to:ve}}},ln=()=>{const e=an();if(e){const{from:t,to:n}=e;return{connection:{from:t,to:n},type:he.some((t=>(0,u.connectionDataEquals)(t,e)))?"future-remove":"future-add"}}},un=l.useCallback(((e,t)=>{const n=(0,v.produce)(te,(n=>{n.instances=n.instances.map((n=>n.id===e.id?{...n,visibleInputs:t}:n))}));o(n,(0,N.functionalChange)("change instance visible inputs"))}),[te,o]),dn=l.useCallback(((e,t)=>{const n=(0,v.produce)(te,(n=>{n.instances=n.instances.map((n=>n.id===e.id?{...n,style:t}:n))}));o(n,(0,N.functionalChange)("change instance style")),ue("changeStyle",{isDefault:!1})}),[o,te,ue]),cn=l.useCallback(((e,t)=>{const n=(0,v.produce)(te,(n=>{n.instances=n.instances.map((n=>n.id===e.id?{...n,visibleOutputs:t}:n))}));o(n,(0,N.functionalChange)("change instance visible outputs"))}),[te,o]),pn=l.useCallback(((e,t)=>{const n=(0,v.produce)(te,(n=>{n.instances=n.instances.map((n=>n.id===e.id?{...n,displayName:t}:n))}));o(n,(0,N.functionalChange)("change instance display name"))}),[te,o]);l.useImperativeHandle(n,(()=>({centerInstance(e){const t=te.instances.find((t=>t.id===e));if(t){const e=(0,_.vSub)(t.pos,(0,_.vec)(tt.width/2,tt.height/2));Je({...Ge,pos:e})}},centerViewPort(){it()},getViewPort:()=>Ge,clearSelection:()=>{pt()}})));const[fn,mn]=l.useState([]),vn=he.filter((e=>{const t=an();return!t||!(0,u.connectionDataEquals)(t,e)})),gn=l.useCallback((()=>{ze(void 0),on(t.defaultBoardData)}),[]),hn=l.useCallback((e=>{const t=(0,v.produce)(te,(t=>{const n=t.connections.find((t=>(0,u.connectionDataEquals)(t,e)));n.hidden=!n.hidden}));o(t,(0,N.functionalChange)("toggle connection hidden"))}),[o,te]),yn=l.useCallback((e=>{const t=(0,v.produce)(te,(t=>{t.connections=t.connections.filter((t=>!(0,u.connectionDataEquals)(t,e)))}));o(t,(0,N.functionalChange)("remove connection"))}),[o,te]),bn=l.useCallback(((e,t,n)=>{We("input"===n?{to:(0,u.connectionNode)(e.id,t),from:void 0}:{from:(0,u.connectionNode)(e.id,t),to:void 0})}),[]),In=l.useCallback(((e,t,n)=>{Ue&&(Ue.from&&"input"===n?Ye(Ue.from,(0,u.connectionNode)(e.id,t),"pinDrag"):Ue.to&&"output"===n&&Ye((0,u.connectionNode)(e.id,t),Ue.to,"pinDrag")),We(null)}),[Ue,Ye]),_n=l.useCallback(((e,t)=>{}),[]),xn=l.useCallback(((e,t)=>{Ue&&(Ue.from&&"output"===t?Ye(Ue.from,(0,u.externalConnectionNode)(e),"nodeIoPinDrag"):Ue.to&&"input"===t&&Ye((0,u.externalConnectionNode)(e),Ue.to,"nodeIoPinDrag"))}),[Ue,Ye]),Cn=l.useCallback((e=>{const t=(0,v.produce)(te,(t=>{const n=t.instances.find((e=>e.id===Le.ins.id));if(!n||!(0,u.isMacroNodeInstance)(n))throw new Error("Impossible state");n.macroData=e}));o(t,(0,N.functionalChange)("save macro instance")),$e(void 0)}),[te,o,Le]),jn=l.useMemo((()=>me?{type:"input",pinId:me.pinId}:ve?{type:"output",pinId:ve.pinId}:fe.length>0?{type:"instances",ids:fe}:void 0),[fe,me,ve]),wn=l.useCallback((()=>{if(jn){const{type:e}=jn,t=(()=>{switch(e){case"instances":{const e=te.instances.find((e=>fe.includes(e.id)));if(e)return e.pos;break}case"input":{const e=ye[jn.pinId];if(e)return e;break}case"output":{const e=be[jn.pinId];if(e)return e;break}}})(),n=(0,m.fitViewPortToRect)({x:t.x,y:t.y,w:1,h:1},tt);n.zoom=Ge.zoom,(0,m.animateViewPort)(Ge,n,500,(e=>{Je(e)}))}}),[ye,te.instances,be,fe,jn,Je,Ge,tt]),En=l.useCallback((()=>{Te(!1)}),[]),On=l.useCallback((()=>{Te(!0)}),[]);try{return(0,a.jsxs)(b.ContextMenu,{className:(0,D.default)("visual-node-editor",e.className,{dark:le}),"data-id":te.id,content:en(),disabled:!Be.current,children:[(0,a.jsxs)("main",{className:"board-editor-inner",onMouseDown:Ot,onMouseUp:Nt,onMouseMove:St,onMouseLeave:Pt,ref:et,style:Kt,children:[(0,a.jsx)(l.Fragment,{children:(0,a.jsx)(w.LayoutDebugger,{vp:Ge,node:te,extraDebug:m.emptyList,mousePos:nt.current})}),(0,a.jsx)(c.ConnectionView,{resolvedNodes:ce,currentInsId:X,ancestorsInsIds:ee,size:tt,node:te,boardPos:ot,instances:ge,connections:vn,futureConnection:ln(),onDblClick:u.noop,viewPort:Ge,parentVp:de,selectedInstances:fe,toggleHidden:hn,removeConnection:yn,lastMousePos:nt.current,draggedSource:Ue}),Ft(),ge.map((t=>{var n,o,i,s,r;return(0,a.jsx)(d.InstanceView,{onUngroup:Tt,onExtractInlineNode:Mt,connectionsPerInput:Yt.current.get(t.id)||m.emptyObj,node:(0,L.safelyGetNodeDef)(t,ce),ancestorsInsIds:(0,u.fullInsIdPath)(X,ee),onPinClick:at,onPinDblClick:Ut,onDragStart:ft,onDragEnd:vt,resolvedDeps:ce,onDragMove:mt,onDblClick:Dt,onSelect:bt,onToggleSticky:wt,selected:-1!==fe.indexOf(t.id),dragged:xe===t.id,onInspectPin:Ke,selectedInput:ve&&(0,u.isInternalConnectionNode)(ve)&&ve.insId===t.id?ve.pinId:void 0,selectedOutput:me&&(0,u.isInternalConnectionNode)(me)&&me.insId===t.id?me.pinId:void 0,closestPin:Qe&&Qe.ins.id===t.id?Qe:void 0,queuedInputsData:null!==(n=oe[t.id])&&void 0!==n?n:m.emptyObj,instance:t,connections:he,onTogglePinBreakpoint:u.noop,onTogglePinLog:u.noop,viewPort:Ge,onChangeVisibleInputs:un,onChangeVisibleOutputs:cn,onSetDisplayName:pn,onDeleteInstance:xt,forceShowMinimized:me||(null===(o=null==Ue?void 0:Ue.to)||void 0===o?void 0:o.insId)===t.id?"input":ve||(null===(i=null==Ue?void 0:Ue.from)||void 0===i?void 0:i.insId)===t.id?"output":void 0,isConnectedInstanceSelected:fe.some((e=>he.some((n=>{let{from:o,to:i}=n;return o.insId===t.id&&i.insId===e||o.insId===e&&i.insId===t.id})))),inlineGroupProps:rn(t),onCloseInlineEditor:gn,inlineEditorPortalDomNode:He.current,onChangeStyle:dn,onGroupSelected:Ze,onPinMouseDown:bn,onPinMouseUp:In,hadError:null!==(r=null===(s=e.instancesWithErrors)||void 0===s?void 0:s.has((0,u.fullInsIdPath)(t.id)))&&void 0!==r&&r},t.id)})),Bt(),Gt(),(0,a.jsx)(V.MainInstanceEventsIndicator,{currentInsId:X,ancestorsInsIds:ee,viewPort:Ge}),Re?(0,a.jsx)(x.QuickAddMenu,{targetNode:Re.targetNode,pinId:Re.pinId,pinType:Re.pinType,pos:Re.pos,resolvedDependencies:ne,node:te,onAdd:Qt,onClose:Zt}):null,(0,a.jsxs)("div",{className:"viewport-controls-and-help",children:[(0,a.jsx)(b.Button,{small:!0,onClick:it,minimal:!0,intent:"primary",children:"Center"}),(0,a.jsx)(W,{min:.15,max:3,stepSize:.05,labelStepSize:10,labelRenderer:J,onChange:ct,value:Ge.zoom}),Ee?(0,a.jsx)(z.HelpBubble,{}):null]}),Le?(0,a.jsx)(H.MacroInstanceEditor,{onCancel:()=>$e(void 0),onSubmit:Cn,ins:Le.ins,deps:ne}):null,(0,a.jsx)("div",{className:"inline-editor-portal-root"})]}),jn?(0,a.jsx)(q.SelectionIndicator,{selection:jn,onCenter:wn,onGroup:Ze,onDelete:_t}):null,!Ve&&ae.groups.length?(0,a.jsx)(F.NodesLibrary,{...ae,onAddNode:qt}):null,(0,a.jsx)("div",{className:"run-btn-container",children:(0,a.jsx)(b.Button,{className:"run-btn",onClick:On,rightIcon:(0,a.jsx)(B.Play,{}),small:!0,children:"Test Flow"})}),De?(0,a.jsx)(G.RunFlowModal,{node:te,onClose:En}):null,Me?(0,a.jsx)(U.AddMainPinModal,{type:Me,onAdd:kt,onClose:Rt}):null]})}catch(Nn){return console.error(Nn),(0,a.jsxs)("div",{children:["Error rendering board - ",Nn.toString()]})}})));const K=(e,t)=>{const n=e.target.closest(".visual-node-editor");return n&&n.getAttribute("data-id")===t}},36369:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseNodeView=void 0;const a=n(35250),l=s(n(70079)),u=r(n(26372)),d=r(n(59349)),c=n(30653);t.BaseNodeView=function(e){const{dragged:t,viewPort:n,pos:o,onDragEnd:i,onDragMove:s,onDragStart:r,displayMode:p}=e,f=(0,c.useDarkMode)(),m=l.useCallback(((e,t)=>{r(e,t)}),[r]),v=l.useCallback(((e,t)=>{const s=o,r=(t.x-s.x)/n.zoom,a=(t.y-s.y)/n.zoom,l=s.x+r,u=s.y+a;i(e,{...t,x:l,y:u})}),[o,i,n]),g=l.useCallback(((e,t)=>{let{x:n,y:o}=t;s(e,{x:n,y:o})}),[s]),h={transform:`scale(${n.zoom})`},y=(0,u.default)("base-node-view",e.className,{dragged:t,dark:f,"display-mode":p}),b=o.x*n.zoom-n.pos.x*n.zoom,I=o.y*n.zoom-n.pos.y*n.zoom,_={transform:`translate(${b-o.x}px, ${I-o.y}px)`},x=(0,u.default)("base-node-view-vp-fixer",{"display-mode":p}),C=(0,a.jsx)("span",{className:"base-node-view-wrapper",children:(0,a.jsx)("div",{className:y,style:h,id:e.domId,children:e.children})});return(0,a.jsx)("div",{className:x,style:_,children:(0,a.jsx)(d.default,{onStop:v,onStart:m,onDrag:g,position:o,cancel:".no-drag",children:C})})}},83234:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(36369),t)},80510:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.handleConnectionCloseEditorCommand=void 0;const i=n(74762),s=o(n(53865));t.handleConnectionCloseEditorCommand=(e,t)=>{let{from:n,to:o}=t;return(0,s.default)(e,(e=>{const t=e.connections.find((e=>{const t=(0,i.connectionNodeEquals)(n,e.from),s=(0,i.connectionNodeEquals)(o,e.to);return t&&s}));t?e.connections=e.connections.filter((e=>e!==t)):e.connections.push({from:n,to:o})}))}},2130:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.handleDuplicateSelectedEditorCommand=void 0;const i=n(74762),s=o(n(53865));t.handleDuplicateSelectedEditorCommand=(e,t)=>{const n=[];return{newNode:(0,s.default)(e,(o=>{const s=o.instances;t.forEach((t=>{const o=s.find((e=>e.id===t));if(!o)throw new Error("impossible state duplicate selected no matching instance");if(o){const{pos:t}=o,r={x:t.x+20,y:t.y+20},a=(0,i.createInsId)(e),l=(0,i.isMacroNodeInstance)(o)?(0,i.macroNodeInstance)(a,o.macroId,o.macroData,void 0,t):{...o,pos:r,id:a};s.push(l),n.push(l.id)}}))})),newInstances:n}}},25044:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.pasteInstancesCommand=void 0;const i=n(74762),s=o(n(53865));t.pasteInstancesCommand=(e,t,n)=>{const o=n.instances.map((n=>{const o=(0,i.createInsId)(e);return(0,i.isMacroNodeInstance)(n)?(0,i.macroNodeInstance)(o,n.macroId,n.macroData,void 0,t):{...n,pos:t,id:o}})),r=new Map(o.map(((e,t)=>[n.instances[t].id,e.id])));return{newNode:(0,s.default)(e,(e=>{e.instances.push(...o);const t=n.connections.map((e=>{let{from:t,to:n}=e;return{from:{...t,insId:r.get(t.insId)||t.insId},to:{...n,insId:r.get(n.insId)||n.insId}}}));e.connections.push(...t)})),newInstances:o}}},65082:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionView=t.SingleConnectionView=void 0;const a=n(70079),l=n(35250),u=s(n(70079)),d=r(n(26372)),c=n(74762),p=n(18243),f=n(77852),m=n(74089),v=n(60190),g=n(50382),h=n(76064),y=n(41032);t.SingleConnectionView=e=>{const{isBrowser:t}=(0,f.useSsr)(),{connection:n,node:o,resolvedNodes:i,instances:s,type:r,viewPort:a,toggleHidden:u,parentSelected:m,removeConnection:b}=e,{from:I}=n,_=(0,c.isInternalConnectionNode)(I)&&s.find((e=>e.id===I.insId));if(!_&&(0,c.isInternalConnectionNode)(I))return console.warn(`Could not find instance ${I.insId} for connection`,I),null;const x=((0,c.isInternalConnectionNode)(I)&&_?(0,y.safelyGetNodeDef)(_,i):o).outputs[I.pinId],C=x&&x.delayed,j=t?(0,p.calcStartPos)({...e,connectionNode:I}):{x:0,y:0},w=t?(0,p.calcTargetPos)({...e,connectionNode:n.to}):{x:0,y:0},{x:E,y:O}=(0,v.vDiv)(j,e.parentVp.zoom),{x:N,y:S}=(0,v.vDiv)(w,e.parentVp.zoom),P=(0,d.default)({delayed:C,hidden:n.hidden,"parent-selected":m},r),D=(0,l.jsxs)(g.Menu,{children:[(0,l.jsx)(g.MenuItem,{text:n.hidden?"Show connection":"Hide connection",onClick:()=>u(n)}),(0,l.jsx)(g.MenuItem,{text:"Remove connection",onClick:()=>b(n)})]});return(0,l.jsx)(g.ContextMenu,{content:D,children:e=>(0,l.jsx)(h.ConnectionViewPath,{className:P,from:{x:E,y:O},to:{x:N,y:S},dashed:"regular"!==r,zoom:a.zoom,onContextMenu:e.onContextMenu})})};t.ConnectionView=e=>{var n;const{viewPort:o,futureConnection:i,toggleHidden:s,selectedInstances:r,draggedSource:d}=e,[c,f]=u.useState(0),v=u.useCallback((e=>requestAnimationFrame((()=>{f((e=>(e+1)%9)),e>0&&v(e-1)}))),[]);u.useEffect((()=>{const e=v(10);return()=>{cancelAnimationFrame(e)}}),[v]),u.useEffect((()=>{const e=()=>{v(3)};return window.addEventListener("scroll",e),window.addEventListener("resize",e),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}}),[v,c]);const g=e.connections.map((n=>{const o=r.includes(n.from.insId)||r.includes(n.to.insId);return(0,a.createElement)(t.SingleConnectionView,{...e,connection:n,type:"regular",parentSelected:o,key:n.from.insId+n.from.pinId+n.to.insId+n.to.pinId})}));if(i&&g.push((0,a.createElement)(t.SingleConnectionView,{...e,connection:i.connection,type:i.type,toggleHidden:s,parentSelected:!1,key:"future"})),d){const t=(d.from?p.calcStartPos:p.calcTargetPos)({connectionNode:null!==(n=d.from)&&void 0!==n?n:d.to,viewPort:o,boardPos:e.boardPos,ancestorsInsIds:e.ancestorsInsIds,currentInsId:e.currentInsId});g.push((0,l.jsx)(h.ConnectionViewPath,{className:"dragged",from:t,to:(0,m.logicalPosToRenderedPos)(e.lastMousePos,o),zoom:o.zoom},"dragged"))}return(0,l.jsx)("svg",{className:"connections-view",children:g})}},76064:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionViewPath=void 0;const i=n(35250),s=o(n(26372)),r=n(70079),a=n(23381);t.ConnectionViewPath=(0,r.forwardRef)(((e,t)=>{const{from:n,to:o,className:r,onContextMenu:l,zoom:u,dashed:d}=e,{x:c,y:p}=n,{x:f,y:m}=o,v=(0,a.calcBezierPath)({sourceX:c,sourceY:p,targetX:f,targetY:m,curvature:.15}),g=2.5*u,h=d?6*u:void 0;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:v,ref:t,className:(0,s.default)("connection",r),style:{strokeWidth:g,strokeDasharray:h},onContextMenu:l}),e.label?(0,i.jsx)("text",{className:"label",x:(c+f)/2,y:(p+m)/2,fontSize:"12px"}):null,(0,i.jsxs)("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,i.jsx)("stop",{offset:"0%"}),(0,i.jsx)("stop",{offset:"100%"})]})]})}))},23381:(e,t)=>{"use strict";var n;function o(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function i(e){let t,i,{pos:s,x1:r,y1:a,x2:l,y2:u,c:d}=e;switch(s){case n.Left:t=r-o(r-l,d),i=a;break;case n.Right:t=r+o(l-r,d),i=a;break;case n.Top:t=r,i=a-o(a-u,d);break;case n.Bottom:t=r,i=a+o(u-a,d)}return[t,i]}Object.defineProperty(t,"__esModule",{value:!0}),t.getBezierCenter=t.calcBezierPath=t.Position=void 0,function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(n=t.Position||(t.Position={}));t.calcBezierPath=e=>{let{sourceX:t,sourceY:o,sourcePosition:s=n.Bottom,targetX:r,targetY:a,targetPosition:l=n.Top,curvature:u=.25}=e;const[d,c]=i({pos:s,x1:t,y1:o,x2:r,y2:a,c:u}),[p,f]=i({pos:l,x1:r,y1:a,x2:t,y2:o,c:u});return`M${t},${o} C${d},${c} ${p},${f} ${r},${a}`},t.getBezierCenter=function(e){let{sourceX:t,sourceY:o,sourcePosition:s=n.Bottom,targetX:r,targetY:a,targetPosition:l=n.Top,curvature:u=.25}=e;const[d,c]=i({pos:s,x1:t,y1:o,x2:r,y2:a,c:u}),[p,f]=i({pos:l,x1:r,y1:a,x2:t,y2:o,c:u}),m=.125*t+.375*d+.375*p+.125*r,v=.125*o+.375*c+.375*f+.125*a;return[m,v,Math.abs(m-t),Math.abs(v-o)]}},18243:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcTargetPos=t.calcStartPos=t.calcPinPosition=void 0;const o=n(74762),i=n(74089),s=n(30994);function r(e){const t=(0,s.getPinDomId)({fullInsIdPath:(0,o.fullInsIdPath)(e.insId,e.ancestorsInsIds),pinId:e.pinId,pinType:e.pinType,isMain:e.isMain}),n=document.getElementById(t);return n?((e,t)=>{const{x:n,y:o,width:i,height:s}=e.getBoundingClientRect(),r=o+s/2;return{x:n+i/2-t.x,y:r-t.y}})(n,e.boardPos):((0,i.logger)("calcPinPosition: cannot find element",{domId:t}),{x:99999,y:99999})}t.calcPinPosition=r;t.calcStartPos=e=>{const{connectionNode:t,boardPos:n,ancestorsInsIds:i,viewPort:s,currentInsId:a}=e;return(0,o.isExternalConnectionNode)(t)?r({pinId:t.pinId,insId:a,ancestorsInsIds:i,isMain:!0,pinType:"input",boardPos:n,viewPort:s}):r({pinId:t.pinId,insId:t.insId,ancestorsInsIds:(0,o.fullInsIdPath)(a,i),isMain:!1,pinType:"output",boardPos:n,viewPort:s})};t.calcTargetPos=e=>{const{connectionNode:t,boardPos:n,ancestorsInsIds:i,viewPort:s,currentInsId:a}=e;return(0,o.isExternalConnectionNode)(t)?r({pinId:t.pinId,insId:a,ancestorsInsIds:i,isMain:!0,pinType:"output",boardPos:n,viewPort:s}):r({pinId:t.pinId,insId:t.insId,ancestorsInsIds:(0,o.fullInsIdPath)(a,i),isMain:!1,pinType:"input",boardPos:n,viewPort:s})}},30994:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPinDomId=t.getMainInstanceIndicatorDomId=t.getInstanceDomId=void 0;const o=n(74762);t.getInstanceDomId=(e,t)=>`ins:${(0,o.fullInsIdPath)(e,t)}`.replace(/\s+/g,"-");t.getMainInstanceIndicatorDomId=(e,t)=>`main-ins:${(0,o.fullInsIdPath)(e,t)}`.replace(/\s+/g,"-");t.getPinDomId=e=>{let{pinType:t,fullInsIdPath:n,pinId:o,isMain:i}=e;return`${i?"main-":""}pin:${t}:${n}:${o}`.replace(/\s+/g,"-")}},86553:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceView=t.getVisibleOutputs=t.getVisibleInputs=t.INSTANCE_INFO_TOOLTIP_DELAY=t.MAX_INSTANCE_WIDTH=t.MIN_WIDTH_PER_PIN=t.PIECE_CHAR_WIDTH=t.PIECE_HORIZONTAL_PADDING=void 0;const a=n(70079),l=n(35250),u=s(n(70079)),d=n(66074),c=n(74762),p=r(n(26372)),f=n(2036),m=n(74762),v=n(74762),g=n(53159),h=n(83234),y=n(30994),b=n(63521),I=n(74089),_=n(50382),x=n(88593),C=n(30653);t.PIECE_HORIZONTAL_PADDING=25,t.PIECE_CHAR_WIDTH=11,t.MIN_WIDTH_PER_PIN=40,t.MAX_INSTANCE_WIDTH=400,t.INSTANCE_INFO_TOOLTIP_DELAY=400;t.getVisibleInputs=(e,t,n)=>{const{visibleInputs:o}=e;if(o)return o;const i=(0,c.keys)((0,v.getNodeInputs)(t)).filter(((o,i)=>{var s;const r=n.some((t=>t.to.insId===e.id&&t.to.pinId===o)),a=t.inputs[o]&&"optional"===(null===(s=t.inputs[o])||void 0===s?void 0:s.mode);return r||!a&&o!==m.TRIGGER_PIN_ID}));return 0===i.length?[m.TRIGGER_PIN_ID]:i};t.getVisibleOutputs=(e,t,n)=>{const{visibleOutputs:o}=e;if(o)return o;const i=Object.keys(t.outputs);return n.some((t=>t.from.insId===e.id&&t.from.pinId===m.ERROR_PIN_ID))?[...i,m.ERROR_PIN_ID]:i};t.InstanceView=function(e){const{selected:n,selectedInput:o,selectedOutput:i,closestPin:s,dragged:r,onTogglePinLog:j,onTogglePinBreakpoint:w,displayMode:E,connections:O,instance:N,viewPort:S,node:P,onPinClick:D,onPinDblClick:T,onDragStart:M,onDragEnd:k,onDragMove:R,onToggleSticky:A,onSelect:V,onDblClick:z,onChangeVisibleInputs:L,onChangeVisibleOutputs:$,inlineGroupProps:H,onUngroup:q,onExtractInlineNode:F,onGroupSelected:G,isConnectedInstanceSelected:B,inlineEditorPortalDomNode:U,onChangeStyle:W,onDeleteInstance:J,onSetDisplayName:K,onPinMouseUp:Y,onPinMouseDown:Z}=e,Q=(0,C.useDarkMode)(),{id:X}=N,ee=u.useMemo((()=>{const e=(0,c.randomInt)(6,1);return{icon:(0,c.pickRandom)([["fab","discord"],["fab","slack"],"bug","cube"]),color:e,size:(0,c.randomInt)(3,1),variation:(0,c.randomInt)(5,1)}}),[]),te=u.useRef(),ne=u.useMemo((()=>N.style||P.defaultStyle||{}),[P,N]),oe=ne.size||"regular",ie=u.useMemo((()=>new Map(O.filter((e=>{let{to:t}=e;return t.insId===X})).map((e=>{let{to:t,hidden:n}=e;return[t.pinId,n]})))),[O,X]),se=u.useMemo((()=>new Map(O.filter((e=>{let{from:t}=e;return t.insId===X})).map((e=>{let{from:t,hidden:n}=e;return[t.pinId,n]})))),[O,X]),re=(0,I.usePrompt)(),ae=u.useCallback((e=>D(N,e,"input")),[N,D]),le=u.useCallback(((e,t)=>T(N,e,"input",t)),[N,T]),ue=u.useCallback(((e,t)=>T(N,e,"output",t)),[N,T]),de=u.useCallback((e=>D(N,e,"output")),[N,D]),ce=u.useCallback(((e,t)=>{M(N,e,t)}),[N,M]),pe=u.useCallback(((e,t)=>{const n=N.pos,o=(t.x-n.x)/S.zoom,i=(t.y-n.y)/S.zoom,s=n.x+o,r=n.y+i;k(N,e,{...t,x:s,y:r})}),[N,k,S.zoom]),fe=u.useCallback(((e,t)=>{R(N,e,{x:t.x,y:t.y})}),[N,R]),me=u.useCallback((e=>A(N,e)),[N,A]),ve=u.useCallback((e=>V(N,e)),[N,V]),ge=u.useCallback((e=>z(N,e.shiftKey)),[N,z]),he=(0,c.entries)(P.inputs),{visibleInputs:ye,visibleOutputs:be}=N;ye&&he.sort(((e,t)=>ye.indexOf(e[0])-ye.indexOf(t[0])));const Ie=(0,c.entries)(P.outputs);be&&Ie.sort(((e,t)=>be.indexOf(e[0])-be.indexOf(t[0])));const _e=(0,t.getVisibleInputs)(N,P,O),xe=(0,t.getVisibleOutputs)(N,P,O);he.push([m.TRIGGER_PIN_ID,{...(0,c.nodeInput)(),description:"Use this pin to manually trigger the node. If not connected, the node will be triggered automatically when all required inputs have data."}]),Ie.push([m.ERROR_PIN_ID,{...(0,m.nodeOutput)(),description:"Use this pin to catch errors that happen inside this node. If not connected, errors will bubble up to the parent node."}]);const Ce=he.filter((e=>{let[t]=e;return _e.includes(t)||(n||B)&&ie.has(t)})),je=Ie.filter((t=>{let[o]=t;return xe.includes(o)||(n||B)&&se.has(o)||o===m.ERROR_PIN_ID&&e.hadError})),we=O.some((e=>e.from.insId===X&&e.from.pinId===m.ERROR_PIN_ID)),Ee=(0,p.default)("ins-view",{"no-inputs":0===he.length,"no-outputs":0===Ie.length,"display-mode":E,"force-minimized-input":"input"===e.forceShowMinimized||"both"===e.forceShowMinimized,"force-minimized-output":"output"===e.forceShowMinimized||"both"===e.forceShowMinimized,"inline-node-edited":!!H,"error-caught":we}),Oe=(0,p.default)({selected:n,dragged:r,closest:s&&s.ins.id===N.id},`size-${oe}`),Ne=new Set((0,c.entries)(P.inputs).filter((e=>{let[t,n]=e;return(0,m.isInputPinOptional)(n)})).map(c.pickFirst)),Se=(0,c.entries)(N.inputConfig).reduce(((e,t)=>{let[n,o]=t;return(0,m.isStickyInputPinConfig)(o)||o.sticky?{...e,[n]:!0}:e}),{}),Pe=(0,g.calcNodeContent)(N,P),De=u.useCallback((async()=>{const e=(0,c.okeys)(P.inputs),t=await re("New order?",(N.visibleInputs||e).join(","));t&&L(N,t.split(","))}),[P.inputs,re,N,L]),Te=u.useCallback((async()=>{const e=(0,c.okeys)(P.outputs),t=await re("New order?",(N.visibleOutputs||e).join(","));t&&$(N,t.split(","))}),[P.outputs,re,N,$]),Me=u.useCallback((()=>{J(N)}),[J,N]),ke=u.useCallback((async()=>{const e=await re("Set custom display name",N.displayName||P.id);K(N,e)}),[re,N,K,P.id]),Re=Object.keys((0,v.getNodeInputs)(P)),Ae=Object.keys((0,c.getNodeOutputs)(P)),Ve=u.useCallback(((e,t)=>{Y&&Y(N,e,t)}),[N,Y]),ze=u.useCallback(((e,t)=>{Z&&Z(N,e,t)}),[N,Z]),Le=()=>(0,l.jsx)("div",{className:"inputs no-drag",children:Ce.map((t=>{let[i,r]=t;var a;return(0,l.jsx)(f.PinView,{type:"input",currentInsId:N.id,ancestorsInsIds:e.ancestorsInsIds,id:i,optional:Ne.has(i),connected:ie.has(i),isSticky:Se[i],minimized:!n&&1===Ce.length,onToggleSticky:me,selected:i===o,onClick:ae,onDoubleClick:le,isClosestToMouse:!!s&&"input"===s.type&&s.pin===i,onToggleLogged:j,onToggleBreakpoint:w,onInspect:e.onInspectPin,description:r.description,queuedValues:null!==(a=e.queuedInputsData[i])&&void 0!==a?a:0,onMouseUp:Ve,onMouseDown:ze},i)}))}),$e=()=>(0,l.jsx)("div",{className:"outputs no-drag",children:je.map((t=>{let[o,r]=t;return(0,l.jsx)(f.PinView,{currentInsId:N.id,ancestorsInsIds:e.ancestorsInsIds,connected:se.has(o),type:"output",id:o,minimized:!n&&1===je.length,isClosestToMouse:!!s&&"output"===s.type&&s.pin===o,selected:o===i,onClick:de,onDoubleClick:ue,onToggleLogged:j,onToggleBreakpoint:w,onInspect:e.onInspectPin,description:r.description,onMouseUp:Ve,onMouseDown:ze},o)}))}),He=u.useCallback((e=>{W(N,e)}),[N,W]),qe=u.useCallback((()=>{const e=[...Re.map((e=>{const t=_e.includes(e),n=ie.has(e)&&!0!==ie.get(e),o=(0,c.getInputName)(e);return{text:t?n?`Hide input "${o}" (disconnect first)`:`Hide input "${o}"`:`Show input "${o}"`,onClick:()=>L(N,t?_e.filter((t=>t!==e)):[..._e,e]),disabled:n&&t}})),...Ae.map((e=>{const t=xe.includes(e),n=se.has(e),o=(0,c.getOutputName)(e);return{text:t?n?`Hide output "${o}" (disconnect first)`:`Hide output "${o}"`:`Show output "${o}"`,onClick:()=>$(N,t?xe.filter((t=>t!==e)):[...xe,e]),disabled:n&&t}})),...(0,c.isInlineNodeInstance)(N)&&(0,v.isVisualNode)(N.node)?[{text:"Ungroup inline node",onClick:()=>q(N)}]:[],...(0,c.isInlineNodeInstance)(N)?[{text:"Extract inline node to file",onClick:()=>F(N)}]:[],{text:"Reorder inputs",onClick:De},{text:"Reorder outputs",onClick:Te},{text:"Set display name",onClick:ke},{text:"Group selected instances",onClick:G},{text:"Delete instance",intent:"danger",onClick:Me}];return(0,l.jsxs)(_.Menu,{children:[(0,l.jsx)(_.MenuItem,{text:"Style",children:(0,l.jsx)(x.NodeStyleMenu,{style:ne,onChange:He,promptFn:re})}),e.map(((e,t)=>(0,a.createElement)(_.MenuItem,{...e,key:t})))]})}),[Re,Ae,N,De,Te,ke,Me,ne,He,re,_e,ie,L,xe,se,$,q,F,G]),Fe={"--node-color":ne.color,...ne.cssOverride||{}},Ge=(0,y.getInstanceDomId)(N.id,e.ancestorsInsIds);return(0,l.jsx)("div",{className:Ee,children:(0,l.jsx)(h.BaseNodeView,{pos:N.pos,viewPort:S,onDragStart:ce,onDragMove:fe,onDragEnd:pe,upperRenderer:Le,bottomRenderer:$e,displayMode:E,domId:Ge,children:(0,l.jsxs)(u.Fragment,{children:[Le(),H?(0,l.jsx)(_.Dialog,{isOpen:!0,onClose:e.onCloseInlineEditor,className:"inline-group-editor-container no-drag",title:`Editing inline node ${Pe}`,children:(0,l.jsx)("main",{className:(0,p.default)(_.Classes.DIALOG_BODY),tabIndex:0,children:(0,l.jsx)(b.VisualNodeEditor,{...e.inlineGroupProps,className:"no-drag",ref:te})})}):(0,l.jsx)(_.ContextMenu,{className:(0,p.default)("ins-view-inner",Oe,`size-${ee.size}`,{dark:Q}),onClick:ve,onDoubleClick:ge,content:qe(),style:Fe,children:(0,l.jsx)(_.Tooltip,{content:P.description,children:(0,l.jsxs)(u.Fragment,{children:[ne.icon?(0,l.jsx)(d.FontAwesomeIcon,{icon:ne.icon}):null," ",Pe]})})}),$e()]})})})}},53568:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStyleMenu=t.nodeStylePresetColors=void 0;const r=n(35250),a=n(50382),l=s(n(70079)),u=n(84472);t.nodeStylePresetColors=[{name:"Amethyst",color:"#9b5de5"},{name:"Magenta",color:"#f15bb5"},{name:"Yellow",color:"#fee440"},{name:"Capri",color:"#00bbf9"},{name:"Sea Green",color:"#00f5d4"},{name:"Orange",color:"#ff7f00"}];const d={size:"regular"};t.NodeStyleMenu=e=>{var n;const{onChange:o,style:i}=e,s=i||d,c=e.promptFn,p=l.default.useCallback(((e,t)=>{o({...s,[e]:t})}),[s,o]),f=l.default.useCallback((async()=>{const e=await c("Icon name? (Font Awesome conventions)","rocket"),t=e.includes(",")?e.split(","):e;p("icon",t)}),[c,p]),m=(0,l.useCallback)((async()=>{const e=await c("Enter a custom style (valid JSON representing a React CSS object)",s.cssOverride?JSON.stringify(s.cssOverride):"");try{const t=JSON.parse(e);p("cssOverride",t)}catch(t){console.error(t),(0,u.toastMsg)("Invalid object","danger")}}),[c,p,s.cssOverride]);return(0,r.jsxs)(l.default.Fragment,{children:[(0,r.jsxs)(a.MenuItem,{text:"Color",children:[t.nodeStylePresetColors.map((e=>(0,r.jsx)(a.MenuItem,{text:e.name,onClick:()=>p("color",e.color)},e.name))),(0,r.jsx)(a.MenuDivider,{}),(0,r.jsx)(a.MenuItem,{text:"Remove Color",onClick:()=>p("color",void 0)})]}),(0,r.jsxs)(a.MenuItem,{text:`Size (${null!==(n=s.size)&&void 0!==n?n:"regular"})`,children:[(0,r.jsx)(a.MenuItem,{text:"Small",onClick:()=>p("size","small")}),(0,r.jsx)(a.MenuItem,{text:"Regular",onClick:()=>p("size","regular")}),(0,r.jsx)(a.MenuItem,{text:"Large",onClick:()=>p("size","large")})]}),(0,r.jsxs)(a.MenuItem,{text:"Icon",children:[(0,r.jsx)(a.MenuItem,{text:"Choose Icon",onClick:f}),(0,r.jsx)(a.MenuItem,{text:"Remove Icon",onClick:()=>p("icon",void 0)})]}),(0,r.jsx)(a.MenuItem,{text:"Custom Styling",onClick:m})]})}},88593:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(53568),t)},83651:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(86553),t)},53159:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcInstancePosition=t.calcNodeWidth=t.calcNodeContent=void 0;const o=n(74762),i=n(86553),s=n(61888),r=n(30994);t.calcNodeContent=(e,t)=>{var n;return e.displayName?e.displayName:null!==(n=t.displayName)&&void 0!==n?n:t.id};t.calcNodeWidth=(e,n)=>{const r=(0,o.okeys)(n.inputs).length*i.MIN_WIDTH_PER_PIN,a=(0,t.calcNodeContent)(e,n),l=i.PIECE_CHAR_WIDTH;return(0,s.clamp)(a.length*l+2*i.PIECE_HORIZONTAL_PADDING,r,i.MAX_INSTANCE_WIDTH)};t.calcInstancePosition=(e,t,n)=>{const o=(0,r.getInstanceDomId)(e,t),i=document.getElementById(o);if(i){const{x:e,y:t,width:o,height:s}=i.getBoundingClientRect(),r=t+s/2;return{x:e+o/2-n.x,y:r-n.y}}return console.warn("Cannot find element to draw connection to",o),{x:99999,y:99999}}},17841:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutDebugger=t.LayoutDebuggerItem=t.PosDebugger=void 0;const i=n(70079),s=n(35250),r=n(74762),a=o(n(70079)),l=n(7047),u=e=>{let{pos:t}=e;return(0,s.jsxs)("span",{children:[t.x.toFixed(1),", ",t.y.toFixed(1)]})};t.PosDebugger=e=>(0,s.jsx)("span",{className:"pos-debugger",children:(0,s.jsx)(u,{pos:e.pos})});t.LayoutDebuggerItem=e=>{const{pos:n,viewPort:o,size:i,color:r}=e,a=o.zoom,l=n.x*a-o.pos.x*a,u=n.y*a-o.pos.y*a,d={transform:`translate(${l-n.x}px, ${u-n.y}px)`},c={transform:`scale(${o.zoom})`},p={transform:`translate(${n.x}px, ${n.y}px)`},f={width:`${i.width}px`,height:`${i.height}px`,backgroundColor:r};return(0,s.jsx)("div",{className:"layout-debugger",style:d,children:(0,s.jsxs)("span",{className:"drag-sim",style:p,children:[(0,s.jsx)(t.PosDebugger,{pos:n}),(0,s.jsx)("div",{className:"layout-debugger-zoom-wrapper",style:c,children:(0,s.jsx)("div",{className:"layout-debugger-inner",style:f})})]})})};const d=(()=>{try{return"true"===localStorage.getItem("pos-debugger")}catch(e){return!1}})();t.LayoutDebugger=e=>{const{extraDebug:n,vp:o,node:c,mousePos:p}=e;if(!d)return null;const f=n.map(((e,n)=>(0,i.createElement)(t.LayoutDebuggerItem,{...e,key:n}))),m=[...c.instances.map((e=>e.pos)),...(0,r.values)(c.inputsPosition),...(0,r.values)(c.outputsPosition)].map((e=>(0,s.jsx)(t.LayoutDebuggerItem,{pos:e,viewPort:o,size:{width:0,height:0},color:"red"}))),v=(0,l.logicalPosToRenderedPos)(p,o),g=(0,s.jsxs)("div",{className:"viewport-data",children:[(0,s.jsxs)("div",{children:["Pos: ",(0,s.jsx)(u,{pos:o.pos})]}),(0,s.jsxs)("div",{children:["Zoom: ",o.zoom.toFixed(2)," "]}),(0,s.jsxs)("div",{children:["Mouse (logical): ",(0,s.jsx)(u,{pos:p})]}),(0,s.jsxs)("div",{children:["Rendered (rendered): ",(0,s.jsx)(u,{pos:v})]})]});return(0,s.jsxs)(a.default.Fragment,{children:[g,f,m]})}},44338:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(17841),t)},38259:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateInstancesWithSingleConstPinsMap=t.getLeafInstancesOfSelection=void 0;t.getLeafInstancesOfSelection=(e,t,n)=>e.reduce(((e,o)=>[...e,...n.filter((e=>e.to.insId===o.id)).map((e=>t.find((t=>t.id===e.from.insId)))).filter((e=>!!e))]),[]).filter((t=>1===n.filter((e=>e.from.insId===t.id||e.to.insId===t.id)).length&&!e.includes(t)));t.calculateInstancesWithSingleConstPinsMap=(e,t)=>{const{connections:n}=e;return n.filter((e=>t.has(e.from.insId))).reduce(((e,n)=>{const o=t.get(n.from.insId),i=n.to.insId,s=e.get(i)||new Map;return s.set(n.to.pinId,{val:o,insId:n.from.insId}),e.set(i,s),e}),new Map)}},37488:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.NodeIoView=void 0;const a=n(35250),l=n(70079),u=s(n(70079)),d=n(74762),c=n(83234),p=r(n(26372)),f=n(50382),m=n(43490),v=n(66189),g=n(74762),h=n(30994),y=n(30653);t.NodeIoView=u.memo((function(e){const{viewPort:t,selected:n,pos:o,type:i,id:s,onDblClick:r,onRename:b,onDelete:I,onChangeInputMode:_,inputMode:x,onSelect:C,closest:j,onSetDescription:w,description:E,onMouseUp:O,onMouseDown:N,currentInsId:S}=e,{history:P,resetHistory:D,refreshHistory:T}=(0,v.useHistoryHelpers)(S,s,i),M=(0,m.usePrompt)(),k=u.useCallback((async()=>{const e=await M("Description?",E);w(i,s,e)}),[M,E,w,i,s]),R=u.useCallback((()=>{I&&I(i,s)}),[i,s,I]),A=u.useCallback((()=>{b&&b(i,s)}),[i,s,b]),V=u.useCallback((e=>{_&&_(s,e)}),[s,_]),z=u.useCallback((()=>[{text:`Current mode - ${x}`,onClick:d.noop},{text:"Make required",onClick:()=>V("required")},{text:"Make optional",onClick:()=>V("optional")},{text:"Make required-if-connected",onClick:()=>V("required-if-connected")},{text:"Set description",onClick:k},...e.onRename?[{text:"Rename",onClick:A}]:[],...e.onDelete?[{text:"Delete",onClick:R}]:[]]),[k,x,V,R,A,e.onDelete,e.onRename]),L=u.useCallback((t=>{r&&r(e.id,t)}),[r,e.id]),$=u.useCallback((()=>{C(s,i)}),[s,i,C]),H=u.useCallback((()=>(0,a.jsx)(f.Menu,{children:z().map(((e,t)=>(0,l.createElement)(f.MenuItem,{...e,key:t})))})),[z]),q="input"===i?(0,g.getInputName)(s):(0,d.getOutputName)(s),F=u.useCallback((e=>{O(s,i,e)}),[s,O,i]),G=u.useCallback((e=>{N(s,i,e)}),[s,N,i]),B=(0,y.useDarkMode)();return(0,a.jsx)(c.BaseNodeView,{className:(0,p.default)("node-io-view",i,{dark:B}),pos:o,onDragEnd:(n,o)=>{const r=e.pos,a=(o.x-r.x)/t.zoom,l=(o.y-r.y)/t.zoom,u=r.x+a,d=r.y+l;e.onDragEnd(i,s,n,{...o,x:u,y:d})},onDragStart:(t,n)=>{e.onDragStart(s,t,n)},onDragMove:(t,n)=>{e.onDragMove(i,s,t,{x:n.x,y:n.y})},viewPort:t,children:(0,a.jsx)(u.Fragment,{children:(0,a.jsx)(f.Tooltip,{content:(()=>{const t=(0,v.calcHistoryContent)(P),n=e.description?(0,a.jsx)("em",{children:e.description}):"";return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:q})," (",i,")"," "]}),n,(0,a.jsx)("hr",{}),t]})})(),children:(0,a.jsx)(f.ContextMenu,{onMouseEnter:T,onMouseOut:D,onMouseUp:F,onMouseDown:G,"data-tip":"","data-html":!0,"data-for":s+e.currentInsId,className:(0,p.default)("node-io-view-inner",{closest:j,selected:n,dark:B}),id:(0,h.getPinDomId)({fullInsIdPath:(0,d.fullInsIdPath)(e.currentInsId,e.ancestorInsIds),pinId:s,pinType:i,isMain:!0}),onClick:$,onDoubleClick:L,content:H(),children:s})})})})}))},66005:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(37488),t)},83782:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcNodeIoWidth=t.MIN_WIDTH_PER_PIN=t.PIECE_CHAR_WIDTH=t.PIECE_HORIZONTAL_PADDING=void 0,t.PIECE_HORIZONTAL_PADDING=15,t.PIECE_CHAR_WIDTH=9,t.MIN_WIDTH_PER_PIN=40;t.calcNodeIoWidth=e=>Math.max(t.MIN_WIDTH_PER_PIN,e.length*t.PIECE_CHAR_WIDTH+2*t.PIECE_HORIZONTAL_PADDING)},99942:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.orderVisualNode=t.layoutToInstances=void 0;const i=n(63521),s=n(74762),r=n(90794),a=o(n(53865)),l=n(83782),u=n(60190),d=n(53159),c=n(41032);t.layoutToInstances=(e,t)=>(0,a.default)(t,(t=>{(0,s.entries)(e.nodes).forEach((e=>{let[n,o]=e;if(n.startsWith("ins-")){const e=n.replace("ins-",""),i=t.instances.find((t=>t.id===e));i?i.pos=o.p:console.warn("WAT")}if(n.startsWith("node-input-")){const e=n.replace("node-input-","");t.inputsPosition[e]=o.p}if(n.startsWith("node-output-")){const e=n.replace("node-output-","");t.outputsPosition[e]=o.p}}))}));t.orderVisualNode=(e,n,o,a)=>{const{instances:p,connections:f}=e,m={...p.reduce(((e,t)=>{const o=(0,u.size)((0,d.calcNodeWidth)(t,(0,c.safelyGetNodeDef)(t,n)),i.NODE_HEIGHT);return{...e,[`ins-${t.id}`]:{p:t.pos,s:o}}}),{}),...(0,s.okeys)(e.inputsPosition).reduce(((t,n)=>({...t,[`node-input-${n}`]:{p:e.inputsPosition[n],s:(0,u.size)((0,l.calcNodeIoWidth)(n),i.NODE_HEIGHT)}})),{}),...(0,s.okeys)(e.outputsPosition).reduce(((t,n)=>({...t,[`node-output-${n}`]:{p:e.outputsPosition[n],s:(0,u.size)((0,l.calcNodeIoWidth)(n),i.NODE_HEIGHT)}})),{})},v=f.map((e=>[(0,s.isExternalConnectionNode)(e.from)?`node-input-${e.from.pinId}`:`ins-${e.from.insId}`,(0,s.isExternalConnectionNode)(e.to)?`node-output-${e.to.pinId}`:`ins-${e.to.insId}`])),g=(0,r.orderLayout)({nodes:m,edges:v},o,((n,o)=>{a&&a((0,t.layoutToInstances)(n,e),o)}));return(0,t.layoutToInstances)(g,e)}},90794:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.orderLayout=void 0;const o=n(60190),i=400,s=e=>e.reduce(((e,t)=>{const n=(0,o.vSub)(t.p,(0,o.vec)(t.s.width/2,t.s.height/2));return{...e,[t.id]:{p:n,s:t.s}}}),{});t.orderLayout=(e,t,n)=>{let{nodes:r,edges:a}=e,l=Object.entries(r).map((e=>{let[t,n]=e;return{id:t,p:(0,o.vAdd)(n.p,(0,o.vec)(n.s.width/2,n.s.height/2)),f:(0,o.vec)(0,0),v:(0,o.vec)(0,0),m:1,s:n.s}})),u=0;for(;u<t&&(u<2||(0,o.totalEnergy)(l)>.01);){let e=l;for(let t=0;t<e.length;t++)for(let n=t+1;n<e.length;n++)if(t!==n){const s=e[t],r=e[n],a=(0,o.vSub)(s.p,r.p),l=Math.abs(a.x),u=Math.abs(a.y),d=s.id.startsWith("node-input"),c=s.id.startsWith("node-output"),p=r.id.startsWith("node-input"),f=r.id.startsWith("node-output");if(l<i&&u<80){const e=1e3*(i-l);s.f=(0,o.vAdd)(s.f,(0,o.vec)(.5*e,0)),r.f=(0,o.vAdd)(r.f,(0,o.vec)(-.5*e,0))}if(u<50){const e=100*a.y;s.f=(0,o.vAdd)(s.f,(0,o.vec)(0,.5*e)),r.f=(0,o.vAdd)(r.f,(0,o.vec)(0,-.5*e))}if(d&&f){const e=(0,o.vSub)(s.p,r.p).y;if(e<-500){const t=100*(i-e);s.f=(0,o.vAdd)(s.f,(0,o.vec)(0,-.5*t)),r.f=(0,o.vAdd)(r.f,(0,o.vec)(0,.5*t))}}else if(c&&p){const e=(0,o.vSub)(s.p,r.p).y;if(e<500){const t=100*(i-e);s.f=(0,o.vAdd)(s.f,(0,o.vec)(0,-.5*t)),r.f=(0,o.vAdd)(r.f,(0,o.vec)(0,.5*t))}}const m=(0,o.vSub)(s.p,(0,o.vec)(0,s.p.y)),v=(0,o.vLen)(m),g=(0,o.vMul)((0,o.vNorm)(m),-50*v);s.f=(0,o.vAdd)(s.f,g)}a.forEach((t=>{let n=e.find((e=>e.id===t[0])),i=e.find((e=>e.id===t[1]));if(!n||!i)return void console.warn("weoops",t[0],t[1]);const s=(0,o.vec)(0,-200),r=(0,o.vSub)(n.p,i.p),a=(0,o.vSub)(s,r),l=1e3*(0,o.vLen)(a),u=(0,o.vMul)((0,o.vNorm)(a),.5*l),d=(0,o.vMul)((0,o.vNorm)(a),-.5*l);n.f=(0,o.vAdd)(n.f,u),i.f=(0,o.vAdd)(i.f,d)})),e=e.map((e=>(0,o.itrPhysics)(15,e))),e=e.map((e=>{const t=(0,o.vMul)(e.v,.5),n=(0,o.vLen)(t)>100?(0,o.vMul)((0,o.vNorm)(t),100):t;return{...e,v:n}})),l=e,n&&n({nodes:s(e),edges:a},u),u++}return{nodes:s(l),edges:a,itrs:u,timeout:u>=t,total:(0,o.totalEnergy)(l)}}},2036:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PinView=t.PIN_HEIGHT=void 0;const a=n(35250),l=s(n(70079)),u=r(n(26372)),d=n(50382),c=n(74762),p=n(30994),f=n(66189),m=n(30653);t.PIN_HEIGHT=23;t.PinView=l.memo((function(e){const{selected:t,type:n,connected:o,optional:i,currentInsId:s,isClosestToMouse:r,id:v,onMouseDown:g,onMouseUp:h}=e,{history:y,resetHistory:b,refreshHistory:I}=(0,f.useHistoryHelpers)(s,v,n),_=(0,m.useDarkMode)(),x="input"===n?(0,c.getInputName)(v):(0,c.getOutputName)(v),C=l.useCallback((e=>{0===e.button&&g(v,n,e)}),[v,n,g]),j=l.useCallback((e=>{0===e.button&&h(v,n,e)}),[v,n,h]);return(0,a.jsxs)("div",{className:(()=>{if("input"===e.type){const{isSticky:s}=e;return(0,u.default)("pin",{sticky:s,selected:t,closest:r,optional:i,connected:o,minimized:e.minimized,dark:_},n)}return(0,u.default)("pin",{selected:t,connected:o,closest:r,optional:i,minimized:e.minimized,"error-pin":v===c.ERROR_PIN_ID,dark:_},n)})(),"data-pin-id":v,children:[(0,a.jsx)(d.Tooltip,{className:"pin-info-tooltip",content:(()=>{const t=(0,f.calcHistoryContent)(y,"input"===n?e.queuedValues:void 0),o=e.description?(0,a.jsx)("em",{children:e.description}):"";return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:x})," (",n,")"," "]}),o,(0,a.jsx)("hr",{}),t]})})(),children:(0,a.jsxs)(d.ContextMenu,{onMouseEnter:I,onMouseOut:b,onMouseDown:C,onMouseUp:j,"data-tip":"","data-html":!0,"data-for":v+e.currentInsId,id:(0,p.getPinDomId)({fullInsIdPath:(0,c.fullInsIdPath)(e.currentInsId,e.ancestorsInsIds),pinId:v,pinType:n,isMain:!1}),onDoubleClick:t=>e.onDoubleClick&&e.onDoubleClick(v,t),className:(0,u.default)("pin-inner",{dark:_}),onClick:t=>{const{onShiftClick:o,onClick:i,id:s}=e;t.shiftKey&&o?o(s,t):i(s,n,t)},content:(()=>{const t=(0,a.jsx)(d.MenuItem,{onClick:()=>e.onInspect(e.currentInsId,{id:e.id,type:e.type}),text:"Inspect"});return"input"===e.type?(0,a.jsxs)(d.Menu,{children:[(0,a.jsx)(d.MenuItem,{onClick:()=>e.onToggleSticky(e.id),text:"Toggle sticky (square means sticky)"}),t]}):(0,a.jsx)(d.Menu,{children:t})})(),children:[x," ","input"===e.type&&e.isSticky?(0,a.jsx)("span",{className:"suffix",children:"s"}):null,"input"===e.type&&e.queueSize?(0,a.jsxs)("span",{className:"suffix",children:[e.queueSize," in Q"]}):null]})}),(0,a.jsx)("div",{className:"wire"})]})}))},66189:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useHistoryHelpers=t.calcHistoryContent=void 0;const i=n(35250),s=n(96233),r=o(n(70079)),a=n(70079),l=n(98158);t.calcHistoryContent=(e,t)=>{if(e){const{total:n,lastSamples:o}=e,a=(0,i.jsxs)("strong",{children:["Activated ",n," times this session"]}),l=o.length>0?(0,i.jsxs)("div",{children:["Last value:"," ",(0,i.jsx)("strong",{children:(0,s.valuePreview)(o[0].val).substring(0,200)}),(0,i.jsx)("br",{}),(0,i.jsx)("em",{children:"Inspect instance for the full value"})]}):"",u=t?(0,i.jsx)(r.default.Fragment,{children:(0,i.jsxs)("div",{children:["Queued values: ",(0,i.jsx)("strong",{children:t})]})}):"";return(0,i.jsxs)(r.default.Fragment,{children:[a,l,u]})}return"Loading session data.."};t.useHistoryHelpers=(e,t,n)=>{const o=(0,a.useRef)(),{onRequestHistory:i}=(0,l.useDebuggerContext)(),[s,u]=(0,a.useState)();return{history:s,refreshHistory:(0,a.useCallback)((()=>{clearInterval(o.current),i(e,t,n).then((e=>{u(e)})),o.current=setInterval((()=>{i(e,t,n).then((e=>{u(e)}))}),500)}),[e,i,t,n]),resetHistory:r.default.useCallback((()=>{clearInterval(o.current),u(void 0)}),[])}}},89440:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.QuickAddMenu=void 0;const r=n(35250),a=s(n(70079)),l=n(74762),u=n(50382),d=n(70457),c=n(9958),p=n(86125),f=d.Select.ofType(),m=e=>{switch(e.type){case"node":return`${e.node.id}`;case"value":return"Add inline value or function";case"import":return`Import ${e.importableNode.node.id} from ${e.importableNode.module}`}},v=(e,t)=>{let{handleClick:n,modifiers:o,query:i,index:s}=t;if(!o.matchesPredicate)return null;const l=m(e);return"value"===e.type?(0,r.jsxs)(a.Fragment,{children:[(0,r.jsx)(u.MenuDivider,{}),(0,r.jsx)(u.MenuItem,{active:o.active,disabled:o.disabled,onClick:n,text:(0,c.highlightText)(l,i)},m(e))]},s):(0,r.jsx)(u.MenuItem,{active:o.active,disabled:o.disabled,onClick:n,text:(0,c.highlightText)(l,i)},m(e))},g=(e,t,n,o)=>{const i=m(t).toLocaleLowerCase(),s=e.toLowerCase();return o?i===s:i.includes(s)};t.QuickAddMenu=e=>{const{resolvedDependencies:t,targetNode:n}=e,o={left:e.pos.x,top:e.pos.y},{onRequestImportables:i}=(0,p.useDependenciesContext)(),[s,d]=a.useState();a.useEffect((()=>{i().then((e=>d(e.importables)))}),[i]);const c=(0,l.values)({...t,[n.id]:n}),m=c.map((e=>({type:"node",node:e}))),h=new Set(c.map((e=>e.id))),y=s?s.filter((e=>!h.has(e.node.id))).map((e=>({type:"import",importableNode:e}))):[],b=m.concat(y).concat({type:"value"});return(0,r.jsx)("div",{className:"quick-add-menu",style:o,children:(0,r.jsx)(f,{className:"quick-add-nodes-select",items:b,itemPredicate:g,itemRenderer:v,inputProps:{className:"quick-add-input"},noResults:(0,r.jsx)(u.MenuItem,{disabled:!0,text:"No results."}),onItemSelect:t=>e.onAdd(t),popoverProps:{isOpen:!0,onClose:()=>e.onClose()}})})}},71033:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(89440),t)},73470:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRuntimePlayer=void 0;const o=n(74762),i=n(64955),s=(0,o.debugLogger)("runtime-player");t.createRuntimePlayer=()=>{let e=0,t=[];let n=!1,r=Date.now(),a=e;const l=()=>requestAnimationFrame((()=>{const u=Date.now();a=e,e+=u-r,r=u,((e,n)=>{const r=t;t=[],r.length&&s(`Playing ${r.length} events from`,e,n),r.forEach((e=>{s("Playing event",e),(0,i.playEvent)(e),e.insId===o.ROOT_INS_ID&&e.type===o.DebuggerEventType.PROCESSING_CHANGE&&!1===e.val&&(s("Main instance is done processing, clearing runtime UI",e),d())}))})(a,e),n&&l()})),u=()=>{n=!1},d=()=>{document.querySelectorAll("[data-runtime]").forEach((e=>{e.removeAttribute("data-runtime")})),document.querySelectorAll("[data-runtime-queue]").forEach((e=>{e.removeAttribute("data-runtime-queue")})),t=[]};return{stop:u,start:function(t){void 0===t&&(t=0),n=!0,e=t,r=Date.now(),l()},addEvents:e=>{t.push(...e)},destroy:()=>{u(),d()},clear:d,status:()=>({running:n,currDt:e,lastDt:a,queue:t,last:r})}}},64955:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.playEvent=t.cancelTimers=void 0;const o=n(74762),i=n(30994),s=1500,r=(0,o.debugLogger)("runtime-player:play-event"),a=(e,t)=>e.type===o.DebuggerEventType.INPUT_CHANGE||e.type===o.DebuggerEventType.OUTPUT_CHANGE?`${(0,o.fullInsIdPath)(e.insId,e.ancestorsInsIds)}.${e.pinId}`:(0,o.fullInsIdPath)(e.insId,e.ancestorsInsIds);t.cancelTimers=new Map;t.playEvent=e=>{switch(e.type){case o.DebuggerEventType.INPUT_CHANGE:case o.DebuggerEventType.OUTPUT_CHANGE:{const{pinId:n,insId:l,ancestorsInsIds:u}=e,d=e.type===o.DebuggerEventType.INPUT_CHANGE?"input":"output",c=[(0,i.getPinDomId)({fullInsIdPath:(0,o.fullInsIdPath)(l,u),pinId:n,pinType:d,isMain:!0})];l!==o.ROOT_INS_ID&&c.push((0,i.getPinDomId)({fullInsIdPath:(0,o.fullInsIdPath)(l,u),pinId:n,pinType:d,isMain:!1})),c.forEach(((i,u)=>{const d=a(e);clearTimeout(t.cancelTimers.get(d));const c=document.getElementById(i),p=`${l}.${n}`,f=e.type===o.DebuggerEventType.OUTPUT_CHANGE?document.querySelectorAll(`[data-from-id="${p}"]`):[];if(c){clearTimeout(t.cancelTimers.get(d)),c.removeAttribute("data-runtime"),f.forEach((e=>{e.removeAttribute("data-runtime")})),setTimeout((()=>{c.setAttribute("data-runtime","active"),f.forEach((e=>{e.setAttribute("data-runtime","active")}))}),0);const n=setTimeout((()=>{c.removeAttribute("data-runtime"),f.forEach((e=>{e.removeAttribute("data-runtime")})),t.cancelTimers.delete(d)}),s);t.cancelTimers.set(a(e),n)}else r(`No DOM element with Id [${i}] found to play event`,e)}));break}case o.DebuggerEventType.PROCESSING_CHANGE:{const{insId:n,ancestorsInsIds:l}=e,u=[(0,i.getMainInstanceIndicatorDomId)(n,l)];n!==o.ROOT_INS_ID&&u.push((0,i.getInstanceDomId)(n,l)),u.forEach(((n,o)=>{var i;const l=a(e),u=null===(i=document.getElementById(n))||void 0===i?void 0:i.parentElement;if(u)if(!0===e.val)u.setAttribute("data-runtime","processing"),clearTimeout(t.cancelTimers.get(l));else{u.removeAttribute("data-runtime"),setTimeout((()=>{"error"!==u.getAttribute("data-runtime")&&u.setAttribute("data-runtime","done")}),0);const e=setTimeout((()=>{u.removeAttribute("data-runtime"),t.cancelTimers.delete(l)}),s);t.cancelTimers.set(l,e)}else r(`No DOM element with Id [${n}] found to play event`,e)}));break}case o.DebuggerEventType.ERROR:{const{insId:n,ancestorsInsIds:l}=e,u=[(0,i.getMainInstanceIndicatorDomId)(n,l)];n!==o.ROOT_INS_ID&&u.push((0,i.getInstanceDomId)(n,l)),u.forEach(((n,o)=>{var i;const l=a(e),u=null===(i=document.getElementById(n))||void 0===i?void 0:i.parentElement;if(!u)return void r(`No DOM element with Id [${n}] found to play event`,e);clearTimeout(t.cancelTimers.get(l)),u.removeAttribute("data-runtime"),setTimeout((()=>{u.setAttribute("data-runtime","error")}));const d=setTimeout((()=>{u.removeAttribute("data-runtime"),t.cancelTimers.delete(l)}),s);t.cancelTimers.set(l,d)}));const d={...e,type:o.DebuggerEventType.OUTPUT_CHANGE,pinId:o.ERROR_PIN_ID};(0,t.playEvent)(d);break}case o.DebuggerEventType.INPUTS_STATE_CHANGE:(0,o.entries)(e.val).forEach((t=>{let[n,s]=t;const{insId:a,ancestorsInsIds:l}=e,u=(0,i.getPinDomId)({fullInsIdPath:(0,o.fullInsIdPath)(a,l),pinId:n,pinType:"input",isMain:!1}),d=document.getElementById(u);d?s>0?d.setAttribute("data-runtime-queue",`${s}`):d.removeAttribute("data-runtime-queue"):r(`No DOM element with Id [${u}] found to play event`,e)}))}}},25804:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useDebounce=void 0;const o=n(70079);t.useDebounce=function(e,t){const[n,i]=(0,o.useState)(e);return(0,o.useEffect)((()=>{const n=setTimeout((()=>{i(e)}),t);return()=>{clearTimeout(n)}}),[e,t]),[n,i]}},7047:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.handleChangeNodeInputType=t.handleIoPinRename=t.handleInstanceDrag=t.getInstancesInRect=t.isJsxValue=t.getMiddleOfViewPort=t.fitViewPortToNode=t.fitViewPortToRect=t.centerBoardPosOnTarget=t.renderedPosToLogicalPos=t.logicalPosToRenderedPos=t.getEffectiveNodeDimensions=t.calcNodesPositions=t.calcSelectionBoxArea=t.animateViewPort=t.easeInOutNum=t.easeInOutPos=t.easeInOutQuad=t.center=t.distance=t.clamp=t.domToViewPort=t.roundNumber=t.createNewMacroNodeInstance=t.createNewNodeInstance=t.createNewInlineNodeInstance=t.parseInputOutputTypes=t.parsePromptValue=t.getSelectionBoxRect=t.findClosestPin=t.changePinConfig=t.getInstancePinConfig=t.emptyList=t.emptyObj=void 0;const r=s(n(53865)),a=n(30721),l=n(63521),u=n(74762),d=n(18243),c=n(74762),p=n(53159),f=n(83782),m=n(60190),v=n(38259),g=n(83651),h=n(41032);t.emptyObj={},t.emptyList=[],t.getInstancePinConfig=function(e,n,o){var i;const s=e.instances.find((e=>e.id===n));if(!s)throw new Error(`Instance ${n} not found`);return null!==(i=(s.inputConfig||t.emptyObj)[o])&&void 0!==i?i:(0,u.queueInputPinConfig)()};t.changePinConfig=(e,t,n,o)=>r.produce(e,(e=>{var i;const{instances:s}=e,r=s.find((e=>e.id===t));if(!r)throw new Error("blah");const a=null!==(i=r.inputConfig)&&void 0!==i?i:{};a[n]=o,e.instances=s.map((e=>e===r?{...r,inputConfig:a}:e))}));t.findClosestPin=(e,t,n,o,i,s,r)=>{const a=(0,u.nodeInstance)(e.id,e.id),l=(0,c.okeys)(e.inputs).map((e=>({id:e,type:"input",pos:(0,d.calcPinPosition)({insId:i,ancestorsInsIds:s,pinId:e,pinType:"input",boardPos:o,viewPort:r,isMain:!0}),ins:a}))),p=(0,c.okeys)(e.outputs).map((e=>({id:e,type:"output",pos:(0,d.calcPinPosition)({insId:i,ancestorsInsIds:s,pinId:e,pinType:"output",boardPos:o,viewPort:r,isMain:!0}),ins:a}))),f=[...l,...e.instances.reduce(((n,a)=>{const l=(0,h.safelyGetNodeDef)(a,t),c=(0,g.getVisibleInputs)(a,l,e.connections),p=(0,g.getVisibleOutputs)(a,l,e.connections);return[...n,...c.map((e=>({ins:a,type:"input",pos:(0,d.calcPinPosition)({insId:a.id,ancestorsInsIds:(0,u.fullInsIdPath)(i,s),pinId:e,pinType:"input",boardPos:o,viewPort:r,isMain:!1}),id:e}))),...p.map((e=>({ins:a,type:"output",pos:(0,d.calcPinPosition)({insId:a.id,ancestorsInsIds:(0,u.fullInsIdPath)(i,s),pinId:e,pinType:"output",boardPos:o,viewPort:r,isMain:!1}),id:e})))]}),[]),...p];let m={dis:1e5,item:f[0]};return f.forEach((e=>{const t=e.pos.x-n.x,o=e.pos.y-n.y,i=Math.sqrt(t*t+o*o);i<m.dis&&(m.dis=i,m.item=e)})),m.item};t.getSelectionBoxRect=(e,t)=>{const n=Math.min(e.x,t.x),o=Math.min(e.y,t.y);return{x:n,y:o,w:Math.max(e.x,t.x)-n,h:Math.max(e.y,t.y)-o}};t.parsePromptValue=e=>{if(null===e)return;const t=parseInt(e,10);let n=e;return t.toString()!=e||isNaN(t)||(n=t),n};t.parseInputOutputTypes=e=>{const[,t,n]=e.match(/node\((.+)\|(.+)\)/)||[],o=(0,c.entries)(JSON.parse(t)).map((e=>{let[t,n]=e;const o={type:n,optional:(0,c.isOptionalType)(t)};return[t.replace(/\?$/,""),o]})),i=(0,c.entries)(JSON.parse(n)).map((e=>{let[t,n]=e;const o={type:n,optional:(0,c.isOptionalType)(t)};return[t.replace(/\?$/,""),o]}));return{inputs:(0,c.fromEntries)(o),outputs:(0,c.fromEntries)(i)}};t.createNewInlineNodeInstance=function(e,t,n){void 0===t&&(t=-1*l.NODE_HEIGHT*1.5);const o=(0,u.inlineNodeInstance)(`${e.id}-${(0,c.randomInt)(999)}`,e,{},{x:0,y:0}),i=(0,p.calcNodeWidth)(o,e),{x:s,y:r}=n,a={x:s-i/2,y:r+t};return{...o,pos:a}};t.createNewNodeInstance=function(e,t,n,o){void 0===t&&(t=-1*l.NODE_HEIGHT*1.5);const i="string"==typeof e?(0,h.safelyGetNodeDef)(e,o):e;if(!i)throw new Error(`${e} node not found in resolvedNodes`);const s=(0,c.entries)(i.inputs).reduce(((e,t)=>{let[n,o]=t;return e}),{}),r=(0,u.isMacroNodeDefinition)(i)?(0,u.macroNodeInstance)((0,u.createInsId)(i),i.id,i.defaultData,s,{x:0,y:0}):(0,u.nodeInstance)((0,u.createInsId)(i),i.id,s,{x:0,y:0}),a=(0,p.calcNodeWidth)(r,i),{x:d,y:f}=n,m={x:d-a/2,y:f+t};return{...r,pos:m}};t.createNewMacroNodeInstance=function(e,t,n){void 0===t&&(t=-1*l.NODE_HEIGHT*1.5);const o=(0,u.macroNodeInstance)((0,a.createId)(),e.id,e.defaultData,{},{x:0,y:0}),{x:i,y:s}=n;return{...o,pos:{x:i-50,y:s+t}}};t.roundNumber=e=>Math.round(100*e)/100;t.domToViewPort=(e,n,o)=>({x:(0,t.roundNumber)(n.pos.x+e.x/n.zoom/o.zoom),y:(0,t.roundNumber)(n.pos.y+e.y/n.zoom/o.zoom)});t.clamp=(e,t,n)=>Math.max(e,Math.min(t,n));t.distance=(e,t)=>{const n=t.x-e.x,o=t.y-e.y;return Math.sqrt(n*n+o*o)};t.center=(e,t,n)=>{let{zoom:o}=n;const i=e.x+e.w/2,s=e.y+e.h/2,{w:r,h:a}=t;return{x:i-r/o/2,y:s-a/o/2}};t.easeInOutQuad=e=>e<.5?2*e*e:(4-2*e)*e-1;t.easeInOutPos=(e,n,o,i,s)=>{const r=(0,t.clamp)(0,1,(s-o)/i),a=(0,t.easeInOutQuad)(r),l=n.x-e.x,u=n.y-e.y;return{x:e.x+l*a,y:e.y+u*a}};t.easeInOutNum=(e,n,o,i,s)=>{const r=(0,t.clamp)(0,1,(s-o)/i);return e+(n-e)*(0,t.easeInOutQuad)(r)};t.animateViewPort=(e,n,o,i)=>{const s=(0,t.distance)(e.pos,n.pos),r=Date.now(),a=o;if(0===s)return void i(e);const l=()=>{const o=Date.now(),s=(0,t.easeInOutPos)(e.pos,n.pos,r,a,o),u=(0,t.easeInOutNum)(e.zoom,n.zoom,r,a,o);o-r<a?(i({pos:s,zoom:u}),requestAnimationFrame(l)):i({pos:s,zoom:u})};requestAnimationFrame(l)};t.calcSelectionBoxArea=e=>{const n=(0,t.getSelectionBoxRect)(e.from,e.to);return n.h*n.w};const y=(e,t,n,o)=>({left:n.x,right:n.x+e,top:n.y,bottom:n.y+t,tag:o,center:(0,u.calcCenter)({w:e,h:t,...n})});t.calcNodesPositions=(e,t)=>[...e.instances.map((e=>{const n=(0,p.calcNodeWidth)(e,(0,h.safelyGetNodeDef)(e,t)),o=l.NODE_HEIGHT;return y(n,o,e.pos,e.id)})),...(0,c.okeys)(e.inputs).map((t=>{const n=(0,f.calcNodeIoWidth)(t),o=l.NODE_HEIGHT,i=e.inputsPosition[t]||{x:0,y:0};return y(n,o,i,"input_"+t)})),...(0,c.okeys)(e.outputs).map((t=>{const n=(0,f.calcNodeIoWidth)(t),o=l.NODE_HEIGHT,i=e.outputsPosition[t]||{x:0,y:0};return y(n,o,i,"output"+t)}))];t.getEffectiveNodeDimensions=(e,n)=>{const o=(0,t.calcNodesPositions)(e,n),i=o[0]||{left:0,right:0,top:0,bottom:0},s=o.reduce(((e,t)=>t.left<e?t.left:e),i.left),r=o.reduce(((e,t)=>t.right>e?t.right:e),i.right),a=o.reduce(((e,t)=>t.top<e?t.top:e),i.top),l=r-s,d=o.reduce(((e,t)=>t.bottom>e?t.bottom:e),i.bottom)-a,c={x:s,y:a};return{size:{width:l,height:d},pos:c,center:(0,u.calcCenter)({w:l,h:d,...c})}};t.logicalPosToRenderedPos=(e,t)=>{const n=(0,m.vSub)(e,t.pos);return(0,m.vMul)(n,t.zoom)};t.renderedPosToLogicalPos=(e,t)=>{const n=(0,m.vDiv)(e,t.zoom);return(0,m.vAdd)(t.pos,n)};t.centerBoardPosOnTarget=(e,n,o,i)=>{const s=(0,t.logicalPosToRenderedPos)(e,i),r=(0,t.renderedPosToLogicalPos)(s,{...i,zoom:o}),a=Math.max(e.x,r.x)-Math.min(e.x,r.x),l=Math.max(e.y,r.y)-Math.min(e.y,r.y);return{x:o>i.zoom?i.pos.x+a:i.pos.x-a,y:o>i.zoom?i.pos.y+l:i.pos.y-l}};t.fitViewPortToRect=function(e,n,o){void 0===o&&(o=[20,150]);const i=o[0],s=o[1],r=e.w+i,a=e.h+s,l=n.width/r,u=n.height/a,d=Math.min(l,u)/1.15,c=(0,t.clamp)(.3,1.2,d);return{zoom:c,pos:{x:e.x-n.width/2/c,y:e.y-n.height/2/c+20}}};t.fitViewPortToNode=function(e,n,o,i){void 0===i&&(i=[20,150]);const{size:s,center:r}=(0,t.getEffectiveNodeDimensions)(e,n);return(0,t.fitViewPortToRect)({x:r.x,y:r.y,w:s.width,h:s.height},o,i)};t.getMiddleOfViewPort=(e,n)=>{const o={x:n.width/2,y:n.height/2};return(0,t.renderedPosToLogicalPos)(o,e)};t.isJsxValue=e=>{const t=e=>(0,c.isDefined)(e.ref)&&(0,c.isDefined)(e.type)&&(0,c.isDefined)(e.props);try{const n=JSON.parse(e);return t(n)||Array.isArray(n)&&t(n[0])}catch(n){return!1}};t.getInstancesInRect=(e,n,o,i,s,r,a)=>{const{from:d,to:c}=e,f=(0,t.getSelectionBoxRect)(d,c);return s.filter((e=>{const{pos:t}=e,i={...t,w:(0,p.calcNodeWidth)(e,(0,h.safelyGetNodeDef)(e,n))*o.zoom*a.zoom,h:l.NODE_HEIGHT*o.zoom*a.zoom};return(0,u.intersectRect)(f,i)||(0,u.intersectRect)(i,f)})).map((e=>e.id))};t.handleInstanceDrag=(e,t,n,o,i,s)=>{o.preventDefault(),o.stopPropagation();const a=(0,m.vSub)(n,t.pos);let l;const u=r.produce(e,(e=>{const r=e.instances.find((e=>e.id===t.id));if(!r)throw new Error("impossible state dragging instance that does not exist");!o.shiftKey&&s&&(l=[s]);const u=e.instances.filter((e=>i.includes(e.id)&&e!==r)),d=[r,...u],c=(0,v.getLeafInstancesOfSelection)(d,e.instances,e.connections);[...u,...c].forEach((e=>{e.pos=(0,m.vAdd)(e.pos,a)})),r.pos=n,!o.shiftKey&&s&&(l=[s])}));return{newValue:u,newSelected:l}};t.handleIoPinRename=(e,t,n,o)=>r.produce(e,(e=>{"input"===t?(e.inputs[o]=e.inputs[n],e.inputsPosition[o]=e.inputsPosition[n],delete e.inputs[n],e.connections=e.connections.map((e=>(0,u.isExternalConnectionNode)(e.from)&&e.from.pinId===n?{...e,from:{...e.from,pinId:o}}:e))):(e.outputs[o]=e.outputs[n],e.outputsPosition[o]=e.outputsPosition[n],e.connections=e.connections.map((e=>(0,u.isExternalConnectionNode)(e.to)&&e.to.pinId===n?{...e,to:{...e.to,pinId:o}}:e)),e.completionOutputs=(e.completionOutputs||[]).map((e=>e.split("+").map((e=>e===n?o:n)).join("+"))),delete e.outputs[n])}));t.handleChangeNodeInputType=(e,t,n)=>r.produce(e,(e=>{const o=e.inputs[t];if(!o)throw new Error("Wat");o.mode=n}))},42403:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createEditorClient=void 0;const i=n(74762),s=o(n(18706)),r=n(32048),a=n(31758),l=(0,i.debugLogger)("remote-debugger:editor-client");t.createEditorClient=(e,t)=>{const n=new URL(e),o=(0,r.io)(n.origin,{path:`${"/"===n.pathname?"":n.pathname}/socket.io/editor`,timeout:3e4});return o.emit("join-room-editor",t),{emitChange:e=>{o.emit(a.DebuggerServerEventType.CHANGE_EVENT_NAME,e)},emitBreakpointsChange:e=>{o.emit(a.DebuggerServerEventType.UPDATE_BREAKPOINTS,e)},interceptInput:e=>{o.emit(a.DebuggerServerEventType.INPUT_VALUE_OVERRIDE,e)},interceptOutput:e=>{o.emit(a.DebuggerServerEventType.OUTPUT_VALUE_OVERRIDE,e)},onRuntimeReady:e=>(o.on(a.DebuggerServerEventType.RUNTIME_READY,e),()=>o.off(a.DebuggerServerEventType.RUNTIME_READY,e)),onChangeAwk:e=>(o.on(a.DebuggerServerEventType.CHANGE_AWK,e),()=>o.off(a.DebuggerServerEventType.CHANGE_AWK,e)),onChangeError:e=>(o.on(a.DebuggerServerEventType.CHANGE_ERROR,e),()=>o.off(a.DebuggerServerEventType.CHANGE_ERROR,e)),onIsAlive:e=>(o.on(a.DebuggerServerEventType.IS_ALIVE,e),()=>o.off(a.DebuggerServerEventType.IS_ALIVE,e)),emitInputValue:(e,t)=>{l(`Emitting push input value to ${e} %o`,t),o.emit(a.DebuggerServerEventType.PUSH_INPUT_VALUE,{pinId:e,value:t})},destroy:()=>{o.disconnect(),(0,a.enumToArray)(a.DebuggerServerEventType).forEach((e=>o.off(e)))},onDisconnect:e=>(o.on("disconnect",e),()=>o.off("disconnect",e)),debugInfo:()=>`Remote debugger for ${e}`,onBatchedEvents:e=>(o.on(a.DebuggerServerEventType.EVENTS_BATCH,e),()=>o.off(a.DebuggerServerEventType.EVENTS_BATCH,e)),requestState:()=>s.default.get(`${e}/state`).then((e=>e.data.state)),getHistory:n=>s.default.get(`${e}/history`,{params:{insId:n.insId,pinId:n.pinId,limit:n.limit,executionId:t}}).then((e=>e.data)),clearHistory:()=>s.default.delete(`${e}/history`).then((()=>{})),triggerNode:(t,n)=>s.default.post(`${e}/trigger`,{nodeId:t,inputs:n}).then((e=>e.data))}}},58066:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeData=void 0;const o=n(74762),i=n(36783),s=(0,o.debugLogger)("remote-debugger:normalize-data");t.normalizeData=e=>{if(e instanceof Error)return(0,i.serializeError)(e);if("object"==typeof e&&null!==e){e={...e};const t=new WeakSet,n=e=>{if("bigint"==typeof e)return e.toString();if("object"!=typeof e||Array.isArray(e))return e;if(null===e)return e;if(t.has(e))return"[Circular]";try{t.add(e)}catch(o){s("Error adding to WeakSet","data:",e,"type:",typeof e,"error:",o)}if(Array.isArray(e))return e.map(n);if("object"==typeof e){const t={};for(const o in e)t[o]=n(e[o]);return t}return e};return n(e)}return e}},39641:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRuntimeClient=t.DEFAULT_DT_SCALE=void 0;const o=n(74762),i=n(32048),s=n(31758),r=n(58066),a=(0,o.debugLogger)("remote-debugger:runtime-client");t.DEFAULT_DT_SCALE=1;t.createRuntimeClient=(e,t)=>{const n=new URL(e),l=(0,i.io)(n.origin,{path:`${"/"===n.pathname?"":n.pathname}/socket.io/runtime`,timeout:1e3,reconnectionAttempts:3});l.emit("join-room-runtime",t),l.on("connection",(e=>{e.join(t)}));let u=new Set;l.on(s.DebuggerServerEventType.UPDATE_BREAKPOINTS,(e=>{u=new Set(e)}));const d=(0,o.cappedArrayDebounce)((e=>{a(`Emitting debounced batched events - ${e.length}`),l.emit(s.DebuggerServerEventType.EVENTS_BATCH,e)}),100,200);return{onChange:e=>(l.on(s.DebuggerServerEventType.CHANGE_EVENT_NAME,e),()=>l.off(s.DebuggerServerEventType.CHANGE_EVENT_NAME,e)),onInput:e=>(l.on(s.DebuggerServerEventType.PUSH_INPUT_VALUE,e),()=>l.off(s.DebuggerServerEventType.PUSH_INPUT_VALUE,e)),emitEvent:e=>{a(`Emitting event ${e.type} change event of ${e.insId}`),e.val=(0,r.normalizeData)(e.val),d.addItem({...e,time:Date.now()})},emitRuntimeReady:()=>{l.emit(s.DebuggerServerEventType.RUNTIME_READY,{})},emitChangeAwk:()=>{l.emit(s.DebuggerServerEventType.CHANGE_AWK,{})},emitChangeError:e=>{l.emit(s.DebuggerServerEventType.CHANGE_ERROR,{error:e})},emitIsAlive:e=>{l.emit(s.DebuggerServerEventType.IS_ALIVE,{time:e})},destroy:async()=>{d.pendingItems()&&(d.flush(),await(0,o.delay)(100)),(0,s.enumToArray)(s.DebuggerServerEventType).forEach((e=>l.off(e))),l.disconnect()},onDisconnect:e=>(l.on("disconnect",e),()=>l.off("disconnect",e)),waitForConnection:()=>new Promise(((e,t)=>{l.connected?e():(l.on("connect_error",(e=>{t(`Socket connect error: ${e}`)})),l.on("connect",(()=>{e()})))}))}}},31758:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DebuggerServerEventType=t.enumToArray=t.isNumber=t.isSimpleType=t.valuePreview=t.toString=void 0;const o=n(36783);t.toString=e=>{if("object"===typeof e){if(e instanceof Error)return JSON.stringify((0,o.serializeError)(e));try{return JSON.stringify(e).substr(0,250)}catch(t){return"Object (cannot stringify)"}}return`${e}`.substr(0,250)};t.valuePreview=e=>(0,t.toString)(e).substr(0,100);t.isSimpleType=e=>["number","string","boolean"].includes(typeof e);t.isNumber=e=>!1===isNaN(Number(e)),t.enumToArray=function(e){return Object.keys(e).filter(t.isNumber).map((t=>e[t]))},function(e){e.RUNTIME_READY="runtime-ready",e.CHANGE_EVENT_NAME="change",e.PUSH_INPUT_VALUE="push-input-value",e.CHANGE_AWK="live-change-awk",e.CHANGE_ERROR="live-change-error",e.IS_ALIVE="is-alive",e.UPDATE_BREAKPOINTS="update-breakpoints",e.INPUT_VALUE_OVERRIDE="input-value-override",e.OUTPUT_VALUE_OVERRIDE="output-value-override",e.INPUT_VALUE_CHANGE="input-value-changed",e.OUTPUT_VALUE_CHANGE="output-value-changed",e.PROCESSING_CHANGE="processing-changed",e.INPUTS_STATE_CHANGE="inputs-state-changed",e.NODE_ERROR="node-error",e.EVENTS_BATCH="events-batch"}(t.DebuggerServerEventType||(t.DebuggerServerEventType={}))},96233:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(31758),t),i(n(42403),t),i(n(39641),t)},11607:(e,t)=>{"use strict";t.Z=void 0,t.Z=function(e,t,n){var o;const i=t.definitionBuilder(n.macroData),s=t.runFnBuilder(n.macroData),r=`${e}${t.id}__${n.id}`;return{...i,displayName:null!==(o=i.displayName)&&void 0!==o?o:t.id,namespace:t.namespace,id:r,run:s}}},20740:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Log=void 0;t.Log={id:"Log",defaultStyle:{icon:"fa-terminal"},namespace:"Console",description:"Logs a value to the console",inputs:{value:{description:"Value to log"}},outputs:{},run:e=>{let{value:t}=e;return console.log(t)}}},50461:(__unused_webpack_module,exports)=>{"use strict";var ConditionType;function calculateCondition(val1,val2,condition){switch(condition.type){case ConditionType.Equal:return val1===val2;case ConditionType.NotEqual:return val1!==val2;case ConditionType.GreaterThan:return val1>val2;case ConditionType.GreaterThanOrEqual:return val1>=val2;case ConditionType.LessThan:return val1<val2;case ConditionType.LessThanOrEqual:return val1<=val2;case ConditionType.Contains:return val1.includes(val2);case ConditionType.NotContains:return!val1.includes(val2);case ConditionType.IsEmpty:return""===val1;case ConditionType.IsNotEmpty:return""!==val1;case ConditionType.IsNull:return null===val1;case ConditionType.IsNotNull:return null!==val1;case ConditionType.IsUndefined:return void 0===val1;case ConditionType.IsNotUndefined:return void 0!==val1;case ConditionType.HasProperty:return val1.hasOwnProperty(val2);case ConditionType.LengthEqual:return val1.length===val2;case ConditionType.LengthNotEqual:return val1.length!==val2;case ConditionType.LengthGreaterThan:return val1.length>val2;case ConditionType.LengthLessThan:return val1.length<val2;case ConditionType.TypeEquals:return typeof val1===val2;case ConditionType.RegexMatches:return new RegExp(val1).test(val2);case ConditionType.Expression:try{const fnStr=`(value, compareTo) => ${condition.data}`,fn=eval(fnStr);return fn(val1,val2)}catch(e){return console.error(e),!1}}}function getProperty(e,t){const n=t.split(".").filter((e=>""!==e));let o=e;for(const i of n)o=o[i];return o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Conditional=exports.ConditionType=void 0,function(e){e.Equal="EQUAL",e.NotEqual="NOT_EQUAL",e.GreaterThan="GREATER_THAN",e.GreaterThanOrEqual="GREATER_THAN_OR_EQUAL",e.LessThan="LESS_THAN",e.LessThanOrEqual="LESS_THAN_OR_EQUAL",e.Contains="CONTAINS",e.NotContains="NOT_CONTAINS",e.RegexMatches="REGEX_MATCHES",e.IsEmpty="IS_EMPTY",e.IsNotEmpty="IS_NOT_EMPTY",e.IsNull="IS_NULL",e.IsNotNull="IS_NOT_NULL",e.IsUndefined="IS_UNDEFINED",e.IsNotUndefined="IS_NOT_UNDEFINED",e.HasProperty="HAS_PROPERTY",e.LengthEqual="LENGTH_EQUAL",e.LengthNotEqual="LENGTH_NOT_EQUAL",e.LengthGreaterThan="LENGTH_GREATER_THAN",e.LengthLessThan="LENGTH_LESS_THAN",e.TypeEquals="TYPE_EQUALS",e.Expression="EXPRESSION"}(ConditionType=exports.ConditionType||(exports.ConditionType={})),exports.Conditional={id:"Conditional",namespace:"Control Flow",description:"Evaluates a condition and emits the value of the matching case",runFnBuilder:config=>(inputs,outputs,adv)=>{const{compareTo:argType,propertyPath:propertyPath,condition:condition,trueValue:trueValue,falseValue:falseValue}=config,{true:trueOutput,false:falseOutput}=outputs,comparedValue="static"===argType.mode?argType.value:inputs.compareTo,leftSide=propertyPath?getProperty(inputs.value,propertyPath):inputs.value,rightSide="dynamic"===config.compareTo.mode&&config.compareTo.propertyPath?getProperty(comparedValue,config.compareTo.propertyPath):comparedValue,result=calculateCondition(leftSide,rightSide,condition),outputToUse=result?trueOutput:falseOutput,configToUse=result?trueValue:falseValue;if("value"===configToUse.type)outputToUse.next(inputs.value);else if("compareTo"===configToUse.type)outputToUse.next(comparedValue);else{if("expression"!==configToUse.type)throw new Error(`Unknown type ${configToUse.type}`);{const expression=configToUse.data;try{const fnStr=`(value, compareTo) => ${expression}`,fn=eval(fnStr);outputToUse.next(fn(inputs.value,comparedValue))}catch(e){adv.onError(e)}}}},definitionBuilder:e=>{const t=["value"];"dynamic"===e.compareTo.mode&&t.push("compareTo");return{displayName:"Conditional",description:"Evaluates a condition and emits the value of the matching case",inputs:Object.fromEntries(t.map((e=>[e,{}]))),outputs:{true:{description:"Emits the value if the condition is true"},false:{description:"Emits the value if the condition is false"}}}},defaultData:{compareTo:{mode:"dynamic",propertyPath:""},propertyPath:"",condition:{type:ConditionType.Equal},trueValue:{type:"value"},falseValue:{type:"value"}},editorConfig:{type:"custom",editorComponentBundlePath:"../../../dist/ui/Conditional.js"}}},66257:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.EmitOnTrigger=t.BooleanSplit=t.Subscribe=t.Publish=t.RoundRobin=t.LimitTimes=void 0,i(n(50461),t);const s=n(11253),r="Control Flow";t.LimitTimes={id:"Limit Times",namespace:r,description:"Item will be emitted until the limit is reached",inputs:{item:{mode:"required",description:"The item to emit"},times:{mode:"required",description:"The number of times to emit the item"},reset:{mode:"optional",description:"Reset the counter"}},outputs:{ok:{}},reactiveInputs:["item","reset"],completionOutputs:[],run:function(e,t,n){const{state:o}=n,{item:i,times:s,reset:r}=e,{ok:a}=t;if(void 0!==r)return void o.set("val",0);let l=o.get("val")||0;l++,o.set("val",l),l>=s?n.onError(new Error(`Limit of ${s} reached`)):a.next(i)}},t.RoundRobin={id:"RoundRobin",displayName:"Round Robin",namespace:r,defaultData:{count:3},definitionBuilder:e=>{let{count:t}=e;return{displayName:`Round Robin ${t}`,description:`Item will be emitted to one of the ${t} outputs in a round robin fashion`,inputs:{value:{mode:"required",description:"The value to emit"}},completionOutputs:[],reactiveInputs:["value"],outputs:Array.from({length:t}).reduce(((e,n,o)=>({...e,[`r${o+1}`]:{description:`The ${o+1} output in order to emit the value received. After emitting a value, it moves to "r${(o+2)%t}"'s turn.`}})),{})}},runFnBuilder:e=>{let{count:t}=e;return(e,n,o)=>{const{state:i}=o,s=Array.from({length:t}).map(((e,t)=>n[`r${t+1}`])),r=i.get("curr")||0,a=s[r],l=(r+1)%t;i.set("curr",l),a.next(e.item)}},editorConfig:{type:"structured",fields:[{type:{value:"number"},configKey:"count",label:"Count",defaultValue:3,allowDynamic:!1}]}},t.Publish={id:"Publish",namespace:r,description:"Publishes a value by a key to all listeners in the current flow. Use 'Subscribe' to listen to events.",inputs:{key:{mode:"required",description:"A key to use to subscribe to values"},value:{mode:"required"}},outputs:{},run:function(e,t,n){const o=`${n.ancestorsInsIds}__${e.key}`;s.publish(o,e.value)}},t.Subscribe={id:"Subscribe",namespace:r,description:"Subscribes to a value published by a key. Use 'Publish' to publish values.",inputs:{key:{mode:"required",description:"A key to use to subscribe to values"},initial:{mode:"required-if-connected",description:"If passed will be published has the first value"}},completionOutputs:[],outputs:{value:{description:"The value published by the key"}},run:function(e,t,n){const{value:o}=t,i=`${n.ancestorsInsIds}__${e.key}`,r=s.subscribe(i,((e,t)=>{o.next(t)}));void 0!==e.initial&&o.next(e.initial),n.onCleanup((()=>{s.unsubscribe(r)}))}},t.BooleanSplit={namespace:r,id:"Boolean Split",description:"Splits a boolean value into two outputs",inputs:{value:{mode:"required",description:"Boolean value"},trueValue:{mode:"required-if-connected",description:"Value to emit if the input is true. Defaults to true"},falseValue:{mode:"required-if-connected",description:"Value to emit if the input is false. Defaults to false"}},outputs:{true:{description:"The value is true"},false:{description:"The value is false"}},run:function(e,t){const{true:n,false:o}=t,{value:i,trueValue:s,falseValue:r}=e;i?n.next(null==s||s):o.next(null!=r&&r)}},t.EmitOnTrigger={namespace:r,id:"Emit on Trigger",description:"Emits the value when the trigger input receives any value",inputs:{value:{mode:"required",description:"The value to emit"},trigger:{mode:"required",description:"The trigger to emit the value"}},outputs:{result:{description:"The value emitted"}},run:function(e,t){const{result:n}=t,{value:o,trigger:i}=e;void 0!==i&&n.next(o)}}},35948:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DateToTimezoneOffset=t.DateToDayOfWeek=t.DateToMilliseconds=t.DateToSeconds=t.DateToMinutes=t.DateToHours=t.DateToDay=t.MonthToDate=t.DateToYear=t.DateToUnixTime=t.DateToISOString=t.DateToString=t.DateFromISOString=t.DateFromString=t.DateFromUnixTime=t.NowUnixTime=t.NowISOString=t.NowString=t.Now=void 0;const n="Dates";t.Now={id:"Now",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Returns the current date and time",inputs:{},outputs:{now:{description:"Current date and time"}},run:(e,t)=>{let{now:n}=t;return n.next(new Date)}},t.NowString={id:"Now String",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Returns the current date and time as a string",inputs:{},outputs:{now:{description:"Current date and time"}},run:(e,t)=>{let{now:n}=t;return n.next((new Date).toString())}},t.NowISOString={id:"Now ISO String",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Returns the current date and time as a string in ISO format",inputs:{},outputs:{now:{description:"Current date and time"}},run:(e,t)=>{let{now:n}=t;return n.next((new Date).toISOString())}},t.NowUnixTime={id:"Now Unix Time",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Returns the current date and time as a Unix time",inputs:{},outputs:{now:{description:"Current date and time"}},run:(e,t)=>{let{now:n}=t;return n.next((new Date).getTime())}},t.DateFromUnixTime={id:"Date From Unix Time",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Creates a date from a Unix time",inputs:{time:{description:"Unix time"}},outputs:{date:{description:"Date"}},run:(e,t)=>{let{time:n}=e,{date:o}=t;return o.next(new Date(n))}},t.DateFromString={id:"Date From String",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Creates a date from a string",inputs:{string:{description:"String"}},outputs:{date:{description:"Date"}},run:(e,t)=>{let{string:n}=e,{date:o}=t;return o.next(new Date(n))}},t.DateFromISOString={id:"Date From ISO String",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Creates a date from an ISO string",inputs:{string:{description:"String"}},outputs:{date:{description:"Date"}},run:async(e,t,n)=>{let{string:o}=e,{date:i}=t,{onError:s}=n;try{i.next(new Date(o))}catch(r){console.error("Error in node",r),s(r)}}},t.DateToString={id:"Date To String",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Converts a date to a string",inputs:{date:{description:"Date"}},outputs:{string:{description:"String"}},run:(e,t)=>{let{date:n}=e,{string:o}=t;return o.next(n.toString())}},t.DateToISOString={id:"Date To ISO String",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Converts a date to an ISO string",inputs:{date:{description:"Date"}},outputs:{string:{description:"String"}},run:(e,t)=>{let{date:n}=e,{string:o}=t;return o.next(n.toISOString())}},t.DateToUnixTime={id:"Date To Unix Time",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Converts a date to a Unix time",inputs:{date:{description:"Date"}},outputs:{time:{description:"Unix time"}},run:(e,t)=>{let{date:n}=e,{time:o}=t;return o.next(n.getTime())}},t.DateToYear={id:"Date To Year",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Converts a date to a year",inputs:{date:{description:"Date"}},outputs:{year:{description:"Year"}},run:(e,t)=>{let{date:n}=e,{year:o}=t;return o.next(n.getFullYear())}},t.MonthToDate={id:"Month To Date",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Converts a date to a month",inputs:{date:{description:"Date"}},outputs:{month:{description:"Month"}},run:(e,t)=>{let{date:n}=e,{month:o}=t;return o.next(n.getMonth())}},t.DateToDay={id:"Date To Day",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Converts a date to a day",inputs:{date:{description:"Date"}},outputs:{day:{description:"Day"}},run:(e,t)=>{let{date:n}=e,{day:o}=t;return o.next(n.getDate())}},t.DateToHours={id:"Date To Hours",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Converts a date to hours",inputs:{date:{description:"Date"}},outputs:{hours:{description:"Hours"}},run:(e,t)=>{let{date:n}=e,{hours:o}=t;return o.next(n.getHours())}},t.DateToMinutes={id:"Date To Minutes",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Converts a date to minutes",inputs:{date:{description:"Date"}},outputs:{minutes:{description:"Minutes"}},run:(e,t)=>{let{date:n}=e,{minutes:o}=t;return o.next(n.getMinutes())}},t.DateToSeconds={id:"Date To Seconds",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Converts a date to seconds",inputs:{date:{description:"Date"}},outputs:{seconds:{description:"Seconds"}},run:(e,t)=>{let{date:n}=e,{seconds:o}=t;return o.next(n.getSeconds())}},t.DateToMilliseconds={id:"Date To Milliseconds",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Converts a date to milliseconds",inputs:{date:{description:"Date"}},outputs:{milliseconds:{description:"Milliseconds"}},run:(e,t)=>{let{date:n}=e,{milliseconds:o}=t;return o.next(n.getMilliseconds())}},t.DateToDayOfWeek={id:"Date To Day Of Week",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Converts a date to a day of the week",inputs:{date:{description:"Date"}},outputs:{day:{description:"Day"}},run:(e,t)=>{let{date:n}=e,{day:o}=t;return o.next(n.getDay())}},t.DateToTimezoneOffset={id:"Date To Timezone Offset",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Converts a date to a timezone offset",inputs:{date:{description:"Date"}},outputs:{offset:{description:"Offset"}},run:(e,t)=>{let{date:n}=e,{offset:o}=t;return o.next(n.getTimezoneOffset())}}},50544:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Http=void 0;const i=o(n(18706));t.Http={id:"Http",namespace:"HTTP",displayName:"HTTP Request",description:"Performs a HTTP request to a URL and emits the response data",runFnBuilder:e=>(t,n,o)=>{const{method:s,url:r,headers:a,params:l,data:u}=e,d="dynamic"===s.mode?t.method:s.value,c="dynamic"===r.mode?t.url:r.value,p="dynamic"===(null==a?void 0:a.mode)?t.headers:null==a?void 0:a.value,f="dynamic"===(null==l?void 0:l.mode)?t.params:null==l?void 0:l.value,m="dynamic"===(null==u?void 0:u.mode)?t.data:null==u?void 0:u.value,v={method:d,headers:p,params:f};return i.default.request({url:c,data:m,...v}).then((e=>n.data.next(e.data))).catch((e=>o.onError(e)))},definitionBuilder:e=>{const t=Object.entries(e).filter((e=>{let[t,n]=e;return"dynamic"===n.mode})).map((e=>{let[t]=e;return t})),n="static"===e.method.mode?e.method.value:void 0,o=n?` ${n}`:"";return{displayName:`HTTP${o} Request`,description:`Performs a ${o} HTTP request to a URL and emits the response data`,inputs:Object.fromEntries(t.map((e=>[e,{}]))),outputs:{data:{displayName:"Data",description:"Emits the response data"}}}},defaultData:{method:{mode:"static",value:"GET"},url:{mode:"static",value:"https://www.example.com"},headers:{mode:"static",value:{}},params:{mode:"static",value:{}},data:{mode:"static",value:{}}},editorConfig:{type:"structured",fields:[{type:{value:"string"},configKey:"url",label:"URL",defaultValue:"https://www.example.com",allowDynamic:!0},{type:{value:"select",items:["GET","POST","PUT","DELETE","PATCH"].map((e=>({label:e,value:e})))},configKey:"method",label:"Method",defaultValue:"GET",allowDynamic:!0},{type:{value:"json",label:""},configKey:"headers",label:"Headers",defaultValue:{},allowDynamic:!0},{type:{value:"json"},configKey:"params",label:"Query Parameters",defaultValue:{},allowDynamic:!0},{type:{value:"json"},configKey:"data",label:"Request Body",defaultValue:{},allowDynamic:!0}]}}},62737:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Collect=void 0;const o=n(74762),i=n(29967);t.Collect={id:"Collect",displayName:"Collect",description:"Collects values into a list. Over time, count, or trigger.",namespace:"Lists",defaultData:{strategy:"count",count:{mode:"static",value:3}},definitionBuilder:e=>{const t={value:{description:"Value to collect"}};"time"===e.strategy&&"dynamic"===e.time.mode?t.time={description:"Time in milliseconds"}:"count"===e.strategy&&"dynamic"===e.count.mode?t.count={description:"Number of values to collect"}:"trigger"===e.strategy&&(t.trigger={mode:"optional",description:"Emit a value here to output a list out of collected values"});return{displayName:"time"===e.strategy?"static"===e.time.mode?`Collect over ${(0,i.timeToString)(e.time.value)}`:"Collect over time":"count"===e.strategy?"static"===e.count.mode?`Collect ${e.count.value} values`:"Collect values":"Collect on trigger",description:"time"===e.strategy?"static"===e.time.mode?`Emits a list of all values received, from the first value and until ${(0,i.timeToString)(e.time.value)} pass.`:"Emits a list of all values received, from the first value and until the specified amount of time passes.":"count"===e.strategy?"static"===e.count.mode?`Collect ${e.count.value} values and emit a list of them.`:"Collect a specified amount of values and emit a list of them.":"Emits a list of all values received up until any value is received to the 'trigger' input.",inputs:t,reactiveInputs:["value",..."trigger"===e.strategy?["trigger"]:[]],outputs:{list:{description:"Collected values"}},completionOutputs:["list"]}},runFnBuilder:e=>async(t,n,i)=>{let{value:s,time:r,count:a,trigger:l}=t;const u=i.state.get("list")||[];if((0,o.isDefined)(s)&&(u.push(s),i.state.set("list",u)),"time"===e.strategy){const t="dynamic"===e.time.mode?r:e.time.value;if(!i.state.get("timer")){const e=setTimeout((()=>{n.list.next(u),i.state.set("list",[])}),t);i.state.set("timer",e)}}else if("count"===e.strategy){const t="dynamic"===e.count.mode?a:e.count.value;u.length>=t&&(n.list.next(u),i.state.set("list",[]))}else"trigger"===e.strategy&&(0,o.isDefined)(l)&&(n.list.next(u),i.state.set("list",[]))},editorConfig:{type:"custom",editorComponentBundlePath:"../../../../dist/ui/Collect.js"}}},91294:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Flatten=t.Slice=t.RemoveAt=t.Remove=t.Prepend=t.Append=t.AccumulateSomeValuesByCount=t.SpreadList=t.HeadAndRest=t.LoopList=t.Reverse=t.ConcatLists=t.ListFrom=t.Repeat=t.GetListElement=t.ListIsEmpty=t.ListLength=t.Collect=void 0;var o=n(62737);Object.defineProperty(t,"Collect",{enumerable:!0,get:function(){return o.Collect}});const i="Lists";t.ListLength={id:"List Length",defaultStyle:{icon:"fa-list"},namespace:i,description:"Returns the length of a list",inputs:{list:{description:"List"}},outputs:{length:{description:"Length"}},run:(e,t)=>{let{list:n}=e,{length:o}=t;return o.next(n.length)}},t.ListIsEmpty={id:"List Is Empty",defaultStyle:{icon:"fa-list"},namespace:i,description:"Returns true if the list is empty",inputs:{list:{description:"List"}},outputs:{isEmpty:{description:"Is empty"}},run:(e,t)=>{let{list:n}=e,{isEmpty:o}=t;return o.next(0===n.length)}},t.GetListElement={id:"Get List Element",defaultStyle:{icon:"fa-list"},namespace:i,description:"Returns the element at the specified index",inputs:{list:{description:"List"},index:{description:"Index"}},outputs:{element:{description:"Element"}},run:(e,t)=>{let{list:n,index:o}=e,{element:i}=t;return i.next(n[o])}},t.Repeat={id:"Repeat",defaultStyle:{icon:"fa-list"},namespace:i,description:"Repeats a value a number of times",inputs:{value:{description:"Value to repeat"},times:{description:"How many times will the value be repeated"}},outputs:{list:{description:"List"}},run:(e,t)=>{let{value:n,times:o}=e,{list:i}=t;const s=[];for(let r=0;r<o;r++)s.push(n);return i.next(s)}},t.ListFrom={id:"ListFrom",namespace:i,runFnBuilder:e=>{let{count:t}=e;return(e,n)=>{let{list:o}=n;const i=[];for(let s=0;s<t;s++)i.push(e[`item${s+1}`]);return o.next(i)}},definitionBuilder:e=>{let{count:t}=e;return{description:`Creates a list from ${t} values`,displayName:`List from ${t}`,inputs:Object.fromEntries(Array.from({length:t},((e,t)=>[`item${t+1}`,{}]))),outputs:{list:{description:"List containing all values"}}}},defaultData:{count:3},editorConfig:{type:"structured",fields:[{type:{value:"number"},configKey:"count",label:"Count",defaultValue:3,allowDynamic:!1}]}},t.ConcatLists={id:"Concat Lists",defaultStyle:{icon:"fa-list"},namespace:i,description:"Concatenates two lists",inputs:{list1:{description:"First list"},list2:{description:"Second list"}},outputs:{list:{description:"Concatenated list"}},run:(e,t)=>{let{list1:n,list2:o}=e,{list:i}=t;return i.next([...n,...o])}},t.Reverse={id:"Reverse",defaultStyle:{icon:"fa-list"},namespace:i,description:"Reverses a list",inputs:{list:{description:"List"}},outputs:{reversed:{description:"Reversed list"}},run:(e,t)=>{let{list:n}=e,{reversed:o}=t;return o.next(n.reverse())}},t.LoopList={id:"Loop List",defaultStyle:{icon:"fa-list"},namespace:i,searchKeywords:["each","spread"],description:"Emits all values in a list",inputs:{list:{description:"The list to loop"}},outputs:{item:{description:"Will emit a value for each item in the list"},index:{description:"Will emit the index of the item"},length:{description:"Will emit the length of the list"}},run:(e,t)=>{const{list:n}=e,{item:o,index:i}=t;for(const s of n)o.next(s),i.next(n.indexOf(s));t.length.next(n.length)}},t.HeadAndRest={id:"Head and rest",defaultStyle:{icon:"fa-list"},namespace:i,description:"Receives a list and emits two outputs: the first item and the rest of the list",inputs:{list:{description:"The list"}},outputs:{head:{description:"The first item in the list"},rest:{description:"The rest of the list"}},run:(e,t)=>{const{list:n}=e,{head:o,rest:i}=t;o.next(n[0]),i.next(n.slice(1))}},t.SpreadList={id:"SpreadList",namespace:i,displayName:"Spread List",description:"Spreads a list into multiple outputs",runFnBuilder:e=>{let{count:t}=e;return(e,n)=>{const{list:o}=e;for(let i=0;i<t;i++)n[`item${i+1}`].next(o[i])}},definitionBuilder:e=>{let{count:t}=e;return{description:`Receives a list with ${t} items and emits ${t} outputs: the first item, the second item, and so on`,displayName:`Spreads List of ${t}`,inputs:{list:{description:"The list"}},outputs:Object.fromEntries(Array.from({length:t},((e,t)=>[`item${t+1}`,{}])))}},defaultData:{count:3},editorConfig:{type:"structured",fields:[{type:{value:"number"},configKey:"count",label:"Count",defaultValue:3,allowDynamic:!1}]}},t.AccumulateSomeValuesByCount={id:"Accumulate Some Values by Count",defaultStyle:{icon:"fa-basket-shopping"},namespace:i,description:'Accumulates values sent to the "accept" input. Emits the list after the total items passed to both "accept" and "ignore" inputs reach the specified count.',inputs:{accept:{description:"Values to accumulate"},ignore:{description:"Values to ignore"},count:{description:"Number of values to accumulate before emitting them"}},reactiveInputs:["accept","ignore"],outputs:{accumulated:{description:"The accumulated accepted values"},ignored:{description:"The accumulated ignored values"}},run:(e,t,n)=>{const{accept:o,ignore:i,count:s}=e,{accumulated:r,ignored:a}=t,{state:l}=n;let u=l.get("list")||[],d=l.get("ignored")||[];void 0!==o&&(u.push(o),l.set("list",u)),void 0!==i&&(d.push(i),l.set("ignored",a)),u.length+d.length>=s&&(r.next(u),a.next(a))}},t.Append={id:"Append",namespace:i,description:"Appends an item to a list",inputs:{list:{description:"The list"},item:{description:"The item to append"}},outputs:{list:{description:"The resulting list"}},run:(e,t)=>{let{list:n,item:o}=e,{list:i}=t;i.next([...n,o])},defaultStyle:{icon:"fa-plus"}},t.Prepend={id:"Prepend",namespace:i,description:"Prepends an item to a list",inputs:{list:{description:"The list"},item:{description:"The item to prepend"}},outputs:{list:{description:"The resulting list"}},run:(e,t)=>{let{list:n,item:o}=e,{list:i}=t;i.next([o,...n])},defaultStyle:{icon:"fa-arrow-up"}},t.Remove={id:"Remove Item",namespace:i,description:"Removes an item from a list",inputs:{list:{description:"The list"},item:{description:"The item to remove"}},outputs:{list:{description:"The resulting list"}},run:(e,t)=>{let{list:n,item:o}=e,{list:i}=t;i.next(n.filter((e=>e!==o)))},defaultStyle:{icon:"fa-minus"}},t.RemoveAt={id:"Remove Item At",namespace:i,description:"Removes an item from a list at the specified index",inputs:{list:{description:"The list"},index:{description:"The index of the item to remove"}},outputs:{list:{description:"The resulting list"}},run:(e,t)=>{let{list:n,index:o}=e,{list:i}=t;i.next(n.filter(((e,t)=>t!==o)))},defaultStyle:{icon:"fa-times"}},t.Slice={id:"Slice",namespace:i,description:"Returns a slice of a list from the specified start index to the specified end index",inputs:{list:{description:"The list"},start:{description:"The index to start slicing from"},end:{description:"The index to end slicing at"}},outputs:{list:{description:"The resulting list"}},run:(e,t)=>{let{list:n,start:o,end:i}=e,{list:s}=t;s.next(n.slice(o,i))},defaultStyle:{icon:"fa-cut"}},t.Flatten={id:"Flatten",namespace:i,description:"Flattens a list of lists into a single list",inputs:{list:{description:"The list of lists"}},outputs:{list:{description:"The resulting list"}},run:(e,t)=>{let{list:n}=e,{list:o}=t;o.next(n.reduce(((e,t)=>[...e,...t]),[]))},defaultStyle:{icon:"fa-compress"}}},45888:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SumList=t.LessThanOrEqual=t.LessThan=t.GreaterThanOrEqual=t.GreaterThan=t.ToFixed=t.ParseFloat=t.ParseInt=t.Max=t.Min=t.Cos=t.Sin=t.Truncate=t.Round=t.Ceiling=t.Floor=t.AbsoluteValue=t.SquareRoot=t.Power=t.Modulo=t.Divide=t.Multiply=t.Subtract=t.Add=void 0;const n="Numbers";t.Add={id:"Add",defaultStyle:{icon:"fa-plus"},namespace:n,description:"Emits the sum of two numbers",inputs:{n1:{description:"First number to add"},n2:{description:"Second number to add"}},outputs:{sum:{description:"The sum of n1 and n2"}},run:(e,t)=>{let{n1:n,n2:o}=e,{sum:i}=t;return i.next(n+o)}},t.Subtract={id:"Subtract",defaultStyle:{icon:"fa-minus"},namespace:n,description:"Emits the difference of two numbers",inputs:{n1:{description:"First number to subtract"},n2:{description:"Second number to subtract"}},outputs:{difference:{description:"The difference of n1 and n2"}},run:(e,t)=>{let{n1:n,n2:o}=e,{difference:i}=t;return i.next(n-o)}},t.Multiply={id:"Multiply",defaultStyle:{icon:"fa-times"},namespace:n,description:"Emits the product of two numbers",inputs:{n1:{description:"First number to multiply"},n2:{description:"Second number to multiply"}},outputs:{product:{description:"The product of n1 and n2"}},run:(e,t)=>{let{n1:n,n2:o}=e,{product:i}=t;return i.next(n*o)}},t.Divide={id:"Divide",defaultStyle:{icon:"fa-divide"},namespace:n,description:"Emits the quotient of two numbers",inputs:{n1:{description:"First number to divide"},n2:{description:"Second number to divide"}},outputs:{quotient:{description:"The quotient of n1 and n2"}},run:(e,t)=>{let{n1:n,n2:o}=e,{quotient:i}=t;return i.next(n/o)}},t.Modulo={id:"Modulo",defaultStyle:{icon:"fa-percentage"},namespace:n,description:"Emits the remainder of two numbers",inputs:{n1:{description:"First number to divide"},n2:{description:"Second number to divide"}},outputs:{remainder:{description:"The remainder of n1 and n2"}},run:(e,t)=>{let{n1:n,n2:o}=e,{remainder:i}=t;return i.next(n%o)}},t.Power={id:"Power",defaultStyle:{icon:"fa-superscript"},namespace:n,description:"Emits the power of two numbers",inputs:{n1:{description:"Base number"},n2:{description:"Exponent"}},outputs:{power:{description:"The power of n1 and n2"}},run:(e,t)=>{let{n1:n,n2:o}=e,{power:i}=t;return i.next(Math.pow(n,o))}},t.SquareRoot={id:"Square Root",defaultStyle:{icon:"fa-square-root-alt"},namespace:n,description:"Emits the square root of a number",inputs:{n:{description:"Number to take the square root of"}},outputs:{root:{description:"The square root of n"}},run:(e,t)=>{let{n:n}=e,{root:o}=t;return o.next(Math.sqrt(n))}},t.AbsoluteValue={id:"Absolute Value",defaultStyle:{icon:"fa-abs"},namespace:n,description:"Emits the absolute value of a number",inputs:{n:{description:"Number to take the absolute value of"}},outputs:{absolute:{description:"The absolute value of n"}},run:(e,t)=>{let{n:n}=e,{absolute:o}=t;return o.next(Math.abs(n))}},t.Floor={id:"Floor",defaultStyle:{icon:"fa-floor"},namespace:n,description:"Emits the floor of a number",inputs:{n:{description:"Number to take the floor of"}},outputs:{floor:{description:"The floor of n"}},run:(e,t)=>{let{n:n}=e,{floor:o}=t;return o.next(Math.floor(n))}},t.Ceiling={id:"Ceiling",defaultStyle:{icon:"fa-ceiling"},namespace:n,description:"Emits the ceiling of a number",inputs:{n:{description:"Number to take the ceiling of"}},outputs:{ceiling:{description:"The ceiling of n"}},run:(e,t)=>{let{n:n}=e,{ceiling:o}=t;return o.next(Math.ceil(n))}},t.Round={id:"Round",defaultStyle:{icon:"fa-round"},namespace:n,description:"Emits the rounded value of a number",inputs:{n:{description:"Number to round"}},outputs:{rounded:{description:"The rounded value of n"}},run:(e,t)=>{let{n:n}=e,{rounded:o}=t;return o.next(Math.round(n))}},t.Truncate={id:"Truncate",defaultStyle:{icon:"fa-truncate"},namespace:n,description:"Emits the truncated value of a number",inputs:{n:{description:"Number to truncate"}},outputs:{truncated:{description:"The truncated value of n"}},run:(e,t)=>{let{n:n}=e,{truncated:o}=t;return o.next(Math.trunc(n))}},t.Sin={id:"Sin",defaultStyle:{icon:"fa-sin"},namespace:n,description:"Emits the sine of an angle",inputs:{angle:{description:"Angle in radians"}},outputs:{sine:{description:"The sine of angle"}},run:(e,t)=>{let{angle:n}=e,{sine:o}=t;return o.next(Math.sin(n))}},t.Cos={id:"Cos",defaultStyle:{icon:"fa-cos"},namespace:n,description:"Emits the cosine of an angle",inputs:{angle:{description:"Angle in radians"}},outputs:{cosine:{description:"The cosine of angle"}},run:(e,t)=>{let{angle:n}=e,{cosine:o}=t;return o.next(Math.cos(n))}},t.Min={id:"Min",namespace:n,description:"Emits the minimum of two numbers",inputs:{n1:{description:"First number"},n2:{description:"Second number"}},outputs:{min:{description:"The minimum of n1 and n2"}},run:(e,t)=>{let{n1:n,n2:o}=e,{min:i}=t;return i.next(Math.min(n,o))}},t.Max={id:"Max",namespace:n,description:"Emits the maximum of two numbers",inputs:{n1:{description:"First number"},n2:{description:"Second number"}},outputs:{max:{description:"The maximum of n1 and n2"}},run:(e,t)=>{let{n1:n,n2:o}=e,{max:i}=t;return i.next(Math.max(n,o))}},t.ParseInt={id:"Parse Int",namespace:n,description:"Emits the integer value of a string",inputs:{str:{description:"String to parse"}},outputs:{int:{description:"The integer value of str"}},run:(e,t)=>{let{str:n}=e,{int:o}=t;return o.next(parseInt(n))}},t.ParseFloat={id:"Parse Float",namespace:n,description:"Emits the float value of a string",inputs:{str:{description:"String to parse"}},outputs:{float:{description:"The float value of str"}},run:(e,t)=>{let{str:n}=e,{float:o}=t;return o.next(parseFloat(n))}},t.ToFixed={id:"To Fixed",namespace:n,description:"Emits the specified number of decimal places of a number",inputs:{number:{description:"Number to format"},places:{description:"Number of decimal places to format to"}},outputs:{fixed:{description:"The number with the specified number of decimal places"}},run:(e,t)=>{let{number:n,places:o}=e,{fixed:i}=t;return i.next(n.toFixed(o))}},t.GreaterThan={id:"Greater Than",namespace:n,description:"Emits true if the first number is greater than the second",inputs:{n1:{description:"First number"},n2:{description:"Second number"}},outputs:{result:{description:"true if n1 is greater than n2"}},run:(e,t)=>{let{n1:n,n2:o}=e,{result:i}=t;return i.next(n>o)}},t.GreaterThanOrEqual={id:"Greater Than Or Equal",namespace:n,description:"Emits true if the first number is greater than or equal to the second",inputs:{n1:{description:"First number"},n2:{description:"Second number"}},outputs:{result:{description:"true if n1 is greater than or equal to n2"}},run:(e,t)=>{let{n1:n,n2:o}=e,{result:i}=t;return i.next(n>=o)}},t.LessThan={id:"Less Than",namespace:n,description:"Emits true if the first number is less than the second",inputs:{n1:{description:"First number"},n2:{description:"Second number"}},outputs:{result:{description:"true if n1 is less than n2"}},run:(e,t)=>{let{n1:n,n2:o}=e,{result:i}=t;return i.next(n<o)}},t.LessThanOrEqual={id:"Less Than Or Equal",namespace:n,description:"Emits true if the first number is less than or equal to the second",inputs:{n1:{description:"First number"},n2:{description:"Second number"}},outputs:{result:{description:"true if n1 is less than or equal to n2"}},run:(e,t)=>{let{n1:n,n2:o}=e,{result:i}=t;return i.next(n<=o)}},t.SumList={id:"Sum List",defaultStyle:{icon:"fa-plus"},namespace:n,description:"Emits the sum of a list of numbers",inputs:{list:{description:"List of numbers"}},outputs:{sum:{description:"The sum of the numbers in list"}},run:(e,t)=>{let{list:n}=e,{sum:o}=t;return o.next(n.reduce(((e,t)=>e+t),0))}}},89769:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetAttribute=void 0,t.GetAttribute={id:"GetAttribute",displayName:"Get Attribute",searchKeywords:["pick","dot"],namespace:"Objects",defaultStyle:{icon:"fa-magnifying-glass"},description:"Gets an attribute from an object",definitionBuilder:e=>{const t={object:{description:"Object to get attribute from"}};return"dynamic"===e.key.mode&&(t.attribute={description:"Attribute to get"}),{inputs:t,outputs:{value:{description:"The value of the attribute"}},displayName:"Get Attribute"+("static"===e.key.mode?` "${e.key.value}"`:"")}},runFnBuilder:e=>(t,n)=>{let{object:o,attribute:i}=t,{value:s}=n;const r="static"===e.key.mode?e.key.value:i;s.next(r.split(".").reduce(((e,t)=>e[t]),o))},defaultData:{key:{mode:"static",value:""}},editorConfig:{type:"structured",fields:[{type:{value:"string"},configKey:"key",label:"Key",defaultValue:"",allowDynamic:!0}]}}},73098:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteAttribute=t.SetAttribute=t.ObjectEntries=t.ObjectValues=t.ObjectKeys=t.JSONStringify=t.JSONParse=t.GetAttributeOld=void 0,i(n(89769),t);const s="Objects";t.GetAttributeOld={id:"Get Attribute",searchKeywords:["pick","dot"],namespace:s,defaultStyle:{icon:"fa-magnifying-glass"},description:"Gets an attribute from an object",inputs:{object:{description:"Object to get attribute from"},attribute:{description:"Attribute to get"}},outputs:{value:{description:"The value of the attribute"}},run:(e,t)=>{let{object:n,attribute:o}=e,{value:i}=t;return i.next(o.split(".").reduce(((e,t)=>e[t]),n))}},t.JSONParse={id:"JSON Parse",defaultStyle:{icon:"fa-glasses"},namespace:s,description:"Parses a JSON string into an object",inputs:{json:{description:"JSON string to parse"}},outputs:{object:{description:"The parsed object"}},run:(e,t)=>{let{json:n}=e,{object:o}=t;return o.next(JSON.parse(n))}},t.JSONStringify={id:"JSON Stringify",defaultStyle:{icon:"fa-pen-fancy"},namespace:s,description:"Stringifies an object into a JSON string",inputs:{object:{description:"Object to stringify"}},outputs:{json:{description:"The stringified JSON"}},run:(e,t)=>{let{object:n}=e,{json:o}=t;return o.next(JSON.stringify(n))}},t.ObjectKeys={id:"Keys",defaultStyle:{icon:"fa-key"},namespace:s,description:"Emits the keys of an object",inputs:{object:{description:"Object to get keys of"}},outputs:{keys:{description:"The keys of object"}},run:(e,t)=>{let{object:n}=e,{keys:o}=t;return o.next(Object.keys(n))}},t.ObjectValues={id:"Values",namespace:s,description:"Emits the values of an object",inputs:{object:{description:"Object to get values of"}},outputs:{values:{description:"The values of object"}},run:(e,t)=>{let{object:n}=e,{values:o}=t;return o.next(Object.values(n))}},t.ObjectEntries={id:"Entries",defaultStyle:{icon:"fa-box"},namespace:s,description:"Emits the entries of an object",inputs:{object:{description:"Object to get entries of"}},outputs:{entries:{description:"The entries of object"}},run:(e,t)=>{let{object:n}=e,{entries:o}=t;return o.next(Object.entries(n))}},t.SetAttribute={id:"Set Attribute",searchKeywords:["dot"],namespace:s,defaultStyle:{icon:"fa-box"},description:"Sets an attribute on an object",inputs:{object:{description:"Object to set attribute on"},attribute:{description:"Attribute to set"},value:{description:"Value to set attribute to"}},outputs:{object:{description:"The object with the attribute set"}},run:(e,t)=>{let{object:n,attribute:o,value:i}=e,{object:s}=t;const r=o.split("."),a=r.pop();return r.reduce(((e,t)=>e[t]),n)[a]=i,s.next(n)}},t.DeleteAttribute={id:"Delete Attribute",defaultStyle:{icon:"fa-box"},namespace:s,description:"Deletes an attribute from an object",inputs:{object:{description:"Object to delete attribute from"},attribute:{description:"Attribute to delete"}},outputs:{object:{description:"The object with the attribute deleted"}},run:(e,t)=>{let{object:n,attribute:o}=e,{object:i}=t;const s=o.value.split("."),r=s.pop();delete s.reduce(((e,t)=>e[t]),n.value)[r],i.next(n.value)}}},90717:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetGlobalState=t.SetGlobalState=void 0;const n="State";t.SetGlobalState={id:"Set Global State",namespace:n,description:"Sets a value in the global state",inputs:{key:{description:"Key to set"},value:{description:"Value to set"}},outputs:{setValue:{description:"Value that was set"}},run:(e,t,n)=>{let{key:o,value:i}=e,{setValue:s}=t,{globalState:r}=n;r.set(o,i),s.next(i)}},t.GetGlobalState={id:"Get Global State",namespace:n,description:"Gets a value from the global state",inputs:{key:{description:"Key to get"},defaultValue:{description:"Default value if key is not set",mode:"required-if-connected"}},outputs:{value:{description:"Value of the key"}},run:(e,t,n)=>{let{key:o,defaultValue:i}=e,{value:s}=t,{globalState:r,onError:a}=n;var l;void 0===r.get(o)&&void 0===i?a(new Error(`Key ${o} is not set`)):s.next(null!==(l=r.get(o))&&void 0!==l?l:i)}}},40863:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyString=t.MatchRegex=t.IsEmpty=t.EndsWith=t.StartsWith=t.Includes=t.ToTitleCase=t.ToSnakeCase=t.ToPascalCase=t.ToCamelCase=t.ToKebabCase=t.CharAt=t.LastIndexOf=t.IndexOf=t.Length=t.Substring=t.ToUpperCase=t.ToLowerCase=t.Trim=t.Replace=t.Join=t.Split=t.Concat=void 0;const n="Strings";t.Concat={id:"Concat",defaultStyle:{icon:"fa-font"},namespace:n,description:"Concatenates two strings",inputs:{a:{description:"String a"},b:{description:"String b"}},outputs:{value:{description:"Concatenated value"}},run:(e,t)=>{let{a:n,b:o}=e,{value:i}=t;return i.next(n+o)}},t.Split={id:"Split",defaultStyle:{icon:"fa-font"},namespace:n,description:"Splits a string",inputs:{string:{description:"String to split"},separator:{description:"Separator"}},outputs:{value:{description:"Splitted value"}},run:(e,t)=>{let{string:n,separator:o}=e,{value:i}=t;return i.next(n.split(o))}},t.Join={id:"Join",defaultStyle:{icon:"fa-font"},namespace:n,description:"Joins an array of strings",inputs:{array:{description:"Array to join"},separator:{description:"Separator"}},outputs:{value:{description:"Joined value"}},run:(e,t)=>{let{array:n,separator:o}=e,{value:i}=t;return i.next(n.join(o))}},t.Replace={id:"Replace",defaultStyle:{icon:"fa-font"},namespace:n,description:"Replaces a string",inputs:{string:{description:"String to replace"},searchValue:{description:"Value to search for"},replaceValue:{description:"Value to replace with"}},outputs:{value:{description:"Replaced value"}},run:(e,t)=>{let{string:n,searchValue:o,replaceValue:i}=e,{value:s}=t;return s.next(n.replace(o,i))}},t.Trim={id:"Trim",defaultStyle:{icon:"fa-font"},namespace:n,description:"Trims a string",inputs:{string:{description:"String to trim"}},outputs:{value:{description:"Trimmed value"}},run:(e,t)=>{let{string:n}=e,{value:o}=t;return o.next(n.trim())}},t.ToLowerCase={id:"To Lower Case",defaultStyle:{icon:"fa-font"},namespace:n,description:"Converts a string to lower case",inputs:{string:{description:"String to convert to lower case"}},outputs:{value:{description:"Converted value"}},run:(e,t)=>{let{string:n}=e,{value:o}=t;return o.next(n.toLowerCase())}},t.ToUpperCase={id:"To Upper Case",defaultStyle:{icon:"fa-font"},namespace:n,description:"Converts a string to upper case",inputs:{string:{description:"String to convert to upper case"}},outputs:{value:{description:"Converted value"}},run:(e,t)=>{let{string:n}=e,{value:o}=t;return o.next(n.toUpperCase())}},t.Substring={id:"Substring",defaultStyle:{icon:"fa-font"},namespace:n,description:"Returns the node of the string between the start and end indexes",inputs:{string:{description:"String to get substring from"},start:{description:"Start index"},end:{description:"End index"}},outputs:{value:{description:"Substring"}},run:(e,t)=>{let{string:n,start:o,end:i}=e,{value:s}=t;return s.next(n.substring(o,i))}},t.Length={id:"Length",defaultStyle:{icon:"fa-font"},namespace:n,description:"Returns the length of a string",inputs:{string:{description:"String to get length from"}},outputs:{value:{description:"Length"}},run:(e,t)=>{let{string:n}=e,{value:o}=t;return o.next(n.length)}},t.IndexOf={id:"Index Of",defaultStyle:{icon:"fa-font"},namespace:n,description:"Returns the index within the calling String object of the first occurrence of the specified value, starting the search at fromIndex",inputs:{string:{description:"String to search in"},searchValue:{description:"Value to search for"},fromIndex:{description:"Index to start searching from"}},outputs:{value:{description:"Index"}},run:(e,t)=>{let{string:n,searchValue:o,fromIndex:i}=e,{value:s}=t;return s.next(n.indexOf(o,i))}},t.LastIndexOf={id:"Last Index Of",defaultStyle:{icon:"fa-font"},namespace:n,description:"Returns the index within the calling String object of the last occurrence of the specified value, or -1 if not found. The calling string is searched backward, starting at fromIndex",inputs:{string:{description:"String to search in"},searchValue:{description:"Value to search for"},fromIndex:{description:"Index to start searching from"}},outputs:{value:{description:"Index"}},run:(e,t)=>{let{string:n,searchValue:o,fromIndex:i}=e,{value:s}=t;return s.next(n.lastIndexOf(o,i))}},t.CharAt={id:"Char At",defaultStyle:{icon:"fa-font"},namespace:n,description:"Returns the character at the specified index",inputs:{string:{description:"String to get character from"},index:{description:"Index to get character from"}},outputs:{value:{description:"Character"}},run:(e,t)=>{let{string:n,index:o}=e,{value:i}=t;return i.next(n.charAt(o))}},t.ToKebabCase={id:"To Kebab Case",defaultStyle:{icon:"fa-font"},namespace:n,description:"Converts a string to kebab case",inputs:{string:{description:"String to convert to kebab case"}},outputs:{value:{description:"Converted value"}},run:(e,t)=>{let{string:n}=e,{value:o}=t;return o.next(n.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\s+/g,"-").toLowerCase())}},t.ToCamelCase={id:"To Camel Case",defaultStyle:{icon:"fa-font"},namespace:n,description:"Converts a string to camel case",inputs:{string:{description:"String to convert to camel case"}},outputs:{value:{description:"Converted value"}},run:(e,t)=>{let{string:n}=e,{value:o}=t;return o.next(n.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,((e,t)=>0==+e?"":0===t?e.toLowerCase():e.toUpperCase())))}},t.ToPascalCase={id:"To Pascal Case",defaultStyle:{icon:"fa-font"},namespace:n,description:"Converts a string to pascal case",inputs:{string:{description:"String to convert to pascal case"}},outputs:{value:{description:"Converted value"}},run:(e,t)=>{let{string:n}=e,{value:o}=t;return o.next(n.replace(/(?:^\w|[A-Z]|\b\w)/g,((e,t)=>0===t?e.toUpperCase():e.toLowerCase())).replace(/\s+/g,""))}},t.ToSnakeCase={id:"To Snake Case",defaultStyle:{icon:"fa-font"},namespace:n,description:"Converts a string to snake case",inputs:{string:{description:"String to convert to snake case"}},outputs:{value:{description:"Converted value"}},run:e=>e.replace(/([a-z])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toLowerCase()},t.ToTitleCase={id:"To Title Case",defaultStyle:{icon:"fa-font"},namespace:n,description:"Converts a string to title case",inputs:{string:{description:"String to convert to title case"}},outputs:{value:{description:"Converted value"}},run:(e,t)=>{let{string:n}=e,{value:o}=t;return o.next(n.replace(/\w\S*/g,(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase())))}},t.Includes={id:"Includes",namespace:n,defaultStyle:{icon:"fa-font"},description:"Determines whether one string may be found within another string, returning true or false as appropriate",inputs:{string:{description:"String to search in"},searchValue:{description:"Value to search for"},fromIndex:{description:"Index to start searching from"}},outputs:{value:{description:"Result"}},run:(e,t)=>{let{string:n,searchValue:o,fromIndex:i}=e,{value:s}=t;return s.next(n.includes(o,i))}},t.StartsWith={id:"Starts With",namespace:n,defaultStyle:{icon:"fa-font"},description:"Determines whether a string begins with the characters of another string, returning true or false as appropriate",inputs:{string:{description:"String to search in"},searchValue:{description:"Value to search for"},fromIndex:{description:"Index to start searching from"}},outputs:{value:{description:"Result"}},run:(e,t)=>{let{string:n,searchValue:o,fromIndex:i}=e,{value:s}=t;return s.next(n.startsWith(o,i))}},t.EndsWith={id:"Ends With",namespace:n,defaultStyle:{icon:"fa-font"},description:"Determines whether a string ends with the characters of another string, returning true or false as appropriate",inputs:{string:{description:"String to search in"},searchValue:{description:"Value to search for"},fromIndex:{description:"Index to start searching from"}},outputs:{value:{description:"Result"}},run:(e,t,n)=>e.endsWith(t,n)},t.IsEmpty={id:"Is Empty",namespace:n,defaultStyle:{icon:"fa-font"},description:"Determines whether a string is empty",inputs:{string:{description:"String to check"}},outputs:{value:{description:"Result"}},run:(e,t)=>{let{string:n}=e,{value:o}=t;return o.next(0===n.length)}},t.MatchRegex={id:"Match Regex",namespace:n,defaultStyle:{icon:"fa-font"},description:"Determines whether a string matches a regular expression",inputs:{string:{description:"String to check"},regex:{description:"Regular expression to match"}},outputs:{value:{description:"Result"}},run:(e,t)=>{let{string:n,regex:o}=e,{value:i}=t;return i.next(n.match(o))}},t.EmptyString={id:"Empty String",namespace:n,defaultStyle:{icon:"fa-font",size:"small"},description:"Creates an empty string",inputs:{},outputs:{string:{description:"The empty string"}},run:(e,t)=>{let{}=e,{string:n}=t;return n.next("")}}},86079:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Delay=void 0;const o=n(29967);t.Delay={id:"Delay",displayName:"Delay",namespace:"Timing",defaultData:{delayMs:{mode:"static",value:420}},description:"Delays a value by a given amount of time. Supports both static and dynamic delays.",definitionBuilder:e=>{let{delayMs:t}=e;const n={value:{description:"Value to delay"}};"dynamic"===t.mode&&(n.delay={description:"Delay in milliseconds"});return{inputs:n,displayName:"dynamic"===t.mode?"Delay":`Delay ${(0,o.timeToString)(t.value)}`,description:`Delays a value by ${"static"===t.mode?(0,o.timeToString)(t.value):"a dynamic amount of time"}.`,outputs:{delayedValue:{description:"Delayed value"}},completionOutputs:["delayedValue"]}},runFnBuilder:e=>{let{delayMs:t}=e;return async(e,n)=>{let{value:o,delay:i}=e;const s="dynamic"===t.mode?i:t.value;await new Promise((e=>setTimeout(e,s))),n.delayedValue.next(o)}},editorConfig:{type:"structured",fields:[{type:{value:"number"},configKey:"delayMs",label:"Delay (ms)",defaultValue:420,allowDynamic:!0}]}}},98691:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Interval=void 0;const o=n(29967);t.Interval={id:"Interval",displayName:"Interval",namespace:o.TIMING_NAMESPACE,defaultData:{time:{mode:"static",value:1e3},value:{mode:"static",value:""}},description:"Emits a value every interval. Supports both static and dynamic intervals.",definitionBuilder:e=>{const t={};"dynamic"===e.value.mode&&(t.value={description:"Value to emit"}),"dynamic"===e.time.mode&&(t.interval={description:"Interval in milliseconds"});return{inputs:t,displayName:(()=>{const t="dynamic"===e.value.mode?"a value":JSON.stringify(e.value.value);return"static"===e.time.mode?`Emit ${t} each ${(0,o.timeToString)(e.time.value)}`:"Interval"})(),outputs:{value:{description:"Emitted value"}},reactiveInputs:"dynamic"===e.time.mode?["value","interval"]:["value"],completionOutputs:[],description:"Emits a value every interval."}},runFnBuilder:e=>(t,n,o)=>{let{value:i,interval:s}=t;const r="dynamic"===e.time.mode?s:e.time.value,a="dynamic"===e.value.mode?i:e.value.value,l=o.state.get("timer");l&&clearInterval(l);const u=setInterval((()=>{n.value.next(a)}),r);o.state.set("timer",u),o.onCleanup((()=>{clearInterval(u)}))},editorConfig:{type:"structured",fields:[{type:{value:"number"},configKey:"time",label:"Interval",defaultValue:1e3,allowDynamic:!0},{type:{value:"json",label:"Any JSON value:"},configKey:"value",label:"Value",defaultValue:"",allowDynamic:!0}]}}},40232:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Throttle=t.ThrottleError=t.Debounce=t.Interval=t.Delay=void 0;const o=n(29967);var i=n(86079);Object.defineProperty(t,"Delay",{enumerable:!0,get:function(){return i.Delay}});var s=n(98691);Object.defineProperty(t,"Interval",{enumerable:!0,get:function(){return s.Interval}});const r=o.TIMING_NAMESPACE;t.Debounce={id:"Debounce",displayName:"Debounce",namespace:r,defaultData:{delayMs:{mode:"static",value:420}},description:"Emits the last value received after being idle for a given amount of milliseconds. Supports both static and dynamic delays.",definitionBuilder:e=>{let{delayMs:t}=e;const n={value:{description:"Value to debounce"}};"dynamic"===t.mode&&(n.delay={description:"Delay in milliseconds"});return{inputs:n,displayName:"dynamic"===t.mode?"Debounce":`Debounce ${(0,o.timeToString)(t.value)}`,outputs:{debouncedValue:{description:"Debounced value"}},reactiveInputs:["value"],completionOutputs:["debouncedValue"]}},runFnBuilder:e=>{let{delayMs:t}=e;return(e,n,o)=>{let{value:i,delay:s}=e;const{debouncedValue:r}=n,a=o.state.get("timer");a&&clearTimeout(a);const l=setTimeout((()=>{r.next(i)}),"dynamic"===t.mode?s:t.value);o.state.set("timer",l),o.onCleanup((()=>{clearTimeout(a)}))}},editorConfig:{type:"structured",fields:[{type:{value:"number"},configKey:"delayMs",label:"Delay in milliseconds",defaultValue:420,allowDynamic:!0}]}};class a extends Error{constructor(e){super("Throttle: Value dropped"),this.value=e}}t.ThrottleError=a,t.Throttle={id:"Throttle",displayName:"Throttle",namespace:r,defaultData:{delayMs:{mode:"static",value:420}},description:"Limits the number of times a value is emitted to once per time configured. Supports both static and dynamic intervals.",definitionBuilder:e=>{let{delayMs:t}=e;const n={value:{description:"Value to throttle"}};"dynamic"===t.mode&&(n.limitTime={description:"Interval in milliseconds"});return{inputs:n,displayName:"dynamic"===t.mode?"Throttle":`Throttle ${(0,o.timeToString)(t.value)}`,outputs:{unthrottledValue:{description:"Unthrottled value"}},reactiveInputs:["value"]}},runFnBuilder:e=>{let{delayMs:t}=e;return async(e,n,o)=>{const i="dynamic"===t.mode?e.limitTime:t.value;if(o.state.get("promise"))o.onError(new a(e.value));else{n.unthrottledValue.next(e.value);const t=new Promise((e=>{setTimeout((()=>{e()}),i)}));o.state.set("promise",t),await t,o.state.set("promise",void 0)}}},editorConfig:{type:"structured",fields:[{type:{value:"number"},configKey:"delayMs",label:"Interval (ms)",defaultValue:420,allowDynamic:!0}]}}},29967:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timeToString=t.TIMING_NAMESPACE=void 0,t.TIMING_NAMESPACE="Timing",t.timeToString=function(e){return e<1e3?`${e}ms`:e/1e3+"s"}},29755:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CodeExpression=void 0;const getInlineVariables_1=__webpack_require__(20528);exports.CodeExpression={id:"CodeExpression",displayName:"Code Expression",description:"A static value or JS expression",runFnBuilder:config=>(inputs,outputs,adv)=>{try{const resFn=eval(`(inputs, adv) => (${config.value})`);outputs.value.next(resFn(inputs,adv))}catch(e){adv.onError(e)}},definitionBuilder:e=>{var t;const n=(0,getInlineVariables_1.getVariables)(e.value);return{defaultStyle:{size:"small",icon:"code"},displayName:e.label||void 0,description:`Evaluates the expression \`${e.value}\``,inputs:Object.fromEntries(null!==(t=n.map((e=>[e,{}])))&&void 0!==t?t:[]),outputs:{value:{displayName:"Value",description:"The result of the expression evaluation"}}}},defaultData:{value:"inputs.a + inputs.b",label:'"inputs.a + inputs.b"'},editorConfig:{type:"custom",editorComponentBundlePath:"../../../dist/ui/CodeExpression.js"}}},17737:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlineValue=void 0,t.InlineValue={id:"InlineValue",displayName:"Inline Value",description:"A static value or JS expression",runFnBuilder:e=>(t,n)=>{n.value.next(e.value)},definitionBuilder:e=>({defaultStyle:{size:"small",icon:"pen"},displayName:e.label||void 0,description:`Emits the value \`${JSON.stringify(e.value)}\``,inputs:{},outputs:{value:{displayName:"Value",description:"Emits the value configured"}}}),defaultData:{type:"string",value:"Hello",label:'"Hello"'},editorConfig:{type:"custom",editorComponentBundlePath:"../../../dist/ui/InlineValue.js"}}},20528:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getVariables=void 0;t.getVariables=e=>(e.match(/inputs\.([a-zA-Z]\w*)/g)||[]).map((e=>e.replace(/inputs\./,"")))},86619:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(17737),t),i(n(29755),t)},81381:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(50544),t),i(n(73098),t),i(n(45888),t),i(n(40863),t),i(n(66257),t),i(n(91294),t),i(n(20740),t),i(n(35948),t),i(n(90717),t),i(n(40232),t),i(n(86619),t)},12753:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>G});var o=n(70079),i=n(31918),s=n(65092);const r={"flyde-flow-editor":"flyde-flow-editor_AAD4",_hj_feedback_container:"_hj_feedback_container_Af03"};var a=n(19841),l=n(61888),u=n.n(l),d=n(81381),c=n.n(d),p=n(74089),f=n(74762);const m=200;var v=n(10831),g=n(61997),h=n(77852),y=n(11607);function b(e){return e.instances.flatMap((e=>(0,f.isMacroNodeInstance)(e)?e.macroData:(0,f.isInlineNodeInstance)(e)&&(0,f.isVisualNode)(e.node)?b(e.node):[]))}function I(e,t){const n={};const o=function e(o){const i=o.instances.map((o=>{if((0,f.isMacroNodeInstance)(o)){const e=Object.values(t).find((e=>(0,f.isMacroNode)(e)&&e.id===o.macroId));if(!e)throw new Error(`Could not find macro node ${o.macroId} in embedded stdlib`);const i=(0,y.Z)("",e,o);return n[i.id]={...i,source:{path:""}},{...o,nodeId:i.id}}return(0,f.isInlineNodeInstance)(o)&&(0,f.isVisualNode)(o.node)?{...o,node:e(o.node)}:o}));return{...o,instances:i}}(e);return{newNode:o,newDeps:n}}var _=n(63521);async function x(){return{importables:Object.values(c()).filter(f.isBaseNode).map((e=>({node:{...e,source:{path:"n/a",export:"n/a"}},module:"@flyde/stdlib"}))),errors:[]}}const C=[0,20],j=(()=>{const e=new Map,t=new Map;return{requestHistory:async(n,o,i)=>{const s="input"===i?f.DebuggerEventType.INPUT_CHANGE:f.DebuggerEventType.OUTPUT_CHANGE;if(o){const t=`${n}.${o}.${s}`,i=e.get(t)||{total:0,lastSamples:[]},r=i.lastSamples.slice(0,m);return{...i,lastSamples:r}}{const e=t.get(n)||{total:0,lastSamples:[]},o=e.lastSamples.slice(0,m);return{...e,lastSamples:o}}},addEvents:n=>{n.forEach((n=>{if(n.type===f.DebuggerEventType.ERROR){const e=n;e.type=f.DebuggerEventType.OUTPUT_CHANGE,e.pinId=f.ERROR_PIN_ID}if(n.type===f.DebuggerEventType.INPUT_CHANGE||n.type===f.DebuggerEventType.OUTPUT_CHANGE){const{insId:o,type:i,pinId:s}=n;{const t=`${o}.${s}.${i}`,r=e.get(t)||{total:0,lastSamples:[]};r.lastSamples.unshift(n),r.lastSamples.length>m&&r.lastSamples.splice(m,r.lastSamples.length-m),r.total++,e.set(t,r)}{const i=t.get(o)||{total:0,lastSamples:[]};i.lastSamples.unshift(n),i.lastSamples.length>m&&i.lastSamples.splice(m,i.lastSamples.length-m),i.total++,e.set(o,i)}}}))},clear:()=>{e.clear(),t.clear()}}})(),w=(0,p.createRuntimePlayer)(),E=(0,o.forwardRef)((function(e,t){const{flowProps:i,onCompleted:s}=e,{initialFlow:r}=i,a=(0,h.useDarkMode)(),[l,c]=(0,o.useState)(e.flowProps.dependencies),[m,y]=(0,o.useState)({flow:r,boardData:_.defaultBoardData}),[E,O]=(0,o.useState)(),N=(0,o.useRef)((()=>{})),S=(0,o.useCallback)((async(e,t)=>{const{newDeps:o,newState:i}=await async function(e,t,o,i){const{node:s}=e,r=Object.values(await Promise.resolve().then(n.t.bind(n,81381,23))).find((e=>(0,f.isBaseNode)(e)&&e.id===s.id)),a={...i,[r.id]:{...r,source:{path:"@flyde/stdlib/dist/all-browser",export:r.id}}};let l;const u=(0,v.ZP)(o.flow,(n=>{if(t){const o=(0,p.vAdd)({x:0,y:0},t.pos);if(l=(0,p.createNewNodeInstance)(e.node,0,o,a),n.node.instances.push(l),t.connectTo){const{insId:e,outputId:o}=t.connectTo;n.node.connections.push({from:{insId:e,pinId:o},to:{insId:l.id,pinId:f.TRIGGER_PIN_ID}})}}}));return{newState:(0,v.ZP)(o,(e=>{e.flow=u,t?.selectAfterAdding&&l&&(e.boardData.selected=[l?.id])})),newDeps:a}}(e,t,m,l);return c(o),y(i),(0,p.toastMsg)(`Node ${e.node.id} successfully imported from ${e.module}`),l}),[m,l]),P=(0,o.useMemo)((()=>({resolvedDependencies:l,onImportNode:S,onRequestImportables:x,libraryData:{groups:[]}})),[l]),D=(0,o.useMemo)((()=>({debuggerClient:E,onRequestHistory:function(){return j.requestHistory(...arguments)}})),[E,j]),T=o.useRef(b(m.flow.node));(0,o.useEffect)((()=>{const e=b(m.flow.node);if(!u().isEqual(e,T.current)){T.current=e;const{newDeps:t,newNode:n}=I(m.flow.node,d),o=(0,v.ZP)(m,(e=>{e.flow.node=n}));y(o),c((e=>({...e,...t,main:m.flow.node})))}}),[m.flow.node]);const M=(0,o.useCallback)(((t,n)=>{const o=((e,t)=>{const n=new Set;return{onEvent:o=>{const i={...o,time:Date.now(),executionId:"n/a"};console.info("Got debugger event",o),t.addEvents([i]),e.addEvents([i]),n.forEach((e=>e([i])))},onBatchedEvents:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{n.clear()}}})(w,j);w.start(),O(o);const i=(0,f.keys)(t.outputs)[0],r=(0,f.dynamicOutput)(),a=r.subscribe((t=>{e.onLog(t)}));let l=null;const u=(0,f.execute)({node:t,inputs:{},outputs:{[i]:r},resolvedDeps:{...n,[t.id]:t},_debugger:o,onBubbleError:e=>{console.error(e)},onCompleted:()=>{a.unsubscribe(),s(),l=setTimeout((()=>{y((e=>({...e})))}),3e3)}});N.current=()=>{u(),a.unsubscribe(),w.clear(),j.clear(),o.destroy(),clearTimeout(l)}}),[]);return(0,o.useImperativeHandle)(t,(()=>({runFlow:()=>{N.current(),M(m.flow.node,l)}})),[m,l]),o.createElement(g.Z,null,(()=>o.createElement(p.DependenciesContextProvider,{value:P},o.createElement(p.DebuggerContextProvider,{value:D},o.createElement(p.FlowEditor,{state:m,onChangeEditorState:y,initialPadding:C,onExtractInlineNode:f.noop,disableScrolling:!0,darkMode:a.isDarkMode})))))}));var O=n(28648);const N=O.BV,S="Example.flyde",P=`import {loadFlow} from '@flyde/runtime';\n\nconst executeFlow = loadFlow('${S}');\nconst {result} = executeFlow();\nconst {output} = await result;\nconsole.log(\`Output: \${output}\`);`,D=(0,o.forwardRef)((function(e,t){let{example:n,children:i}=e;const s=n,[r,l]=o.useState([]),[u,c]=o.useState("Example.flyde"),m=(0,o.useMemo)((()=>{const{newDeps:e,newNode:t}=I(s.flow.flow.node,d);return{initialFlow:{...s.flow.flow,node:t},dependencies:{...s.flow.dependencies,...e}}}),[s]),v=o.useRef(null),g=o.useCallback((e=>{l((t=>[...t,`[${(new Date).toLocaleTimeString()}] Output: ${e}`])),v.current&&(v.current.scrollTop=v.current.scrollHeight)}),[l]);return o.createElement("div",{className:"hero-example relative"},o.createElement("div",{className:"hero-example__tabs"},o.createElement("div",{onClick:()=>c(S),className:(0,a.default)("file-tag",u===S&&"selected")},S),o.createElement("div",{className:(0,a.default)("file-tag","index.ts"===u&&"selected"),onClick:()=>c("index.ts")},"index.ts")),u===S?o.createElement("div",{className:"flow-wrapper"},o.createElement("div",{className:"loader-wrapper"},o.createElement(p.Loader,null)),o.createElement(E,{ref:t,flowProps:m,onLog:g,onCompleted:f.noop}),i):null,"index.ts"===u?o.createElement("div",{className:"code-wrapper"},o.createElement(O.dn,{className:"code-example",showLineNumbers:!1,text:P,language:"typescript",theme:N,codeBlock:!0,width:"100%"})):null,o.createElement("div",{className:"terminal-wrapper"},o.createElement("div",{className:"file-tag"},"Terminal"),o.createElement("div",{className:"terminal-emulator",ref:v},r.length?r.map(((e,t)=>o.createElement("div",{key:t},e))):o.createElement("em",null,"Values sent to `output` will appear here once received."))))}));var T=n(49794);function M(){return o.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M21.9937 9.23411C21.9305 9.05119 21.8157 8.89053 21.663 8.77161C21.5104 8.65268 21.3265 8.5806 21.1337 8.56411L15.4437 7.73411L12.8937 2.56411C12.8118 2.39504 12.6839 2.25245 12.5248 2.15268C12.3656 2.05291 12.1815 2 11.9937 2C11.8058 2 11.6218 2.05291 11.4626 2.15268C11.3034 2.25245 11.1756 2.39504 11.0937 2.56411L8.54363 7.72411L2.85363 8.56411C2.66855 8.59041 2.49455 8.66807 2.35138 8.78826C2.2082 8.90846 2.10159 9.06638 2.04363 9.24411C1.99057 9.41778 1.98581 9.60265 2.02986 9.77875C2.0739 9.95495 2.16509 10.1159 2.29363 10.2442L6.42363 14.2442L5.42363 19.9241C5.38325 20.1125 5.39818 20.3086 5.46661 20.4887C5.53504 20.6688 5.65406 20.8254 5.80936 20.9395C5.96465 21.0535 6.1496 21.1203 6.34196 21.1318C6.53431 21.1433 6.72589 21.0989 6.89363 21.0041L11.9937 18.3341L17.0937 21.0041C17.234 21.0832 17.3925 21.1246 17.5537 21.1241C17.7655 21.1248 17.9721 21.0583 18.1437 20.9341C18.2988 20.8229 18.4189 20.6697 18.4898 20.4925C18.5607 20.3153 18.5794 20.1215 18.5437 19.9341L17.5437 14.2542L21.6737 10.2542C21.8181 10.1318 21.9248 9.97105 21.9814 9.79045C22.0381 9.60995 22.0423 9.41698 21.9937 9.23411ZM15.8437 13.2341C15.7279 13.3465 15.6411 13.4853 15.5906 13.6385C15.5401 13.7918 15.5274 13.955 15.5537 14.1142L16.2737 18.3141L12.5137 16.3142C12.3675 16.2419 12.2067 16.2042 12.0437 16.2042C11.8806 16.2042 11.7198 16.2419 11.5737 16.3142L7.81363 18.3141L8.53363 14.1142C8.55987 13.955 8.54719 13.7918 8.4967 13.6385C8.4462 13.4853 8.35937 13.3465 8.24363 13.2341L5.24363 10.2341L9.45363 9.62415C9.61563 9.60155 9.76963 9.53965 9.90213 9.44376C10.0347 9.34787 10.1416 9.22094 10.2137 9.07411L11.9937 5.26411L13.8737 9.08411C13.9457 9.23094 14.0527 9.35787 14.1852 9.45376C14.3177 9.54965 14.4717 9.61155 14.6337 9.63415L18.8437 10.2442L15.8437 13.2341Z",fill:"currentColor"}))}const k=[{preview:"Visual Editor",title:"Reason About Programs in New Ways",image:n(61744).Z,imageCaption:"Visualize data flow and view data passing through nodes",description:o.createElement(o.Fragment,null,o.createElement("p",null,"Unlock new ways to think about, and debug your programs. Have an always-correct diagram of your program."),o.createElement("p",null,"Flyde\u2019s flow-based, visual approach makes asynchronous and concurrent tasks simpler and intuitive.")),id:"visual-editor"},{preview:"Open Source",title:"Open Source and Transparent",description:o.createElement(o.Fragment,null,o.createElement("p",null,"In Flyde, nothing is hidden. From node implementation, to runtime code. Easily access the code behind each node in Flyde\u2019s standard library."),o.createElement("p",null,"Everything needed to run Flyde flows is"," ",o.createElement("strong",null,"open-source and MIT licensed."))),image:n(43033).Z,imageCaption:"Double click on nodes to jump to their implementation",id:"open-source"},{preview:"Seamless Integration",title:"Integrates With Existing Workflows. Doesn\u2019t Replace them.",description:o.createElement(o.Fragment,null,o.createElement("p",null,"Create Flyde flows right from your IDE. Wrap existing TypeScript code in a Flyde node and use it in your flows. Run flows from existing TypeScript code, from arbitrary CLI scripts, to HTTP request handlers, and even front-end code."),o.createElement("p",null,"Flows can be ",o.createElement("strong",null,"version-controlled"),", and be part"," ",o.createElement("strong",null,"CI/CD")," pipelines, just like regular text-based code.")),image:n(39415).Z,imageCaption:"Flyde flows and TypeScript code live side by side",id:"git-friendly"},{preview:"Flexible & Powerful",title:"Flexible and Powerful",description:o.createElement(o.Fragment,null,o.createElement("p",null,"Built on a functional-reactive foundation, Flyde enables more than simple input/output flows. It supports everything you'd expect from a textual-based language; recursions, loops and conditionals.")),image:n(42016).Z,imageCaption:"Fibonacci sequence in Flyde - a recursive flow example",id:"flexible-powerful"}],R={dependencies:{Delay__hvnxp46iusf1g91k6dua576w:{inputs:{value:{description:"Value to delay"}},displayName:"Delay 3s",description:"Delays a value by 3s.",outputs:{delayedValue:{description:"Delayed value"}},completionOutputs:["delayedValue"],namespace:"Timing",id:"Delay__hvnxp46iusf1g91k6dua576w",run:n(86079).Delay.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Timing/Delay/Delay.flyde.js",export:"Delay"}},InlineValue__qi81a3d3zqj4reik3qaogcx9:{defaultStyle:{size:"small",icon:"pen"},displayName:'"Hello, "',description:'Emits the value `"Hello, "`',inputs:{},outputs:{value:{displayName:"Value",description:"Emits the value configured"}},id:"InlineValue__qi81a3d3zqj4reik3qaogcx9",run:n(17737).InlineValue.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Values/InlineValue.flyde.js",export:"InlineValue"}},"InlineValue__ApisCombination-o5049mg":{defaultStyle:{size:"small",icon:"pen"},displayName:'"World!"',description:'Emits the value `"World!"`',inputs:{},outputs:{value:{displayName:"Value",description:"Emits the value configured"}},id:"InlineValue__ApisCombination-o5049mg",run:n(17737).InlineValue.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Values/InlineValue.flyde.js",export:"InlineValue"}},Concat:{id:"Concat",defaultStyle:{icon:"fa-font"},namespace:"Strings",description:"Concatenates two strings",inputs:{a:{description:"String a"},b:{description:"String b"}},outputs:{value:{description:"Concatenated value"}},run:n(40863).Concat.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Strings.flyde.js",export:"Concat"}}},flow:{imports:{"@flyde/stdlib":["Delay","InlineValue","Concat"]},node:{instances:[{pos:{x:-767.3728061742281,y:-235.39913479443982},id:"hvnxp46iusf1g91k6dua576w",inputConfig:{},nodeId:"Delay__hvnxp46iusf1g91k6dua576w",macroId:"Delay",macroData:{delayMs:{value:3e3,mode:"static"}},style:{size:"small",icon:"fa-clock",color:"#00bbf9"}},{pos:{x:-932.9179490061604,y:-377.8384234600417},id:"qi81a3d3zqj4reik3qaogcx9",inputConfig:{},nodeId:"InlineValue__qi81a3d3zqj4reik3qaogcx9",macroId:"InlineValue",macroData:{type:"string",value:"Hello, ",label:'"Hello, "'},style:{size:"regular",icon:"pen"}},{pos:{x:-774.713994140625,y:-323.10492919921876},id:"ApisCombination-o5049mg",inputConfig:{},nodeId:"InlineValue__ApisCombination-o5049mg",macroId:"InlineValue",macroData:{type:"string",value:"World!",label:'"World!"'},style:{size:"regular",icon:"pen"}},{pos:{x:-801.4964892578125,y:-145.65748583692886},id:"Concat-7y049by",inputConfig:{},nodeId:"Concat",style:{size:"small",icon:"fa-font"}}],connections:[{from:{insId:"ApisCombination-o5049mg",pinId:"value"},to:{insId:"hvnxp46iusf1g91k6dua576w",pinId:"value"}},{from:{insId:"hvnxp46iusf1g91k6dua576w",pinId:"delayedValue"},to:{insId:"Concat-7y049by",pinId:"b"}},{from:{insId:"qi81a3d3zqj4reik3qaogcx9",pinId:"value"},to:{insId:"Concat-7y049by",pinId:"a"}},{from:{insId:"Concat-7y049by",pinId:"value"},to:{insId:"__this",pinId:"output"}}],id:"HelloWorld",inputs:{},outputs:{output:{type:"any",optional:!1,delayed:!1}},inputsPosition:{city:{x:-187.27285824815934,y:-14.13215209416181},Bob:{x:-464.39225613814307,y:-267.86263932413937}},outputsPosition:{json:{x:-441.98276309426666,y:480.38719404276554},na:{x:-441.98276309426666,y:480.38719404276554},result:{x:-499.82438378976735,y:706.7650396699393},output:{x:-786.8222824042145,y:-47.993242521151444},response:{x:-506.3386688159596,y:488.67302443385125},"Bob 42":{x:-736.217912287027,y:209.40813992513762}},completionOutputs:["output"]}}},A={dependencies:{Throttle__wj31gd73i5l111q999pv4kor:{inputs:{value:{description:"Value to throttle"}},displayName:"Throttle 8s",outputs:{unthrottledValue:{description:"Unthrottled value"}},reactiveInputs:["value"],namespace:"Timing",id:"Throttle__wj31gd73i5l111q999pv4kor",run:n(40232).Throttle.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Timing/Timing.flyde.js",export:"Throttle"}},Debounce__eaa2b80mmdusjvxi3fve0du1:{inputs:{value:{description:"Value to debounce"}},displayName:"Debounce 8s",outputs:{debouncedValue:{description:"Debounced value"}},reactiveInputs:["value"],completionOutputs:["debouncedValue"],namespace:"Timing",id:"Debounce__eaa2b80mmdusjvxi3fve0du1",run:n(40232).Debounce.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Timing/Timing.flyde.js",export:"Debounce"}},InlineValue__scs3pycv9lz28ykunbkqn9to:{defaultStyle:{size:"small",icon:"pen"},displayName:'"\u274c"',description:'Emits the value `"\u274c"`',inputs:{},outputs:{value:{displayName:"Value",description:"Emits the value configured"}},id:"InlineValue__scs3pycv9lz28ykunbkqn9to",run:n(17737).InlineValue.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Values/InlineValue.flyde.js",export:"InlineValue"}},"InlineValue__ApisCombination-3k049q4":{defaultStyle:{size:"small",icon:"pen"},displayName:'"\ud83d\udd50"',description:'Emits the value `"\ud83d\udd50"`',inputs:{},outputs:{value:{displayName:"Value",description:"Emits the value configured"}},id:"InlineValue__ApisCombination-3k049q4",run:n(17737).InlineValue.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Values/InlineValue.flyde.js",export:"InlineValue"}},Interval__ygnqzwi1stiki29lavj6wu2w:{inputs:{},displayName:'Emit "\u2b50\ufe0f" each 6s',outputs:{value:{description:"Emitted value"}},reactiveInputs:["value"],completionOutputs:[],description:"Emits a value every interval.",namespace:"Timing",id:"Interval__ygnqzwi1stiki29lavj6wu2w",run:n(98691).Interval.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Timing/Interval/Interval.flyde.js",export:"Interval"}},Collect__lfrwwz35676vn1hb9ykzpewd:{displayName:"Collect 3 values",description:"Collect 3 values and emit a list of them.",inputs:{value:{description:"Value to collect"}},reactiveInputs:["value"],outputs:{list:{description:"Collected values"}},completionOutputs:["list"],namespace:"Lists",id:"Collect__lfrwwz35676vn1hb9ykzpewd",run:n(62737).Collect.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Lists/Collect/Collect.flyde.js",export:"Collect"}},"InlineValue__DebounceThrottle-xy049dv":{defaultStyle:{size:"small",icon:"pen"},displayName:'"\u2705"',description:'Emits the value `"\u2705"`',inputs:{},outputs:{value:{displayName:"Value",description:"Emits the value configured"}},id:"InlineValue__DebounceThrottle-xy049dv",run:n(17737).InlineValue.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Values/InlineValue.flyde.js",export:"InlineValue"}}},flow:{imports:{"@flyde/stdlib":["Throttle","Debounce","InlineValue","Interval","Collect"]},node:{instances:[{pos:{x:-849.9802075195312,y:-293.42520723759816},id:"wj31gd73i5l111q999pv4kor",inputConfig:{},visibleOutputs:["unthrottledValue","__error"],nodeId:"Throttle__wj31gd73i5l111q999pv4kor",macroId:"Throttle",macroData:{delayMs:{value:8e3,mode:"static"}}},{pos:{x:-1038.8195629882812,y:-292.4507504504888},id:"eaa2b80mmdusjvxi3fve0du1",inputConfig:{},nodeId:"Debounce__eaa2b80mmdusjvxi3fve0du1",macroId:"Debounce",macroData:{delayMs:{value:8e3,mode:"static"}}},{pos:{x:-776.2780029296875,y:-173.65079674768984},id:"scs3pycv9lz28ykunbkqn9to",inputConfig:{},nodeId:"InlineValue__scs3pycv9lz28ykunbkqn9to",macroId:"InlineValue",macroData:{type:"string",value:"\u274c",label:'"\u274c"'}},{pos:{x:-1028.1461474609375,y:-173.36171508789062},id:"ApisCombination-3k049q4",inputConfig:{},nodeId:"InlineValue__ApisCombination-3k049q4",macroId:"InlineValue",macroData:{type:"string",value:"\ud83d\udd50",label:'"\ud83d\udd50"'}},{pos:{x:-965.5435205078124,y:-376.7129255999589},id:"ygnqzwi1stiki29lavj6wu2w",inputConfig:{},nodeId:"Interval__ygnqzwi1stiki29lavj6wu2w",macroId:"Interval",macroData:{time:{value:6e3,mode:"static"},value:{value:"\u2b50\ufe0f",mode:"static"}}},{pos:{x:-928.755859375,y:-90.7339411755601},id:"lfrwwz35676vn1hb9ykzpewd",inputConfig:{},nodeId:"Collect__lfrwwz35676vn1hb9ykzpewd",macroId:"Collect",macroData:{strategy:"count",count:{mode:"static",value:3}},style:{size:"small"}},{pos:{x:-894.184619140625,y:-174.2404573922211},id:"DebounceThrottle-xy049dv",inputConfig:{},nodeId:"InlineValue__DebounceThrottle-xy049dv",macroId:"InlineValue",macroData:{type:"string",value:"\u2705",label:'"\u2705"'}}],connections:[{from:{insId:"wj31gd73i5l111q999pv4kor",pinId:"__error"},to:{insId:"scs3pycv9lz28ykunbkqn9to",pinId:"__trigger"}},{from:{insId:"eaa2b80mmdusjvxi3fve0du1",pinId:"debouncedValue"},to:{insId:"ApisCombination-3k049q4",pinId:"__trigger"}},{from:{insId:"ygnqzwi1stiki29lavj6wu2w",pinId:"value"},to:{insId:"eaa2b80mmdusjvxi3fve0du1",pinId:"value"}},{from:{insId:"ygnqzwi1stiki29lavj6wu2w",pinId:"value"},to:{insId:"wj31gd73i5l111q999pv4kor",pinId:"value"}},{from:{insId:"ApisCombination-3k049q4",pinId:"value"},to:{insId:"lfrwwz35676vn1hb9ykzpewd",pinId:"value"}},{from:{insId:"scs3pycv9lz28ykunbkqn9to",pinId:"value"},to:{insId:"lfrwwz35676vn1hb9ykzpewd",pinId:"value"}},{from:{insId:"lfrwwz35676vn1hb9ykzpewd",pinId:"list"},to:{insId:"__this",pinId:"output"}},{from:{insId:"wj31gd73i5l111q999pv4kor",pinId:"unthrottledValue"},to:{insId:"DebounceThrottle-xy049dv",pinId:"__trigger"}},{from:{insId:"DebounceThrottle-xy049dv",pinId:"value"},to:{insId:"lfrwwz35676vn1hb9ykzpewd",pinId:"value"}}],id:"DebounceThrottle",inputs:{},outputs:{output:{type:"any",optional:!1,delayed:!1}},inputsPosition:{city:{x:-187.27285824815934,y:-14.13215209416181},Bob:{x:-464.39225613814307,y:-267.86263932413937}},outputsPosition:{json:{x:-441.98276309426666,y:480.38719404276554},na:{x:-441.98276309426666,y:480.38719404276554},result:{x:-499.82438378976735,y:706.7650396699393},output:{x:-892.9243331854645,y:9.226056795254806},response:{x:-506.3386688159596,y:488.67302443385125},"Bob 42":{x:-736.217912287027,y:209.40813992513762}},completionOutputs:["output"]}}},V={dependencies:{"Http__GET Request-907":{displayName:"HTTP GET Request",description:"Performs a  GET HTTP request to a URL and emits the response data",inputs:{},outputs:{data:{displayName:"Data",description:"Emits the response data"}},namespace:"HTTP",id:"Http__GET Request-907",run:n(50544).Http.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Http/Http.flyde.js",export:"Http"}},"Http__POST Request-624":{displayName:"HTTP POST Request",description:"Performs a  POST HTTP request to a URL and emits the response data",inputs:{data:{}},outputs:{data:{displayName:"Data",description:"Emits the response data"}},namespace:"HTTP",id:"Http__POST Request-624",run:n(50544).Http.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Http/Http.flyde.js",export:"Http"}},CodeExpression__voq2pt830zt74hnzlgjo3oea:{defaultStyle:{size:"small",icon:"code"},displayName:"{iso2: inputs.data.country}",description:"Evaluates the expression `{iso2: inputs.data.country}`",inputs:{data:{}},outputs:{value:{displayName:"Value",description:"The result of the expression evaluation"}},id:"CodeExpression__voq2pt830zt74hnzlgjo3oea",run:n(29755).CodeExpression.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Values/CodeExpression.flyde.js",export:"CodeExpression"}},CodeExpression__sznjntqrup6mwx9hr26d58tl:{defaultStyle:{size:"small",icon:"code"},displayName:"`Looks like you're from ${inputs.country} (capital - ${inputs.capital})`",description:"Evaluates the expression ``Looks like you're from ${inputs.country} (capital - ${inputs.capital})``",inputs:{country:{},capital:{}},outputs:{value:{displayName:"Value",description:"The result of the expression evaluation"}},id:"CodeExpression__sznjntqrup6mwx9hr26d58tl",run:n(29755).CodeExpression.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Values/CodeExpression.flyde.js",export:"CodeExpression"}},InlineValue__xlmmcvlcdpgpix33mv40yzpr:{defaultStyle:{size:"small",icon:"pen"},displayName:'"data.capital"',description:'Emits the value `"data.capital"`',inputs:{},outputs:{value:{displayName:"Value",description:"Emits the value configured"}},id:"InlineValue__xlmmcvlcdpgpix33mv40yzpr",run:n(17737).InlineValue.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Values/InlineValue.flyde.js",export:"InlineValue"}},"Get Attribute":{id:"Get Attribute",searchKeywords:["pick","dot"],namespace:"Objects",defaultStyle:{icon:"fa-magnifying-glass"},description:"Gets an attribute from an object",inputs:{object:{description:"Object to get attribute from"},attribute:{description:"Attribute to get"}},outputs:{value:{description:"The value of the attribute"}},run:n(73098).GetAttributeOld.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Objects/Objects.flyde.js",export:"GetAttributeOld"}},"InlineValue__ApisCombination-4t249pe":{defaultStyle:{size:"small",icon:"pen"},displayName:'"data.name"',description:'Emits the value `"data.name"`',inputs:{},outputs:{value:{displayName:"Value",description:"Emits the value configured"}},id:"InlineValue__ApisCombination-4t249pe",run:n(17737).InlineValue.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Values/InlineValue.flyde.js",export:"InlineValue"}}},flow:{imports:{"@flyde/stdlib":["Http","CodeExpression","InlineValue","Get Attribute"]},node:{instances:[{pos:{x:-690.2786303710938,y:-248.69117978096006},id:"GET Request-907",inputConfig:{url:{mode:"queue"}},visibleInputs:["__trigger"],visibleOutputs:["data"],nodeId:"Http__GET Request-907",macroId:"Http",macroData:{method:{mode:"static",value:"GET"},url:{mode:"static",value:"https://api.country.is/"},headers:{mode:"static",value:{}},params:{mode:"static",value:{}},data:{mode:"static",value:{}}},style:{size:"regular",icon:"fa-server"}},{pos:{x:-697.3497143554688,y:-90.45541381835938},id:"POST Request-624",inputConfig:{url:{mode:"queue"}},visibleInputs:["data"],nodeId:"Http__POST Request-624",macroId:"Http",macroData:{method:{mode:"static",value:"POST"},data:{mode:"dynamic"},url:{mode:"static",value:"https://countriesnow.space/api/v0.1/countries/capital"},headers:{mode:"static",value:{}},params:{mode:"static",value:{}}},style:{size:"regular",icon:"fa-server"}},{pos:{x:-695.5708027080859,y:-170.2948511791778},id:"voq2pt830zt74hnzlgjo3oea",inputConfig:{},nodeId:"CodeExpression__voq2pt830zt74hnzlgjo3oea",macroId:"CodeExpression",macroData:{value:"{iso2: inputs.data.country}",label:"{iso2: inputs.data.country}"}},{pos:{x:-709.6355848184611,y:.16476344798634557},id:"Formatted Response-xn049cy",inputConfig:{},node:{instances:[{pos:{x:-753.2273578838674,y:170.2144483565396},id:"sznjntqrup6mwx9hr26d58tl",inputConfig:{},nodeId:"CodeExpression__sznjntqrup6mwx9hr26d58tl",macroId:"CodeExpression",macroData:{value:"`Looks like you're from ${inputs.country} (capital - ${inputs.capital})`",label:"`Looks like you're from ${inputs.country} (capital - ${inputs.capital})`"}},{pos:{x:-382.62579538386717,y:-65.13273570717877},id:"xlmmcvlcdpgpix33mv40yzpr",inputConfig:{},nodeId:"InlineValue__xlmmcvlcdpgpix33mv40yzpr",macroId:"InlineValue",macroData:{type:"string",value:"data.capital",label:'"data.capital"'}},{pos:{x:-801.60179056088,y:25.242486114137805},id:"Get Attribute-4p049fr",inputConfig:{attribute:{mode:"sticky"}},visibleInputs:["attribute","object"],nodeId:"Get Attribute"},{pos:{x:-460.770003451505,y:18.543191070192492},id:"ApisCombination-06149he",inputConfig:{attribute:{mode:"sticky"}},nodeId:"Get Attribute"},{pos:{x:-836.6549243164063,y:-82.7263525390625},id:"ApisCombination-4t249pe",inputConfig:{},nodeId:"InlineValue__ApisCombination-4t249pe",macroId:"InlineValue",macroData:{type:"string",value:"data.name",label:'"data.name"'}}],connections:[{from:{insId:"xlmmcvlcdpgpix33mv40yzpr",pinId:"value"},to:{insId:"ApisCombination-06149he",pinId:"attribute"}},{from:{insId:"Get Attribute-4p049fr",pinId:"value"},to:{insId:"sznjntqrup6mwx9hr26d58tl",pinId:"country"}},{from:{insId:"ApisCombination-4t249pe",pinId:"value"},to:{insId:"Get Attribute-4p049fr",pinId:"attribute"}},{from:{insId:"ApisCombination-06149he",pinId:"value"},to:{insId:"sznjntqrup6mwx9hr26d58tl",pinId:"capital"}},{from:{insId:"__this",pinId:"object"},to:{insId:"Get Attribute-4p049fr",pinId:"object"}},{from:{insId:"__this",pinId:"object"},to:{insId:"ApisCombination-06149he",pinId:"object"}},{from:{insId:"sznjntqrup6mwx9hr26d58tl",pinId:"value"},to:{insId:"__this",pinId:"value"}}],id:"Formatted Response",inputs:{object:{mode:"required"}},outputs:{value:{delayed:!1}},inputsPosition:{object:{x:-554.16943359375,y:-185.74574279785156}},outputsPosition:{value:{x:-593.2343139648438,y:319.9629592895508}},completionOutputs:["value"],defaultStyle:{size:"large",color:"#fee440"}},style:{size:"large",color:"#fee440"}}],connections:[{from:{insId:"GET Request-907",pinId:"data"},to:{insId:"voq2pt830zt74hnzlgjo3oea",pinId:"data"}},{from:{insId:"voq2pt830zt74hnzlgjo3oea",pinId:"value"},to:{insId:"POST Request-624",pinId:"data"}},{from:{insId:"POST Request-624",pinId:"data"},to:{insId:"Formatted Response-xn049cy",pinId:"object"}},{from:{insId:"Formatted Response-xn049cy",pinId:"value"},to:{insId:"__this",pinId:"output"}}],id:"ApisCombination",inputs:{},outputs:{output:{type:"any",optional:!1,delayed:!1}},inputsPosition:{city:{x:-187.27285824815934,y:-14.13215209416181}},outputsPosition:{json:{x:-441.98276309426666,y:480.38719404276554},na:{x:-441.98276309426666,y:480.38719404276554},result:{x:-499.82438378976735,y:706.7650396699393},output:{x:-615.1635815348842,y:129.75032212709732},response:{x:-500.61566893722795,y:421.9045791861946}},completionOutputs:["output"]}}},z=[{label:"Hello World",flow:R,tip:'Try double clicking on the "World" node to change the string.',playgroundUrl:"https://play.flyde.dev/apps/974a3913-1b3b-4a0a-9ca7-4e2a69d0fddb"},{label:"Beep Boop",flow:{dependencies:{RoundRobin__oeum6dqgsprbuef0p9s3b1ye:{displayName:"Round Robin 3",description:"Item will be emitted to one of the 3 outputs in a round robin fashion",inputs:{value:{mode:"required",description:"The value to emit"}},completionOutputs:[],reactiveInputs:["value"],outputs:{r1:{description:'The 1 output in order to emit the value received. After emitting a value, it moves to "r2"\'s turn.'},r2:{description:'The 2 output in order to emit the value received. After emitting a value, it moves to "r0"\'s turn.'},r3:{description:'The 3 output in order to emit the value received. After emitting a value, it moves to "r1"\'s turn.'}},namespace:"Control Flow",id:"RoundRobin__oeum6dqgsprbuef0p9s3b1ye",run:n(66257).RoundRobin.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/ControlFlow/ControlFlow.flyde.js",export:"RoundRobin"}},InlineValue__rh3ug7oqoze1rvn4k17kc556:{defaultStyle:{size:"small",icon:"pen"},displayName:'"beep"',description:'Emits the value `"beep"`',inputs:{},outputs:{value:{displayName:"Value",description:"Emits the value configured"}},id:"InlineValue__rh3ug7oqoze1rvn4k17kc556",run:n(17737).InlineValue.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Values/InlineValue.flyde.js",export:"InlineValue"}},"InlineValue__ApisCombination-69049ap":{defaultStyle:{size:"small",icon:"pen"},displayName:'"boop"',description:'Emits the value `"boop"`',inputs:{},outputs:{value:{displayName:"Value",description:"Emits the value configured"}},id:"InlineValue__ApisCombination-69049ap",run:n(17737).InlineValue.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Values/InlineValue.flyde.js",export:"InlineValue"}},"InlineValue__ApisCombination-ts149e2":{defaultStyle:{size:"small",icon:"pen"},displayName:'"bop"',description:'Emits the value `"bop"`',inputs:{},outputs:{value:{displayName:"Value",description:"Emits the value configured"}},id:"InlineValue__ApisCombination-ts149e2",run:n(17737).InlineValue.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Values/InlineValue.flyde.js",export:"InlineValue"}},Collect__lqx9nk7f5fr4evl7dpoh6mff:{displayName:"Collect 3 values",description:"Collect 3 values and emit a list of them.",inputs:{value:{description:"Value to collect"}},reactiveInputs:["value"],outputs:{list:{description:"Collected values"}},completionOutputs:["list"],namespace:"Lists",id:"Collect__lqx9nk7f5fr4evl7dpoh6mff",run:n(62737).Collect.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Lists/Collect/Collect.flyde.js",export:"Collect"}},Interval__bczfob5ymeh27ufao57egapl:{inputs:{},displayName:'Emit "\ud83e\udd16" each 3s',outputs:{value:{description:"Emitted value"}},reactiveInputs:["value"],completionOutputs:[],description:"Emits a value every interval.",namespace:"Timing",id:"Interval__bczfob5ymeh27ufao57egapl",run:n(98691).Interval.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Timing/Interval/Interval.flyde.js",export:"Interval"}}},flow:{imports:{"@flyde/stdlib":["Interval","RoundRobin","InlineValue","Collect"]},node:{instances:[{pos:{x:-639.1495586635534,y:-356.7075307794414},id:"oeum6dqgsprbuef0p9s3b1ye",inputConfig:{},nodeId:"RoundRobin__oeum6dqgsprbuef0p9s3b1ye",macroId:"RoundRobin",macroData:{count:3}},{pos:{x:-715.5202523019706,y:-257.26144321093545},id:"rh3ug7oqoze1rvn4k17kc556",inputConfig:{},nodeId:"InlineValue__rh3ug7oqoze1rvn4k17kc556",macroId:"InlineValue",macroData:{type:"string",value:"beep",label:'"beep"'}},{pos:{x:-602.4942700195312,y:-257.6317993164063},id:"ApisCombination-69049ap",inputConfig:{},nodeId:"InlineValue__ApisCombination-69049ap",macroId:"InlineValue",macroData:{type:"string",value:"boop",label:'"boop"'}},{pos:{x:-490.38597900390624,y:-258.06144042968754},id:"ApisCombination-ts149e2",inputConfig:{},nodeId:"InlineValue__ApisCombination-ts149e2",macroId:"InlineValue",macroData:{type:"string",value:"bop",label:'"bop"'}},{pos:{x:-644.9241528320313,y:-168.45148509621887},id:"lqx9nk7f5fr4evl7dpoh6mff",inputConfig:{},nodeId:"Collect__lqx9nk7f5fr4evl7dpoh6mff",macroId:"Collect",macroData:{strategy:"count",count:{mode:"static",value:3}}},{pos:{x:-630.6297778320313,y:-425.5123219069296},id:"bczfob5ymeh27ufao57egapl",inputConfig:{},nodeId:"Interval__bczfob5ymeh27ufao57egapl",macroId:"Interval",macroData:{time:{value:3e3,mode:"static"},value:{value:"\ud83e\udd16",mode:"static"}},style:{size:"small"}}],connections:[{from:{insId:"rh3ug7oqoze1rvn4k17kc556",pinId:"value"},to:{insId:"lqx9nk7f5fr4evl7dpoh6mff",pinId:"value"}},{from:{insId:"ApisCombination-69049ap",pinId:"value"},to:{insId:"lqx9nk7f5fr4evl7dpoh6mff",pinId:"value"}},{from:{insId:"ApisCombination-ts149e2",pinId:"value"},to:{insId:"lqx9nk7f5fr4evl7dpoh6mff",pinId:"value"}},{from:{insId:"bczfob5ymeh27ufao57egapl",pinId:"value"},to:{insId:"oeum6dqgsprbuef0p9s3b1ye",pinId:"value"}},{from:{insId:"lqx9nk7f5fr4evl7dpoh6mff",pinId:"list"},to:{insId:"__this",pinId:"output"}},{from:{insId:"oeum6dqgsprbuef0p9s3b1ye",pinId:"r3"},to:{insId:"ApisCombination-ts149e2",pinId:"__trigger"}},{from:{insId:"oeum6dqgsprbuef0p9s3b1ye",pinId:"r2"},to:{insId:"ApisCombination-69049ap",pinId:"__trigger"}},{from:{insId:"oeum6dqgsprbuef0p9s3b1ye",pinId:"r1"},to:{insId:"rh3ug7oqoze1rvn4k17kc556",pinId:"__trigger"}}],id:"Reactivity",inputs:{},outputs:{output:{type:"any",optional:!1,delayed:!1}},inputsPosition:{city:{x:-187.27285824815934,y:-14.13215209416181}},outputsPosition:{json:{x:-441.98276309426666,y:480.38719404276554},na:{x:-441.98276309426666,y:480.38719404276554},result:{x:-499.82438378976735,y:706.7650396699393},output:{x:-588.0203320231655,y:-62.15245435262375},response:{x:-500.61566893722795,y:421.9045791861946}},completionOutputs:["output"]}}},tip:"Try changing the collection count and see the output change.",playgroundUrl:"https://play.flyde.dev/apps/5860e97d-8e3c-4751-baf2-367bcd768852"},{label:"Debounce/Throttle",flow:A,tip:"Try changing the delay time of the debounce/throttle nodes.",playgroundUrl:"https://play.flyde.dev/apps/f35b90b9-9438-4805-a700-b7eb32c373b2"},{label:"HTTP Requests",flow:V,tip:'Double click "Format Response" to see how it is implemented.',playgroundUrl:"https://play.flyde.dev/apps/c19f558e-e34e-4bad-a47a-58b37968a8b8"}];var L=n(42550),$=n(93641);const H=[{title:"Simplify Programming For Novice Developers and Non-Developer Technical Roles",content:o.createElement("div",null,o.createElement("p",null,"Whether you're a junior developer struggling with async operations, a sales engineer needing to prototype with APIs quickly, or a QA engineer setting up backend tests, Flyde is your solution. By converting complex coding tasks into visual, intuitive flows, Flyde saves time and demystifies coding challenges."," "),o.createElement("strong",null,"Start now by exploring the"," ",o.createElement(T.Z,{href:"https://play.flyde.dev"},"Playground"),"."))},{title:"Democratize Innovation by transforming your Codebase into a Low-Code Platform",content:o.createElement("div",null,o.createElement("p",null,"Open the door to broader team collaboration by integrating Flyde into your codebase. Product managers, data engineers, and other roles can now easily understand, contribute to, and innovate on your project, turning complex business logic into collaborative opportunities."),o.createElement("strong",null,"Learn how to integrate Flyde into existing code"," ",o.createElement(T.Z,{href:"https://www.flyde.dev/docs/integrate-flows/"},"here"),"."))},{title:"A New Way for Educators to Teach Real-World Programming",content:o.createElement("div",null,o.createElement("p",null,"Flyde presents a unique blend of the functional and reactive programming paradigms, coupled with a visual interface. This positions Flyde as a uniquely valuable tool in the educator's arsenal, complementing more traditional, yet impactful, projects like Scratch and Blockly."," "),o.createElement("strong",null,"If you\u2019re an educator looking to learn more, please reach out in on"," ",o.createElement(T.Z,{href:"/discord"},"Discord"),"."))}],q=0;function F(){const[e,t]=o.useState(z[q]),n=o.useRef(null),i=(0,o.useCallback)((()=>{n.current?.runFlow()}),[]),s=(0,o.useMemo)((()=>o.createElement("div",{className:"example-actions"},o.createElement("span",{className:"font-thin label"},"Examples:"),z.map((n=>o.createElement("button",{key:n.label,className:"button button--sm example-button "+(n.label===e.label?"button--primary":"button--secondary"),onClick:()=>t(n)},n.label))))),[e]);return o.createElement("div",{className:(0,a.default)("hero hero--primary",r.heroBanner)},o.createElement("div",{className:"container"},o.createElement("div",{className:"content-wrapper"},o.createElement("a",{className:"github-star",href:"https://www.github.com/flydelabs/flyde",target:"_blank"},o.createElement(M,null)," ",o.createElement("span",null,"Star us on GitHub")),o.createElement("h1",{className:"hero__title"},o.createElement("div",{className:"font-thin"},"Visual Programming."),o.createElement("div",null,"For Developers")),o.createElement("p",{className:"hero__subtitle"},"Open source, runs in"," ",o.createElement("a",{href:"https://marketplace.visualstudio.com/items?itemName=flyde.flyde-vscode",target:"_blank"},"VS Code"),", integrates with existing ",o.createElement("strong",null,"TypeScript")," code, browser and Node.js."),o.createElement("div",{className:"buttons-container"},o.createElement(T.Z,{className:"button button--primary button--lg ",href:"/docs"},"Quick Start"),o.createElement(T.Z,{className:"button button--secondary button--lg example-btn",href:e.playgroundUrl},"Playground"))),o.createElement("div",{className:"example-container"},o.createElement("div",{className:"hero-horizontal-only"},s),o.createElement(D,{example:e,key:e.label,ref:n},o.createElement(L.z,{onClick:i,className:"run-flow-btn",icon:o.createElement($.s,null)},"Run")),e.tip?o.createElement("div",{className:"example-tip"},"Challenge:"," ",e.tip.replace(/^[A-Z]/,(e=>e.toLowerCase()))," ","\xa0",e.playgroundUrl?o.createElement("a",{href:e.playgroundUrl,className:"open-in-playground",target:"_blank"},"Open in playground"):null):null,o.createElement("div",{className:"hero-vertical-only"},s))))}function G(){const{siteConfig:e}=(0,i.Z)();return(0,o.useEffect)((()=>{document.querySelectorAll('a[href^="#"]').forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();let t=this.getAttribute("href"),n=document.querySelector(t);n&&window.scrollTo({top:n.offsetTop-100,behavior:"smooth"})}))}))}),[]),o.createElement(s.Z,{description:"Flyde, open-source visual programming language. Runs in the IDE, integrates with existing TypeScript code, browser and Node.js."},o.createElement(F,null),o.createElement("section",{className:"features-strip"},k.map((e=>o.createElement("div",{className:"feature-highlight",key:e.title},o.createElement("a",{href:`#${e.id}`},e.preview))))),k.map((e=>o.createElement("section",{className:"feature-strip",id:e.id,key:e.id},o.createElement("div",{className:"feature-strip-inner"},o.createElement("div",{className:"image-container"},o.createElement("img",{src:e.image}),o.createElement("div",{className:"image-caption"},e.imageCaption)),o.createElement("div",{className:"content-container"},o.createElement("h3",null,e.title),o.createElement("div",{className:"feature-description"},e.description)))))),o.createElement("section",{className:"use-cases"},o.createElement("h2",null,"Use Cases"),H.map((e=>o.createElement("div",{className:"use-case",key:e.title},o.createElement("div",{className:"use-case-inner"},o.createElement("h3",null,e.title),o.createElement("div",{className:"use-case-description"},e.content)))))))}},85721:(e,t,n)=>{var o={"./af":47654,"./af.js":47654,"./ar":61325,"./ar-dz":98344,"./ar-dz.js":98344,"./ar-kw":26230,"./ar-kw.js":26230,"./ar-ly":42524,"./ar-ly.js":42524,"./ar-ma":44119,"./ar-ma.js":44119,"./ar-sa":82625,"./ar-sa.js":82625,"./ar-tn":42182,"./ar-tn.js":42182,"./ar.js":61325,"./az":37093,"./az.js":37093,"./be":32721,"./be.js":32721,"./bg":59919,"./bg.js":59919,"./bm":95594,"./bm.js":95594,"./bn":563,"./bn-bd":41757,"./bn-bd.js":41757,"./bn.js":563,"./bo":73211,"./bo.js":73211,"./br":87438,"./br.js":87438,"./bs":83662,"./bs.js":83662,"./ca":61196,"./ca.js":61196,"./cs":5841,"./cs.js":5841,"./cv":85251,"./cv.js":85251,"./cy":24512,"./cy.js":24512,"./da":37539,"./da.js":37539,"./de":5059,"./de-at":53853,"./de-at.js":53853,"./de-ch":99378,"./de-ch.js":99378,"./de.js":5059,"./dv":91454,"./dv.js":91454,"./el":39651,"./el.js":39651,"./en-au":87953,"./en-au.js":87953,"./en-ca":98193,"./en-ca.js":98193,"./en-gb":61980,"./en-gb.js":61980,"./en-ie":14050,"./en-ie.js":14050,"./en-il":6502,"./en-il.js":6502,"./en-in":555,"./en-in.js":555,"./en-nz":11372,"./en-nz.js":11372,"./en-sg":26568,"./en-sg.js":26568,"./eo":69533,"./eo.js":69533,"./es":68327,"./es-do":17620,"./es-do.js":17620,"./es-mx":96467,"./es-mx.js":96467,"./es-us":83272,"./es-us.js":83272,"./es.js":68327,"./et":68523,"./et.js":68523,"./eu":19066,"./eu.js":19066,"./fa":59087,"./fa.js":59087,"./fi":96443,"./fi.js":96443,"./fil":93979,"./fil.js":93979,"./fo":90383,"./fo.js":90383,"./fr":56327,"./fr-ca":25610,"./fr-ca.js":25610,"./fr-ch":97274,"./fr-ch.js":97274,"./fr.js":56327,"./fy":67442,"./fy.js":67442,"./ga":44291,"./ga.js":44291,"./gd":77342,"./gd.js":77342,"./gl":96248,"./gl.js":96248,"./gom-deva":21404,"./gom-deva.js":21404,"./gom-latn":20833,"./gom-latn.js":20833,"./gu":9122,"./gu.js":9122,"./he":74623,"./he.js":74623,"./hi":60364,"./hi.js":60364,"./hr":30860,"./hr.js":30860,"./hu":70441,"./hu.js":70441,"./hy-am":90425,"./hy-am.js":90425,"./id":29672,"./id.js":29672,"./is":96150,"./is.js":96150,"./it":27852,"./it-ch":55603,"./it-ch.js":55603,"./it.js":27852,"./ja":16465,"./ja.js":16465,"./jv":20120,"./jv.js":20120,"./ka":87245,"./ka.js":87245,"./kk":21479,"./kk.js":21479,"./km":82735,"./km.js":82735,"./kn":63060,"./kn.js":63060,"./ko":85020,"./ko.js":85020,"./ku":90582,"./ku.js":90582,"./ky":34950,"./ky.js":34950,"./lb":94201,"./lb.js":94201,"./lo":87894,"./lo.js":87894,"./lt":70120,"./lt.js":70120,"./lv":4265,"./lv.js":4265,"./me":14030,"./me.js":14030,"./mi":9463,"./mi.js":9463,"./mk":25898,"./mk.js":25898,"./ml":64233,"./ml.js":64233,"./mn":47156,"./mn.js":47156,"./mr":34479,"./mr.js":34479,"./ms":24691,"./ms-my":6456,"./ms-my.js":6456,"./ms.js":24691,"./mt":81789,"./mt.js":81789,"./my":37452,"./my.js":37452,"./nb":91170,"./nb.js":91170,"./ne":87529,"./ne.js":87529,"./nl":81776,"./nl-be":24455,"./nl-be.js":24455,"./nl.js":81776,"./nn":34705,"./nn.js":34705,"./oc-lnc":36139,"./oc-lnc.js":36139,"./pa-in":17960,"./pa-in.js":17960,"./pl":1899,"./pl.js":1899,"./pt":31670,"./pt-br":29159,"./pt-br.js":29159,"./pt.js":31670,"./ro":55115,"./ro.js":55115,"./ru":45149,"./ru.js":45149,"./sd":81231,"./sd.js":81231,"./se":35397,"./se.js":35397,"./si":99786,"./si.js":99786,"./sk":39383,"./sk.js":39383,"./sl":68691,"./sl.js":68691,"./sq":34826,"./sq.js":34826,"./sr":40080,"./sr-cyrl":75673,"./sr-cyrl.js":75673,"./sr.js":40080,"./ss":54309,"./ss.js":54309,"./sv":52245,"./sv.js":52245,"./sw":8967,"./sw.js":8967,"./ta":10454,"./ta.js":10454,"./te":35204,"./te.js":35204,"./tet":81571,"./tet.js":81571,"./tg":15737,"./tg.js":15737,"./th":41786,"./th.js":41786,"./tk":50511,"./tk.js":50511,"./tl-ph":14828,"./tl-ph.js":14828,"./tlh":62422,"./tlh.js":62422,"./tr":97047,"./tr.js":97047,"./tzl":90792,"./tzl.js":90792,"./tzm":67730,"./tzm-latn":59963,"./tzm-latn.js":59963,"./tzm.js":67730,"./ug-cn":42535,"./ug-cn.js":42535,"./uk":33151,"./uk.js":33151,"./ur":22750,"./ur.js":22750,"./uz":61914,"./uz-latn":60231,"./uz-latn.js":60231,"./uz.js":61914,"./vi":55517,"./vi.js":55517,"./x-pseudo":64078,"./x-pseudo.js":64078,"./yo":70046,"./yo.js":70046,"./zh-cn":81832,"./zh-cn.js":81832,"./zh-hk":90953,"./zh-hk.js":90953,"./zh-mo":38236,"./zh-mo.js":38236,"./zh-tw":71001,"./zh-tw.js":71001};function i(e){var t=s(e);return n(t)}function s(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}i.keys=function(){return Object.keys(o)},i.resolve=s,e.exports=i,i.id=85721},42016:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o=n.p+"assets/images/fibo-cdbc5936ed3856df4928019564ef82dd.gif"},39415:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o=n.p+"assets/images/integrates-cd9b83d7c4fb96804f2ff6edb5e19fcd.gif"},43033:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o=n.p+"assets/images/transparent-25618eaa2d7966dceddf11fb5f2c1108.gif"},61744:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o=n.p+"assets/images/visual-b1b598cd76a44cfb7ae65dec6aeaaa41.gif"}}]);