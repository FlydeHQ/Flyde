"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[623],{7695:function(e,n,t){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},r.apply(this,arguments)},o=this&&this.__rest||function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(t[r[o]]=e[r[o]])}return t},i=this&&this.__spreadArray||function(e,n){for(var t=0,r=n.length,o=e.length;t<r;t++,o++)e[o]=n[t];return e};Object.defineProperty(n,"__esModule",{value:!0}),n.customRepoToPartRepo=n.codePartToNative=void 0;var u=t(4206),a=t(8265),s=t(4048),c=t(8265);n.codePartToNative=function(e,n){void 0===n&&(n={});var p=t.g&&t.g.vm2||"undefined"==typeof window?t.g.vm2:window&&window.vm2,d=e.fnCode,l=o(e,["fnCode"]),y=a.debugLogger("code-part:"+e.id),f="\n  try {\n    "+d+"\n  } catch (e) {\n    adv.onError(e);\n  }\n  ",m=new p.VMScript(f),h=r(r({},l),{fn:function(t,o,d){var l=new p.VM({sandbox:r({inputs:t,outputs:o,setInterval:setInterval,clearInterval:clearInterval,setTimeout:setTimeout,clearTimeout:clearTimeout,encodeURIComponent:encodeURIComponent,adv:d,log:function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];y.apply(void 0,i(["Log from code part "+e.id+" ["+d.insId+"]"],n))},axios:u.default,DEFAULT_AXIOS_TIMEOUT:15e3,dynamicPartInput:s.dynamicPartInput,dynamicPartArg:s.dynamicPartInput,dynamicOutput:c.dynamicOutput,isDefined:c.isDefined,compileStringTemplate:a.compileStringTemplate,compileObjectTemplate:a.compileObjectTemplate,__FLYDE_MODE:"production"},n)});l.run(m)}});return h};n.customRepoToPartRepo=function(e,t){void 0===t&&(t={});var r={};for(var o in e){var i=e[o];r[o]=s.isCodePart(i)?n.codePartToNative(i,t):i}return r}},8541:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.cappedArrayDebounce=void 0;n.cappedArrayDebounce=function(e,n,t,r){void 0===r&&(r=500);var o=[],i=null,u=null;return function(a){clearTimeout(i),o.push(a),u||(u=setTimeout((function(){e(o),clearTimeout(i),u=null}),r)),o.length>=t?(e(o),clearTimeout(u),u=null,o=[]):i=setTimeout((function(){e(o),clearTimeout(u),u=null,o=[]}),n)}}},6615:function(e,n){var t;Object.defineProperty(n,"__esModule",{value:!0}),n.dataShaper=n.DataShapeType=void 0,function(e){e[e.STRING=0]="STRING",e[e.NUMBER=1]="NUMBER",e[e.BOOLEAN=2]="BOOLEAN",e[e.ARRAY=3]="ARRAY",e[e.OBJECT=4]="OBJECT",e[e.NULL=5]="NULL"}(t=n.DataShapeType||(n.DataShapeType={}));var r={string:t.STRING,number:t.NUMBER,boolean:t.BOOLEAN,object:t.OBJECT,array:t.ARRAY,null:t.NULL};n.dataShaper=function(e,t,o){void 0===t&&(t=5),void 0===o&&(o=5);var i,u,a=null===(i=e)?"null":typeof i;if("object"===a){if(Array.isArray(e))return t>1?e.filter((function(e,n){return n<o})).map((function(e){return n.dataShaper(e,t-1,o)})):r.array;if(t>1){var s={};for(var c in e)s[c]=n.dataShaper(e[c],t-1,o);return u=s,Object.keys(u).sort().reduce((function(e,n){return e[n]=u[n],e}),{})}return r.object}return r[a]}},189:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),n.debugLogger=void 0;var r=t(6292).default("flyde");n.debugLogger=function(e){return r.extend(e)}},8132:function(e,n,t){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},r.apply(this,arguments)},o=this&&this.__rest||function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(t[r[o]]=e[r[o]])}return t},i=this&&this.__spreadArray||function(e,n){for(var t=0,r=n.length,o=e.length;t<r;t++,o++)e[o]=n[t];return e};Object.defineProperty(n,"__esModule",{value:!0}),n.hashProject=n.hashPart=void 0;var u=t(1586),a=t(8265),s=function(e){return u(e)};n.hashPart=function(e){var n={id:e.id,completionOutputs:e.completionOutputs,reactiveInputs:e.reactiveInputs,inputs:e.inputs,outputs:e.outputs};if(a.isGroupedPart(e)){var t=e.instances,u=e.id,c=e.connections,p=t.map((function(e){e.pos;return o(e,["pos"])}));p.sort((function(e,n){return e.id.localeCompare(n.id)}));var d=i([],c);d.sort((function(e,n){var t=e.from.insId+"."+e.from.pinId,r=n.from.insId+"."+n.from.pinId;return t.localeCompare(r)}));var l=JSON.stringify(r({id:u,cleanedInstances:p,conns:d},n));return s(l)}if(a.isCodePart(e)){var y=e.fnCode,f=e.customViewCode;l=JSON.stringify(r({fnCode:y,customViewCode:f},n));return s(l)}throw new Error("Hashing native parts unsupported")};n.hashProject=function(e){var t=e.slug,r=e.id,o=e.customRepo,i=e.env,u=e.triggers,a=Object.values(o).map(n.hashPart).join(""),c=JSON.stringify({id:r,slug:t,env:i,triggers:u});return s(c+a)}},5821:function(e,n,t){var r=this&&this.__createBinding||(Object.create?function(e,n,t,r){void 0===r&&(r=t),Object.defineProperty(e,r,{enumerable:!0,get:function(){return n[t]}})}:function(e,n,t,r){void 0===r&&(r=t),e[r]=n[t]}),o=this&&this.__exportStar||function(e,n){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(n,t)||r(n,e,t)};Object.defineProperty(n,"__esModule",{value:!0}),n.DepGraph=void 0,o(t(9985),n),o(t(4919),n),o(t(189),n),o(t(8541),n),o(t(4919),n),o(t(8132),n),o(t(7748),n),o(t(6615),n),n.DepGraph=t(9280).DepGraph},9985:function(e,n){var t=this&&this.__assign||function(){return t=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},t.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.testDataCreator=void 0;n.testDataCreator=function(e){return function(n){void 0===n&&(n={});var r="function"==typeof e?e():e,o=n;return t(t({},r),o)}}},4919:function(e,n){var t=this&&this.__assign||function(){return t=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},t.apply(this,arguments)},r=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(o,i){function u(e){try{s(r.next(e))}catch(n){i(n)}}function a(e){try{s(r.throw(e))}catch(n){i(n)}}function s(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(u,a)}s((r=r.apply(e,n||[])).next())}))},o=this&&this.__generator||function(e,n){var t,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;u;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=n.call(e,u)}catch(a){i=[6,a],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=this&&this.__spreadArray||function(e,n){for(var t=0,r=n.length,o=e.length;t<r;t++,o++)e[o]=n[t];return e};Object.defineProperty(n,"__esModule",{value:!0}),n.eventually=n.delay=n.noop=n.removeDupes=n.ensure=n.isOptionalType=n.isDefined=n.containsAll=n.shuffle=n.randomInts=n.repeat=n.pickRandom=n.randomPos=n.randomInt=n.pickSecond=n.pickFirst=n.fromEntries=n.entries=n.okeys=n.values=n.keys=n.filterOMap=n.mapOMap=void 0;n.mapOMap=function(e,r){return n.entries(e).map((function(e){var n=e[0],t=e[1];return[n,r(n,t)]})).reduce((function(e,n){var r,o=n[0],i=n[1];return t(t({},e),((r={})[o]=i,r))}),{})};n.filterOMap=function(e,r){return n.entries(e).filter((function(e){var n=e[0],t=e[1];return r(n,t)})).reduce((function(e,n){var r,o=n[0],i=n[1];return t(t({},e),((r={})[o]=i,r))}),{})};n.keys=function(e){return Object.keys(e)};n.values=function(e){return Object.values(e)},n.okeys=n.keys;n.entries=function(e){return n.okeys(e).map((function(n){return[n,e[n]]}))};n.fromEntries=function(e){return e.reduce((function(e,n){var r,o=n[0],i=n[1];return t(t({},e),((r={})[o]=i,r))}),{})};n.pickFirst=function(e){return e[0]};n.pickSecond=function(e){return e[1]};n.randomInt=function(e,n){void 0===n&&(n=0);var t=Math.random();return n+Math.floor((e-n)*t)};n.randomPos=function(e,t){return void 0===e&&(e=1e3),void 0===t&&(t=0),{x:n.randomInt(e,t),y:n.randomInt(e,t)}};n.pickRandom=function(e){return e[n.randomInt(e.length)]};n.repeat=function(e,n){return"x".repeat(e).split("").map((function(e,t){return n(t)}))};n.randomInts=function(e,t,r){return void 0===t&&(t=100),void 0===r&&(r=0),n.repeat(e,(function(){return n.randomInt(t,r)}))};n.shuffle=function(e){for(var n,t=i([],e),r=t.length-1;r>=0;r--){var o=Math.floor(Math.random()*(r+1));n=[t[o],t[r]],t[r]=n[0],t[o]=n[1]}return t};n.containsAll=function(e,n){return n.every((function(n){return e.includes(n)}))};n.isDefined=function(e){return void 0!==e};n.isOptionalType=function(e){return/\?$/.test(e)};n.ensure=function(e,n){if(void 0===e)throw new Error(n||"Undefined value passed");return e};n.removeDupes=function(e){return Array.from(new Set(e))};n.noop=function(){};n.delay=function(e){return new Promise((function(n){return setTimeout(n,e)}))};n.eventually=function(e,t,i,u){return void 0===t&&(t=3e3),void 0===i&&(i=100),void 0===u&&(u=new Set),r(void 0,void 0,void 0,(function(){var r,a,s,c;return o(this,(function(o){switch(o.label){case 0:if(t<0)throw r=Array.from(u).reduce((function(e,n,t){return e+"\n\t\t"+(t+1)+". "+n}),""),new Error("[Eventually timeout exceeded after: timeout with error]: "+r);o.label=1;case 1:return o.trys.push([1,3,,5]),[4,e()];case 2:return o.sent(),[3,5];case 3:return a=o.sent(),s=Date.now(),[4,n.delay(i)];case 4:return o.sent(),c=Date.now()-s,u.add(a.message),[2,n.eventually(e,t-c,i,u)];case 5:return[2]}}))}))}},7748:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.compileObjectTemplate=n.compileStringTemplate=void 0;n.compileStringTemplate=function(e,n){var t=decodeURIComponent(e);return Object.keys(n).forEach((function(e){var r=n[e],o=new RegExp("\\$\\{"+e+"\\}","g");t=t.replace(o,r)})),t};n.compileObjectTemplate=function(e,n){var t=decodeURIComponent(e);return Object.keys(n).forEach((function(e){var r=n[e],o=JSON.stringify(r),i=new RegExp('"\\$\\$\\{'+e+'\\}"',"g"),u=new RegExp("\\$\\{"+e+"\\}","g"),a="string"==typeof r?r.replace(/"/g,(function(e,n,t){return"\\"!==t[n-1]?'\\"':t[n]})):r;t=t.replace(i,o).replace(u,a).replace(/\n/g,"\\n")})),JSON.parse(t)}},1076:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.connection=n.connectionData=n.connectionDataEquals=n.connectionNodeEquals=n.connectionNode=n.externalConnectionNode=n.isInternalConnection=n.isExternalConnection=n.isInternalConnectionNode=n.isExternalConnectionNode=n.TRIGGER_PIN_ID=n.ERROR_PIN_ID=n.THIS_INS_ID=void 0,n.THIS_INS_ID="__this",n.ERROR_PIN_ID="__error",n.TRIGGER_PIN_ID="__trigger";n.isExternalConnectionNode=function(e){return e.insId===n.THIS_INS_ID};n.isInternalConnectionNode=function(e){return e.insId!==n.THIS_INS_ID};n.isExternalConnection=function(e){var t=e.from,r=e.to;return n.isExternalConnectionNode(t)||n.isExternalConnectionNode(r)};n.isInternalConnection=function(e){return!n.isExternalConnection(e)};n.externalConnectionNode=function(e){return{insId:n.THIS_INS_ID,pinId:e}};n.connectionNode=function(e,n){return{insId:e,pinId:n}};n.connectionNodeEquals=function(e,n){return e.insId===n.insId&&e.pinId===n.pinId};n.connectionDataEquals=function(e,t){return!(!e||!t)&&(n.connectionNodeEquals(e.from,t.from)&&n.connectionNodeEquals(e.to,t.to))},n.connectionData=function(e,t,r){var o="string"==typeof e?e.split("."):e,i="string"==typeof t?t.split("."):t;if(o.length>2||i.length>2)throw new Error("invalid source or target to connection data - "+e+" / "+t);return{from:2===o.length?n.connectionNode(o[0],o[1]):n.externalConnectionNode(o[0]),to:2===i.length?n.connectionNode(i[0],i[1]):n.externalConnectionNode(i[0]),delayed:r}};n.connection=function(e,n,t){return void 0===t&&(t=!1),{from:e,to:n,delayed:t}}},6485:function(e,n,t){var r=this&&this.__createBinding||(Object.create?function(e,n,t,r){void 0===r&&(r=t),Object.defineProperty(e,r,{enumerable:!0,get:function(){return n[t]}})}:function(e,n,t,r){void 0===r&&(r=t),e[r]=n[t]}),o=this&&this.__exportStar||function(e,n){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(n,t)||r(n,e,t)},i=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(o,i){function u(e){try{s(r.next(e))}catch(n){i(n)}}function a(e){try{s(r.throw(e))}catch(n){i(n)}}function s(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(u,a)}s((r=r.apply(e,n||[])).next())}))},u=this&&this.__generator||function(e,n){var t,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;u;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=n.call(e,u)}catch(a){i=[6,a],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.connect=void 0;var a=t(4048),s=t(385),c=t(5821),p=t(1076);o(t(1076),n);n.connect=function(e,n,t,r,o,d,l){void 0===t&&(t={}),void 0===r&&(r="root"),void 0===o&&(o={bob:new Map}),void 0===d&&(d=c.noop),void 0===l&&(l={});var y=e.id,f=e.connections,m=e.instances,h=y||"connected-part"+c.randomInt(999);return{inputs:e.inputs,outputs:e.outputs,id:h,completionOutputs:e.completionOutputs,reactiveInputs:e.reactiveInputs,fn:function(y,v){var g=[],b=new c.DepGraph({}),x=new Map,I=new Map,C=new Map,O=new Map,k=new Map,w=new Map;m.forEach((function(e){var t=a.getPart(e,n),r=e.id;x.set(e,r),I.set(r,e),b.addNode(r);var o=Object.keys(t.inputs),i=Object.keys(t.outputs),u={},s={};if(o.forEach((function(n){var t=(e.inputConfig||{})[n]||a.queueInputPinConfig();a.isStaticInputPinConfig(t)?u[n]=a.staticPartInput(t.value):u[n]=a.dynamicPartInput({config:t})})),u[p.TRIGGER_PIN_ID]=a.dynamicPartInput({config:a.queueInputPinConfig()}),f.some((function(n){return p.isInternalConnectionNode(n.to)&&n.to.insId===e.id&&n.to.pinId===p.TRIGGER_PIN_ID}))&&e.inputConfig&&e.inputConfig[p.TRIGGER_PIN_ID])throw"Trigger connection can not be configured";i.forEach((function(e){var n=a.dynamicOutput();s[e]=n})),f.some((function(n){return p.isInternalConnectionNode(n.from)&&n.from.insId===e.id&&n.from.pinId===p.ERROR_PIN_ID}))&&(s[p.ERROR_PIN_ID]=a.dynamicOutput()),C.set(r,u),O.set(r,s)}));var E=new Set;return f.forEach((function(t){var r=t.from,o=t.to,s=r.insId,c=r.pinId,d=o.insId,l=o.pinId,y=O.get(s),f=C.get(d);if(p.isInternalConnectionNode(o)&&E.add(o.insId+"."+o.pinId),p.isExternalConnection(t))if(p.isExternalConnectionNode(r)){var m=f[o.pinId];if(!m)throw new Error("Input "+o.pinId+" of instance "+d+" not found");(v=k.get(r.pinId)||[]).push(m),k.set(r.pinId,v)}else{var v,x=y[r.pinId];if(!x)throw new Error("Output "+r.pinId+" of instance "+s+" not found");(v=w.get(o.pinId)||[]).push(x),w.set(o.pinId,v)}else{if(!y)throw new Error("No outputs found for instance ["+s+"]");if(!f)throw I.has(d)?new Error("No inputs found for instance ["+d+"]"):new Error("Instance with id ["+d+"] does not exist!");var q=y[c];if(!q)throw new Error("Output source - ["+r+"] not found in part ["+h+"]");var S=f[l],_=I.get(s);if(!_&&s!==p.THIS_INS_ID)throw new Error("Instance ["+s+"] does not exist! failed to connect ["+r+"] -> ["+o+"]");var P=(_?a.getPart(_,n):e).outputs[c];if(P&&P.delayed||t.delayed||s!==p.THIS_INS_ID&&d!==p.THIS_INS_ID&&b.addDependency(s,d),!S)throw new Error("Target arg - ["+o+"] not found in part ["+h+"]");var T=q.subscribe((function(e){return i(void 0,void 0,void 0,(function(){return u(this,(function(n){if(!a.isDynamicInput(S))throw console.info(S),new Error("Impossible state listening to non dynamic input - "+d+"."+l);return S.subject.next(e),[2]}))}))}));g.push((function(){return T.unsubscribe()}))}})),c.okeys(v).forEach((function(e){(w.get(e)||[]).forEach((function(n){var t=n.subscribe((function(n){return i(void 0,void 0,void 0,(function(){return u(this,(function(t){return v[e].next(n),[2]}))}))}));g.push((function(){return t.unsubscribe()}))}))})),b.overallOrder().map((function(e){return I.get(e)})).forEach((function(e){var i=C.get(e.id),u=O.get(e.id),c=a.getPart(e,n);if(!i)throw new Error("Unexpected error - args not found when running "+e);if(!u)throw new Error("Unexpected error - outputs not found when running "+e);for(var p in i){var y=e.inputConfig[p];E.has(e.id+"."+p)||a.isStaticInputPinConfig(y)||delete i[p]}var f=s.execute({part:c,inputs:i,outputs:u,partsRepo:n,_debugger:t,insId:e.id,extraContext:{},mainState:o,parentInsId:r,onBubbleError:d,env:l});g.push(f)})),Object.keys(y).forEach((function(e){return i(void 0,void 0,void 0,(function(){return u(this,(function(n){return(k.get(e)||[]).forEach((function(n){var t=y[e];if(!a.isDynamicInput(n))throw"todo";c.isDefined(t)&&n.subject.next(t)})),[2]}))}))})),function(){return g.forEach((function(e){try{e()}catch(n){console.error("error unsubscribing",n)}}))}}}}},385:function(e,n,t){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},r.apply(this,arguments)},o=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(o,i){function u(e){try{s(r.next(e))}catch(n){i(n)}}function a(e){try{s(r.throw(e))}catch(n){i(n)}}function s(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(u,a)}s((r=r.apply(e,n||[])).next())}))},i=this&&this.__generator||function(e,n){var t,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;u;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=n.call(e,u)}catch(a){i=[6,a],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.execute=n.INPUTS_STATE_SUFFIX=n.INNER_STATE_SUFFIX=void 0;var u=t(6845),a=t(1730),s=t(8739),c=t(4048),p=t(6485),d=t(3939),l=t(5821),y=t(189),f=t(8265);n.INNER_STATE_SUFFIX="_inner",n.INPUTS_STATE_SUFFIX="_inputs";n.execute=function(e){var t=e.part,m=e.inputs,h=e.outputs,v=e.partsRepo,g=e._debugger,b=void 0===g?{}:g,x=e.insId,I=void 0===x?t.id:x,C=e.extraContext,O=void 0===C?{}:C,k=e.mainState,w=void 0===k?{}:k,E=e.parentInsId,q=void 0===E?"root":E,S=e.onBubbleError,_=void 0===S?u.noop:S,P=e.env,T=void 0===P?{}:P,j=[],D=s(),N=r(r({},O),{ENV:T}),V=f.customRepoToPartRepo(v,N),R=function(e){if(h[p.ERROR_PIN_ID])h[p.ERROR_PIN_ID].next(e);else{var n=e instanceof Error?e:new Error("Raw error: "+e.toString());if(n.message="error in child instance "+I+": "+n.message,n.insId=I,_(n),b.onError){var t=n;t.insId=q+"."+I,b.onError(t)}}},z=function(e){return c.isGroupedPart(e)?p.connect(e,V,b,q+"."+I,w,R,T):c.isCodePart(e)?f.codePartToNative(e,N):e}(t),M=b.onInput||u.noop,A=b.onOutput||u.noop,F={},L={},G=q+"."+I;l.entries(m).forEach((function(e){var n=e[0],t=e[1];if(c.isDynamicInput(t)){var r=c.dynamicPartInput({config:t.config}),u=t.subject.subscribe((function(e){return o(void 0,void 0,void 0,(function(){var t,o;return i(this,(function(i){switch(i.label){case 0:return(t=M({insId:G,pinId:n,val:e,time:Date.now(),partId:z.id,executionId:D}))?[4,t.valuePromise]:[3,2];case 1:return o=i.sent(),r.subject.next(o),[3,5];case 2:return b.debugDelay?[4,l.delay(b.debugDelay)]:[3,4];case 3:i.sent(),i.label=4;case 4:r.subject.next(e),i.label=5;case 5:return[2]}}))}))}));j.push((function(){return u.unsubscribe()})),L[n]=r}else{var a=c.staticPartInput(c.getStaticValue(t.config.value,V,I));L[n]=a}})),l.entries(h).forEach((function(e){var n=e[0],t=e[1],r=c.dynamicOutput(),u=r.subscribe((function(e){return o(void 0,void 0,void 0,(function(){var r,o;return i(this,(function(i){switch(i.label){case 0:return(r=A({insId:G,pinId:n,val:e,time:Date.now(),partId:z.id,executionId:D}))?[4,r.valuePromise]:[3,2];case 1:return o=i.sent(),t.next(o),[3,3];case 2:t.next(e),i.label=3;case 3:return[2]}}))}))}));j.push((function(){return u.unsubscribe()})),F[n]=r}));var U=function(e){var t,o=e.part,i=e.inputs,s=e.outputs,p=e.repo,f=e._debugger,m=e.insId,h=e.parentInsId,v=e.mainState,g=e.onError,b=(e.onBubbleError,e.env),x=o.fn,I=y.debugLogger("core"),C=[],O=f.onProcessing||u.noop,k=f.onInputsStateChange||u.noop,w=(h||"root")+"."+m,E=""+w+n.INNER_STATE_SUFFIX,q=""+w+n.INPUTS_STATE_SUFFIX,S=I.extend(w);v[E]||(v[E]=new Map),v[q]||(v[q]=new Map),v[E];var _,P=v[q],T=function(){var e=Array.from(P.entries()).reduce((function(e,n){var t,o=n[0],u=n[1],a=c.isQueueInputPinConfig(i[o].config,i[o]);return r(r({},e),((t={})[o]=a?null==u?void 0:u.length:1,t))}),{});k({inputs:e,insId:w})},j={execute:function(e,t,r,o){return n.execute({part:e,inputs:t,outputs:r,partsRepo:p,_debugger:f,insId:o})},insId:m,state:v[E],onCleanup:function(e){C.push(e)},onError:function(e){g(e)}},D=!1,N=o.reactiveInputs||[],V=function(){v[E].clear(),l.keys(v).filter((function(e){return e.startsWith(w+".")})).forEach((function(e){v[e]=new Map}))},R=function e(n){var u,p=N.includes(null==n?void 0:n.key);if(D&&!p);else{var y=D&&p;if(d.isPartStateValid(i,P,o,_)||y){var f=void 0;if(D){if(!n)throw new Error("Unexpected state,  got reactive part while not processing and not valid");var m=d.pullValueForExecution(n.key,i[n.key],P,b);f=r(r({},_),((u={})[n.key]=m,u)),T()}else f=d.pullValuesForExecution(i,P,b),_=f,T();var h=new Set;if(o.completionOutputs){O({processing:D=!0,insId:w});var v=new Set(o.completionOutputs);l.entries(s).forEach((function(n){var r=n[0];n[1].pipe(a.first()).subscribe((function(n){h.add(r),Array.from(v.keys()).join(","),Array.from(h.keys()).join(","),v.has(r)&&(O({processing:D=!1,insId:w}),V(),t&&!o.outputs.jsx&&(t(),t=void 0),h.clear(),d.hasNewSignificantValues(i,P,b,o.id)&&e())}))}))}else V();try{S("Running part %s with values %o",o.id,f),t=x(f,s,j)}catch(q){O({processing:D=!1,insId:w}),g(q)}var I=N.find((function(e){return i[e]&&d.peekValueForExecution(e,i[e],P,b,o.id)}));if(I)m=d.peekValueForExecution(I,i[I],P,b,o.id),e({key:I,value:m});else{var C=l.entries(i).find((function(e){var n=e[0],t=e[1],r=c.isQueueInputPinConfig(t.config,t),i=d.peekValueForExecution(n,t,P,b,o.id);if(r)return l.isDefined(i)}));if(C){var k=C[0],E=C[1];m=d.peekValueForExecution(k,E,P,b,o.id),e({key:k,value:m})}}}}};R();var z=d.subscribeInputsToState(i,P,p,m,(function(e,n){I("Got input %s - value is [%o]",e,n),T(),R({key:e,value:n})}));return C.push(z),function(){t&&t(),C.forEach((function(e){return e()}))}}({part:z,inputs:L,outputs:F,repo:V,_debugger:b,insId:I,mainState:w,parentInsId:q,onError:R,onBubbleError:_,env:T});return function(){j.forEach((function(e){return e()})),U()}}},3939:function(e,n,t){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},r.apply(this,arguments)},o=this&&this.__spreadArray||function(e,n){for(var t=0,r=n.length,o=e.length;t<r;t++,o++)e[o]=n[t];return e};Object.defineProperty(n,"__esModule",{value:!0}),n.subscribeInputsToState=n.isPartStateValid=n.hasNewSignificantValues=n.peekValuesForExecution=n.pullValuesForExecution=n.pullValueForExecution=n.peekValueForExecution=void 0;var i=t(4048),u=t(5821),a=t(6485),s=function(e,n){var t=i.extractStaticValue(e);return i.isEnvValue(t)?function(e,n){for(var t=e.split("."),o=r({},n),i=0,a=t;i<a.length;i++){var s=a[i];if(!o||!u.isDefined(o[s])||null===o[s])throw new Error("Cannot find key "+e+" inside obj "+n);o=o[s]}return o}(i.getEnvKeyFromValue(t),n):t};n.peekValueForExecution=function(e,n,t,r,u){var a=t.get(e);if(!n)throw new Error('Trying to peek value of inexsting input in key "'+e+'" in part "'+u+'"');return i.isStaticInput(n)?s(n,r):i.isQueueInputPinConfig(n.config,n)?a?o([],a).shift():void 0:a};n.pullValueForExecution=function(e,n,t,r){var o,u=t.get(e);return i.isStaticInput(n)?o=s(n,r):i.isQueueInputPinConfig(n.config,n)?(o=(u||[]).shift(),t.set(e,u)):(o=u,i.isStickyInputPinConfig(n.config)||t.delete(e)),o};n.pullValuesForExecution=function(e,t,r){return u.entries(e).reduce((function(e,o){var i=o[0],u=o[1];return e[i]=n.pullValueForExecution(i,u,t,r),e}),{})};n.peekValuesForExecution=function(e,t,r,o){return u.entries(e).reduce((function(e,i){var u=i[0],a=i[1];return e[u]=n.peekValueForExecution(u,a,t,r,o),e}),{})};n.hasNewSignificantValues=function(e,t,r,o){return u.entries(e).some((function(e){var a=e[0],s=e[1],c=i.isStaticInput(s),p=n.peekValueForExecution(a,s,t,r,o);return u.isDefined(p)&&!c}))};n.isPartStateValid=function(e,n,t,r){var o=u.keys(e),s=u.keys(t.inputs).filter((function(e){return"required"===t.inputs[e].mode}));return o.includes(a.TRIGGER_PIN_ID)&&s.push(a.TRIGGER_PIN_ID),!!u.containsAll(o,s)&&u.entries(e).filter((function(e){var n=e[0];return!!t.inputs[n]||n===a.TRIGGER_PIN_ID})).every((function(e){var r,o=e[0],a=e[1],s=n.get(o);return"optional"===((null===(r=t.inputs[o])||void 0===r?void 0:r.mode)||"required")||(!!i.isStaticInput(a)||(i.isQueueInputPinConfig(a.config,a)?u.isDefined(s)&&s.length>0:u.isDefined(s)))}))};n.subscribeInputsToState=function(e,n,t,r,o){var a=[];return u.entries(e).forEach((function(e){var t=e[0],r=e[1];if(r&&!i.isStaticInput(r)){var u=r.subject.subscribe((function(e){if(i.isQueueInputPinConfig(r.config,r)){var u=n.get(t)||[];if(!Array.isArray(u))throw new Error("impossible state - state of key "+t+" is set but not an array");u.push(e),n.set(t,u),o(t,e)}else n.set(t,e),o(t,e)}));a.push((function(){return u.unsubscribe()}))}})),function(){return a.forEach((function(e){return e()}))}}},9735:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),n.flydeFlowSchema=void 0;var r=t(9510),o=r.z.strictObject({name:r.z.string(),alias:r.z.string()}),i=r.z.union([r.z.string(),o]),u=r.z.record(r.z.string(),r.z.array(i)),a=r.z.strictObject({x:r.z.number(),y:r.z.number()}),s=r.z.object({fnCode:r.z.string(),templateType:r.z.optional(r.z.string())}),c=r.z.discriminatedUnion("mode",[r.z.strictObject({mode:r.z.literal("static"),value:r.z.any()}),r.z.strictObject({mode:r.z.literal("queue")}),r.z.strictObject({mode:r.z.literal("sticky")})]),p=r.z.object({instances:r.z.array(r.z.strictObject({partId:r.z.string(),pos:a.default({x:0,y:0}),id:r.z.string(),inputConfig:r.z.optional(r.z.record(r.z.string(),c)).default({}),visibleInputs:r.z.optional(r.z.array(r.z.string()))})),connections:r.z.array(r.z.strictObject({from:r.z.strictObject({insId:r.z.string(),pinId:r.z.string()}),to:r.z.strictObject({insId:r.z.string(),pinId:r.z.string()})}))}),d=r.z.object({id:r.z.optional(r.z.string()),inputs:r.z.record(r.z.string(),r.z.union([r.z.string(),r.z.object({mode:r.z.enum(["required","optional","required-if-connected"]),type:r.z.string()})])),outputs:r.z.record(r.z.string(),r.z.union([r.z.string(),r.z.object({type:r.z.string()})])),inputsPosition:r.z.optional(r.z.record(r.z.string(),a)),outputsPosition:r.z.optional(r.z.record(r.z.string(),a)),customViewCode:r.z.optional(r.z.string()),dataBuilderSource:r.z.optional(r.z.string()),templateType:r.z.optional(r.z.string()),completionOutputs:r.z.optional(r.z.array(r.z.string())),reactiveInputs:r.z.optional(r.z.array(r.z.string()))}).and(r.z.union([s,p]));n.flydeFlowSchema=r.z.strictObject({imports:r.z.optional(u).default({}),exports:r.z.optional(r.z.array(r.z.string())).default([]),mainId:r.z.optional(r.z.string()),main:r.z.optional(r.z.any()),parts:r.z.record(r.z.string(),d).default({}),exposedFunctionality:r.z.optional(r.z.array(r.z.strictObject({codeName:r.z.string(),displayName:r.z.string(),inputs:r.z.optional(r.z.array(r.z.string())),path:r.z.string(),line:r.z.string()}))).default([])})},8265:function(e,n,t){var r=this&&this.__createBinding||(Object.create?function(e,n,t,r){void 0===r&&(r=t),Object.defineProperty(e,r,{enumerable:!0,get:function(){return n[t]}})}:function(e,n,t,r){void 0===r&&(r=t),e[r]=n[t]}),o=this&&this.__exportStar||function(e,n){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(n,t)||r(n,e,t)};Object.defineProperty(n,"__esModule",{value:!0}),n.ProjectType=n.isStaticValueGroupedPart=void 0,o(t(5821),n);var i=t(4048);o(t(6485),n),o(t(385),n),o(t(4048),n),o(t(163),n),o(t(1922),n),o(t(7695),n),o(t(5281),n),o(t(5596),n),o(t(9735),n);n.isStaticValueGroupedPart=function(e){return e&&!!i.maybeGetStaticValuePartId(""+e)},function(e){e.WEB_UI="web-ui",e.SERVER="server",e.MOBILE="mobile",e.CLI="cli"}(n.ProjectType||(n.ProjectType={}))},163:function(e,n,t){var r=this&&this.__spreadArray||function(e,n){for(var t=0,r=n.length,o=e.length;t<r;t++,o++)e[o]=n[t];return e};Object.defineProperty(n,"__esModule",{value:!0}),n.getPartWithDependencies=void 0;var o=t(4048),i=t(8265);n.getPartWithDependencies=function(e,t,u){if(void 0===u&&(u=[]),o.isCodePart(e))return[e];if(u.includes(e.id))return[];var a=i.removeDupes(e.instances.map((function(e){return e.partId})).filter((function(e){return t[e]}))),s=a.map((function(e){return t[e]})).reduce((function(e,o){return r(r([],e),n.getPartWithDependencies(o,t,r(r([],u),a)))}),[]);return r([e],s)}},4048:function(e,n,t){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},r.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,n,t,r){void 0===r&&(r=t),Object.defineProperty(e,r,{enumerable:!0,get:function(){return n[t]}})}:function(e,n,t,r){void 0===r&&(r=t),e[r]=n[t]}),i=this&&this.__exportStar||function(e,n){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(n,t)||o(n,e,t)};Object.defineProperty(n,"__esModule",{value:!0}),n.getPartDef=n.getPart=n.getStaticValue=n.maybeGetStaticValuePartId=n.staticPartRefence=n.fromSimplified=n.codePart=n.nativePart=n.groupedPart=n.isCodePart=n.isGroupedPart=n.isNativePart=n.CodePartTemplateTypeInline=void 0;var u=t(5821);i(t(704),n),i(t(5089),n),i(t(4702),n),function(e){e.VALUE="value",e.FUNCTION="function"}(n.CodePartTemplateTypeInline||(n.CodePartTemplateTypeInline={}));n.isNativePart=function(e){return!n.isGroupedPart(e)};n.isGroupedPart=function(e){return!!e.instances};n.isCodePart=function(e){return u.isDefined(e)&&u.isDefined(e.fnCode)},n.groupedPart=u.testDataCreator({id:"grouped-part",inputs:{},outputs:{},instances:[],connections:[],outputsPosition:{},inputsPosition:{}}),n.nativePart=u.testDataCreator({id:"part",inputs:{},outputs:{},fn:u.noop}),n.codePart=u.testDataCreator({id:"part",inputs:{},outputs:{},fnCode:""});n.fromSimplified=function(e){var n=e.fn,t=e.inputTypes,o=e.outputTypes,i=e.id,a=u.entries(t).reduce((function(e,n){var t,o=n[0],i=n[1];return r(r({},e),((t={})[o]={type:i},t))}),{}),s=u.entries(o).reduce((function(e,n){var t,o=n[0],i=n[1];return r(r({},e),((t={})[o]={type:i},t))}),{});return{id:i,inputs:a,outputs:s,fn:n}};n.staticPartRefence=function(e){return"__part:"+e.id};n.maybeGetStaticValuePartId=function(e){var n="string"==typeof e&&e.match(/^__part\:(.*)/);return n?n[1]:null};n.getStaticValue=function(e,t,r){var o=n.maybeGetStaticValuePartId(e);if(o){var i=t[o];if(!i)throw new Error("Instance "+r+" referrer to a part reference "+o+" that does not exist");return i}return e};n.getPart=function(e,n){var t="string"==typeof e?e:e.partId,r=n[t];if(!r)throw new Error("Part with id "+t+" not found");return r};n.getPartDef=function(e,n){var t="string"==typeof e?e:e.partId,r=n[t];if(!r)throw console.error("Part with id "+t+" not found"),new Error("Part with id "+t+" not found");return r}},704:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PartInstance=n.partInstance=void 0;n.partInstance=function(e,n,t,r){return{id:e,partId:"string"==typeof n?n:n.id,inputConfig:t||{},pos:r||{x:0,y:0}}};n.PartInstance=function(e,n,t,r){return{id:e,partId:n.id,inputConfig:t||{},pos:r||{x:0,y:0}}}},5089:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),n.getEnvKeyFromValue=n.toEnvValue=n.isEnvValue=n.extractStaticValue=n.isStaticInput=n.isDynamicInput=n.staticPartInput=n.dynamicPartInputs=n.dynamicPartInput=n.dynamicOutput=n.partOutputs=n.partOutput=n.partInputs=n.isInputPinOptional=n.partInput=void 0;var r=t(6845),o=t(4048),i=t(5821),u=t(4702);n.partInput=function(e,n){return void 0===e&&(e="any"),void 0===n&&(n="required"),{type:e,mode:n}};n.isInputPinOptional=function(e){return"optional"===e.mode};n.partInputs=function(e,t){return i.repeat(e,(function(e){return n.partInput("any",t[e]||"required")}))};n.partOutput=function(e,n,t){return void 0===e&&(e="any"),void 0===n&&(n=!1),void 0===t&&(t=!1),{type:e,delayed:n,optional:t}};n.partOutputs=function(e){return i.repeat(e,(function(){return n.partOutput("any")}))};n.dynamicOutput=function(){return new r.Subject},n.dynamicPartInput=i.testDataCreator((function(){return{subject:new r.Subject,config:u.queueInputPinConfig()}}));n.dynamicPartInputs=function(e){return void 0===e&&(e=10),i.repeat(e,(function(){return i.testDataCreator((function(){return{subject:new r.Subject,config:u.queueInputPinConfig()}}))()}))};n.staticPartInput=function(e){return{config:u.staticInputPinConfig(e)}};n.isDynamicInput=function(e){var n=e;return n&&n.subject&&!!n.subject.next};n.isStaticInput=function(e){return o.isStaticInputPinConfig(e.config)};n.extractStaticValue=function(e){if(n.isStaticInput(e))return e.config.value;throw new Error("Cannot extract static value from non static arg")};n.isEnvValue=function(e){return"string"==typeof e&&e.startsWith("$ENV.")};n.toEnvValue=function(e){return"$ENV."+e};n.getEnvKeyFromValue=function(e){return"string"==typeof e?e.replace(/^\$ENV\./,""):e}},4702:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isStaticInputPinConfig=n.isStickyInputPinConfig=n.isQueueInputPinConfig=n.staticInputPinConfig=n.stickyInputPinConfig=n.queueInputPinConfig=n.INPUT_MODES=void 0,n.INPUT_MODES=["queue","sticky","static"];n.queueInputPinConfig=function(){return{mode:"queue"}};n.stickyInputPinConfig=function(){return{mode:"sticky"}};n.staticInputPinConfig=function(e){return{mode:"static",value:e}};n.isQueueInputPinConfig=function(e,n){return"queue"===e.mode};n.isStickyInputPinConfig=function(e){return e&&"sticky"===e.mode};n.isStaticInputPinConfig=function(e){return e&&"static"===e.mode}},5596:function(e,n){Object.defineProperty(n,"__esModule",{value:!0})},1922:function(e,n){Object.defineProperty(n,"__esModule",{value:!0})},5281:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isScheduledTrigger=n.isRestApiTrigger=n.isWebAppTrigger=void 0;n.isWebAppTrigger=function(e){return"web-app"===e.type};n.isRestApiTrigger=function(e){return"rest-api"===e.type};n.isScheduledTrigger=function(e){return"scheduled"===e.type}},3281:function(e,n,t){t.d(n,{I:function(){return m}});var r=t(7378),o=(t(7651),t(9274)),i=t(8944),u=t(8265),a={VMScript:function(e){this.script=e},VM:function(){function e(e){this.context=e}return e.prototype.run=function(e){var n=(0,u.okeys)(this.context.sandbox),t=Object.values(this.context.sandbox);Function.apply(void 0,n.concat([e.script])).apply(void 0,t)},e}()},s=t(1884),c=t(4305),p=t(3127),d=200,l=t(1808);t(904);t.g.vm2=a;f=new Map,y=(0,p.Z)((0,c.Z)().mark((function e(n,t,r){var o,i,u;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n+"."+t+"."+r,i=f.get(o)||{total:0,lastSamples:[]},u=i.lastSamples.slice(0,d),e.abrupt("return",Object.assign({},i,{lastSamples:u}));case 4:case"end":return e.stop()}}),e)})));var y,f,m=function(e){var n=(0,r.useState)(e.defaultDelay||0),t=n[0],u=n[1];return r.createElement(o.Z,{title:e.meta.title+" | Playground",description:"Description will go into a meta tag in <head />"},r.createElement("header",{className:(0,i.Z)("hero hero--primary",l.Z.heroBanner)},r.createElement("div",{className:"container"},r.createElement("h2",{className:"hero__title"},"Flyde Playground"),r.createElement("p",{className:"hero__subtitle"},"Flyde's playground allows you to see how Flyde looks and feels like. Choose one of the examples below to get started. Feel free to play aroung with the canvas and see how your changes affect the result!"),r.createElement("ul",{className:"examples__menu"},r.createElement("li",null,r.createElement(s.Z,{to:"/playground/hello"},"Hello World")," "),r.createElement("li",null,r.createElement(s.Z,{to:"/playground/debounce-throttling"},"Debounce vs. Throttling")),r.createElement("li",null,r.createElement(s.Z,{to:"/playground/react-counter"},"React Counter")),r.createElement("li",null,r.createElement(s.Z,{to:"/playground/fibonacci"},"Fibonnaci Sequence"))))),r.createElement("div",{className:"playground-container"},r.createElement("header",null,r.createElement("h3",{className:"playground-title"},e.meta.title),r.createElement("div",{className:"playground-description"},e.meta.description),r.createElement("div",null,r.createElement("input",{type:"range",id:"volume",name:"delay",value:t,step:"100",min:"0",max:"300",onChange:function(e){return u(Number(e.target.value))}}),r.createElement("label",{htmlFor:"volume"},"Debug Delay - ",t,"ms"))),r.createElement("div",{className:"playground"},r.createElement("div",{className:"flow-container"}),r.createElement("div",{className:"output-container"},e.children))))}},1729:function(e,n,t){t.r(n),t.d(n,{default:function(){return s}});var r=t(7378),o=t(8265),i=t(3281),u={Main:{id:"Main",inputs:{},outputs:{result:{type:"any"}},inputsPosition:{click:{x:-125.66545105324758,y:-263.4653616952434}},outputsPosition:{result:{x:-115.33722007201499,y:126.07441056479868}},completionOutputs:["result"],instances:[{partId:"Inline Code 4796",pos:{x:-163.62,y:-156.7},id:"Inline Code 4796-573",inputConfig:{}}],connections:[{from:{insId:"Inline Code 4796-573",pinId:"r"},to:{insId:"__this",pinId:"result"}}]},"Inline Code 3497":{id:"Inline Code 3497",inputs:{},outputs:{r:{type:"any"}},customViewCode:'"Debounce 1"',dataBuilderSource:"IkRlYm91bmNlIDEi",templateType:"value",completionOutputs:["r"],fnCode:"bob"},"Inline Code 58421":{id:"Inline Code 58421",inputs:{},outputs:{r:{type:"any"}},customViewCode:'"Debounce 2"',dataBuilderSource:"IkRlYm91bmNlIDIi",templateType:"value",completionOutputs:["r"],fnCode:'outputs.r.next(("Debounce 2"))'},"Inline Code 59172":{id:"Inline Code 59172",inputs:{},outputs:{r:{type:"any"}},customViewCode:'"Throttled Value"',dataBuilderSource:"IlRocm90dGxlZCBWYWx1ZSI=",templateType:"value",completionOutputs:["r"],fnCode:'outputs.r.next(("Throttled Value"))'},"Inline Code 4796":{id:"Inline Code 4796",inputs:{},outputs:{r:{type:"any"}},customViewCode:"'Hello World'",dataBuilderSource:"J0hlbGxvIFdvcmxkJw==",templateType:"value",completionOutputs:["r"],fnCode:"outputs.r.next(('Hello World'))"},Debounce:{id:"Debounce",inputs:{i:{mode:"required",type:"any"},ms:{mode:"required",type:"any"}},outputs:{r:{type:"any"}},customViewCode:"<% if (inputs.ms) { %> Debounce  <%- inputs.ms %>ms <% } else { %> Debounce <% } %>",completionOutputs:["r"],reactiveInputs:["i"],fnCode:'const { i, ms } = inputs;\nconst { r } = outputs;\n        \n// magic here\nconst timer = adv.state.get("timer");\n  if (timer) {\n    clearTimeout(timer);\n  }\n\n  const newTimer = setTimeout(() => {\n    r.next(i);\n  }, ms);\n\n  adv.state.set("timer", newTimer);\n\n  adv.onCleanup(() => {\n    clearTimeout(timer);\n  })'},Throttle:{id:"Throttle",inputs:{value:{mode:"required",type:"any"},threshold:{mode:"required",type:"any"}},outputs:{result:{type:"any"},available:{type:"any"}},customViewCode:"<% if (inputs.threshold) { %> Throttle  <%- inputs.threshold %>ms <% } else { %> Throttle <% } %>",completionOutputs:["available"],reactiveInputs:["value"],fnCode:'const { value, threshold } = inputs;\nconst { result, available } = outputs;\n\nif (!adv.state.get("locked")) {\n  adv.state.set("locked", true);\n  result.next(value);\n  const timer = setTimeout(() => {\n    available.next(true);\n  }, threshold)\n  adv.onCleanup(() => clearTimeout(timer));\n} else {\n  adv.onError(new Error(`Throttled. Try again later`));\n}'}},a={title:"Hello World",description:'The mandatory "Hello World" example. Click on the execute button to see the output.\n This demonstrates one of the coolest features of Flyde - the ability to view your code running live!',key:"hello-world"};function s(){var e=(0,r.useRef)((0,o.dynamicOutput)()),n=(0,r.useRef)({__trigger:(0,o.dynamicPartInput)()}),t=(0,r.useState)([]),s=t[0],c=t[1],p=(0,r.useState)({flow:{imports:{},exports:[],parts:u},resolvedFlow:u,inputs:n.current,output:e.current}),d=p[0];p[1];return(0,r.useEffect)((function(){e.current.subscribe((function(e){c((function(n){return[].concat(n,[e])}))}))}),[]),r.createElement(i.I,{meta:a,flowProps:d},r.createElement("button",{onClick:function(){return n.current.__trigger.subject.next("run")}},"Execute"),r.createElement("button",{onClick:function(){return c([])}},"Clear"),r.createElement("code",null,s.map((function(e,n){return r.createElement("div",{key:n},e)}))))}},1808:function(e,n){n.Z={heroBanner:"heroBanner_qdFl",buttons:"buttons_AeoN","project-editor":"project-editor_XBpx"}},904:function(e){e.exports=JSON.parse('{"Accumulate":{"id":"Accumulate","inputs":{"count":{"mode":"required","type":"any"},"val":{"mode":"optional","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"reactiveInputs":["val"],"fnCode":"const {count, val} = inputs;\\nconst {r} = outputs;\\n\\nconst {state} = adv;\\n\\nlet list = state.get(\\"list\\") || [];\\n\\nif (count !== state.get(\\"count\\")) {\\n    list = [];\\n    state.set(\\"count\\", count);\\n}\\n\\nif (isDefined(val)) {\\n    list.push(val);\\n}\\n\\n\\nstate.set(\\"list\\", list);\\n\\nif (list.length === state.get(\\"count\\")) {\\n    r.next(list);\\n}"},"AccumulateSome":{"id":"AccumulateSome","inputs":{"count":{"mode":"required","type":"any"},"allow":{"mode":"optional","type":"any"},"filter":{"mode":"optional","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"reactiveInputs":["allow","filter"],"fnCode":"const {count, allow, filter} = inputs;\\nconst {r} = outputs;\\n\\nconst {state} = adv;\\n\\nlet allowedList = state.get(\\"allowed-list\\") || [];\\nlet filterList = state.get(\\"filter-list\\") || [];\\n\\nif (count !== state.get(\\"count\\")) {\\n    state.set(\\"count\\", count);\\n}\\n\\nif (isDefined(allow)) {\\n    allowedList.push(allow);\\n}\\n\\nif (isDefined(filter)) {\\n    filterList.push(filter);\\n}\\n\\nstate.set(\\"allowed-list\\", allowedList);\\nstate.set(\\"filter-list\\", filterList);\\n\\nif (allowedList.length + filterList.length === state.get(\\"count\\")) {\\n    r.next(allowedList);\\n}\\n"},"AccumulateUntil":{"id":"AccumulateUntil","inputs":{"item":{"mode":"optional","type":"any"},"until":{"mode":"optional","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"reactiveInputs":["item","until"],"fnCode":"// magic here\\nconst {item, until} = inputs;\\nconst {r} = outputs;\\nconst {state} = adv;\\n\\nlet list = state.get(\\"list\\") || [];\\n\\n    if (isDefined(item)) {\\n      list.push(item);\\n      state.set(\\"list\\", list);\\n    }\\n\\n    if (isDefined(until)) {\\n      r.next(list);\\n    }"},"AccumulateUntilTime":{"id":"AccumulateUntilTime","inputs":{"time":{"mode":"required","type":"any"},"item":{"mode":"optional","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"reactiveInputs":["item"],"fnCode":"const {item, time} = inputs;\\nconst {r} = outputs;\\nconst {state} = adv;\\n\\n\\nlet list = state.get(\\"list\\") || [];\\nif (isDefined(item)) {\\n  list.push(item);\\n  state.set(\\"list\\", list);\\n\\n  const timer = state.get(\\"timer\\");\\n  \\n  if (timer) {\\n    clearTimeout(timer);\\n  } \\n  \\n  const newTimer = setTimeout(() => {\\n      r.next(state.get(\\"list\\") || []);\\n  }, time);\\n  \\n  state.set(\\"timer\\", newTimer)\\n}\\n\\n\\n"},"Add":{"id":"Add","inputs":{"n1":{"mode":"required","type":"any"},"n2":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const {n1, n2} = inputs;\\nconst {r} = outputs;\\n\\nlog({n1, n2})\\nr.next( n1 + n2 );"},"CollectionCountDocuments":{"id":"CollectionCountDocuments","inputs":{"options":{"mode":"optional","type":"any"},"collectionName":{"mode":"required","type":"any"},"filter":{"mode":"required","type":"any"},"":{"mode":"optional","type":"any"}},"outputs":{"count":{"type":"any"}},"completionOutputs":["count"],"fnCode":"// magic here\\nmongoDb\\n    .collection(inputs.collectionName)\\n    .countDocuments(inputs.filter, inputs.options)\\n    .then((count) => {\\n        outputs.count.next(count);\\n    });"},"CollectionDeleteOne":{"id":"CollectionDeleteOne","inputs":{"collectionName":{"mode":"required","type":"any"},"filter":{"mode":"required","type":"any"},"options":{"mode":"optional","type":"any"}},"outputs":{"result":{"type":"any"}},"completionOutputs":["result"],"fnCode":"mongoDb.collection(inputs.collectionName)\\n    .deleteOne(inputs.filter, inputs.options)\\n    .then(res => {\\n        outputs.result.next(res);\\n    })\\n    .catch((e) => adv.onError(e));"},"CollectionFind":{"id":"CollectionFind","inputs":{"options":{"mode":"optional","type":"any"},"collectionName":{"mode":"required","type":"any"},"filter":{"mode":"required","type":"any"}},"outputs":{"items":{"type":"any"}},"completionOutputs":["items"],"fnCode":"// magic here\\nmongoDb\\n    .collection(inputs.collectionName)\\n    .find(inputs.filter, inputs.options)\\n    .toArray()\\n    .then((doc) => {\\n        outputs.items.next(doc);\\n    })\\n    .catch((e) => adv.onError(e))"},"CollectionFindOne":{"id":"CollectionFindOne","inputs":{"collectionName":{"mode":"required","type":"any"},"filter":{"mode":"required","type":"any"},"options":{"mode":"optional","type":"any"}},"outputs":{"item":{"type":"any"}},"completionOutputs":["item"],"fnCode":"mongoDb.collection(inputs.collectionName)\\n    .findOne(inputs.filter, inputs.options)\\n    .then(res => {\\n        if (res === null) {\\n            adv.onError(new Error(\'not found\'));\\n        } else {\\n            outputs.item.next(res);\\n        }\\n    })\\n    .catch((e) => adv.onError(e));"},"CollectionFindOneAndUpdate":{"id":"CollectionFindOneAndUpdate","inputs":{"options":{"mode":"optional","type":"any"},"collectionName":{"mode":"required","type":"any"},"filter":{"mode":"required","type":"any"},"update":{"mode":"required","type":"any"}},"outputs":{"updatedItem":{"type":"any"}},"completionOutputs":["updatedItem"],"fnCode":"// magic here\\nconst options = inputs.options || {returnDocument: \'after\'};\\nmongoDb\\n    .collection(inputs.collectionName)\\n    .findOneAndUpdate(inputs.filter, inputs.update, options)\\n    .then((doc) => {\\n        outputs.updatedItem.next(doc);\\n    });"},"CollectionInsertOne":{"id":"CollectionInsertOne","inputs":{"collectionName":{"mode":"required","type":"any"},"item":{"mode":"required","type":"any"}},"outputs":{"success":{"type":"any"}},"completionOutputs":["success"],"fnCode":"// magic here\\nmongoDb.collection(inputs.collectionName)\\n    .insertOne(inputs.item)\\n    .then(res => outputs.success.next({...inputs.item, _id: res.insertedId}))\\n    .catch((e) => adv.onError(e));\\n"},"concat":{"id":"concat","inputs":{"a":{"mode":"required","type":"any"},"b":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"object"}},"completionOutputs":["r"],"fnCode":"\\n          let val = \'\\"${a}${b}\\"\';\\n\\n          Object.keys(inputs).forEach((key) => {\\n\\n            const _inpVal = inputs[key]; \\n            const inpVal = typeof _inpVal === \'object\' ? JSON.stringify(_inpVal) : _inpVal;\\n\\n            val = val\\n              .replace(\'${\' + key + \'}\', inpVal)\\n              .replace(\'${\' + key + \'}\', inpVal)\\n              .replace(\'${\' + key + \'}\', inpVal) // todo - support more than 3 instances in a nicer way\\n          })\\n          outputs.r.next(JSON.parse(val));"},"Cuid":{"id":"Cuid","inputs":{"trigger":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"// magic here\\noutputs.r.next(cuid());"},"DbCount":{"id":"DbCount","inputs":{"query":{"mode":"required","type":"any"}},"outputs":{"count":{"type":"any"}},"completionOutputs":["count"],"fnCode":"// magic here\\nconst {query} = inputs;\\n\\nconst {onError} = adv;\\n\\ndb.count(query)\\n    .then(d => outputs.count.next(d))\\n    .catch(err => {\\n        onError(err);\\n    });\\n"},"DbFind":{"id":"DbFind","inputs":{"query":{"mode":"required","type":"any"},"sort":{"mode":"required-if-connected","type":"any"},"limit":{"mode":"required-if-connected","type":"any"},"skip":{"mode":"required-if-connected","type":"any"}},"outputs":{"res":{"type":"any"},"err":{"type":"any"}},"fnCode":"// magic here\\nconst {query, sort, limit, skip} = inputs;\\ndb.find(query, sort || {}, Math.min(limit, 1000), {}, skip)\\n    .then(d => outputs.res.next(d))\\n    .catch(err => outputs.err.next(err.toString()));\\n"},"DbFindOne":{"id":"DbFindOne","inputs":{"query":{"mode":"required","type":"any"}},"outputs":{"res":{"type":"any"}},"completionOutputs":["res"],"fnCode":"// magic here\\ndb.findOne(inputs.query)\\n    .then((doc) => {\\n        if (isDefined(doc)) {\\n            outputs.res.next(doc)\\n        } else {\\n            adv.onError(\'Not found\');\\n        }\\n    })\\n    .catch((err) => adv.onError(err))"},"DbInsert":{"id":"DbInsert","inputs":{"doc":{"mode":"required","type":"any"}},"outputs":{"ok":{"type":"any"},"err":{"type":"any"}},"fnCode":"// magic here\\nlog(\'Going to insert doc\')\\nconst {onError} = adv;\\n\\ndb.insert(inputs.doc)\\n    .then((doc) => {\\n        log(\'Inserted doc\')\\n        outputs.ok.next(doc)\\n    }, (err) => {\\n        log(\'Failed to insert doc\')\\n        outputs.err.next(err);\\n        onError(err);\\n    });\\n"},"DbRemove":{"id":"DbRemove","inputs":{"query":{"mode":"required","type":"any"},"options":{"mode":"required-if-connected","type":"any"}},"outputs":{"ok":{"type":"any"},"err":{"type":"any"}},"fnCode":"// magic here\\nconst {query, options} = inputs;\\nconst {onError} = adv;\\n\\ndb.remove(query, isDefined(options) ? options : {})\\n.then((num) => outputs.ok.next(num))\\n.catch((err) => {\\n    outputs.err.next(err)\\n    onError(err);\\n});\\n\\n"},"DbUpdate":{"id":"DbUpdate","inputs":{"query":{"mode":"required","type":"any"},"update":{"mode":"required","type":"any"},"options":{"mode":"optional","type":"any"}},"outputs":{"ok":{"type":"any"},"err":{"type":"any"}},"fnCode":"// magic here\\nconst {query, update, options} = inputs;\\nconst {ok, err} = outputs;\\ndb.update(query, update, options)\\n    .then((doc) => ok.next(doc))\\n    .catch((e) => err.next(e));"},"Debounce":{"id":"Debounce","inputs":{"i":{"mode":"required","type":"any"},"ms":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"customViewCode":"","completionOutputs":["r"],"reactiveInputs":["i"],"fnCode":"const { i, ms } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nconst timer = adv.state.get(\\"timer\\");\\n  if (timer) {\\n    clearTimeout(timer);\\n  }\\n\\n  const newTimer = setTimeout(() => {\\n    r.next(i);\\n  }, ms);\\n\\n  adv.state.set(\\"timer\\", newTimer);\\n\\n  adv.onCleanup(() => {\\n    clearTimeout(timer);\\n  })"},"Delay":{"id":"Delay","inputs":{"value":{"mode":"required","type":"any"},"ms":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"customViewCode":"","completionOutputs":["r"],"fnCode":"// magic here\\nconst {value, ms} = inputs;\\n const timer = setTimeout(() => {\\n    outputs.r.next(value);\\n}, ms);\\n\\nadv.onCleanup(() => clearTimeout(timer));"},"Delay2":{"id":"Delay2","inputs":{"value":{"mode":"required","type":"any"},"ms":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"customViewCode":"","completionOutputs":["r"],"fnCode":"// magic here\\nconst {value, ms} = inputs;\\n const timer = setTimeout(() => {\\n    outputs.r.next(value);\\n}, ms);\\n\\nadv.onCleanup(() => clearTimeout(timer));"},"Divide":{"id":"Divide","inputs":{"n1":{"mode":"required","type":"any"},"n2":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"},"divByZero":{"type":"any"}},"fnCode":"const { n1, n2 } = inputs;\\nconst { r, divByZero } = outputs;\\n      \\nif (n2 === 0) {\\n      divByZero.next(n1);\\n} else {\\n      r.next(n1 / n2);\\n}\\n      "},"Dot":{"id":"Dot","inputs":{"obj":{"mode":"required","type":"any"},"key":{"mode":"required","type":"any"}},"outputs":{"value":{"type":"any"}},"customViewCode":"<% if (inputs.key) { %> .<%- inputs.key %> <% } else { %> Dot <% } %>","completionOutputs":["value"],"fnCode":"const { obj, key } = inputs;\\nconst { value } = outputs;\\n\\n// magic here\\n\\nlet hadError = false;\\n\\nconst matches = {};\\n\\nconst normalized = key.replace(/\\\\[\\"(([^\\"])+)\\"\\\\]/g, (match, p1, p2, offset) => {\\n  const key = `__$$KEY$$__${offset}`;\\n  matches[key] = p1;\\n  return `.${key}`;\\n});\\n\\nconst path = normalized.split(\\".\\");\\nlet o = { ...obj };\\nfor (let p of path) {\\n  const key = matches[p] || p;\\n  if (o && isDefined(o[key]) && o[key] !== null) {\\n    o = o[key];\\n  } else {\\n    value.next(null);\\n    hadError = true;\\n  }\\n}\\n\\nif (!hadError) {\\n  value.next(o);\\n}\\n"},"EachMs":{"id":"EachMs","inputs":{"ms":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["never"],"fnCode":"const { ms } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nconst s = setInterval(() => {\\n    r.next();\\n}, ms);\\n\\nadv.onCleanup(() => {\\n    clearInterval(s);\\n})        "},"EmptyList":{"id":"EmptyList","inputs":{},"outputs":{"list":{"type":"any"}},"completionOutputs":["list"],"fnCode":"// magic here\\noutputs.list.next(\\n    []\\n);"},"EmptyObject":{"id":"EmptyObject","inputs":{},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const {  } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nr.next({});"},"epochToString":{"id":"epochToString","inputs":{"epoch":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"// magic here\\n\\nconst d = new Date(inputs.epoch);\\noutputs.r.next(d.toLocaleString());"},"Equals":{"id":"Equals","inputs":{"val":{"mode":"required","type":"any"},"compare":{"mode":"required","type":"any"},"transform":{"mode":"required-if-connected","type":"any"}},"outputs":{"r":{"type":"any"},"else":{"type":"any"}},"customViewCode":"<% if (inputs.compare) { %>Equals <%- inputs.compare %> <% } else { %> Equals <% } %>","completionOutputs":["r","else"],"fnCode":"const { val, compare, transform } = inputs;\\nconst { r } = outputs;\\n\\nconst valueToPush = isDefined(transform) ? transform : val;\\n        \\n// magic here\\nif (val === compare) {\\n    r.next(valueToPush);\\n}  else {\\n    outputs[\'else\'].next(valueToPush);\\n}"},"FirstSecondOnlyRest":{"id":"FirstSecondOnlyRest","inputs":{"list":{"mode":"required","type":"any"}},"outputs":{"i0":{"type":"any"},"i1":{"type":"any"},"rest":{"type":"any"}},"fnCode":"const { list } = inputs;\\nconst { i0, i1, rest } = outputs;\\n      \\nconst [_i0, _i1, ...r] = list;\\n\\n[i0, i1].forEach((o, idx) => {\\n    if (typeof list[idx] !== \'undefined\') {\\n        o.next(list[idx]);\\n    }\\n});\\n\\nr.length && rest.next(r)\\n      "},"FirstSecondRest":{"id":"FirstSecondRest","inputs":{"list":{"mode":"required","type":"any"}},"outputs":{"i0":{"type":"any"},"i1":{"type":"any"},"i2":{"type":"any"},"i3":{"type":"any"},"i4":{"type":"any"},"rest":{"type":"any"}},"fnCode":"const { list } = inputs;\\nconst { i0, i1, i2, i3, i4, rest } = outputs;\\n      \\nconst [_i0, _i1, _i2, _i3, _i4, _i5, ...r] = list;\\n\\n[i0, i1, i2, i3, i4].forEach((o, idx) => {\\n    if (typeof list[idx] !== \'undefined\') {\\n        o.next(list[idx]);\\n    }\\n});\\n\\nr.length && rest.next(r)\\n      "},"FlattenArray":{"id":"FlattenArray","inputs":{"arrayOfArrays":{"mode":"required","type":"any"},"depth":{"mode":"required-if-connected","type":"any"}},"outputs":{"array":{"type":"any"}},"completionOutputs":["array"],"fnCode":"// magic here\\n\\nconst flattened = inputs.arrayOfArrays.flat(inputs.depth || 1);\\noutputs.array.next(flattened);"},"Floor":{"id":"Floor","inputs":{"n":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { n } = inputs;\\nconst { r } = outputs;\\n      \\nr.next(Math.floor(n));\\n      "},"FormatMessage":{"id":"FormatMessage","inputs":{"template":{"mode":"required","type":"any"},"var1":{"mode":"required","type":"any"},"var2":{"mode":"required-if-connected","type":"any"},"var3":{"mode":"required-if-connected","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { template, var1, var2, var3 } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\n const replaced = template\\n    .replace(\\"$VAL3\\", var3)\\n    .replace(\\"$VAL2\\", var2)\\n    .replace(\\"$VAL\\", var1)\\n    .replace(\\"$VAR3\\", var3)\\n    .replace(\\"$VAR2\\", var2)\\n    .replace(\\"$VAR\\", var1);\\nr.next(replaced);"},"FormatModel":{"id":"FormatModel","inputs":{"template":{"mode":"required","type":"any"},"model":{"mode":"required","type":"any"},"model2":{"mode":"required-if-connected","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { template, model, model2 } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nconst combined = { ...model, ...(model2 || {}) };\\n  const find = (_, key) => {\\n    const path = key.split(\\".\\");\\n    let o = { ...combined };\\n    for (let p of path) {\\n      if (o && o[p]) {\\n        o = o[p];\\n      } else {\\n        return key;\\n      }\\n    }\\n    return o;\\n  };\\n\\nconst replaced = template\\n  .replace(/\\\\$\\\\{([a-zA-Z \\\\d\\\\.]*)\\\\}/g, find)\\n  .replace(/<%=([a-zA-Z \\\\d\\\\.]*)%>/g, find);\\n\\nr.next(replaced);"},"GetItem":{"id":"GetItem","inputs":{"key":{"mode":"required","type":"any"},"defaultValue":{"mode":"required-if-connected","type":"any"}},"outputs":{"ok":{"type":"any"}},"completionOutputs":["ok"],"fnCode":"// magic here\\nconst {ok, err} = outputs;\\nconst {key, defaultValue} = inputs;\\nconst {onError} = adv;\\n\\nmongoDb.collection(\'__KVStore\').findOne({id: key})\\n    .then((doc) => {\\n        if (doc === null) {\\n            if (isDefined(defaultValue)) {\\n                ok.next(defaultValue);\\n            } else {\\n                onError(new Error(\'Key not found and no default value\'));\\n            }\\n        } else {\\n            ok.next(doc.value);\\n        }\\n    })\\n    .catch((e) => {\\n        onError(e);\\n    });"},"GetListItem":{"id":"GetListItem","inputs":{"list":{"mode":"required","type":"any"},"idx":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"// magic here\\noutputs.r.next(inputs.list[inputs.idx]);"},"GetState":{"id":"GetState","inputs":{"key":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"},"err":{"type":"any"}},"fnCode":"const {state} = adv;\\nconst {key} = inputs;\\nconst {r, err} = outputs;\\n\\nconst val = state.get(key);\\nif (isDefined(val)) {\\n    r.next(val);\\n} else {\\n    err.next(key);\\n}\\n"},"HeadCSS":{"id":"HeadCSS","inputs":{"css":{"mode":"required","type":"any"},"key":{"mode":"optional","type":"any"}},"outputs":{},"fnCode":"try {\\n    const document = getDocument();\\n    const normKey = inputs.key || \\"default-css\\";\\n    const tag = document.createElement(\\"style\\");\\n    tag.innerHTML = inputs.css;\\n    tag.id = normKey;\\n    \\n    const existing = document.getElementById(normKey);\\n    if (existing) {\\n      existing.remove();\\n    }\\n    document.head.appendChild(tag);\\n} catch (e) {\\n    log(`Unable to run head css part`, e);\\n}"},"HtmlTag":{"id":"HtmlTag","inputs":{"id":{"mode":"required-if-connected","type":"any"},"style":{"mode":"required-if-connected","type":"any"},"className":{"mode":"required-if-connected","type":"any"},"tagName":{"mode":"required","type":"any"},"extra":{"mode":"required-if-connected","type":"any"},"children":{"mode":"required-if-connected","type":"any"}},"outputs":{"jsx":{"type":"any"},"click":{"type":"any"}},"fnCode":"// magic here\\nconst props = {\\n    className: inputs.className,\\n    id: inputs.id,\\n    style: inputs.style\\n}\\n\\nconst onClick = outputs.click ? (e) => outputs.click.next(e) : undefined;\\nconst comp = React.createElement(inputs.tagName, {\\n    ...props,\\n    ...(inputs.extra || {}),\\n    onClick\\n}, inputs.children);\\n\\noutputs.jsx.next(comp);"},"HtmlValueTag":{"id":"HtmlValueTag","inputs":{"id":{"mode":"required-if-connected","type":"any"},"style":{"mode":"required-if-connected","type":"any"},"className":{"mode":"required-if-connected","type":"any"},"tagName":{"mode":"required","type":"any"},"extra":{"mode":"required-if-connected","type":"any"},"children":{"mode":"required-if-connected","type":"any"},"value":{"mode":"required-if-connected","type":"any"},"placeholder":{"mode":"required-if-connected","type":"any"}},"outputs":{"jsx":{"type":"any"},"click":{"type":"any"},"change":{"type":"any"}},"fnCode":"// magic here\\nconst props = {\\n    className: inputs.className,\\n    id: inputs.id,\\n    style: inputs.style\\n}\\n\\nconst onClick = outputs.click ? (e) => outputs.click.next(e) : undefined;\\nconst onChange = outputs.change ? (e) => outputs.change.next(e.target.value) : undefined;\\nconst comp = React.createElement(inputs.tagName, {\\n    ...props,\\n    ...(inputs.extra || {}),\\n    onClick,\\n    onChange\\n}, inputs.children);\\n\\noutputs.jsx.next(comp);"},"HttpGet":{"id":"HttpGet","inputs":{"url":{"mode":"required","type":"any"},"headers":{"mode":"required-if-connected","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { url, headers } = inputs;\\nconst { r, error } = outputs;\\n\\nconst {onError} = adv;\\n        \\n// magic here\\naxios.get(url, { headers, timeout: DEFAULT_AXIOS_TIMEOUT }).then((res) => {\\n    r.next(res.data);\\n}, (err) => {\\n    onError(err);\\n});"},"HttpPost":{"id":"HttpPost","inputs":{"url":{"mode":"required","type":"any"},"body":{"mode":"required","type":"any"},"headers":{"mode":"required-if-connected","type":"any"},"bodyType":{"mode":"required-if-connected","type":"any"}},"outputs":{"r":{"type":"any"},"e":{"type":"any"}},"fnCode":"const { url, body, headers, bodyType } = inputs;\\nconst { r, e } = outputs;\\n\\nconst {onError} = adv;\\n\\nconst config = {\\n    headers,\\n    timeout: DEFAULT_AXIOS_TIMEOUT\\n}\\n        \\n// magic here\\nif (bodyType === \\"form\\") {\\n    const parts = [];\\n    Object.keys(body).forEach((key) => {\\n      parts.push(`${key}=${encodeURIComponent(body[key])}`);\\n    });\\n    axios.post(url, parts.join(\\"&\\"), config).then(\\n      (res) => {\\n        r.next(res.data);\\n      },\\n      (err) => {\\n        const {response, message} = err;\\n        const errorObj = response ? {data:response.data, status: response.status} : {data: message, status: -1};\\n        e.next(errorObj)\\n        onError(errorObj);\\n      }\\n    );\\n  } else {\\n    axios.post(url, body, config).then(\\n      (res) => {\\n        r.next(res.data);\\n      },\\n      (err) => {\\n        const {response, message} = err;\\n        const errorObj = response ? {data:response.data, status: response.status} : {data: message, status: -1};\\n        e.next(errorObj)\\n        onError(errorObj);\\n      }\\n    );\\n  }"},"HttpRequest":{"id":"HttpRequest","inputs":{"url":{"mode":"required","type":"any"},"method":{"mode":"required","type":"any"},"headers":{"mode":"required-if-connected","type":"any"},"data":{"mode":"required-if-connected","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { url, headers, method, data } = inputs;\\nconst { r } = outputs;\\n\\nconst {onError} = adv;\\n        \\n// magic here\\naxios({ url, method, data, headers, timeout: DEFAULT_AXIOS_TIMEOUT }).then((res) => {\\n    r.next(res.data);\\n}, (err) => {\\n    onError(err);\\n});"},"Id":{"id":"Id","inputs":{"v":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"object"}},"customViewCode":"","completionOutputs":["r"],"fnCode":"outputs.r.next(inputs.v)"},"IndexOf":{"id":"IndexOf","inputs":{"str":{"mode":"required","type":"any"},"char":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"},"notFound":{"type":"any"}},"fnCode":"const { str, char } = inputs;\\nconst { r, notFound } = outputs;\\n        \\n// magic here\\nconst i = str.indexOf(char);\\nif (i !== -1) {\\n    r.next(str.indexOf(char));\\n} else {\\n    notFound.next(str);\\n}  "},"IsEmpty":{"id":"IsEmpty","inputs":{"str":{"mode":"required","type":"any"}},"outputs":{"true":{"type":"any"},"false":{"type":"any"}},"fnCode":"const { str } = inputs;\\n        \\n// magic here\\nif (str === \\"\\") {\\n    outputs.true.next(str);\\n} else {\\n    outputs.false.next(str);\\n}"},"IsGreater bool ":{"id":"IsGreater bool ","inputs":{"n1":{"mode":"required","type":"any"},"n2":{"mode":"required","type":"any"},"transform":{"mode":"required-if-connected","type":"any"}},"outputs":{"result":{"type":"any"}},"customViewCode":"<% if (inputs.n2) { %>  > <%- inputs.n2 %> <% } else { %> Is Greater <% } %>","fnCode":"const { n1, n2, transform} = inputs;\\n\\n\\noutputs.result.next(n1 > n2);\\n      "},"IsGreater":{"id":"IsGreater","inputs":{"n1":{"mode":"required","type":"any"},"n2":{"mode":"required","type":"any"},"transform":{"mode":"required-if-connected","type":"any"}},"outputs":{"true":{"type":"any"},"false":{"type":"any"}},"customViewCode":"<% if (inputs.n2) { %>  > <%- inputs.n2 %> <% } else { %> Is Greater <% } %>","fnCode":"const { n1, n2, transform} = inputs;\\n\\n\\n      \\nif (n1 > n2) {\\n      outputs.true.next(isDefined(transform) ? transform : n1);\\n} else {\\n      outputs.false.next(isDefined(transform) ? transform : n2);\\n}\\n// magic here\\n      "},"isLess bool":{"id":"isLess bool","inputs":{"n1":{"mode":"required","type":"any"},"n2":{"mode":"required","type":"any"},"transform":{"mode":"required-if-connected","type":"any"}},"outputs":{"result":{"type":"any"}},"customViewCode":"<% if (inputs.n2) { %>  < <%- inputs.n2 %> <% } else { %> Is Less <% } %>","fnCode":"const { n1, n2, transform} = inputs;\\n\\n\\noutputs.result.next(n1 < n2);\\n      "},"isLess":{"id":"isLess","inputs":{"n1":{"mode":"required","type":"any"},"n2":{"mode":"required","type":"any"}},"outputs":{"true":{"type":"any"},"false":{"type":"any"}},"customViewCode":"","completionOutputs":["true","false"],"fnCode":"const { n1, n2 } = inputs;\\n      \\nif (n1 < n2) {\\n      outputs.true.next(n1);\\n} else {\\n      outputs.false.next(n1);\\n}\\n// magic here\\n      "},"isPropertyGreater":{"id":"isPropertyGreater","inputs":{"obj":{"mode":"required","type":"any"},"key":{"mode":"required","type":"any"},"value":{"mode":"required","type":"any"}},"outputs":{"true":{"type":"any"},"false":{"type":"any"}},"customViewCode":"<% if (inputs.key && inputs.value) { %>  .<%- inputs.key %> > <%- inputs.value %> <% } else { %> Is Property Greater <% } %>","fnCode":"const objVal = inputs.obj[inputs.key];\\n\\nif (objVal > inputs.value) {\\n    outputs.true.next(inputs.obj)\\n} else {\\n    outputs.false.next(inputs.obj)\\n}"},"LimitTimes":{"id":"LimitTimes","inputs":{"item":{"mode":"required","type":"any"},"times":{"mode":"required","type":"any"}},"outputs":{"ok":{"type":"any"},"breach":{"type":"any"}},"completionOutputs":["breach"],"reactiveInputs":["item"],"fnCode":"// magic here\\nconst {state} = adv;\\nconst {item, times} = inputs;\\nconst {ok, breach} = outputs;\\n\\nlet curr = state.get(\'val\') || 0;\\ncurr++;\\nstate.set(\'val\', curr);\\nif (curr >= times) {\\n    breach.next(item);\\n} else {\\n    ok.next(item);\\n}\\n"},"ListAppend":{"id":"ListAppend","inputs":{"list":{"mode":"required","type":"any"},"item":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"// magic here// magic here\\noutputs.r.next(\\n    [...inputs.list, inputs.item]\\n);"},"ListConcat2":{"id":"ListConcat2","inputs":{"list1":{"mode":"required","type":"any"},"list2":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"// magic here\\nconst {list1, list2} = inputs;\\noutputs.r.next(list1.concat(list2));"},"ListFilter":{"id":"ListFilter","inputs":{"list":{"mode":"required","type":"any"},"fn":{"mode":"required","type":"part({\\"item\\": \\"any\\", \\"idx?\\": \\"any\\"}|{\\"allow\\": \\"any\\", \\"block\\": \\"any\\"})"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const o = outputs;\\nconst {list, fn} = inputs;\\n\\nconst allowSet = new Set();\\nconst blockSet = new Set();\\nconst newList = [];\\n\\nconst uns = [];\\n\\nconst maybeSendNewList = () => {\\n  if (allowSet.size + blockSet.size === list.length) {\\n    o.r.next(newList.filter((item) => item !== undefined));\\n  }\\n};\\n\\nlist.forEach((item, idx) => {\\n  const itemInput = dynamicPartInput();\\n  const idxInput = dynamicPartInput();\\n  const outputs = Object.keys(fn.outputs).reduce(\\n    (p, k) => ({ ...p, [k]: dynamicOutput() }),\\n    {}\\n  );\\n  outputs.allow.subscribe(() => {\\n    newList.push(item);\\n    allowSet.add(idx);\\n    maybeSendNewList();\\n  });\\n\\n  outputs.block.subscribe(() => {\\n    blockSet.add(idx);\\n    maybeSendNewList();\\n  });\\n\\n  Object.keys(outputs)\\n    .filter((k) => k !== \\"allow\\" && k !== \\"block\\")\\n    .forEach((k) => {\\n      outputs[k].subscribe(() => {\\n        o.rs.next({ key: k, v: item, idx });\\n      });\\n    });\\n  const clean = adv.execute(\\n    fn,\\n    { item: itemInput, idx: idxInput },\\n    outputs,\\n    `${adv.insId}-fn`\\n  );\\n\\n  idxInput.subject.next(idx);\\n  itemInput.subject.next(item);\\n  uns.push(clean);\\n});\\n\\nadv.onCleanup(() => {\\n  uns.forEach((fn) => fn());\\n});\\n"},"ListFrom2":{"id":"ListFrom2","inputs":{"item1":{"mode":"required","type":"any"},"item2":{"mode":"required","type":"any"}},"outputs":{"list":{"type":"any"}},"completionOutputs":["list"],"fnCode":"// magic here\\noutputs.list.next(\\n    [\\n        inputs.item1,\\n        inputs.item2\\n    ]\\n);"},"ListFrom3":{"id":"ListFrom3","inputs":{"item1":{"mode":"required","type":"any"},"item2":{"mode":"required","type":"any"},"item3":{"mode":"required","type":"any"}},"outputs":{"list":{"type":"any"}},"completionOutputs":["list"],"fnCode":"// magic here\\noutputs.list.next(\\n    [\\n        inputs.item1,\\n        inputs.item2,\\n        inputs.item3\\n    ]\\n);"},"ListFromStr":{"id":"ListFromStr","inputs":{"count":{"mode":"required","type":"any"},"char":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"// magic here\\n\\noutputs\\n    .r\\n    .next(new Array(inputs.count).fill(inputs.char));"},"ListJoin":{"id":"ListJoin","inputs":{"list":{"mode":"required","type":"any"},"delimiter":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { list, delimiter } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nr.next(list.join(delimiter));"},"ListLength":{"id":"ListLength","inputs":{"list":{"mode":"required","type":"any"}},"outputs":{"length":{"type":"any"}},"completionOutputs":["length"],"fnCode":"// magic here\\noutputs.length.next(inputs.list.length);"},"ListMap":{"id":"ListMap","inputs":{"list":{"mode":"required","type":"any"},"fn":{"mode":"required","type":"part({\\"item?\\": \\"any\\", \\"idx?\\": \\"any\\"}|{\\"r\\": \\"any\\", \\"rs\\": \\"any\\"})"}},"outputs":{"r":{"type":"any"},"rs":{"type":"any"}},"fnCode":"let newList = [];\\n\\nconst { list, fn} = inputs;\\nconst o = outputs;\\n\\nlet received = new Set();\\n\\nconst cleanUps = [];\\n\\nlist.forEach((item, idx) => {\\n  const itemInput = dynamicPartInput();\\n  const idxInput = dynamicPartInput();\\n  const mainOutput = dynamicOutput();\\n  const sideOutput = dynamicOutput();\\n  mainOutput.subscribe((receivedItem) => {\\n    newList[idx] = receivedItem;\\n    received.add(idx);\\n    if (received.size === list.length) {\\n      o.r.next(newList);\\n    }\\n  });\\n\\n  sideOutput.subscribe((v) => {\\n    o.rs.next(v);\\n  });\\n\\n  const clean = adv.execute(\\n    fn,\\n    { item: itemInput, idx: idxInput },\\n    { r: mainOutput, rs: sideOutput },\\n    `${adv.insId}-fn`\\n  );\\n\\n  cleanUps.push(clean);\\n\\n  itemInput.subject.next(item);\\n  idxInput.subject.next(idx);\\n});\\n\\nif (list.length === 0) {\\n  o.r.next(list);\\n}\\n\\nadv.onCleanup(() => {\\n  cleanUps.forEach((fn) => fn());\\n});\\n"},"ListPrepend":{"id":"ListPrepend","inputs":{"list":{"mode":"required","type":"any"},"item":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"// magic here// magic here\\noutputs.r.next(\\n    [inputs.item, ...inputs.list]\\n);"},"MathMin":{"id":"MathMin","inputs":{"n1":{"mode":"required","type":"any"},"n2":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { n1, n2 } = inputs;\\n      \\noutputs.r.next(Math.min(n1, n2));\\n// magic here\\n      "},"MD5HashString":{"id":"MD5HashString","inputs":{"str":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"function md5cycle(x, k) {\\n  var a = x[0],\\n    b = x[1],\\n    c = x[2],\\n    d = x[3];\\n\\n  a = ff(a, b, c, d, k[0], 7, -680876936);\\n  d = ff(d, a, b, c, k[1], 12, -389564586);\\n  c = ff(c, d, a, b, k[2], 17, 606105819);\\n  b = ff(b, c, d, a, k[3], 22, -1044525330);\\n  a = ff(a, b, c, d, k[4], 7, -176418897);\\n  d = ff(d, a, b, c, k[5], 12, 1200080426);\\n  c = ff(c, d, a, b, k[6], 17, -1473231341);\\n  b = ff(b, c, d, a, k[7], 22, -45705983);\\n  a = ff(a, b, c, d, k[8], 7, 1770035416);\\n  d = ff(d, a, b, c, k[9], 12, -1958414417);\\n  c = ff(c, d, a, b, k[10], 17, -42063);\\n  b = ff(b, c, d, a, k[11], 22, -1990404162);\\n  a = ff(a, b, c, d, k[12], 7, 1804603682);\\n  d = ff(d, a, b, c, k[13], 12, -40341101);\\n  c = ff(c, d, a, b, k[14], 17, -1502002290);\\n  b = ff(b, c, d, a, k[15], 22, 1236535329);\\n\\n  a = gg(a, b, c, d, k[1], 5, -165796510);\\n  d = gg(d, a, b, c, k[6], 9, -1069501632);\\n  c = gg(c, d, a, b, k[11], 14, 643717713);\\n  b = gg(b, c, d, a, k[0], 20, -373897302);\\n  a = gg(a, b, c, d, k[5], 5, -701558691);\\n  d = gg(d, a, b, c, k[10], 9, 38016083);\\n  c = gg(c, d, a, b, k[15], 14, -660478335);\\n  b = gg(b, c, d, a, k[4], 20, -405537848);\\n  a = gg(a, b, c, d, k[9], 5, 568446438);\\n  d = gg(d, a, b, c, k[14], 9, -1019803690);\\n  c = gg(c, d, a, b, k[3], 14, -187363961);\\n  b = gg(b, c, d, a, k[8], 20, 1163531501);\\n  a = gg(a, b, c, d, k[13], 5, -1444681467);\\n  d = gg(d, a, b, c, k[2], 9, -51403784);\\n  c = gg(c, d, a, b, k[7], 14, 1735328473);\\n  b = gg(b, c, d, a, k[12], 20, -1926607734);\\n\\n  a = hh(a, b, c, d, k[5], 4, -378558);\\n  d = hh(d, a, b, c, k[8], 11, -2022574463);\\n  c = hh(c, d, a, b, k[11], 16, 1839030562);\\n  b = hh(b, c, d, a, k[14], 23, -35309556);\\n  a = hh(a, b, c, d, k[1], 4, -1530992060);\\n  d = hh(d, a, b, c, k[4], 11, 1272893353);\\n  c = hh(c, d, a, b, k[7], 16, -155497632);\\n  b = hh(b, c, d, a, k[10], 23, -1094730640);\\n  a = hh(a, b, c, d, k[13], 4, 681279174);\\n  d = hh(d, a, b, c, k[0], 11, -358537222);\\n  c = hh(c, d, a, b, k[3], 16, -722521979);\\n  b = hh(b, c, d, a, k[6], 23, 76029189);\\n  a = hh(a, b, c, d, k[9], 4, -640364487);\\n  d = hh(d, a, b, c, k[12], 11, -421815835);\\n  c = hh(c, d, a, b, k[15], 16, 530742520);\\n  b = hh(b, c, d, a, k[2], 23, -995338651);\\n\\n  a = ii(a, b, c, d, k[0], 6, -198630844);\\n  d = ii(d, a, b, c, k[7], 10, 1126891415);\\n  c = ii(c, d, a, b, k[14], 15, -1416354905);\\n  b = ii(b, c, d, a, k[5], 21, -57434055);\\n  a = ii(a, b, c, d, k[12], 6, 1700485571);\\n  d = ii(d, a, b, c, k[3], 10, -1894986606);\\n  c = ii(c, d, a, b, k[10], 15, -1051523);\\n  b = ii(b, c, d, a, k[1], 21, -2054922799);\\n  a = ii(a, b, c, d, k[8], 6, 1873313359);\\n  d = ii(d, a, b, c, k[15], 10, -30611744);\\n  c = ii(c, d, a, b, k[6], 15, -1560198380);\\n  b = ii(b, c, d, a, k[13], 21, 1309151649);\\n  a = ii(a, b, c, d, k[4], 6, -145523070);\\n  d = ii(d, a, b, c, k[11], 10, -1120210379);\\n  c = ii(c, d, a, b, k[2], 15, 718787259);\\n  b = ii(b, c, d, a, k[9], 21, -343485551);\\n\\n  x[0] = add32(a, x[0]);\\n  x[1] = add32(b, x[1]);\\n  x[2] = add32(c, x[2]);\\n  x[3] = add32(d, x[3]);\\n}\\n\\nfunction cmn(q, a, b, x, s, t) {\\n  a = add32(add32(a, q), add32(x, t));\\n  return add32((a << s) | (a >>> (32 - s)), b);\\n}\\n\\nfunction ff(a, b, c, d, x, s, t) {\\n  return cmn((b & c) | (~b & d), a, b, x, s, t);\\n}\\n\\nfunction gg(a, b, c, d, x, s, t) {\\n  return cmn((b & d) | (c & ~d), a, b, x, s, t);\\n}\\n\\nfunction hh(a, b, c, d, x, s, t) {\\n  return cmn(b ^ c ^ d, a, b, x, s, t);\\n}\\n\\nfunction ii(a, b, c, d, x, s, t) {\\n  return cmn(c ^ (b | ~d), a, b, x, s, t);\\n}\\n\\nfunction md51(s) {\\n  txt = \\"\\";\\n  var n = s.length,\\n    state = [1732584193, -271733879, -1732584194, 271733878],\\n    i;\\n  for (i = 64; i <= s.length; i += 64) {\\n    md5cycle(state, md5blk(s.substring(i - 64, i)));\\n  }\\n  s = s.substring(i - 64);\\n  var tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\\n  for (i = 0; i < s.length; i++)\\n    tail[i >> 2] |= s.charCodeAt(i) << (i % 4 << 3);\\n  tail[i >> 2] |= 0x80 << (i % 4 << 3);\\n  if (i > 55) {\\n    md5cycle(state, tail);\\n    for (i = 0; i < 16; i++) tail[i] = 0;\\n  }\\n  tail[14] = n * 8;\\n  md5cycle(state, tail);\\n  return state;\\n}\\n\\n/* there needs to be support for Unicode here,\\n * unless we pretend that we can redefine the MD-5\\n * algorithm for multi-byte characters (perhaps\\n * by adding every four 16-bit characters and\\n * shortening the sum to 32 bits). Otherwise\\n * I suggest performing MD-5 as if every character\\n * was two bytes--e.g., 0040 0025 = @%--but then\\n * how will an ordinary MD-5 sum be matched?\\n * There is no way to standardize text to something\\n * like UTF-8 before transformation; speed cost is\\n * utterly prohibitive. The JavaScript standard\\n * itself needs to look at this: it should start\\n * providing access to strings as preformed UTF-8\\n * 8-bit unsigned value arrays.\\n */\\nfunction md5blk(s) {\\n  /* I figured global was faster.   */\\n  var md5blks = [],\\n    i; /* Andy King said do it this way. */\\n  for (i = 0; i < 64; i += 4) {\\n    md5blks[i >> 2] =\\n      s.charCodeAt(i) +\\n      (s.charCodeAt(i + 1) << 8) +\\n      (s.charCodeAt(i + 2) << 16) +\\n      (s.charCodeAt(i + 3) << 24);\\n  }\\n  return md5blks;\\n}\\n\\nvar hex_chr = \\"0123456789abcdef\\".split(\\"\\");\\n\\nfunction rhex(n) {\\n  var s = \\"\\",\\n    j = 0;\\n  for (; j < 4; j++)\\n    s += hex_chr[(n >> (j * 8 + 4)) & 0x0f] + hex_chr[(n >> (j * 8)) & 0x0f];\\n  return s;\\n}\\n\\nfunction hex(x) {\\n  for (var i = 0; i < x.length; i++) x[i] = rhex(x[i]);\\n  return x.join(\\"\\");\\n}\\n\\nfunction md5(s) {\\n  return hex(md51(s));\\n}\\n\\nfunction add32(a, b) {\\n  return (a + b) & 0xffffffff;\\n}\\n\\noutputs.r.next(md5(inputs.str));\\n"},"MergeObjects":{"id":"MergeObjects","inputs":{"obj1":{"mode":"required","type":"any"},"obj2":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"// magic here\\nconst {obj1, obj2} = inputs;\\noutputs.r.next({...obj1, ...obj2});"},"MillisToDateString":{"id":"MillisToDateString","inputs":{"ms":{"mode":"required","type":"any"},"locale":{"mode":"required-if-connected","type":"any"},"options":{"mode":"required-if-connected","type":"any"}},"outputs":{"dateString":{"type":"any"}},"completionOutputs":["dateString"],"fnCode":"// magic here\\n\\nconst {ms, locale, options} = inputs;\\nconst {dateString} = outputs;\\n\\nconst _locale = locale || \'en-US\';\\nconst _options = options || {};\\n\\nconst str = new Date(ms).toLocaleDateString(_locale, _options);\\n\\ndateString.next(str);"},"MillisToString":{"id":"MillisToString","inputs":{"ms":{"mode":"required","type":"any"},"locale":{"mode":"required-if-connected","type":"any"},"options":{"mode":"required-if-connected","type":"any"}},"outputs":{"dateString":{"type":"any"}},"completionOutputs":["dateString"],"fnCode":"// magic here\\n\\nconst {ms, locale, options} = inputs;\\nconst {dateString} = outputs;\\n\\nconst _locale = locale || \'en-US\';\\nconst _options = options || {};\\n\\nconst str = new Date(ms).toLocaleString(_locale, _options);\\n\\ndateString.next(str);"},"Modulo":{"id":"Modulo","inputs":{"n1":{"mode":"required","type":"any"},"n2":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { n1, n2 } = inputs;\\nconst { r } = outputs;\\n      \\n// magic here\\nr.next(n1 % n2);\\n      "},"MouseEvent":{"id":"MouseEvent","inputs":{},"outputs":{"event":{"type":"any"}},"completionOutputs":["never"],"fnCode":"getDocument().body.addEventListener(\'mousemove\', ev => {\\n  outputs.event.next(ev);\\n})"},"Multiply":{"id":"Multiply","inputs":{"n1":{"mode":"required","type":"any"},"n2":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { n1, n2 } = inputs;\\nconst { r } = outputs;\\n      \\n// magic here\\nr.next(n1 * n2);\\n      "},"Now":{"id":"Now","inputs":{"trigger":{"mode":"optional","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { trigger } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nr.next(Date.now());\\n        "},"Object-builder-75360":{"id":"Object-builder-75360","inputs":{"statusCode":{"mode":"required","type":"any"},"body":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"object"}},"customViewCode":"{\\"statusCode\\":\\"${statusCode}\\",\\"body\\":\\"${body}\\"}","fnCode":"outputs.r.next(compileObjectTemplate(\\"%7B%22statusCode%22%3A%22%24%7BstatusCode%7D%22%2C%22body%22%3A%22%24%7Bbody%7D%22%7D\\", inputs));"},"Parse":{"id":"Parse","inputs":{"str":{"mode":"required","type":"any"}},"outputs":{"obj":{"type":"any"},"e":{"type":"any"}},"fnCode":"const { str } = inputs;\\nconst { obj, e } = outputs;\\n        \\n// magic here\\ntry {\\n    obj.next(JSON.parse(str));\\n} catch (err) {\\n    console.error(\\"error parsing json\\", err, str);\\n    e.next({str, e});\\n}"},"ParseInt":{"id":"ParseInt","inputs":{"str":{"mode":"required","type":"any"},"base":{"mode":"optional","type":"any"}},"outputs":{"r":{"type":"any"},"e":{"type":"any"}},"fnCode":"const { str, base } = inputs;\\nconst { r, e } = outputs;\\n        \\n// magic here\\nconst int = parseInt(str, base || 10);\\nif (isNaN(int)) {\\n    e.next(str);\\n} else {\\n    r.next(int);\\n}  "},"Pick":{"id":"Pick","inputs":{"obj":{"mode":"required","type":"any"},"key":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"},"e":{"type":"any"}},"customViewCode":"<% if (inputs.key) { %> Pick \\"<%- inputs.key %>\\" <% } else { %> Pick <% } %>","completionOutputs":["r","e"],"fnCode":"const { obj, key } = inputs;\\nconst { r, e } = outputs;\\n\\n// magic here\\n\\nlet hadError = false;\\n\\nconst matches = {};\\n\\nconst normalized = key.replace(/\\\\[\\"(([^\\"])+)\\"\\\\]/g, (match, p1, p2, offset) => {\\n  const key = `__$$KEY$$__${offset}`;\\n  matches[key] = p1;\\n  return `.${key}`;\\n});\\n\\n// outputs.log.next({matches, normalized});\\n\\nconst path = normalized.split(\\".\\");\\nlet o = { ...obj };\\nfor (let p of path) {\\n  const key = matches[p] || p;\\n  if (o && isDefined(o[key]) && o[key] !== null) {\\n    o = o[key];\\n  } else {\\n    e.next(obj);\\n    hadError = true;\\n  }\\n}\\n\\nif (!hadError) {\\n  r.next(o);\\n}\\n"},"Publish":{"id":"Publish","inputs":{"key":{"mode":"required","type":"any"},"value":{"mode":"required","type":"any"}},"outputs":{},"fnCode":"// magic here\\n\\nPubSub.publish(inputs.key, inputs.value);"},"Random":{"id":"Random","inputs":{"trigger":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { trigger } = inputs;\\nconst { r } = outputs;\\n      \\nr.next(Math.random());\\n      "},"RegexMatch":{"id":"RegexMatch","inputs":{"str":{"mode":"required","type":"any"},"pattern":{"mode":"required","type":"any"}},"outputs":{"match":{"type":"any"},"noMatch":{"type":"any"}},"fnCode":"const { str, pattern } = inputs;\\nconst { match, noMatch } = outputs;\\n        \\n// magic here\\nconst regex = new RegExp(pattern);\\nconst matches = str.match(regex);\\n\\nif (matches) {\\n    match.next(matches);\\n} else {\\n    noMatch.next(str);\\n}   "},"ReloadPage":{"id":"ReloadPage","inputs":{"reload":{"mode":"required","type":"any"}},"outputs":{},"fnCode":"const document = getDocument();\\ndocument.location.reload();\\n"},"RemoveAttr":{"id":"RemoveAttr","inputs":{"obj":{"mode":"required","type":"any"},"k":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { obj, k } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nconst o = { ...obj };\\ndelete o[k];\\nr.next(o);        "},"Repeat":{"id":"Repeat","inputs":{"val":{"mode":"required","type":"any"},"count":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"// magic here\\nconst {val, count} = inputs;\\nconst {r} = outputs;\\n\\nfor (let i = 0; i < count; i++) {\\n    r.next(val);\\n}\\n"},"Replace":{"id":"Replace","inputs":{"str":{"mode":"required","type":"any"},"from":{"mode":"required","type":"any"},"to":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { str, from, to } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nr.next(str.replace(from, to));"},"Round":{"id":"Round","inputs":{"n":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { n } = inputs;\\nconst { r } = outputs;\\n      \\n// magic here\\nr.next(Math.round(n));\\n      "},"RoundRobin3":{"id":"RoundRobin3","inputs":{"item":{"mode":"required","type":"any"}},"outputs":{"r1":{"type":"any"},"r2":{"type":"any"},"r3":{"type":"any"}},"completionOutputs":["never"],"reactiveInputs":["item"],"fnCode":"// magic here\\nconst {state} = adv;\\nconst {r1, r2, r3} = outputs;\\nconst curr = state.get(\'curr\') || 0;\\n\\nconst o = [r1, r2, r3][curr];\\n\\nconst nextCurr = (curr + 1) % 3;\\n\\nlog(nextCurr, curr);\\no.next(inputs.item);\\nstate.set(\'curr\', nextCurr);"},"ScanValue":{"id":"ScanValue","inputs":{"value":{"mode":"required","type":"any"},"initial":{"mode":"required","type":"any"},"onValue":{"mode":"required","type":"part({\\"prevValue\\": \\"any\\", \\"currValue\\": \\"any\\"}|{\\"newVal\\": \\"any\\"})"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["none"],"reactiveInputs":["value"],"fnCode":"const { state, insId, execute, onCleanup, onArg } = adv;\\nconst {initial, value, onValue } = inputs;\\nconst {r} = outputs;\\n\\nconst prevValue = state.get(\\"prevValue\\") || initial;\\n  \\nconst newVal = dynamicOutput();\\nconst prevValueArg = dynamicPartInput();\\nconst currValue = dynamicPartInput();\\nconst clean = execute(\\nonValue,\\n{ prevValue: prevValueArg, currValue },\\n{ newVal },\\n`${insId}-scan`\\n);\\n\\nlog({value, prevValue});\\n\\nconst s = newVal.subscribe((val) => {\\n    state.set(\\"prevValue\\", val);\\n    r.next(val);\\n    s.unsubscribe();\\n    clean();\\n});\\n\\ncurrValue.subject.next(value);\\nprevValueArg.subject.next(prevValue);\\n\\n"},"SetAttr":{"id":"SetAttr","inputs":{"obj":{"mode":"required","type":"any"},"k":{"mode":"required","type":"any"},"v":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { obj, k, v } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nr.next({ ...obj, [k]: v });"},"SetItem":{"id":"SetItem","inputs":{"key":{"mode":"required","type":"any"},"value":{"mode":"required","type":"any"}},"outputs":{"ok":{"type":"any"}},"completionOutputs":["ok"],"fnCode":"// magic here\\n\\nconst {key, value} = inputs;\\nmongoDb.collection(\'__KVStore\').updateOne({id: key}, {$set: {value}}, {upsert: true})\\n    .then(() => outputs.ok.next(value))\\n    .catch((err) => adv.onError(err));"},"SetState":{"id":"SetState","inputs":{"key":{"mode":"required","type":"any"},"value":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"fnCode":"const {state} = adv;\\nconst {key, value} = inputs;\\n\\nstate.set(key, value);\\noutputs.r.next(value);\\n\\n"},"SliceList":{"id":"SliceList","inputs":{"list":{"mode":"required","type":"any"},"begin":{"mode":"required","type":"any"},"end":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"// magic here\\nconst { list, begin, end} = inputs;\\noutputs.r.next(\\n    list.slice(begin, end)\\n);"},"Split":{"id":"Split","inputs":{"str":{"mode":"required","type":"any"},"by":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { str, by } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nr.next(str.split(by));"},"SpreadList":{"id":"SpreadList","inputs":{"list":{"mode":"required","type":"any"}},"outputs":{"length":{"type":"any"},"idx":{"type":"any"},"val":{"type":"any"}},"fnCode":"// magic here\\nconst { list } = inputs;\\nconst { val, idx, length } = outputs;\\nlength.next(list.length);\\nlist.forEach((v, i) => {\\n    val.next(v);\\n    idx.next(i);\\n});"},"SpreadList5":{"id":"SpreadList5","inputs":{"list":{"mode":"required","type":"any"}},"outputs":{"first":{"type":"any"},"second":{"type":"any"},"rest":{"type":"any"}},"fnCode":"const { list } = inputs;\\nconst { first, second, rest } = outputs;\\n      \\nconst [f, s, r] = list;\\n\\nf && first.next(f);\\ns && second.next(s);\\n\\nr.length && rest.next(r)\\n      "},"SpreadListDelayed":{"id":"SpreadListDelayed","inputs":{"list":{"mode":"required","type":"any"}},"outputs":{"val":{"type":"any"},"idx":{"type":"any"},"length":{"type":"any"}},"fnCode":"// magic here\\nconst { list } = inputs;\\nconst { val, idx, length } = outputs;\\nlength.next(list.length);\\nlist.forEach((v, i) => {\\n    setTimeout(() => {\\n        val.next(v);\\n        idx.next(i);\\n    }, 100 * idx);\\n});"},"StringAppend":{"id":"StringAppend","inputs":{"str":{"mode":"required","type":"any"},"strToAppend":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"// magic here// magic here\\noutputs.r.next(`${inputs.str}${inputs.strToAppend}`);"},"Stringify":{"id":"Stringify","inputs":{"obj":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { obj } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nr.next(JSON.stringify(obj));"},"StringIncludes":{"id":"StringIncludes","inputs":{"str":{"mode":"required","type":"any"},"strToFind":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"},"else":{"type":"any"}},"customViewCode":"","fnCode":"const { str, strToFind } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nif (str.includes(strToFind)) {\\n    r.next(str);\\n}  else {\\n    outputs[\'else\'].next(str);\\n}"},"Subscribe":{"id":"Subscribe","inputs":{"key":{"mode":"required","type":"any"}},"outputs":{"val":{"type":"any"}},"completionOutputs":["never"],"fnCode":"// magic here\\nconst token = PubSub.subscribe(inputs.key, (_, data) => {\\n    outputs.val.next(data);\\n});\\n\\nadv.onCleanup(() => {\\n    log(\'Unsubscribing!\');\\n    PubSub.unsubscribe(token);\\n});"},"SubStr":{"id":"SubStr","inputs":{"str":{"mode":"required","type":"any"},"from":{"mode":"required","type":"any"},"to":{"mode":"optional","type":"any"}},"outputs":{"r":{"type":"any"}},"completionOutputs":["r"],"fnCode":"const { str, from, to } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nr.next(str.substring(from, to));    "},"Subtract":{"id":"Subtract","inputs":{"n1":{"mode":"required","type":"any"},"n2":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"customViewCode":"<% if (inputs.n2) { %>\\n-<%-inputs.n2%>\\n<% } %>","completionOutputs":["r"],"fnCode":"const { n1, n2 } = inputs;\\nconst { r } = outputs;\\n      \\nr.next(n1 - n2);\\n      "},"Switch":{"id":"Switch","inputs":{"val":{"mode":"required","type":"any"},"case1":{"mode":"required","type":"any"},"case2":{"mode":"required-if-connected","type":"any"},"case3":{"mode":"required-if-connected","type":"any"},"case4":{"mode":"required-if-connected","type":"any"},"case5":{"mode":"required-if-connected","type":"any"},"transform":{"mode":"required-if-connected","type":"any"}},"outputs":{"is1":{"type":"any"},"is2":{"type":"any"},"is3":{"type":"any"},"is4":{"type":"any"},"is5":{"type":"any"},"other":{"type":"any"}},"fnCode":"const { val, case1, case2, case3, case4, case5, transform } = inputs;\\nconst { is1, is2, is3, is4, is5, other } = outputs;\\n\\nconst valueToRespond = isDefined(transform) ? transform : val;\\n// magic here\\nswitch (val) {\\n    case case1:\\n        is1.next(valueToRespond);\\n        break;\\n    case case2:\\n        is2.next(valueToRespond);\\n        break;\\n    case case3:\\n        is3.next(valueToRespond);\\n        break;\\n    case case4:\\n        is4.next(valueToRespond);\\n        break;\\n    case case4:\\n        is5.next(valueToRespond);\\n        break;\\n    default:\\n        other.next(valueToRespond);\\n        break;\\n}"},"Throttle":{"id":"Throttle","inputs":{"value":{"mode":"required","type":"any"},"threshold":{"mode":"required","type":"any"}},"outputs":{"result":{"type":"any"}},"customViewCode":"","reactiveInputs":["value"],"fnCode":"const { value, ms } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\n\\nconst last = adv.state.get(\\"last\\") || 0;\\nconst now = Date.now();\\nconst delta = now - last;\\nadv.state.set(\\"last\\", Date.now());\\n  \\nif (delta > ms) {\\n    result.next(value);\\n} "},"Transform":{"id":"Transform","inputs":{"from":{"mode":"required","type":"any"},"to":{"mode":"required","type":"any"}},"outputs":{"r":{"type":"any"}},"customViewCode":"<% if (inputs.to) { %> to \\"<%- inputs.to %>\\" <% } %>","completionOutputs":["r"],"fnCode":"const { to } = inputs;\\nconst { r } = outputs;\\n        \\n// magic here\\nr.next(to);"},"WebScraper":{"id":"WebScraper","inputs":{"url":{"mode":"required","type":"any"},"config":{"mode":"required","type":"any"}},"outputs":{"result":{"type":"any"}},"completionOutputs":["result"],"fnCode":"// magic here\\nconst {onError} = adv;\\n\\nscrapeIt(inputs.url, inputs.config).then(({ data, response }) => {\\n    outputs.result.next(data)\\n}, err => {\\n    onError(err);\\n})"}}')}}]);