(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3237],{99373:function(e,t,n){"use strict";var r,i,o,a,u,s,c,l,d,p,f,m,v,g,h,y,b,I,C,P,x,j=n(27378),_=["title","titleId"];function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O.apply(this,arguments)}function E(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}t.Z=function(e){var t=e.title,n=e.titleId,w=E(e,_);return j.createElement("svg",O({xmlns:"http://www.w3.org/2000/svg","data-name":"Layer 1",width:928.526,height:635.213,viewBox:"0 0 928.526 635.213","aria-labelledby":n},w),t?j.createElement("title",{id:n},t):null,r||(r=j.createElement("circle",{cx:546.409,cy:233,r:233,fill:"#f2f2f2"})),i||(i=j.createElement("path",{d:"M131.411 563.346a39.063 39.063 0 0 0 37.721-6.645c13.212-11.09 17.355-29.359 20.725-46.275l9.97-50.036-20.872 14.372c-15.01 10.335-30.358 21-40.75 35.97s-14.93 35.406-6.58 51.604",fill:"#e6e6e6"})),o||(o=j.createElement("path",{d:"M133.195 623.924c-2.112-15.387-4.284-30.972-2.802-46.525 1.316-13.812 5.53-27.303 14.108-38.364a63.82 63.82 0 0 1 16.374-14.838c1.638-1.033 3.145 1.562 1.514 2.59a60.672 60.672 0 0 0-23.999 28.957c-5.224 13.29-6.063 27.776-5.163 41.894.544 8.537 1.698 17.018 2.861 25.489a1.554 1.554 0 0 1-1.047 1.845 1.51 1.51 0 0 1-1.846-1.048Z",fill:"#f2f2f2"})),a||(a=j.createElement("path",{d:"M272.996 602.73a22.264 22.264 0 0 0 20.462 7.607c9.693-1.644 16.996-9.432 23.529-16.778l19.325-21.728-14.405 1.05c-10.36.755-20.98 1.575-30.405 5.94s-17.546 13.104-18.11 23.475",fill:"#e6e6e6"})),u||(u=j.createElement("path",{d:"M256.412 633.03c3.396-8.175 6.82-16.464 12.032-23.683 4.629-6.412 10.59-11.83 17.996-14.796a36.374 36.374 0 0 1 12.328-2.575c1.103-.036 1.096 1.674-.003 1.71a34.58 34.58 0 0 0-20.146 7.32c-6.4 5.027-10.988 11.908-14.615 19.109-2.193 4.354-4.07 8.857-5.94 13.357a.886.886 0 0 1-1.047.605.86.86 0 0 1-.605-1.047Z",fill:"#f2f2f2"})),s||(s=j.createElement("path",{d:"M153.543 596.696a28.755 28.755 0 0 0 25.054 12.93c12.683-.601 23.257-9.453 32.775-17.857l28.154-24.857-18.633-.892c-13.4-.641-27.145-1.24-39.908 2.893S156.452 582.99 154.12 596.2",fill:"#e6e6e6"})),c||(c=j.createElement("path",{d:"M127.225 632.77c10.168-17.992 21.962-37.987 43.035-44.377a48.022 48.022 0 0 1 18.101-1.87c1.922.166 1.442 3.129-.476 2.963a44.614 44.614 0 0 0-28.887 7.643c-8.145 5.544-14.486 13.251-19.854 21.425-3.288 5.006-6.233 10.225-9.178 15.437-.942 1.666-3.693.464-2.74-1.221Z",fill:"#f2f2f2"})),l||(l=j.createElement("path",{d:"M566.333 325.681c20.217-11.111 45.379-8.881 67.161-1.284s41.522 20.043 62.676 29.249c64.64 28.13 142.548 23.595 203.486-11.848 5.764 13.406-.419 28.74-7.21 41.656s-14.533 26.914-11.737 41.236c3.578 18.327 22.793 29.315 30.579 46.288 7.39 16.111 3.424 35.032-2.246 51.827s-13.028 33.715-12.065 51.415 13.823 36.416 31.549 36.43c-26.27 4.082-53.056 8.166-79.31 3.983s-52.368-18.068-64.557-41.693c-6.093-11.808-8.442-25.386-15.439-36.682-11.918-19.24-34.791-28.289-56.372-35.108s-44.676-13.388-59.871-30.162c-14.478-15.982-19.064-38.246-26.734-58.4a186.537 186.537 0 0 0-64.589-84.23",fill:"#007ec6"})),d||(d=j.createElement("path",{d:"M589.758 241.944c-7.097-3.301-15.81-4.383-23.032-1.316s-12.145 10.932-9.81 17.891c1.06 3.156 3.47 6.259 2.531 9.445-.723 2.453-3.245 4.073-5.723 5.224s-5.187 2.12-6.978 4.062-2.165 5.285.073 6.791c.737.496 1.659.731 2.374 1.254a3.772 3.772 0 0 1 1.164 4.223 8.893 8.893 0 0 1-2.85 3.75c-2.541 2.191-5.899 4.699-5.11 7.809a5.478 5.478 0 0 0 3.697 3.458 18.367 18.367 0 0 0 5.427.716l74.966 2.362a28.422 28.422 0 0 0 7.402-.414 8.762 8.762 0 0 0 5.813-3.905c1.435-2.657.493-5.93-1.28-8.412s-4.282-4.438-6.356-6.717-3.769-5.122-3.404-8.067c.293-2.358 1.848-4.395 2.964-6.537s1.764-4.818.319-6.789c-2.037-2.776-6.927-2.525-9.243-5.113-1.748-1.952-1.41-4.763-1.584-7.28-.418-6.057-4.611-11.777-10.58-14.434a20.83 20.83 0 0 0-18.954 1.291Z",fill:"#2f2e41"})),p||(p=j.createElement("path",{fill:"#a0616a",d:"m542.385 622.099-11.741-3.528 8.019-46.967 17.329 5.207-13.607 45.288z"})),f||(f=j.createElement("path",{d:"m541.96 634.38-37.858-11.375.144-.479a15.386 15.386 0 0 1 19.162-10.308h.001l23.123 6.947Z",fill:"#2f2e41"})),m||(m=j.createElement("path",{fill:"#a0616a",d:"m653.182 622.496-12.26-.001-5.832-47.288 18.094.001-.002 47.288z"})),v||(v=j.createElement("path",{d:"m656.308 634.38-39.53-.002v-.5a15.386 15.386 0 0 1 15.386-15.386h.001l24.144.001ZM636.163 586.73a4.5 4.5 0 0 1-4.441-3.788l-18.203-113.555a3.5 3.5 0 0 0-6.689-.79L559.67 582.135a4.516 4.516 0 0 1-5.579 2.544l-17.034-5.679a4.485 4.485 0 0 1-2.966-5.26l38.649-171.022a4.525 4.525 0 0 1 3.372-3.392l51.832-12.032a4.562 4.562 0 0 1 3.708.77c34.13 24.799 31.247 105.821 24.886 193.798a4.502 4.502 0 0 1-4.295 4.174l-15.881.69c-.066.003-.132.005-.198.005Z",fill:"#2f2e41"})),g||(g=j.createElement("circle",{cx:592.532,cy:282.471,r:24.561,fill:"#a0616a"})),h||(h=j.createElement("path",{d:"M593.592 409.768a39.899 39.899 0 0 1-17.024-3.935l-.182-.085-.073-.188-22.03-57.076-.418-9.917a23.773 23.773 0 0 1 25.09-24.74l23.388 1.317a23.787 23.787 0 0 1 22.436 23.61c.608 1.167 4.922 10.292-3.533 18.865-.316 1.953-3.273 22.247 7.887 33.408l.314.313-.274.349c-.178.226-14.51 18.076-35.581 18.079Z",fill:"#3f3d56"})),y||(y=j.createElement("path",{d:"M626.434 414.074a10.056 10.056 0 0 0 5.277-14.489l23.359-27.043-18.415-2.397-19.358 26.048a10.11 10.11 0 0 0 9.137 17.88Z",fill:"#a0616a"})),b||(b=j.createElement("path",{d:"M641.038 393.2a4.49 4.49 0 0 1-2.468-.74l-11.553-7.577a4.491 4.491 0 0 1-1.4-6.064l8.364-14.052a6.272 6.272 0 0 0-2.824-8.932l-24.027-10.772a14.324 14.324 0 0 1-8.112-15.915 14.24 14.24 0 0 1 20.432-9.754l36.452 18.679a19.177 19.177 0 0 1 6.805 28.289l-18.02 24.97a4.489 4.489 0 0 1-3.649 1.868Z",fill:"#3f3d56"})),I||(I=j.createElement("path",{d:"M567.405 278.979c7.756-.623 14.196-8.372 13.39-16.111a13.01 13.01 0 0 0 11.14 13.246c3.559.392 7.46-.685 10.556 1.11 3.43 1.988 4.528 6.816 8.101 8.533 3.453 1.659 7.838-.604 9.543-4.033s1.288-7.55.157-11.21a31.652 31.652 0 0 0-52.69-12.975c-3.26 3.28-5.85 7.461-6.27 12.068s1.717 9.605 5.854 11.675Z",fill:"#2f2e41"})),C||(C=j.createElement("path",{d:"M510.264 210.944a10.056 10.056 0 0 1 3.105 15.104l19.159 30.165-18.567-.319-15.347-28.596a10.11 10.11 0 0 1 11.65-16.354Z",fill:"#a0616a"})),P||(P=j.createElement("path",{d:"m525.707 232.424 24.673 58.302 25.87 43.864a14.189 14.189 0 0 1-8.121 20.79 14.265 14.265 0 0 1-16.951-7.57L501.321 241.28a4.5 4.5 0 0 1 2.7-6.192l16.165-5.193a4.6 4.6 0 0 1 .943-.197 4.474 4.474 0 0 1 4.578 2.727Z",fill:"#3f3d56"})),x||(x=j.createElement("path",{d:"M757 635.213H1a1 1 0 0 1 0-2h756a1 1 0 0 1 0 2ZM597.858 108.213v82a1 1 0 1 1-2 0v-82a1 1 0 0 1 2 0ZM684.684 177.778 656.4 206.062a1 1 0 0 1-1.415-1.414l28.285-28.285a1 1 0 1 1 1.414 1.415ZM509.033 177.778l28.284 28.284a1 1 0 0 0 1.414-1.414l-28.284-28.285a1 1 0 1 0-1.414 1.415Z",fill:"#ccc"})))}},2445:function(e,t,n){"use strict";var r,i,o,a,u,s,c,l,d,p,f,m,v,g,h,y,b,I,C,P,x,j,_,O,E,w,S,M,k,D,T,N,R,A,V,z,H=n(27378),G=["title","titleId"];function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q.apply(this,arguments)}function F(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}t.Z=function(e){var t=e.title,n=e.titleId,L=F(e,G);return H.createElement("svg",q({xmlns:"http://www.w3.org/2000/svg","data-name":"Layer 1",width:973.461,height:587.025,viewBox:"0 0 973.461 587.025","aria-labelledby":n},L),t?H.createElement("title",{id:n},t):null,r||(r=H.createElement("g",{"data-name":"Group 100",fill:"#e4e4e4"},H.createElement("path",{"data-name":"Path 1465",d:"M561.877 471.613a11.49 11.49 0 1 0 11.49 11.49 11.49 11.49 0 0 0-11.49-11.49Zm0 18.561a7.071 7.071 0 1 1 7.071-7.071 7.071 7.071 0 0 1-7.07 7.071Z"}),H.createElement("path",{"data-name":"Path 1467",d:"M517.684 462.774h44.193v43.739a5.757 5.757 0 0 1-5.757 5.757h-32.679a5.757 5.757 0 0 1-5.757-5.757v-43.739Z"}))),i||(i=H.createElement("path",{"data-name":"Path 944",d:"M665.133 513.271H.896a1.006 1.006 0 0 1 0-2h664.237a1.006 1.006 0 0 1 0 2Z",fill:"#cacaca"})),o||(o=H.createElement("path",{fill:"#ffb6b6",d:"m89.41 494.381-4.108 20.313 76.393 25.514 6.064-29.98-78.349-15.847z"})),a||(a=H.createElement("path",{d:"M97.09 490.542 89 530.544l-.001.002a26.01 26.01 0 0 1-30.65 20.336l-.828-.168 13.247-65.496Z",fill:"#2f2e41"})),u||(u=H.createElement("circle",{"data-name":"Ellipse 276",cx:175.979,cy:162.713,r:51.871,fill:"#feb8b8"})),s||(s=H.createElement("path",{"data-name":"Path 1461",d:"M224.427 117.963a59.907 59.907 0 0 0-34.08-26.052l-6.369 4.647v-6.034a55.143 55.143 0 0 0-10.3-.6l-5.494 4.971v-4.558a59.335 59.335 0 0 0-40.932 24.347c-11.93 17.2-13.945 41.129-2.21 58.467 3.221-9.9 7.131-19.189 10.353-29.088a29.3 29.3 0 0 0 7.633.037l3.92-9.145 1.094 8.758c12.148-1.058 30.166-3.382 41.682-5.511l-1.12-6.719 6.7 5.583c3.528-.812 5.623-1.549 5.45-2.112 8.565 13.808 19.047 22.627 27.611 36.435 3.253-19.47 6.997-35.659-3.938-53.426Z",fill:"#2f2e41"})),c||(c=H.createElement("ellipse",{"data-name":"Ellipse 260",cx:192.856,cy:464.787,rx:133.56,ry:37.359,fill:"#2f2e41"})),l||(l=H.createElement("path",{d:"M287.54 296.101c-1.784-10.731-3.624-21.668-8.612-31.335-3.277-6.332-8.48-12.366-15.495-13.618a14.99 14.99 0 0 1-4.034-.934c-2.056-.99-29.674-16.756-34.063-19.502-3.77-2.357-9.72-6.722-12.72-6.722-3.017-.067-14.59 2.627-59.76-.904a163.141 163.141 0 0 0-22.01 10.822c-.145-.096-46.882 25.001-48.637 24.935-3.326-.14-6.416 1.989-8.323 4.67-1.905 2.681-2.8 6-3.735 9.21 10.208 22.732 19.547 45.494 29.756 68.227a5.821 5.821 0 0 1 .739 2.8 6.834 6.834 0 0 1-1.27 2.8c-5.007 8.042-4.848 18.157-4.3 27.61.547 9.451 1.223 19.435-3 27.907-1.15 2.326-2.644 4.455-3.736 6.781-2.56 5.268-3.484 22.117-1.99 27.777l187.267 5.365C269.59 430.922 287.539 296.1 287.539 296.1Z",fill:"#007ec6"})),d||(d=H.createElement("path",{"data-name":"Path 1421",d:"M53.963 341.958a33.063 33.063 0 0 0-.112 8.154l2.684 38.546c.252 3.633.5 7.257.841 10.881.644 7.033 1.606 14.01 2.8 20.977a3.736 3.736 0 0 0 3.83 3.633c11.814 2.5 24.021 2.4 36.08 1.719 18.4-1.027 65.473-2.97 68.35-6.706s1.2-9.779-2.55-12.8-65.872-10.386-65.872-10.386c.607-4.81 2.438-9.34 4.175-13.907 3.12-8.1 6.034-16.466 6.09-25.143s-3.213-17.8-10.32-22.771c-5.848-4.081-13.376-4.838-20.5-4.67-5.185.149-14.142-1.093-18.877.934-3.747 1.65-5.919 7.87-6.619 11.539Z",fill:"#fbbebe"})),p||(p=H.createElement("path",{"data-name":"Path 1423",d:"M287.871 429.091c3.11-1.186 6.538-.757 9.872-.308 10.732 1.466 21.622 2.97 31.57 7.257 4.67 2 9.115 4.67 12.272 8.6 2.8 3.54 4.436 7.874 5.987 12.142l3.587 9.826a47.3 47.3 0 0 1 3.13 11.516c1.12 11.759-6.922 22.845-17.037 28.954s-22.023 8.284-33.624 10.563-23.247 4.8-34.8 7.472a140.086 140.086 0 0 1-16.373 3.222c-12.366 1.4-25.292-.663-37.042 3.428-4.67 1.635-9.256 4.063-14.1 5.193a87.745 87.745 0 0 1-9.75 1.485l-22.239 2.54a121.313 121.313 0 0 1-13.636 1.046c-9.713 0-19.268-2.3-28.7-4.6a7.258 7.258 0 0 1-2.8-1.13c-1.494-1.177-1.82-3.26-2.036-5.146q-1.429-12.525-2.5-25.077c-.224-2.718-.392-5.66 1.093-7.948 1.868-2.8 5.511-3.68 8.836-4.222a230.58 230.58 0 0 1 42.665-2.961c5.426-5.426 14.374-5.454 21.482-8.406a63.897 63.897 0 0 0 7.575-4.119 99 99 0 0 1 41.59-13.141 38.714 38.714 0 0 0 8.51-1.214c5.5-1.709 10.516-6.361 16.166-5.221.7-1.933 1.186-4.521 2.8-5.847.8-.682 1.793-1.139 2.531-1.868 1.56-1.578 1.7-4.063 1.466-6.267s-.757-4.464-.187-6.613a9.14 9.14 0 0 1 1.037-2.307c2.792-4.832 7.023-7.316 12.655-6.849Z",fill:"#2f2e41"})),f||(f=H.createElement("path",{"data-name":"Path 1430",d:"M69.61 273.414a9.667 9.667 0 0 0-2.073 3.316 156.78 156.78 0 0 0-13.169 53.816 5.38 5.38 0 0 1-.607 2.606 11.403 11.403 0 0 1-1.373 1.485 5.156 5.156 0 0 0 .617 7.266q.127.107.261.206c1.541-2.9 5.23-3.848 8.51-4.1 15.7-1.242 31.035 6.062 46.782 5.511-1.11-3.839-2.709-7.528-3.615-11.413-4.007-17.251 5.987-36.033-.14-52.649-1.224-3.325-3.269-6.594-6.49-8.051a17.29 17.29 0 0 0-4.157-1.1c-3.979-.719-11.9-3.792-15.747-2.559-1.42.458-1.98 1.793-3.157 2.6-1.788 1.142-4.16 1.562-5.642 3.066Z",fill:"#007ec6"})),m||(m=H.createElement("path",{"data-name":"Path 1421",d:"M287.651 330.419c-4.735-2.027-13.692-.785-18.876-.934-7.125-.168-14.653.589-20.5 4.67-7.108 4.971-10.377 14.094-10.32 22.771s2.97 17.043 6.09 25.143c1.736 4.567 3.567 9.097 4.174 13.907 0 0-62.12 7.365-65.87 10.386s-5.427 9.064-2.55 12.8 92.614 7.487 104.43 4.987a3.736 3.736 0 0 0 3.828-3.633c1.194-6.967 2.156-13.944 2.8-20.977.341-3.624.59-7.248.841-10.881l2.684-38.546a33.064 33.064 0 0 0-.112-8.154c-.7-3.669-2.872-9.889-6.619-11.539Z",fill:"#fbbebe"})),v||(v=H.createElement("path",{"data-name":"Path 1430",d:"M272.981 270.348c-1.177-.807-1.737-2.142-3.157-2.6-3.847-1.233-11.768 1.84-15.747 2.559a17.29 17.29 0 0 0-4.156 1.1c-3.222 1.457-5.267 4.726-6.49 8.051-6.128 16.616 3.866 35.398-.14 52.649-.907 3.885-2.505 7.574-3.616 11.413 15.747.551 31.083-6.753 46.783-5.511 3.28.252 6.968 1.2 8.51 4.1q.133-.099.26-.206a5.156 5.156 0 0 0 .617-7.266 11.401 11.401 0 0 1-1.373-1.485 5.38 5.38 0 0 1-.607-2.606 156.78 156.78 0 0 0-13.169-53.816 9.667 9.667 0 0 0-2.073-3.316c-1.482-1.504-3.854-1.924-5.642-3.066Z",fill:"#007ec6"})),g||(g=H.createElement("path",{fill:"#ffb6b6",d:"m299.243 523.378-2.73 20.543-80.538-.755 4.03-30.32 79.238 10.532z"})),h||(h=H.createElement("path",{d:"m319.853 520.785-8.804 66.24-.838-.111a26.01 26.01 0 0 1-22.356-29.209v-.001l5.377-40.457Z",fill:"#2f2e41"})),y||(y=H.createElement("path",{"data-name":"Path 1427",d:"M109.77 439.487c0 .934-1.467 0-1.6-1-1.028-7.556-7.025-13.786-14.01-16.812s-14.945-3.185-22.51-2.466c-11.44 1.083-24.284 5.464-28.468 16.158-.99 2.5-10.264 24.76-9.359 29.766 2.438 13.356 11.572 24.779 22.64 32.69s24 12.637 36.9 16.9a639.95 639.95 0 0 0 104.607 24.984c5.753.869 11.563 1.672 17.073 3.521 4.931 1.653 9.545 4.128 14.365 6.071 11.208 4.5 23.266 6.108 35.211 7.687 2.036.262 4.371.448 5.875-.934 1.943-1.8 1.3-4.941.747-7.528a40.488 40.488 0 0 1 4.773-28.729c2-3.362 4.6-6.809 4.222-10.7-.448-4.539-4.969-7.752-9.47-8.481s-9.079.346-13.6.934a7.285 7.285 0 0 1-4.624-.458 9.235 9.235 0 0 1-1.812-1.606 20.482 20.482 0 0 0-23.854-3.334c-1.672.934-4.2-1.149-5.94-1.933l-19.642-8.892c-22.565-10.208-45.242-20.464-69.115-26.927a14.514 14.514 0 0 1-5.324-2.214c-1.186-.934-2.036-2.2-3.129-3.241-2.382-2.251-5.7-3.148-8.555-4.745s-6.056-5.508-5.402-8.711Z",fill:"#2f2e41"})),b||(b=H.createElement("circle",{cx:160.617,cy:411.99,r:14,fill:"#fbbebe"})),I||(I=H.createElement("circle",{cx:191.617,cy:411.99,r:14,fill:"#fbbebe"})),C||(C=H.createElement("path",{d:"M278.035 443.537H85.697a8.48 8.48 0 0 1-8.47-8.47V318.381a8.48 8.48 0 0 1 8.47-8.47h192.338a8.48 8.48 0 0 1 8.47 8.47v116.686a8.48 8.48 0 0 1-8.47 8.47Z",fill:"#3f3d56"})),P||(P=H.createElement("circle",{"data-name":"Ellipse 263",cx:181.399,cy:376.724,r:5.604,fill:"#fff"})),x||(x=H.createElement("path",{d:"M868.03 210.452H618.136a5.006 5.006 0 0 1-5-5v-47.1h2v47.1a3.003 3.003 0 0 0 3 3h249.892a3.003 3.003 0 0 0 3-3v-47.429h2v47.43a5.006 5.006 0 0 1-5 5Z",fill:"#3f3d56"})),j||(j=H.createElement("path",{fill:"#3f3d56",d:"M371.397 157.352h587.22v2h-587.22z"})),_||(_=H.createElement("circle",{"data-name":"Ellipse 264",cx:371.439,cy:158.196,r:17.202,fill:"#007ec6"})),O||(O=H.createElement("circle",{"data-name":"Ellipse 266",cx:546.244,cy:158.196,r:17.202,fill:"#007ec6"})),E||(E=H.createElement("circle",{"data-name":"Ellipse 268",cx:664.876,cy:208.757,r:17.202,fill:"#3f3d56"})),w||(w=H.createElement("circle",{"data-name":"Ellipse 269",cx:755.063,cy:208.757,r:17.202,fill:"#ccc"})),S||(S=H.createElement("circle",{"data-name":"Ellipse 270",cx:711.36,cy:158.196,r:17.202,fill:"#007ec6"})),M||(M=H.createElement("circle",{"data-name":"Ellipse 271",cx:956.259,cy:158.196,r:17.202,fill:"#007ec6"})),k||(k=H.createElement("circle",{"data-name":"Ellipse 272",cx:872.029,cy:158.196,r:17.202,fill:"#007ec6"})),D||(D=H.createElement("path",{"data-name":"Rectangle 207",fill:"#3f3d56",d:"M648.539 0h31.906v21.99h-31.906z"})),T||(T=H.createElement("path",{"data-name":"Rectangle 208",fill:"#007ec6",d:"M355.612 0h31.906v21.99h-31.906z"})),N||(N=H.createElement("path",{"data-name":"Rectangle 209",fill:"#ccc",d:"M463.685 0h31.906v21.99h-31.906z"})),R||(R=H.createElement("path",{d:"M424.782 159.352a1 1 0 0 1-1-1V108.99a5.006 5.006 0 0 1 5-5h48.675a1 1 0 0 1 0 2h-48.675a3.003 3.003 0 0 0-3 3v49.362a1 1 0 0 1-1 1Z",fill:"#3f3d56"})),A||(A=H.createElement("circle",{"data-name":"Ellipse 265",cx:479.744,cy:104.616,r:17.202,fill:"#e6e6e6"})),V||(V=H.createElement("path",{d:"M809.782 158.352h-2V108.99a5.006 5.006 0 0 1 5-5h48.675v2h-48.675a3.003 3.003 0 0 0-3 3Z",fill:"#3f3d56"})),z||(z=H.createElement("circle",{"data-name":"Ellipse 265",cx:863.744,cy:104.616,r:17.202,fill:"#e6e6e6"})))}},93088:function(e,t,n){"use strict";var r,i,o,a,u,s,c,l,d,p,f,m,v,g,h,y,b,I,C,P,x,j,_,O,E,w,S,M,k,D,T,N,R,A,V,z,H,G=n(27378),q=["title","titleId"];function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F.apply(this,arguments)}function L(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}t.Z=function(e){var t=e.title,n=e.titleId,B=L(e,q);return G.createElement("svg",F({xmlns:"http://www.w3.org/2000/svg",width:564.81,height:449.941,viewBox:"0 0 564.81 449.941","aria-labelledby":n},B),t?G.createElement("title",{id:n},t):null,r||(r=G.createElement("path",{fill:"#ffb6b6",d:"m496.138 436.616-11.742-.001-5.586-45.29 17.33.001-.002 45.29z"})),i||(i=G.createElement("path",{d:"m496.55 448.865-36.106-.002v-.456c0-7.762 6.292-14.054 14.054-14.054l6.596-5.004 12.306 5.005h3.151v14.51Z",fill:"#2f2e41"})),o||(o=G.createElement("path",{fill:"#ffb6b6",d:"m444.083 436.616-11.742-.001-5.585-45.29 17.33.001-.003 45.29z"})),a||(a=G.createElement("path",{d:"m444.496 448.865-36.107-.002v-.456c0-7.762 6.292-14.054 14.054-14.054l6.596-5.004 12.306 5.005h3.152v14.51ZM438.488 183.865l67.742 1.426s12.179 19.966 2.88 48.133l1.042 7.843-4.278 12.123-2.14 37.08 2.14 5.705-1.426 10.696s5.704 70.595-8.557 106.249l-17.114-.713-6.418-93.024 3.565-6.808-.713-2.852-8.557-42.785-8.557 22.106v12.282l-7.843 9.11s2.852 84.144-4.992 101.257h-19.16l-7.224-114.092 7.13-66.317-1.425-4.278 2.139-2.14-1.426-7.13 13.192-33.871Z",fill:"#2f2e41"})),u||(u=G.createElement("path",{d:"m467.367 53.728 20.68-4.992 5.704 13.549s29.515 15.687 30.941 37.08c0 0 4 17.114.435 24.957-3.566 7.844-18.54 32.802-18.54 32.802s13.548 43.498 9.983 45.637-88.422-2.139-88.422-6.418 14.122-49.202 14.122-49.202l2.992-77.013 19.253-7.13 2.852-9.27Z",fill:"#3f3d56"})),s||(s=G.createElement("path",{d:"M522.497 229.263a8.776 8.776 0 0 1-3.888-11.786 8.8 8.8 0 0 1 .756-1.22l-11.507-78.892 15.93.51 8.334 76.868c3.02 2.562 4.022 6.939 2.161 10.632a8.776 8.776 0 0 1-11.786 3.888ZM371.338 192.028a8.776 8.776 0 0 1 5.034-11.344c.455-.176.917-.3 1.379-.396l44.452-66.185 11.462 11.075-45.444 62.555c.517 3.926-1.68 7.842-5.538 9.328a8.776 8.776 0 0 1-11.345-5.033Z",fill:"#ffb6b6"})),c||(c=G.createElement("path",{d:"M493.468 117.466c-4.5-15.464 2.975-31.24 19.08-31.164 4.655.022 8.272 1.372 9.274 5.111 3.508 13.087 5.42 32.841 5.42 32.841l4.162 21.032-2.52 4.367 5.255 14.095-2.55 6.668-.55 34.052-12.836-.713-14.142-25.96-5.408-3.215s4.342-41.972-4.295-54.057l-.89-3.057ZM435.975 79.41c7.506-14.25 26.72-17.625 38.251-6.382 3.333 3.25 4.996 6.734 3.12 10.12-6.569 11.85-21.793 24.608-21.793 24.608l-18.75 30.142-4.846 1.39-6.012 13.788-12.884 15.148-17.064 9-9.984-9.984 2.12-12.833 25.69-34.23s18.485-23.257 20.668-37.95l1.484-2.817Z",fill:"#3f3d56"})),l||(l=G.createElement("path",{d:"M471.297 49.56c.472.057.943.1 1.411.12 1.458.08 2.897-.002 4.285-.238a20.178 20.178 0 0 0 11.002-5.6 20.15 20.15 0 0 0 5.84-11.91c1.355-11.083-6.537-21.179-17.62-22.533-10.923-1.343-20.881 6.298-22.47 17.126-.026.168-.051.328-.07.495-1.353 11.09 6.531 21.18 17.622 22.54Z",fill:"#ffb6b6"})),d||(d=G.createElement("path",{d:"M449.187 25.783c2.87 1.42 7.562-3.043 9.358-.475.292-.555.615-1.092.933-1.6.288-.454.7-1.423 1.177-1.59-.603 1.457-.47 3.43.156 5.12 2.832 1.057 6.54-1.285 9.16-4.056 4.116-4.344 10.836 6.796 9.247 12.56 2.023-2.469 6.41-1.076 7.898 1.748 1.486 2.816-1.025 5.073-1.562 8.215l4.054-.515c2.558-2.491 2.379-6.69 4.485-9.577 3.518-4.832 4.882-9.762 2.237-14.749-2.346-4.41-2.566-10.116-6.87-12.658 1.881-.92-4.807.517-3.02-2.48 1.794-2.99-7.77-3.352-8.393-1.75-2.733-3.271-5.49-5.428-8.85-2.807-3.302 2.578-2.96 5.289-6.838 5.046-1.82-.113-1.62 3.28-2.701 4.758-1.076 1.471-5.256 2.416-5.46 2.258-1.103-.863-4.86 6.49-4.86 6.49s-3.045 4.624-.151 6.062Z",fill:"#2f2e41"})),p||(p=G.createElement("path",{d:"M196.155 154.13c67.931 0 123 55.07 123 123s-55.069 123-123 123-161.945-67.35-123-123 55.07-123 123-123Z",fill:"#f2f2f2"})),f||(f=G.createElement("path",{d:"M360.782 159.982c-1.103 0-2 .897-2 2v64c0 1.103.897 2 2 2s2-.897 2-2v-64c0-1.103-.897-2-2-2ZM24.782 111.982c-1.103 0-2 .897-2 2v16c0 1.103.897 2 2 2s2-.897 2-2v-16c0-1.103-.897-2-2-2ZM24.782 159.982c-1.103 0-2 .897-2 2v31c0 1.103.897 2 2 2s2-.897 2-2v-31c0-1.103-.897-2-2-2ZM24.782 203.982c-1.103 0-2 .897-2 2v31c0 1.103.897 2 2 2s2-.897 2-2v-31c0-1.103-.897-2-2-2ZM204.155 48.982c-1.103 0-2 .897-2 2v31c0 1.103.897 2 2 2s2-.897 2-2v-31c0-1.103-.897-2-2-2Z",fill:"#3f3d56"})),m||(m=G.createElement("path",{d:"M510.551 432.608c2.066.13 3.208-2.438 1.645-3.934l-.155-.618.061-.148c2.09-4.982 9.17-4.948 11.242.042 1.838 4.428 4.18 8.864 4.755 13.546a18.03 18.03 0 0 1-.316 6.2c4.308-9.41 6.575-19.687 6.575-30.02 0-2.597-.142-5.194-.433-7.784a71.63 71.63 0 0 0-.994-6.31c-2.306-11.277-7.299-22.018-14.5-30.99-3.462-1.892-6.35-4.85-8.093-8.396-.627-1.279-1.118-2.655-1.35-4.056.394.051 1.485-5.949 1.188-6.317.55-.833 1.532-1.247 2.132-2.06 2.982-4.044 7.09-3.338 9.236 2.157 4.582 2.312 4.626 6.148 1.815 9.837-1.789 2.346-2.035 5.522-3.604 8.034.161.207.33.407.49.614a73.59 73.59 0 0 1 7.682 12.169c-.61-4.767.29-10.509 1.826-14.21 1.748-4.217 5.025-7.77 7.91-11.415 3.467-4.38 10.574-2.468 11.185 3.083l.017.162a20.88 20.88 0 0 0-1.259.77c-2.34 1.547-1.53 5.173 1.241 5.601l.063.01a30.635 30.635 0 0 1-.807 4.58c3.701 14.315-4.29 19.53-15.702 19.763-.252.13-.497.259-.749.382a73.182 73.182 0 0 1 2.764 9.978 73.858 73.858 0 0 1 1.28 9.05c.296 3.83.27 7.679-.052 11.503l.019-.136c.82-4.211 3.107-8.145 6.427-10.87 4.945-4.063 11.932-5.559 17.268-8.825 2.568-1.572 5.86.46 5.411 3.438l-.022.142c-.794.323-1.57.698-2.319 1.117a20.93 20.93 0 0 0-1.258.77c-2.34 1.548-1.531 5.174 1.24 5.602l.064.01.129.02a30.653 30.653 0 0 1-5.639 8.828c-2.314 12.498-12.256 13.683-22.89 10.044h-.006a75.094 75.094 0 0 1-5.045 14.726h-18.02c-.065-.2-.123-.407-.18-.607 1.665.103 3.345.007 4.985-.297-1.337-1.64-2.674-3.294-4.01-4.935a1.12 1.12 0 0 1-.085-.096c-.678-.84-1.362-1.673-2.04-2.513a29.99 29.99 0 0 1 .878-7.64v-.001Z",fill:"#f2f2f2"})),v||(v=G.createElement("path",{d:"M0 448.75c0 .66.53 1.19 1.19 1.19h562.29c.66 0 1.19-.53 1.19-1.19 0-.66-.53-1.19-1.19-1.19H1.19c-.66 0-1.19.53-1.19 1.19Z",fill:"#ccc"})),g||(g=G.createElement("path",{d:"M142.376 268.84h-69.22v-2h69.22c6.013 0 10.905-4.893 10.905-10.907V209.13h2v46.803c0 7.116-5.789 12.906-12.905 12.906ZM117.019 370.294h157.436v2H117.019z",fill:"#007ec6"})),h||(h=G.createElement("path",{d:"M374.343 255.466h-84.092c-4.538 0-8.23-3.692-8.23-8.23V164.17c0-4.538 3.692-8.23 8.23-8.23h84.092c4.538 0 8.23 3.692 8.23 8.23v83.066c0 4.538-3.692 8.23-8.23 8.23Z",fill:"#e6e6e6"})),y||(y=G.createElement("path",{d:"M305.912 158.392c-11.84 0-21.439 9.598-21.439 21.439v65.643a7.54 7.54 0 0 0 7.54 7.54h51.42c20.262 0 36.688-16.426 36.688-36.688v-50.394a7.54 7.54 0 0 0-7.54-7.54h-66.67Z",fill:"#fff"})),b||(b=G.createElement("g",{fill:"#e6e6e6"},G.createElement("path",{d:"M354.82 182.532h-45.221c-.863 0-1.565-.702-1.565-1.565s.702-1.564 1.565-1.564h45.22c.863 0 1.565.701 1.565 1.564s-.702 1.565-1.565 1.565ZM354.82 215.895h-45.221c-.863 0-1.565-.702-1.565-1.565s.702-1.564 1.565-1.564h45.22a1.566 1.566 0 0 1 0 3.13ZM373.182 199.224h-81.947c-.862 0-1.564-.702-1.564-1.564s.702-1.565 1.564-1.565h81.947a1.566 1.566 0 0 1 0 3.13Z"}))),I||(I=G.createElement("path",{d:"M374.02 229.46h-29.604c-.863 0-1.565-.701-1.565-1.564s.702-1.564 1.565-1.564h29.603c.863 0 1.565.701 1.565 1.564s-.702 1.565-1.565 1.565ZM197.711 420.97h-66.774a6.542 6.542 0 0 1-6.535-6.535v-65.96a6.542 6.542 0 0 1 6.535-6.535h66.774a6.542 6.542 0 0 1 6.535 6.535v65.96a6.542 6.542 0 0 1-6.535 6.535Z",fill:"#e6e6e6"})),C||(C=G.createElement("path",{d:"M143.372 343.887c-9.402 0-17.023 7.622-17.023 17.024v52.125a5.987 5.987 0 0 0 5.987 5.987h40.831c16.09 0 29.132-13.043 29.132-29.132v-40.016a5.987 5.987 0 0 0-5.987-5.988h-52.94Z",fill:"#fff"})),P||(P=G.createElement("g",{fill:"#e6e6e6"},G.createElement("path",{d:"M182.208 363.055H146.3c-.685 0-1.243-.557-1.243-1.242s.558-1.242 1.243-1.242h35.908a1.244 1.244 0 0 1 0 2.484ZM182.208 389.548H146.3c-.685 0-1.243-.557-1.243-1.242s.558-1.242 1.243-1.242h35.908a1.244 1.244 0 0 1 0 2.484ZM196.79 376.31h-65.072c-.685 0-1.242-.557-1.242-1.242s.557-1.242 1.242-1.242h65.072a1.244 1.244 0 0 1 0 2.485Z"}))),x||(x=G.createElement("path",{d:"M197.454 400.32h-23.507c-.685 0-1.243-.557-1.243-1.242s.558-1.242 1.243-1.242h23.507a1.244 1.244 0 0 1 0 2.484ZM151.04 208.626h-49.383a4.838 4.838 0 0 1-4.833-4.833v-48.78a4.838 4.838 0 0 1 4.833-4.834h49.383a4.838 4.838 0 0 1 4.833 4.833v48.78a4.838 4.838 0 0 1-4.833 4.834Z",fill:"#e6e6e6"})),j||(j=G.createElement("path",{d:"M110.854 151.62c-6.953 0-12.59 5.636-12.59 12.589v38.549a4.428 4.428 0 0 0 4.428 4.428h30.196c11.9 0 21.545-9.646 21.545-21.545v-29.594a4.428 4.428 0 0 0-4.428-4.428h-39.151Z",fill:"#fff"})),_||(_=G.createElement("g",{fill:"#e6e6e6"},G.createElement("path",{d:"M139.575 165.795h-26.556a.92.92 0 0 1 0-1.837h26.556a.92.92 0 0 1 0 1.837ZM139.575 185.388h-26.556a.92.92 0 0 1 0-1.838h26.556a.92.92 0 0 1 0 1.838ZM150.358 175.598h-48.123a.92.92 0 0 1 0-1.838h48.123a.92.92 0 0 1 0 1.838Z"}))),O||(O=G.createElement("path",{d:"M150.85 193.354h-17.385a.92.92 0 0 1 0-1.837h17.385a.92.92 0 0 1 0 1.837Z",fill:"#e6e6e6"})),E||(E=G.createElement("circle",{cx:295.155,cy:260.13,r:10,fill:"#007ec6"})),w||(w=G.createElement("circle",{cx:154.155,cy:209.13,r:10,fill:"#007ec6"})),S||(S=G.createElement("circle",{cx:202.155,cy:346.13,r:10,fill:"#007ec6"})),M||(M=G.createElement("g",{fill:"#f2f2f2"},G.createElement("ellipse",{cx:223.756,cy:66.652,rx:12.463,ry:12.201}),G.createElement("path",{d:"M323.67 62.478h-67.086c-2.301 0-4.174-1.872-4.174-4.174s1.873-4.174 4.174-4.174h67.085c2.302 0 4.174 1.873 4.174 4.174s-1.872 4.174-4.174 4.174ZM376.023 76.605H256.584c-2.301 0-4.174-1.872-4.174-4.174s1.873-4.174 4.174-4.174h119.439c2.3 0 4.173 1.873 4.173 4.174s-1.872 4.174-4.173 4.174Z"}))),k||(k=G.createElement("g",{fill:"#f2f2f2"},G.createElement("ellipse",{cx:43.359,cy:122.234,rx:8.066,ry:7.896}),G.createElement("path",{d:"M108.021 119.533H64.605c-1.49 0-2.701-1.212-2.701-2.701s1.211-2.702 2.7-2.702h43.417c1.49 0 2.702 1.212 2.702 2.702s-1.212 2.701-2.702 2.701ZM141.904 128.676h-77.3c-1.489 0-2.7-1.212-2.7-2.701s1.211-2.702 2.7-2.702h77.3c1.489 0 2.7 1.212 2.7 2.702s-1.211 2.7-2.7 2.7Z"}))),D||(D=G.createElement("g",{fill:"#f2f2f2"},G.createElement("ellipse",{cx:285.359,cy:403.234,rx:8.066,ry:7.896}),G.createElement("path",{d:"M350.021 400.533h-43.416c-1.49 0-2.701-1.212-2.701-2.701s1.211-2.702 2.7-2.702h43.417c1.49 0 2.702 1.212 2.702 2.702s-1.212 2.701-2.702 2.701ZM383.904 409.676h-77.3c-1.489 0-2.7-1.212-2.7-2.701s1.211-2.702 2.7-2.702h77.3c1.489 0 2.7 1.212 2.7 2.702s-1.211 2.7-2.7 2.7Z"}))),T||(T=G.createElement("path",{fill:"#e6e6e6",d:"M186.405 155.97h2v95h-2z"})),N||(N=G.createElement("circle",{cx:187.405,cy:250.97,r:6,fill:"#e6e6e6"})),R||(R=G.createElement("circle",{cx:278.405,cy:319.97,r:6,fill:"#e6e6e6"})),A||(A=G.createElement("circle",{cx:116.405,cy:237.97,r:6,fill:"#e6e6e6"})),V||(V=G.createElement("path",{fill:"#e6e6e6",d:"m81.375 238.973 32.813-.993.06 2-32.812.993zM327.216 342.94H277.46v-22.97h2v20.97h47.756v2z"})),z||(z=G.createElement("circle",{cx:113.942,cy:303.486,r:6,fill:"#e6e6e6"})),H||(H=G.createElement("path",{fill:"#e6e6e6",d:"M162.161 326.455h-49.756v-22.97h2v20.97h47.756v2zM75.423 280.655h238.982v2H75.423z"})))}},8541:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cappedArrayDebounce=void 0;t.cappedArrayDebounce=function(e,t,n,r){void 0===r&&(r=500);var i=[],o=null,a=null;return{addItem:function(u){clearTimeout(o),i.push(u),a||(a=setTimeout((function(){e(i),clearTimeout(o),a=null}),r)),i.length>=n?(e(i),clearTimeout(a),a=null,i=[]):o=setTimeout((function(){e(i),clearTimeout(a),a=null,i=[]}),t)},flush:function(){i.length&&(e(i),i=[],clearTimeout(a))}}}},96615:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.dataShaper=t.DataShapeType=void 0,function(e){e[e.STRING=0]="STRING",e[e.NUMBER=1]="NUMBER",e[e.BOOLEAN=2]="BOOLEAN",e[e.ARRAY=3]="ARRAY",e[e.OBJECT=4]="OBJECT",e[e.NULL=5]="NULL"}(n=t.DataShapeType||(t.DataShapeType={}));var r={string:n.STRING,number:n.NUMBER,boolean:n.BOOLEAN,object:n.OBJECT,array:n.ARRAY,null:n.NULL};t.dataShaper=function(e,n,i){void 0===n&&(n=5),void 0===i&&(i=5);var o,a,u=null===(o=e)?"null":typeof o;if("object"===u){if(Array.isArray(e))return n>1?e.filter((function(e,t){return t<i})).map((function(e){return(0,t.dataShaper)(e,n-1,i)})):r.array;if(n>1){var s={};for(var c in e)s[c]=(0,t.dataShaper)(e[c],n-1,i);return a=s,Object.keys(a).sort().reduce((function(e,t){return e[t]=a[t],e}),{})}return r.object}return r[u]}},40189:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debugLogger=void 0;var r=(0,n(96292).default)("flyde");t.debugLogger=function(e){return r.extend(e)}},68132:function(e,t,n){"use strict";var r=n(68626).default,i=["pos"];Object.defineProperty(t,"__esModule",{value:!0}),t.hashFlow=t.hashPart=void 0;var o=n(61586),a=n(24048),u=function(e){return o(e)};t.hashPart=function(e,t){void 0===t&&(t=!0);var n={id:e.id,completionOutputs:e.completionOutputs,reactiveInputs:e.reactiveInputs,inputs:e.inputs,outputs:e.outputs};if((0,a.isVisualPart)(e)){var o=e.instances,s=e.id,c=e.connections,l=e.inputsPosition,d=e.outputsPosition,p=o.map((function(e){e.pos;return r(e,i)})),f=t?{}:{inputsPosition:l,outputsPosition:d},m=t?p:o;m.sort((function(e,t){return e.id.localeCompare(t.id)}));var v=[].concat(c);v.sort((function(e,t){var n=e.from.insId+"."+e.from.pinId,r=t.from.insId+"."+t.from.pinId;return n.localeCompare(r)}));var g=JSON.stringify(Object.assign({id:s,instancesToUse:m,conns:v},n,{maybeIoPos:f}));return u(g)}if((0,a.isInlineValuePart)(e)){var h=e.fnCode,y=e.customViewCode,b=JSON.stringify(Object.assign({fnCode:h,customViewCode:y},n));return u(b)}throw new Error("Hashing code parts unsupported")};t.hashFlow=function(e,n){void 0===n&&(n=!0);var r=e.part,i=e.imports,o=(0,t.hashPart)(r,!1),a=Object.entries(i).sort((function(e,t){var n=e[0],r=t[0];return n.localeCompare(r)})).map((function(e){return[e[0],e[1].sort()]})).reduce((function(e,t){var n,r=t[0],i=t[1];return Object.assign({},e,((n={})[r]=i,n))}),{}),s=JSON.stringify(a);return u(o+s)}},45821:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.DepGraph=void 0,i(n(69985),t),i(n(94919),t),i(n(40189),t),i(n(8541),t),i(n(94919),t),i(n(68132),t),i(n(67748),t),i(n(96615),t),t.DepGraph=n(59280).DepGraph},69985:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.testDataCreator=void 0;t.testDataCreator=function(e){return function(t){void 0===t&&(t={});var n="function"==typeof e?e():e,r=t;return Object.assign({},n,r)}}},94919:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default;Object.defineProperty(t,"__esModule",{value:!0}),t.eventually=t.delay=t.noop=t.removeDupes=t.ensure=t.isOptionalType=t.callFnOrFnPromise=t.isPromise=t.isDefined=t.containsAll=t.shuffle=t.randomInts=t.repeat=t.pickRandom=t.randomPos=t.randomInt=t.pickSecond=t.pickFirst=t.fromEntries=t.entries=t.okeys=t.values=t.keys=t.filterOMap=t.mapOMap=t.middlePos=t.calcCenter=t.intersectRect=void 0;t.intersectRect=function(e,t){var n=e.x+e.w,r=t.x+t.w;return!(t.x>n||r<e.x||t.y>e.y+e.h||t.y+t.h<e.y)};t.calcCenter=function(e){var t=e.w,n=e.h;return{x:e.x+t/2,y:e.y+n/2}};t.middlePos=function(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}};t.mapOMap=function(e,n){return(0,t.entries)(e).map((function(e){var t=e[0],r=e[1];return[t,n(t,r)]})).reduce((function(e,t){var n,r=t[0],i=t[1];return Object.assign({},e,((n={})[r]=i,n))}),{})};t.filterOMap=function(e,n){return(0,t.entries)(e).filter((function(e){var t=e[0],r=e[1];return n(t,r)})).reduce((function(e,t){var n,r=t[0],i=t[1];return Object.assign({},e,((n={})[r]=i,n))}),{})};t.keys=function(e){return Object.keys(e)};t.values=function(e){return Object.values(e)},t.okeys=t.keys;t.entries=function(e){return(0,t.okeys)(e).map((function(t){return[t,e[t]]}))};t.fromEntries=function(e){return e.reduce((function(e,t){var n,r=t[0],i=t[1];return Object.assign({},e,((n={})[r]=i,n))}),{})};t.pickFirst=function(e){return e[0]};t.pickSecond=function(e){return e[1]};t.randomInt=function(e,t){void 0===t&&(t=0);var n=Math.random();return t+Math.floor((e-t)*n)};t.randomPos=function(e,n){return void 0===e&&(e=1e3),void 0===n&&(n=0),{x:(0,t.randomInt)(e,n),y:(0,t.randomInt)(e,n)}};t.pickRandom=function(e){return e[(0,t.randomInt)(e.length)]};t.repeat=function(e,t){return"x".repeat(e).split("").map((function(e,n){return t(n)}))};t.randomInts=function(e,n,r){return void 0===n&&(n=100),void 0===r&&(r=0),(0,t.repeat)(e,(function(){return(0,t.randomInt)(n,r)}))};t.shuffle=function(e){for(var t=[].concat(e),n=t.length-1;n>=0;n--){var r=Math.floor(Math.random()*(n+1)),i=[t[r],t[n]];t[n]=i[0],t[r]=i[1]}return t};t.containsAll=function(e,t){return t.every((function(t){return e.includes(t)}))};t.isDefined=function(e){return void 0!==e};t.isPromise=function(e){return e&&"function"==typeof e.then};t.callFnOrFnPromise=function(e,n){if((0,t.isDefined)(e)){var r=function(e){try{e()}catch(t){console.error(t)}};"function"==typeof e?r(e):Promise.resolve(e).then((function(e){"function"==typeof e&&r(e)}))}};t.isOptionalType=function(e){return/\?$/.test(e)};t.ensure=function(e,t){if(void 0===e)throw new Error(t||"Undefined value passed");return e};t.removeDupes=function(e){return Array.from(new Set(e))};t.noop=function(){};t.delay=function(e){return new Promise((function(t){return setTimeout(t,e)}))};var o=function(){var e=i(r().mark((function e(n,i,o,a){var u,s,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===i&&(i=3e3),void 0===o&&(o=100),void 0===a&&(a=new Set),!(i<0)){e.next=6;break}throw u=Array.from(a).reduce((function(e,t,n){return e+"\n\t\t"+(n+1)+". "+t}),""),new Error("[Eventually timeout exceeded after: timeout with error]: "+u);case 6:return e.prev=6,e.next=9,n();case 9:e.next=19;break;case 11:return e.prev=11,e.t0=e.catch(6),s=Date.now(),e.next=16,(0,t.delay)(o);case 16:return c=Date.now()-s,a.add(e.t0.message),e.abrupt("return",(0,t.eventually)(n,i-c,o,a));case 19:case"end":return e.stop()}}),e,null,[[6,11]])})));return function(t,n,r,i){return e.apply(this,arguments)}}();t.eventually=o},67748:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compileObjectTemplate=t.compileStringTemplate=void 0;t.compileStringTemplate=function(e,t){var n=decodeURIComponent(e);return Object.keys(t).forEach((function(e){var r=t[e],i=new RegExp("\\$\\{"+e+"\\}","g");n=n.replace(i,r)})),n};t.compileObjectTemplate=function(e,t){var n=decodeURIComponent(e);return Object.keys(t).forEach((function(e){var r=t[e],i=JSON.stringify(r),o=new RegExp('"\\$\\$\\{'+e+'\\}"',"g"),a=new RegExp("\\$\\{"+e+"\\}","g"),u="string"==typeof r?r.replace(/"/g,(function(e,t,n){return"\\"!==n[t-1]?'\\"':n[t]})):r;n=n.replace(o,i).replace(a,u).replace(/\n/g,"\\n")})),JSON.parse(n)}},1076:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.connection=t.connectionData=t.connectionDataEquals=t.connectionNodeEquals=t.connectionNode=t.externalConnectionNode=t.isInternalConnection=t.isExternalConnection=t.isInternalConnectionNode=t.isExternalConnectionNode=t.getPartOutputs=t.getOutputName=t.getInputName=t.getPartInputs=t.TRIGGER_PIN_ID=t.ERROR_PIN_ID=t.THIS_INS_ID=void 0;var r=n(24048);t.THIS_INS_ID="__this",t.ERROR_PIN_ID="__error",t.TRIGGER_PIN_ID="__trigger";t.getPartInputs=function(e){var n;return Object.assign({},e.inputs,((n={})[t.TRIGGER_PIN_ID]=(0,r.partInput)(),n))};t.getInputName=function(e){return e===t.TRIGGER_PIN_ID?"Trigger Part":e};t.getOutputName=function(e){return e===t.ERROR_PIN_ID?"Error":e};t.getPartOutputs=function(e){var n;return Object.assign({},e.outputs,((n={})[t.ERROR_PIN_ID]=(0,r.partOutput)(),n))};t.isExternalConnectionNode=function(e){return e&&e.insId===t.THIS_INS_ID};t.isInternalConnectionNode=function(e){return e.insId!==t.THIS_INS_ID};t.isExternalConnection=function(e){var n=e.from,r=e.to;return(0,t.isExternalConnectionNode)(n)||(0,t.isExternalConnectionNode)(r)};t.isInternalConnection=function(e){return!(0,t.isExternalConnection)(e)};t.externalConnectionNode=function(e){return{insId:t.THIS_INS_ID,pinId:e}};t.connectionNode=function(e,t){return{insId:e,pinId:t}};t.connectionNodeEquals=function(e,t){return e.insId===t.insId&&e.pinId===t.pinId};t.connectionDataEquals=function(e,n){return!(!e||!n)&&((0,t.connectionNodeEquals)(e.from,n.from)&&(0,t.connectionNodeEquals)(e.to,n.to))},t.connectionData=function(e,n,r){var i="string"==typeof e?e.split("."):e,o="string"==typeof n?n.split("."):n;if(i.length>2||o.length>2)throw new Error("invalid source or target to connection data - "+e+" / "+n);return{from:2===i.length?(0,t.connectionNode)(i[0],i[1]):(0,t.externalConnectionNode)(i[0]),to:2===o.length?(0,t.connectionNode)(o[0],o[1]):(0,t.externalConnectionNode)(o[0]),delayed:r}};t.connection=function(e,t,n){return void 0===n&&(n=!1),{from:e,to:t,delayed:n}}},6485:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.connect=void 0;var u=n(24048),s=n(30385),c=n(45821),l=n(1076);a(n(1076),t);t.connect=function(e,t,n,o,a,d,p,f){void 0===n&&(n={}),void 0===o&&(o="root"),void 0===a&&(a={bob:new Map}),void 0===d&&(d=c.noop),void 0===p&&(p={}),void 0===f&&(f={});var m=e.id,v=e.connections,g=e.instances,h=m||"connected-part"+(0,c.randomInt)(999);return{inputs:e.inputs,outputs:e.outputs,id:h,completionOutputs:e.completionOutputs,reactiveInputs:e.reactiveInputs,fn:function(m,y){var b,I=[],C=new c.DepGraph({}),P=new Map,x=new Map,j=new Map,_=new Map,O=new Map,E=new Map,w=new Set;g.forEach((function(e){var n=(0,u.getPart)(e,t),r=e.id;P.set(e,r),x.set(r,e),C.addNode(r);var i=Object.keys(n.inputs),o=Object.keys(n.outputs),a={},s={};if(i.forEach((function(t){var n=(e.inputConfig||{})[t]||(0,u.queueInputPinConfig)();(0,u.isStaticInputPinConfig)(n)?a[t]=(0,u.staticPartInput)(n.value):a[t]=(0,u.dynamicPartInput)({config:n})})),a[l.TRIGGER_PIN_ID]=(0,u.dynamicPartInput)({config:(0,u.queueInputPinConfig)()}),v.some((function(t){return(0,l.isInternalConnectionNode)(t.to)&&t.to.insId===e.id&&t.to.pinId===l.TRIGGER_PIN_ID}))&&e.inputConfig&&e.inputConfig[l.TRIGGER_PIN_ID])throw"Trigger connection can not be configured";o.forEach((function(e){var t=(0,u.dynamicOutput)();s[e]=t})),v.some((function(t){return(0,l.isInternalConnectionNode)(t.from)&&t.from.insId===e.id&&t.from.pinId===l.ERROR_PIN_ID}))&&(s[l.ERROR_PIN_ID]=(0,u.dynamicOutput)()),j.set(r,a),_.set(r,s)}));var S=new Set;return v.forEach((function(n){var o=n.from,a=n.to,s=o.insId,c=o.pinId,d=a.insId,p=a.pinId,f=_.get(s),m=j.get(d);if((0,l.isInternalConnectionNode)(a)&&S.add(a.insId+"."+a.pinId),(0,l.isExternalConnection)(n))if((0,l.isExternalConnectionNode)(o)){var v=m[a.pinId];if(!v)throw new Error("Input "+a.pinId+" of instance "+d+" not found");var g=O.get(o.pinId)||[];g.push(v),O.set(o.pinId,g)}else{var y=f[o.pinId];if(!y)throw new Error("Output "+o.pinId+" of instance "+s+" not found");var b=E.get(a.pinId)||[];b.push(y),E.set(a.pinId,b)}else{if(!f)throw new Error("No outputs found for instance ["+s+"]");if(!m)throw x.has(d)?new Error("No inputs found for instance ["+d+"]"):new Error("Instance with id ["+d+"] does not exist!");var P=f[c];if(!P)throw console.log(c),new Error("Output source - ["+c+"] not found in part ["+h+"]");var w=m[p],M=x.get(s);if(!M&&s!==l.THIS_INS_ID)throw new Error("Instance ["+s+"] does not exist! failed to connect ["+o+"] -> ["+a+"]");var k=(M?(0,u.getPart)(M,t):e).outputs[c];if(k&&k.delayed||n.delayed||s!==l.THIS_INS_ID&&d!==l.THIS_INS_ID&&C.addDependency(s,d),!w)throw new Error("Target arg - ["+a+"] not found in part ["+h+"]");var D=P.subscribe(function(){var e=i(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,u.isDynamicInput)(w)){e.next=3;break}throw console.info(w),new Error("Impossible state listening to non dynamic input - "+d+"."+p);case 3:w.subject.next(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());I.push((function(){return D.unsubscribe()}))}})),(0,c.okeys)(y).forEach((function(e){(E.get(e)||[]).forEach((function(t){var n=t.subscribe(function(){var t=i(r().mark((function t(n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:y[e].next(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());I.push((function(){return n.unsubscribe()}))}))})),C.overallOrder().map((function(e){return x.get(e)})).forEach((function(e){var r=j.get(e.id),i=_.get(e.id),c=(0,u.getPart)(e,t);if(!r)throw new Error("Unexpected error - args not found when running "+e);if(!i)throw new Error("Unexpected error - outputs not found when running "+e);for(var l in r){var m=e.inputConfig[l];S.has(e.id+"."+l)||(0,u.isStaticInputPinConfig)(m)||delete r[l]}var v=(0,s.execute)({part:c,inputs:r,outputs:i,partsRepo:t,_debugger:n,insId:e.id,extraContext:f,mainState:a,parentInsId:o,onBubbleError:d,onCompleted:function(){return t=e.id,w.delete(t),void(0===w.size&&b&&b());var t},onStarted:function(){return t=e.id,void w.add(t);var t},env:p});I.push(v)})),Object.keys(m).forEach(function(){var e=i(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(O.get(t)||[]).forEach((function(e){var n=m[t];if(!(0,u.isDynamicInput)(e))throw new Error("Unsure what to do with key "+t+", input: "+e+" of ins "+o);(0,c.isDefined)(n)&&e.subject.next(n)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),void 0===e.completionOutputs&&w.size>0?new Promise((function(e){b=e})):function(){return I.forEach((function(e){try{e()}catch(t){console.error("error unsubscribing",t)}}))}}}}},28674:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.MINOR_DEBUGGER_EVENT_TYPES=t.MAJOR_DEBUGGER_EVENT_TYPES=t.DebuggerEventType=void 0,function(e){e.INPUT_CHANGE="i",e.OUTPUT_CHANGE="o",e.PROCESSING_CHANGE="pc",e.ERROR="err",e.INPUTS_STATE_CHANGE="isc"}(n=t.DebuggerEventType||(t.DebuggerEventType={})),t.MAJOR_DEBUGGER_EVENT_TYPES=[n.INPUT_CHANGE,n.OUTPUT_CHANGE,n.ERROR],t.MINOR_DEBUGGER_EVENT_TYPES=[n.PROCESSING_CHANGE,n.INPUTS_STATE_CHANGE]},76296:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(28674),t)},30385:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.execute=t.INPUTS_STATE_SUFFIX=t.INNER_STATE_SUFFIX=void 0;var u=n(71542),s=n(21730);a(n(76296),t);var c=n(24048),l=n(6485),d=n(23939),p=n(45821),f=n(40189),m=n(24048),v=n(76296),g=n(11302);t.INNER_STATE_SUFFIX="_inner",t.INPUTS_STATE_SUFFIX="_inputs";t.execute=function(e){var n=e.part,o=e.inputs,a=e.outputs,h=e.partsRepo,y=e._debugger,b=void 0===y?{}:y,I=e.insId,C=void 0===I?n.id:I,P=e.extraContext,x=void 0===P?{}:P,j=e.mainState,_=void 0===j?{}:j,O=e.parentInsId,E=void 0===O?"root":O,w=e.onBubbleError,S=void 0===w?u.noop:w,M=e.env,k=void 0===M?{}:M,D=e.onCompleted,T=void 0===D?u.noop:D,N=e.onStarted,R=void 0===N?u.noop:N,A=[],V=Object.assign({},x,{ENV:k}),z=(0,g.customRepoToPartRepo)(h,V),H=function(e){var t=e instanceof Error?e:new Error("Raw error: "+e.toString());if(t.message="error in child instance "+C+": "+t.message,a[l.ERROR_PIN_ID]?a[l.ERROR_PIN_ID].next(e):(t.insId=C,S(t)),b.onEvent){var n=t;n.insId=E+"."+C,b.onEvent({type:v.DebuggerEventType.ERROR,val:n,insId:C,parentInsId:E})}},G=function(e){return(0,c.isVisualPart)(e)?(0,l.connect)(e,z,b,E+"."+C,_,H,k,x):(0,c.isInlineValuePart)(e)?(0,g.inlineValuePartToPart)(e,V):e}(n),q=b.onEvent||u.noop,F={},L={};(0,p.entries)(o).forEach((function(e){var t=e[0],n=e[1];if((0,c.isDynamicInput)(n)){var o=(0,c.dynamicPartInput)({config:n.config}),a=n.subject.subscribe(function(){var e=i(r().mark((function e(n){var i,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=q({type:v.DebuggerEventType.INPUT_CHANGE,insId:C,pinId:t,val:n,parentInsId:E}))){e.next=8;break}return e.next=4,i.valuePromise;case 4:a=e.sent,o.subject.next(a),e.next=12;break;case 8:if(!b.debugDelay){e.next=11;break}return e.next=11,(0,p.delay)(b.debugDelay);case 11:o.subject.next(n);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());A.push((function(){return a.unsubscribe()})),L[t]=o}else{q({type:v.DebuggerEventType.INPUT_CHANGE,insId:C,pinId:t,val:n.config.value,parentInsId:E});var u=(0,c.staticPartInput)((0,c.getStaticValue)(n.config.value,z,C));L[t]=u}})),(0,p.entries)(a).forEach((function(e){var t=e[0],n=e[1],o=(0,c.dynamicOutput)(),a=o.subscribe(function(){var e=i(r().mark((function e(i){var o,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=q({type:v.DebuggerEventType.OUTPUT_CHANGE,insId:C,pinId:t,val:i,parentInsId:E}))){e.next=8;break}return e.next=4,o.valuePromise;case 4:a=e.sent,n.next(a),e.next=9;break;case 8:n.next(i);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());A.push((function(){return a.unsubscribe()})),F[t]=o}));var B=function(e){var n,r=e.part,i=e.inputs,o=e.outputs,a=e.repo,l=e._debugger,g=e.insId,h=e.parentInsId,y=e.mainState,b=e.onError,I=e.onStarted,C=e.onCompleted,P=e.env,x=e.extraContext,j=r.fn,_=(0,f.debugLogger)("core"),O=[],E=l.onEvent||u.noop,w=(h||"root")+"."+g,S=""+w+t.INNER_STATE_SUFFIX,M=""+w+t.INPUTS_STATE_SUFFIX,k=_.extend(w);y[S]||(y[S]=new Map),y[M]||(y[M]=new Map),y[S];var D,T=y[M],N=function(){var e=Array.from(T.entries()).reduce((function(e,t){var n,r=t[0],o=t[1],a=(0,c.isQueueInputPinConfig)(i[r].config,i[r]);return Object.assign({},e,((n={})[r]=a?null==o?void 0:o.length:1,n))}),{});E({type:v.DebuggerEventType.INPUTS_STATE_CHANGE,val:e,insId:g,parentInsId:h})},R={execute:function(e,n,r,i){return(0,t.execute)({part:e,inputs:n,outputs:r,partsRepo:a,_debugger:l,insId:i,onCompleted:C,onStarted:I})},insId:g,state:y[S],onCleanup:function(e){O.push(e)},onError:function(e){b(e)},context:x,parentInsId:h},A=!1,V=(r.reactiveInputs||[]).filter((function(e){return!(0,m.isStaticInputPinConfig)(i[e].config)})),z=function(){y[S].clear(),(0,p.keys)(y).filter((function(e){return e.startsWith(w+".")})).forEach((function(e){y[e]=new Map}))},H=function e(t){var a=V.includes(null==t?void 0:t.key);if(A&&!a);else{var u=A&&a;if((0,d.isPartStateValid)(i,T,r)||u){var l;if(A){var f;if(!t)throw new Error("Unexpected state,  got reactive part while not processing and not valid");var m=(0,d.pullValueForExecution)(t.key,i[t.key],T,P);l=Object.assign({},D,((f={})[t.key]=m,f)),N()}else l=(0,d.pullValuesForExecution)(i,T,P),D=l,N();var y=new Set,x={};if(A=!0,E({type:v.DebuggerEventType.PROCESSING_CHANGE,val:A,insId:g,parentInsId:h}),r.completionOutputs){var _=r.completionOutputs.map((function(e){return e.split("+")})).reduce((function(e,t){return t.forEach((function(n){e.set(n,t)})),e}),new Map);(0,p.entries)(o).forEach((function(t){var o=t[0];t[1].pipe((0,s.first)()).subscribe((function(t){y.add(o),x[o]=t;var a=_.get(o);a&&(a.splice(a.indexOf(o),1),0===a.length&&(A=!1,E({type:v.DebuggerEventType.PROCESSING_CHANGE,val:A,insId:g,parentInsId:h}),C&&C(x),z(),(0,p.callFnOrFnPromise)(n,"Error with cleanup function of "+r.id),n=void 0,y.clear(),x={},(0,d.hasNewSignificantValues)(i,T,P,r.id)&&e()))}))}))}try{k("Running part %s with values %o",r.id,l),I&&I(),n=j(l,o,R),(0,p.isPromise)(n)?n.then((function(){void 0===r.completionOutputs&&C&&(A=!1,E({type:v.DebuggerEventType.PROCESSING_CHANGE,val:A,insId:g,parentInsId:h}),C(x),z())})):void 0===r.completionOutputs&&C&&(A=!1,E({type:v.DebuggerEventType.PROCESSING_CHANGE,val:A,insId:g,parentInsId:h}),C(x),z())}catch(q){console.log(q),A=!1,k("Error in part %s - value %e",r.id,q),E({type:v.DebuggerEventType.PROCESSING_CHANGE,val:A,insId:g,parentInsId:h}),b(q)}var O=V.find((function(e){return i[e]&&(0,d.peekValueForExecution)(e,i[e],T,P,r.id)}));if(O){var w=(0,d.peekValueForExecution)(O,i[O],T,P,r.id);e({key:O,value:w})}else{var S=(0,p.entries)(i).find((function(e){var t=e[0],n=e[1],i=(0,c.isQueueInputPinConfig)(n.config,n),o=(0,d.peekValueForExecution)(t,n,T,P,r.id);if(i)return(0,p.isDefined)(o)}));if(S){var M=S[0],H=S[1],G=(0,d.peekValueForExecution)(M,H,T,P,r.id);e({key:M,value:G})}}}}};H();var G=(0,d.subscribeInputsToState)(i,T,a,g,(function(e,t){_("Got input %s - value is [%o]",e,t),N();try{H({key:e,value:t})}catch(n){b(n)}}));return O.push(G),function(){(0,p.callFnOrFnPromise)(n,"Error with cleanup function of "+r.id),O.forEach((function(e){return e()}))}}({part:G,inputs:L,outputs:F,repo:z,_debugger:b,insId:C,mainState:_,parentInsId:E,onError:H,onBubbleError:S,env:k,extraContext:x,onCompleted:T,onStarted:R});return function(){A.forEach((function(e){return e()})),B()}}},23939:function(e,t,n){"use strict";var r=n(45597).default;Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeInputsToState=t.isPartStateValid=t.hasNewSignificantValues=t.peekValuesForExecution=t.pullValuesForExecution=t.pullValueForExecution=t.peekValueForExecution=void 0;var i=n(24048),o=n(45821),a=n(6485),u=function(e,t){var n=(0,i.extractStaticValue)(e);return(0,i.isEnvValue)(n)?function(e,t){for(var n,i=e.split("."),a=Object.assign({},t),u=r(i);!(n=u()).done;){var s=n.value;if(!a||!(0,o.isDefined)(a[s])||null===a[s])throw new Error("Cannot find key "+e+" inside obj "+t);a=a[s]}return a}((0,i.getEnvKeyFromValue)(n),t):n};t.peekValueForExecution=function(e,t,n,r,o){var a=n.get(e);if(!t)throw new Error('Trying to peek value of inexsting input in key "'+e+'" in part "'+o+'"');return(0,i.isStaticInput)(t)?u(t,r):(0,i.isQueueInputPinConfig)(t.config,t)?a?[].concat(a).shift():void 0:a};t.pullValueForExecution=function(e,t,n,r){var o,a=n.get(e);return(0,i.isStaticInput)(t)?o=u(t,r):(0,i.isQueueInputPinConfig)(t.config,t)?(o=(a||[]).shift(),n.set(e,a)):(o=a,(0,i.isStickyInputPinConfig)(t.config)||n.delete(e)),o};t.pullValuesForExecution=function(e,n,r){return(0,o.entries)(e).reduce((function(e,i){var o=i[0],a=i[1];return e[o]=(0,t.pullValueForExecution)(o,a,n,r),e}),{})};t.peekValuesForExecution=function(e,n,r,i){return(0,o.entries)(e).reduce((function(e,o){var a=o[0],u=o[1];return e[a]=(0,t.peekValueForExecution)(a,u,n,r,i),e}),{})};t.hasNewSignificantValues=function(e,n,r,a){return(0,o.entries)(e).some((function(e){var u=e[0],s=e[1],c=(0,i.isQueueInputPinConfig)(s.config,s),l=(0,t.peekValueForExecution)(u,s,n,r,a);return(0,o.isDefined)(l)&&c}))};t.isPartStateValid=function(e,t,n){var r=(0,o.keys)(e),u=(0,o.keys)(n.inputs).filter((function(e){var t=n.inputs[e].mode;return!t||"required"===t}));return r.includes(a.TRIGGER_PIN_ID)&&u.push(a.TRIGGER_PIN_ID),!!(0,o.containsAll)(r,u)&&(0,o.entries)(e).filter((function(e){var t=e[0];return!!n.inputs[t]||t===a.TRIGGER_PIN_ID})).every((function(e){var r,a=e[0],u=e[1],s=t.get(a);return"optional"===((null===(r=n.inputs[a])||void 0===r?void 0:r.mode)||"required")||(!!(0,i.isStaticInput)(u)||((0,i.isQueueInputPinConfig)(u.config,u)?(0,o.isDefined)(s)&&s.length>0:(0,o.isDefined)(s)))}))};t.subscribeInputsToState=function(e,t,n,r,a){var u=[];return(0,o.entries)(e).forEach((function(e){var n=e[0],r=e[1];if(r&&!(0,i.isStaticInput)(r)){var o=r.subject.subscribe((function(e){if((0,i.isQueueInputPinConfig)(r.config,r)){var o=t.get(n)||[];if(!Array.isArray(o))throw new Error("impossible state - state of key "+n+" is set but not an array");o.push(e),t.set(n,o),a(n,e)}else t.set(n,e),a(n,e)}));u.push((function(){return o.unsubscribe()}))}})),function(){return u.forEach((function(e){return e()}))}}},19735:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flydeFlowSchema=void 0;var r=n(89510),i=r.z.record(r.z.string(),r.z.string().or(r.z.array(r.z.string()))),o=r.z.strictObject({x:r.z.number(),y:r.z.number()}),a=r.z.discriminatedUnion("mode",[r.z.strictObject({mode:r.z.literal("static"),value:r.z.any()}),r.z.strictObject({mode:r.z.literal("queue")}),r.z.strictObject({mode:r.z.literal("sticky")})]),u=r.z.object({size:r.z.optional(r.z.enum(["small","regular","large"])),icon:r.z.optional(r.z.any()),color:r.z.optional(r.z.string()),cssOverride:r.z.optional(r.z.record(r.z.string()))}),s=r.z.object({pos:o.default({x:0,y:0}),id:r.z.string(),inputConfig:r.z.optional(r.z.record(r.z.string(),a)).default({}),visibleInputs:r.z.optional(r.z.array(r.z.string())),visibleOutputs:r.z.optional(r.z.array(r.z.string())),partId:r.z.optional(r.z.string()),part:r.z.optional(r.z.any()),style:r.z.optional(u)}).refine((function(e){return e.part||e.partId}),{message:"Instance must have either an inline part or refer to a partId"}),c=r.z.union([r.z.string(),r.z.object({mode:r.z.enum(["required","optional","required-if-connected"]),type:r.z.optional(r.z.string()),description:r.z.optional(r.z.string()),defaultValue:r.z.optional(r.z.any())})]),l=r.z.object({type:r.z.optional(r.z.string()),optional:r.z.optional(r.z.boolean()),delayed:r.z.optional(r.z.boolean()),description:r.z.optional(r.z.string())}),d=r.z.object({id:r.z.optional(r.z.string()),inputs:r.z.record(r.z.string(),c),outputs:r.z.record(r.z.string(),l),inputsPosition:r.z.optional(r.z.record(r.z.string(),o)),outputsPosition:r.z.optional(r.z.record(r.z.string(),o)),customViewCode:r.z.optional(r.z.string()),dataBuilderSource:r.z.optional(r.z.string()),templateType:r.z.optional(r.z.string()),completionOutputs:r.z.optional(r.z.array(r.z.string())),reactiveInputs:r.z.optional(r.z.array(r.z.string())),defaultStyle:r.z.optional(u),description:r.z.optional(r.z.string())}),p=r.z.object({instances:r.z.array(s),connections:r.z.array(r.z.strictObject({from:r.z.strictObject({insId:r.z.string(),pinId:r.z.string()}),to:r.z.strictObject({insId:r.z.string(),pinId:r.z.string()}),delayed:r.z.optional(r.z.boolean()),hidden:r.z.optional(r.z.boolean())}))}).and(d);t.flydeFlowSchema=r.z.strictObject({imports:r.z.optional(i).default({}),part:p})},18265:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.isStaticValueVisualPart=void 0,i(n(45821),t);var o=n(24048);i(n(6485),t),i(n(30385),t),i(n(69789),t),i(n(24048),t),i(n(90163),t),i(n(51922),t),i(n(11302),t),i(n(55281),t),i(n(19735),t);t.isStaticValueVisualPart=function(e){return e&&!!(0,o.maybeGetStaticValuePartId)(""+e)}},88004:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fakeVm=t.VM=t.VMScript=void 0;var r=n(45821),i=function(e){this.script=e};t.VMScript=i;var o=function(){function e(e){this.context=e}return e.prototype.run=function(e){var t=(0,r.okeys)(this.context.sandbox),n=Object.values(this.context.sandbox);Function.apply(void 0,t.concat([e.script])).apply(void 0,n)},e}();t.VM=o,t.fakeVm={VMScript:i,VM:o}},58725:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getVM2Instance=void 0;var r=n(88004);t.getVM2Instance=function(){return r.fakeVm}},11302:function(e,t,n){"use strict";var r=n(68626).default,i=["fnCode"];Object.defineProperty(t,"__esModule",{value:!0}),t.customRepoToPartRepo=t.inlineValuePartToPart=void 0;var o=n(14206),a=n(45821),u=n(24048),s=(0,n(58725).getVM2Instance)();t.inlineValuePartToPart=function(e,t){void 0===t&&(t={});var n=e.fnCode,c=r(e,i),l=(0,a.debugLogger)("code-part:"+e.id),d="\n  try {\n    "+n+"\n  } catch (e) {\n    adv.onError(e);\n  }\n  ",p=new s.VMScript(d),f=Object.assign({},c,{fn:function(n,r,i){var c=new s.VM({sandbox:Object.assign({inputs:n,outputs:r,setInterval:setInterval,clearInterval:clearInterval,setTimeout:setTimeout,clearTimeout:clearTimeout,encodeURIComponent:encodeURIComponent,adv:i,log:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];l.apply(void 0,["Log from code part "+e.id+" ["+i.insId+"]"].concat(n))},axios:o.default,DEFAULT_AXIOS_TIMEOUT:15e3,dynamicPartInput:u.dynamicPartInput,dynamicPartArg:u.dynamicPartInput,dynamicOutput:u.dynamicOutput,isDefined:a.isDefined,compileStringTemplate:a.compileStringTemplate,compileObjectTemplate:a.compileObjectTemplate,process:{env:{}}},t)});c.run(p)}});return f};t.customRepoToPartRepo=function(e,n){void 0===n&&(n={});var r={};for(var i in e){var o=e[i];r[i]=(0,u.isInlineValuePart)(o)?(0,t.inlineValuePartToPart)(o,n):o}return r}},90163:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPartWithDependencies=void 0;var r=n(24048),i=n(18265),o=n(93471);t.getPartWithDependencies=function(e,n,a){if(void 0===a&&(a=[]),(0,r.isInlineValuePart)(e))return[e];if(a.includes(e.id))return[];var u=(0,i.removeDupes)(e.instances.filter((function(e){return(0,o.isRefPartInstance)(e)})).map((function(e){return e.partId})).filter((function(e){return n[e]}))),s=u.map((function(e){return n[e]})).reduce((function(e,r){return[].concat(e,(0,t.getPartWithDependencies)(r,n,[].concat(a,u)))}),[]);return[e].concat(s)}},24048:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.codeFromFunction=t.getPartDef=t.getPart=t.getStaticValue=t.maybeGetStaticValuePartId=t.fromSimplified=t.inlineValuePart=t.codePart=t.visualPart=t.isInlineValuePart=t.isVisualPart=t.isCodePart=t.isBasePart=t.InlineValuePartType=void 0;var o=n(45821),a=n(93471),u=n(85089);i(n(93471),t),i(n(85089),t),i(n(34702),t),i(n(27519),t),function(e){e.VALUE="value",e.FUNCTION="function"}(t.InlineValuePartType||(t.InlineValuePartType={}));t.isBasePart=function(e){return e&&e.id&&e.inputs&&e.outputs};t.isCodePart=function(e){return(0,t.isBasePart)(e)&&"function"==typeof e.fn};t.isVisualPart=function(e){return!!e.instances};t.isInlineValuePart=function(e){return(0,o.isDefined)(e)&&(0,o.isDefined)(e.fnCode)},t.visualPart=(0,o.testDataCreator)({id:"visual-part",inputs:{},outputs:{},instances:[],connections:[],outputsPosition:{},inputsPosition:{}}),t.codePart=(0,o.testDataCreator)({id:"part",inputs:{},outputs:{},fn:o.noop}),t.inlineValuePart=(0,o.testDataCreator)({id:"part",inputs:{},outputs:{},fnCode:""});t.fromSimplified=function(e){var t=e.fn,n=e.inputTypes,r=e.outputTypes;return{id:e.id,inputs:(0,o.entries)(n).reduce((function(e,t){var n,r=t[0];t[1];return Object.assign({},e,((n={})[r]={},n))}),{}),outputs:(0,o.entries)(r).reduce((function(e,t){var n,r=t[0];t[1];return Object.assign({},e,((n={})[r]={},n))}),{}),fn:t}};t.maybeGetStaticValuePartId=function(e){var t="string"==typeof e&&e.match(/^__part\:(.*)/);return t?t[1]:null};t.getStaticValue=function(e,n,r){var i=(0,t.maybeGetStaticValuePartId)(e);if(i){var o=n[i];if(!o)throw new Error("Instance "+r+" referrer to a part reference "+i+" that does not exist");return o}return e};t.getPart=function(e,t){if("string"!=typeof e&&(0,a.isInlinePartInstance)(e))return e.part;var n="string"==typeof e?e:e.partId,r=t[n];if(!r)throw new Error("Part with id "+n+" not found");return r};t.getPartDef=function(e,t){if("string"!=typeof e&&(0,a.isInlinePartInstance)(e))return e.part;var n="string"==typeof e?e:e.partId,r=t[n];if(!r)throw console.error("Part with id "+n+" not found"),new Error("Part with id "+n+" not found");return r};t.codeFromFunction=function(e){var t,n=e.id,r=e.fn,i=e.inputNames,o=e.outputName,a=e.defaultStyle;return{id:n,inputs:i.reduce((function(e,t){var n;return Object.assign({},e,((n={})[t]=(0,u.partInput)(),n))}),{}),outputs:(t={},t[o]=(0,u.partOutput)(),t),fn:function(e,t){var n=i.map((function(t){return e[t]})),a=t[o],u=r.apply(void 0,n);return Promise.resolve(u).then((function(e){return a.next(e)}))},completionOutputs:[o],defaultStyle:a}}},93471:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createInsId=t.PartInstance=t.isRefPartInstance=t.isInlinePartInstance=t.inlinePartInstance=t.partInstance=void 0;var r=n(98739);t.partInstance=function(e,t,n,r){return{id:e,partId:t,inputConfig:n||{},pos:r||{x:0,y:0}}};t.inlinePartInstance=function(e,t,n,r){return{id:e,part:t,inputConfig:n||{},pos:r||{x:0,y:0}}};t.isInlinePartInstance=function(e){return!!e.part};t.isRefPartInstance=function(e){return!(0,t.isInlinePartInstance)(e)};t.PartInstance=function(e,t,n,r){return{id:e,partId:t.id,inputConfig:n||{},pos:r||{x:0,y:0}}};t.createInsId=function(e){return e.id+"-"+(0,r.slug)()}},85089:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEnvKeyFromValue=t.toEnvValue=t.isEnvValue=t.extractStaticValue=t.isStaticInput=t.isDynamicInput=t.staticPartInput=t.dynamicPartInputs=t.dynamicPartInput=t.dynamicOutput=t.partOutputs=t.partOutput=t.partInputs=t.isInputPinOptional=t.partInput=void 0;var r=n(71542),i=n(24048),o=n(45821),a=n(34702);t.partInput=function(e){return void 0===e&&(e="required"),{mode:e}};t.isInputPinOptional=function(e){return"optional"===e.mode};t.partInputs=function(e,n){return(0,o.repeat)(e,(function(e){return(0,t.partInput)(n[e]||"required")}))};t.partOutput=function(e){return void 0===e&&(e=!1),{delayed:e}};t.partOutputs=function(e){return(0,o.repeat)(e,(function(){return(0,t.partOutput)()}))};t.dynamicOutput=function(){return new r.Subject},t.dynamicPartInput=(0,o.testDataCreator)((function(){return{subject:new r.Subject,config:(0,a.queueInputPinConfig)()}}));t.dynamicPartInputs=function(e){return void 0===e&&(e=10),(0,o.repeat)(e,(function(){return(0,o.testDataCreator)((function(){return{subject:new r.Subject,config:(0,a.queueInputPinConfig)()}}))()}))};t.staticPartInput=function(e){return{config:(0,a.staticInputPinConfig)(e)}};t.isDynamicInput=function(e){var t=e;return t&&t.subject&&!!t.subject.next};t.isStaticInput=function(e){return(0,i.isStaticInputPinConfig)(e.config)};t.extractStaticValue=function(e){if((0,t.isStaticInput)(e))return e.config.value;throw new Error("Cannot extract static value from non static arg")};t.isEnvValue=function(e){return"string"==typeof e&&e.startsWith("$ENV.")};t.toEnvValue=function(e){return"$ENV."+e};t.getEnvKeyFromValue=function(e){return"string"==typeof e?e.replace(/^\$ENV\./,""):e}},27519:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default;Object.defineProperty(t,"__esModule",{value:!0}),t.partFromSimpleFunction=void 0,t.partFromSimpleFunction=function(e){var t,n;return{id:e.id,description:e.description,namespace:e.namespace,inputs:e.inputs?e.inputs.reduce((function(e,t){var n,r=t.name,i=t.description,o=t.mode;return Object.assign({},e,((n={})[r]={description:i,mode:null!=o?o:"required"},n))}),{}):{},outputs:e.output?(t={},t[e.output.name]={description:e.output.description},t):{},defaultStyle:{icon:e.icon,size:e.size},fn:(n=i(r().mark((function t(n,i,o){var a,u,s;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=(null!==(a=e.inputs)&&void 0!==a?a:[]).map((function(e){var t=e.name;return n[t]})),t.prev=1,t.next=4,Promise.resolve(e.fn.apply(e,u));case 4:s=t.sent,e.output&&i[e.output.name].next(s),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.error("Error in part",t.t0),o.onError(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,8]])}))),function(e,t,r){return n.apply(this,arguments)}),customViewCode:e.customViewCode}}},34702:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isStaticInputPinConfig=t.isStickyInputPinConfig=t.isQueueInputPinConfig=t.staticInputPinConfig=t.stickyInputPinConfig=t.queueInputPinConfig=t.INPUT_MODES=void 0,t.INPUT_MODES=["queue","sticky","static"];t.queueInputPinConfig=function(){return{mode:"queue"}};t.stickyInputPinConfig=function(){return{mode:"sticky"}};t.staticInputPinConfig=function(e){return{mode:"static",value:e}};t.isQueueInputPinConfig=function(e,t){return"queue"===e.mode};t.isStickyInputPinConfig=function(e){return e&&"sticky"===e.mode},t.isStaticInputPinConfig=function(e){return e&&"static"===e.mode}},69789:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.simplifiedExecute=void 0;var r=n(18265),i=n(30385);t.simplifiedExecute=function(e,t,n,o,a){void 0===a&&(a={});var u=(0,r.keys)(e.outputs),s=Object.keys(n).reduce((function(e,t){var i,o=n[t];return Object.assign({},e,((i={})[t]=(0,r.isDynamicInput)(o)?o:(0,r.staticPartInput)(o),i))}),{}),c=u.reduce((function(e,t){var n,i=(0,r.dynamicOutput)();return o&&i.subscribe((function(e){o(t,e)})),Object.assign({},e,((n={})[t]=i,n))}),{});return(0,i.execute)(Object.assign({part:e,inputs:s,outputs:c,partsRepo:t,onBubbleError:function(e){throw e}},a))}},51922:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},55281:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isScheduledTrigger=t.isRestApiTrigger=t.isWebAppTrigger=void 0;t.isWebAppTrigger=function(e){return"web-app"===e.type};t.isRestApiTrigger=function(e){return"rest-api"===e.type};t.isScheduledTrigger=function(e){return"scheduled"===e.type}},23489:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PartPreview=void 0;var r=n(24246),i=n(18265),o=n(57768);t.PartPreview=function(e){var t=e.part,n={part:t,instance:(0,i.partInstance)("bob",t.id,{}),connections:[],connectionsPerInput:{},connectionsPerOutput:{},viewPort:{pos:{x:0,y:0},zoom:1},partDefRepo:{},onUngroup:i.noop,onDblClick:i.noop,onDragEnd:i.noop,onDragMove:i.noop,onDragStart:i.noop,onPinClick:i.noop,onPinDblClick:i.noop,onSelect:i.noop,onTogglePinBreakpoint:i.noop,onTogglePinLog:i.noop,onToggleSticky:i.noop,displayMode:!0,onInspectPin:i.noop,onDetachConstValue:i.noop,onCopyConstValue:i.noop,onPasteConstValue:i.noop,onRequestHistory:i.noop,parentInsId:"",onChangeVisibleInputs:i.noop,onChangeVisibleOutputs:i.noop,onConvertConstToEnv:i.noop,forceShowMinimized:"both",onExtractInlinePart:i.noop,onCloseInlineEditor:i.noop,isConnectedInstanceSelected:!1,inlineEditorPortalDomNode:null,onChangeStyle:i.noop,onDeleteInstance:i.noop,onGroupSelected:i.noop,onSetDisplayName:i.noop,queuedInputsData:{}};return(0,r.jsx)("div",{className:"part-preview",children:(0,r.jsx)(o.InstanceView,Object.assign({},n))})}},67795:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DataInspectionModal=void 0;var c=n(24246),l=n(42272),d=s(n(60042)),p=u(n(27378)),f=n(96149),m=n(60614),v=n(99457);t.DataInspectionModal=function(e){var t,n=e.onRequestHistory,o=e.item,a=p.default.useState(),u=a[0],s=a[1],g=p.default.useState(0),h=g[0],y=g[1],b=p.default.useState(""),I=b[0],C=b[1],P=p.default.useState(),x=P[0],j=P[1],_=(0,f.useDebounce)(I,300)[0];(0,p.useEffect)((function(){j(null==u?void 0:u.lastSamples.filter((function(e){return"object"==typeof e.val?JSON.stringify(e.val).includes(_):e.val.toString().includes(_)}))),y(0)}),[null==u?void 0:u.lastSamples,_]),p.default.useEffect((function(){function e(){return e=i(r().mark((function e(){var t,i,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(o.insId,null===(t=o.pin)||void 0===t?void 0:t.id,null===(i=o.pin)||void 0===i?void 0:i.type);case 2:a=e.sent,s(a);case 4:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[o,n]);var O='"'+o.insId+'" '+((null===(t=o.pin)||void 0===t?void 0:t.id)?"("+o.pin.id+")":"");return(0,c.jsx)(l.Dialog,{isOpen:!0,title:"Inspecting data for instance "+O,onClose:e.onClose,canEscapeKeyClose:!1,className:"data-inspection-modal",children:(0,c.jsx)("main",{className:(0,d.default)(l.Classes.DIALOG_BODY),tabIndex:0,children:(0,c.jsxs)("div",{children:[(0,c.jsxs)("header",{children:[u?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("em",{children:[O," called ",u.total," time(s)"]}),u.total>10&&(0,c.jsx)("span",{children:"Showing last 10 samples"})]}):null,(0,c.jsx)("input",{className:"bp3-input bp3-small bp3-fill",type:"search",placeholder:"Search for values",dir:"auto",onChange:function(e){return C(e.target.value)},value:I}),_.length>0&&(0,c.jsxs)("span",{children:["Showing ",null==x?void 0:x.length," of ",u.lastSamples.length," ",'samples matching query "',_,'"']})]}),(0,c.jsx)("main",{className:"main-wrapper",children:function(){if(!u)return(0,c.jsx)(v.Loader,{});if(0===u.total)return(0,c.jsxs)(l.Callout,{intent:"warning",children:["No events captured for instance ",(0,c.jsx)("em",{children:o.insId})," ",o.pin?(0,c.jsxs)(p.default.Fragment,{children:["and pin ",(0,c.jsx)("em",{children:o.pin.id})]}):null,". Make sure debugger is running and your program was triggered."]});var e,t,n=null==x?void 0:x[h];return n?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(l.Card,{className:"content-wrapper",children:[n?(0,c.jsxs)("div",{className:"info",children:[(0,c.jsxs)("div",{children:["Showing sample ",h," of event from"," ",(0,c.jsx)("strong",{children:(0,f.timeAgo)(n.time)})," (",new Date(n.time).toLocaleString(),")"]}),(0,c.jsxs)("div",{children:["Instance: ",(0,c.jsx)("strong",{children:n.insId}),", Pin id:"," ",(0,c.jsx)("strong",{children:n.pinId})," "]}),(0,c.jsx)("div",{children:"Value:"})]}):null,(e=n,t=e.val,"object"==typeof t?(0,c.jsx)(m.BrowserOnlyReactJson,{src:t,name:null}):(0,c.jsx)(l.Code,{children:t}))]}),(0,c.jsx)(l.Menu,{className:"samples-menu",children:x.map((function(e,t){var n=e.pinId,r=u.total-t+'. from pin "'+n+'"';return(0,c.jsx)(l.MenuItem,{text:r,onClick:function(){return y(t)}},t)}))})]}):u.lastSamples.length>0&&I.length>0?(0,c.jsxs)(l.Callout,{intent:"warning",children:['No data found for search query "',I,'"']}):(0,c.jsxs)(l.Callout,{intent:"warning",children:["No events captured for instance ",o.insId," ",o.pin?"and "+o.pin.id:"",". Make sure debugger is running and your program was triggered."]})}()})]})})})}},52293:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(67795),t)},90412:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t},s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FlowEditor=void 0;var l=n(24246),d=u(n(27378)),p=n(18265),f=n(41304),m=c(n(63300)),v=n(14648),g=n(13011),h=n(40232),y=n(51424),b=n(24935),I=n(91312),C=n(30537),P=n(31425),x=n(44370),j=n(99743),_=n(71362),O=n(52293);s(n(91312),t),C.library.add(P.fab,x.fas);var E=["select","drag-move","order-step"],w=function(e){var t;return Object.assign({},e.dependencies,((t={})[e.main.id]=e.main,t))};t.FlowEditor=d.memo(d.forwardRef((function(e,t){var n=e.state,o=e.resolvedRepoWithDeps,a=e.onChangeEditorState,u=e.onImportPart,s=e.debuggerClient,c=d.useState([]),C=c[0],P=c[1],x=d.useState([]),S=x[0],M=x[1],k=n.flow,D=n.boardData,T=n.flow.part,N=d.useState({}),R=N[0],A=N[1];d.useEffect((function(){if(s)return s.onBatchedEvents((function(e){e.forEach((function(e){console.log({event:e}),e.type===p.DebuggerEventType.INPUTS_STATE_CHANGE&&(console.log("INPUTS_STATE_CHANGE",e.insId,e.val),A((function(t){var n;return Object.assign({},t,((n={})[e.insId]=e.val,n))})))}))}))}),[s]);var V=(0,I.usePorts)().openFile,z=d.useCallback((function(e,t){console.log("onChangeFlow",t.type),"functional"===t.type&&(P([{flow:e}].concat(C.slice(0,50))),M([])),a((function(t){return Object.assign({},t,{flow:e})}))}),[a,C]),H=d.useState({instances:[],connections:[]}),G=H[0],q=H[1],F=d.useState(!1),L=F[0],B=F[1],U=d.useCallback((function(){return B(!1)}),[]),Z=d.useCallback((function(){return B(!0)}),[]),W=d.useCallback((function(e){a((function(t){return Object.assign({},t,{boardData:Object.assign({},t.boardData,e)})}))}),[a]);d.useEffect((function(){W({selected:[],viewPort:f.defaultViewPort,from:void 0,to:void 0,lastMousePos:{x:0,y:0}})}),[T.id]),(0,v.useHotkeys)("cmd+z",(function(e){M([].concat(S,[n]));var t=C[0],r=C.slice(1);t&&(a((function(e){return Object.assign({},e,t)})),P(r)),e.preventDefault()}),void 0,[n,C,S]);var J=d.useCallback((function(e,t){E.some((function(e){return t.message.includes(e)}))||M([]);var n=(0,m.default)(k,(function(t){t.part=e}));z(n,t)}),[k,z]),Y=d.useCallback((function(e){V({absPath:e.source.path})}),[V]),$=d.useCallback((function(e,t){void 0===t&&(t=-1*f.PART_HEIGHT*1.5);var n=(0,g.createNewPartInstance)(e,t,D.lastMousePos,w(o));if(n){var r=(0,m.default)(k,(function(e){var t=e.part;if(!(0,p.isVisualPart)(t))throw new Error("Impossible state, adding part to non visual part");t.instances.push(n)}));return z(r,(0,y.functionalChange)("add-part")),U(),n}}),[D.lastMousePos,k,z,U,o]),X=d.useCallback(function(){var e=i(r().mark((function e(t){var n,i,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next=e.t0===b.OmniBarCmdType.ADD?3:e.t0===b.OmniBarCmdType.ADD_VALUE?4:e.t0===b.OmniBarCmdType.CREATE_CODE_PART?7:e.t0===b.OmniBarCmdType.CREATE_GROUPED_PART?9:e.t0===b.OmniBarCmdType.IMPORT?11:18;break;case 3:return e.abrupt("return",$(t.data));case 4:return(0,g.domToViewPort)(D.lastMousePos,D.viewPort,f.defaultViewPort),(0,h.toastMsg)("TODO"),e.abrupt("break",19);case 7:case 9:return(0,h.toastMsg)("TODO"),e.abrupt("break",19);case 11:return e.next=13,u(t.data,{pos:D.lastMousePos});case 13:return n=(0,j.vAdd)({x:0,y:0},D.lastMousePos),i=(0,g.createNewPartInstance)(t.data.part,0,n,w(o)),a=(0,m.default)(k,(function(e){e.part.instances.push(i)})),z(a,(0,y.functionalChange)("add-imported-part")),e.abrupt("break",19);case 18:h.AppToaster.show({intent:"warning",message:"Not supported yet"});case 19:U();case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[U,$,D.lastMousePos,D.viewPort,u,o,k,z]),Q=(d.useCallback((function(e){var t,n,r,i;switch(e){case _.ActionType.RemovePart:var o=(0,m.default)(k,(function(e){var t=e.part;if(!(0,p.isVisualPart)(t))throw new Error("Impossible state, deleting instances opf non visual part");t.instances=t.instances.filter((function(e){return!D.selected.includes(e.id)})),t.connections=t.connections.filter((function(e){return!D.selected.includes(e.from.insId)&&!D.selected.includes(e.to.insId)}))}));z(o,(0,y.functionalChange)("remove-instances")),(0,h.toastMsg)("Removed "+D.selected.length+" instances(s)");break;case _.ActionType.Inspect:if(1===D.selected.length||D.from||D.to){var a=D.selected[0]||(null===(t=D.from)||void 0===t?void 0:t.insId)||(null===(n=D.to)||void 0===n?void 0:n.insId),u=(null===(r=D.from)||void 0===r?void 0:r.pinId)||(null===(i=D.to)||void 0===i?void 0:i.pinId);ee({insId:a,pin:{type:D.from?"output":"input",id:u}})}break;default:(0,h.toastMsg)(e+" not supported yet")}}),[D.from,D.selected,D.to,k,z]),d.useState()),K=Q[0],ee=Q[1],te=d.useCallback((function(){return ee(void 0)}),[]),ne=d.useCallback((function(e,t){ee({insId:e,pin:t})}),[]);return(0,l.jsx)("div",{className:"flyde-flow-editor",children:function(){if((0,p.isInlineValuePart)(T))throw new Error("Impossible state");return(0,l.jsxs)(d.Fragment,{children:[K?(0,l.jsx)(O.DataInspectionModal,{onRequestHistory:e.onRequestHistory,item:K,onClose:te}):null,(0,l.jsx)(f.VisualPartEditor,{insId:"root."+T.id,ref:t,boardData:D,onChangeBoardData:W,part:T,onGoToPartDef:Y,onChangePart:J,resolvedFlow:o,clipboardData:G,onCopy:q,partIoEditable:!T.id.startsWith("Trigger"),onInspectPin:ne,onRequestHistory:e.onRequestHistory,onRequestImportables:e.onQueryImportables,onImportPart:e.onImportPart,onShowOmnibar:Z,onExtractInlinePart:e.onExtractInlinePart,queuedInputsData:R,initialPadding:e.initialPadding},T.id),L?(0,l.jsx)(b.Omnibar,{flow:k,repo:o.dependencies,onCommand:X,visible:L,onClose:U,onRequestImportables:e.onQueryImportables}):null]})}()})})))},57779:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BasePartEditor=t.renderCreateIOOption=void 0;var i=n(24246),o=r(n(27378)),a=n(18265),u=n(42272),s=r(n(63300)),c=n(18264),l=n(23489);t.renderCreateIOOption=function(e,t,n){return(0,i.jsx)(u.MenuItem,{icon:"add",text:'Create "'+e+'"',active:t,onClick:n,shouldDismissPopover:!1})};var d=c.MultiSelect.ofType();t.BasePartEditor=function(e){var n,r,c=e.part,p=e.onChange,f=(0,a.entries)(c.inputs),m=f.filter((function(e){return"required"===e[1].mode})).map((function(e){return e[0]})),v=f.filter((function(e){return"optional"===e[1].mode})).map((function(e){return e[0]})),g=f.filter((function(e){return"required-if-connected"===e[1].mode})).map((function(e){return e[0]})),h=o.default.useState(!1),y=h[0],b=h[1],I=(0,a.okeys)(c.outputs),C=o.default.useCallback((function(e){p(Object.assign({},c,{id:e}))}),[c,p]),P=o.default.useCallback((function(e){var t=e?e.split(","):void 0;"[]"===e&&(t=[]),console.log(e,t),p(Object.assign({},c,{completionOutputs:t}))}),[c,p]),x=o.default.useCallback((function(e){var t=e?e.split(","):void 0;p(Object.assign({},c,{reactiveInputs:t}))}),[c,p]),j=o.default.useCallback((function(e,t){var n=(0,s.default)(c,(function(n){n.inputs[e]=(0,a.partInput)(t)}));p(n)}),[c,p]),_=o.default.useCallback((function(e){var t=(0,s.default)(c,(function(t){delete t.inputs[e]}));p(t)}),[c,p]),O=o.default.useCallback((function(e){var t=(0,s.default)(c,(function(t){t.outputs[e]=(0,a.partOutput)()}));p(t)}),[c,p]),E=o.default.useCallback((function(e){var t=(0,s.default)(c,(function(t){delete t.outputs[e]}));p(t)}),[c,p]);o.default.useCallback((function(e){try{var t=JSON.parse(e),n=(0,s.default)(c,(function(e){Object.entries(t).forEach((function(t){var n=t[0],r=(t[1],e.inputs[n]),i=e.outputs[n];r?e.inputs[n]=Object.assign({},r):i&&(e.outputs[n]=Object.assign({},i))}))}));p(n)}catch(r){console.error("cannot parse")}}),[p,c]);return(0,i.jsxs)("div",{className:"base-part-editor",children:[(0,i.jsx)("div",{className:"form-row",children:(0,i.jsx)(u.FormGroup,{label:"Part Name",labelFor:"text-input",labelInfo:"(required)",children:(0,i.jsx)(u.InputGroup,{id:"part-name",disabled:e.idDisabled,placeholder:"Part ID",value:c.id,onChange:function(e){return C(e.target.value)}})})}),(0,i.jsx)(u.FormGroup,{label:"Required Inputs",children:(0,i.jsx)(d,{selectedItems:m,placeholder:"Enter input names here",items:[],tagRenderer:function(e){return e},onItemSelect:function(e){return j(e,"required")},onRemove:_,resetOnSelect:!0,itemRenderer:function(e){return(0,i.jsx)("span",{children:e})},createNewItemFromQuery:function(e){return e},createNewItemRenderer:t.renderCreateIOOption,fill:!0})}),!0!==e.hiddenOutputs?(0,i.jsx)(u.FormGroup,{label:"Outputs",children:(0,i.jsx)(d,{selectedItems:I,placeholder:"Enter output names here",items:[],tagRenderer:function(e){return e},onItemSelect:O,onRemove:E,resetOnSelect:!0,itemRenderer:function(e){return(0,i.jsx)("span",{children:e})},createNewItemFromQuery:function(e){return e},createNewItemRenderer:t.renderCreateIOOption,fill:!0})}):null,(0,i.jsx)(u.Checkbox,{checked:y,onChange:function(e){return b(e.target.checked)},children:"Show advanced options"}),(0,i.jsxs)(u.Collapse,{isOpen:y,children:[(0,i.jsx)(u.FormGroup,{label:"Optional Inputs",children:(0,i.jsx)(d,{selectedItems:v,placeholder:"Enter input names here",items:[],tagRenderer:function(e){return e},onItemSelect:function(e){return j(e,"optional")},onRemove:_,resetOnSelect:!0,itemRenderer:function(e){return(0,i.jsx)("span",{children:e})},createNewItemFromQuery:function(e){return e},createNewItemRenderer:t.renderCreateIOOption,fill:!0})}),(0,i.jsx)(u.FormGroup,{label:"Required-if-connected Inputs",children:(0,i.jsx)(d,{selectedItems:g,placeholder:"Enter input names here",items:[],tagRenderer:function(e){return e},onItemSelect:function(e){return j(e,"required-if-connected")},onRemove:_,resetOnSelect:!0,itemRenderer:function(e){return(0,i.jsx)("span",{children:e})},createNewItemFromQuery:function(e){return e},createNewItemRenderer:t.renderCreateIOOption,fill:!0})}),(0,i.jsx)(u.FormGroup,{label:"Completion Outputs",children:(0,i.jsx)(u.InputGroup,{id:"completion-outputs",placeholder:"completion outputs",value:(null===(n=c.completionOutputs)||void 0===n?void 0:n.join(","))||"",onChange:function(e){return P(e.target.value)}})}),(0,i.jsx)(u.FormGroup,{label:"Reactive Inputs",children:(0,i.jsx)(u.InputGroup,{id:"reactive-inputs",placeholder:"Reactive inputs",value:(null===(r=c.reactiveInputs)||void 0===r?void 0:r.join(","))||"",onChange:function(e){return x(e.target.value)}})})]}),(0,i.jsx)(u.FormGroup,{label:"Preview",children:(0,i.jsx)("div",{className:"preview-wrapper",children:(0,i.jsx)(l.PartPreview,{part:c})})})]})}},51424:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.metaChange=t.functionalChange=void 0;t.functionalChange=function(e){return{type:"functional",message:e}};t.metaChange=function(e){return void 0===e&&(e="n/a"),{type:"meta",message:e}}},63213:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InlineCodeModal=void 0;var u=n(24246),s=o(n(27378)),c=a(n(77324)),l=n(42272),d=a(n(60042)),p=n(52178),f=n(18265),m=n(70099),v="`Result is ${inputs.a + inputs.b}`";t.InlineCodeModal=s.memo((function(e){var t,n=e.initialValue,r=e.initialType,i=s.useState((0,f.isDefined)(n)?n:v),o=i[0],a=i[1],g=s.useState(r||f.InlineValuePartType.VALUE),h=g[0],y=g[1],b=(0,u.jsxs)("div",{children:[(0,u.jsxs)("p",{children:['You can add variables to by referrencing the "inputs" object.',(0,u.jsx)("br",{})," For example:",(0,u.jsx)(l.Code,{children:"`Hello {inputs.name}`"}),' will expose an input pin named "name"']}),(0,u.jsxs)("p",{children:["You can also use ternery expressions, arithmetic operators and more!",(0,u.jsx)("br",{}),"For example:",(0,u.jsx)(l.Code,{children:"inputs.a > inputs.b ? inputs.a + 42 : Math.random() * inputs.b"})]})]}),I=(0,u.jsxs)("span",{children:["Type in any valid JS value, such as ",(0,u.jsx)(l.Code,{children:"true"}),", ",(0,u.jsx)(l.Code,{children:"42"}),","," ",(0,u.jsx)(l.Code,{children:'["bob", "alice", "dave"]'}),".",(0,u.jsx)("br",{})," Dynamic inputs may also be used"]}),C=(0,u.jsxs)("span",{children:["Write any JS code and return a value.",(0,u.jsx)("br",{})," The returned value will be the output.",(0,u.jsx)("br",{})," Example:",(0,u.jsx)(l.Code,{children:"const a = inputs.a; const b = inputs.b; return Math.floor(a/b);"})]}),P=(0,p.getVariables)(o);return s.useEffect((function(){o===v&&h===f.InlineValuePartType.FUNCTION&&a("return "+v),o==="return "+v&&h===f.InlineValuePartType.VALUE&&a(v)}),[o,h]),(0,u.jsxs)(l.Dialog,{isOpen:!0,title:"Inline Value / Code",onClose:e.onCancel,className:"inline-code-modal",children:[(0,u.jsxs)("main",{className:(0,d.default)(l.Classes.DIALOG_BODY),onKeyDown:function(t){"Enter"===t.key&&t.metaKey&&e.onSubmit(h,o)},tabIndex:0,children:[(0,u.jsxs)(l.RadioGroup,{inline:!0,onChange:function(e){return y(e.target.value)},selectedValue:h,children:[(0,u.jsx)(l.Radio,{labelElement:(0,u.jsxs)(s.Fragment,{children:["Value"," ",(0,u.jsx)(m.Tooltip2,{content:I,placement:"top",children:(0,u.jsx)(l.Icon,{icon:"info-sign",intent:"primary"})})]}),value:f.InlineValuePartType.VALUE}),(0,u.jsx)(l.Radio,{labelElement:(0,u.jsxs)(s.Fragment,{children:["Function"," ",(0,u.jsx)(m.Tooltip2,{content:C,placement:"top",children:(0,u.jsx)(l.Icon,{icon:"info-sign",intent:"primary"})})]}),value:f.InlineValuePartType.FUNCTION})]}),(0,u.jsx)(c.default,{height:"80px",theme:"vs-dark",defaultLanguage:"javascript",value:o,onChange:function(e){return a(e||"")},onMount:function(e){e&&e.updateOptions({lineNumbers:"off",minimap:{enabled:!1}})}}),(t=o.includes("return"),t&&h===f.InlineValuePartType.VALUE?(0,u.jsx)(l.Callout,{intent:l.Intent.WARNING,children:'When using the "value" type you are not expected to return anything'}):t||h!==f.InlineValuePartType.FUNCTION?null:(0,u.jsxs)(l.Callout,{intent:l.Intent.DANGER,children:['When using the "function" type you are expected to'," ",(0,u.jsx)(l.Code,{children:"return"})," a value.",(0,u.jsx)("br",{}),"Example: ",(0,u.jsx)(l.Code,{children:"return 42 + Date.now();"})]})),(0,u.jsxs)(l.Callout,{intent:l.Intent.NONE,children:["Input pins detected:"," ",P.length?P.map((function(e){return(0,u.jsx)(l.Code,{children:e},e)})):"None",(0,u.jsx)(m.Tooltip2,{content:b,children:(0,u.jsx)(l.Icon,{icon:"info-sign",intent:l.Intent.PRIMARY})})]})]}),(0,u.jsx)("div",{className:l.Classes.DIALOG_FOOTER,children:(0,u.jsxs)("div",{className:l.Classes.DIALOG_FOOTER_ACTIONS,children:[(0,u.jsx)(l.Button,{onClick:e.onCancel,children:"Cancel"}),(0,u.jsx)(l.Button,{onClick:function(){return e.onSubmit(h,o)},intent:l.Intent.PRIMARY,className:"save-btn",children:"Save"})]})})]})}))},52178:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createInlineValuePart=t.getVariables=void 0;var r=n(18265),i=n(18265);t.getVariables=function(e){return(e.match(/inputs\.([a-zA-Z]\w*)/g)||[]).map((function(e){return e.replace(/inputs\./,"")}))};t.createInlineValuePart=function(e){var n=e.code,o=e.customView,a=e.partId,u=e.type,s=(0,t.getVariables)(n).reduce((function(e,t){var n;return Object.assign({},e,((n={})[t]=(0,r.partInput)(),n))}),{}),c={value:(0,r.partOutput)()},l=u===r.InlineValuePartType.FUNCTION?"const result = (function() { "+n+"}());\n  Promise.resolve(result).then(val => outputs.value.next(val))":"const result = ("+n+"); Promise.resolve(result).then(val => outputs.value.next(val))",d=btoa(n);return(0,i.inlineValuePart)({id:a||"Inline Code "+(0,r.randomInt)(99999),inputs:s,outputs:c,fnCode:l,customViewCode:o||n,dataBuilderSource:d,templateType:u,completionOutputs:["value"],defaultStyle:{size:"regular",icon:"code",cssOverride:{fontFamily:"monospace",fontWeight:"500"}},description:"Custom inline "+(u===r.InlineValuePartType.VALUE?"value":"function")})}},24935:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Omnibar=t.OmniBarCmdType=void 0;var u,s=n(24246),c=o(n(27378)),l=n(18264),d=n(18265),p=n(42272),f=a(n(60042));!function(e){e.ADD="add",e.ADD_VALUE="add-value",e.CREATE_CODE_PART="create-core-part",e.CREATE_GROUPED_PART="create-visual-part",e.IMPORT="import"}(u=t.OmniBarCmdType||(t.OmniBarCmdType={}));var m=[];t.Omnibar=function(e){var t=e.repo,n=c.useState(""),r=n[0],i=n[1],o=c.useState(null),a=o[0],v=o[1],g=c.useState([]),h=g[0],y=g[1];c.useEffect((function(){var e=(0,d.keys)(t).map((function(e){return{title:""+t[e].id,cmd:{type:u.ADD,data:e},extra:"current flow"}})),n=h.map((function(e){return{title:""+e.part.id,description:e.part.description,cmd:{type:u.IMPORT,data:e},extra:""+e.module}})),r={title:"Add inline value or code",suggestOnEmpty:!0,cmd:{type:u.ADD_VALUE}},i=[].concat(m,n,[r],e);v(i)}),[t,h]),c.useEffect((function(){e.onRequestImportables&&e.onRequestImportables(r).then((function(e){y(e)}))}),[e,r]);var b=c.useCallback((function(e,t){var n=t.handleClick,r=t.modifiers,i=(t.query,t.index);if(!r.matchesPredicate)return null;var o=""+e.title;return(0,s.jsx)(p.MenuItem,{active:r.active,disabled:r.disabled,onClick:n,text:(0,s.jsxs)("div",{className:(0,f.default)("omnibar-item",{active:r.active}),children:[(0,s.jsxs)("div",{className:"title",children:[o," ",e.extra?(0,s.jsx)("span",{className:"extra",children:e.extra}):null]}),e.description?(0,s.jsx)("div",{className:"description",children:e.description}):null]})},i)}),[]),I=c.useCallback((function(e,t){var n=e.toLowerCase().split("").map((function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")+".*"})).join(""),r=new RegExp(n);return!!t.title.toLowerCase().match(r)}),[]),C=c.useCallback((function(t){e.onCommand(t.cmd),e.onClose()}),[e]);return a?(0,s.jsx)(l.Omnibar,{query:r,onQueryChange:i,onClose:e.onClose,noResults:(0,s.jsx)(p.MenuItem,{disabled:!0,text:"No results."}),itemPredicate:I,isOpen:e.visible,items:a,initialContent:void 0,onItemSelect:C,itemRenderer:b,inputProps:{placeholder:"Search for parts or commands.."}}):null}},91312:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(2297),t)},2297:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default;Object.defineProperty(t,"__esModule",{value:!0}),t.usePorts=t.useConfirm=t.usePrompt=t.PortsContext=t.defaultPorts=void 0;var o,a=n(27378),u=function(){var e=i(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.defaultPorts={prompt:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=i(r().mark((function e(t){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.text,i=t.defaultValue,e.abrupt("return",prompt(""+n,i));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),openFile:(o=i(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)}),confirm:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=i(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.text,e.abrupt("return",confirm(n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),readFlow:u,saveFlow:u,resolveDeps:u,getImportables:u,onFlowChange:u},t.PortsContext=(0,a.createContext)(t.defaultPorts);t.usePrompt=function(){var e=(0,a.useContext)(t.PortsContext).prompt;return function(t,n){return e({text:t,defaultValue:n})}};t.useConfirm=function(){var e=(0,a.useContext)(t.PortsContext).confirm;return function(t){return e({text:t})}};t.usePorts=function(){return(0,a.useContext)(t.PortsContext)}},27234:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.groupSelected=void 0;var a=n(18265),u=o(n(63300)),s=n(78504),c=function(){var e=i(r().mark((function e(t,n,i,o,c){var l,d,p,f,m,v,g,h,y,b,I,C;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=n.instances,d=n.connections,p=l.filter((function(e){return t.includes(e.id)})),f=d.filter((function(e){var n=e.from,r=e.to;return-1!==t.indexOf(n.insId)||-1!==t.indexOf(r.insId)})),p.length){e.next=5;break}throw new Error("visual without selections");case 5:return e.next=7,(0,s.createGroup)(p,f,i,c);case 7:return m=e.sent,v=m.visualPart,g=m.renamedInputs,h=m.renamedOutputs,y=p.reduce((function(e,t){return(0,a.middlePos)(t.pos,e)}),l[0].pos),b="ref"===o?(0,a.partInstance)(v.id+"-ins",v.id,{},y):(0,a.inlinePartInstance)(v.id+"-ins",v,{},y),I=l.filter((function(e){return-1===t.indexOf(e.id)})),C=d.map((function(e){var t=e.from.insId+"."+e.from.pinId,n=e.to.insId+"."+e.to.pinId;return g[n]?Object.assign({},e,{to:{insId:b.id,pinId:g[n]}}):h[t]?Object.assign({},e,{from:{insId:b.id,pinId:h[t]}}):e})).filter((function(e){return-1===t.indexOf(e.from.insId)&&-1===t.indexOf(e.to.insId)})),e.abrupt("return",{newPart:v,currentPart:(0,u.default)(n,(function(e){e.instances=[].concat(I,[b]),e.connections=C}))});case 16:case"end":return e.stop()}}),e)})));return function(t,n,r,i,o){return e.apply(this,arguments)}}();t.groupSelected=c},96149:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(90412),t),i(n(12901),t),i(n(77437),t),i(n(40232),t),i(n(99457),t),i(n(51424),t),i(n(23489),t),i(n(69385),t),i(n(10934),t),i(n(4824),t),i(n(14648),t),i(n(26013),t),i(n(70030),t),i(n(11897),t),i(n(99743),t),i(n(57779),t),i(n(13011),t),i(n(12887),t)},60614:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserOnlyReactJson=void 0;var r=n(24246);t.BrowserOnlyReactJson=function(e){if("undefined"==typeof window)return null;var t=n(51366).default;return(0,r.jsx)(t,Object.assign({},e))}},26013:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyticsValueRenderer=void 0;var r=n(24246),i=n(18265),o=n(60614);t.AnalyticsValueRenderer=function(e){var t=e.val;try{var n=JSON.parse(t),a="object"==typeof n?n:{value:n},u=n&&[n.type,n.key,n.props,n.ref].every(i.isDefined),s=u?{jsxValue:n}:a;return(0,r.jsx)(o.BrowserOnlyReactJson,{src:s,name:!1,collapseStringsAfterLength:50,groupArraysAfterLength:5,collapsed:u})}catch(c){return(0,r.jsx)(o.BrowserOnlyReactJson,{src:{value:t},name:!1,collapseStringsAfterLength:50,groupArraysAfterLength:5})}}},78504:function(e,t,n){"use strict";var r=n(48357).default,i=n(45597).default,o=n(1145).default;Object.defineProperty(t,"__esModule",{value:!0}),t.createGroup=void 0;var a=n(18265),u=n(18265),s=n(99743),c=function(){var e=o(r().mark((function e(t,n,o,c){var l,d,p,f,m,v,g,h,y,b,I,C,P,x,j,_,O,E,w,S,M,k,D,T,N,R;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}throw new Error("cannot create group without instances");case 2:l=t.map((function(e){return e.id})),d=n.filter((function(e){var t=l.includes(e.from.insId),n=l.includes(e.to.insId);return!t&&n})).filter((function(e,t,n){return n.findIndex((function(t){return(0,u.connectionNodeEquals)(t.to,e.to)}))===t})),p=n.filter((function(e){var t=l.includes(e.from.insId),n=l.includes(e.to.insId);return t&&!n})).filter((function(e,t,n){return n.findIndex((function(t){return(0,u.connectionNodeEquals)(t.from,e.from)}))===t})),f={},m={},v={},g={},h=[],y={},b=i(d);case 12:if((I=b()).done){e.next=37;break}if(C=I.value,P=C.to.insId+"."+C.to.pinId,x=C.from.insId+"."+C.from.pinId,j=C.to.pinId,!v[x]){e.next=20;break}return h.push({from:(0,u.externalConnectionNode)(v[x]),to:(0,u.connectionNode)(C.to.insId,C.to.pinId)}),e.abrupt("continue",35);case 20:if(!y[j]){e.next=29;break}return e.next=23,c("Name this input ("+j+" of "+C.to.insId+") is already taken:");case 23:if(e.t1=e.sent,e.t1){e.next=26;break}e.t1="i"+(0,s.rnd)();case 26:e.t0=e.t1,e.next=30;break;case 29:e.t0=j;case 30:_=e.t0,f[P]=_,v[x]=_,h.push({from:(0,u.externalConnectionNode)(_),to:(0,u.connectionNode)(C.to.insId,C.to.pinId)}),y[_]=(0,u.partInput)();case 35:e.next=12;break;case 37:O={},E=i(p);case 39:if((w=E()).done){e.next=64;break}if(S=w.value,M=S.to.insId+"."+S.to.pinId,k=S.from.insId+"."+S.from.pinId,D=S.from.pinId,!g[M]){e.next=47;break}return h.push({from:(0,u.connectionNode)(S.from.insId,S.from.pinId),to:(0,u.externalConnectionNode)(g[M])}),e.abrupt("continue",62);case 47:if(!O[D]){e.next=56;break}return e.next=50,c("Name this output ("+D+" of "+S.from.insId+" is already taken:");case 50:if(e.t3=e.sent,e.t3){e.next=53;break}e.t3="i"+(0,s.rnd)();case 53:e.t2=e.t3,e.next=57;break;case 56:e.t2=D;case 57:T=e.t2,m[k]=T,g[M]=T,h.push({from:(0,u.connectionNode)(S.from.insId,S.from.pinId),to:(0,u.externalConnectionNode)(T)}),O[T]=(0,a.partOutput)();case 62:e.next=39;break;case 64:return t.reduce((function(e,t){return(0,u.middlePos)(t.pos,e)}),t[0].pos),N=n.filter((function(e){return l.includes(e.from.insId)&&l.includes(e.to.insId)})),R={id:o,inputs:y,outputs:O,instances:t,inputsPosition:(0,a.okeys)(y).reduce((function(e,t,n){var r;return Object.assign({},e,((r={})[t]={x:0+100*n,y:0},r))}),{}),outputsPosition:(0,a.okeys)(O).reduce((function(e,t,n){var r;return Object.assign({},e,((r={})[t]={x:0+100*n,y:400},r))}),{}),connections:[].concat(N,h),completionOutputs:(0,a.okeys)(O)},e.abrupt("return",{visualPart:R,renamedInputs:f,renamedOutputs:m});case 68:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}();t.createGroup=c},10934:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.highlightText=void 0;var r=n(24246);function i(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}t.highlightText=function(e,t){var n=0,o=t.split(/\s+/).filter((function(e){return e.length>0})).map(i);if(0===o.length)return[e];for(var a=new RegExp(o.join("|"),"gi"),u=[];;){var s=a.exec(e);if(!s)break;var c=s[0].length,l=e.slice(n,a.lastIndex-c);l.length>0&&u.push(l),n=a.lastIndex,u.push((0,r.jsx)("strong",{children:s[0]},n))}var d=e.slice(n);return d.length>0&&u.push(d),u}},99457:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Loader=void 0;var i=n(24246),o=r(n(44271));t.Loader=function(){return(0,i.jsx)(o.default,{type:"ball-clip-rotate",active:!0})}},12887:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0;var r=n(18265);t.logger=(0,r.debugLogger)("editor")},14264:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.preloadMonaco=void 0;var r=n(77324),i=n(12887),o=!1;t.preloadMonaco=function(){o||r.loader.init().then((function(){(0,i.logger)("monaco preloaded"),o=!0}))}},4824:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.appHotkeysConfig=t.hotkey=t.EditorHotkeyCmd=t.AppHotkeyCmd=void 0,function(e){e.SAVE_PART="save-part",e.NEW_PROJECT="new-project",e.SAVE_PROJECT="save-project",e.TOGGLE_SIDE="toggle-side",e.RUN="run",e.UNDO="undo"}(n=t.AppHotkeyCmd||(t.AppHotkeyCmd={})),function(e){e.SHOW_OMNIBAR="show-omnibar",e.CLEAR_SELECTION="clear-selection",e.DELETE_COMP="delete-comp",e.DUPLICATE_COMP="duplicate-comp",e.GROUP="group",e.SELECT_ALL="select-all",e.SELECT_CLOSEST="select-closest"}(t.EditorHotkeyCmd||(t.EditorHotkeyCmd={}));t.hotkey=function(e,t,n,r,i){return{combo:e,label:t,cmd:n,global:r,preventDefault:i}},t.appHotkeysConfig=[(0,t.hotkey)("shift+p","Save part",n.SAVE_PART,!0,!0),(0,t.hotkey)("shift+t","New project",n.NEW_PROJECT,!0,!0),(0,t.hotkey)("cmd+shift+s","Toggle side",n.TOGGLE_SIDE,!0,!0),(0,t.hotkey)("cmd+s","Toggle side",n.SAVE_PROJECT,!0,!0),(0,t.hotkey)("shift+r","Run",n.RUN,!0,!0)]},14648:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useHotkeys=void 0;var i=r(n(34618)),o=n(27378);t.useHotkeys=function(e,t,n,r,a){void 0===r&&(r=[]),void 0===a&&(a={});var u=(0,o.useCallback)((function(){n&&!n.current||t.apply(void 0,arguments)}),[].concat(r,[t]));(0,o.useEffect)((function(){return(0,i.default)(e,a,u),function(){return i.default.unbind(e,u)}}),[e,u,a])}},11897:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.safeSessionStorage=t.safeLocalstorage=void 0,t.safeLocalstorage={getItem:function(){try{var e;return(e=localStorage).getItem.apply(e,arguments)}catch(t){return null}},setItem:function(){try{var e;return(e=localStorage).setItem.apply(e,arguments)}catch(t){return null}}},t.safeSessionStorage={getItem:function(){try{var e;return(e=sessionStorage).getItem.apply(e,arguments)}catch(t){return null}},setItem:function(){try{var e;return(e=sessionStorage).setItem.apply(e,arguments)}catch(t){return null}}}},49040:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomReactTooltip=void 0;var i=n(24246),o=n(27378),a=r(n(31542)),u=r(n(87661));function s(e){var t=e.children,n=e.domNode;return a.default.createPortal(t,n)}t.CustomReactTooltip=function(e){var t=(0,o.useRef)();return(0,o.useEffect)((function(){t.current=document.createElement("div"),document.body.appendChild(t.current)}),[]),t.current?(0,i.jsx)(s,{domNode:t.current,children:(0,i.jsx)(u.default,Object.assign({},e))}):null},t.default=t.CustomReactTooltip},77437:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useLocalStorage=t.useResizePref=t.userPreferences=t.useUserPref=void 0;var a,u=o(n(27378)),s=n(12901),c=n(11897);t.useUserPref=function(e,n){var r=u.useState((function(){var r=t.userPreferences.getItem(e);return(0,s.isDefined)(r)?r:n})),i=r[0],o=r[1];u.useEffect((function(){var r=t.userPreferences.getItem(e),i=(0,s.isDefined)(r)?r:n;o(i)}),[e]);return[i,function(n){t.userPreferences.setItem(e,n),console.log("Saved",e,n),o(n)}]},t.userPreferences=(a=function(e){return"up."+e},{getItem:function(e){var t=c.safeLocalstorage.getItem(a(e))||"",n=c.safeSessionStorage.getItem(a(e))||"";try{return JSON.parse(n||t).value}catch(r){return}},setItem:function(e,t,n){void 0===n&&(n=!1);var r=n?sessionStorage:c.safeLocalstorage;try{var i=JSON.stringify({value:t});return r.setItem(a(e),i),!0}catch(o){return console.error("Error saving user preference",o),!1}}});t.useResizePref=function(e,n){var r="resize."+e;return(0,t.useUserPref)(r,n)};var l=function(e){var t=c.safeLocalstorage.getItem(e);if(!t)return null;try{return JSON.parse(t).value}catch(n){return null}};t.useLocalStorage=function(e,t){var n=u.useState(l(e)||t),r=n[0],i=n[1],o=u.useCallback((function(t){c.safeLocalstorage.setItem(e,JSON.stringify({value:t})),i(t)}),[e]);return u.useEffect((function(){l(e)||c.safeLocalstorage.setItem(e,JSON.stringify({value:t}))}),[e,t,o]),[r,o]}},99743:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.totalEnergy=t.itrPhysics=t.hookes=t.coulombs=t.vToStr=t.vNorm=t.vLen=t.vSub=t.vAdd=t.vDiv=t.vMul=t.vZero=t.rnd=t.vec=t.size=void 0;t.size=function(e,t){return{width:e,height:t}};t.vec=function(e,t){return{x:e,y:t}};t.rnd=function(e,t){return void 0===e&&(e=100),void 0===t&&(t=0),Math.floor(Math.random()*(e-t))+t},t.vZero={x:0,y:0};t.vMul=function(e,t){return{x:e.x*t,y:e.y*t}};t.vDiv=function(e,n){var r=e.x,i=e.y;return(0,t.vMul)({x:r,y:i},1/n)};t.vAdd=function(e,t){return{x:e.x+t.x,y:e.y+t.y}};t.vSub=function(e,n){return(0,t.vAdd)(e,(0,t.vMul)(n,-1))};t.vLen=function(e){var t=e.x,n=e.y;return Math.sqrt(t*t+n*n)};t.vNorm=function(e){return(0,t.vDiv)(e,(0,t.vLen)(e)||1)};t.vToStr=function(e){var t=e.x,n=e.y;return t.toFixed(1)+","+n.toFixed(1)};t.coulombs=function(e,n,r){var i=(0,t.vLen)((0,t.vSub)(e.p,n.p));if(0===i){var o=(0,t.vec)(2*Math.random()-1,2*Math.random()-1),a=e.m*n.m/Math.pow(10,2);return(0,t.vMul)(o,a*r)}var u=(0,t.vNorm)((0,t.vSub)(n.p,e.p)),s=e.m*n.m/Math.pow(i+.1,2);return(0,t.vMul)(u,s*r)};t.hookes=function(e,n,r,i,o){var a=(0,t.vLen)((0,t.vSub)(e.p,n.p)),u=(0,t.vNorm)((0,t.vSub)(e.p,n.p)),s=0;return a<r?s=r-a:a>i&&(s=i-a),(0,t.vMul)(u,o*s)};t.itrPhysics=function(e,n){var r=n.p,i=n.v,o=n.f,a=n.m,u=(0,t.vDiv)(o,a),s=e/1e3,c=(0,t.vAdd)((0,t.vMul)(u,s),i),l=(0,t.vAdd)((0,t.vMul)(c,s),r);return Object.assign({},n,{p:l,v:c,f:(0,t.vec)(0,0)})};t.totalEnergy=function(e){return e.reduce((function(e,n){var r=(0,t.vLen)(n.v);return e+.5*n.m*r*r}),0)}},40232:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateToast=t.toastMsg=t.AppToaster=void 0;var r=n(42272);t.AppToaster=function(){try{return r.Toaster.create({className:"app-toaster",position:r.Position.BOTTOM_RIGHT})}catch(e){return{}}}();t.toastMsg=function(e,n,r){return t.AppToaster.show({message:e,intent:n,timeout:r})};t.updateToast=function(e,n,r){return t.AppToaster.show({message:n,intent:r},e)}},12901:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.preventDefaultAnd=t.isLocal=t.fullTime=t.timeAgoFromDt=t.timeAgo=t.toString=t.isDefined=t.set=t.createOmap=t.toOmap=t.values=t.keys=t.entries=void 0;var i=n(13011),o=n(18265),a=r(n(61320));t.entries=function(e){return Object.keys(e).map((function(t){return[t,e[t]]}))};t.keys=function(e){return Object.keys(e)};t.values=function(e){return Object.keys(e).map((function(t){return e[t]}))};t.toOmap=function(e){return Array.from(e.entries()).reduce((function(e,t){var n,r=t[0],i=t[1];return Object.assign({},e,((n={})[r]=i,n))}),{})};t.createOmap=function(e){return void 0===e&&(e=[]),e.reduce((function(e,t){var n;return Object.assign({},e,((n={})[t[0]]=t[1],n))}),{})};t.set=function(e,t,n){e[t]=n};t.isDefined=function(e){return void 0!==e};t.toString=function(e){var t=typeof e;if(""===e)return"(empty string)";if((0,i.isJsxValue)(e))return"JSX Value";if((0,o.isStaticValueVisualPart)(e))return"Embedded Part";if((0,o.isEnvValue)(e))return(0,o.getEnvKeyFromValue)(e);if("object"===t)try{var n=JSON.stringify(e);return"{}"===n?"Empty object":n}catch(r){return"Object (cannot stringify)"}return""+e};t.timeAgo=function(e){return(0,a.default)(new Date(e)).fromNow()};t.timeAgoFromDt=function(e){return(0,a.default)(Date.now()-e).fromNow()};t.fullTime=function(e){return(0,a.default)(new Date(e)).toString()};t.isLocal=function(){return location.href.includes(":300")};t.preventDefaultAnd=function(e){return function(t){t.preventDefault(),e(t)}}},9631:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ActionButton=t.ActionsMenu=t.ActionType=void 0;var u,s=n(24246),c=n(70099),l=n(18265),d=a(n(27378)),p=n(14648),f=n(40232),m=n(70760),v=n(32330);!function(e){e.AddPart="add-part",e.RemovePart="remove-part",e.Group="group",e.Ungroup="ungroup",e.AddInlineValue="add-inline-value",e.Inspect="inspect"}(u=t.ActionType||(t.ActionType={}));t.ActionsMenu=function(e){var n=e.onAction,r=e.selectedInstances,i=e.repo,o=e.part,a=e.from,c=e.to,v=e.hotkeysEnabled,h=d.default.useState(!1),y=h[0],b=h[1],I=(0,d.useCallback)((function(){b(!1)}),[]),C=[];if(C.push(u.AddPart),C.push(u.AddInlineValue),1===r.length){var P=o.instances.find((function(e){return e.id===r[0]}));if(P)try{var x=(0,l.getPartDef)(P,i);(0,l.isVisualPart)(x)&&C.push(u.Ungroup)}catch(O){console.error("Could not find part with id "+r[0]+" - "+O)}else console.error("Could not find instance with id "+r[0])}r.length>0&&C.push(u.Group),(1===r.length||a||c)&&C.push(u.Inspect),r.length>0&&C.push(u.RemovePart);var j=(0,d.useCallback)((function(e,t){if("click"===t.type&&g[e].hotkey&&(0,f.toastMsg)((0,s.jsxs)(s.Fragment,{children:["Did you know? you can also use the hotkey ",(0,s.jsx)("kbd",{className:"hotkey",children:g[e].hotkey})," to ",g[e].text.replace(/^[A-Z]/,(function(e){return e.toLowerCase()}))]}),"info",4e3),e===u.AddPart)b(!0);else n({type:e,data:void 0})}),[n]);Object.entries(g).forEach((function(e){var t=e[0],n=e[1];n.hotkey&&(0,p.useHotkeys)(n.hotkey,(function(e){e.preventDefault(),j(t,e)}),v)}));var _=(0,d.useCallback)((function(e){n({type:u.AddPart,data:{importablePart:e}})}),[n]);return(0,s.jsxs)("div",{className:"actions-menu",children:[C.map((function(e){return(0,s.jsx)(t.ActionButton,{type:e,onClick:j},e)})),y?(0,s.jsx)(m.AddPartMenu,{onRequestImportables:e.onRequestImportables,onAddPart:_,onClose:I}):null]})};var g=((r={})[u.AddPart]={icon:v.addPartIcon,text:'Open the "add part" menu',hotkey:"a"},r[u.RemovePart]={icon:v.removePartIcon,text:"Remove selected instances",hotkey:"backspace"},r[u.Group]={icon:v.groupIcon,text:"Group selection into a new part",hotkey:"g"},r[u.Ungroup]={icon:v.ungroupIcon,text:"Ungroup selected visual part"},r[u.Inspect]={icon:v.inspectIcon,text:"Inspect data",hotkey:"i"},r[u.AddInlineValue]={icon:v.pencilIcon,text:"Add value / inline function",hotkey:"v"},r),h={icon:"",text:"N/A",hotkey:void 0};t.ActionButton=function(e){var t,n=e.onClick,r=e.type,i=(0,d.useCallback)((function(e){return n(r,e)}),[n,r]),o=null!==(t=g[r])&&void 0!==t?t:h,a=o.hotkey?(0,s.jsxs)("span",{children:[o.text," ",(0,s.jsx)("kbd",{className:"hotkey",children:o.hotkey})]}):o.text;return(0,s.jsx)("div",{className:"action-button",onClick:i,children:(0,s.jsx)(c.Tooltip2,{hoverOpenDelay:100,content:a,className:"icon-wrapper",popoverClassName:"action-button-tooltip",children:(0,s.jsx)("span",{dangerouslySetInnerHTML:{__html:o.icon}})})})}},17982:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AddPartMenu=t.AddPartMenuFilterTree=void 0;var u=n(24246),s=n(42272),c=n(70099),l=a(n(60042)),d=o(n(27378)),p=n(99457),f=n(61335),m=n(83696);t.AddPartMenuFilterTree=s.Tree.ofType();function v(e,t,n){var r=e.external.map((function(e){return{id:e.module,label:e.module,hasCaret:!0,nodeData:{type:"external",module:e.module},isSelected:"external"===(null==t?void 0:t.type)&&t.module===e.module,isExpanded:n.has(e.module),childNodes:e.namespaces.map((function(r){return{id:e.module+"/"+r,label:r,hasCaret:!1,isSelected:"external"===(null==t?void 0:t.type)&&t.module===e.module&&t.namespace===r,isExpanded:n.has(e.module+"/"+r),nodeData:{type:"external",module:e.module,namespace:r}}}))}})),i={id:"internal",label:"Current Project",nodeData:{type:"internal"},isExpanded:n.has("internal"),hasCaret:!0,isSelected:"internal"===t.type,childNodes:e.internal.files.map((function(e){return{id:e,label:e,isSelected:"internal"===t.type&&t.file===e,hasCaret:!1,isExpanded:n.has(e),nodeData:{type:"internal",file:e}}}))};return[].concat(r,[i])}function g(e){return/\.flyde(\.[jt]s)?$/.test(e.module)}t.AddPartMenu=function(e){var n=e.onRequestImportables,r=e.onAddPart,i=e.onClose,o=d.default.useState(),a=o[0],h=o[1],y=d.default.useState(new Set),b=y[0],I=y[1],C=d.default.useState(""),P=C[0],x=C[1],j=d.default.useState({type:"all"}),_=j[0],O=j[1],E=d.default.useState(null),w=E[0],S=E[1],M=d.default.useState(null),k=M[0],D=M[1],T=d.default.useState(null),N=T[0],R=T[1],A=(0,d.useCallback)((function(e){b.add(e.id),I(new Set(b))}),[b]),V=(0,d.useCallback)((function(e){b.delete(e.id),I(new Set(b))}),[b]),z=(0,d.useCallback)((function(e){r(e),i()}),[r,i]);(0,d.useEffect)((function(){D(null==a?void 0:a.filter((function(e){var t;if(_)if("external"===_.type){if((e.module!==_.module||_.namespace)&&e.part.namespace!==_.namespace)return!1}else if("internal"===_.type&&(!g(e)||_.file&&e.module!==_.file))return!1;return!P||(e.part.id+" "+(null!==(t=e.part.namespace)&&void 0!==t?t:"")+" "+e.part.description).toLowerCase().includes(P.toLowerCase())})))}),[a,_,P]),(0,d.useEffect)((function(){n().then((function(e){var t=e.filter((function(e){return!g(e)})).reduce((function(e,t){var n,r,i;null!==(n=e[i=t.module])&&void 0!==n||(e[i]=[]);var o=null!==(r=t.part.namespace)&&void 0!==r?r:"";return e[t.module].includes(o)||e[t.module].push(o),e}),{}),n=e.filter(g).map((function(e){return e.module}));S({external:Object.entries(t).map((function(e){return{module:e[0],namespaces:e[1]}})),internal:{files:n}}),h(e),I(new Set(["internal"].concat(Object.keys(t))))}))}),[n]);var H=(0,d.useCallback)((function(e){switch(e.key){case"ArrowDown":case"ArrowUp":if(e.preventDefault(),k&&!N)return void R(k["ArrowDown"===e.key?0:k.length-1]);if(k&&N){var t=k.findIndex((function(e){return e===N})),n="ArrowDown"===e.key?t+1:t-1;n=(n=n<0?k.length-1:n)>=k.length?0:n,R(k[n])}break;case"Enter":N&&z(N)}}),[k,N,z]),G=(0,d.useCallback)((function(e){var t=e.nodeData;JSON.stringify(t)===JSON.stringify(_)?"external"===t.type?t.namespace?O({type:"external",module:t.module}):O({type:"all"}):"internal"===t.type&&(t.file?O({type:"internal"}):O({type:"all"})):O(t)}),[_]);return(0,u.jsx)(s.Dialog,{isOpen:!0,title:"Add Part Menu",onClose:e.onClose,className:"add-part-menu",isCloseButtonShown:!0,children:(0,u.jsxs)("main",{className:(0,l.default)(s.Classes.DIALOG_BODY),children:[(0,u.jsx)("header",{children:(0,u.jsxs)("div",{className:"bp3-input-group",children:[(0,u.jsx)(s.Icon,{icon:"search"}),(0,u.jsx)("input",{className:"bp3-input",type:"search",placeholder:"Search input",dir:"auto",autoFocus:!0,onChange:function(e){return x(e.target.value)},value:P,onKeyDown:H})]})}),(0,u.jsx)("div",{className:"content-wrapper",children:a?(0,u.jsxs)(d.default.Fragment,{children:[(0,u.jsxs)("aside",{children:[(0,u.jsxs)("div",{className:"filter-header",children:["Filter by package"," ",(0,u.jsx)(c.Tooltip2,{content:(0,u.jsxs)("span",{children:["Click to learn more about how packages work in Flyde"," "]}),hoverCloseDelay:1500,children:(0,u.jsx)("a",{target:"_blank",href:"https://www.flyde.dev/docs/packages",rel:"noreferrer",children:(0,u.jsx)(s.Icon,{icon:"help",intent:"primary",iconSize:12})})})]}),(0,u.jsx)("div",{className:"tree-container",children:(0,u.jsx)(t.AddPartMenuFilterTree,{contents:v(w,_,b),onNodeCollapse:V,onNodeExpand:A,onNodeClick:G,className:s.Classes.ELEVATION_0})})]}),(0,u.jsx)("main",{children:k?0===k.length?(0,u.jsxs)("div",{className:"no-results",children:[(0,u.jsx)(m.AddPartMenuResultsSummary,{filter:_,onChangeFilter:O,query:P,onChangeQuery:x,resultsCount:k.length}),(0,u.jsxs)(s.Callout,{className:"callout",intent:"primary",children:["Can't find a suitable part? Create one yourself! ",(0,u.jsx)("a",{href:"https://www.flyde.dev/docs/code-parts",target:"_blank",rel:"noreferrer",children:"Learn more"})]})]}):(0,u.jsxs)(d.default.Fragment,{children:[(0,u.jsx)(m.AddPartMenuResultsSummary,{filter:_,onChangeFilter:O,query:P,onChangeQuery:x,resultsCount:k.length}),(0,u.jsx)("div",{className:"results",children:k.map((function(e){return(0,u.jsx)(f.AddPartMenuListItem,{importablePart:e,onAdd:z,selected:(null==N?void 0:N.part)===e.part,onSelect:R,onSetFilter:O},e.part.id+e.module)}))})]}):(0,u.jsx)(p.Loader,{})})]}):(0,u.jsx)(p.Loader,{})})]})})}},59021:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AddPartMenuListItem=void 0;var u=n(24246),s=n(42272),c=a(n(60042)),l=o(n(27378));t.AddPartMenuListItem=function(e){var t=e.importablePart,n=e.onSetFilter,r=e.onAdd,i=e.onSelect,o=t.part,a=t.module,d=o.id,p=o.description,f=l.default.useRef(null);l.default.useEffect((function(){e.selected&&f.current&&f.current.scrollIntoView({block:"center"})}),[e.selected]);var m=(0,l.useCallback)((function(){r(t)}),[r,t]),v=(0,l.useCallback)((function(){i(t)}),[i,t]);return(0,u.jsxs)("div",{className:(0,c.default)("add-part-menu-list-item",{selected:e.selected}),ref:f,onClick:v,children:[(0,u.jsxs)("div",{className:"content",children:[(0,u.jsxs)("header",{children:[(0,u.jsx)("span",{className:"id",children:d}),(0,u.jsxs)(s.Tag,{interactive:!0,onClick:function(){return n({type:"external",module:a,namespace:o.namespace})},className:"source",minimal:!0,children:[a,o.namespace?" / "+o.namespace:null]})]}),(0,u.jsx)("div",{className:"description",children:p||(0,u.jsx)("em",{children:"No description"})})]}),(0,u.jsx)("aside",{children:(0,u.jsx)(s.Button,{onClick:m,children:"Add"})})]})}},61335:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(59021),t)},53972:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddPartMenuResultsSummary=void 0;var r=n(24246),i=n(42272);t.AddPartMenuResultsSummary=function(e){var t=e.resultsCount,n=e.query,o=e.filter,a=e.onChangeFilter,u=e.onChangeQuery;return(0,r.jsxs)("div",{className:"add-part-menu-results-summary",children:[t?"Showing "+t+" result"+(t>1?"s":""):"No results found","\xa0",n?(0,r.jsxs)(r.Fragment,{children:["matching query\xa0",(0,r.jsxs)(i.Tag,{minimal:!0,interactive:!0,onRemove:function(){return u("")},children:['"',n,'"']})]}):null,"all"===o.type?null:"external"===o.type?(0,r.jsxs)(r.Fragment,{children:["from \xa0",(0,r.jsxs)(i.Tag,{minimal:!0,interactive:!0,onRemove:function(){return a({type:"all"})},children:["package ",o.module,o.namespace?" / "+o.namespace:null]})]}):(0,r.jsxs)(r.Fragment,{children:["from \xa0",(0,r.jsxs)(i.Tag,{minimal:!0,interactive:!0,onRemove:function(){return a({type:"all"})},children:["\xa0this project ",o.file?" / "+o.file:null]})]})]})}},83696:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(53972),t)},70760:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(17982),t)},32330:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pencilIcon=t.ungroupIcon=t.groupIcon=t.inspectIcon=t.removePartIcon=t.addPartIcon=void 0,t.addPartIcon='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M15 7H9V1C9 0.734784 8.89464 0.48043 8.70711 0.292893C8.51957 0.105357 8.26522 0 8 0C7.73478 0 7.48043 0.105357 7.29289 0.292893C7.10536 0.48043 7 0.734784 7 1V7H1C0.734784 7 0.48043 7.10536 0.292893 7.29289C0.105357 7.48043 0 7.73478 0 8C0 8.26522 0.105357 8.51957 0.292893 8.70711C0.48043 8.89464 0.734784 9 1 9H7V15C7 15.2652 7.10536 15.5196 7.29289 15.7071C7.48043 15.8946 7.73478 16 8 16C8.26522 16 8.51957 15.8946 8.70711 15.7071C8.89464 15.5196 9 15.2652 9 15V9H15C15.2652 9 15.5196 8.89464 15.7071 8.70711C15.8946 8.51957 16 8.26522 16 8C16 7.73478 15.8946 7.48043 15.7071 7.29289C15.5196 7.10536 15.2652 7 15 7Z"/>\n</svg>',t.removePartIcon='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M10.0002 18C10.2655 18 10.5198 17.8946 10.7074 17.7071C10.8949 17.5196 11.0002 17.2652 11.0002 17V11C11.0002 10.7348 10.8949 10.4804 10.7074 10.2929C10.5198 10.1054 10.2655 10 10.0002 10C9.73503 10 9.48067 10.1054 9.29314 10.2929C9.1056 10.4804 9.00024 10.7348 9.00024 11V17C9.00024 17.2652 9.1056 17.5196 9.29314 17.7071C9.48067 17.8946 9.73503 18 10.0002 18ZM20.0002 6H16.0002V5C16.0002 4.20435 15.6842 3.44129 15.1216 2.87868C14.559 2.31607 13.7959 2 13.0002 2H11.0002C10.2046 2 9.44153 2.31607 8.87892 2.87868C8.31631 3.44129 8.00024 4.20435 8.00024 5V6H4.00024C3.73503 6 3.48067 6.10536 3.29314 6.29289C3.1056 6.48043 3.00024 6.73478 3.00024 7C3.00024 7.26522 3.1056 7.51957 3.29314 7.70711C3.48067 7.89464 3.73503 8 4.00024 8H5.00024V19C5.00024 19.7956 5.31631 20.5587 5.87892 21.1213C6.44153 21.6839 7.20459 22 8.00024 22H16.0002C16.7959 22 17.559 21.6839 18.1216 21.1213C18.6842 20.5587 19.0002 19.7956 19.0002 19V8H20.0002C20.2655 8 20.5198 7.89464 20.7074 7.70711C20.8949 7.51957 21.0002 7.26522 21.0002 7C21.0002 6.73478 20.8949 6.48043 20.7074 6.29289C20.5198 6.10536 20.2655 6 20.0002 6ZM10.0002 5C10.0002 4.73478 10.1056 4.48043 10.2931 4.29289C10.4807 4.10536 10.735 4 11.0002 4H13.0002C13.2655 4 13.5198 4.10536 13.7074 4.29289C13.8949 4.48043 14.0002 4.73478 14.0002 5V6H10.0002V5ZM17.0002 19C17.0002 19.2652 16.8949 19.5196 16.7074 19.7071C16.5198 19.8946 16.2655 20 16.0002 20H8.00024C7.73503 20 7.48067 19.8946 7.29314 19.7071C7.1056 19.5196 7.00024 19.2652 7.00024 19V8H17.0002V19ZM14.0002 18C14.2655 18 14.5198 17.8946 14.7074 17.7071C14.8949 17.5196 15.0002 17.2652 15.0002 17V11C15.0002 10.7348 14.8949 10.4804 14.7074 10.2929C14.5198 10.1054 14.2655 10 14.0002 10C13.735 10 13.4807 10.1054 13.2931 10.2929C13.1056 10.4804 13.0002 10.7348 13.0002 11V17C13.0002 17.2652 13.1056 17.5196 13.2931 17.7071C13.4807 17.8946 13.735 18 14.0002 18Z"/>\n</svg>',t.inspectIcon='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M21.07 16.8302L19 14.7102C18.5547 14.2869 17.9931 14.0065 17.3872 13.9049C16.7813 13.8034 16.1589 13.8853 15.6 14.1402L14.7 13.2402C15.7605 11.8231 16.2449 10.0569 16.0555 8.29702C15.8662 6.53718 15.0172 4.91441 13.6794 3.75539C12.3417 2.59636 10.6145 1.98714 8.84565 2.05037C7.07678 2.1136 5.39754 2.84458 4.14596 4.09615C2.89438 5.34773 2.1634 7.02698 2.10017 8.79585C2.03695 10.5647 2.64617 12.2919 3.80519 13.6296C4.96421 14.9674 6.58699 15.8164 8.34683 16.0057C10.1067 16.1951 11.8729 15.7107 13.29 14.6502L14.18 15.5402C13.8951 16.0998 13.793 16.7348 13.8881 17.3555C13.9831 17.9762 14.2706 18.5515 14.71 19.0002L16.83 21.1202C17.3925 21.682 18.155 21.9975 18.95 21.9975C19.745 21.9975 20.5075 21.682 21.07 21.1202C21.3557 20.8408 21.5828 20.5071 21.7378 20.1388C21.8928 19.7704 21.9726 19.3748 21.9726 18.9752C21.9726 18.5756 21.8928 18.1799 21.7378 17.8116C21.5828 17.4432 21.3557 17.1096 21.07 16.8302V16.8302ZM12.59 12.5902C11.8902 13.2882 10.9993 13.7631 10.0297 13.955C9.06017 14.1469 8.05549 14.0472 7.14259 13.6684C6.2297 13.2896 5.44955 12.6487 4.9007 11.8267C4.35185 11.0048 4.05893 10.0386 4.05893 9.05019C4.05893 8.06182 4.35185 7.09562 4.9007 6.27365C5.44955 5.45168 6.2297 4.81081 7.14259 4.432C8.05549 4.05319 9.06017 3.95343 10.0297 4.14534C10.9993 4.33724 11.8902 4.81219 12.59 5.51019C13.0556 5.97464 13.4251 6.5264 13.6771 7.13385C13.9292 7.7413 14.0589 8.39251 14.0589 9.05019C14.0589 9.70786 13.9292 10.3591 13.6771 10.9665C13.4251 11.574 13.0556 12.1257 12.59 12.5902V12.5902ZM19.66 19.6602C19.567 19.7539 19.4564 19.8283 19.3346 19.8791C19.2127 19.9298 19.082 19.956 18.95 19.956C18.818 19.956 18.6873 19.9298 18.5654 19.8791C18.4436 19.8283 18.333 19.7539 18.24 19.6602L16.12 17.5402C16.0263 17.4472 15.9519 17.3366 15.9011 17.2148C15.8503 17.0929 15.8242 16.9622 15.8242 16.8302C15.8242 16.6982 15.8503 16.5675 15.9011 16.4456C15.9519 16.3237 16.0263 16.2131 16.12 16.1202C16.213 16.0265 16.3236 15.9521 16.4454 15.9013C16.5673 15.8505 16.698 15.8244 16.83 15.8244C16.962 15.8244 17.0927 15.8505 17.2146 15.9013C17.3364 15.9521 17.447 16.0265 17.54 16.1202L19.66 18.2402C19.7537 18.3331 19.8281 18.4437 19.8789 18.5656C19.9297 18.6875 19.9558 18.8182 19.9558 18.9502C19.9558 19.0822 19.9297 19.2129 19.8789 19.3348C19.8281 19.4566 19.7537 19.5672 19.66 19.6602V19.6602Z"/>\n</svg>\n',t.groupIcon='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M16 9.99998H14V7.99998C14 7.73477 13.8946 7.48041 13.7071 7.29288C13.5196 7.10534 13.2652 6.99998 13 6.99998H7.99998C7.73477 6.99998 7.48041 7.10534 7.29288 7.29288C7.10534 7.48041 6.99998 7.73477 6.99998 7.99998V13C6.99998 13.2652 7.10534 13.5196 7.29288 13.7071C7.48041 13.8946 7.73477 14 7.99998 14H9.99998V16C9.99998 16.2652 10.1053 16.5196 10.2929 16.7071C10.4804 16.8946 10.7348 17 11 17H16C16.2652 17 16.5196 16.8946 16.7071 16.7071C16.8946 16.5196 17 16.2652 17 16V11C17 10.7348 16.8946 10.4804 16.7071 10.2929C16.5196 10.1053 16.2652 9.99998 16 9.99998ZM9.99998 11V12H8.99998V8.99998H12V9.99998H11C10.7348 9.99998 10.4804 10.1053 10.2929 10.2929C10.1053 10.4804 9.99998 10.7348 9.99998 11ZM15 15H12V12H15V15ZM21 18.28V5.71998C21.2704 5.56955 21.5023 5.3584 21.6773 5.10317C21.8523 4.84793 21.9657 4.55556 22.0085 4.24906C22.0514 3.94257 22.0225 3.63031 21.9242 3.33686C21.8259 3.04342 21.6608 2.77679 21.442 2.55795C21.2232 2.33912 20.9565 2.17406 20.6631 2.07575C20.3697 1.97745 20.0574 1.94858 19.7509 1.99143C19.4444 2.03427 19.152 2.14766 18.8968 2.32267C18.6416 2.49768 18.4304 2.72953 18.28 2.99998H5.71998C5.56955 2.72953 5.3584 2.49768 5.10317 2.32267C4.84793 2.14766 4.55556 2.03427 4.24906 1.99143C3.94257 1.94858 3.63031 1.97745 3.33686 2.07575C3.04342 2.17406 2.77679 2.33912 2.55795 2.55795C2.33912 2.77679 2.17406 3.04342 2.07575 3.33686C1.97745 3.63031 1.94858 3.94257 1.99143 4.24906C2.03427 4.55556 2.14766 4.84793 2.32267 5.10317C2.49768 5.3584 2.72953 5.56955 2.99998 5.71998V18.28C2.72953 18.4304 2.49768 18.6416 2.32267 18.8968C2.14766 19.152 2.03427 19.4444 1.99143 19.7509C1.94858 20.0574 1.97745 20.3697 2.07575 20.6631C2.17406 20.9565 2.33912 21.2232 2.55795 21.442C2.77679 21.6608 3.04342 21.8259 3.33686 21.9242C3.63031 22.0225 3.94257 22.0514 4.24906 22.0085C4.55556 21.9657 4.84793 21.8523 5.10317 21.6773C5.3584 21.5023 5.56955 21.2704 5.71998 21H18.28C18.4304 21.2704 18.6416 21.5023 18.8968 21.6773C19.152 21.8523 19.4444 21.9657 19.7509 22.0085C20.0574 22.0514 20.3697 22.0225 20.6631 21.9242C20.9565 21.8259 21.2232 21.6608 21.442 21.442C21.6608 21.2232 21.8259 20.9565 21.9242 20.6631C22.0225 20.3697 22.0514 20.0574 22.0085 19.7509C21.9657 19.4444 21.8523 19.152 21.6773 18.8968C21.5023 18.6416 21.2704 18.4304 21 18.28ZM19 18.28C18.6993 18.4504 18.4504 18.6993 18.28 19H5.71998C5.54956 18.6993 5.30071 18.4504 4.99998 18.28V5.71998C5.30071 5.54956 5.54956 5.30071 5.71998 4.99998H18.28C18.4504 5.30071 18.6993 5.54956 19 5.71998V18.28Z"/>\n</svg>\n',t.ungroupIcon='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M21.0002 18.28V11.72C21.2707 11.5695 21.5025 11.3584 21.6775 11.1032C21.8525 10.8479 21.9659 10.5556 22.0088 10.2491C22.0516 9.94257 22.0228 9.63031 21.9245 9.33686C21.8262 9.04342 21.6611 8.77679 21.4423 8.55795C21.2234 8.33912 20.9568 8.17406 20.6633 8.07575C20.3699 7.97745 20.0576 7.94858 19.7511 7.99143C19.4447 8.03427 19.1523 8.14766 18.897 8.32267C18.6418 8.49768 18.4307 8.72953 18.2802 8.99998H15.0002V5.71998C15.2707 5.56955 15.5025 5.3584 15.6775 5.10317C15.8525 4.84793 15.9659 4.55556 16.0088 4.24906C16.0516 3.94257 16.0228 3.63031 15.9245 3.33686C15.8262 3.04342 15.6611 2.77679 15.4423 2.55795C15.2234 2.33912 14.9568 2.17406 14.6633 2.07575C14.3699 1.97745 14.0576 1.94858 13.7511 1.99143C13.4447 2.03427 13.1523 2.14766 12.897 2.32267C12.6418 2.49768 12.4307 2.72953 12.2802 2.99998H5.72023C5.56979 2.72953 5.35865 2.49768 5.10341 2.32267C4.84817 2.14766 4.5558 2.03427 4.24931 1.99143C3.94281 1.94858 3.63055 1.97745 3.33711 2.07575C3.04366 2.17406 2.77703 2.33912 2.5582 2.55795C2.33937 2.77679 2.1743 3.04342 2.076 3.33686C1.97769 3.63031 1.94883 3.94257 1.99167 4.24906C2.03452 4.55556 2.14791 4.84793 2.32291 5.10317C2.49792 5.3584 2.72977 5.56955 3.00023 5.71998V12.28C2.72977 12.4304 2.49792 12.6416 2.32291 12.8968C2.14791 13.152 2.03452 13.4444 1.99167 13.7509C1.94883 14.0574 1.97769 14.3697 2.076 14.6631C2.1743 14.9565 2.33937 15.2232 2.5582 15.442C2.77703 15.6608 3.04366 15.8259 3.33711 15.9242C3.63055 16.0225 3.94281 16.0514 4.24931 16.0085C4.5558 15.9657 4.84817 15.8523 5.10341 15.6773C5.35865 15.5023 5.56979 15.2704 5.72023 15H9.00023V18.28C8.72977 18.4304 8.49792 18.6416 8.32291 18.8968C8.14791 19.152 8.03452 19.4444 7.99167 19.7509C7.94883 20.0574 7.97769 20.3697 8.076 20.6631C8.1743 20.9565 8.33937 21.2232 8.5582 21.442C8.77703 21.6608 9.04366 21.8259 9.33711 21.9242C9.63055 22.0225 9.94281 22.0514 10.2493 22.0085C10.5558 21.9657 10.8482 21.8523 11.1034 21.6773C11.3586 21.5023 11.5698 21.2704 11.7202 21H18.2802C18.4307 21.2704 18.6418 21.5023 18.897 21.6773C19.1523 21.8523 19.4447 21.9657 19.7511 22.0085C20.0576 22.0514 20.3699 22.0225 20.6633 21.9242C20.9568 21.8259 21.2234 21.6608 21.4423 21.442C21.6611 21.2232 21.8262 20.9565 21.9245 20.6631C22.0228 20.3697 22.0516 20.0574 22.0088 19.7509C21.9659 19.4444 21.8525 19.152 21.6775 18.8968C21.5025 18.6416 21.2707 18.4304 21.0002 18.28ZM8.00023 9.99998C8.00233 10.349 8.09574 10.6914 8.27118 10.9932C8.44661 11.2949 8.69795 11.5455 9.00023 11.72V13H5.72023C5.5498 12.6993 5.30096 12.4504 5.00023 12.28V5.71998C5.30096 5.54956 5.5498 5.30071 5.72023 4.99998H12.2802C12.4507 5.30071 12.6995 5.54956 13.0002 5.71998V8.99998H11.7202C11.4975 8.62457 11.1581 8.33233 10.7538 8.16784C10.3495 8.00335 9.90245 7.97565 9.48092 8.08896C9.05939 8.20228 8.6865 8.45039 8.41915 8.79543C8.15181 9.14047 8.00468 9.56351 8.00023 9.99998V9.99998ZM13.0002 11V12.28C12.6995 12.4504 12.4507 12.6993 12.2802 13H11.0002V11.72C11.301 11.5496 11.5498 11.3007 11.7202 11H13.0002ZM19.0002 18.28C18.6995 18.4504 18.4507 18.6993 18.2802 19H11.7202C11.5498 18.6993 11.301 18.4504 11.0002 18.28V15H12.2802C12.4307 15.2704 12.6418 15.5023 12.897 15.6773C13.1523 15.8523 13.4447 15.9657 13.7511 16.0085C14.0576 16.0514 14.3699 16.0225 14.6633 15.9242C14.9568 15.8259 15.2234 15.6608 15.4423 15.442C15.6611 15.2232 15.8262 14.9565 15.9245 14.6631C16.0228 14.3697 16.0516 14.0574 16.0088 13.7509C15.9659 13.4444 15.8525 13.152 15.6775 12.8968C15.5025 12.6416 15.2707 12.4304 15.0002 12.28V11H18.2802C18.4507 11.3007 18.6995 11.5496 19.0002 11.72V18.28Z"/>\n</svg>\n',t.pencilIcon='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M5 17.9999H9.24C9.37161 18.0007 9.50207 17.9755 9.62391 17.9257C9.74574 17.8759 9.85656 17.8026 9.95 17.7099L16.87 10.7799L19.71 7.99994C19.8037 7.90698 19.8781 7.79637 19.9289 7.67452C19.9797 7.55266 20.0058 7.42195 20.0058 7.28994C20.0058 7.15793 19.9797 7.02722 19.9289 6.90536C19.8781 6.7835 19.8037 6.6729 19.71 6.57994L15.47 2.28994C15.377 2.19621 15.2664 2.12182 15.1446 2.07105C15.0227 2.02028 14.892 1.99414 14.76 1.99414C14.628 1.99414 14.4973 2.02028 14.3754 2.07105C14.2536 2.12182 14.143 2.19621 14.05 2.28994L11.23 5.11994L4.29 12.0499C4.19732 12.1434 4.12399 12.2542 4.07423 12.376C4.02446 12.4979 3.99924 12.6283 4 12.7599V16.9999C4 17.2652 4.10536 17.5195 4.29289 17.707C4.48043 17.8946 4.73478 17.9999 5 17.9999ZM14.76 4.40994L17.59 7.23994L16.17 8.65994L13.34 5.82994L14.76 4.40994ZM6 13.1699L11.93 7.23994L14.76 10.0699L8.83 15.9999H6V13.1699ZM21 19.9999H3C2.73478 19.9999 2.48043 20.1053 2.29289 20.2928C2.10536 20.4804 2 20.7347 2 20.9999C2 21.2652 2.10536 21.5195 2.29289 21.707C2.48043 21.8946 2.73478 21.9999 3 21.9999H21C21.2652 21.9999 21.5196 21.8946 21.7071 21.707C21.8946 21.5195 22 21.2652 22 20.9999C22 20.7347 21.8946 20.4804 21.7071 20.2928C21.5196 20.1053 21.2652 19.9999 21 19.9999Z"/>\n</svg>'},71362:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(9631),t)},41304:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VisualPartEditor=t.defaultBoardData=t.defaultViewPort=t.PART_HEIGHT=void 0;var c=n(24246),l=u(n(27378)),d=n(18265),p=n(57768),f=n(95160),m=n(12901),v=n(87944),g=n(13011),h=n(63300),y=n(27378),b=n(14648),I=s(n(54037)),C=n(42272),P=n(43318),x=n(99743),j=n(29841),_=n(18265),O=n(5681),E=n(94e3),w=n(14264),S=n(40232),M=n(51424),k=n(63213),D=n(52178),T=s(n(98784)),N=n(27234),R=n(91312),A=s(n(60042)),V=n(24398),z=n(75012),H=n(97841),G=n(3065),q=n(41978),F=n(9631),L=l.memo(C.Slider),B=function(e){return null};t.PART_HEIGHT=28;t.defaultViewPort={pos:{x:0,y:0},zoom:1},t.defaultBoardData={selected:[],viewPort:t.defaultViewPort,lastMousePos:{x:0,y:0}},t.VisualPartEditor=l.memo(l.forwardRef((function(e,n){var o,a=e.onChangePart,u=e.partIoEditable,s=e.onCopy,Z=e.onGoToPartDef,W=e.onRequestHistory,J=e.onInspectPin,Y=e.boardData,$=e.onChangeBoardData,X=e.insId,Q=e.part,K=e.onShowOmnibar,ee=e.resolvedFlow,te=e.onImportPart,ne=e.queuedInputsData,re=e.initialPadding,ie=e.parentViewport||t.defaultViewPort,oe=(0,y.useState)(Object.assign({},ee.dependencies,((o={})[ee.main.id]=ee.main,o))),ae=oe[0],ue=oe[1];(0,y.useEffect)((function(){var e;ue(Object.assign({},ee.dependencies,((e={})[ee.main.id]=ee.main,e)))}),[ee]);var se=Y.selected,ce=Y.from,le=Y.to,de=Q.instances,pe=Q.connections,fe=Q.inputsPosition,me=Q.outputsPosition,ve=Q.inputs,ge=Q.outputs,he=(0,y.useState)(),ye=he[0],be=he[1],Ie=(0,y.useState)(),Ce=Ie[0],Pe=Ie[1],xe=(0,y.useState)(0),je=xe[0],_e=xe[1],Oe=(0,y.useState)(),Ee=Oe[0],we=Oe[1],Se=(0,y.useState)(!1),Me=Se[0],ke=Se[1],De=(0,y.useState)(),Te=De[0],Ne=De[1],Re=(0,y.useState)(),Ae=Re[0],Ve=Re[1],ze=(0,y.useState)(),He=ze[0],Ge=ze[1],qe=(0,y.useState)(),Fe=qe[0],Le=qe[1],Be=(0,y.useRef)();(0,v.useDidMount)((function(){Be.current=at.current.querySelector(".inline-editor-portal-root")}));var Ue=(0,R.useConfirm)(),Ze=(0,R.usePrompt)(),We=Y.viewPort,Je=(0,y.useRef)(!0),Ye=(0,y.useState)(null),$e=Ye[0],Xe=Ye[1],Qe=l.useCallback((function(e){$({viewPort:e})}),[$]),Ke=l.useCallback((function(e,t,n){return W(e,t,n)}),[W]),et=l.useCallback((function(e,t){return J(X+"."+e,t)}),[J,X]),tt=l.useCallback((function(e,t){var n=(0,z.handleConnectionCloseEditorCommand)(Q,{from:e,to:t}),r=(0,d.isInternalConnectionNode)(t)?de.find((function(e){return e.id===t.insId})):null,i=(r?r.inputConfig:{})[t.pinId],o=(0,d.isStaticInputPinConfig)(i)?(0,H.handleDetachConstEditorCommand)(n,t.insId,t.pinId):n;a(o,(0,M.functionalChange)("close-connection")),$({from:void 0,to:void 0})}),[de,a,$,Q]),nt=l.useCallback(i(r().mark((function e(){var t,n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze("New visual part name?");case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,(0,N.groupSelected)(Y.selected,Q,t,"inline",Ze);case 7:n=e.sent,i=n.currentPart,a(i,(0,M.functionalChange)("group part")),(0,S.toastMsg)("Part grouped");case 11:case"end":return e.stop()}}),e)}))),[Ze,Y.selected,a,Q]);(0,y.useEffect)((function(){if(Ee){var e=setTimeout((function(){we(void 0)}),350);return function(){return clearTimeout(e)}}}),[Ee]);var rt=(0,y.useState)(),it=rt[0],ot=rt[1];(0,y.useEffect)((function(){(0,w.preloadMonaco)()}),[]);var at=(0,y.useRef)(),ut=(0,I.default)(at),st=l.useRef({x:400,y:400}),ct=(0,v.useBoundingclientrect)(at)||x.vZero,lt=function(){var e=(0,g.fitViewPortToPart)(Q,ae,ut);(0,g.animateViewPort)(We,e,500,(function(e){Qe(e)}))},dt=l.useCallback((function(e,t){var n=Y.to,r=Y.from,i="input"===t?r:n,o="input"===t?n:r,a={pinId:e,insId:d.THIS_INS_ID},u="input"===t?{from:a}:{to:a};i&&i.pinId===e?$({from:void 0,to:void 0}):o?"input"===t&&n?tt(a,n):r&&tt(r,a):$(u)}),[Y,$,tt]),pt=l.useCallback((function(e,t,n){var r=(0,h.produce)(Q,(function(r){"input"===e?r.inputs[t].description=n:r.outputs[t].description=n}));a(r,(0,M.functionalChange)("Part io description"))}),[a,Q]),ft=l.useCallback((function(e,t,n){var r=Y.from,i=Y.to;if(ce&&ce.insId===e.id||le&&le.insId===e.id)$({from:void 0,to:void 0});else if("input"===n){var o={insId:e.id,pinId:t};!i||i.pinId!==t||(0,d.isInternalConnectionNode)(i)&&i.insId!==e.id?ce?tt(ce,o):$({to:o,selected:[]}):$({to:void 0})}else{var a={insId:e.id,pinId:t};!r||r.pinId!==t||(0,d.isInternalConnectionNode)(r)&&r.insId!==e.id?le?tt(a,le):$({from:a,selected:[]}):$({from:void 0})}}),[Y,ce,$,tt,le]);(0,y.useEffect)((function(){if(!Me&&ut.width){var t=(0,g.fitViewPortToPart)(Q,ae,ut,re);e.thumbnailMode||Qe(t);var n=setTimeout((function(){var t=(0,g.fitViewPortToPart)(Q,ae,ut,re);e.thumbnailMode||Qe(t),ke(!0)}),100);return function(){return clearTimeout(n)}}}),[Q,re,ut,e.thumbnailMode,Me,ae,Qe]);var mt=l.useCallback((function(){var e=Y.selected,t=Q.instances.filter((function(t){return e.includes(t.id)})).map((function(e){return Object.assign({},e,{id:e.id+"-copy"})})),n=Q.connections.filter((function(t){var n=t.from,r=t.to;return e.includes(n.insId)&&e.includes(r.insId)}));s({instances:t,connections:n})}),[Y,s,Q]),vt=l.useCallback((function(){var t=(0,V.pasteInstancesCommand)(Q,st.current,e.clipboardData),n=t.newPart,r=t.newInstances;a(n,(0,M.functionalChange)("paste instances")),$({selected:r.map((function(e){return e.id}))})}),[a,$,Q,e.clipboardData]),gt=l.useCallback((function(){var e=Q.id;it?"input"===it.type?it.ins.id===e?dt(it.pin,"input"):ft(it.ins,it.pin,"input"):it.ins.id===e?dt(it.pin,"output"):ft(it.ins,it.pin,"output"):console.warn("tried selecting closest with no pin nearby")}),[Q.id,it,dt,ft]),ht=l.useCallback((function(e,t){var n=Math.min(Math.max(e,.1),3),r="mouse"===t?st.current:{x:We.pos.x+ut.width/2,y:We.pos.y+ut.height/2},i=(0,g.centerBoardPosOnTarget)(r,ut,n,We);Qe(Object.assign({},We,{zoom:n,pos:i}))}),[Qe,We,ut]);(0,b.useHotkeys)("cmd+=",(function(e){ht(We.zoom+.1,"hotkey"),e.preventDefault()}),Je,[We,ht]),(0,b.useHotkeys)("cmd+-",(function(e){ht(We.zoom-.1,"hotkey"),e.preventDefault()}),Je,[ht,We.zoom]),(0,b.useHotkeys)("cmd+o",(function(e){e.preventDefault(),(0,S.toastMsg)("Ordering");var t=[];(0,O.orderVisualPart)(Q,ae,200,(function(e,n){n%3==0&&t.push(e)})),i(r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.length){e.next=9;break}return n=t.shift(),(0,S.toastMsg)("Step "+t.length+"!"),e.next=5,(0,d.delay)(200);case 5:a(n,(0,M.metaChange)("order-step")),(0,S.toastMsg)("Step "+t.length+"! done"),e.next=0;break;case 9:case"end":return e.stop()}}),e)})))()}),Je,[a,Q,ee]),(0,b.useHotkeys)("cmd+0",(function(e){ht(1),e.preventDefault()}),Je,[We,ht]);var yt=function(){$({from:void 0,to:void 0,selected:[]})},bt=l.useCallback((function(e,t){be(e.id),a(Object.assign({},Q),(0,M.metaChange)("drag-start"))}),[a,Q]),It=l.useCallback((function(e,t,n){var r=(0,g.handleInstanceDrag)(Q,e,n,t,se,ye),i=r.newValue,o=r.newSelected;a(i,(0,M.metaChange)("drag-move")),o&&$({selected:o})}),[ye,a,$,se,Q]),Ct=l.useCallback((function(e,t){t.preventDefault(),t.stopPropagation(),be(void 0)}),[]),Pt=l.useCallback((function(e,t){t.preventDefault(),t.stopPropagation(),be(d.THIS_INS_ID)}),[]),xt=l.useCallback(function(){var t=i(r().mark((function t(n,i,o,a){var u,s,c;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.preventDefault(),o.stopPropagation(),u=a.x,s=a.y,c=(0,h.produce)(Q,(function(e){"input"===n?e.inputsPosition[i]={x:u,y:s}:e.outputsPosition[i]={x:u,y:s}})),e.onChangePart(c,(0,M.metaChange)("part-io-drag-move"));case 5:case"end":return t.stop()}}),t)})));return function(e,n,r,i){return t.apply(this,arguments)}}(),[e,Q]),jt=l.useCallback(function(){var e=i(r().mark((function e(t,n,i,o){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.preventDefault(),i.stopPropagation(),be(void 0);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),[]),_t=l.useCallback((function(e,t){var n=e.id,r=t.shiftKey?se.filter((function(e){return e!==n})):[],i=t.shiftKey?[].concat(se,[n]):[n],o=se.includes(n)?r:i;$({selected:o,from:void 0,to:void 0})}),[$,se]),Ot=l.useCallback((function(){var e=Q.instances.map((function(e){return e.id}));$({selected:e,from:void 0,to:void 0})}),[$,Q.instances]),Et=l.useCallback((function(e){var t=pe.filter((function(t){var n=t.from,r=t.to;return-1===e.indexOf(n.insId)&&-1===e.indexOf(r.insId)})),n=(0,h.produce)(Q,(function(n){n.connections=t,n.instances=n.instances.filter((function(t){return!e.includes(t.id)}))}));$({selected:[]}),a(n,(0,M.functionalChange)("delete-ins"))}),[pe,a,$,Q]),wt=l.useCallback((function(e){Et([e.id])}),[Et]),St=l.useCallback((function(e,t){var n=(0,h.produce)(Q,(function(n){"input"===e?(delete n.inputs[t],n.connections=n.connections.filter((function(e){return!((0,d.isExternalConnectionNode)(e.from)&&e.from.pinId===t)}))):(n.connections=n.connections.filter((function(e){return!((0,d.isExternalConnectionNode)(e.to)&&e.to.pinId===t)})),n.completionOutputs=(n.completionOutputs||[]).map((function(e){return e.split("+").filter((function(e){return e!==t})).join("+")})).filter((function(e){return!!e})),delete n.outputs[t])}));ce.insId===d.THIS_INS_ID&&ce.pinId===t?$({from:void 0}):le.insId===d.THIS_INS_ID&&le.pinId===t&&$({to:void 0}),a(n,(0,M.functionalChange)("remove io pin"))}),[Q,ce,le,a,$]),Mt=l.useCallback(i(r().mark((function e(){var t,n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Y.selected,n=Y.from,i=Y.to,0!==t.length){e.next=16;break}if(!n||!(0,d.isExternalConnectionNode)(n)){e.next=9;break}return e.next=5,Ue("Are you sure you want to remove main input "+n.pinId+"?");case 5:if(!e.sent){e.next=7;break}St("input",n.pinId);case 7:e.next=14;break;case 9:if(!i||!(0,d.isExternalConnectionNode)(i)){e.next=14;break}return e.next=12,Ue("Are you sure you want to remove main output "+i.pinId+"?");case 12:if(!e.sent){e.next=14;break}St("output",i.pinId);case 14:e.next=17;break;case 16:Et(t);case 17:case"end":return e.stop()}}),e)}))),[Ue,Y,Et,St]),kt=l.useCallback((function(e,t,n){a((0,g.toggleStickyPin)(Q,e.id,t,n),(0,M.functionalChange)("toggle-sticky"))}),[a,Q]),Dt=l.useCallback((function(){var e=(0,G.handleDuplicateSelectedEditorCommand)(Q,se),t=e.newPart,n=e.newInstances;a(t,(0,M.functionalChange)("duplicated instances")),$({selected:n.map((function(e){return e.id}))})}),[a,$,Q,se]),Tt=l.useCallback((function(e){var t=e.nativeEvent.target;if(0===e.button&&U(e.nativeEvent,Q.id)&&t&&"board-editor-inner"===t.className){if(Date.now()-je<300)return void K(e);_e(Date.now());var n={x:e.clientX,y:e.clientY},r=(0,x.vSub)(n,ct),i=(0,g.domToViewPort)(r,We,ie);Pe({from:i,to:i})}}),[Q.id,We,je,ct,ie,K]),Nt=l.useCallback((function(e){if(Xe(null),U(e.nativeEvent,Q.id)&&Ce){if((0,g.calcSelectionBoxArea)(Ce)>50){var t=(0,g.getInstancesInRect)(Ce,ae,We,nn.current,Q.instances,ct,ie);console.log({toSelect:t,selectionBox:Ce});var n=e.shiftKey?[].concat(se,t):t;$({selected:n})}Pe(void 0)}}),[Q.id,Q.instances,Ce,ae,We,ct,ie,se,$]),Rt=l.useCallback((function(e){if(U(e.nativeEvent,Q.id)){Je.current=!0;var t={x:e.clientX,y:e.clientY},n=(0,x.vSub)(t,(0,x.vAdd)(ct,x.vZero)),r=(0,g.domToViewPort)(n,We,ie);Ce&&Pe(Object.assign({},Ce,{to:r}));var i=(0,g.findClosestPin)(Q,ae,n,ct,X,We),o=it;if(i)(!o||o.ins!==i.ins||o.ins===i.ins&&o.pin!==i.pin)&&ot({ins:i.ins,type:i.type,pin:i.id});st.current=r,$({lastMousePos:st.current})}else Je.current=!1}),[Q,ct,We,ie,Ce,ae,X,it,$]),At=l.useCallback((function(){ot(void 0),Je.current=!1}),[]),Vt=l.useCallback((function(e,t){if(t){var n=(0,d.isInlinePartInstance)(e)?e.part:(0,d.getPartDef)(e.partId,ae);if(!n)throw new Error("Impossible state inspecting inexisting part");if(!(0,d.isVisualPart)(n))return void(0,S.toastMsg)("Cannot inspect a non visual part","warning");Le({insId:X+"."+e.id,part:n})}else if((0,d.isRefPartInstance)(e)){var r=(0,d.getPartDef)(e,ae);Z(r)}else{var i=e.part;if(!(0,d.isInlineValuePart)(i))return void((0,d.isVisualPart)(i)?Le({insId:e.id,part:i}):(0,S.toastMsg)("Editing this type of part is not supported"));var o=atob(i.dataBuilderSource);Ge({insId:e.id,templateType:i.templateType,value:o,type:"existing"}),(0,S.toastMsg)("Editing inline visual part not supported yet")}}),[Z,ae,X]),zt=l.useCallback((function(e){if((0,d.isInlinePartInstance)(e)){var t=e.part;if(!(0,d.isVisualPart)(t))return void(0,S.toastMsg)("Not supported","warning");var n=(0,h.produce)(Q,(function(n){var r,i;n.instances=n.instances.filter((function(t){return t.id!==e.id})),n.connections=n.connections.filter((function(t){var n=t.from,r=t.to;return n.insId!==e.id&&r.insId!==e.id})),(r=n.instances).push.apply(r,t.instances),(i=n.connections).push.apply(i,t.connections.filter((function(e){return(0,d.isInternalConnectionNode)(e.from)&&(0,d.isInternalConnectionNode)(e.to)})))}));a(n,{type:"functional",message:"ungroup"}),$({selected:[]})}else{var r=(0,d.getPartDef)(e.partId,ae);if(!(0,d.isVisualPart)(r))return void(0,S.toastMsg)("Not supported","warning")}}),[Q,a,$,ae]),Ht=l.useCallback(function(){var e=i(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),Gt=l.useCallback((function(e,t){var n=(0,H.handleDetachConstEditorCommand)(Q,e.id,t);a(n,(0,M.functionalChange)("detach-const"))}),[a,Q]),qt=l.useCallback((function(e,t){var n=e.inputConfig[t]||(0,_.queueInputPinConfig)();(0,d.isStaticInputPinConfig)(n)&&(Ve(n.value),S.AppToaster.show({message:"Value copied"}))}),[]),Ft=l.useCallback((function(e,t){var n=(0,h.produce)(Q,(function(n){var r=n.instances.find((function(t){return t.id===e.id}));if(!r)throw new Error("Impossible state");r.inputConfig[t]=(0,d.staticInputPinConfig)(Ae),n.connections=n.connections.filter((function(n){return!(0,d.isInternalConnectionNode)(n.to)||!(n.to.insId===e.id&&n.to.pinId===t)}))}));a(n,(0,M.functionalChange)("paste const value"))}),[Q,a,Ae]),Lt=l.useCallback(function(){var e=i(r().mark((function e(t){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze("New name?");case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:i=(0,h.produce)(Q,(function(e){if("input"===t)Q.inputs||(e.inputs={}),e.inputs[n]=(0,d.partInput)(),e.inputsPosition[n]=st.current;else{Q.outputs||(e.outputs={}),e.outputs[n]=(0,d.partOutput)(),e.outputsPosition[n]=st.current;var r=(e.completionOutputs||[])[0];if(r){var i=r.split("+");e.completionOutputs[0]=[].concat(i,[n]).join("+")}else e.completionOutputs=[n]}})),a(i,(0,M.functionalChange)("add new io pin"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[Ze,Q,a]),Bt=l.useCallback(i(r().mark((function e(){var t,n,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null===(t=Q.completionOutputs)||void 0===t?void 0:t.join(","),e.next=3,Ze("Edit completion outputs",n);case 3:i=e.sent,(0,m.isDefined)(i)&&null!==i&&(o=(0,h.produce)(Q,(function(e){e.completionOutputs=""===i?void 0:i.split(",")})),a(o,(0,M.functionalChange)("change part completions")));case 5:case"end":return e.stop()}}),e)}))),[Ze,a,Q]),Ut=l.useCallback(i(r().mark((function e(){var t,n,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null===(t=Q.reactiveInputs)||void 0===t?void 0:t.join(","),e.next=3,Ze("Edit reactive inputs",n);case 3:i=e.sent,(0,m.isDefined)(i)&&null!==i&&(o=(0,h.produce)(Q,(function(e){e.reactiveInputs=""===i?void 0:i.split(",")})),a(o,(0,M.functionalChange)("change reactive inputs")));case 5:case"end":return e.stop()}}),e)}))),[Ze,a,Q]),Zt=l.useCallback(i(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze("Description?",Q.description);case 2:t=e.sent,n=(0,h.produce)(Q,(function(e){e.description=t})),a(n,(0,M.functionalChange)("Edit part description"));case 5:case"end":return e.stop()}}),e)}))),[Ze,a,Q]),Wt=l.useCallback((function(e){var t=(0,h.produce)(Q,(function(t){t.defaultStyle=e}));a(t,(0,M.functionalChange)("change default style"))}),[a,Q]),Jt=l.useCallback(function(){var e=i(r().mark((function e(t,n){var i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze("New name?",n);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=n;case 5:i=e.t0,o=(0,g.handleIoPinRename)(Q,t,n,i),a(o,(0,M.functionalChange)("rename io pin"));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[Q,a,Ze]),Yt=l.useCallback((function(e,t){var n=(0,g.handleChangePartInputType)(Q,e,t);a(n,(0,M.functionalChange)("toggle io pin optional"))}),[Q,a]),$t=l.useCallback((function(e,t){var n=X.split(".").reverse()[0];return W(n,e,t)}),[W,X]),Xt=l.useCallback((function(e){switch(e.type){case F.ActionType.RemovePart:var t=(0,h.produce)(Q,(function(e){if(!(0,d.isVisualPart)(Q))throw new Error("Impossible state, deleting instances opf non visual part");e.instances=e.instances.filter((function(e){return!se.includes(e.id)})),e.connections=e.connections.filter((function(e){return!se.includes(e.from.insId)&&!se.includes(e.to.insId)}))}));$({selected:[]}),a(t,(0,M.functionalChange)("remove-instances")),(0,S.toastMsg)("Removed "+se.length+" instances(s)");break;case F.ActionType.Inspect:if(1===se.length||ce||le){var n=se[0]||(null==ce?void 0:ce.insId)||(null==le?void 0:le.insId),o=(null==ce?void 0:ce.pinId)||(null==le?void 0:le.pinId);J(n,{type:ce?"output":"input",id:o})}break;case F.ActionType.Group:i(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt();case 2:case"end":return e.stop()}}),e)})))();break;case F.ActionType.Ungroup:var u=Q.instances.find((function(e){return e.id===se[0]}));zt(u);var s=(0,d.getPartDef)(u,ae);(0,S.toastMsg)("Ungrouped inline part "+s.id);break;case F.ActionType.AddInlineValue:Ge({type:"new-floating",pos:st.current});break;case F.ActionType.AddPart:i(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(0,g.getMiddleOfViewPort)(We,ut),t.next=3,te(e.data.importablePart,{selectAfterAdding:!0,pos:(0,x.vSub)(n,{x:0,y:50*We.zoom})});case 3:case"end":return t.stop()}}),t)})))();break;default:(0,S.toastMsg)(e+" not supported yet")}}),[ce,a,$,nt,te,J,zt,Q,ae,se,le,We,ut]),Qt=l.useCallback(function(){var e=i(r().mark((function e(t,n,i,o){var a,u,s,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("input"!==i){e.next=6;break}a=t.inputConfig[n],u=(0,d.isStaticInputPinConfig)(a)?JSON.stringify(a.value):void 0,Ge({type:"static-input",insId:t.id,pinId:n,value:u}),e.next=12;break;case 6:if(s=(0,d.getPartDef)(t,ae),c=(0,d.getPartOutputs)(s),c[n]){e.next=11;break}throw new Error("Dbl clicked on un-existing pin");case 11:Ne({pos:{x:o.clientX,y:o.clientY},ins:t,part:s,pinId:n,pinType:i});case 12:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),[ae]),Kt=l.useCallback(function(){var e=i(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Q.inputs[t]){e.next=3;break}throw new Error("Dbl clicked on un-existing pin");case 3:Ne({pos:{x:n.clientX,y:n.clientY},pinId:t,pinType:"input",part:Q});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[Q]),en=l.useCallback((function(e){if(e.metaKey||e.ctrlKey){var t=-.005*e.deltaY;ht(We.zoom+t,"mouse"),e.preventDefault(),e.stopPropagation()}else{var n=e.deltaX,r=e.deltaY,i=(0,h.produce)(We,(function(e){e.pos.x=e.pos.x+n/e.zoom,e.pos.y=e.pos.y+r/e.zoom}));Qe(i),e.stopPropagation(),e.preventDefault()}}),[ht,Qe,We]);(0,y.useEffect)((function(){var e=at.current;if(e)return e.addEventListener("wheel",en),function(){e.removeEventListener("wheel",en)}}),[en]);var tn={backgroundPositionX:(0,g.roundNumber)(-We.pos.x*We.zoom),backgroundPositionY:(0,g.roundNumber)(-We.pos.y*We.zoom),backgroundSize:(0,g.roundNumber)(25*We.zoom)+"px"},nn=l.useRef(new Map);l.useEffect((function(){var e=de.reduce((function(e,t){var n=(0,d.getPartDef)(t,ae);return n&&e.set(t.id,(0,d.keys)((0,d.getPartInputs)(n))),e}),new Map),t=de.reduce((function(e,t){var n=(0,d.getPartDef)(t,ae);return n&&e.set(t.id,(0,d.keys)((0,d.getPartOutputs)(n))),e}),new Map);e.set(d.THIS_INS_ID,(0,d.keys)(Q.outputs)),t.set(d.THIS_INS_ID,(0,d.keys)(Q.inputs));var n=pe.filter((function(n){var r=e.get(n.to.insId)&&e.get(n.to.insId).includes(n.to.pinId),i=t.get(n.from.insId)&&t.get(n.from.insId).includes(n.from.pinId);return!(r&&i)}));if(n.length>0){(0,S.toastMsg)(n.length+" orphan connections removed","warning"),console.log(n.length+" orphan connections removed",n);var r=(0,h.produce)(Q,(function(e){e.connections=Q.connections.filter((function(e){return!n.includes(e)}))}));a(r,(0,M.functionalChange)("prune orphan connections"))}}),[de,a,pe,ee,Q,ae]),(0,y.useEffect)((function(){var e=new Map(de.map((function(e){return[e.id,e]})));nn.current=pe.reduce((function(t,n){var r,i=t.get(n.to.insId)||{},o=i[n.to.pinId]||[],a=Object.assign({},i,((r={})[n.to.pinId]=[].concat(o,[e.get(n.from.insId)]),r));return t.set(n.to.insId,a),t}),new Map)}),[pe,de]);var rn=l.useCallback((function(){Ne(void 0)}),[]),on=l.useCallback(function(){var e=i(r().mark((function e(t){var n,i,o,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Te){e.next=2;break}throw new Error("impossible state - quick add menu invoked but not available");case 2:n=Te.ins,i=Te.pinId,e.t0=t.type,e.next="part"===e.t0?6:"import"===e.t0?9:"value"===e.t0?13:17;break;case 6:return(o=(0,g.createNewPartInstance)(t.part.id,100,st.current,ae))&&(u=(0,h.produce)(Q,(function(e){e.instances.push(o),e.connections.push({from:{insId:n?n.id:d.THIS_INS_ID,pinId:i},to:{insId:o.id,pinId:d.TRIGGER_PIN_ID}})})),a(u,(0,M.functionalChange)("add-item-quick-menu")),rn()),e.abrupt("break",17);case 9:return e.next=11,te(t.importablePart,{pos:st.current,connectTo:{insId:n.id,outputId:i}});case 11:return rn(),e.abrupt("break",17);case 13:if(n){e.next=16;break}return(0,S.toastMsg)("Cannot add value to main input"),e.abrupt("return");case 16:Ge({type:"new-output",insId:n.id,pinId:i});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[Te,ae,Q,a,rn,te]),an=l.useCallback(i(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.stringify(Q),e.next=3,navigator.clipboard.writeText(t);case 3:S.AppToaster.show({message:"Copied!"});case 4:case"end":return e.stop()}}),e)}))),[Q]),un=l.useCallback((function(e){var t,n,r=u?"":" (cannot edit main part, only visual)";return(0,c.jsxs)(C.Menu,{children:[(0,c.jsx)(C.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},text:"New Value",onClick:(0,m.preventDefaultAnd)((function(){return Ge({type:"new-floating",pos:st.current})}))}),(0,c.jsx)(C.MenuItem,{text:"New input "+r,onMouseDown:function(e){return e.stopPropagation()},onClick:(0,m.preventDefaultAnd)((function(){return Lt("input")})),disabled:!u}),(0,c.jsx)(C.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},text:"New output "+r,onClick:(0,m.preventDefaultAnd)((function(){return Lt("output")})),disabled:!u}),(0,c.jsx)(C.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},text:"Copy part to clipboard",onClick:(0,m.preventDefaultAnd)(an)}),(0,c.jsx)(C.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},text:"Edit Completion Outputs ("+((null===(t=Q.completionOutputs)||void 0===t?void 0:t.join(","))||"n/a")+")",onClick:(0,m.preventDefaultAnd)((function(){return Bt()}))}),(0,c.jsx)(C.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},text:"Edit Reactive inputs ("+((null===(n=Q.reactiveInputs)||void 0===n?void 0:n.join(","))||"n/a")+")",onClick:(0,m.preventDefaultAnd)((function(){return Ut()}))}),(0,c.jsx)(C.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},text:"Edit description",onClick:(0,m.preventDefaultAnd)((function(){return Zt()}))}),(0,c.jsx)(C.MenuDivider,{}),(0,c.jsx)(C.MenuItem,{text:"Default Style",children:(0,c.jsx)(q.PartStyleMenu,{style:Q.defaultStyle,onChange:Wt,promptFn:Ze})})]})}),[u,an,Q.completionOutputs,Q.reactiveInputs,Q.defaultStyle,Wt,Ze,Lt,Bt,Ut,Zt]),sn=l.useCallback((function(e){if(e.preventDefault(),Je.current){var t=(0,g.domToViewPort)({x:e.clientX,y:e.clientY},We,ie),n=un(t);C.ContextMenu.show(n,{left:e.clientX,top:e.clientY})}}),[un,ie,We]);(0,b.useHotkeys)("shift+c",lt,Je),(0,b.useHotkeys)("cmd+c",mt,Je),(0,b.useHotkeys)("cmd+v",vt,Je),(0,b.useHotkeys)("esc",yt,Je),(0,b.useHotkeys)("backspace",Mt,Je),(0,b.useHotkeys)("shift+d",Dt,Je),(0,b.useHotkeys)("cmd+a",Ot,Je),(0,b.useHotkeys)("s",gt,Je);var cn=l.useCallback((function(e,t){if(!Fe)throw new Error("impossible state");var n=(0,h.produce)(Q,(function(t){var n=t.instances.find((function(e){return e.id===Fe.insId}));if(!n||!(0,d.isInlinePartInstance)(n))throw new Error("impossible state");n.part=e}));a(n,(0,M.functionalChange)("Inner change: "+t.message)),Le((function(t){return Object.assign({},t,{part:e})}))}),[a,Fe,Q]),ln=(0,y.useState)({selected:[],viewPort:t.defaultViewPort,lastMousePos:{x:0,y:0}}),dn=ln[0],pn=ln[1],fn=l.useCallback((function(e){return pn((function(t){return Object.assign({},t,e)}))}),[]),mn=function(n){return Fe&&Fe.insId===n.id?{insId:X+"."+Fe.insId,boardData:dn,onChangeBoardData:fn,resolvedFlow:ee,onCopy:s,clipboardData:e.clipboardData,onInspectPin:e.onInspectPin,onGoToPartDef:e.onGoToPartDef,partIoEditable:e.partIoEditable,onRequestHistory:W,part:Fe.part,onChangePart:cn,onShowOmnibar:K,parentViewport:t.defaultViewPort,parentBoardPos:ct,onExtractInlinePart:e.onExtractInlinePart,onImportPart:e.onImportPart,queuedInputsData:e.queuedInputsData,onRequestImportables:e.onRequestImportables}:void 0},vn=function(){if(ce&&("input"===(null==it?void 0:it.type)&&(null==it?void 0:it.ins.id)!==Q.id||(null==it?void 0:it.ins.id)===Q.id&&"output"===(null==it?void 0:it.type))){var e=it.ins.id===Q.id?{pinId:it.pin,insId:d.THIS_INS_ID}:{insId:it.ins.id,pinId:it.pin};if(!(0,d.isInternalConnectionNode)(e)&&!(0,d.isInternalConnectionNode)(ce))return;return{from:ce,to:e}}if(le&&("output"===(null==it?void 0:it.type)&&(null==it?void 0:it.ins.id)!==Q.id||(null==it?void 0:it.ins.id)===Q.id&&"input"===(null==it?void 0:it.type))){var t=it.ins.id===Q.id?{pinId:it.pin,insId:d.THIS_INS_ID}:{insId:it.ins.id,pinId:it.pin};if(!(0,d.isInternalConnectionNode)(le)&&!(0,d.isInternalConnectionNode)(t))return;return{from:t,to:le}}},gn=l.useCallback((function(e,t){var n=(0,h.produce)(Q,(function(n){n.instances=n.instances.map((function(n){return n.id===e.id?Object.assign({},n,{visibleInputs:t}):n}))}));a(n,(0,M.functionalChange)("change instance visible inputs"))}),[Q,a]),hn=l.useCallback((function(e,t){var n=(0,h.produce)(Q,(function(n){n.instances=n.instances.map((function(n){return n.id===e.id?Object.assign({},n,{style:t}):n}))}));a(n,(0,M.functionalChange)("change instance style"))}),[a,Q]),yn=l.useCallback((function(e,t){var n=(0,h.produce)(Q,(function(n){n.instances=n.instances.map((function(n){return n.id===e.id?Object.assign({},n,{visibleOutputs:t}):n}))}));a(n,(0,M.functionalChange)("change instance visible outputs"))}),[Q,a]),bn=l.useCallback((function(e,t){var n=(0,h.produce)(Q,(function(n){n.instances=n.instances.map((function(n){return n.id===e.id?Object.assign({},n,{displayName:t}):n}))}));a(n,(0,M.functionalChange)("change instance display name"))}),[Q,a]);l.useImperativeHandle(n,(function(){return{centerInstance:function(e){var t=Q.instances.find((function(t){return t.id===e}));if(t){var n=(0,x.vSub)(t.pos,(0,x.vec)(ut.width/2,ut.height/2));Qe(Object.assign({},We,{pos:n}))}},centerViewPort:function(){lt()},getViewPort:function(){return We},clearSelection:function(){yt()}}}));l.useCallback((function(e,t){var n={visibleInputs:e.visibleInputs,visibleOutputs:e.visibleOutputs,inputConfig:e.inputConfig,displayName:e.displayName},r=(0,h.produce)(Q,(function(t){t.instances=t.instances.map((function(t){return t.id===e.id?Object.assign({},t,n):t}))}));a(r,(0,M.functionalChange)("change instance config - "+t))}),[a,Q]);var In=l.useState([]),Cn=(In[0],In[1],l.useCallback((function(e,t){var n=t.trim().substr(0,100),r="Inline-value-"+n.substr(0,15).replace(/["'`]/g,""),i=(0,D.createInlineValuePart)({code:t,customView:n,partId:r,type:e});switch(He.type){case"existing":var o=Q.instances.filter((function(e){return e.id===He.insId})).filter((function(e){return(0,d.isInlinePartInstance)(e)})).map((function(e){return e.part})),u=o[0];if(!u)throw new Error("Unable to find inline part to save to");var s=(0,d.keys)(u.inputs),c=(0,d.keys)(i.inputs),l=new Set(T.default.difference(s,c)),p=(0,h.produce)(Q,(function(e){e.instances=e.instances.map((function(e){return e.id===He.insId?(0,d.inlinePartInstance)(e.id,i,e.inputConfig,e.pos):e})),e.connections=e.connections.filter((function(e){return!(e.to.insId===He.insId&&l.has(e.to.pinId))}))}));a(p,(0,M.functionalChange)("change inline value")),Ge(void 0);break;case"static-input":var f;try{var m=t.replace(/^['`]/,'"').replace(/['`]$/,'"');f=JSON.parse(m)}catch(_){return void(0,S.toastMsg)("Input values must not be formulas or code")}var v=(0,h.produce)(Q,(function(e){e.instances.find((function(e){return e.id===He.insId})).inputConfig[He.pinId]=(0,d.staticInputPinConfig)(f)}));a(v,(0,M.functionalChange)("set static input value")),Ge(void 0);break;case"new-floating":var g=(0,d.inlinePartInstance)((0,d.createInsId)(i),i,{},He.pos),y=(0,h.produce)(Q,(function(e){e.instances.push(g)}));a(y,(0,M.functionalChange)("new floating value")),Ge(void 0);break;case"new-output":var b=He.insId,I=He.pinId,C=Q.instances.find((function(e){return e.id===b}));if(!C)throw new Error("Impossible state");var P=(0,d.inlinePartInstance)((0,d.createInsId)(i),i,{},(0,x.vAdd)(C.pos,{x:-50,y:150})),j=(0,h.produce)(Q,(function(e){e.instances.push(P),e.connections.push({from:(0,d.connectionNode)(b,I),to:(0,d.connectionNode)(P.id,d.TRIGGER_PIN_ID)})}));a(j,(0,M.functionalChange)("new value connected to output")),Ge(void 0)}}),[He,a,Q])),Pn=pe.filter((function(e){var t=vn();return!t||!(0,d.connectionDataEquals)(t,e)})),xn=l.useCallback((function(){Le(void 0),pn(t.defaultBoardData)}),[]),jn=l.useCallback((function(e){var t=(0,h.produce)(Q,(function(t){var n=t.connections.find((function(t){return(0,d.connectionDataEquals)(t,e)}));n.hidden=!n.hidden}));a(t,(0,M.functionalChange)("toggle connection hidden"))}),[a,Q]),_n=l.useCallback((function(e){var t=(0,h.produce)(Q,(function(t){t.connections=t.connections.filter((function(t){return!(0,d.connectionDataEquals)(t,e)}))}));a(t,(0,M.functionalChange)("remove connection"))}),[a,Q]),On=l.useCallback((function(e,t,n){"input"===n?(console.log(e.id,t),Xe({to:(0,d.connectionNode)(e.id,t),from:void 0})):Xe({from:(0,d.connectionNode)(e.id,t),to:void 0})}),[]),En=l.useCallback((function(e,t,n){$e&&($e.from&&"input"===n?tt($e.from,(0,d.connectionNode)(e.id,t)):$e.to&&"output"===n&&tt((0,d.connectionNode)(e.id,t),$e.to)),Xe(null)}),[$e,tt]),wn=l.useCallback((function(e,t){}),[]),Sn=l.useCallback((function(e,t){$e&&($e.from&&"output"===t?tt($e.from,(0,d.externalConnectionNode)(e)):$e.to&&"input"===t&&tt((0,d.externalConnectionNode)(e),$e.to))}),[$e,tt]);try{return(0,c.jsxs)("div",{className:(0,A.default)("visual-part-editor",e.className),"data-id":Q.id,onContextMenu:sn,children:[(0,c.jsxs)("main",{className:"board-editor-inner",onMouseDown:Tt,onMouseUp:Nt,onMouseMove:Rt,onMouseLeave:At,ref:at,style:tn,children:[(0,c.jsx)(l.Fragment,{children:(0,c.jsx)(E.LayoutDebugger,{vp:We,part:Q,extraDebug:g.emptyList,mousePos:st.current})}),(0,c.jsx)(f.ConnectionView,{repo:ae,parentInsId:X,size:ut,part:Q,boardPos:ct,instances:de,connections:Pn,futureConnection:function(){var e=vn();if(e)return{connection:{from:e.from,to:e.to},type:pe.some((function(t){return(0,d.connectionDataEquals)(t,e)}))?"future-remove":"future-add"}}(),onDblClick:d.noop,viewPort:We,parentVp:ie,selectedInstances:se,toggleHidden:jn,removeConnection:_n,lastMousePos:st.current,draggedSource:$e}),function(){var e=Y.from;return(0,m.entries)(ve).map((function(t){var n=t[0],r=t[1];return(0,c.jsx)(P.PartIoView,{insId:X,type:"input",pos:fe[n]||{x:0,y:0},id:n,onDelete:u?St:void 0,onRename:u?Jt:void 0,onDblClick:Kt,closest:!(!it||"input"!==it.type||it.ins.id!==Q.id||it.pin!==n),connected:!1,inputMode:r.mode,onChangeInputMode:Yt,viewPort:We,onDragStart:Pt,onDragEnd:jt,onDragMove:xt,onSelect:dt,onSetDescription:pt,selected:(null==e?void 0:e.pinId)===n,description:r.description,onRequestHistory:$t,onMouseUp:Sn,onMouseDown:wn},n)}))}(),de.map((function(e){var t,n,r;return(0,c.jsx)(p.InstanceView,{onUngroup:zt,onExtractInlinePart:Ht,onDetachConstValue:Gt,onCopyConstValue:qt,onPasteConstValue:Ft,copiedConstValue:Ae,connectionsPerInput:nn.current.get(e.id)||g.emptyObj,connectionsPerOutput:g.emptyObj,part:(0,d.getPartDef)(e,ae),parentInsId:X,onPinClick:ft,onPinDblClick:Qt,onDragStart:bt,onDragEnd:Ct,partDefRepo:ae,onDragMove:It,onDblClick:Vt,onSelect:_t,onToggleSticky:kt,selected:-1!==se.indexOf(e.id),dragged:ye===e.id,onInspectPin:et,selectedInput:le&&(0,d.isInternalConnectionNode)(le)&&le.insId===e.id?le.pinId:void 0,selectedOutput:ce&&(0,d.isInternalConnectionNode)(ce)&&ce.insId===e.id?ce.pinId:void 0,closestPin:it&&it.ins.id===e.id?it:void 0,queuedInputsData:null!==(t=ne[e.id])&&void 0!==t?t:g.emptyObj,instance:e,connections:pe,onTogglePinBreakpoint:d.noop,onTogglePinLog:d.noop,viewPort:We,onRequestHistory:Ke,onChangeVisibleInputs:gn,onChangeVisibleOutputs:yn,onSetDisplayName:bn,onDeleteInstance:wt,forceShowMinimized:ce||(null===(n=null==$e?void 0:$e.to)||void 0===n?void 0:n.insId)===e.id?"input":le||(null===(r=null==$e?void 0:$e.from)||void 0===r?void 0:r.insId)===e.id?"output":void 0,isConnectedInstanceSelected:se.some((function(t){return pe.some((function(n){var r=n.from,i=n.to;return r.insId===e.id&&i.insId===t||r.insId===t&&i.insId===e.id}))})),inlineGroupProps:mn(e),onCloseInlineEditor:xn,inlineEditorPortalDomNode:Be.current,onChangeStyle:hn,onGroupSelected:nt,onPinMouseDown:On,onPinMouseUp:En},e.id)})),function(){if(Ce){var e=Ce.from,t=Ce.to,n=(0,g.logicalPosToRenderedPos)(e,We),r=(0,g.logicalPosToRenderedPos)(t,We);console.log(e.x,t.x," | ",n.x,r.x);var i=(0,g.getSelectionBoxRect)(n,r),o=i.x,a=i.y,u=i.w,s=i.h;return(0,c.jsx)("div",{className:"selection-box",style:{top:a,left:o,width:u,height:s}})}return null}(),function(){var e=Y.to;return(0,m.entries)(ge).map((function(t){var n=t[0],r=t[1];return(0,c.jsx)(P.PartIoView,{insId:X,type:"output",pos:me[n]||{x:0,y:0},id:n,onDelete:u?St:void 0,onRename:u?Jt:void 0,closest:!(!it||"output"!==it.type||it.ins.id!==Q.id||it.pin!==n),connected:!1,viewPort:We,onDragStart:Pt,onDragEnd:jt,onDragMove:xt,onSelect:dt,onSetDescription:pt,description:r.description,selected:(null==e?void 0:e.pinId)===n,onRequestHistory:$t,onMouseUp:Sn,onMouseDown:wn},n)}))}(),Te?(0,c.jsx)(j.QuickAddMenu,{part:Te.part,pinId:Te.pinId,pinType:Te.pinType,pos:Te.pos,resolvedFlow:ee,onRequestImportables:e.onRequestImportables,onAdd:on,onClose:rn}):null,(0,c.jsxs)("div",{className:"viewport-controls",children:[(0,c.jsx)(C.Button,{small:!0,onClick:lt,children:"Center view"}),(0,c.jsx)(L,{min:.15,max:3,stepSize:.05,labelStepSize:10,labelRenderer:B,onChange:ht,value:We.zoom})]}),He?(0,c.jsx)(k.InlineCodeModal,{env:g.emptyObj,initialValue:He.value,initialType:"existing"===He.type?He.templateType:void 0,onCancel:function(){return Ge(void 0)},onSubmit:Cn}):null,(0,c.jsx)("div",{className:"inline-editor-portal-root"})]}),(0,c.jsx)(F.ActionsMenu,{onAction:Xt,selectedInstances:se,part:Q,repo:ae,to:le,from:ce,hotkeysEnabled:Je,onRequestImportables:e.onRequestImportables})]})}catch(Mn){return console.error(Mn),(0,c.jsxs)("div",{children:["Error rendering board - ",Mn.toString()]})}})));var U=function(e,t){var n=e.target.closest(".visual-part-editor");return n&&n.getAttribute("data-id")===t}},12589:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BasePartView=void 0;var u=n(24246),s=o(n(27378)),c=a(n(60042)),l=a(n(48304));t.BasePartView=function(e){var t=e.dragged,n=e.viewPort,r=e.pos,i=e.onDragEnd,o=e.onDragMove,a=e.onDragStart,d=e.displayMode,p=s.useCallback((function(e,t){a(e,t)}),[a]),f=s.useCallback((function(e,t){var o=r,a=(t.x-o.x)/n.zoom,u=(t.y-o.y)/n.zoom,s=o.x+a,c=o.y+u;i(e,Object.assign({},t,{x:s,y:c}))}),[r,i,n]),m=s.useCallback((function(e,t){o(e,{x:t.x,y:t.y})}),[o]),v={transform:"scale("+n.zoom+")"},g=(0,c.default)("base-part-view",e.className,{dragged:t,"display-mode":d}),h=r.x*n.zoom-n.pos.x*n.zoom,y=r.y*n.zoom-n.pos.y*n.zoom,b={transform:"translate("+(h-r.x)+"px, "+(y-r.y)+"px)"},I=(0,c.default)("base-part-view-vp-fixer",{"display-mode":d});return(0,u.jsx)("div",{className:I,style:b,children:(0,u.jsx)(l.default,{onStop:f,onStart:p,onDrag:m,position:r,cancel:".no-drag",children:(0,u.jsx)("span",{className:"base-part-view-wrapper",children:(0,u.jsx)("div",{className:g,style:v,id:e.domId,children:e.children})})})})}},75012:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.handleConnectionCloseEditorCommand=void 0;var i=n(18265),o=r(n(63300));t.handleConnectionCloseEditorCommand=function(e,t){var n=t.from,r=t.to;return(0,o.default)(e,(function(e){var t=e.connections.find((function(e){var t=(0,i.connectionNodeEquals)(n,e.from),o=(0,i.connectionNodeEquals)(r,e.to);return t&&o}));t?e.connections=e.connections.filter((function(e){return e!==t})):e.connections.push({from:n,to:r})}))}},97841:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.handleDetachConstEditorCommand=void 0;var i=n(18265),o=r(n(63300)),a=n(52178);t.handleDetachConstEditorCommand=function(e,t,n){return(0,o.default)(e,(function(e){var r=e.instances.find((function(e){return e.id===t}));if(!r)throw new Error("Impossible state ins id with no matching instance");var o=r.inputConfig[n];if(!o)throw new Error("impossible state detaching const from unexistent config");if(!(0,i.isStaticInputPinConfig)(o))throw new Error("impossible state detaching const with no value");var u=o.value,s=(0,a.createInlineValuePart)({code:""+u,type:i.InlineValuePartType.VALUE}),c=(0,i.inlinePartInstance)("value-"+(0,i.randomInt)(999),s,{},{x:r.pos.x,y:r.pos.y-100});if(!e.instances.find((function(e){return e.id===r.id})))throw new Error("impossible state instance not found");r.inputConfig[n]=(0,i.queueInputPinConfig)(),e.instances.push(c),e.connections.push((0,i.connectionData)(c.id+".r",r.id+"."+n))}))}},3065:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.handleDuplicateSelectedEditorCommand=void 0;var i=n(18265),o=r(n(63300));t.handleDuplicateSelectedEditorCommand=function(e,t){var n=[];return{newPart:(0,o.default)(e,(function(r){var o=r.instances;t.forEach((function(t){var r=o.find((function(e){return e.id===t}));if(!r)throw new Error("impossible state duplicate selected no matching instance");if(r){var a=r.pos,u=Object.assign({},r,{pos:{x:a.x+20,y:a.y+20},id:(0,i.createInsId)(e)});o.push(u),n.push(u.id)}}))})),newInstances:n}}},24398:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.pasteInstancesCommand=void 0;var i=n(18265),o=r(n(63300));t.pasteInstancesCommand=function(e,t,n){var r=n.instances.map((function(n){return Object.assign({},n,{pos:t,id:(0,i.createInsId)(e)})})),a=new Map(r.map((function(e,t){return[n.instances[t].id,e.id]})));return{newPart:(0,o.default)(e,(function(e){var t,i;(t=e.instances).push.apply(t,r);var o=n.connections.map((function(e){var t=e.from,n=e.to;return{from:Object.assign({},t,{insId:a.get(t.insId)||t.insId}),to:Object.assign({},n,{insId:a.get(n.insId)||n.insId})}}));(i=e.connections).push.apply(i,o)})),newInstances:r}}},95160:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionView=t.SingleConnectionView=void 0;var u=n(27378),s=n(24246),c=o(n(27378)),l=a(n(60042)),d=n(18265),p=n(68488),f=n(29768),m=n(96149),v=n(99743),g=n(42272),h=n(24492),y=function(e){var t=e.connectionNode,n=e.boardPos,r=e.parentInsId,i=e.viewPort;return(0,d.isExternalConnectionNode)(t)?(0,p.calcMainInputPosition)(t.pinId,r,"input",n,i):(0,p.calcPinPosition)(r,t.insId,t.pinId,"output",n,i)},b=function(e){var t=e.connectionNode,n=e.boardPos,r=e.parentInsId,i=e.viewPort;return(0,d.isExternalConnectionNode)(t)?(0,p.calcMainOutputPosition)(t.pinId,r,"output",n,i):(0,p.calcPinPosition)(r,t.insId,t.pinId,"input",n,i)};t.SingleConnectionView=function(e){var t=(0,f.useSsr)().isBrowser,n=e.connection,r=e.part,i=e.repo,o=e.instances,a=e.type,u=e.viewPort,p=e.toggleHidden,m=e.parentSelected,I=e.removeConnection,C=n.from,P=(0,d.isInternalConnectionNode)(C)&&o.find((function(e){return e.id===C.insId}));if(!P&&(0,d.isInternalConnectionNode)(C))throw new Error('impossible state  - "from instance id - ['+C.insId+'] does not exist"');var x=((0,d.isInternalConnectionNode)(C)&&P?(0,d.getPartDef)(P,i):r).outputs[C.pinId],j=x&&x.delayed,_=t?y(Object.assign({},e,{connectionNode:C})):{x:0,y:0},O=t?b(Object.assign({},e,{connectionNode:n.to})):{x:0,y:0},E=(0,v.vDiv)(_,e.parentVp.zoom),w=E.x,S=E.y,M=(0,v.vDiv)(O,e.parentVp.zoom),k=M.x,D=M.y,T=(0,l.default)({delayed:j,hidden:n.hidden,"parent-selected":m},a),N=c.useCallback((function(e){e.preventDefault(),e.stopPropagation();var t=(0,s.jsxs)(g.Menu,{children:[(0,s.jsx)(g.MenuItem,{text:n.hidden?"Show connection":"Hide connection",onClick:function(){return p(n)}}),(0,s.jsx)(g.MenuItem,{text:"Remove connection",onClick:function(){return I(n)}})]});g.ContextMenu.show(t,{left:e.pageX,top:e.pageY})}),[n,I,p]);return(0,s.jsx)(h.ConnectionViewPath,{className:T,from:{x:w,y:S},to:{x:k,y:D},dashed:"regular"!==a,zoom:u.zoom,onContextMenu:N})};t.ConnectionView=function(e){var n,r=e.viewPort,i=e.futureConnection,o=e.toggleHidden,a=e.selectedInstances,l=e.draggedSource,d=c.useState(0),p=d[0],f=d[1],v=c.useCallback((function(e){return requestAnimationFrame((function(){f((function(e){return(e+1)%9})),e>0&&v(e-1)}))}),[]);c.useEffect((function(){var e=v(10);return function(){cancelAnimationFrame(e)}}),[v]),c.useEffect((function(){var e=function(){v(3)};return window.addEventListener("scroll",e),window.addEventListener("resize",e),function(){window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}}),[v,p]);var g=e.connections.map((function(n){var r=a.includes(n.from.insId)||a.includes(n.to.insId);return(0,u.createElement)(t.SingleConnectionView,Object.assign({},e,{connection:n,type:"regular",parentSelected:r,key:n.from.insId+n.from.pinId+n.to.insId+n.to.pinId}))}));if(i&&g.push((0,u.createElement)(t.SingleConnectionView,Object.assign({},e,{connection:i.connection,type:i.type,toggleHidden:o,parentSelected:!1,key:"future"}))),l){var I=(l.from?y:b)({connectionNode:null!==(n=l.from)&&void 0!==n?n:l.to,viewPort:r,boardPos:e.boardPos,parentInsId:e.parentInsId});g.push((0,s.jsx)(h.ConnectionViewPath,{className:"dragged",from:I,to:(0,m.logicalPosToRenderedPos)(e.lastMousePos,r),zoom:r.zoom},"dragged"))}return(0,s.jsx)("span",{className:"connections-view",style:{opacity:r.zoom},children:(0,s.jsx)("svg",{style:{width:"100%"},children:g})})}},24492:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionViewPath=void 0;var i=n(24246),o=r(n(60042)),a=n(64452);t.ConnectionViewPath=function(e){var t=e.from,n=e.to,r=e.className,u=e.onContextMenu,s=e.zoom,c=e.dashed,l=t.x,d=t.y,p=n.x,f=n.y,m=(0,a.calcBezierPath)({sourceX:l,sourceY:d,targetX:p,targetY:f,curvature:.15}),v=3*s,g=c?6*s:void 0;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:m,className:(0,o.default)("connection",r),style:{strokeWidth:v,strokeDasharray:g},onContextMenu:u}),e.label?(0,i.jsx)("text",{className:"label",x:(l+p)/2,y:(d+f)/2,fontSize:"12px"}):null,(0,i.jsxs)("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,i.jsx)("stop",{offset:"0%"}),(0,i.jsx)("stop",{offset:"100%"})]})]})}},64452:function(e,t){"use strict";var n;function r(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function i(e){var t,i,o=e.pos,a=e.x1,u=e.y1,s=e.x2,c=e.y2,l=e.c;switch(o){case n.Left:t=a-r(a-s,l),i=u;break;case n.Right:t=a+r(s-a,l),i=u;break;case n.Top:t=a,i=u-r(u-c,l);break;case n.Bottom:t=a,i=u+r(c-u,l)}return[t,i]}Object.defineProperty(t,"__esModule",{value:!0}),t.getBezierCenter=t.calcBezierPath=t.Position=void 0,function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(n=t.Position||(t.Position={}));t.calcBezierPath=function(e){var t=e.sourceX,r=e.sourceY,o=e.sourcePosition,a=void 0===o?n.Bottom:o,u=e.targetX,s=e.targetY,c=e.targetPosition,l=void 0===c?n.Top:c,d=e.curvature,p=void 0===d?.25:d,f=i({pos:a,x1:t,y1:r,x2:u,y2:s,c:p}),m=f[0],v=f[1],g=i({pos:l,x1:u,y1:s,x2:t,y2:r,c:p});return"M"+t+","+r+" C"+m+","+v+" "+g[0]+","+g[1]+" "+u+","+s},t.getBezierCenter=function(e){var t=e.sourceX,r=e.sourceY,o=e.sourcePosition,a=void 0===o?n.Bottom:o,u=e.targetX,s=e.targetY,c=e.targetPosition,l=void 0===c?n.Top:c,d=e.curvature,p=void 0===d?.25:d,f=i({pos:a,x1:t,y1:r,x2:u,y2:s,c:p}),m=f[0],v=f[1],g=i({pos:l,x1:u,y1:s,x2:t,y2:r,c:p}),h=.125*t+.375*m+.375*g[0]+.125*u,y=.125*r+.375*v+.375*g[1]+.125*s;return[h,y,Math.abs(h-t),Math.abs(y-r)]}},68488:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcMainOutputPosition=t.calcMainInputPosition=t.calcPinPosition=void 0;var r=n(90095),i={x:99999,y:99999},o=function(e,t,n,r){if(!e)return console.warn("Cannot find element "+n+" to render connection"),i;var o=e.getBoundingClientRect(),a=o.x,u=o.y,s=o.width,c=u+o.height/2;return{x:a+s/2-t.x,y:c-t.y}};t.calcPinPosition=function(e,t,n,i,a,u){var s=(0,r.getPinDomId)(e,t,n,i),c=document.getElementById(s);return o(c,a,s)};t.calcMainInputPosition=function(e,t,n,i,a){var u=(0,r.getMainPinDomId)(t,e,n),s=document.getElementById(u);return o(s,i,u)};t.calcMainOutputPosition=function(e,t,n,i,a){var u=(0,r.getMainPinDomId)(t,e,n),s=document.getElementById(u);return o(s,i,u)}},90095:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMainPinDomId=t.getPinDomId=t.getInstanceDomId=void 0;t.getInstanceDomId=function(e,t){return("ins:"+e+":"+t).replace(/\s+/g,"-")};t.getPinDomId=function(e,t,n,r){return("pin:"+r+":"+e+":"+t+":"+n).replace(/\s+/g,"-")};t.getMainPinDomId=function(e,t,n){return("main-pin:"+e+":"+t+":"+n).replace(/\s+/g,"-")}},57768:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceView=t.getVisibleOutputs=t.getVisibleInputs=t.INSTANCE_INFO_TOOLTIP_DELAY=t.MAX_INSTANCE_WIDTH=t.MIN_WIDTH_PER_PIN=t.PIECE_CHAR_WIDTH=t.PIECE_HORIZONTAL_PADDING=void 0;var c=n(24246),l=u(n(27378)),d=n(92739),p=n(18265),f=s(n(60042)),m=n(57076),v=n(18265),g=n(18265),h=n(71462),y=n(12589),b=n(18265),I=n(90095),C=n(41304),P=n(96149),x=n(42272),j=s(n(31542)),_=n(41978),O=s(n(49040));t.PIECE_HORIZONTAL_PADDING=25,t.PIECE_CHAR_WIDTH=11,t.MIN_WIDTH_PER_PIN=40,t.MAX_INSTANCE_WIDTH=400,t.INSTANCE_INFO_TOOLTIP_DELAY=400;t.getVisibleInputs=function(e,t,n){var r=e.visibleInputs;if(r)return r;var i=(0,p.keys)((0,g.getPartInputs)(t)).filter((function(r,i){var o,a=n.some((function(t){return t.to.insId===e.id&&t.to.pinId===r})),u=t.inputs[r]&&"optional"===(null===(o=t.inputs[r])||void 0===o?void 0:o.mode);return a||!u&&r!==v.TRIGGER_PIN_ID}));return 0===i.length?[v.TRIGGER_PIN_ID]:i};t.getVisibleOutputs=function(e,t,n){var r=e.visibleOutputs;if(r)return r;var i=Object.keys(t.outputs);return n.some((function(t){return t.from.insId===e.id&&t.from.pinId===v.ERROR_PIN_ID}))?[].concat(i,[v.ERROR_PIN_ID]):i};t.InstanceView=function(e){var n=e.selected,o=e.selectedInput,a=e.selectedOutput,u=e.closestPin,s=e.dragged,E=e.onTogglePinLog,w=e.onTogglePinBreakpoint,S=e.onDetachConstValue,M=e.onCopyConstValue,k=e.onPasteConstValue,D=e.displayMode,T=e.connections,N=e.instance,R=e.viewPort,A=e.part,V=e.onPinClick,z=e.onPinDblClick,H=e.onDragStart,G=e.onRequestHistory,q=e.onDragEnd,F=e.onDragMove,L=e.onToggleSticky,B=e.onSelect,U=e.onDblClick,Z=e.onChangeVisibleInputs,W=e.onChangeVisibleOutputs,J=e.onConvertConstToEnv,Y=e.inlineGroupProps,$=e.onUngroup,X=e.onExtractInlinePart,Q=e.onGroupSelected,K=e.isConnectedInstanceSelected,ee=e.inlineEditorPortalDomNode,te=e.onChangeStyle,ne=e.onDeleteInstance,re=e.onSetDisplayName,ie=e.onPinMouseUp,oe=e.onPinMouseDown,ae=N.id,ue=l.useMemo((function(){var e=(0,p.randomInt)(6,1);return{icon:(0,p.pickRandom)([["fab","discord"],["fab","slack"],"bug","cube"]),color:e,size:(0,p.randomInt)(3,1),variation:(0,p.randomInt)(5,1)}}),[]),se=l.useRef(),ce=l.useMemo((function(){return N.style||A.defaultStyle||{}}),[A,N]),le=ce.size||"regular",de=l.useMemo((function(){return new Map(T.filter((function(e){return e.to.insId===ae})).map((function(e){var t=e.to,n=e.hidden;return[t.pinId,n]})))}),[T,ae]),pe=l.useMemo((function(){return new Map(T.filter((function(e){return e.from.insId===ae})).map((function(e){var t=e.from,n=e.hidden;return[t.pinId,n]})))}),[T,ae]),fe=(0,P.usePrompt)(),me=l.useCallback((function(e){return V(N,e,"input")}),[N,V]),ve=l.useCallback((function(e,t){return z(N,e,"input",t)}),[N,z]),ge=l.useCallback((function(e,t){return z(N,e,"output",t)}),[N,z]),he=l.useCallback((function(e){return V(N,e,"output")}),[N,V]),ye=l.useCallback((function(e,t){H(N,e,t)}),[N,H]),be=l.useCallback((function(e,t){var n=N.pos,r=(t.x-n.x)/R.zoom,i=(t.y-n.y)/R.zoom,o=n.x+r,a=n.y+i;q(N,e,Object.assign({},t,{x:o,y:a}))}),[N,q,R.zoom]),Ie=l.useCallback((function(e,t){F(N,e,{x:t.x,y:t.y})}),[N,F]),Ce=l.useCallback((function(e){return L(N,e)}),[N,L]),Pe=l.useCallback((function(e){return S(N,e)}),[N,S]),xe=l.useCallback((function(e){return M(N,e)}),[N,M]),je=l.useCallback((function(e){return k(N,e)}),[N,k]),_e=l.useCallback((function(e){return B(N,e)}),[N,B]),Oe=l.useCallback((function(e){return U(N,e.shiftKey)}),[N,U]),Ee=(0,p.entries)(A.inputs),we=N.visibleInputs,Se=N.visibleOutputs;we&&Ee.sort((function(e,t){return we.indexOf(e[0])-we.indexOf(t[0])}));var Me=(0,p.entries)(A.outputs);Se&&Me.sort((function(e,t){return Se.indexOf(e[0])-Se.indexOf(t[0])}));var ke=(0,t.getVisibleInputs)(N,A,T),De=(0,t.getVisibleOutputs)(N,A,T);Ee.push([v.TRIGGER_PIN_ID,(0,p.partInput)()]),Me.push([v.ERROR_PIN_ID,(0,v.partOutput)()]);var Te=Ee.filter((function(e){var t=e[0];return ke.includes(t)||(n||K)&&de.has(t)})),Ne=Me.filter((function(e){var t=e[0];return De.includes(t)||(n||K)&&pe.has(t)})),Re=(0,f.default)("ins-view",{"no-inputs":0===Ee.length,"no-outputs":0===Me.length,"display-mode":D,"force-minimized-input":"input"===e.forceShowMinimized||"both"===e.forceShowMinimized,"force-minimized-output":"output"===e.forceShowMinimized||"both"===e.forceShowMinimized,"inline-part-edited":!!Y}),Ae=(0,f.default)({selected:n,dragged:s,closest:u&&u.ins.id===N.id},"size-"+le),Ve=new Set((0,p.entries)(A.inputs).filter((function(e){e[0];var t=e[1];return(0,v.isInputPinOptional)(t)})).map(p.pickFirst)),ze=(0,p.entries)(N.inputConfig).reduce((function(e,t){var n,r=t[0],i=t[1];return(0,v.isStickyInputPinConfig)(i)||i.sticky?Object.assign({},e,((n={})[r]=!0,n)):e}),{}),He=(0,h.calcPartContent)(N,A),Ge=function(e){var t=N.inputConfig[e];if((0,b.isStaticInputPinConfig)(t))return t.value},qe=l.useCallback(i(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,p.okeys)(A.inputs),e.next=3,fe("New order?",(N.visibleInputs||t).join(","));case 3:(n=e.sent)&&Z(N,n.split(","));case 5:case"end":return e.stop()}}),e)}))),[A.inputs,fe,N,Z]),Fe=l.useCallback(i(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,p.okeys)(A.outputs),e.next=3,fe("New order?",(N.visibleOutputs||t).join(","));case 3:(n=e.sent)&&W(N,n.split(","));case 5:case"end":return e.stop()}}),e)}))),[A.outputs,fe,N,W]),Le=l.useCallback((function(){ne(N)}),[ne,N]),Be=l.useCallback(i(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe("Set custom display name",N.displayName||A.id);case 2:t=e.sent,re(N,t);case 4:case"end":return e.stop()}}),e)}))),[fe,N,re,A.id]),Ue=Object.keys((0,g.getPartInputs)(A)),Ze=Object.keys((0,p.getPartOutputs)(A)),We=l.useCallback((function(e,t){return G(N.id,e,t)}),[N,G]),Je=l.useCallback((function(e){J&&J(N,e)}),[N,J]),Ye=l.useCallback((function(e,t){ie&&ie(N,e,t)}),[N,ie]),$e=l.useCallback((function(e,t){oe&&oe(N,e,t)}),[N,oe]),Xe=function(){return(0,c.jsx)("div",{className:"inputs no-drag",children:Te.map((function(t){var r,i=t[0],a=t[1];return(0,c.jsx)(m.PinView,{type:"input",insId:N.id,parentInsId:e.parentInsId,id:i,optional:Ve.has(i),connected:de.has(i),isSticky:ze[i],minimized:!n&&1===Te.length,onToggleSticky:Ce,onDetachConstValue:Pe,onCopyConstValue:xe,onPasteConstValue:je,copiedConstValue:e.copiedConstValue,selected:i===o,onClick:me,onDoubleClick:ve,isClosestToMouse:!!u&&"input"===u.type&&u.pin===i,onToggleLogged:E,onToggleBreakpoint:w,onInspect:e.onInspectPin,constValue:Ge(i),onRequestHistory:We,onConvertConstToEnv:e.onConvertConstToEnv?Je:void 0,description:a.description,queuedValues:null!==(r=e.queuedInputsData[i])&&void 0!==r?r:0,onMouseUp:Ye,onMouseDown:$e},i)}))})},Qe=function(){return(0,c.jsx)("div",{className:"outputs no-drag",children:Ne.map((function(t){var r=t[0],i=t[1];return(0,c.jsx)(m.PinView,{insId:N.id,parentInsId:e.parentInsId,connected:pe.has(r),type:"output",id:r,minimized:!n&&1===Ne.length,isClosestToMouse:!!u&&"output"===u.type&&u.pin===r,selected:r===a,onClick:he,onDoubleClick:ge,onToggleLogged:E,onToggleBreakpoint:w,onInspect:e.onInspectPin,onRequestHistory:We,description:i.description,onMouseUp:Ye,onMouseDown:$e},r)}))})},Ke=l.useCallback((function(e){te(N,e)}),[N,te]),et=l.useCallback((function(){var e=Ue.map((function(e){var t=ke.includes(e),n=de.has(e)&&!0!==de.get(e),r=(0,p.getInputName)(e);return{text:t?n?'Hide input "'+r+'" (disconnect first)':'Hide input "'+r+'"':'Show input "'+r+'"',onClick:function(){return Z(N,t?ke.filter((function(t){return t!==e})):[].concat(ke,[e]))},disabled:n&&t}})),t=Ze.map((function(e){var t=De.includes(e),n=pe.has(e),r=(0,p.getOutputName)(e);return{text:t?n?'Hide output "'+r+'" (disconnect first)':'Hide output "'+r+'"':'Show output "'+r+'"',onClick:function(){return W(N,t?De.filter((function(t){return t!==e})):[].concat(De,[e]))},disabled:n&&t}})),n=[].concat(e,t,(0,p.isInlinePartInstance)(N)&&(0,g.isVisualPart)(N.part)?[{text:"Ungroup inline part",onClick:function(){return $(N)}}]:[],(0,p.isInlinePartInstance)(N)?[{text:"Extract inline part to file",onClick:function(){return X(N)}}]:[],[{text:"Reorder inputs",onClick:qe},{text:"Reorder outputs",onClick:Fe},{text:"Set display name",onClick:Be},{text:"Group selected instances",onClick:Q},{text:"Delete instance",intent:"danger",onClick:Le}]);return(0,c.jsxs)(x.Menu,{children:[(0,c.jsx)(x.MenuItem,{text:"Style",children:(0,c.jsx)(_.PartStyleMenu,{style:ce,onChange:Ke,promptFn:fe})}),n.map((function(e){return(0,c.jsx)(x.MenuItem,Object.assign({},e))}))]})}),[Ue,Ze,N,qe,Fe,Be,Le,ce,Ke,fe,ke,de,Z,De,pe,W,$,X,Q]),tt=l.useCallback((function(e){e.preventDefault(),e.stopPropagation();var t=et();x.ContextMenu.show(t,{left:e.clientX,top:e.clientY})}),[et]),nt=Object.assign({"--part-color":ce.color},ce.cssOverride||{}),rt=(0,I.getInstanceDomId)(e.parentInsId,N.id);return(0,c.jsx)("div",{className:Re,children:(0,c.jsxs)(y.BasePartView,{pos:N.pos,viewPort:R,onDragStart:ye,onDragMove:Ie,onDragEnd:be,upperRenderer:Xe,bottomRenderer:Qe,displayMode:D,domId:rt,children:[(0,c.jsx)(O.default,{className:"instance-info-tooltip",html:!0,id:rt+"__tooltip",delayShow:t.INSTANCE_INFO_TOOLTIP_DELAY}),Xe(),Y?j.default.createPortal((0,c.jsxs)("div",{className:"inline-group-editor-container no-drag",children:[(0,c.jsxs)("header",{children:[He," ",(0,c.jsx)("button",{onClick:e.onCloseInlineEditor,children:"close"})]}),(0,c.jsx)(C.VisualPartEditor,Object.assign({},e.inlineGroupProps,{className:"no-drag",ref:se}))]}),ee):(0,c.jsxs)("div",{className:(0,f.default)("ins-view-inner",Ae,"size-"+ue.size),onClick:_e,onDoubleClick:Oe,onContextMenu:tt,style:nt,"data-tip":A.description,"data-for":rt+"__tooltip",children:[ce.icon?(0,c.jsx)(d.FontAwesomeIcon,{icon:ce.icon}):null," ",He]}),Qe()]})})}},91530:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PartStyleMenu=void 0;var s=n(24246),c=n(42272),l=u(n(27378)),d=n(40232),p={size:"regular"};t.PartStyleMenu=function(e){var t=e.onChange,n=e.style||p,o=e.promptFn,a=l.default.useCallback((function(e,r){var i;t(Object.assign({},n,((i={})[e]=r,i)))}),[n,t]),u=l.default.useCallback(i(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("Icon name? (Font Awesome conventions)","rocket");case 2:t=e.sent,n=t.includes(",")?t.split(","):t,a("icon",n);case 5:case"end":return e.stop()}}),e)}))),[o,a]),f=(0,l.useCallback)(i(r().mark((function e(){var t,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("Enter a custom style (valid JSON representing a React CSS object)",n.cssOverride?JSON.stringify(n.cssOverride):"");case 2:t=e.sent;try{i=JSON.parse(t),a("cssOverride",i)}catch(r){console.error(r),(0,d.toastMsg)("Invalid object","danger")}case 4:case"end":return e.stop()}}),e)}))),[o,a,n.cssOverride]);return(0,s.jsxs)(l.default.Fragment,{children:[(0,s.jsxs)(c.MenuItem,{text:"Color",children:[(0,s.jsx)(c.MenuItem,{text:"Amethyst",onClick:function(){return a("color","#9b5de5")}}),(0,s.jsx)(c.MenuItem,{text:"Magenta",onClick:function(){return a("color","#f15bb5")}}),(0,s.jsx)(c.MenuItem,{text:"Yellow",onClick:function(){return a("color","#fee440")}}),(0,s.jsx)(c.MenuItem,{text:"Capri",onClick:function(){return a("color","#00bbf9")}}),(0,s.jsx)(c.MenuItem,{text:"Sea Green",onClick:function(){return a("color","#00f5d4")}}),(0,s.jsx)(c.MenuDivider,{}),(0,s.jsx)(c.MenuItem,{text:"Remove Color",onClick:function(){return a("color",void 0)}})]}),(0,s.jsxs)(c.MenuItem,{text:"Size ("+n.size+")",children:[(0,s.jsx)(c.MenuItem,{text:"Small",onClick:function(){return a("size","small")}}),(0,s.jsx)(c.MenuItem,{text:"Regular",onClick:function(){return a("size","regular")}}),(0,s.jsx)(c.MenuItem,{text:"Large",onClick:function(){return a("size","large")}})]}),(0,s.jsxs)(c.MenuItem,{text:"Icon",children:[(0,s.jsx)(c.MenuItem,{text:"Choose Icon",onClick:u}),(0,s.jsx)(c.MenuItem,{text:"Remove Icon",onClick:function(){return a("icon",void 0)}})]}),(0,s.jsx)(c.MenuItem,{text:"Custom Styling",onClick:f})]})}},41978:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(91530),t)},41756:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(57768),t)},71462:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.calcInstancePosition=t.calcPartWidth=t.calcPartContent=void 0;var a=n(18265),u=o(n(78284)),s=n(12901),c=n(57768),l=n(98784),d=n(90095);t.calcPartContent=function(e,t){if(e.displayName)return e.displayName;if(t.customViewCode)try{var n=Object.entries(e.inputConfig).filter((function(e){var t=e[1];return(0,a.isStaticInputPinConfig)(t)})).reduce((function(e,t){var n,r=t[0],i=t[1];return Object.assign({},e,((n={})[r]=i.value,n))}),{});return u.render(t.customViewCode,{inputs:n,isDefined:s.isDefined}).trim()}catch(r){return console.error("Error with custom view",r),"Error in custom view ["+t.id+"]"}return t.id};t.calcPartWidth=function(e,n){var r=(0,a.okeys)(n.inputs).length*c.MIN_WIDTH_PER_PIN,i=(0,t.calcPartContent)(e,n),o=c.PIECE_CHAR_WIDTH;return(0,l.clamp)(i.length*o+2*c.PIECE_HORIZONTAL_PADDING,r,c.MAX_INSTANCE_WIDTH)};t.calcInstancePosition=function(e,t,n){var r=(0,d.getInstanceDomId)(t,e),i=document.getElementById(r);if(i){var o=i.getBoundingClientRect(),a=o.x,u=o.y,s=o.width,c=u+o.height/2;return{x:a+s/2-n.x,y:c-n.y}}return console.warn("Cannot find element to draw connection to",r),{x:99999,y:99999}}},10616:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutDebugger=t.LayoutDebuggerItem=t.PosDebugger=void 0;var i=n(27378),o=n(24246),a=n(18265),u=r(n(27378)),s=n(13011),c=function(e){var t=e.pos;return(0,o.jsxs)("span",{children:[t.x.toFixed(1),", ",t.y.toFixed(1)]})};t.PosDebugger=function(e){return(0,o.jsx)("span",{className:"pos-debugger",children:(0,o.jsx)(c,{pos:e.pos})})};t.LayoutDebuggerItem=function(e){var n=e.pos,r=e.viewPort,i=e.size,a=e.color,u=r.zoom,s=n.x*u-r.pos.x*u,c=n.y*u-r.pos.y*u,l={transform:"translate("+(s-n.x)+"px, "+(c-n.y)+"px)"},d={transform:"scale("+r.zoom+")"},p={transform:"translate("+n.x+"px, "+n.y+"px)"},f={width:i.width+"px",height:i.height+"px",backgroundColor:a};return(0,o.jsx)("div",{className:"layout-debugger",style:l,children:(0,o.jsxs)("span",{className:"drag-sim",style:p,children:[(0,o.jsx)(t.PosDebugger,{pos:n}),(0,o.jsx)("div",{className:"layout-debugger-zoom-wrapper",style:d,children:(0,o.jsx)("div",{className:"layout-debugger-inner",style:f})})]})})};var l=function(){try{return"true"===localStorage.getItem("pos-debugger")}catch(e){return!1}}();t.LayoutDebugger=function(e){var n=e.extraDebug,r=e.vp,d=e.part,p=e.mousePos;if(!l)return null;var f=n.map((function(e,n){return(0,i.createElement)(t.LayoutDebuggerItem,Object.assign({},e,{key:n}))})),m=[].concat(d.instances.map((function(e){return e.pos})),(0,a.values)(d.inputsPosition),(0,a.values)(d.outputsPosition)).map((function(e){return(0,o.jsx)(t.LayoutDebuggerItem,{pos:e,viewPort:r,size:{width:0,height:0},color:"red"})})),v=(0,s.logicalPosToRenderedPos)(p,r),g=(0,o.jsxs)("div",{className:"viewport-data",children:[(0,o.jsxs)("div",{children:["Pos: ",(0,o.jsx)(c,{pos:r.pos})]}),(0,o.jsxs)("div",{children:["Zoom: ",r.zoom.toFixed(2)," "]}),(0,o.jsxs)("div",{children:["Mouse (logical): ",(0,o.jsx)(c,{pos:p})]}),(0,o.jsxs)("div",{children:["Rendered (rendered): ",(0,o.jsx)(c,{pos:v})]})]});return(0,o.jsxs)(u.default.Fragment,{children:[g,f,m]})}},94e3:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(10616),t)},5681:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.orderVisualPart=t.layoutToInstances=void 0;var i=n(41304),o=n(18265),a=n(72913),u=r(n(63300)),s=n(80807),c=n(99743),l=n(71462);t.layoutToInstances=function(e,t){return(0,u.default)(t,(function(t){(0,o.entries)(e.nodes).forEach((function(e){var n=e[0],r=e[1];if(n.startsWith("ins-")){var i=n.replace("ins-",""),o=t.instances.find((function(e){return e.id===i}));o?o.pos=r.p:console.warn("WAT")}if(n.startsWith("part-input-")){var a=n.replace("part-input-","");t.inputsPosition[a]=r.p}if(n.startsWith("part-output-")){var u=n.replace("part-output-","");t.outputsPosition[u]=r.p}}))}))};t.orderVisualPart=function(e,n,r,u){var d=e.instances,p=e.connections,f=d.reduce((function(e,t){var r,a=(0,c.size)((0,l.calcPartWidth)(t,(0,o.getPartDef)(t,n)),i.PART_HEIGHT);return Object.assign({},e,((r={})["ins-"+t.id]={p:t.pos,s:a},r))}),{}),m=(0,o.okeys)(e.inputsPosition).reduce((function(t,n){var r,o=e.inputsPosition[n],a=(0,c.size)((0,s.calcPartIoWidth)(n),i.PART_HEIGHT);return Object.assign({},t,((r={})["part-input-"+n]={p:o,s:a},r))}),{}),v=(0,o.okeys)(e.outputsPosition).reduce((function(t,n){var r,o=e.outputsPosition[n],a=(0,c.size)((0,s.calcPartIoWidth)(n),i.PART_HEIGHT);return Object.assign({},t,((r={})["part-output-"+n]={p:o,s:a},r))}),{}),g=Object.assign({},f,m,v),h=p.map((function(e){return[(0,o.isExternalConnectionNode)(e.from)?"part-input-"+e.from.pinId:"ins-"+e.from.insId,(0,o.isExternalConnectionNode)(e.to)?"part-output-"+e.to.pinId:"ins-"+e.to.insId]})),y=(0,a.orderLayout)({nodes:g,edges:h},r,(function(n,r){u&&u((0,t.layoutToInstances)(n,e),r)}));return(0,t.layoutToInstances)(y,e)}},72913:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.orderLayout=void 0;var r=n(99743),i=400,o=function(e){return e.reduce((function(e,t){var n,i=(0,r.vSub)(t.p,(0,r.vec)(t.s.width/2,t.s.height/2));return Object.assign({},e,((n={})[t.id]={p:i,s:t.s},n))}),{})};t.orderLayout=function(e,t,n){for(var a=e.nodes,u=e.edges,s=Object.entries(a).map((function(e){var t=e[0],n=e[1];return{id:t,p:(0,r.vAdd)(n.p,(0,r.vec)(n.s.width/2,n.s.height/2)),f:(0,r.vec)(0,0),v:(0,r.vec)(0,0),m:1,s:n.s}})),c=0,l=function(){for(var e=s,t=0;t<e.length;t++)for(var a=t+1;a<e.length;a++)if(t!==a){var l=e[t],d=e[a],p=(0,r.vSub)(l.p,d.p),f=Math.abs(p.x),m=Math.abs(p.y),v=l.id.startsWith("part-input"),g=l.id.startsWith("part-output"),h=d.id.startsWith("part-input"),y=d.id.startsWith("part-output");if(f<i&&m<80){var b=1e3*(i-f);l.f=(0,r.vAdd)(l.f,(0,r.vec)(.5*b,0)),d.f=(0,r.vAdd)(d.f,(0,r.vec)(-.5*b,0))}if(m<50){var I=100*p.y;l.f=(0,r.vAdd)(l.f,(0,r.vec)(0,.5*I)),d.f=(0,r.vAdd)(d.f,(0,r.vec)(0,-.5*I))}if(v&&y){var C=(0,r.vSub)(l.p,d.p).y;if(C<-500){var P=100*(i-C);l.f=(0,r.vAdd)(l.f,(0,r.vec)(0,-.5*P)),d.f=(0,r.vAdd)(d.f,(0,r.vec)(0,.5*P))}}else if(g&&h){var x=(0,r.vSub)(l.p,d.p).y;if(x<500){var j=100*(i-x);l.f=(0,r.vAdd)(l.f,(0,r.vec)(0,-.5*j)),d.f=(0,r.vAdd)(d.f,(0,r.vec)(0,.5*j))}}var _=(0,r.vSub)(l.p,(0,r.vec)(0,l.p.y)),O=(0,r.vLen)(_),E=(0,r.vMul)((0,r.vNorm)(_),-50*O);l.f=(0,r.vAdd)(l.f,E)}u.forEach((function(t){var n=e.find((function(e){return e.id===t[0]})),i=e.find((function(e){return e.id===t[1]}));if(n&&i){var o=(0,r.vec)(0,-200),a=(0,r.vSub)(n.p,i.p),u=(0,r.vSub)(o,a),s=1e3*(0,r.vLen)(u),c=(0,r.vMul)((0,r.vNorm)(u),.5*s),l=(0,r.vMul)((0,r.vNorm)(u),-.5*s);n.f=(0,r.vAdd)(n.f,c),i.f=(0,r.vAdd)(i.f,l)}else console.warn("weoops",t[0],t[1])})),e=(e=e.map((function(e){return(0,r.itrPhysics)(15,e)}))).map((function(e){var t=(0,r.vMul)(e.v,.5),n=(0,r.vLen)(t)>100?(0,r.vMul)((0,r.vNorm)(t),100):t;return Object.assign({},e,{v:n})})),s=e,n&&n({nodes:o(e),edges:u},c),c++};c<t&&(c<2||(0,r.totalEnergy)(s)>.01);)l();return{nodes:o(s),edges:u,itrs:c,timeout:c>=t,total:(0,r.totalEnergy)(s)}}},52688:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateInstancesWithSingleConstPinsMap=t.getLeafInstancesOfSelection=void 0;t.getLeafInstancesOfSelection=function(e,t,n){return e.reduce((function(e,r){var i=n.filter((function(e){return e.to.insId===r.id})).map((function(e){return t.find((function(t){return t.id===e.from.insId}))})).filter((function(e){return!!e}));return[].concat(e,i)}),[]).filter((function(t){return 1===n.filter((function(e){return e.from.insId===t.id||e.to.insId===t.id})).length&&!e.includes(t)}))};t.calculateInstancesWithSingleConstPinsMap=function(e,t){return e.connections.filter((function(e){return t.has(e.from.insId)})).reduce((function(e,n){var r=t.get(n.from.insId),i=n.to.insId,o=e.get(i)||new Map;return o.set(n.to.pinId,{val:r,insId:n.from.insId}),e.set(i,o),e}),new Map)}},16914:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PartIoView=void 0;var c=n(24246),l=u(n(27378)),d=n(18265),p=n(12589),f=n(90095),m=s(n(60042)),v=n(42272),g=n(91312),h=n(40411),y=n(18265),b=s(n(49040));t.PartIoView=l.memo((function(e){var t=e.viewPort,n=e.selected,o=e.pos,a=e.type,u=e.id,s=e.onDblClick,I=e.onRename,C=e.onDelete,P=e.onChangeInputMode,x=e.inputMode,j=e.onSelect,_=e.closest,O=e.onSetDescription,E=e.description,w=e.onRequestHistory,S=e.onMouseUp,M=e.onMouseDown,k=(0,h.useHistoryHelpers)(w,u,a),D=k.history,T=k.resetHistory,N=k.refreshHistory,R=(0,g.usePrompt)(),A=l.useCallback(i(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R("Description?",E);case 2:t=e.sent,O(a,u,t);case 4:case"end":return e.stop()}}),e)}))),[R,E,O,a,u]),V=l.useCallback((function(){C&&C(a,u)}),[a,u,C]),z=l.useCallback((function(){I&&I(a,u)}),[a,u,I]),H=l.useCallback((function(e){P&&P(u,e)}),[u,P]),G=l.useCallback((function(){return[{text:"Current mode - "+x,onClick:d.noop},{text:"Make required",onClick:function(){return H("required")}},{text:"Make optional",onClick:function(){return H("optional")}},{text:"Make required-if-connected",onClick:function(){return H("required-if-connected")}},{text:"Set description",onClick:A}].concat(e.onRename?[{text:"Rename",onClick:z}]:[],e.onDelete?[{text:"Delete",onClick:V}]:[])}),[A,x,H,V,z,e.onDelete,e.onRename]),q=l.useCallback((function(t){s&&s(e.id,t)}),[s,e.id]),F=l.useCallback((function(){j(u,a)}),[u,a,j]),L=l.useCallback((function(){return(0,c.jsx)(v.Menu,{children:G().map((function(e){return(0,c.jsx)(v.MenuItem,Object.assign({},e))}))})}),[G]),B=l.useCallback((function(e){e.preventDefault(),e.stopPropagation();var t=L();v.ContextMenu.show(t,{left:e.clientX,top:e.clientY})}),[L]),U="input"===a?(0,y.getInputName)(u):(0,d.getOutputName)(u),Z=l.useCallback((function(e){S(u,a,e)}),[u,S,a]),W=l.useCallback((function(e){M(u,a,e)}),[u,M,a]);return(0,c.jsxs)(p.BasePartView,{className:(0,m.default)("part-io-view",a),pos:o,onDragEnd:function(n,r){var i=e.pos,o=(r.x-i.x)/t.zoom,s=(r.y-i.y)/t.zoom,c=i.x+o,l=i.y+s;e.onDragEnd(a,u,n,Object.assign({},r,{x:c,y:l}))},onDragStart:function(t,n){e.onDragStart(u,t,n)},onDragMove:function(n,r){var i=e.pos,o=(r.x-i.x)/t.zoom,s=(r.y-i.y)/t.zoom,c=i.x+o,l=i.y+s;e.onDragMove(a,u,n,Object.assign({},r,{x:c,y:l}))},viewPort:t,children:[(0,c.jsx)(b.default,{className:"pin-info-tooltip",html:!0,id:u+e.insId,getContent:[function(){var t=(0,h.calcHistoryContent)(D),n=e.description?"<em>"+e.description+"</em>":"";return"<div><div><strong>"+U+"</strong> ("+a+") </div>\n      "+n+"\n      <hr/>\n      "+t+"\n    "},25]}),(0,c.jsx)("div",{onMouseEnter:N,onMouseOut:T,onMouseUp:Z,onMouseDown:W,"data-tip":"","data-html":!0,"data-for":u+e.insId,className:(0,m.default)("part-io-view-inner",{closest:_,selected:n}),id:(0,f.getMainPinDomId)(e.insId,u,a),onClick:F,onDoubleClick:q,onContextMenu:B,children:u})]})}))},43318:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(16914),t)},80807:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcPartIoWidth=t.MIN_WIDTH_PER_PIN=t.PIECE_CHAR_WIDTH=t.PIECE_HORIZONTAL_PADDING=void 0,t.PIECE_HORIZONTAL_PADDING=15,t.PIECE_CHAR_WIDTH=9,t.MIN_WIDTH_PER_PIN=40;t.calcPartIoWidth=function(e){return Math.max(t.MIN_WIDTH_PER_PIN,e.length*t.PIECE_CHAR_WIDTH+2*t.PIECE_HORIZONTAL_PADDING)}},57076:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PinView=t.PIN_HEIGHT=void 0;var u=n(24246),s=o(n(27378)),c=a(n(60042)),l=n(42272),d=n(12901),p=n(18265),f=n(90095),m=n(75579),v=a(n(49040)),g=n(40411);t.PIN_HEIGHT=23;t.PinView=s.memo((function(e){var t=e.selected,n=e.type,r=e.connected,i=e.rotate,o=e.optional,a=e.isClosestToMouse,h=e.id,y=e.onRequestHistory,b=e.onMouseDown,I=e.onMouseUp,C=(0,g.useHistoryHelpers)(y,h,n),P=C.history,x=C.resetHistory,j=C.refreshHistory,_="input"===n?(0,p.getInputName)(h):(0,p.getOutputName)(h),O="input"===e.type&&(0,d.isDefined)(e.constValue)?e.constValue:void 0,E=i&&"input"===n,w=s.useCallback((function(e){0===e.button&&b(h,n,e)}),[h,n,b]),S=s.useCallback((function(e){0===e.button&&I(h,n,e)}),[h,n,I]);return(0,u.jsxs)("div",{className:function(){if("input"===e.type){var u=e.isSticky,s=e.constValue;return(0,c.default)("pin",{sticky:u,selected:t,closest:a,optional:o,connected:r,rotate:i,"const-value":(0,d.isDefined)(s),"env-value":(0,d.isDefined)(s)&&(0,p.isEnvValue)(s),minimized:e.minimized},n)}return(0,c.default)("pin",{selected:t,connected:r,closest:a,rotate:i,optional:o,minimized:e.minimized},n,i)}(),"data-pin-id":h,children:[(0,u.jsx)(v.default,{className:"pin-info-tooltip",html:!0,id:h+e.insId,getContent:[function(){var t=(0,g.calcHistoryContent)(P,"input"===n?e.queuedValues:void 0),r=e.description?"<em>"+e.description+"</em>":"";return"<div><div><strong>"+_+"</strong> ("+n+") </div>\n      "+r+"\n      <hr/>\n      "+((0,d.isDefined)(O)?"<div>Static value: <strong>"+(0,m.valuePreview)(O).substr(0,200)+"</strong></div>":t)+"\n    "},25]}),(0,u.jsxs)("div",{onMouseEnter:j,onMouseOut:x,onMouseDown:w,onMouseUp:S,"data-tip":"","data-html":!0,"data-for":h+e.insId,id:(0,f.getPinDomId)(e.parentInsId,e.insId,h,n),"data-place":E?"bottom":null,onDoubleClick:function(t){return e.onDoubleClick&&e.onDoubleClick(h,t)},className:"pin-inner",onContextMenu:function(t){t.preventDefault(),t.stopPropagation();var n=function(){var t=(0,u.jsx)(l.MenuItem,{onClick:function(){return e.onToggleLogged(e.insId,e.id,e.type)}}),n=(0,u.jsx)(l.MenuItem,{onClick:function(){return e.onToggleBreakpoint(e.insId,e.id,e.type)}}),r=(0,u.jsx)(l.MenuItem,{onClick:function(){return e.onInspect(e.insId,{id:e.id,type:e.type})},text:"Inspect"});if("input"===e.type){var i=e.onConvertConstToEnv;return(0,d.isDefined)(O)?(0,u.jsxs)(l.Menu,{children:[(0,u.jsx)(l.MenuItem,{onClick:function(){return e.onDetachConstValue(e.id)},text:"Detach value"}),(0,u.jsx)(l.MenuItem,{onClick:function(){return e.onCopyConstValue(e.id)},text:"Copy value"}),(0,d.isDefined)(e.copiedConstValue)?(0,u.jsx)(l.MenuItem,{onClick:function(){return e.onPasteConstValue(e.id)},text:"Paste value"}):null,i?(0,u.jsx)(l.MenuItem,{onClick:function(){return i(e.id)},text:"Convert to Env Var"}):null]}):(0,u.jsxs)(l.Menu,{children:[(0,u.jsx)(l.MenuItem,{onClick:function(){return e.onToggleSticky(e.id)},text:"Toggle sticky (square means sticky)"}),t,n,r,(0,d.isDefined)(e.copiedConstValue)?(0,u.jsx)(l.MenuItem,{onClick:function(){return e.onPasteConstValue(e.id)},text:"Paste value"}):null]})}return(0,u.jsx)(l.Menu,{children:r})}();l.ContextMenu.show(n,{left:t.clientX,top:t.clientY})},onClick:function(t){var r=e.onShiftClick,i=e.onClick,o=e.id;t.shiftKey&&r?r(o,t):i(o,n,t)},children:[_," ",(0,d.isDefined)(O)?(0,u.jsxs)(s.Fragment,{children:[":",(0,u.jsx)("span",{className:"value",children:(0,d.toString)(O)})]}):null,"input"===e.type&&e.isSticky?(0,u.jsx)("span",{className:"suffix",children:"s"}):null,"input"===e.type&&e.queueSize?(0,u.jsxs)("span",{className:"suffix",children:[e.queueSize," in Q"]}):null]}),(0,u.jsx)("div",{className:"wire"})]})}))},40411:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useHistoryHelpers=t.calcHistoryContent=void 0;var i=n(75579),o=r(n(27378)),a=n(27378);t.calcHistoryContent=function(e,t){if(e){var n=e.total,r=e.lastSamples;return"<strong>Activated "+n+" times this session</strong>"+" "+(r.length>0?"<div>Last value: <strong>"+(0,i.valuePreview)(r[0].val).substring(0,200)+"</strong></div><em>Inspect instance for the full value</em>":"")+(t?"<hr/><div>Queued values: <strong>"+t+"</strong></div>":"")}return"Loading session data.."};t.useHistoryHelpers=function(e,t,n){var r=(0,a.useRef)(),i=(0,a.useState)(),u=i[0],s=i[1];return{history:u,refreshHistory:(0,a.useCallback)((function(){clearInterval(r.current),e(t,n).then((function(e){s(e)})),r.current=setInterval((function(){e(t,n).then((function(e){s(e)}))}),500)}),[e,t,n]),resetHistory:o.default.useCallback((function(){clearInterval(r.current),s(void 0)}),[])}}},40490:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.QuickAddMenu=void 0;var a=n(24246),u=o(n(27378)),s=n(18265),c=n(42272),l=n(18264),d=n(10934),p=l.Select.ofType(),f=function(e){switch(e.type){case"part":return""+e.part.id;case"value":return"Add inline value or function";case"import":return"Import "+e.importablePart.part.id+" from "+e.importablePart.module}},m=function(e,t){var n=t.handleClick,r=t.modifiers,i=t.query;if(!r.matchesPredicate)return null;var o=f(e);return"value"===e.type?(0,a.jsxs)(u.Fragment,{children:[(0,a.jsx)(c.MenuDivider,{}),(0,a.jsx)(c.MenuItem,{active:r.active,disabled:r.disabled,onClick:n,text:(0,d.highlightText)(o,i)},f(e))]}):(0,a.jsx)(c.MenuItem,{active:r.active,disabled:r.disabled,onClick:n,text:(0,d.highlightText)(o,i)},f(e))},v=function(e,t,n,r){var i=f(t).toLocaleLowerCase(),o=e.toLowerCase();return r?i===o:i.includes(o)};t.QuickAddMenu=function(e){var t,n=e.resolvedFlow,r=e.onRequestImportables,i={left:e.pos.x,top:e.pos.y},o=u.useState(),l=o[0],d=o[1];u.useEffect((function(){r&&r("").then(d)}),[r]);var f=(0,s.values)(Object.assign({},n.dependencies,((t={})[n.main.id]=n.main,t))),g=f.map((function(e){return{type:"part",part:e}})),h=new Set(f.map((function(e){return e.id}))),y=l?l.filter((function(e){return!h.has(e.part.id)})).map((function(e){return{type:"import",importablePart:e}})):[],b=g.concat(y).concat({type:"value"});return(0,a.jsx)("div",{className:"quick-add-menu",style:i,children:(0,a.jsx)(p,{className:"quick-add-parts-select",items:b,itemPredicate:v,itemRenderer:m,inputProps:{className:"quick-add-input"},noResults:(0,a.jsx)(c.MenuItem,{disabled:!0,text:"No results."}),onItemSelect:function(t){return e.onAdd(t)},popoverProps:{isOpen:!0,onClose:function(){return e.onClose()}}})})}},29841:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(40490),t)},70030:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRuntimePlayer=void 0;var r=n(18265),i=n(22940),o=(0,r.debugLogger)("runtime-player");t.createRuntimePlayer=function(e){var t=0,n=[],r=!1,a=Date.now(),u=t,s=function s(){return requestAnimationFrame((function(){var c,l,d,p=Date.now();u=t,t+=p-a,a=p,c=u,l=t,d=n,n=[],d.length&&o("Playing "+d.length+" events from",c,l),d.forEach((function(t){o("Playing event",t),(0,i.playEvent)(e,t)})),r&&s()}))},c=function(){r=!1},l=function(){n=[],document.querySelectorAll("[data-runtime]").forEach((function(e){e.removeAttribute("data-runtime")})),document.querySelectorAll("[data-runtime-queue]").forEach((function(e){e.removeAttribute("data-runtime-queue")}))};return{stop:c,start:function(e){void 0===e&&(e=0),r=!0,t=e,a=Date.now(),s()},addEvents:function(e){var t;(t=n).push.apply(t,e)},destroy:function(){c(),l()},clear:l,status:function(){return{running:r,currDt:t,lastDt:u,queue:n,last:a}}}}},22940:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.playEvent=t.cancelTimers=void 0;var r=n(18265),i=n(90095),o=5e3,a=(0,r.debugLogger)("runtime-player:play-event"),u=function(e){return e.type===r.DebuggerEventType.INPUT_CHANGE||e.type===r.DebuggerEventType.OUTPUT_CHANGE?e.parentInsId+"."+e.insId+"."+e.pinId:e.parentInsId+"."+e.insId};t.cancelTimers=new Map;t.playEvent=function(e,n){var s,c,l=u(n);switch(n.type){case r.DebuggerEventType.INPUT_CHANGE:case r.DebuggerEventType.OUTPUT_CHANGE:var d=n.pinId,p=n.insId,f=n.parentInsId,m=n.type===r.DebuggerEventType.INPUT_CHANGE?"input":"output",v=p===e?(0,i.getMainPinDomId)(p,d,m):(0,i.getPinDomId)(f,p,d,m),g=document.getElementById(v),h=p+"."+d,y=n.type===r.DebuggerEventType.OUTPUT_CHANGE?document.querySelectorAll('[data-from-id="'+h+'"]'):[];if(g){clearTimeout(t.cancelTimers.get(l)),g.removeAttribute("data-runtime"),y.forEach((function(e){e.removeAttribute("data-runtime")})),setTimeout((function(){g.setAttribute("data-runtime","active"),y.forEach((function(e){e.setAttribute("data-runtime","active")}))}),0);var b=setTimeout((function(){g.removeAttribute("data-runtime"),y.forEach((function(e){e.removeAttribute("data-runtime")})),t.cancelTimers.delete(l)}),o);t.cancelTimers.set(u(n),b)}else console.warn("No DOM element with Id ["+v+"] found to play event"),a("No DOM element with Id ["+v+"] found to play event",n);break;case r.DebuggerEventType.PROCESSING_CHANGE:var I=n.insId,C=n.parentInsId,P=(0,i.getInstanceDomId)(C,I),x=null===(s=document.getElementById(P))||void 0===s?void 0:s.parentElement;if(!x)return void a("No DOM element with Id ["+P+"] found to play event",n);if(!0===n.val)x.setAttribute("data-runtime","processing"),clearTimeout(t.cancelTimers.get(l));else{x.removeAttribute("data-runtime"),setTimeout((function(){x.setAttribute("data-runtime","done")}),0);var j=setTimeout((function(){x.removeAttribute("data-runtime"),t.cancelTimers.delete(l)}),o);t.cancelTimers.set(l,j)}break;case r.DebuggerEventType.ERROR:var _=n.insId,O=n.parentInsId,E=(0,i.getInstanceDomId)(O,_),w=null===(c=document.getElementById(E))||void 0===c?void 0:c.parentElement;if(!w)return void a("No DOM element with Id ["+E+"] found to play event",n);clearTimeout(t.cancelTimers.get(l)),w.removeAttribute("data-runtime"),setTimeout((function(){w.setAttribute("data-runtime","error")}));var S=setTimeout((function(){w.removeAttribute("data-runtime"),t.cancelTimers.delete(l)}),o);t.cancelTimers.set(l,S);var M=Object.assign({},n,{type:r.DebuggerEventType.OUTPUT_CHANGE,pinId:r.ERROR_PIN_ID});(0,t.playEvent)(e,M);break;case r.DebuggerEventType.INPUTS_STATE_CHANGE:(0,r.entries)(n.val).forEach((function(e){var t=e[0],r=e[1],o=n.insId,u=n.parentInsId,s=(0,i.getPinDomId)(u,o,t,"input"),c=document.getElementById(s);c?r>0?c.setAttribute("data-runtime-queue",""+r):c.removeAttribute("data-runtime-queue"):a("No DOM element with Id ["+s+"] found to play event",n)}))}}},69385:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useDebounce=void 0;var r=n(27378);t.useDebounce=function(e,t){var n=(0,r.useState)(e),i=n[0],o=n[1];return(0,r.useEffect)((function(){var n=setTimeout((function(){o(e)}),t);return function(){clearTimeout(n)}}),[e,t]),[i,o]}},13011:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.handleChangePartInputType=t.handleIoPinRename=t.handleInstanceDrag=t.getInstancesInRect=t.isJsxValue=t.getMiddleOfViewPort=t.fitViewPortToPart=t.centerBoardPosOnTarget=t.renderedPosToLogicalPos=t.logicalPosToRenderedPos=t.getEffectivePartDimensions=t.calcPartsPositions=t.calcSelectionBoxArea=t.animateViewPort=t.easeInOutNum=t.easeInOutPos=t.easeInOutQuad=t.center=t.distance=t.clamp=t.domToViewPort=t.roundNumber=t.createNewPartInstance=t.createNewInlinePartInstance=t.parseInputOutputTypes=t.parsePromptValue=t.getSelectionBoxRect=t.findClosestPin=t.toggleStickyPin=t.emptyList=t.emptyObj=void 0;var u=o(n(63300)),s=a(n(98739)),c=n(41304),l=n(18265),d=n(68488),p=n(18265),f=n(71462),m=n(80807),v=n(99743),g=n(52688),h=n(41756);t.emptyObj={},t.emptyList=[];t.toggleStickyPin=function(e,t,n,r){return u.produce(e,(function(e){var r=e.instances,i=r.find((function(e){return e.id===t}));if(!i)throw new Error("blah");var o=i.inputConfig||{},a=o[n]||(0,l.queueInputPinConfig)();(0,l.isStickyInputPinConfig)(a)?o[n]=(0,l.queueInputPinConfig)():o[n]=(0,l.stickyInputPinConfig)(),e.instances=r.map((function(e){return e===i?Object.assign({},i,{inputConfig:o}):e}))}))};t.findClosestPin=function(e,t,n,r,i,o){var a=(0,l.partInstance)(e.id,e.id),u=(0,p.okeys)(e.inputs).map((function(e){return{id:e,type:"input",pos:(0,d.calcMainInputPosition)(e,i,"input",r,o),ins:a}})),s=(0,p.okeys)(e.outputs).map((function(e){return{id:e,type:"output",pos:(0,d.calcMainOutputPosition)(e,i,"output",r,o),ins:a}})),c=e.instances.reduce((function(n,a){var u=(0,l.getPartDef)(a,t),s=(0,h.getVisibleInputs)(a,u,e.connections),c=(0,h.getVisibleOutputs)(a,u,e.connections),p=s.map((function(e){return{ins:a,type:"input",pos:(0,d.calcPinPosition)(i,a.id,e,"input",r,o),id:e}})),f=c.map((function(e){return{ins:a,type:"output",pos:(0,d.calcPinPosition)(i,a.id,e,"output",r,o),id:e}}));return[].concat(n,p,f)}),[]),f=[].concat(u,c,s),m={dis:1e5,item:f[0]};return f.forEach((function(e){var t=e.pos.x-n.x,r=e.pos.y-n.y,i=Math.sqrt(t*t+r*r);i<m.dis&&(m.dis=i,m.item=e)})),m.item};t.getSelectionBoxRect=function(e,t){var n=Math.min(e.x,t.x),r=Math.min(e.y,t.y);return{x:n,y:r,w:Math.max(e.x,t.x)-n,h:Math.max(e.y,t.y)-r}};t.parsePromptValue=function(e){if(null!==e){var t=parseInt(e,10),n=e;return t.toString()!=e||isNaN(t)||(n=t),n}};t.parseInputOutputTypes=function(e){var t=e.match(/part\((.+)\|(.+)\)/)||[],n=t[1],r=t[2],i=(0,p.entries)(JSON.parse(n)).map((function(e){var t=e[0],n={type:e[1],optional:(0,p.isOptionalType)(t)};return[t.replace(/\?$/,""),n]})),o=(0,p.entries)(JSON.parse(r)).map((function(e){var t=e[0],n={type:e[1],optional:(0,p.isOptionalType)(t)};return[t.replace(/\?$/,""),n]}));return{inputs:(0,p.fromEntries)(i),outputs:(0,p.fromEntries)(o)}};t.createNewInlinePartInstance=function(e,t,n){void 0===t&&(t=-1*c.PART_HEIGHT*1.5);var r=(0,l.inlinePartInstance)(e.id+"-"+(0,p.randomInt)(999),e,{},{x:0,y:0}),i=(0,f.calcPartWidth)(r,e),o={x:n.x-i/2,y:n.y+t};return Object.assign({},r,{pos:o})};t.createNewPartInstance=function(e,t,n,r){void 0===t&&(t=-1*c.PART_HEIGHT*1.5);var i="string"==typeof e?(0,l.getPartDef)(e,r):e;if(!i)throw new Error(e+" part not found in repo");var o=(0,p.entries)(i.inputs).reduce((function(e,t){var n=t[0],r=t[1];return r.defaultValue&&(e[n]=(0,l.staticInputPinConfig)(r.defaultValue)),e}),{}),a=(0,l.partInstance)((0,s.default)(),i.id,o,{x:0,y:0}),u=(0,f.calcPartWidth)(a,i),d={x:n.x-u/2,y:n.y+t};return Object.assign({},a,{pos:d})};t.roundNumber=function(e){return Math.round(100*e)/100};t.domToViewPort=function(e,n,r){return{x:(0,t.roundNumber)(n.pos.x+e.x/n.zoom/r.zoom),y:(0,t.roundNumber)(n.pos.y+e.y/n.zoom/r.zoom)}};t.clamp=function(e,t,n){return Math.max(e,Math.min(t,n))};t.distance=function(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)};t.center=function(e,t,n){var r=n.zoom,i=e.x+e.w/2,o=e.y+e.h/2;return{x:i-t.w/r/2,y:o-t.h/r/2}};t.easeInOutQuad=function(e){return e<.5?2*e*e:(4-2*e)*e-1};t.easeInOutPos=function(e,n,r,i,o){var a=(0,t.clamp)(0,1,(o-r)/i),u=(0,t.easeInOutQuad)(a),s=n.x-e.x,c=n.y-e.y;return{x:e.x+s*u,y:e.y+c*u}};t.easeInOutNum=function(e,n,r,i,o){var a=(0,t.clamp)(0,1,(o-r)/i);return e+(n-e)*(0,t.easeInOutQuad)(a)};t.animateViewPort=function(e,n,r,i){var o=(0,t.distance)(e.pos,n.pos),a=Date.now(),u=r;if(0!==o){requestAnimationFrame((function r(){var o=Date.now(),s=(0,t.easeInOutPos)(e.pos,n.pos,a,u,o),c=(0,t.easeInOutNum)(e.zoom,n.zoom,a,u,o);o-a<u?(i({pos:s,zoom:c}),requestAnimationFrame(r)):i({pos:s,zoom:c})}))}else i(e)};t.calcSelectionBoxArea=function(e){var n=(0,t.getSelectionBoxRect)(e.from,e.to);return n.h*n.w};var y=function(e,t,n,r){return{left:n.x,right:n.x+e,top:n.y,bottom:n.y+t,tag:r,center:(0,l.calcCenter)(Object.assign({w:e,h:t},n))}};t.calcPartsPositions=function(e,t){var n=e.instances.map((function(e){var n=(0,f.calcPartWidth)(e,(0,l.getPartDef)(e,t)),r=c.PART_HEIGHT;return y(n,r,e.pos,e.id)})),r=(0,p.okeys)(e.inputs).map((function(t){var n=(0,m.calcPartIoWidth)(t),r=c.PART_HEIGHT,i=e.inputsPosition[t]||{x:0,y:0};return y(n,r,i,"input_"+t)})),i=(0,p.okeys)(e.outputs).map((function(t){var n=(0,m.calcPartIoWidth)(t),r=c.PART_HEIGHT,i=e.outputsPosition[t]||{x:0,y:0};return y(n,r,i,"output"+t)}));return[].concat(n,r,i)};t.getEffectivePartDimensions=function(e,n){var r=(0,t.calcPartsPositions)(e,n),i=r[0]||{left:0,right:0,top:0,bottom:0},o=r.reduce((function(e,t){return t.left<e?t.left:e}),i.left),a=r.reduce((function(e,t){return t.right>e?t.right:e}),i.right),u=r.reduce((function(e,t){return t.top<e?t.top:e}),i.top),s=a-o,c=r.reduce((function(e,t){return t.bottom>e?t.bottom:e}),i.bottom)-u,d={x:o,y:u};return{size:{width:s,height:c},pos:d,center:(0,l.calcCenter)(Object.assign({w:s,h:c},d))}};t.logicalPosToRenderedPos=function(e,t){var n=(0,v.vSub)(e,t.pos);return(0,v.vMul)(n,t.zoom)};t.renderedPosToLogicalPos=function(e,t){var n=(0,v.vDiv)(e,t.zoom);return(0,v.vAdd)(t.pos,n)};t.centerBoardPosOnTarget=function(e,n,r,i){var o=(0,t.logicalPosToRenderedPos)(e,i),a=(0,t.renderedPosToLogicalPos)(o,Object.assign({},i,{zoom:r})),u=Math.max(e.x,a.x)-Math.min(e.x,a.x),s=Math.max(e.y,a.y)-Math.min(e.y,a.y);return{x:r>i.zoom?i.pos.x+u:i.pos.x-u,y:r>i.zoom?i.pos.y+s:i.pos.y-s}};t.fitViewPortToPart=function(e,n,r,i){void 0===i&&(i=[20,150]);var o=(0,t.getEffectivePartDimensions)(e,n),a=o.size,u=o.center,s=i[0],c=i[1],l=a.width+s,d=a.height+c,p=r.width/l,f=r.height/d,m=Math.min(p,f)/1.15,v=(0,t.clamp)(.3,1.2,m);return{zoom:v,pos:{x:u.x-r.width/2/v,y:u.y-r.height/2/v+40}}};t.getMiddleOfViewPort=function(e,n){var r={x:n.width/2,y:n.height/2};return(0,t.renderedPosToLogicalPos)(r,e)};t.isJsxValue=function(e){var t=function(e){return(0,p.isDefined)(e.ref)&&(0,p.isDefined)(e.type)&&(0,p.isDefined)(e.props)};try{var n=JSON.parse(e);return t(n)||Array.isArray(n)&&t(n[0])}catch(r){return!1}};t.getInstancesInRect=function(e,n,r,i,o,a,u){var s=e.from,d=e.to,p=(0,t.getSelectionBoxRect)(s,d);return o.filter((function(e){var t=e.pos,i=(0,f.calcPartWidth)(e,(0,l.getPartDef)(e,n))*r.zoom*u.zoom,o=Object.assign({},t,{w:i,h:c.PART_HEIGHT*r.zoom*u.zoom});return console.log(e.id,o,"main",p),(0,l.intersectRect)(p,o)||(0,l.intersectRect)(o,p)})).map((function(e){return e.id}))};t.handleInstanceDrag=function(e,t,n,r,i,o){r.preventDefault(),r.stopPropagation();var a,s=(0,v.vSub)(n,t.pos),c=u.produce(e,(function(e){var u=e.instances.find((function(e){return e.id===t.id}));if(!u)throw new Error("impossible state dragging instance that does not exist");!r.shiftKey&&o&&(a=[o]);var c=e.instances.filter((function(e){return i.includes(e.id)&&e!==u})),l=[u].concat(c),d=(0,g.getLeafInstancesOfSelection)(l,e.instances,e.connections);[].concat(c,d).forEach((function(e){e.pos=(0,v.vAdd)(e.pos,s)})),u.pos=n,!r.shiftKey&&o&&(a=[o])}));return{newValue:c,newSelected:a}};t.handleIoPinRename=function(e,t,n,r){return u.produce(e,(function(e){"input"===t?(e.inputs[r]=e.inputs[n],e.inputsPosition[r]=e.inputsPosition[n],delete e.inputs[n],e.connections=e.connections.map((function(e){return(0,l.isExternalConnectionNode)(e.from)&&e.from.pinId===n?Object.assign({},e,{from:Object.assign({},e.from,{pinId:r})}):e}))):(e.outputs[r]=e.outputs[n],e.outputsPosition[r]=e.outputsPosition[n],e.connections=e.connections.map((function(e){return(0,l.isExternalConnectionNode)(e.to)&&e.to.pinId===n?Object.assign({},e,{to:Object.assign({},e.to,{pinId:r})}):e})),e.completionOutputs=(e.completionOutputs||[]).map((function(e){return e.split("+").map((function(e){return e===n?r:n})).join("+")})),delete e.outputs[n])}))};t.handleChangePartInputType=function(e,t,n){return u.produce(e,(function(e){var r=e.inputs[t];if(!r)throw new Error("Wat");r.mode=n}))}},17229:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createEditorClient=void 0;var r=n(18265),i=n(14206),o=n(87915),a=n(19389),u=(0,r.debugLogger)("runtime-editor-client");t.createEditorClient=function(e,t){var n=new URL(e),r=(0,o.io)(n.origin,{path:("/"===n.pathname?"":n.pathname)+"/socket.io/editor",timeout:3e4});return r.emit("join-room-editor",t),{emitChange:function(e){r.emit(a.DebuggerServerEventType.CHANGE_EVENT_NAME,e)},emitBreakpointsChange:function(e){r.emit(a.DebuggerServerEventType.UPDATE_BREAKPOINTS,e)},interceptInput:function(e){r.emit(a.DebuggerServerEventType.INPUT_VALUE_OVERRIDE,e)},interceptOutput:function(e){r.emit(a.DebuggerServerEventType.OUTPUT_VALUE_OVERRIDE,e)},onRuntimeReady:function(e){return r.on(a.DebuggerServerEventType.RUNTIME_READY,e),function(){return r.off(a.DebuggerServerEventType.RUNTIME_READY,e)}},onChangeAwk:function(e){return r.on(a.DebuggerServerEventType.CHANGE_AWK,e),function(){return r.off(a.DebuggerServerEventType.CHANGE_AWK,e)}},onChangeError:function(e){return r.on(a.DebuggerServerEventType.CHANGE_ERROR,e),function(){return r.off(a.DebuggerServerEventType.CHANGE_ERROR,e)}},onIsAlive:function(e){return r.on(a.DebuggerServerEventType.IS_ALIVE,e),function(){return r.off(a.DebuggerServerEventType.IS_ALIVE,e)}},emitInputValue:function(e,t){u("Emitting push input value to "+e+" %o",t),r.emit(a.DebuggerServerEventType.PUSH_INPUT_VALUE,{pinId:e,value:t})},destroy:function(){r.disconnect(),(0,a.enumToArray)(a.DebuggerServerEventType).forEach((function(e){return r.off(e)}))},onDisconnect:function(e){return r.on("disconnect",e),function(){return r.off("disconnect",e)}},debugInfo:function(){return"Remote debugger for "+e},onBatchedEvents:function(e){return r.on(a.DebuggerServerEventType.EVENTS_BATCH,e),function(){return r.off(a.DebuggerServerEventType.EVENTS_BATCH,e)}},requestState:function(){return i.default.get(e+"/state").then((function(e){return e.data.state}))},getHistory:function(t){return i.default.get(e+"/history",{params:{insId:t.insId,pinId:t.pinId,limit:t.limit}}).then((function(e){return e.data}))},clearHistory:function(){return i.default.delete(e+"/history").then((function(){}))},triggerPart:function(t,n){return i.default.post(e+"/trigger",{partId:t,inputs:n}).then((function(e){return e.data}))}}}},31548:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeData=void 0;t.normalizeData=function(e){if("object"==typeof e&&null!==e){e=Object.assign({},e);var t=new WeakSet;return function e(n){if("object"!=typeof n||Array.isArray(n))return n;if(t.has(n))return"[Circular]";try{t.add(n)}catch(o){console.error(typeof n,n)}if(Array.isArray(n))return n.map(e);if("object"==typeof n){var r={};for(var i in n)r[i]=e(n[i]);return r}return n}(e)}return e}},4278:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRuntimeClient=t.DEFAULT_DT_SCALE=void 0;var r=n(18265),i=n(87915),o=n(19389),a=n(31548),u=(0,r.debugLogger)("debugger-runtime-client");t.DEFAULT_DT_SCALE=1;t.createRuntimeClient=function(e,t){var n=new URL(e),s=(0,i.io)(n.origin,{path:("/"===n.pathname?"":n.pathname)+"/socket.io/runtime",timeout:1e3,reconnectionAttempts:3});s.emit("join-room-runtime",t);new Set;s.on(o.DebuggerServerEventType.UPDATE_BREAKPOINTS,(function(e){new Set(e)}));var c=(0,r.cappedArrayDebounce)((function(e){u("Emitting debounced batched events - "+e.length),s.emit(o.DebuggerServerEventType.EVENTS_BATCH,e)}),100,200);return{onChange:function(e){return s.on(o.DebuggerServerEventType.CHANGE_EVENT_NAME,e),function(){return s.off(o.DebuggerServerEventType.CHANGE_EVENT_NAME,e)}},onInput:function(e){return s.on(o.DebuggerServerEventType.PUSH_INPUT_VALUE,e),function(){return s.off(o.DebuggerServerEventType.PUSH_INPUT_VALUE,e)}},emitEvent:function(e){u("Emitting event "+e.type+" change event of "+e.insId),e.val=(0,a.normalizeData)(e.val),c.addItem(Object.assign({},e,{time:Date.now()}))},emitRuntimeReady:function(){s.emit(o.DebuggerServerEventType.RUNTIME_READY,{})},emitChangeAwk:function(){s.emit(o.DebuggerServerEventType.CHANGE_AWK,{})},emitChangeError:function(e){s.emit(o.DebuggerServerEventType.CHANGE_ERROR,{error:e})},emitIsAlive:function(e){s.emit(o.DebuggerServerEventType.IS_ALIVE,{time:e})},destroy:function(){c.flush(),(0,o.enumToArray)(o.DebuggerServerEventType).forEach((function(e){return s.off(e)})),s.disconnect()},onDisconnect:function(e){return s.on("disconnect",e),function(){return s.off("disconnect",e)}},waitForConnection:function(){return new Promise((function(e,t){s.connected?e():(s.on("connect_error",(function(e){t("Socket connect error: "+e)})),s.on("connect",(function(){e()})))}))}}}},19389:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DebuggerServerEventType=t.enumToArray=t.isNumber=t.isSimpleType=t.valuePreview=t.toString=void 0;var r=n(63726);t.toString=function(e){if("object"===typeof e){if(e instanceof Error)return JSON.stringify((0,r.serializeError)(e));try{return JSON.stringify(e).substr(0,250)}catch(t){return"Object (cannot stringify)"}}return(""+e).substr(0,250)};t.valuePreview=function(e){return(0,t.toString)(e).substr(0,100)};t.isSimpleType=function(e){return["number","string","boolean"].includes(typeof e)};t.isNumber=function(e){return!1===isNaN(Number(e))},t.enumToArray=function(e){return Object.keys(e).filter(t.isNumber).map((function(t){return e[t]}))},function(e){e.RUNTIME_READY="runtime-ready",e.CHANGE_EVENT_NAME="change",e.PUSH_INPUT_VALUE="push-input-value",e.CHANGE_AWK="live-change-awk",e.CHANGE_ERROR="live-change-error",e.IS_ALIVE="is-alive",e.UPDATE_BREAKPOINTS="update-breakpoints",e.INPUT_VALUE_OVERRIDE="input-value-override",e.OUTPUT_VALUE_OVERRIDE="output-value-override",e.INPUT_VALUE_CHANGE="input-value-changed",e.OUTPUT_VALUE_CHANGE="output-value-changed",e.PROCESSING_CHANGE="processing-changed",e.INPUTS_STATE_CHANGE="inputs-state-changed",e.PART_ERROR="part-error",e.EVENTS_BATCH="events-batch"}(t.DebuggerServerEventType||(t.DebuggerServerEventType={}))},75579:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(19389),t),i(n(17229),t),i(n(4278),t)},41396:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Request=t.Put=t.Post=t.Get=void 0;var r=n(18265),i=n(25717),o="HTTP";t.Get=(0,r.partFromSimpleFunction)({id:"GET Request",icon:"fa-server",namespace:o,description:"Performs a HTTP GET request to a URL and emits the response data",inputs:[{name:"url",description:"URL to fetch data from"},{name:"headers",description:"Headers to send with the request",mode:"required-if-connected"},{name:"params",description:"Query parameters to send with the request",mode:"required-if-connected"}],output:{name:"data",description:"The response data"},fn:function(e){return i.default.get(e).then((function(e){return e.data}))}}),t.Post=(0,r.partFromSimpleFunction)({id:"POST Request",icon:"fa-server",namespace:o,description:"Performs a HTTP POST request to a URL and emits the response data",inputs:[{name:"url",description:"URL to fetch data from"},{name:"headers",description:"Headers to send with the request",mode:"required-if-connected"},{name:"params",description:"Query parameters to send with the request",mode:"required-if-connected"},{name:"data",description:"Data to send with the request",mode:"required-if-connected"}],output:{name:"data",description:"The response data"},fn:function(e,t,n,r){return i.default.post(e,r,{headers:t,params:n}).then((function(e){return e.data}))}}),t.Put=(0,r.partFromSimpleFunction)({id:"PUT Request",icon:"fa-server",namespace:o,description:"Performs a HTTP PUT request to a URL and emits the response data",inputs:[{name:"url",description:"URL to fetch data from"},{name:"headers",description:"Headers to send with the request",mode:"required-if-connected"},{name:"params",description:"Query parameters to send with the request",mode:"required-if-connected"},{name:"data",description:"Data to send with the request",mode:"required-if-connected"}],output:{name:"data",description:"The response data"},fn:function(e,t,n,r){return i.default.put(e,r,{headers:t,params:n}).then((function(e){return e.data}))}}),t.Request=(0,r.partFromSimpleFunction)({id:"Request",icon:"fa-server",namespace:o,description:"Performs a HTTP request to a URL and emits the response data",inputs:[{name:"url",description:"URL to fetch data from"},{name:"method",description:"HTTP method to use"},{name:"headers",description:"Headers to send with the request",mode:"required-if-connected"},{name:"params",description:"Query parameters to send with the request",mode:"required-if-connected"},{name:"data",description:"Data to send with the request",mode:"required-if-connected"}],output:{name:"data",description:"The response data"},fn:function(e,t,n,r,o){return i.default.request({url:e,method:t,data:o,headers:n,params:r}).then((function(e){return e.data}))}})},16505:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropertyEquals=t.DeleteAttribute=t.SetAttribute=t.GetAttribute=t.ObjectAssign=t.ObjectFromEntries=t.ObjectEntries=t.ObjectValues=t.ObjectKeys=t.JSONStringify=t.JSONParse=void 0;var r=n(18265),i="Objects";t.JSONParse=(0,r.partFromSimpleFunction)({id:"JSON Parse",icon:"fa-glasses",namespace:i,description:"Parses a JSON string into an object",inputs:[{name:"json",description:"JSON string to parse"}],output:{name:"object",description:"The parsed object"},fn:function(e){return JSON.parse(e)}}),t.JSONStringify=(0,r.partFromSimpleFunction)({id:"JSON Stringify",icon:"fa-pen-fancy",namespace:i,description:"Stringifies an object into a JSON string",inputs:[{name:"object",description:"Object to stringify"}],output:{name:"json",description:"The stringified JSON"},fn:function(e){return JSON.stringify(e)}}),t.ObjectKeys=(0,r.partFromSimpleFunction)({id:"Keys",icon:"fa-key",namespace:i,description:"Emits the keys of an object",inputs:[{name:"object",description:"Object to get keys of"}],output:{name:"keys",description:"The keys of object"},fn:function(e){return Object.keys(e)}}),t.ObjectValues=(0,r.partFromSimpleFunction)({id:"Values",namespace:i,description:"Emits the values of an object",inputs:[{name:"object",description:"Object to get values of"}],output:{name:"values",description:"The values of object"},fn:function(e){return Object.values(e)}}),t.ObjectEntries=(0,r.partFromSimpleFunction)({id:"Entries",namespace:i,icon:"fa-box",description:"Emits the entries of an object",inputs:[{name:"object",description:"Object to get entries of"}],output:{name:"entries",description:"The entries of object"},fn:function(e){return Object.entries(e)}}),t.ObjectFromEntries=(0,r.partFromSimpleFunction)({id:"From Entries",namespace:i,icon:"fa-box",description:"Creates an object from an array of entries",inputs:[{name:"entries",description:"Array of entries to create object from"}],output:{name:"object",description:"The created object"},fn:function(e){return Object.fromEntries(e)}}),t.ObjectAssign=(0,r.partFromSimpleFunction)({id:"Assign",namespace:i,icon:"fa-box",description:"Assigns properties from one or more objects to a target object",inputs:[{name:"target",description:"Target object to assign properties to"},{name:"sources",description:"One or more objects to assign properties from"}],output:{name:"object",description:"The target object"},fn:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object.assign.apply(Object,[e].concat(n))}}),t.GetAttribute=(0,r.partFromSimpleFunction)({id:"Get Attribute",namespace:i,icon:"fa-magnifying-glass",description:"Gets an attribute from an object",inputs:[{name:"object",description:"Object to get attribute from"},{name:"attribute",description:"Attribute to get"}],output:{name:"value",description:"The value of the attribute"},customViewCode:'<% if (inputs.attribute) { %> Get "<%- inputs.attribute %>"<% } else { %> Get Attribute <% } %>',fn:function(e,t){return t.split(".").reduce((function(e,t){return e[t]}),e)}}),t.SetAttribute=(0,r.partFromSimpleFunction)({id:"Set Attribute",namespace:i,icon:"fa-box",description:"Sets an attribute on an object",inputs:[{name:"object",description:"Object to set attribute on"},{name:"attribute",description:"Attribute to set"},{name:"value",description:"Value to set attribute to"}],customViewCode:'<% if (inputs.attribute) { %> Set "<%- inputs.attribute %>"<% } else { %> Set Attribute <% } %>',output:{name:"object",description:"The object with the attribute set"},fn:function(e,t,n){var r=t.split("."),i=r.pop();return r.reduce((function(e,t){return e[t]}),e)[i]=n,e}}),t.DeleteAttribute=(0,r.partFromSimpleFunction)({id:"Delete Attribute",namespace:i,icon:"fa-box",description:"Deletes an attribute from an object",inputs:[{name:"object",description:"Object to delete attribute from"},{name:"attribute",description:"Attribute to delete"}],customViewCode:'<% if (inputs.attribute) { %> Delete "<%- inputs.attribute %>"<% } else { %> Delete Attribute <% } %>',output:{name:"object",description:"The object with the attribute deleted"},fn:function(e,t){var n=t.split("."),r=n.pop();return delete n.reduce((function(e,t){return e[t]}),e)[r],e}}),t.PropertyEquals={id:"Property Equals",namespace:i,defaultStyle:{icon:"fa-equals"},description:'Emits the object to the "true" output if an object\'s property equals a value, otherwise emits to the "false" output',inputs:{object:{description:"Object to check property of"},attribute:{description:"Attribute to check"},value:{description:"Value to check attribute against"}},outputs:{true:{description:"Emitted if the attribute equals the value"},false:{description:"Emitted if the attribute does not equal the value"}},customViewCode:'<% if (inputs.attribute) { %> "<%- inputs.attribute %>" equals "<%- inputs.value %>"<% } else { %> Property Equals <% } %>',fn:function(e,t){e.attribute.split(".").reduce((function(e,t){return e[t]}),e.object)===e.value?t.true.next(e.object):t.false.next(e.object)}}},89841:function(e,t,n){"use strict";n.d(t,{S:function(){return u}});var r=n(44305),i=n(13127),o=n(18265),a=200,u=function(){var e,t=new Map,n=new Map;return{requestHistory:(e=(0,i.Z)((0,r.Z)().mark((function e(i,u,s){var c,l,d,p,f,m;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c="input"===s?o.DebuggerEventType.INPUT_CHANGE:o.DebuggerEventType.OUTPUT_CHANGE,console.log({insId:i,pinId:u,type:c}),!u){e.next=9;break}return l=i+"."+u+"."+c,d=t.get(l)||{total:0,lastSamples:[]},p=d.lastSamples.slice(0,a),e.abrupt("return",Object.assign({},d,{lastSamples:p}));case 9:return f=n.get(i)||{total:0,lastSamples:[]},m=f.lastSamples.slice(0,a),e.abrupt("return",Object.assign({},f,{lastSamples:m}));case 12:case"end":return e.stop()}}),e)}))),function(t,n,r){return e.apply(this,arguments)}),addEvents:function(e){e.forEach((function(e){if(e.type===o.DebuggerEventType.ERROR){var r=e;r.type=o.DebuggerEventType.OUTPUT_CHANGE,r.pinId=o.ERROR_PIN_ID}if(e.type===o.DebuggerEventType.INPUT_CHANGE||e.type===o.DebuggerEventType.OUTPUT_CHANGE){var i=e.insId,u=e.type,s=i+"."+e.pinId+"."+u,c=t.get(s)||{total:0,lastSamples:[]};c.lastSamples.unshift(e),c.lastSamples.length>a&&c.lastSamples.splice(a,c.lastSamples.length-a),c.total++,t.set(s,c);var l=n.get(i)||{total:0,lastSamples:[]};l.lastSamples.unshift(e),l.lastSamples.length>a&&l.lastSamples.splice(a,l.lastSamples.length-a),l.total++,t.set(i,l)}}))}}}},97302:function(e,t,n){"use strict";n.d(t,{Y:function(){return g}});var r=n(44305),i=n(13127),o=n(27378),a=n(67651),u=n(96149),s=n(73995),c=n(18265),l=n(89841),d=n(12902),p=n(33099);n.g.vm2=s.z;var f=(0,l.S)(),m=[0,10],v=function(e){var t,n,r=e.flow,i=e.output,o=e.inputs,u=e.onError,s=e.debugDelay,l=function(e,t){var n=new Set;return{onEvent:function(r){var i=Object.assign({},r,{time:Date.now()});console.info("Got debugger event",r),t.addEvents([i]),e.addEvents([i]),n.forEach((function(e){return e([i])}))},onBatchedEvents:function(e){return n.add(e),function(){return n.delete(e)}}}}(e.player,f);l.debugDelay=s;var d=(0,c.keys)(r.main.outputs)[0];return{executeResult:(0,c.execute)({part:r.main,inputs:o,outputs:(t={},t[d]=i,t),partsRepo:Object.assign({},r.dependencies,(n={},n[r.main.id]=r.main,n)),_debugger:l,onBubbleError:function(e){u(e)},extraContext:{PubSub:a}}),localDebugger:l}},g=function(e){var t=e.debugDelay,a=e.onOutput,s=e.flowProps,l=s.flow,g=s.inputs,h=s.output,y=(0,o.useRef)((0,u.createRuntimePlayer)("root."+e.flowProps.flow.part.id)),b=(0,o.useState)(e.flowProps.resolvedFlow),I=b[0],C=b[1],P=(0,o.useState)(),x=P[0],j=P[1],_=(0,u.useDebounce)(I,500)[0],O=(0,o.useState)({flow:l,boardData:{viewPort:{pos:{x:0,y:0},zoom:1},lastMousePos:{x:0,y:0},selected:[]}}),E=O[0],w=O[1];(0,o.useEffect)((function(){C((function(e){return Object.assign({},e,{main:E.flow.part})}))}),[E.flow.part]);var S,M,k={state:E,resolvedRepoWithDeps:I,onChangeEditorState:w,onInspectPin:c.noop,onRequestHistory:f.requestHistory,hideTemplatingTips:!0,initialPadding:m,onImportPart:(M=(0,i.Z)((0,r.Z)().mark((function e(t,i){var o,a,s,p,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.part,e.t0=Object,e.next=4,Promise.all([n.e(5717),n.e(4500)]).then(n.t.bind(n,84500,23));case 4:return e.t1=e.sent,a=e.t0.values.call(e.t0,e.t1).find((function(e){return(0,c.isBasePart)(e)&&e.id===o.id})),C((function(e){var t;return Object.assign({},e,{dependencies:Object.assign({},e.dependencies,(t={},t[a.id]=Object.assign({},a,{source:{path:"@flyde/stdlib/dist/all-browser",export:a.id}}),t))})})),s=void 0,p=(0,d.ZP)(l,(function(e){if(i){var n=(0,u.vAdd)({x:0,y:0},i.pos);if(s=(0,u.createNewPartInstance)(t.part,0,n,I.dependencies),e.part.instances.push(s),i.connectTo){var r=i.connectTo,o=r.insId,a=r.outputId;e.part.connections.push({from:{insId:o,pinId:a},to:{insId:s.id,pinId:c.TRIGGER_PIN_ID}})}}})),e.next=11,new Promise((function(e){return setTimeout(e,10)}));case 11:return f=(0,d.ZP)(E,(function(e){var t;e.flow=p,null!=i&&i.selectAfterAdding&&s&&(e.boardData.selected=[null==(t=s)?void 0:t.id])})),w(f),(0,u.toastMsg)("Part "+o.id+" successfully imported from "+t.module),e.abrupt("return",s);case 15:case"end":return e.stop()}}),e)}))),function(e,t){return M.apply(this,arguments)}),onExtractInlinePart:c.noop,onQueryImportables:(S=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Object,e.next=3,Promise.all([n.e(5717),n.e(4500)]).then(n.t.bind(n,84500,23));case 3:return e.t1=e.sent,t=e.t0.values.call(e.t0,e.t1).filter(c.isBasePart),e.abrupt("return",t.map((function(e){return{part:e,module:"@flyde/stdlib"}})));case 6:case"end":return e.stop()}}),e)}))),function(){return S.apply(this,arguments)}),debuggerClient:x};return(0,o.useEffect)((function(){y.current.start()}),[]),(0,o.useEffect)((function(){var n=v({flow:I,output:h,inputs:g,onError:c.noop,debugDelay:t,player:y.current}),r=n.executeResult,i=n.localDebugger,o=e.flowProps.output.subscribe((function(e){return a(e)}));return j(i),function(){r(),o.unsubscribe()}}),[t,_]),o.createElement(p.Z,null,(function(){return o.createElement(u.FlowEditor,k)}))}},73995:function(e,t,n){"use strict";n.d(t,{z:function(){return i}});var r=n(18265),i={VMScript:function(e){this.script=e},VM:function(){function e(e){this.context=e}return e.prototype.run=function(e){var t=(0,r.okeys)(this.context.sandbox),n=Object.values(this.context.sandbox);Function.apply(void 0,t.concat([e.script])).apply(void 0,n)},e}()}},24650:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var r=n(27378),i=n(57174),o=n(38944),a=n(50353),u=n(59821),s=n(52685),c="features_t9lD",l="featureSvg_GfXr",d=[{Svg:n(2445).Z,title:"Fully Integrable",description:r.createElement(r.Fragment,null,"Flyde is a runtime library that integrates seamlessly with your existing code and workflows. It's easy to manage and version control your flows alongside your other code, making it simple to integrate Flyde into any project."," ","With Flyde, you can leverage its powerful features and benefits without sacrificing ",r.createElement("mark",null,"your existing CI/CD, testing, and version control")," ","systems")},{Svg:n(99373).Z,title:"Build Complex Programs Faster and Easier",description:r.createElement(r.Fragment,null,"Flyde's visual, flow-based approach and modular design make it easy for developers of all skill levels to build complex programs ",r.createElement("mark",null,"quickly and efficiently.")," ","Whether you're a novice developer looking to learn more, or an experienced developer looking for a powerful tool to streamline your workflow , Flyde can help you get more done, faster.")},{title:"Visual Feedback and Debugging",Svg:n(93088).Z,description:r.createElement(r.Fragment,null,"Flyde's visual approach and ",r.createElement("mark",null,"real-time visual feedback")," make it easy to understand and debug programs. This can be especially helpful for novice developers, but can also be a valuable tool for experienced developers looking to optimize their workflow.")}];function p(e){var t=e.title,n=e.Svg,i=e.description;return r.createElement("div",{className:(0,o.Z)("col col--4")},r.createElement("div",{className:"text--center"},r.createElement(n,{className:l,role:"img"})),r.createElement("div",{className:"text--center padding-horiz--md"},r.createElement("h3",null,t),r.createElement("p",null,i)))}function f(){return r.createElement("section",{className:c},r.createElement("div",{className:"container"},r.createElement("div",{className:"row"},d.map((function(e,t){return r.createElement(p,(0,s.Z)({key:t},e))})))))}var m=n(60512),v=n(18265),g=n(97302),h={resolvedFlow:{main:{instances:[{pos:{x:-656.1905053710938,y:325.03946411132813},id:"Inline-value-Hello from ${i76",inputConfig:{},part:{id:"Inline-value-Looks like you",inputs:{country:{mode:"required"},capital:{mode:"required"},population:{mode:"required"}},outputs:{value:{delayed:!1}},fnCode:"const result = (`Looks like you're from ${inputs.country}! The capital is ${inputs.capital} (population of ${inputs.population})`); Promise.resolve(result).then(val => outputs.value.next(val))",customViewCode:"`Looks like you're from ${inputs.country}! The capital is ${inputs.capital} (population of ${inputs.",dataBuilderSource:"YExvb2tzIGxpa2UgeW91J3JlIGZyb20gJHtpbnB1dHMuY291bnRyeX0hIFRoZSBjYXBpdGFsIGlzICR7aW5wdXRzLmNhcGl0YWx9IChwb3B1bGF0aW9uIG9mICR7aW5wdXRzLnBvcHVsYXRpb259KWA=",templateType:"value",completionOutputs:["value"],defaultStyle:{size:"regular",icon:"code",cssOverride:{fontFamily:"monospace",fontWeight:"500"}},description:"Custom inline value"}},{pos:{x:-641.0780364990235,y:-90.68680785417553},id:"Get User's Country-ins",inputConfig:{},part:{id:"Get User's Country",inputs:{},outputs:{country:{type:"any",delayed:!1,optional:!1}},instances:[{pos:{x:-335.7258349609375,y:-194.68226864814756},id:"GET Request-907",inputConfig:{url:{mode:"static",value:"https://api.country.is/"}},visibleInputs:["url","__trigger"],visibleOutputs:["r","__error","response","data"],partId:"GET Request"},{id:"Inline-value-{iso2: ${input76",part:{id:"Inline-value-{iso2: inputs.d",inputs:{data:{type:"any",mode:"required"}},outputs:{value:{type:"any",delayed:!1,optional:!1}},fnCode:"const result = ({iso2: inputs.data.country}); Promise.resolve(result).then(val => outputs.value.next(val))",customViewCode:"{iso2: inputs.data.country}",dataBuilderSource:"e2lzbzI6IGlucHV0cy5kYXRhLmNvdW50cnl9",templateType:"value",completionOutputs:["value"],defaultStyle:{size:"regular",icon:"code",cssOverride:{fontFamily:"monospace",fontWeight:"500"}}},inputConfig:{},pos:{x:-468.5056274414062,y:-39.30523986816405}}],inputsPosition:{},outputsPosition:{r:{x:-363.42401672132144,y:105.34149194113161},country:{x:-322.5739794922268,y:138.57280736180334}},connections:[{from:{insId:"Inline-value-{iso2: ${input76",pinId:"value"},to:{pinId:"country",insId:"__this"}},{from:{insId:"GET Request-907",pinId:"data"},to:{insId:"Inline-value-{iso2: ${input76",pinId:"data"}}],completionOutputs:["country"]},style:{size:"large",color:"#f15bb5"}},{pos:{x:-718.9765612792969,y:54.225894863605504},id:"Get Country Name And Capital-ins",inputConfig:{},visibleOutputs:["name","capital"],part:{id:"Get Country Name And Capital",inputs:{body:{type:"any",mode:"required"}},outputs:{capital:{type:"any",delayed:!1,optional:!1},name:{type:"any",delayed:!1,optional:!1}},instances:[{pos:{x:-455.39787109375004,y:43.691497802734375},id:"POST Request-624",inputConfig:{url:{mode:"static",value:"https://countriesnow.space/api/v0.1/countries/capital"}},visibleInputs:["url","body","data"],partId:"POST Request"},{id:"Get Attribute-217",partId:"Get Attribute",inputConfig:{attribute:{mode:"static",value:"data.capital"}},pos:{x:-285.6922900390625,y:219.88888122558592}},{id:"Get Country Name And Capital-srp46ei",partId:"Get Attribute",inputConfig:{attribute:{mode:"static",value:"data.name"}},pos:{x:-608.0307299804688,y:225.56220581054686}}],inputsPosition:{body:{x:-333.75691140339336,y:-63.66470402308542}},outputsPosition:{value:{x:-514.1541695281439,y:411.8457371232514},i10:{x:-280.88783057750686,y:411.581705357324},capital:{x:-214.78486673798952,y:473.65942918140723},name:{x:-523.761854810908,y:479.9947571097377}},connections:[{from:{pinId:"body",insId:"__this"},to:{insId:"POST Request-624",pinId:"data"}},{from:{insId:"Get Attribute-217",pinId:"value"},to:{pinId:"capital",insId:"__this"}},{from:{insId:"POST Request-624",pinId:"data"},to:{insId:"Get Country Name And Capital-srp46ei",pinId:"object"}},{from:{insId:"Get Country Name And Capital-srp46ei",pinId:"value"},to:{pinId:"name",insId:"__this"}},{from:{insId:"POST Request-624",pinId:"data"},to:{insId:"Get Attribute-217",pinId:"object"}}],completionOutputs:["name+capital"]},style:{size:"large",color:"#9b5de5"}},{pos:{x:-399.57580322265625,y:172.876044921875},id:"cl8x5r4qp00074666lb382z1c",inputConfig:{},part:{id:"Get Population By City",inputs:{city:{type:"any",mode:"required"}},outputs:{value:{type:"any",delayed:!1,optional:!1}},instances:[{pos:{x:-227.26553955078123,y:314.0328469848632},id:"POST Request-775",inputConfig:{url:{mode:"static",value:"https://countriesnow.space/api/v0.1/countries/population/cities"}},visibleInputs:["url","body","data"],partId:"POST Request"},{pos:{x:-222.03287597656254,y:147.6986600494385},id:"Inline-value-{city: inputs.c75",inputConfig:{},part:{id:"Inline-value-{city: inputs.c",inputs:{city:{type:"any",mode:"required"}},outputs:{r:{type:"any",delayed:!1,optional:!1}},fnCode:"outputs.r.next(({city: inputs.city}))",customViewCode:"{city: inputs.city}",dataBuilderSource:"e2NpdHk6IGlucHV0cy5jaXR5fQ==",templateType:"value",completionOutputs:["r"]}},{id:"Get Attribute-893",partId:"Get Attribute",inputConfig:{attribute:{mode:"static",value:"data.populationCounts.0.value"}},pos:{x:-201.1159033203125,y:454.61387512207034},style:{icon:"fa-box",size:"small"}},{pos:{x:-135.68393920898438,y:553.7020178222656},id:"Get Population By City-oq646gx",inputConfig:{},part:{id:"Format Number",inputs:{number:{type:"any",mode:"required"}},outputs:{string:{type:"any",delayed:!1,optional:!1}},instances:[{id:"Inline-value-Result is ${in47",part:{id:"Inline-value-new Intl.Number",inputs:{population:{type:"any",mode:"required"}},outputs:{r:{type:"any",delayed:!1,optional:!1}},fnCode:"outputs.r.next((new Intl.NumberFormat().format(inputs.population)))",customViewCode:"new Intl.NumberFormat().format(inputs.population)",dataBuilderSource:"bmV3IEludGwuTnVtYmVyRm9ybWF0KCkuZm9ybWF0KGlucHV0cy5wb3B1bGF0aW9uKQ==",templateType:"value",completionOutputs:["r"]},inputConfig:{},pos:{x:-452.21022216796877,y:176.39826171875}}],inputsPosition:{population:{x:0,y:0},number:{x:0,y:0}},outputsPosition:{r:{x:0,y:400},string:{x:0,y:400}},connections:[{from:{insId:"__this",pinId:"number"},to:{insId:"Inline-value-Result is ${in47",pinId:"population"}},{from:{insId:"Inline-value-Result is ${in47",pinId:"r"},to:{insId:"__this",pinId:"string"}}],completionOutputs:["string"]},style:{size:"regular",color:"#fee440"}}],inputsPosition:{city:{x:-138.6632074625658,y:78.72467426779336}},outputsPosition:{value:{x:-101.07271788978412,y:725.6805569154316}},connections:[{from:{pinId:"city",insId:"__this"},to:{insId:"Inline-value-{city: inputs.c75",pinId:"city"}},{from:{insId:"Inline-value-{city: inputs.c75",pinId:"r"},to:{insId:"POST Request-775",pinId:"data"}},{from:{insId:"POST Request-775",pinId:"data"},to:{insId:"Get Attribute-893",pinId:"object"}},{from:{insId:"Get Attribute-893",pinId:"value"},to:{insId:"Get Population By City-oq646gx",pinId:"number"}},{from:{insId:"Get Population By City-oq646gx",pinId:"string"},to:{pinId:"value",insId:"__this"}}],completionOutputs:["value"]},style:{size:"large",color:"#00bbf9"}}],connections:[{from:{insId:"Get Country Name And Capital-ins",pinId:"name"},to:{insId:"Inline-value-Hello from ${i76",pinId:"country"}},{from:{insId:"Get Country Name And Capital-ins",pinId:"capital"},to:{insId:"Inline-value-Hello from ${i76",pinId:"capital"}},{from:{insId:"Get Country Name And Capital-ins",pinId:"capital"},to:{insId:"cl8x5r4qp00074666lb382z1c",pinId:"city"}},{from:{insId:"Get User's Country-ins",pinId:"country"},to:{insId:"Get Country Name And Capital-ins",pinId:"body"}},{from:{insId:"Inline-value-Hello from ${i76",pinId:"value"},to:{insId:"__this",pinId:"output"}},{from:{insId:"cl8x5r4qp00074666lb382z1c",pinId:"value"},to:{insId:"Inline-value-Hello from ${i76",pinId:"population"}}],id:"ApisCombination",inputs:{},outputs:{output:{type:"any",optional:!1,delayed:!1}},inputsPosition:{city:{x:-187.27285824815934,y:-14.13215209416181}},outputsPosition:{json:{x:-441.98276309426666,y:480.38719404276554},na:{x:-441.98276309426666,y:480.38719404276554},result:{x:-499.82438378976735,y:706.7650396699393},output:{x:-493.81529235111964,y:465.0177662443657},response:{x:-506.3386688159596,y:488.67302443385125}},completionOutputs:["output"]},dependencies:{"GET Request":{id:"GET Request",description:"Performs a HTTP GET request to a URL and emits the response data",namespace:"HTTP",inputs:{url:{description:"URL to fetch data from",mode:"required"},headers:{description:"Headers to send with the request",mode:"required-if-connected"},params:{description:"Query parameters to send with the request",mode:"required-if-connected"}},outputs:{data:{description:"The response data"}},defaultStyle:{icon:"fa-server"},fn:n(41396).Get.fn,source:{path:"/Users/gabrielgrinberg/projects/flyde/stdlib/dist/Http.flyde.js",export:"Get"}},"POST Request":{id:"POST Request",description:"Performs a HTTP POST request to a URL and emits the response data",namespace:"HTTP",inputs:{url:{description:"URL to fetch data from",mode:"required"},headers:{description:"Headers to send with the request",mode:"required-if-connected"},params:{description:"Query parameters to send with the request",mode:"required-if-connected"},data:{description:"Data to send with the request",mode:"required-if-connected"}},outputs:{data:{description:"The response data"}},defaultStyle:{icon:"fa-server"},fn:n(41396).Post.fn,source:{path:"/Users/gabrielgrinberg/projects/flyde/stdlib/dist/Http.flyde.js",export:"Post"}},"Get Attribute":{id:"Get Attribute",description:"Gets an attribute from an object",namespace:"Objects",inputs:{object:{description:"Object to get attribute from",mode:"required"},attribute:{description:"Attribute to get",mode:"required"}},outputs:{value:{description:"The value of the attribute"}},defaultStyle:{icon:"fa-magnifying-glass"},fn:n(16505).GetAttribute.fn,customViewCode:'<% if (inputs.attribute) { %> Get "<%- inputs.attribute %>"<% } else { %> Get Attribute <% } %>',source:{path:"/Users/gabrielgrinberg/projects/flyde/stdlib/dist/Objects.flyde.js",export:"GetAttribute"}}}},flow:{imports:{"@flyde/stdlib":["GET Request","POST Request","Get Attribute"]},part:{instances:[{pos:{x:-656.1905053710938,y:325.03946411132813},id:"Inline-value-Hello from ${i76",inputConfig:{},part:{id:"Inline-value-Looks like you",inputs:{country:{mode:"required"},capital:{mode:"required"},population:{mode:"required"}},outputs:{value:{delayed:!1}},fnCode:"const result = (`Looks like you're from ${inputs.country}! The capital is ${inputs.capital} (population of ${inputs.population})`); Promise.resolve(result).then(val => outputs.value.next(val))",customViewCode:"`Looks like you're from ${inputs.country}! The capital is ${inputs.capital} (population of ${inputs.",dataBuilderSource:"YExvb2tzIGxpa2UgeW91J3JlIGZyb20gJHtpbnB1dHMuY291bnRyeX0hIFRoZSBjYXBpdGFsIGlzICR7aW5wdXRzLmNhcGl0YWx9IChwb3B1bGF0aW9uIG9mICR7aW5wdXRzLnBvcHVsYXRpb259KWA=",templateType:"value",completionOutputs:["value"],defaultStyle:{size:"regular",icon:"code",cssOverride:{fontFamily:"monospace",fontWeight:"500"}},description:"Custom inline value"}},{pos:{x:-641.0780364990235,y:-90.68680785417553},id:"Get User's Country-ins",inputConfig:{},part:{id:"Get User's Country",inputs:{},outputs:{country:{type:"any",delayed:!1,optional:!1}},instances:[{pos:{x:-335.7258349609375,y:-194.68226864814756},id:"GET Request-907",inputConfig:{url:{mode:"static",value:"https://api.country.is/"}},visibleInputs:["url","__trigger"],visibleOutputs:["r","__error","response","data"],partId:"GET Request"},{id:"Inline-value-{iso2: ${input76",part:{id:"Inline-value-{iso2: inputs.d",inputs:{data:{type:"any",mode:"required"}},outputs:{value:{type:"any",delayed:!1,optional:!1}},fnCode:"const result = ({iso2: inputs.data.country}); Promise.resolve(result).then(val => outputs.value.next(val))",customViewCode:"{iso2: inputs.data.country}",dataBuilderSource:"e2lzbzI6IGlucHV0cy5kYXRhLmNvdW50cnl9",templateType:"value",completionOutputs:["value"],defaultStyle:{size:"regular",icon:"code",cssOverride:{fontFamily:"monospace",fontWeight:"500"}}},inputConfig:{},pos:{x:-468.5056274414062,y:-39.30523986816405}}],inputsPosition:{},outputsPosition:{r:{x:-363.42401672132144,y:105.34149194113161},country:{x:-322.5739794922268,y:138.57280736180334}},connections:[{from:{insId:"Inline-value-{iso2: ${input76",pinId:"value"},to:{pinId:"country",insId:"__this"}},{from:{insId:"GET Request-907",pinId:"data"},to:{insId:"Inline-value-{iso2: ${input76",pinId:"data"}}],completionOutputs:["country"]},style:{size:"large",color:"#f15bb5"}},{pos:{x:-718.9765612792969,y:54.225894863605504},id:"Get Country Name And Capital-ins",inputConfig:{},visibleOutputs:["name","capital"],part:{id:"Get Country Name And Capital",inputs:{body:{type:"any",mode:"required"}},outputs:{capital:{type:"any",delayed:!1,optional:!1},name:{type:"any",delayed:!1,optional:!1}},instances:[{pos:{x:-455.39787109375004,y:43.691497802734375},id:"POST Request-624",inputConfig:{url:{mode:"static",value:"https://countriesnow.space/api/v0.1/countries/capital"}},visibleInputs:["url","body","data"],partId:"POST Request"},{id:"Get Attribute-217",partId:"Get Attribute",inputConfig:{attribute:{mode:"static",value:"data.capital"}},pos:{x:-285.6922900390625,y:219.88888122558592}},{id:"Get Country Name And Capital-srp46ei",partId:"Get Attribute",inputConfig:{attribute:{mode:"static",value:"data.name"}},pos:{x:-608.0307299804688,y:225.56220581054686}}],inputsPosition:{body:{x:-333.75691140339336,y:-63.66470402308542}},outputsPosition:{value:{x:-514.1541695281439,y:411.8457371232514},i10:{x:-280.88783057750686,y:411.581705357324},capital:{x:-214.78486673798952,y:473.65942918140723},name:{x:-523.761854810908,y:479.9947571097377}},connections:[{from:{pinId:"body",insId:"__this"},to:{insId:"POST Request-624",pinId:"data"}},{from:{insId:"Get Attribute-217",pinId:"value"},to:{pinId:"capital",insId:"__this"}},{from:{insId:"POST Request-624",pinId:"data"},to:{insId:"Get Country Name And Capital-srp46ei",pinId:"object"}},{from:{insId:"Get Country Name And Capital-srp46ei",pinId:"value"},to:{pinId:"name",insId:"__this"}},{from:{insId:"POST Request-624",pinId:"data"},to:{insId:"Get Attribute-217",pinId:"object"}}],completionOutputs:["name+capital"]},style:{size:"large",color:"#9b5de5"}},{pos:{x:-399.57580322265625,y:172.876044921875},id:"cl8x5r4qp00074666lb382z1c",inputConfig:{},part:{id:"Get Population By City",inputs:{city:{type:"any",mode:"required"}},outputs:{value:{type:"any",delayed:!1,optional:!1}},instances:[{pos:{x:-227.26553955078123,y:314.0328469848632},id:"POST Request-775",inputConfig:{url:{mode:"static",value:"https://countriesnow.space/api/v0.1/countries/population/cities"}},visibleInputs:["url","body","data"],partId:"POST Request"},{pos:{x:-222.03287597656254,y:147.6986600494385},id:"Inline-value-{city: inputs.c75",inputConfig:{},part:{id:"Inline-value-{city: inputs.c",inputs:{city:{type:"any",mode:"required"}},outputs:{r:{type:"any",delayed:!1,optional:!1}},fnCode:"outputs.r.next(({city: inputs.city}))",customViewCode:"{city: inputs.city}",dataBuilderSource:"e2NpdHk6IGlucHV0cy5jaXR5fQ==",templateType:"value",completionOutputs:["r"]}},{id:"Get Attribute-893",partId:"Get Attribute",inputConfig:{attribute:{mode:"static",value:"data.populationCounts.0.value"}},pos:{x:-201.1159033203125,y:454.61387512207034},style:{icon:"fa-box",size:"small"}},{pos:{x:-135.68393920898438,y:553.7020178222656},id:"Get Population By City-oq646gx",inputConfig:{},part:{id:"Format Number",inputs:{number:{type:"any",mode:"required"}},outputs:{string:{type:"any",delayed:!1,optional:!1}},instances:[{id:"Inline-value-Result is ${in47",part:{id:"Inline-value-new Intl.Number",inputs:{population:{type:"any",mode:"required"}},outputs:{r:{type:"any",delayed:!1,optional:!1}},fnCode:"outputs.r.next((new Intl.NumberFormat().format(inputs.population)))",customViewCode:"new Intl.NumberFormat().format(inputs.population)",dataBuilderSource:"bmV3IEludGwuTnVtYmVyRm9ybWF0KCkuZm9ybWF0KGlucHV0cy5wb3B1bGF0aW9uKQ==",templateType:"value",completionOutputs:["r"]},inputConfig:{},pos:{x:-452.21022216796877,y:176.39826171875}}],inputsPosition:{population:{x:0,y:0},number:{x:0,y:0}},outputsPosition:{r:{x:0,y:400},string:{x:0,y:400}},connections:[{from:{insId:"__this",pinId:"number"},to:{insId:"Inline-value-Result is ${in47",pinId:"population"}},{from:{insId:"Inline-value-Result is ${in47",pinId:"r"},to:{insId:"__this",pinId:"string"}}],completionOutputs:["string"]},style:{size:"regular",color:"#fee440"}}],inputsPosition:{city:{x:-138.6632074625658,y:78.72467426779336}},outputsPosition:{value:{x:-101.07271788978412,y:725.6805569154316}},connections:[{from:{pinId:"city",insId:"__this"},to:{insId:"Inline-value-{city: inputs.c75",pinId:"city"}},{from:{insId:"Inline-value-{city: inputs.c75",pinId:"r"},to:{insId:"POST Request-775",pinId:"data"}},{from:{insId:"POST Request-775",pinId:"data"},to:{insId:"Get Attribute-893",pinId:"object"}},{from:{insId:"Get Attribute-893",pinId:"value"},to:{insId:"Get Population By City-oq646gx",pinId:"number"}},{from:{insId:"Get Population By City-oq646gx",pinId:"string"},to:{pinId:"value",insId:"__this"}}],completionOutputs:["value"]},style:{size:"large",color:"#00bbf9"}}],connections:[{from:{insId:"Get Country Name And Capital-ins",pinId:"name"},to:{insId:"Inline-value-Hello from ${i76",pinId:"country"}},{from:{insId:"Get Country Name And Capital-ins",pinId:"capital"},to:{insId:"Inline-value-Hello from ${i76",pinId:"capital"}},{from:{insId:"Get Country Name And Capital-ins",pinId:"capital"},to:{insId:"cl8x5r4qp00074666lb382z1c",pinId:"city"}},{from:{insId:"Get User's Country-ins",pinId:"country"},to:{insId:"Get Country Name And Capital-ins",pinId:"body"}},{from:{insId:"Inline-value-Hello from ${i76",pinId:"value"},to:{insId:"__this",pinId:"output"}},{from:{insId:"cl8x5r4qp00074666lb382z1c",pinId:"value"},to:{insId:"Inline-value-Hello from ${i76",pinId:"population"}}],id:"ApisCombination",inputs:{},outputs:{output:{type:"any",optional:!1,delayed:!1}},inputsPosition:{city:{x:-187.27285824815934,y:-14.13215209416181}},outputsPosition:{json:{x:-441.98276309426666,y:480.38719404276554},na:{x:-441.98276309426666,y:480.38719404276554},result:{x:-499.82438378976735,y:706.7650396699393},output:{x:-493.81529235111964,y:465.0177662443657},response:{x:-506.3386688159596,y:488.67302443385125}},completionOutputs:["output"]}}},y=n(2306),b=n(21696),I=n(81884),C=function(){var e=r.useState(null),t=e[0],n=e[1],i=(0,r.useRef)({__trigger:(0,v.dynamicPartInput)()}),o=(0,r.useRef)((0,v.dynamicOutput)()),a={flow:h.flow,resolvedFlow:h.resolvedFlow,inputs:i.current,output:o.current};return r.createElement("div",{className:"hero-example"},r.createElement("div",{className:"buttons-container"},r.createElement(I.Z,{className:"button button--secondary",to:"/playground"},"Online Playground"),r.createElement(b.zx,{className:"button button--success button",onClick:function(){n(""),i.current.__trigger.subject.next("run")}},"Run Example \ud83d\udc47"),r.createElement(I.Z,{className:"button button--primary",href:"https://marketplace.visualstudio.com/items?itemName=flydehq.flyde"},"VSCode Extension"),r.createElement("span",{className:"gh-stars-wrapper"},r.createElement("iframe",{className:"gh-stars-frame",src:"https://ghbtns.com/github-btn.html?user=flydehq&repo=flyde&type=star&count=true&size=large",width:160,height:30,title:"GitHub Stars"}))),r.createElement("div",{className:"flyde-hero-example-wrapper"},r.createElement("div",{className:"flow-wrapper"},r.createElement("div",{className:"file-tag"},"Hero.flyde"),r.createElement(g.Y,{flowProps:a,debugDelay:100,onOutput:function(e){n(e)}})),r.createElement("div",{className:"code-wrapper"},r.createElement("div",{className:"file-tag"},"index.ts"),r.createElement(y.dn,{className:"code-example",showLineNumbers:!1,text:"import {loadFlow} from '@flyde/runtime';\n\nconst executeFlow = loadFlow('Hero.flyde');\n\nconst {output} = await executeFlow();\nconsole.log(`Output: ${output}`);",language:"typescript",theme:y.cL,codeBlock:!0}),r.createElement("div",{className:"file-tag"},"Terminal"),r.createElement("div",{className:"terminal-emulator"},t?r.createElement("span",null,t):r.createElement("em",null,"Run example to show output")))))},P=function(){return r.createElement("strong",{className:"integration-points"},r.createElement(i.Z,{steps:["Discord Bots",1200,"Website Scrapers",1200,"Data Pipelines",1200,"APIs",1200,"CLI tools",1200,"Telegram Bots",1200,"Webhooks",1200,"The next big thing",5e3].map((function(e){return"string"==typeof e?e+".":e})),loop:1/0,wrapper:"span"}))};function x(){var e=(0,a.Z)().siteConfig;return r.createElement("header",{className:(0,o.Z)("hero hero--primary",m.Z.heroBanner)},r.createElement("div",{className:"videos-container"},r.createElement("video",{loop:!0,muted:!0,autoPlay:!0},r.createElement("source",{src:"/background.mp4",type:"video/mp4"})),r.createElement("video",{loop:!0,muted:!0,autoPlay:!0},r.createElement("source",{src:"/background.mp4",type:"video/mp4"}))),r.createElement("div",{className:"container"},r.createElement("h1",{className:"hero__title"},e.title),r.createElement("p",{className:"hero__subtitle"},"Flyde is ",r.createElement("em",null,"open source")," visual, flow-based programming tool, batteries-included.",r.createElement("br",null),"Seamlessly integrates with traditional coding using the ",r.createElement("a",{href:"https://marketplace.visualstudio.com/items?itemName=flyde.flyde-vscode",target:"_blank"},"VSCode extension"),".",r.createElement("br",null),"Build ",r.createElement(P,null))))}function j(){(0,a.Z)().siteConfig;return r.createElement(u.Z,{title:"Visual Programming Tool",description:"Flyde is a modern visual programming tool that fully integrates with your codebase"},r.createElement(x,null),r.createElement(C,null),r.createElement("main",{className:"home-page-main-content"},r.createElement(f,null)))}},60512:function(e,t){"use strict";t.Z={"flyde-flow-editor":"flyde-flow-editor_AAD4",_hj_feedback_container:"_hj_feedback_container_Af03"}},95126:function(e,t,n){var r={"./af":1009,"./af.js":1009,"./ar":88769,"./ar-dz":23739,"./ar-dz.js":23739,"./ar-kw":93745,"./ar-kw.js":93745,"./ar-ly":99576,"./ar-ly.js":99576,"./ar-ma":67408,"./ar-ma.js":67408,"./ar-sa":48781,"./ar-sa.js":48781,"./ar-tn":87856,"./ar-tn.js":87856,"./ar.js":88769,"./az":2030,"./az.js":2030,"./be":56476,"./be.js":56476,"./bg":25304,"./bg.js":25304,"./bm":48125,"./bm.js":48125,"./bn":34,"./bn-bd":29835,"./bn-bd.js":29835,"./bn.js":34,"./bo":64082,"./bo.js":64082,"./br":8317,"./br.js":8317,"./bs":93107,"./bs.js":93107,"./ca":68272,"./ca.js":68272,"./cs":98567,"./cs.js":98567,"./cv":61583,"./cv.js":61583,"./cy":10076,"./cy.js":10076,"./da":31760,"./da.js":31760,"./de":8973,"./de-at":63214,"./de-at.js":63214,"./de-ch":74728,"./de-ch.js":74728,"./de.js":8973,"./dv":54053,"./dv.js":54053,"./el":7499,"./el.js":7499,"./en-au":67876,"./en-au.js":67876,"./en-ca":47010,"./en-ca.js":47010,"./en-gb":34239,"./en-gb.js":34239,"./en-ie":99830,"./en-ie.js":99830,"./en-il":28438,"./en-il.js":28438,"./en-in":25322,"./en-in.js":25322,"./en-nz":43264,"./en-nz.js":43264,"./en-sg":55449,"./en-sg.js":55449,"./eo":39486,"./eo.js":39486,"./es":32430,"./es-do":16310,"./es-do.js":16310,"./es-mx":27038,"./es-mx.js":27038,"./es-us":73099,"./es-us.js":73099,"./es.js":32430,"./et":34975,"./et.js":34975,"./eu":87063,"./eu.js":87063,"./fa":68073,"./fa.js":68073,"./fi":50957,"./fi.js":50957,"./fil":8764,"./fil.js":8764,"./fo":81775,"./fo.js":81775,"./fr":74179,"./fr-ca":14306,"./fr-ca.js":14306,"./fr-ch":73791,"./fr-ch.js":73791,"./fr.js":74179,"./fy":47014,"./fy.js":47014,"./ga":46911,"./ga.js":46911,"./gd":62958,"./gd.js":62958,"./gl":87344,"./gl.js":87344,"./gom-deva":33161,"./gom-deva.js":33161,"./gom-latn":35798,"./gom-latn.js":35798,"./gu":68485,"./gu.js":68485,"./he":27917,"./he.js":27917,"./hi":52159,"./hi.js":52159,"./hr":95842,"./hr.js":95842,"./hu":30005,"./hu.js":30005,"./hy-am":51312,"./hy-am.js":51312,"./id":60781,"./id.js":60781,"./is":64101,"./is.js":64101,"./it":43467,"./it-ch":4759,"./it-ch.js":4759,"./it.js":43467,"./ja":44164,"./ja.js":44164,"./jv":70079,"./jv.js":70079,"./ka":57036,"./ka.js":57036,"./kk":92022,"./kk.js":92022,"./km":63418,"./km.js":63418,"./kn":43655,"./kn.js":43655,"./ko":30986,"./ko.js":30986,"./ku":91902,"./ku.js":91902,"./ky":4604,"./ky.js":4604,"./lb":99026,"./lb.js":99026,"./lo":20537,"./lo.js":20537,"./lt":22288,"./lt.js":22288,"./lv":1495,"./lv.js":1495,"./me":60690,"./me.js":60690,"./mi":2571,"./mi.js":2571,"./mk":93959,"./mk.js":93959,"./ml":97225,"./ml.js":97225,"./mn":88,"./mn.js":88,"./mr":46622,"./mr.js":46622,"./ms":11070,"./ms-my":48899,"./ms-my.js":48899,"./ms.js":11070,"./mt":63931,"./mt.js":63931,"./my":95393,"./my.js":95393,"./nb":4274,"./nb.js":4274,"./ne":8914,"./ne.js":8914,"./nl":33114,"./nl-be":68479,"./nl-be.js":68479,"./nl.js":33114,"./nn":4513,"./nn.js":4513,"./oc-lnc":46549,"./oc-lnc.js":46549,"./pa-in":28264,"./pa-in.js":28264,"./pl":32848,"./pl.js":32848,"./pt":90899,"./pt-br":55077,"./pt-br.js":55077,"./pt.js":90899,"./ro":92512,"./ro.js":92512,"./ru":21753,"./ru.js":21753,"./sd":16840,"./sd.js":16840,"./se":78362,"./se.js":78362,"./si":50464,"./si.js":50464,"./sk":66324,"./sk.js":66324,"./sl":41963,"./sl.js":41963,"./sq":53039,"./sq.js":53039,"./sr":93454,"./sr-cyrl":10466,"./sr-cyrl.js":10466,"./sr.js":93454,"./ss":95158,"./ss.js":95158,"./sv":28859,"./sv.js":28859,"./sw":57594,"./sw.js":57594,"./ta":26915,"./ta.js":26915,"./te":15677,"./te.js":15677,"./tet":92154,"./tet.js":92154,"./tg":74098,"./tg.js":74098,"./th":89071,"./th.js":89071,"./tk":49381,"./tk.js":49381,"./tl-ph":1869,"./tl-ph.js":1869,"./tlh":92346,"./tlh.js":92346,"./tr":71483,"./tr.js":71483,"./tzl":30266,"./tzl.js":30266,"./tzm":33138,"./tzm-latn":32960,"./tzm-latn.js":32960,"./tzm.js":33138,"./ug-cn":29456,"./ug-cn.js":29456,"./uk":50805,"./uk.js":50805,"./ur":61127,"./ur.js":61127,"./uz":29628,"./uz-latn":80840,"./uz-latn.js":80840,"./uz.js":29628,"./vi":56962,"./vi.js":56962,"./x-pseudo":49257,"./x-pseudo.js":49257,"./yo":62423,"./yo.js":62423,"./zh-cn":61002,"./zh-cn.js":61002,"./zh-hk":6046,"./zh-hk.js":6046,"./zh-mo":36903,"./zh-mo.js":36903,"./zh-tw":24710,"./zh-tw.js":24710};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=95126},91764:function(){}}]);