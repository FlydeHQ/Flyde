(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6007],{8541:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cappedArrayDebounce=void 0;t.cappedArrayDebounce=function(e,t,n,r){void 0===r&&(r=500);var i=[],o=null,a=null;return{addItem:function(u){clearTimeout(o),i.push(u),a||(a=setTimeout((function(){e(i),clearTimeout(o),a=null}),r)),i.length>=n?(e(i),clearTimeout(a),a=null,i=[]):o=setTimeout((function(){e(i),clearTimeout(a),a=null,i=[]}),t)},flush:function(){i.length&&(e(i),i=[],clearTimeout(a))}}}},96615:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.dataShaper=t.DataShapeType=void 0,function(e){e[e.STRING=0]="STRING",e[e.NUMBER=1]="NUMBER",e[e.BOOLEAN=2]="BOOLEAN",e[e.ARRAY=3]="ARRAY",e[e.OBJECT=4]="OBJECT",e[e.NULL=5]="NULL"}(n=t.DataShapeType||(t.DataShapeType={}));var r={string:n.STRING,number:n.NUMBER,boolean:n.BOOLEAN,object:n.OBJECT,array:n.ARRAY,null:n.NULL};t.dataShaper=function(e,n,i){void 0===n&&(n=5),void 0===i&&(i=5);var o,a,u=null===(o=e)?"null":typeof o;if("object"===u){if(Array.isArray(e))return n>1?e.filter((function(e,t){return t<i})).map((function(e){return(0,t.dataShaper)(e,n-1,i)})):r.array;if(n>1){var s={};for(var c in e)s[c]=(0,t.dataShaper)(e[c],n-1,i);return a=s,Object.keys(a).sort().reduce((function(e,t){return e[t]=a[t],e}),{})}return r.object}return r[u]}},40189:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debugLogger=void 0;var r=(0,n(96292).default)("flyde");t.debugLogger=function(e){return r.extend(e)}},68132:function(e,t,n){"use strict";var r=n(68626).default,i=["pos"];Object.defineProperty(t,"__esModule",{value:!0}),t.hashFlow=t.hashPart=void 0;var o=n(61586),a=n(24048),u=function(e){return o(e)};t.hashPart=function(e,t){void 0===t&&(t=!0);var n={id:e.id,completionOutputs:e.completionOutputs,reactiveInputs:e.reactiveInputs,inputs:e.inputs,outputs:e.outputs};if((0,a.isVisualPart)(e)){var o=e.instances,s=e.id,c=e.connections,l=e.inputsPosition,d=e.outputsPosition,p=o.map((function(e){e.pos;return r(e,i)})),f=t?{}:{inputsPosition:l,outputsPosition:d},v=t?p:o;v.sort((function(e,t){return e.id.localeCompare(t.id)}));var m=[].concat(c);m.sort((function(e,t){var n=e.from.insId+"."+e.from.pinId,r=t.from.insId+"."+t.from.pinId;return n.localeCompare(r)}));var g=JSON.stringify(Object.assign({id:s,instancesToUse:v,conns:m},n,{maybeIoPos:f}));return u(g)}if((0,a.isInlineValuePart)(e)){var y=e.fnCode,b=e.customViewCode,h=JSON.stringify(Object.assign({fnCode:y,customViewCode:b},n));return u(h)}throw new Error("Hashing code parts unsupported")};t.hashFlow=function(e,n){void 0===n&&(n=!0);var r=e.part,i=e.imports,o=(0,t.hashPart)(r,!1),a=Object.entries(i).sort((function(e,t){var n=e[0],r=t[0];return n.localeCompare(r)})).map((function(e){return[e[0],e[1].sort()]})).reduce((function(e,t){var n,r=t[0],i=t[1];return Object.assign({},e,((n={})[r]=i,n))}),{}),s=JSON.stringify(a);return u(o+s)}},45821:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.DepGraph=void 0,i(n(69985),t),i(n(94919),t),i(n(40189),t),i(n(8541),t),i(n(94919),t),i(n(68132),t),i(n(67748),t),i(n(96615),t),t.DepGraph=n(59280).DepGraph},69985:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.testDataCreator=void 0;t.testDataCreator=function(e){return function(t){void 0===t&&(t={});var n="function"==typeof e?e():e,r=t;return Object.assign({},n,r)}}},94919:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default;Object.defineProperty(t,"__esModule",{value:!0}),t.eventually=t.delay=t.noop=t.removeDupes=t.ensure=t.isOptionalType=t.callFnOrFnPromise=t.isPromise=t.isDefined=t.containsAll=t.shuffle=t.randomInts=t.repeat=t.pickRandom=t.randomPos=t.randomInt=t.pickSecond=t.pickFirst=t.fromEntries=t.entries=t.okeys=t.values=t.keys=t.filterOMap=t.mapOMap=t.middlePos=t.calcCenter=t.intersectRect=void 0;t.intersectRect=function(e,t){var n=e.x+e.w,r=t.x+t.w;return!(t.x>n||r<e.x||t.y>e.y+e.h||t.y+t.h<e.y)};t.calcCenter=function(e){var t=e.w,n=e.h;return{x:e.x+t/2,y:e.y+n/2}};t.middlePos=function(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}};t.mapOMap=function(e,n){return(0,t.entries)(e).map((function(e){var t=e[0],r=e[1];return[t,n(t,r)]})).reduce((function(e,t){var n,r=t[0],i=t[1];return Object.assign({},e,((n={})[r]=i,n))}),{})};t.filterOMap=function(e,n){return(0,t.entries)(e).filter((function(e){var t=e[0],r=e[1];return n(t,r)})).reduce((function(e,t){var n,r=t[0],i=t[1];return Object.assign({},e,((n={})[r]=i,n))}),{})};t.keys=function(e){return Object.keys(e)};t.values=function(e){return Object.values(e)},t.okeys=t.keys;t.entries=function(e){return(0,t.okeys)(e).map((function(t){return[t,e[t]]}))};t.fromEntries=function(e){return e.reduce((function(e,t){var n,r=t[0],i=t[1];return Object.assign({},e,((n={})[r]=i,n))}),{})};t.pickFirst=function(e){return e[0]};t.pickSecond=function(e){return e[1]};t.randomInt=function(e,t){void 0===t&&(t=0);var n=Math.random();return t+Math.floor((e-t)*n)};t.randomPos=function(e,n){return void 0===e&&(e=1e3),void 0===n&&(n=0),{x:(0,t.randomInt)(e,n),y:(0,t.randomInt)(e,n)}};t.pickRandom=function(e){return e[(0,t.randomInt)(e.length)]};t.repeat=function(e,t){return"x".repeat(e).split("").map((function(e,n){return t(n)}))};t.randomInts=function(e,n,r){return void 0===n&&(n=100),void 0===r&&(r=0),(0,t.repeat)(e,(function(){return(0,t.randomInt)(n,r)}))};t.shuffle=function(e){for(var t=[].concat(e),n=t.length-1;n>=0;n--){var r=Math.floor(Math.random()*(n+1)),i=[t[r],t[n]];t[n]=i[0],t[r]=i[1]}return t};t.containsAll=function(e,t){return t.every((function(t){return e.includes(t)}))};t.isDefined=function(e){return void 0!==e};t.isPromise=function(e){return e&&"function"==typeof e.then};t.callFnOrFnPromise=function(e,n){if((0,t.isDefined)(e)){var r=function(e){try{e()}catch(t){console.error(t)}};"function"==typeof e?r(e):Promise.resolve(e).then((function(e){"function"==typeof e&&r(e)}))}};t.isOptionalType=function(e){return/\?$/.test(e)};t.ensure=function(e,t){if(void 0===e)throw new Error(t||"Undefined value passed");return e};t.removeDupes=function(e){return Array.from(new Set(e))};t.noop=function(){};t.delay=function(e){return new Promise((function(t){return setTimeout(t,e)}))};var o=function(){var e=i(r().mark((function e(n,i,o,a){var u,s,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===i&&(i=3e3),void 0===o&&(o=100),void 0===a&&(a=new Set),!(i<0)){e.next=6;break}throw u=Array.from(a).reduce((function(e,t,n){return e+"\n\t\t"+(n+1)+". "+t}),""),new Error("[Eventually timeout exceeded after: timeout with error]: "+u);case 6:return e.prev=6,e.next=9,n();case 9:e.next=19;break;case 11:return e.prev=11,e.t0=e.catch(6),s=Date.now(),e.next=16,(0,t.delay)(o);case 16:return c=Date.now()-s,a.add(e.t0.message),e.abrupt("return",(0,t.eventually)(n,i-c,o,a));case 19:case"end":return e.stop()}}),e,null,[[6,11]])})));return function(t,n,r,i){return e.apply(this,arguments)}}();t.eventually=o},67748:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compileObjectTemplate=t.compileStringTemplate=void 0;t.compileStringTemplate=function(e,t){var n=decodeURIComponent(e);return Object.keys(t).forEach((function(e){var r=t[e],i=new RegExp("\\$\\{"+e+"\\}","g");n=n.replace(i,r)})),n};t.compileObjectTemplate=function(e,t){var n=decodeURIComponent(e);return Object.keys(t).forEach((function(e){var r=t[e],i=JSON.stringify(r),o=new RegExp('"\\$\\$\\{'+e+'\\}"',"g"),a=new RegExp("\\$\\{"+e+"\\}","g"),u="string"==typeof r?r.replace(/"/g,(function(e,t,n){return"\\"!==n[t-1]?'\\"':n[t]})):r;n=n.replace(o,i).replace(a,u).replace(/\n/g,"\\n")})),JSON.parse(n)}},1076:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.connection=t.connectionData=t.connectionDataEquals=t.connectionNodeEquals=t.connectionNode=t.externalConnectionNode=t.isInternalConnection=t.isExternalConnection=t.isInternalConnectionNode=t.isExternalConnectionNode=t.getPartOutputs=t.getOutputName=t.getInputName=t.getPartInputs=t.TRIGGER_PIN_ID=t.ERROR_PIN_ID=t.THIS_INS_ID=void 0;var r=n(24048);t.THIS_INS_ID="__this",t.ERROR_PIN_ID="__error",t.TRIGGER_PIN_ID="__trigger";t.getPartInputs=function(e){var n;return Object.assign({},e.inputs,((n={})[t.TRIGGER_PIN_ID]=(0,r.partInput)(),n))};t.getInputName=function(e){return e===t.TRIGGER_PIN_ID?"Trigger Part":e};t.getOutputName=function(e){return e===t.ERROR_PIN_ID?"Error":e};t.getPartOutputs=function(e){var n;return Object.assign({},e.outputs,((n={})[t.ERROR_PIN_ID]=(0,r.partOutput)(),n))};t.isExternalConnectionNode=function(e){return e&&e.insId===t.THIS_INS_ID};t.isInternalConnectionNode=function(e){return e.insId!==t.THIS_INS_ID};t.isExternalConnection=function(e){var n=e.from,r=e.to;return(0,t.isExternalConnectionNode)(n)||(0,t.isExternalConnectionNode)(r)};t.isInternalConnection=function(e){return!(0,t.isExternalConnection)(e)};t.externalConnectionNode=function(e){return{insId:t.THIS_INS_ID,pinId:e}};t.connectionNode=function(e,t){return{insId:e,pinId:t}};t.connectionNodeEquals=function(e,t){return e.insId===t.insId&&e.pinId===t.pinId};t.connectionDataEquals=function(e,n){return!(!e||!n)&&((0,t.connectionNodeEquals)(e.from,n.from)&&(0,t.connectionNodeEquals)(e.to,n.to))},t.connectionData=function(e,n,r){var i="string"==typeof e?e.split("."):e,o="string"==typeof n?n.split("."):n;if(i.length>2||o.length>2)throw new Error("invalid source or target to connection data - "+e+" / "+n);return{from:2===i.length?(0,t.connectionNode)(i[0],i[1]):(0,t.externalConnectionNode)(i[0]),to:2===o.length?(0,t.connectionNode)(o[0],o[1]):(0,t.externalConnectionNode)(o[0]),delayed:r}};t.connection=function(e,t,n){return void 0===n&&(n=!1),{from:e,to:t,delayed:n}}},6485:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.connect=void 0;var u=n(24048),s=n(30385),c=n(45821),l=n(1076);a(n(1076),t);t.connect=function(e,t,n,o,a,d,p,f){void 0===n&&(n={}),void 0===o&&(o="root"),void 0===a&&(a={bob:new Map}),void 0===d&&(d=c.noop),void 0===p&&(p={}),void 0===f&&(f={});var v=e.id,m=e.connections,g=e.instances,y=v||"connected-part"+(0,c.randomInt)(999);return{inputs:e.inputs,outputs:e.outputs,id:y,completionOutputs:e.completionOutputs,reactiveInputs:e.reactiveInputs,fn:function(v,b){var h,I=[],C=new c.DepGraph({}),P=new Map,x=new Map,_=new Map,j=new Map,O=new Map,w=new Map,E=new Set;g.forEach((function(e){var n=(0,u.getPart)(e,t),r=e.id;P.set(e,r),x.set(r,e),C.addNode(r);var i=Object.keys(n.inputs),o=Object.keys(n.outputs),a={},s={};if(i.forEach((function(t){var n=(e.inputConfig||{})[t]||(0,u.queueInputPinConfig)();(0,u.isStaticInputPinConfig)(n)?a[t]=(0,u.staticPartInput)(n.value):a[t]=(0,u.dynamicPartInput)({config:n})})),a[l.TRIGGER_PIN_ID]=(0,u.dynamicPartInput)({config:(0,u.queueInputPinConfig)()}),m.some((function(t){return(0,l.isInternalConnectionNode)(t.to)&&t.to.insId===e.id&&t.to.pinId===l.TRIGGER_PIN_ID}))&&e.inputConfig&&e.inputConfig[l.TRIGGER_PIN_ID])throw"Trigger connection can not be configured";o.forEach((function(e){var t=(0,u.dynamicOutput)();s[e]=t})),m.some((function(t){return(0,l.isInternalConnectionNode)(t.from)&&t.from.insId===e.id&&t.from.pinId===l.ERROR_PIN_ID}))&&(s[l.ERROR_PIN_ID]=(0,u.dynamicOutput)()),_.set(r,a),j.set(r,s)}));var S=new Set;return m.forEach((function(n){var o=n.from,a=n.to,s=o.insId,c=o.pinId,d=a.insId,p=a.pinId,f=j.get(s),v=_.get(d);if((0,l.isInternalConnectionNode)(a)&&S.add(a.insId+"."+a.pinId),(0,l.isExternalConnection)(n))if((0,l.isExternalConnectionNode)(o)){var m=v[a.pinId];if(!m)throw new Error("Input "+a.pinId+" of instance "+d+" not found");var g=O.get(o.pinId)||[];g.push(m),O.set(o.pinId,g)}else{var b=f[o.pinId];if(!b)throw new Error("Output "+o.pinId+" of instance "+s+" not found");var h=w.get(a.pinId)||[];h.push(b),w.set(a.pinId,h)}else{if(!f)throw new Error("No outputs found for instance ["+s+"]");if(!v)throw x.has(d)?new Error("No inputs found for instance ["+d+"]"):new Error("Instance with id ["+d+"] does not exist!");var P=f[c];if(!P)throw console.log(c),new Error("Output source - ["+c+"] not found in part ["+y+"]");var E=v[p],T=x.get(s);if(!T&&s!==l.THIS_INS_ID)throw new Error("Instance ["+s+"] does not exist! failed to connect ["+o+"] -> ["+a+"]");var k=(T?(0,u.getPart)(T,t):e).outputs[c];if(k&&k.delayed||n.delayed||s!==l.THIS_INS_ID&&d!==l.THIS_INS_ID&&C.addDependency(s,d),!E)throw new Error("Target arg - ["+a+"] not found in part ["+y+"]");var D=P.subscribe(function(){var e=i(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,u.isDynamicInput)(E)){e.next=3;break}throw console.info(E),new Error("Impossible state listening to non dynamic input - "+d+"."+p);case 3:E.subject.next(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());I.push((function(){return D.unsubscribe()}))}})),(0,c.okeys)(b).forEach((function(e){(w.get(e)||[]).forEach((function(t){var n=t.subscribe(function(){var t=i(r().mark((function t(n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:b[e].next(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());I.push((function(){return n.unsubscribe()}))}))})),C.overallOrder().map((function(e){return x.get(e)})).forEach((function(e){var r=_.get(e.id),i=j.get(e.id),c=(0,u.getPart)(e,t);if(!r)throw new Error("Unexpected error - args not found when running "+e);if(!i)throw new Error("Unexpected error - outputs not found when running "+e);for(var l in r){var v=e.inputConfig[l];S.has(e.id+"."+l)||(0,u.isStaticInputPinConfig)(v)||delete r[l]}var m=(0,s.execute)({part:c,inputs:r,outputs:i,partsRepo:t,_debugger:n,insId:e.id,extraContext:f,mainState:a,parentInsId:o,onBubbleError:d,onCompleted:function(){return t=e.id,E.delete(t),void(0===E.size&&h&&h());var t},onStarted:function(){return t=e.id,void E.add(t);var t},env:p});I.push(m)})),Object.keys(v).forEach(function(){var e=i(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(O.get(t)||[]).forEach((function(e){var n=v[t];if(!(0,u.isDynamicInput)(e))throw new Error("Unsure what to do with key "+t+", input: "+e+" of ins "+o);(0,c.isDefined)(n)&&e.subject.next(n)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),void 0===e.completionOutputs&&E.size>0?new Promise((function(e){h=e})):function(){return I.forEach((function(e){try{e()}catch(t){console.error("error unsubscribing",t)}}))}}}}},28674:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.MINOR_DEBUGGER_EVENT_TYPES=t.MAJOR_DEBUGGER_EVENT_TYPES=t.DebuggerEventType=void 0,function(e){e.INPUT_CHANGE="i",e.OUTPUT_CHANGE="o",e.PROCESSING_CHANGE="pc",e.ERROR="err",e.INPUTS_STATE_CHANGE="isc"}(n=t.DebuggerEventType||(t.DebuggerEventType={})),t.MAJOR_DEBUGGER_EVENT_TYPES=[n.INPUT_CHANGE,n.OUTPUT_CHANGE,n.ERROR],t.MINOR_DEBUGGER_EVENT_TYPES=[n.PROCESSING_CHANGE,n.INPUTS_STATE_CHANGE]},76296:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(28674),t)},30385:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.execute=t.INPUTS_STATE_SUFFIX=t.INNER_STATE_SUFFIX=void 0;var u=n(71542),s=n(21730);a(n(76296),t);var c=n(24048),l=n(6485),d=n(23939),p=n(45821),f=n(40189),v=n(24048),m=n(76296),g=n(11302);t.INNER_STATE_SUFFIX="_inner",t.INPUTS_STATE_SUFFIX="_inputs";t.execute=function(e){var n=e.part,o=e.inputs,a=e.outputs,y=e.partsRepo,b=e._debugger,h=void 0===b?{}:b,I=e.insId,C=void 0===I?n.id:I,P=e.extraContext,x=void 0===P?{}:P,_=e.mainState,j=void 0===_?{}:_,O=e.parentInsId,w=void 0===O?"root":O,E=e.onBubbleError,S=void 0===E?u.noop:E,T=e.env,k=void 0===T?{}:T,D=e.onCompleted,N=void 0===D?u.noop:D,M=e.onStarted,R=void 0===M?u.noop:M,A=[],V=Object.assign({},x,{ENV:k}),H=(0,g.customRepoToPartRepo)(y,V),z=function(e){var t=e instanceof Error?e:new Error("Raw error: "+e.toString());if(t.message="error in child instance "+C+": "+t.message,a[l.ERROR_PIN_ID]?a[l.ERROR_PIN_ID].next(e):(t.insId=C,S(t)),h.onEvent){var n=t;n.insId=w+"."+C,h.onEvent({type:m.DebuggerEventType.ERROR,val:n,insId:C,parentInsId:w})}},G=function(e){return(0,c.isVisualPart)(e)?(0,l.connect)(e,H,h,w+"."+C,j,z,k,x):(0,c.isInlineValuePart)(e)?(0,g.inlineValuePartToPart)(e,V):e}(n),q=h.onEvent||u.noop,F={},L={};(0,p.entries)(o).forEach((function(e){var t=e[0],n=e[1];if((0,c.isDynamicInput)(n)){var o=(0,c.dynamicPartInput)({config:n.config}),a=n.subject.subscribe(function(){var e=i(r().mark((function e(n){var i,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=q({type:m.DebuggerEventType.INPUT_CHANGE,insId:C,pinId:t,val:n,parentInsId:w}))){e.next=8;break}return e.next=4,i.valuePromise;case 4:a=e.sent,o.subject.next(a),e.next=12;break;case 8:if(!h.debugDelay){e.next=11;break}return e.next=11,(0,p.delay)(h.debugDelay);case 11:o.subject.next(n);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());A.push((function(){return a.unsubscribe()})),L[t]=o}else{q({type:m.DebuggerEventType.INPUT_CHANGE,insId:C,pinId:t,val:n.config.value,parentInsId:w});var u=(0,c.staticPartInput)((0,c.getStaticValue)(n.config.value,H,C));L[t]=u}})),(0,p.entries)(a).forEach((function(e){var t=e[0],n=e[1],o=(0,c.dynamicOutput)(),a=o.subscribe(function(){var e=i(r().mark((function e(i){var o,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=q({type:m.DebuggerEventType.OUTPUT_CHANGE,insId:C,pinId:t,val:i,parentInsId:w}))){e.next=8;break}return e.next=4,o.valuePromise;case 4:a=e.sent,n.next(a),e.next=9;break;case 8:n.next(i);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());A.push((function(){return a.unsubscribe()})),F[t]=o}));var B=function(e){var n,r=e.part,i=e.inputs,o=e.outputs,a=e.repo,l=e._debugger,g=e.insId,y=e.parentInsId,b=e.mainState,h=e.onError,I=e.onStarted,C=e.onCompleted,P=e.env,x=e.extraContext,_=r.fn,j=(0,f.debugLogger)("core"),O=[],w=l.onEvent||u.noop,E=(y||"root")+"."+g,S=""+E+t.INNER_STATE_SUFFIX,T=""+E+t.INPUTS_STATE_SUFFIX,k=j.extend(E);b[S]||(b[S]=new Map),b[T]||(b[T]=new Map),b[S];var D,N=b[T],M=function(){var e=Array.from(N.entries()).reduce((function(e,t){var n,r=t[0],o=t[1],a=(0,c.isQueueInputPinConfig)(i[r].config,i[r]);return Object.assign({},e,((n={})[r]=a?null==o?void 0:o.length:1,n))}),{});w({type:m.DebuggerEventType.INPUTS_STATE_CHANGE,val:e,insId:g,parentInsId:y})},R={execute:function(e,n,r,i){return(0,t.execute)({part:e,inputs:n,outputs:r,partsRepo:a,_debugger:l,insId:i,onCompleted:C,onStarted:I})},insId:g,state:b[S],onCleanup:function(e){O.push(e)},onError:function(e){h(e)},context:x,parentInsId:y},A=!1,V=(r.reactiveInputs||[]).filter((function(e){return!(0,v.isStaticInputPinConfig)(i[e].config)})),H=function(){b[S].clear(),(0,p.keys)(b).filter((function(e){return e.startsWith(E+".")})).forEach((function(e){b[e]=new Map}))},z=function e(t){var a=V.includes(null==t?void 0:t.key);if(A&&!a);else{var u=A&&a;if((0,d.isPartStateValid)(i,N,r)||u){var l;if(A){var f;if(!t)throw new Error("Unexpected state,  got reactive part while not processing and not valid");var v=(0,d.pullValueForExecution)(t.key,i[t.key],N,P);l=Object.assign({},D,((f={})[t.key]=v,f)),M()}else l=(0,d.pullValuesForExecution)(i,N,P),D=l,M();var b=new Set,x={};if(A=!0,w({type:m.DebuggerEventType.PROCESSING_CHANGE,val:A,insId:g,parentInsId:y}),r.completionOutputs){var j=r.completionOutputs.map((function(e){return e.split("+")})).reduce((function(e,t){return t.forEach((function(n){e.set(n,t)})),e}),new Map);(0,p.entries)(o).forEach((function(t){var o=t[0];t[1].pipe((0,s.first)()).subscribe((function(t){b.add(o),x[o]=t;var a=j.get(o);a&&(a.splice(a.indexOf(o),1),0===a.length&&(A=!1,w({type:m.DebuggerEventType.PROCESSING_CHANGE,val:A,insId:g,parentInsId:y}),C&&C(x),H(),(0,p.callFnOrFnPromise)(n,"Error with cleanup function of "+r.id),n=void 0,b.clear(),x={},(0,d.hasNewSignificantValues)(i,N,P,r.id)&&e()))}))}))}try{k("Running part %s with values %o",r.id,l),I&&I(),n=_(l,o,R),(0,p.isPromise)(n)?n.then((function(){void 0===r.completionOutputs&&C&&(A=!1,w({type:m.DebuggerEventType.PROCESSING_CHANGE,val:A,insId:g,parentInsId:y}),C(x),H())})):void 0===r.completionOutputs&&C&&(A=!1,w({type:m.DebuggerEventType.PROCESSING_CHANGE,val:A,insId:g,parentInsId:y}),C(x),H())}catch(q){console.log(q),A=!1,k("Error in part %s - value %e",r.id,q),w({type:m.DebuggerEventType.PROCESSING_CHANGE,val:A,insId:g,parentInsId:y}),h(q)}var O=V.find((function(e){return i[e]&&(0,d.peekValueForExecution)(e,i[e],N,P,r.id)}));if(O){var E=(0,d.peekValueForExecution)(O,i[O],N,P,r.id);e({key:O,value:E})}else{var S=(0,p.entries)(i).find((function(e){var t=e[0],n=e[1],i=(0,c.isQueueInputPinConfig)(n.config,n),o=(0,d.peekValueForExecution)(t,n,N,P,r.id);if(i)return(0,p.isDefined)(o)}));if(S){var T=S[0],z=S[1],G=(0,d.peekValueForExecution)(T,z,N,P,r.id);e({key:T,value:G})}}}}};z();var G=(0,d.subscribeInputsToState)(i,N,a,g,(function(e,t){j("Got input %s - value is [%o]",e,t),M();try{z({key:e,value:t})}catch(n){h(n)}}));return O.push(G),function(){(0,p.callFnOrFnPromise)(n,"Error with cleanup function of "+r.id),O.forEach((function(e){return e()}))}}({part:G,inputs:L,outputs:F,repo:H,_debugger:h,insId:C,mainState:j,parentInsId:w,onError:z,onBubbleError:S,env:k,extraContext:x,onCompleted:N,onStarted:R});return function(){A.forEach((function(e){return e()})),B()}}},23939:function(e,t,n){"use strict";var r=n(45597).default;Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeInputsToState=t.isPartStateValid=t.hasNewSignificantValues=t.peekValuesForExecution=t.pullValuesForExecution=t.pullValueForExecution=t.peekValueForExecution=void 0;var i=n(24048),o=n(45821),a=n(6485),u=function(e,t){var n=(0,i.extractStaticValue)(e);return(0,i.isEnvValue)(n)?function(e,t){for(var n,i=e.split("."),a=Object.assign({},t),u=r(i);!(n=u()).done;){var s=n.value;if(!a||!(0,o.isDefined)(a[s])||null===a[s])throw new Error("Cannot find key "+e+" inside obj "+t);a=a[s]}return a}((0,i.getEnvKeyFromValue)(n),t):n};t.peekValueForExecution=function(e,t,n,r,o){var a=n.get(e);if(!t)throw new Error('Trying to peek value of inexsting input in key "'+e+'" in part "'+o+'"');return(0,i.isStaticInput)(t)?u(t,r):(0,i.isQueueInputPinConfig)(t.config,t)?a?[].concat(a).shift():void 0:a};t.pullValueForExecution=function(e,t,n,r){var o,a=n.get(e);return(0,i.isStaticInput)(t)?o=u(t,r):(0,i.isQueueInputPinConfig)(t.config,t)?(o=(a||[]).shift(),n.set(e,a)):(o=a,(0,i.isStickyInputPinConfig)(t.config)||n.delete(e)),o};t.pullValuesForExecution=function(e,n,r){return(0,o.entries)(e).reduce((function(e,i){var o=i[0],a=i[1];return e[o]=(0,t.pullValueForExecution)(o,a,n,r),e}),{})};t.peekValuesForExecution=function(e,n,r,i){return(0,o.entries)(e).reduce((function(e,o){var a=o[0],u=o[1];return e[a]=(0,t.peekValueForExecution)(a,u,n,r,i),e}),{})};t.hasNewSignificantValues=function(e,n,r,a){return(0,o.entries)(e).some((function(e){var u=e[0],s=e[1],c=(0,i.isQueueInputPinConfig)(s.config,s),l=(0,t.peekValueForExecution)(u,s,n,r,a);return(0,o.isDefined)(l)&&c}))};t.isPartStateValid=function(e,t,n){var r=(0,o.keys)(e),u=(0,o.keys)(n.inputs).filter((function(e){var t=n.inputs[e].mode;return!t||"required"===t}));return r.includes(a.TRIGGER_PIN_ID)&&u.push(a.TRIGGER_PIN_ID),!!(0,o.containsAll)(r,u)&&(0,o.entries)(e).filter((function(e){var t=e[0];return!!n.inputs[t]||t===a.TRIGGER_PIN_ID})).every((function(e){var r,a=e[0],u=e[1],s=t.get(a);return"optional"===((null===(r=n.inputs[a])||void 0===r?void 0:r.mode)||"required")||(!!(0,i.isStaticInput)(u)||((0,i.isQueueInputPinConfig)(u.config,u)?(0,o.isDefined)(s)&&s.length>0:(0,o.isDefined)(s)))}))};t.subscribeInputsToState=function(e,t,n,r,a){var u=[];return(0,o.entries)(e).forEach((function(e){var n=e[0],r=e[1];if(r&&!(0,i.isStaticInput)(r)){var o=r.subject.subscribe((function(e){if((0,i.isQueueInputPinConfig)(r.config,r)){var o=t.get(n)||[];if(!Array.isArray(o))throw new Error("impossible state - state of key "+n+" is set but not an array");o.push(e),t.set(n,o),a(n,e)}else t.set(n,e),a(n,e)}));u.push((function(){return o.unsubscribe()}))}})),function(){return u.forEach((function(e){return e()}))}}},19735:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flydeFlowSchema=void 0;var r=n(89510),i=r.z.record(r.z.string(),r.z.string().or(r.z.array(r.z.string()))),o=r.z.strictObject({x:r.z.number(),y:r.z.number()}),a=r.z.discriminatedUnion("mode",[r.z.strictObject({mode:r.z.literal("static"),value:r.z.any()}),r.z.strictObject({mode:r.z.literal("queue")}),r.z.strictObject({mode:r.z.literal("sticky")})]),u=r.z.object({size:r.z.optional(r.z.enum(["small","regular","large"])),icon:r.z.optional(r.z.any()),color:r.z.optional(r.z.string()),cssOverride:r.z.optional(r.z.record(r.z.string()))}),s=r.z.object({pos:o.default({x:0,y:0}),id:r.z.string(),inputConfig:r.z.optional(r.z.record(r.z.string(),a)).default({}),visibleInputs:r.z.optional(r.z.array(r.z.string())),visibleOutputs:r.z.optional(r.z.array(r.z.string())),partId:r.z.optional(r.z.string()),part:r.z.optional(r.z.any()),style:r.z.optional(u)}).refine((function(e){return e.part||e.partId}),{message:"Instance must have either an inline part or refer to a partId"}),c=r.z.union([r.z.string(),r.z.object({mode:r.z.enum(["required","optional","required-if-connected"]),type:r.z.optional(r.z.string()),description:r.z.optional(r.z.string()),defaultValue:r.z.optional(r.z.any())})]),l=r.z.object({type:r.z.optional(r.z.string()),optional:r.z.optional(r.z.boolean()),delayed:r.z.optional(r.z.boolean()),description:r.z.optional(r.z.string())}),d=r.z.object({id:r.z.optional(r.z.string()),inputs:r.z.record(r.z.string(),c),outputs:r.z.record(r.z.string(),l),inputsPosition:r.z.optional(r.z.record(r.z.string(),o)),outputsPosition:r.z.optional(r.z.record(r.z.string(),o)),customViewCode:r.z.optional(r.z.string()),dataBuilderSource:r.z.optional(r.z.string()),templateType:r.z.optional(r.z.string()),completionOutputs:r.z.optional(r.z.array(r.z.string())),reactiveInputs:r.z.optional(r.z.array(r.z.string())),defaultStyle:r.z.optional(u),description:r.z.optional(r.z.string())}),p=r.z.object({instances:r.z.array(s),connections:r.z.array(r.z.strictObject({from:r.z.strictObject({insId:r.z.string(),pinId:r.z.string()}),to:r.z.strictObject({insId:r.z.string(),pinId:r.z.string()}),delayed:r.z.optional(r.z.boolean()),hidden:r.z.optional(r.z.boolean())}))}).and(d);t.flydeFlowSchema=r.z.strictObject({imports:r.z.optional(i).default({}),part:p})},18265:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.isStaticValueVisualPart=void 0,i(n(45821),t);var o=n(24048);i(n(6485),t),i(n(30385),t),i(n(69789),t),i(n(24048),t),i(n(90163),t),i(n(51922),t),i(n(11302),t),i(n(55281),t),i(n(19735),t);t.isStaticValueVisualPart=function(e){return e&&!!(0,o.maybeGetStaticValuePartId)(""+e)}},88004:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fakeVm=t.VM=t.VMScript=void 0;var r=n(45821),i=function(e){this.script=e};t.VMScript=i;var o=function(){function e(e){this.context=e}return e.prototype.run=function(e){var t=(0,r.okeys)(this.context.sandbox),n=Object.values(this.context.sandbox);Function.apply(void 0,t.concat([e.script])).apply(void 0,n)},e}();t.VM=o,t.fakeVm={VMScript:i,VM:o}},58725:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getVM2Instance=void 0;var r=n(88004);t.getVM2Instance=function(){return r.fakeVm}},11302:function(e,t,n){"use strict";var r=n(68626).default,i=["fnCode"];Object.defineProperty(t,"__esModule",{value:!0}),t.customRepoToPartRepo=t.inlineValuePartToPart=void 0;var o=n(14206),a=n(45821),u=n(24048),s=(0,n(58725).getVM2Instance)();t.inlineValuePartToPart=function(e,t){void 0===t&&(t={});var n=e.fnCode,c=r(e,i),l=(0,a.debugLogger)("code-part:"+e.id),d="\n  try {\n    "+n+"\n  } catch (e) {\n    adv.onError(e);\n  }\n  ",p=new s.VMScript(d),f=Object.assign({},c,{fn:function(n,r,i){var c=new s.VM({sandbox:Object.assign({inputs:n,outputs:r,setInterval:setInterval,clearInterval:clearInterval,setTimeout:setTimeout,clearTimeout:clearTimeout,encodeURIComponent:encodeURIComponent,adv:i,log:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];l.apply(void 0,["Log from code part "+e.id+" ["+i.insId+"]"].concat(n))},axios:o.default,DEFAULT_AXIOS_TIMEOUT:15e3,dynamicPartInput:u.dynamicPartInput,dynamicPartArg:u.dynamicPartInput,dynamicOutput:u.dynamicOutput,isDefined:a.isDefined,compileStringTemplate:a.compileStringTemplate,compileObjectTemplate:a.compileObjectTemplate,__FLYDE_MODE:"production"},t)});c.run(p)}});return f};t.customRepoToPartRepo=function(e,n){void 0===n&&(n={});var r={};for(var i in e){var o=e[i];r[i]=(0,u.isInlineValuePart)(o)?(0,t.inlineValuePartToPart)(o,n):o}return r}},90163:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPartWithDependencies=void 0;var r=n(24048),i=n(18265),o=n(93471);t.getPartWithDependencies=function(e,n,a){if(void 0===a&&(a=[]),(0,r.isInlineValuePart)(e))return[e];if(a.includes(e.id))return[];var u=(0,i.removeDupes)(e.instances.filter((function(e){return(0,o.isRefPartInstance)(e)})).map((function(e){return e.partId})).filter((function(e){return n[e]}))),s=u.map((function(e){return n[e]})).reduce((function(e,r){return[].concat(e,(0,t.getPartWithDependencies)(r,n,[].concat(a,u)))}),[]);return[e].concat(s)}},24048:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.codeFromFunction=t.getPartDef=t.getPart=t.getStaticValue=t.maybeGetStaticValuePartId=t.fromSimplified=t.inlineValuePart=t.codePart=t.visualPart=t.isInlineValuePart=t.isVisualPart=t.isCodePart=t.isBasePart=t.InlineValuePartType=void 0;var o=n(45821),a=n(93471),u=n(85089);i(n(93471),t),i(n(85089),t),i(n(34702),t),i(n(27519),t),function(e){e.VALUE="value",e.FUNCTION="function"}(t.InlineValuePartType||(t.InlineValuePartType={}));t.isBasePart=function(e){return e&&e.id&&e.inputs&&e.outputs};t.isCodePart=function(e){return(0,t.isBasePart)(e)&&"function"==typeof e.fn};t.isVisualPart=function(e){return!!e.instances};t.isInlineValuePart=function(e){return(0,o.isDefined)(e)&&(0,o.isDefined)(e.fnCode)},t.visualPart=(0,o.testDataCreator)({id:"visual-part",inputs:{},outputs:{},instances:[],connections:[],outputsPosition:{},inputsPosition:{}}),t.codePart=(0,o.testDataCreator)({id:"part",inputs:{},outputs:{},fn:o.noop}),t.inlineValuePart=(0,o.testDataCreator)({id:"part",inputs:{},outputs:{},fnCode:""});t.fromSimplified=function(e){var t=e.fn,n=e.inputTypes,r=e.outputTypes;return{id:e.id,inputs:(0,o.entries)(n).reduce((function(e,t){var n,r=t[0];t[1];return Object.assign({},e,((n={})[r]={},n))}),{}),outputs:(0,o.entries)(r).reduce((function(e,t){var n,r=t[0];t[1];return Object.assign({},e,((n={})[r]={},n))}),{}),fn:t}};t.maybeGetStaticValuePartId=function(e){var t="string"==typeof e&&e.match(/^__part\:(.*)/);return t?t[1]:null};t.getStaticValue=function(e,n,r){var i=(0,t.maybeGetStaticValuePartId)(e);if(i){var o=n[i];if(!o)throw new Error("Instance "+r+" referrer to a part reference "+i+" that does not exist");return o}return e};t.getPart=function(e,t){if("string"!=typeof e&&(0,a.isInlinePartInstance)(e))return e.part;var n="string"==typeof e?e:e.partId,r=t[n];if(!r)throw new Error("Part with id "+n+" not found");return r};t.getPartDef=function(e,t){if("string"!=typeof e&&(0,a.isInlinePartInstance)(e))return e.part;var n="string"==typeof e?e:e.partId,r=t[n];if(!r)throw console.error("Part with id "+n+" not found"),new Error("Part with id "+n+" not found");return r};t.codeFromFunction=function(e){var t,n=e.id,r=e.fn,i=e.inputNames,o=e.outputName,a=e.defaultStyle;return{id:n,inputs:i.reduce((function(e,t){var n;return Object.assign({},e,((n={})[t]=(0,u.partInput)(),n))}),{}),outputs:(t={},t[o]=(0,u.partOutput)(),t),fn:function(e,t){var n=i.map((function(t){return e[t]})),a=t[o],u=r.apply(void 0,n);return Promise.resolve(u).then((function(e){return a.next(e)}))},completionOutputs:[o],defaultStyle:a}}},93471:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createInsId=t.PartInstance=t.isRefPartInstance=t.isInlinePartInstance=t.inlinePartInstance=t.partInstance=void 0;var r=n(98739);t.partInstance=function(e,t,n,r){return{id:e,partId:t,inputConfig:n||{},pos:r||{x:0,y:0}}};t.inlinePartInstance=function(e,t,n,r){return{id:e,part:t,inputConfig:n||{},pos:r||{x:0,y:0}}};t.isInlinePartInstance=function(e){return!!e.part};t.isRefPartInstance=function(e){return!(0,t.isInlinePartInstance)(e)};t.PartInstance=function(e,t,n,r){return{id:e,partId:t.id,inputConfig:n||{},pos:r||{x:0,y:0}}};t.createInsId=function(e){return e.id+"-"+(0,r.slug)()}},85089:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEnvKeyFromValue=t.toEnvValue=t.isEnvValue=t.extractStaticValue=t.isStaticInput=t.isDynamicInput=t.staticPartInput=t.dynamicPartInputs=t.dynamicPartInput=t.dynamicOutput=t.partOutputs=t.partOutput=t.partInputs=t.isInputPinOptional=t.partInput=void 0;var r=n(71542),i=n(24048),o=n(45821),a=n(34702);t.partInput=function(e){return void 0===e&&(e="required"),{mode:e}};t.isInputPinOptional=function(e){return"optional"===e.mode};t.partInputs=function(e,n){return(0,o.repeat)(e,(function(e){return(0,t.partInput)(n[e]||"required")}))};t.partOutput=function(e){return void 0===e&&(e=!1),{delayed:e}};t.partOutputs=function(e){return(0,o.repeat)(e,(function(){return(0,t.partOutput)()}))};t.dynamicOutput=function(){return new r.Subject},t.dynamicPartInput=(0,o.testDataCreator)((function(){return{subject:new r.Subject,config:(0,a.queueInputPinConfig)()}}));t.dynamicPartInputs=function(e){return void 0===e&&(e=10),(0,o.repeat)(e,(function(){return(0,o.testDataCreator)((function(){return{subject:new r.Subject,config:(0,a.queueInputPinConfig)()}}))()}))};t.staticPartInput=function(e){return{config:(0,a.staticInputPinConfig)(e)}};t.isDynamicInput=function(e){var t=e;return t&&t.subject&&!!t.subject.next};t.isStaticInput=function(e){return(0,i.isStaticInputPinConfig)(e.config)};t.extractStaticValue=function(e){if((0,t.isStaticInput)(e))return e.config.value;throw new Error("Cannot extract static value from non static arg")};t.isEnvValue=function(e){return"string"==typeof e&&e.startsWith("$ENV.")};t.toEnvValue=function(e){return"$ENV."+e};t.getEnvKeyFromValue=function(e){return"string"==typeof e?e.replace(/^\$ENV\./,""):e}},27519:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default;Object.defineProperty(t,"__esModule",{value:!0}),t.partFromSimpleFunction=void 0,t.partFromSimpleFunction=function(e){var t,n;return{id:e.id,description:e.description,namespace:e.namespace,inputs:e.inputs?e.inputs.reduce((function(e,t){var n,r=t.name,i=t.description,o=t.mode;return Object.assign({},e,((n={})[r]={description:i,mode:null!=o?o:"required"},n))}),{}):{},outputs:e.output?(t={},t[e.output.name]={description:e.output.description},t):{},defaultStyle:{icon:e.icon,size:e.size},fn:(n=i(r().mark((function t(n,i,o){var a,u,s;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=(null!==(a=e.inputs)&&void 0!==a?a:[]).map((function(e){var t=e.name;return n[t]})),t.prev=1,t.next=4,Promise.resolve(e.fn.apply(e,u));case 4:s=t.sent,e.output&&i[e.output.name].next(s),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.error("Error in part",t.t0),o.onError(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,8]])}))),function(e,t,r){return n.apply(this,arguments)}),customViewCode:e.customViewCode}}},34702:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isStaticInputPinConfig=t.isStickyInputPinConfig=t.isQueueInputPinConfig=t.staticInputPinConfig=t.stickyInputPinConfig=t.queueInputPinConfig=t.INPUT_MODES=void 0,t.INPUT_MODES=["queue","sticky","static"];t.queueInputPinConfig=function(){return{mode:"queue"}};t.stickyInputPinConfig=function(){return{mode:"sticky"}};t.staticInputPinConfig=function(e){return{mode:"static",value:e}};t.isQueueInputPinConfig=function(e,t){return"queue"===e.mode};t.isStickyInputPinConfig=function(e){return e&&"sticky"===e.mode},t.isStaticInputPinConfig=function(e){return e&&"static"===e.mode}},69789:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.simplifiedExecute=void 0;var r=n(18265),i=n(30385);t.simplifiedExecute=function(e,t,n,o,a){void 0===a&&(a={});var u=(0,r.keys)(e.outputs),s=Object.keys(n).reduce((function(e,t){var i,o=n[t];return Object.assign({},e,((i={})[t]=(0,r.isDynamicInput)(o)?o:(0,r.staticPartInput)(o),i))}),{}),c=u.reduce((function(e,t){var n,i=(0,r.dynamicOutput)();return o&&i.subscribe((function(e){o(t,e)})),Object.assign({},e,((n={})[t]=i,n))}),{});return(0,i.execute)(Object.assign({part:e,inputs:s,outputs:c,partsRepo:t,onBubbleError:function(e){throw e}},a))}},51922:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},55281:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isScheduledTrigger=t.isRestApiTrigger=t.isWebAppTrigger=void 0;t.isWebAppTrigger=function(e){return"web-app"===e.type};t.isRestApiTrigger=function(e){return"rest-api"===e.type};t.isScheduledTrigger=function(e){return"scheduled"===e.type}},23489:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PartPreview=void 0;var r=n(24246),i=n(18265),o=n(57768);t.PartPreview=function(e){var t=e.part,n={part:t,instance:(0,i.partInstance)("bob",t.id,{}),connections:[],connectionsPerInput:{},connectionsPerOutput:{},viewPort:{pos:{x:0,y:0},zoom:1},partDefRepo:{},onUngroup:i.noop,onDblClick:i.noop,onDragEnd:i.noop,onDragMove:i.noop,onDragStart:i.noop,onPinClick:i.noop,onPinDblClick:i.noop,onSelect:i.noop,onTogglePinBreakpoint:i.noop,onTogglePinLog:i.noop,onToggleSticky:i.noop,displayMode:!0,onInspectPin:i.noop,onDetachConstValue:i.noop,onCopyConstValue:i.noop,onPasteConstValue:i.noop,onRequestHistory:i.noop,parentInsId:"",onChangeVisibleInputs:i.noop,onChangeVisibleOutputs:i.noop,onConvertConstToEnv:i.noop,forceShowMinimized:"both",onExtractInlinePart:i.noop,onCloseInlineEditor:i.noop,isConnectedInstanceSelected:!1,inlineEditorPortalDomNode:null,onChangeStyle:i.noop,onDeleteInstance:i.noop,onGroupSelected:i.noop,onSetDisplayName:i.noop,queuedInputsData:{}};return(0,r.jsx)("div",{className:"part-preview",children:(0,r.jsx)(o.InstanceView,Object.assign({},n))})}},67795:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DataInspectionModal=void 0;var c=n(24246),l=n(42272),d=s(n(60042)),p=u(n(27378)),f=n(96149),v=n(60614),m=n(99457);t.DataInspectionModal=function(e){var t,n=e.onRequestHistory,o=e.item,a=p.default.useState(),u=a[0],s=a[1],g=p.default.useState(0),y=g[0],b=g[1],h=p.default.useState(""),I=h[0],C=h[1],P=p.default.useState(),x=P[0],_=P[1],j=(0,f.useDebounce)(I,300)[0];(0,p.useEffect)((function(){_(null==u?void 0:u.lastSamples.filter((function(e){return"object"==typeof e.val?JSON.stringify(e.val).includes(j):e.val.toString().includes(j)}))),b(0)}),[null==u?void 0:u.lastSamples,j]),p.default.useEffect((function(){function e(){return e=i(r().mark((function e(){var t,i,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(o.insId,null===(t=o.pin)||void 0===t?void 0:t.id,null===(i=o.pin)||void 0===i?void 0:i.type);case 2:a=e.sent,s(a);case 4:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[o,n]);var O='"'+o.insId+'" '+((null===(t=o.pin)||void 0===t?void 0:t.id)?"("+o.pin.id+")":"");return(0,c.jsx)(l.Dialog,{isOpen:!0,title:"Inspecting data for instance "+O,onClose:e.onClose,canEscapeKeyClose:!1,className:"data-inspection-modal",children:(0,c.jsx)("main",{className:(0,d.default)(l.Classes.DIALOG_BODY),tabIndex:0,children:(0,c.jsxs)("div",{children:[(0,c.jsxs)("header",{children:[u?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("em",{children:[O," called ",u.total," time(s)"]}),u.total>10&&(0,c.jsx)("span",{children:"Showing last 10 samples"})]}):null,(0,c.jsx)("input",{className:"bp3-input bp3-small bp3-fill",type:"search",placeholder:"Search for values",dir:"auto",onChange:function(e){return C(e.target.value)},value:I}),j.length>0&&(0,c.jsxs)("span",{children:["Showing ",null==x?void 0:x.length," of ",u.lastSamples.length," ",'samples matching query "',j,'"']})]}),(0,c.jsx)("main",{className:"main-wrapper",children:function(){if(!u)return(0,c.jsx)(m.Loader,{});if(0===u.total)return(0,c.jsxs)(l.Callout,{intent:"warning",children:["No events captured for instance ",(0,c.jsx)("em",{children:o.insId})," ",o.pin?(0,c.jsxs)(p.default.Fragment,{children:["and pin ",(0,c.jsx)("em",{children:o.pin.id})]}):null,". Make sure debugger is running and your program was triggered."]});var e,t,n=null==x?void 0:x[y];return n?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(l.Card,{className:"content-wrapper",children:[n?(0,c.jsxs)("div",{className:"info",children:[(0,c.jsxs)("div",{children:["Showing sample ",y," of event from"," ",(0,c.jsx)("strong",{children:(0,f.timeAgo)(n.time)})," (",new Date(n.time).toLocaleString(),")"]}),(0,c.jsxs)("div",{children:["Instance: ",(0,c.jsx)("strong",{children:n.insId}),", Pin id:"," ",(0,c.jsx)("strong",{children:n.pinId})," "]}),(0,c.jsx)("div",{children:"Value:"})]}):null,(e=n,t=e.val,"object"==typeof t?(0,c.jsx)(v.BrowserOnlyReactJson,{src:t,name:null}):(0,c.jsx)(l.Code,{children:t}))]}),(0,c.jsx)(l.Menu,{className:"samples-menu",children:x.map((function(e,t){var n=e.pinId,r=u.total-t+'. from pin "'+n+'"';return(0,c.jsx)(l.MenuItem,{text:r,onClick:function(){return b(t)}},t)}))})]}):u.lastSamples.length>0&&I.length>0?(0,c.jsxs)(l.Callout,{intent:"warning",children:['No data found for search query "',I,'"']}):(0,c.jsxs)(l.Callout,{intent:"warning",children:["No events captured for instance ",o.insId," ",o.pin?"and "+o.pin.id:"",". Make sure debugger is running and your program was triggered."]})}()})]})})})}},52293:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(67795),t)},90412:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t},s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FlowEditor=void 0;var l=n(24246),d=u(n(27378)),p=n(18265),f=n(41304),v=c(n(63300)),m=n(14648),g=n(13011),y=n(40232),b=n(51424),h=n(24935),I=n(91312),C=n(30537),P=n(31425),x=n(44370),_=n(99743),j=n(71362),O=n(52293);s(n(91312),t),C.library.add(P.fab,x.fas);var w=["select","drag-move","order-step"],E=function(e){var t;return Object.assign({},e.dependencies,((t={})[e.main.id]=e.main,t))};t.FlowEditor=d.memo(d.forwardRef((function(e,t){var n=e.state,o=e.resolvedRepoWithDeps,a=e.onChangeEditorState,u=e.onImportPart,s=e.debuggerClient,c=d.useState([]),C=c[0],P=c[1],x=d.useState([]),S=x[0],T=x[1],k=n.flow,D=n.boardData,N=n.flow.part,M=d.useState({}),R=M[0],A=M[1];d.useEffect((function(){if(s)return s.onBatchedEvents((function(e){e.forEach((function(e){console.log({event:e}),e.type===p.DebuggerEventType.INPUTS_STATE_CHANGE&&(console.log("INPUTS_STATE_CHANGE",e.insId,e.val),A((function(t){var n;return Object.assign({},t,((n={})[e.insId]=e.val,n))})))}))}))}),[s]);var V=(0,I.usePorts)().openFile,H=d.useCallback((function(e,t){console.log("onChangeFlow",t.type),"functional"===t.type&&(P([{flow:e}].concat(C.slice(0,50))),T([])),a((function(t){return Object.assign({},t,{flow:e})}))}),[a,C]),z=d.useState({instances:[],connections:[]}),G=z[0],q=z[1],F=d.useState(!1),L=F[0],B=F[1],U=d.useCallback((function(){return B(!1)}),[]),W=d.useCallback((function(){return B(!0)}),[]),J=d.useCallback((function(e){a((function(t){return Object.assign({},t,{boardData:Object.assign({},t.boardData,e)})}))}),[a]);d.useEffect((function(){J({selected:[],viewPort:f.defaultViewPort,from:void 0,to:void 0,lastMousePos:{x:0,y:0}})}),[N.id]),(0,m.useHotkeys)("cmd+z",(function(e){T([].concat(S,[n]));var t=C[0],r=C.slice(1);t&&(a((function(e){return Object.assign({},e,t)})),P(r)),e.preventDefault()}),void 0,[n,C,S]);var Z=d.useCallback((function(e,t){w.some((function(e){return t.message.includes(e)}))||T([]);var n=(0,v.default)(k,(function(t){t.part=e}));H(n,t)}),[k,H]),Y=d.useCallback((function(e){V({absPath:e.source.path})}),[V]),$=d.useCallback((function(e,t){void 0===t&&(t=-1*f.PART_HEIGHT*1.5);var n=(0,g.createNewPartInstance)(e,t,D.lastMousePos,E(o));if(n){var r=(0,v.default)(k,(function(e){var t=e.part;if(!(0,p.isVisualPart)(t))throw new Error("Impossible state, adding part to non visual part");t.instances.push(n)}));return H(r,(0,b.functionalChange)("add-part")),U(),n}}),[D.lastMousePos,k,H,U,o]),X=d.useCallback(function(){var e=i(r().mark((function e(t){var n,i,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next=e.t0===h.OmniBarCmdType.ADD?3:e.t0===h.OmniBarCmdType.ADD_VALUE?4:e.t0===h.OmniBarCmdType.CREATE_CODE_PART?7:e.t0===h.OmniBarCmdType.CREATE_GROUPED_PART?9:e.t0===h.OmniBarCmdType.IMPORT?11:18;break;case 3:return e.abrupt("return",$(t.data));case 4:return(0,g.domToViewPort)(D.lastMousePos,D.viewPort,f.defaultViewPort),(0,y.toastMsg)("TODO"),e.abrupt("break",19);case 7:case 9:return(0,y.toastMsg)("TODO"),e.abrupt("break",19);case 11:return e.next=13,u(t.data,{pos:D.lastMousePos});case 13:return n=(0,_.vAdd)({x:0,y:0},D.lastMousePos),i=(0,g.createNewPartInstance)(t.data.part,0,n,E(o)),a=(0,v.default)(k,(function(e){e.part.instances.push(i)})),H(a,(0,b.functionalChange)("add-imported-part")),e.abrupt("break",19);case 18:y.AppToaster.show({intent:"warning",message:"Not supported yet"});case 19:U();case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[U,$,D.lastMousePos,D.viewPort,u,o,k,H]),Q=(d.useCallback((function(e){var t,n,r,i;switch(e){case j.ActionType.RemovePart:var o=(0,v.default)(k,(function(e){var t=e.part;if(!(0,p.isVisualPart)(t))throw new Error("Impossible state, deleting instances opf non visual part");t.instances=t.instances.filter((function(e){return!D.selected.includes(e.id)})),t.connections=t.connections.filter((function(e){return!D.selected.includes(e.from.insId)&&!D.selected.includes(e.to.insId)}))}));H(o,(0,b.functionalChange)("remove-instances")),(0,y.toastMsg)("Removed "+D.selected.length+" instances(s)");break;case j.ActionType.Inspect:if(1===D.selected.length||D.from||D.to){var a=D.selected[0]||(null===(t=D.from)||void 0===t?void 0:t.insId)||(null===(n=D.to)||void 0===n?void 0:n.insId),u=(null===(r=D.from)||void 0===r?void 0:r.pinId)||(null===(i=D.to)||void 0===i?void 0:i.pinId);ee({insId:a,pin:{type:D.from?"output":"input",id:u}})}break;default:(0,y.toastMsg)(e+" not supported yet")}}),[D.from,D.selected,D.to,k,H]),d.useState()),K=Q[0],ee=Q[1],te=d.useCallback((function(){return ee(void 0)}),[]),ne=d.useCallback((function(e,t){ee({insId:e,pin:t})}),[]);return(0,l.jsx)("div",{className:"project-editor",children:function(){if((0,p.isInlineValuePart)(N))throw new Error("Impossible state");return(0,l.jsxs)(d.Fragment,{children:[K?(0,l.jsx)(O.DataInspectionModal,{onRequestHistory:e.onRequestHistory,item:K,onClose:te}):null,(0,l.jsx)(f.VisualPartEditor,{insId:"root."+N.id,ref:t,boardData:D,onChangeBoardData:J,part:N,onGoToPartDef:Y,onChangePart:Z,resolvedFlow:o,clipboardData:G,onCopy:q,partIoEditable:!N.id.startsWith("Trigger"),onInspectPin:ne,onRequestHistory:e.onRequestHistory,onRequestImportables:e.onQueryImportables,onImportPart:e.onImportPart,onShowOmnibar:W,onExtractInlinePart:e.onExtractInlinePart,queuedInputsData:R},N.id),L?(0,l.jsx)(h.Omnibar,{flow:k,repo:o.dependencies,onCommand:X,visible:L,onClose:U,onRequestImportables:e.onQueryImportables}):null]})}()})})))},57779:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BasePartEditor=t.renderCreateIOOption=void 0;var i=n(24246),o=r(n(27378)),a=n(18265),u=n(42272),s=r(n(63300)),c=n(18264),l=n(23489);t.renderCreateIOOption=function(e,t,n){return(0,i.jsx)(u.MenuItem,{icon:"add",text:'Create "'+e+'"',active:t,onClick:n,shouldDismissPopover:!1})};var d=c.MultiSelect.ofType();t.BasePartEditor=function(e){var n,r,c=e.part,p=e.onChange,f=(0,a.entries)(c.inputs),v=f.filter((function(e){return"required"===e[1].mode})).map((function(e){return e[0]})),m=f.filter((function(e){return"optional"===e[1].mode})).map((function(e){return e[0]})),g=f.filter((function(e){return"required-if-connected"===e[1].mode})).map((function(e){return e[0]})),y=o.default.useState(!1),b=y[0],h=y[1],I=(0,a.okeys)(c.outputs),C=o.default.useCallback((function(e){p(Object.assign({},c,{id:e}))}),[c,p]),P=o.default.useCallback((function(e){var t=e?e.split(","):void 0;"[]"===e&&(t=[]),console.log(e,t),p(Object.assign({},c,{completionOutputs:t}))}),[c,p]),x=o.default.useCallback((function(e){var t=e?e.split(","):void 0;p(Object.assign({},c,{reactiveInputs:t}))}),[c,p]),_=o.default.useCallback((function(e,t){var n=(0,s.default)(c,(function(n){n.inputs[e]=(0,a.partInput)(t)}));p(n)}),[c,p]),j=o.default.useCallback((function(e){var t=(0,s.default)(c,(function(t){delete t.inputs[e]}));p(t)}),[c,p]),O=o.default.useCallback((function(e){var t=(0,s.default)(c,(function(t){t.outputs[e]=(0,a.partOutput)()}));p(t)}),[c,p]),w=o.default.useCallback((function(e){var t=(0,s.default)(c,(function(t){delete t.outputs[e]}));p(t)}),[c,p]);o.default.useCallback((function(e){try{var t=JSON.parse(e),n=(0,s.default)(c,(function(e){Object.entries(t).forEach((function(t){var n=t[0],r=(t[1],e.inputs[n]),i=e.outputs[n];r?e.inputs[n]=Object.assign({},r):i&&(e.outputs[n]=Object.assign({},i))}))}));p(n)}catch(r){console.error("cannot parse")}}),[p,c]);return(0,i.jsxs)("div",{className:"base-part-editor",children:[(0,i.jsx)("div",{className:"form-row",children:(0,i.jsx)(u.FormGroup,{label:"Part Name",labelFor:"text-input",labelInfo:"(required)",children:(0,i.jsx)(u.InputGroup,{id:"part-name",disabled:e.idDisabled,placeholder:"Part ID",value:c.id,onChange:function(e){return C(e.target.value)}})})}),(0,i.jsx)(u.FormGroup,{label:"Required Inputs",children:(0,i.jsx)(d,{selectedItems:v,placeholder:"Enter input names here",items:[],tagRenderer:function(e){return e},onItemSelect:function(e){return _(e,"required")},onRemove:j,resetOnSelect:!0,itemRenderer:function(e){return(0,i.jsx)("span",{children:e})},createNewItemFromQuery:function(e){return e},createNewItemRenderer:t.renderCreateIOOption,fill:!0})}),!0!==e.hiddenOutputs?(0,i.jsx)(u.FormGroup,{label:"Outputs",children:(0,i.jsx)(d,{selectedItems:I,placeholder:"Enter output names here",items:[],tagRenderer:function(e){return e},onItemSelect:O,onRemove:w,resetOnSelect:!0,itemRenderer:function(e){return(0,i.jsx)("span",{children:e})},createNewItemFromQuery:function(e){return e},createNewItemRenderer:t.renderCreateIOOption,fill:!0})}):null,(0,i.jsx)(u.Checkbox,{checked:b,onChange:function(e){return h(e.target.checked)},children:"Show advanced options"}),(0,i.jsxs)(u.Collapse,{isOpen:b,children:[(0,i.jsx)(u.FormGroup,{label:"Optional Inputs",children:(0,i.jsx)(d,{selectedItems:m,placeholder:"Enter input names here",items:[],tagRenderer:function(e){return e},onItemSelect:function(e){return _(e,"optional")},onRemove:j,resetOnSelect:!0,itemRenderer:function(e){return(0,i.jsx)("span",{children:e})},createNewItemFromQuery:function(e){return e},createNewItemRenderer:t.renderCreateIOOption,fill:!0})}),(0,i.jsx)(u.FormGroup,{label:"Required-if-connected Inputs",children:(0,i.jsx)(d,{selectedItems:g,placeholder:"Enter input names here",items:[],tagRenderer:function(e){return e},onItemSelect:function(e){return _(e,"required-if-connected")},onRemove:j,resetOnSelect:!0,itemRenderer:function(e){return(0,i.jsx)("span",{children:e})},createNewItemFromQuery:function(e){return e},createNewItemRenderer:t.renderCreateIOOption,fill:!0})}),(0,i.jsx)(u.FormGroup,{label:"Completion Outputs",children:(0,i.jsx)(u.InputGroup,{id:"completion-outputs",placeholder:"completion outputs",value:(null===(n=c.completionOutputs)||void 0===n?void 0:n.join(","))||"",onChange:function(e){return P(e.target.value)}})}),(0,i.jsx)(u.FormGroup,{label:"Reactive Inputs",children:(0,i.jsx)(u.InputGroup,{id:"reactive-inputs",placeholder:"Reactive inputs",value:(null===(r=c.reactiveInputs)||void 0===r?void 0:r.join(","))||"",onChange:function(e){return x(e.target.value)}})})]}),(0,i.jsx)(u.FormGroup,{label:"Preview",children:(0,i.jsx)("div",{className:"preview-wrapper",children:(0,i.jsx)(l.PartPreview,{part:c})})})]})}},51424:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.metaChange=t.functionalChange=void 0;t.functionalChange=function(e){return{type:"functional",message:e}};t.metaChange=function(e){return void 0===e&&(e="n/a"),{type:"meta",message:e}}},63213:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InlineCodeModal=void 0;var u=n(24246),s=o(n(27378)),c=a(n(77324)),l=n(42272),d=a(n(60042)),p=n(52178),f=n(18265),v=n(70099),m="`Result is ${inputs.a + inputs.b}`";t.InlineCodeModal=s.memo((function(e){var t,n=e.initialValue,r=e.initialType,i=s.useState((0,f.isDefined)(n)?n:m),o=i[0],a=i[1],g=s.useState(r||f.InlineValuePartType.VALUE),y=g[0],b=g[1],h=(0,u.jsxs)("div",{children:[(0,u.jsxs)("p",{children:['You can add variables to by referrencing the "inputs" object.',(0,u.jsx)("br",{})," For example:",(0,u.jsx)(l.Code,{children:"`Hello {inputs.name}`"}),' will expose an input pin named "name"']}),(0,u.jsxs)("p",{children:["You can also use ternery expressions, arithmetic operators and more!",(0,u.jsx)("br",{}),"For example:",(0,u.jsx)(l.Code,{children:"inputs.a > inputs.b ? inputs.a + 42 : Math.random() * inputs.b"})]})]}),I=(0,u.jsxs)("span",{children:["Type in any valid JS value, such as ",(0,u.jsx)(l.Code,{children:"true"}),", ",(0,u.jsx)(l.Code,{children:"42"}),","," ",(0,u.jsx)(l.Code,{children:'["bob", "alice", "dave"]'}),".",(0,u.jsx)("br",{})," Dynamic inputs may also be used"]}),C=(0,u.jsxs)("span",{children:["Write any JS code and return a value.",(0,u.jsx)("br",{})," The returned value will be the output.",(0,u.jsx)("br",{})," Example:",(0,u.jsx)(l.Code,{children:"const a = inputs.a; const b = inputs.b; return Math.floor(a/b);"})]}),P=(0,p.getVariables)(o);return s.useEffect((function(){o===m&&y===f.InlineValuePartType.FUNCTION&&a("return "+m),o==="return "+m&&y===f.InlineValuePartType.VALUE&&a(m)}),[o,y]),(0,u.jsxs)(l.Dialog,{isOpen:!0,title:"Inline Value / Code",onClose:e.onCancel,className:"inline-code-modal",children:[(0,u.jsxs)("main",{className:(0,d.default)(l.Classes.DIALOG_BODY),onKeyDown:function(t){"Enter"===t.key&&t.metaKey&&e.onSubmit(y,o)},tabIndex:0,children:[(0,u.jsxs)(l.RadioGroup,{inline:!0,onChange:function(e){return b(e.target.value)},selectedValue:y,children:[(0,u.jsx)(l.Radio,{labelElement:(0,u.jsxs)(s.Fragment,{children:["Value"," ",(0,u.jsx)(v.Tooltip2,{content:I,placement:"top",children:(0,u.jsx)(l.Icon,{icon:"info-sign",intent:"primary"})})]}),value:f.InlineValuePartType.VALUE}),(0,u.jsx)(l.Radio,{labelElement:(0,u.jsxs)(s.Fragment,{children:["Function"," ",(0,u.jsx)(v.Tooltip2,{content:C,placement:"top",children:(0,u.jsx)(l.Icon,{icon:"info-sign",intent:"primary"})})]}),value:f.InlineValuePartType.FUNCTION})]}),(0,u.jsx)(c.default,{height:"80px",theme:"vs-dark",defaultLanguage:"javascript",value:o,onChange:function(e){return a(e||"")},onMount:function(e){e&&e.updateOptions({lineNumbers:"off",minimap:{enabled:!1}})}}),(t=o.includes("return"),t&&y===f.InlineValuePartType.VALUE?(0,u.jsx)(l.Callout,{intent:l.Intent.WARNING,children:'When using the "value" type you are not expected to return anything'}):t||y!==f.InlineValuePartType.FUNCTION?null:(0,u.jsxs)(l.Callout,{intent:l.Intent.DANGER,children:['When using the "function" type you are expected to'," ",(0,u.jsx)(l.Code,{children:"return"})," a value.",(0,u.jsx)("br",{}),"Example: ",(0,u.jsx)(l.Code,{children:"return 42 + Date.now();"})]})),(0,u.jsxs)(l.Callout,{intent:l.Intent.NONE,children:["Input pins detected:"," ",P.length?P.map((function(e){return(0,u.jsx)(l.Code,{children:e},e)})):"None",(0,u.jsx)(v.Tooltip2,{content:h,children:(0,u.jsx)(l.Icon,{icon:"info-sign",intent:l.Intent.PRIMARY})})]})]}),(0,u.jsx)("div",{className:l.Classes.DIALOG_FOOTER,children:(0,u.jsxs)("div",{className:l.Classes.DIALOG_FOOTER_ACTIONS,children:[(0,u.jsx)(l.Button,{onClick:e.onCancel,children:"Cancel"}),(0,u.jsx)(l.Button,{onClick:function(){return e.onSubmit(y,o)},intent:l.Intent.PRIMARY,className:"save-btn",children:"Save"})]})})]})}))},52178:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createInlineValuePart=t.getVariables=void 0;var r=n(18265),i=n(18265);t.getVariables=function(e){return(e.match(/inputs\.([a-zA-Z]\w*)/g)||[]).map((function(e){return e.replace(/inputs\./,"")}))};t.createInlineValuePart=function(e){var n=e.code,o=e.customView,a=e.partId,u=e.type,s=(0,t.getVariables)(n).reduce((function(e,t){var n;return Object.assign({},e,((n={})[t]=(0,r.partInput)(),n))}),{}),c={value:(0,r.partOutput)()},l=u===r.InlineValuePartType.FUNCTION?"const result = (function() { "+n+"}());\n  Promise.resolve(result).then(val => outputs.value.next(val))":"const result = ("+n+"); Promise.resolve(result).then(val => outputs.value.next(val))",d=btoa(n);return(0,i.inlineValuePart)({id:a||"Inline Code "+(0,r.randomInt)(99999),inputs:s,outputs:c,fnCode:l,customViewCode:o||n,dataBuilderSource:d,templateType:u,completionOutputs:["value"],defaultStyle:{size:"regular",icon:"code",cssOverride:{fontFamily:"monospace",fontWeight:"500"}},description:"Custom inline "+(u===r.InlineValuePartType.VALUE?"value":"function")})}},24935:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Omnibar=t.OmniBarCmdType=void 0;var u,s=n(24246),c=o(n(27378)),l=n(18264),d=n(18265),p=n(42272),f=a(n(60042));!function(e){e.ADD="add",e.ADD_VALUE="add-value",e.CREATE_CODE_PART="create-core-part",e.CREATE_GROUPED_PART="create-visual-part",e.IMPORT="import"}(u=t.OmniBarCmdType||(t.OmniBarCmdType={}));var v=[];t.Omnibar=function(e){var t=e.repo,n=c.useState(""),r=n[0],i=n[1],o=c.useState(null),a=o[0],m=o[1],g=c.useState([]),y=g[0],b=g[1];c.useEffect((function(){var e=(0,d.keys)(t).map((function(e){return{title:""+t[e].id,cmd:{type:u.ADD,data:e},extra:"current flow"}})),n=y.map((function(e){return{title:""+e.part.id,description:e.part.description,cmd:{type:u.IMPORT,data:e},extra:""+e.module}})),r={title:"Add inline value or code",suggestOnEmpty:!0,cmd:{type:u.ADD_VALUE}},i=[].concat(v,n,[r],e);m(i)}),[t,y]),c.useEffect((function(){e.onRequestImportables&&e.onRequestImportables(r).then((function(e){b(e)}))}),[e,r]);var h=c.useCallback((function(e,t){var n=t.handleClick,r=t.modifiers,i=(t.query,t.index);if(!r.matchesPredicate)return null;var o=""+e.title;return(0,s.jsx)(p.MenuItem,{active:r.active,disabled:r.disabled,onClick:n,text:(0,s.jsxs)("div",{className:(0,f.default)("omnibar-item",{active:r.active}),children:[(0,s.jsxs)("div",{className:"title",children:[o," ",e.extra?(0,s.jsx)("span",{className:"extra",children:e.extra}):null]}),e.description?(0,s.jsx)("div",{className:"description",children:e.description}):null]})},i)}),[]),I=c.useCallback((function(e,t){var n=e.toLowerCase().split("").map((function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")+".*"})).join(""),r=new RegExp(n);return!!t.title.toLowerCase().match(r)}),[]),C=c.useCallback((function(t){e.onCommand(t.cmd),e.onClose()}),[e]);return a?(0,s.jsx)(l.Omnibar,{query:r,onQueryChange:i,onClose:e.onClose,noResults:(0,s.jsx)(p.MenuItem,{disabled:!0,text:"No results."}),itemPredicate:I,isOpen:e.visible,items:a,initialContent:void 0,onItemSelect:C,itemRenderer:h,inputProps:{placeholder:"Search for parts or commands.."}}):null}},91312:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(2297),t)},2297:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default;Object.defineProperty(t,"__esModule",{value:!0}),t.usePorts=t.useConfirm=t.usePrompt=t.PortsContext=t.defaultPorts=void 0;var o,a=n(27378),u=function(){var e=i(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.defaultPorts={prompt:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=i(r().mark((function e(t){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.text,i=t.defaultValue,e.abrupt("return",prompt(""+n,i));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),openFile:(o=i(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)}),confirm:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=i(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.text,e.abrupt("return",confirm(n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),readFlow:u,saveFlow:u,resolveDeps:u,getImportables:u,onFlowChange:u},t.PortsContext=(0,a.createContext)(t.defaultPorts);t.usePrompt=function(){var e=(0,a.useContext)(t.PortsContext).prompt;return function(t,n){return e({text:t,defaultValue:n})}};t.useConfirm=function(){var e=(0,a.useContext)(t.PortsContext).confirm;return function(t){return e({text:t})}};t.usePorts=function(){return(0,a.useContext)(t.PortsContext)}},27234:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.groupSelected=void 0;var a=n(18265),u=o(n(63300)),s=n(78504),c=function(){var e=i(r().mark((function e(t,n,i,o,c){var l,d,p,f,v,m,g,y,b,h,I,C;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=n.instances,d=n.connections,p=l.filter((function(e){return t.includes(e.id)})),f=d.filter((function(e){var n=e.from,r=e.to;return-1!==t.indexOf(n.insId)||-1!==t.indexOf(r.insId)})),p.length){e.next=5;break}throw new Error("visual without selections");case 5:return e.next=7,(0,s.createGroup)(p,f,i,c);case 7:return v=e.sent,m=v.visualPart,g=v.renamedInputs,y=v.renamedOutputs,b=p.reduce((function(e,t){return(0,a.middlePos)(t.pos,e)}),l[0].pos),h="ref"===o?(0,a.partInstance)(m.id+"-ins",m.id,{},b):(0,a.inlinePartInstance)(m.id+"-ins",m,{},b),I=l.filter((function(e){return-1===t.indexOf(e.id)})),C=d.map((function(e){var t=e.from.insId+"."+e.from.pinId,n=e.to.insId+"."+e.to.pinId;return g[n]?Object.assign({},e,{to:{insId:h.id,pinId:g[n]}}):y[t]?Object.assign({},e,{from:{insId:h.id,pinId:y[t]}}):e})).filter((function(e){return-1===t.indexOf(e.from.insId)&&-1===t.indexOf(e.to.insId)})),e.abrupt("return",{newPart:m,currentPart:(0,u.default)(n,(function(e){e.instances=[].concat(I,[h]),e.connections=C}))});case 16:case"end":return e.stop()}}),e)})));return function(t,n,r,i,o){return e.apply(this,arguments)}}();t.groupSelected=c},96149:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(90412),t),i(n(12901),t),i(n(77437),t),i(n(40232),t),i(n(99457),t),i(n(51424),t),i(n(23489),t),i(n(69385),t),i(n(10934),t),i(n(4824),t),i(n(14648),t),i(n(26013),t),i(n(70030),t),i(n(11897),t),i(n(99743),t),i(n(57779),t),i(n(13011),t),i(n(12887),t)},60614:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserOnlyReactJson=void 0;var r=n(24246);t.BrowserOnlyReactJson=function(e){if("undefined"==typeof window)return null;var t=n(51366).default;return(0,r.jsx)(t,Object.assign({},e))}},26013:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyticsValueRenderer=void 0;var r=n(24246),i=n(18265),o=n(60614);t.AnalyticsValueRenderer=function(e){var t=e.val;try{var n=JSON.parse(t),a="object"==typeof n?n:{value:n},u=n&&[n.type,n.key,n.props,n.ref].every(i.isDefined),s=u?{jsxValue:n}:a;return(0,r.jsx)(o.BrowserOnlyReactJson,{src:s,name:!1,collapseStringsAfterLength:50,groupArraysAfterLength:5,collapsed:u})}catch(c){return(0,r.jsx)(o.BrowserOnlyReactJson,{src:{value:t},name:!1,collapseStringsAfterLength:50,groupArraysAfterLength:5})}}},78504:function(e,t,n){"use strict";var r=n(48357).default,i=n(45597).default,o=n(1145).default;Object.defineProperty(t,"__esModule",{value:!0}),t.createGroup=void 0;var a=n(18265),u=n(18265),s=n(99743),c=function(){var e=o(r().mark((function e(t,n,o,c){var l,d,p,f,v,m,g,y,b,h,I,C,P,x,_,j,O,w,E,S,T,k,D,N,M,R;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}throw new Error("cannot create group without instances");case 2:l=t.map((function(e){return e.id})),d=n.filter((function(e){var t=l.includes(e.from.insId),n=l.includes(e.to.insId);return!t&&n})).filter((function(e,t,n){return n.findIndex((function(t){return(0,u.connectionNodeEquals)(t.to,e.to)}))===t})),p=n.filter((function(e){var t=l.includes(e.from.insId),n=l.includes(e.to.insId);return t&&!n})).filter((function(e,t,n){return n.findIndex((function(t){return(0,u.connectionNodeEquals)(t.from,e.from)}))===t})),f={},v={},m={},g={},y=[],b={},h=i(d);case 12:if((I=h()).done){e.next=37;break}if(C=I.value,P=C.to.insId+"."+C.to.pinId,x=C.from.insId+"."+C.from.pinId,_=C.to.pinId,!m[x]){e.next=20;break}return y.push({from:(0,u.externalConnectionNode)(m[x]),to:(0,u.connectionNode)(C.to.insId,C.to.pinId)}),e.abrupt("continue",35);case 20:if(!b[_]){e.next=29;break}return e.next=23,c("Name this input ("+_+" of "+C.to.insId+") is already taken:");case 23:if(e.t1=e.sent,e.t1){e.next=26;break}e.t1="i"+(0,s.rnd)();case 26:e.t0=e.t1,e.next=30;break;case 29:e.t0=_;case 30:j=e.t0,f[P]=j,m[x]=j,y.push({from:(0,u.externalConnectionNode)(j),to:(0,u.connectionNode)(C.to.insId,C.to.pinId)}),b[j]=(0,u.partInput)();case 35:e.next=12;break;case 37:O={},w=i(p);case 39:if((E=w()).done){e.next=64;break}if(S=E.value,T=S.to.insId+"."+S.to.pinId,k=S.from.insId+"."+S.from.pinId,D=S.from.pinId,!g[T]){e.next=47;break}return y.push({from:(0,u.connectionNode)(S.from.insId,S.from.pinId),to:(0,u.externalConnectionNode)(g[T])}),e.abrupt("continue",62);case 47:if(!O[D]){e.next=56;break}return e.next=50,c("Name this output ("+D+" of "+S.from.insId+" is already taken:");case 50:if(e.t3=e.sent,e.t3){e.next=53;break}e.t3="i"+(0,s.rnd)();case 53:e.t2=e.t3,e.next=57;break;case 56:e.t2=D;case 57:N=e.t2,v[k]=N,g[T]=N,y.push({from:(0,u.connectionNode)(S.from.insId,S.from.pinId),to:(0,u.externalConnectionNode)(N)}),O[N]=(0,a.partOutput)();case 62:e.next=39;break;case 64:return t.reduce((function(e,t){return(0,u.middlePos)(t.pos,e)}),t[0].pos),M=n.filter((function(e){return l.includes(e.from.insId)&&l.includes(e.to.insId)})),R={id:o,inputs:b,outputs:O,instances:t,inputsPosition:(0,a.okeys)(b).reduce((function(e,t,n){var r;return Object.assign({},e,((r={})[t]={x:0+100*n,y:0},r))}),{}),outputsPosition:(0,a.okeys)(O).reduce((function(e,t,n){var r;return Object.assign({},e,((r={})[t]={x:0+100*n,y:400},r))}),{}),connections:[].concat(M,y),completionOutputs:(0,a.okeys)(O)},e.abrupt("return",{visualPart:R,renamedInputs:f,renamedOutputs:v});case 68:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}();t.createGroup=c},10934:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.highlightText=void 0;var r=n(24246);function i(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}t.highlightText=function(e,t){var n=0,o=t.split(/\s+/).filter((function(e){return e.length>0})).map(i);if(0===o.length)return[e];for(var a=new RegExp(o.join("|"),"gi"),u=[];;){var s=a.exec(e);if(!s)break;var c=s[0].length,l=e.slice(n,a.lastIndex-c);l.length>0&&u.push(l),n=a.lastIndex,u.push((0,r.jsx)("strong",{children:s[0]},n))}var d=e.slice(n);return d.length>0&&u.push(d),u}},99457:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Loader=void 0;var i=n(24246),o=r(n(44271));t.Loader=function(){return(0,i.jsx)(o.default,{type:"ball-clip-rotate",active:!0})}},12887:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0;var r=n(18265);t.logger=(0,r.debugLogger)("editor")},14264:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.preloadMonaco=void 0;var r=n(77324),i=n(12887),o=!1;t.preloadMonaco=function(){o||r.loader.init().then((function(){(0,i.logger)("monaco preloaded"),o=!0}))}},4824:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.appHotkeysConfig=t.hotkey=t.EditorHotkeyCmd=t.AppHotkeyCmd=void 0,function(e){e.SAVE_PART="save-part",e.NEW_PROJECT="new-project",e.SAVE_PROJECT="save-project",e.TOGGLE_SIDE="toggle-side",e.RUN="run",e.UNDO="undo"}(n=t.AppHotkeyCmd||(t.AppHotkeyCmd={})),function(e){e.SHOW_OMNIBAR="show-omnibar",e.CLEAR_SELECTION="clear-selection",e.DELETE_COMP="delete-comp",e.DUPLICATE_COMP="duplicate-comp",e.GROUP="group",e.SELECT_ALL="select-all",e.SELECT_CLOSEST="select-closest"}(t.EditorHotkeyCmd||(t.EditorHotkeyCmd={}));t.hotkey=function(e,t,n,r,i){return{combo:e,label:t,cmd:n,global:r,preventDefault:i}},t.appHotkeysConfig=[(0,t.hotkey)("shift+p","Save part",n.SAVE_PART,!0,!0),(0,t.hotkey)("shift+t","New project",n.NEW_PROJECT,!0,!0),(0,t.hotkey)("cmd+shift+s","Toggle side",n.TOGGLE_SIDE,!0,!0),(0,t.hotkey)("cmd+s","Toggle side",n.SAVE_PROJECT,!0,!0),(0,t.hotkey)("shift+r","Run",n.RUN,!0,!0)]},14648:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useHotkeys=void 0;var i=r(n(34618)),o=n(27378);t.useHotkeys=function(e,t,n,r,a){void 0===r&&(r=[]),void 0===a&&(a={});var u=(0,o.useCallback)((function(){n&&!n.current||t.apply(void 0,arguments)}),[].concat(r,[t]));(0,o.useEffect)((function(){return(0,i.default)(e,a,u),function(){return i.default.unbind(e,u)}}),[e,u,a])}},11897:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.safeSessionStorage=t.safeLocalstorage=void 0,t.safeLocalstorage={getItem:function(){try{var e;return(e=localStorage).getItem.apply(e,arguments)}catch(t){return null}},setItem:function(){try{var e;return(e=localStorage).setItem.apply(e,arguments)}catch(t){return null}}},t.safeSessionStorage={getItem:function(){try{var e;return(e=sessionStorage).getItem.apply(e,arguments)}catch(t){return null}},setItem:function(){try{var e;return(e=sessionStorage).setItem.apply(e,arguments)}catch(t){return null}}}},49040:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomReactTooltip=void 0;var i=n(24246),o=n(27378),a=r(n(31542)),u=r(n(87661));function s(e){var t=e.children,n=e.domNode;return a.default.createPortal(t,n)}t.CustomReactTooltip=function(e){var t=(0,o.useRef)();return(0,o.useEffect)((function(){t.current=document.createElement("div"),document.body.appendChild(t.current)}),[]),t.current?(0,i.jsx)(s,{domNode:t.current,children:(0,i.jsx)(u.default,Object.assign({},e))}):null},t.default=t.CustomReactTooltip},77437:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useLocalStorage=t.useResizePref=t.userPreferences=t.useUserPref=void 0;var a,u=o(n(27378)),s=n(12901),c=n(11897);t.useUserPref=function(e,n){var r=u.useState((function(){var r=t.userPreferences.getItem(e);return(0,s.isDefined)(r)?r:n})),i=r[0],o=r[1];u.useEffect((function(){var r=t.userPreferences.getItem(e),i=(0,s.isDefined)(r)?r:n;o(i)}),[e]);return[i,function(n){t.userPreferences.setItem(e,n),console.log("Saved",e,n),o(n)}]},t.userPreferences=(a=function(e){return"up."+e},{getItem:function(e){var t=c.safeLocalstorage.getItem(a(e))||"",n=c.safeSessionStorage.getItem(a(e))||"";try{return JSON.parse(n||t).value}catch(r){return}},setItem:function(e,t,n){void 0===n&&(n=!1);var r=n?sessionStorage:c.safeLocalstorage;try{var i=JSON.stringify({value:t});return r.setItem(a(e),i),!0}catch(o){return console.error("Error saving user preference",o),!1}}});t.useResizePref=function(e,n){var r="resize."+e;return(0,t.useUserPref)(r,n)};var l=function(e){var t=c.safeLocalstorage.getItem(e);if(!t)return null;try{return JSON.parse(t).value}catch(n){return null}};t.useLocalStorage=function(e,t){var n=u.useState(l(e)||t),r=n[0],i=n[1],o=u.useCallback((function(t){c.safeLocalstorage.setItem(e,JSON.stringify({value:t})),i(t)}),[e]);return u.useEffect((function(){l(e)||c.safeLocalstorage.setItem(e,JSON.stringify({value:t}))}),[e,t,o]),[r,o]}},99743:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.totalEnergy=t.itrPhysics=t.hookes=t.coulombs=t.vToStr=t.vNorm=t.vLen=t.vSub=t.vAdd=t.vDiv=t.vMul=t.vZero=t.rnd=t.vec=t.size=void 0;t.size=function(e,t){return{width:e,height:t}};t.vec=function(e,t){return{x:e,y:t}};t.rnd=function(e,t){return void 0===e&&(e=100),void 0===t&&(t=0),Math.floor(Math.random()*(e-t))+t},t.vZero={x:0,y:0};t.vMul=function(e,t){return{x:e.x*t,y:e.y*t}};t.vDiv=function(e,n){var r=e.x,i=e.y;return(0,t.vMul)({x:r,y:i},1/n)};t.vAdd=function(e,t){return{x:e.x+t.x,y:e.y+t.y}};t.vSub=function(e,n){return(0,t.vAdd)(e,(0,t.vMul)(n,-1))};t.vLen=function(e){var t=e.x,n=e.y;return Math.sqrt(t*t+n*n)};t.vNorm=function(e){return(0,t.vDiv)(e,(0,t.vLen)(e)||1)};t.vToStr=function(e){var t=e.x,n=e.y;return t.toFixed(1)+","+n.toFixed(1)};t.coulombs=function(e,n,r){var i=(0,t.vLen)((0,t.vSub)(e.p,n.p));if(0===i){var o=(0,t.vec)(2*Math.random()-1,2*Math.random()-1),a=e.m*n.m/Math.pow(10,2);return(0,t.vMul)(o,a*r)}var u=(0,t.vNorm)((0,t.vSub)(n.p,e.p)),s=e.m*n.m/Math.pow(i+.1,2);return(0,t.vMul)(u,s*r)};t.hookes=function(e,n,r,i,o){var a=(0,t.vLen)((0,t.vSub)(e.p,n.p)),u=(0,t.vNorm)((0,t.vSub)(e.p,n.p)),s=0;return a<r?s=r-a:a>i&&(s=i-a),(0,t.vMul)(u,o*s)};t.itrPhysics=function(e,n){var r=n.p,i=n.v,o=n.f,a=n.m,u=(0,t.vDiv)(o,a),s=e/1e3,c=(0,t.vAdd)((0,t.vMul)(u,s),i),l=(0,t.vAdd)((0,t.vMul)(c,s),r);return Object.assign({},n,{p:l,v:c,f:(0,t.vec)(0,0)})};t.totalEnergy=function(e){return e.reduce((function(e,n){var r=(0,t.vLen)(n.v);return e+.5*n.m*r*r}),0)}},40232:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateToast=t.toastMsg=t.AppToaster=void 0;var r=n(42272);t.AppToaster=function(){try{return r.Toaster.create({className:"app-toaster",position:r.Position.BOTTOM_RIGHT})}catch(e){return{}}}();t.toastMsg=function(e,n,r){return t.AppToaster.show({message:e,intent:n,timeout:r})};t.updateToast=function(e,n,r){return t.AppToaster.show({message:n,intent:r},e)}},12901:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.preventDefaultAnd=t.isLocal=t.fullTime=t.timeAgoFromDt=t.timeAgo=t.toString=t.isDefined=t.set=t.createOmap=t.toOmap=t.values=t.keys=t.entries=void 0;var i=n(13011),o=n(18265),a=r(n(61320));t.entries=function(e){return Object.keys(e).map((function(t){return[t,e[t]]}))};t.keys=function(e){return Object.keys(e)};t.values=function(e){return Object.keys(e).map((function(t){return e[t]}))};t.toOmap=function(e){return Array.from(e.entries()).reduce((function(e,t){var n,r=t[0],i=t[1];return Object.assign({},e,((n={})[r]=i,n))}),{})};t.createOmap=function(e){return void 0===e&&(e=[]),e.reduce((function(e,t){var n;return Object.assign({},e,((n={})[t[0]]=t[1],n))}),{})};t.set=function(e,t,n){e[t]=n};t.isDefined=function(e){return void 0!==e};t.toString=function(e){var t=typeof e;if(""===e)return"(empty string)";if((0,i.isJsxValue)(e))return"JSX Value";if((0,o.isStaticValueVisualPart)(e))return"Embedded Part";if((0,o.isEnvValue)(e))return(0,o.getEnvKeyFromValue)(e);if("object"===t)try{var n=JSON.stringify(e);return"{}"===n?"Empty object":n}catch(r){return"Object (cannot stringify)"}return""+e};t.timeAgo=function(e){return(0,a.default)(new Date(e)).fromNow()};t.timeAgoFromDt=function(e){return(0,a.default)(Date.now()-e).fromNow()};t.fullTime=function(e){return(0,a.default)(new Date(e)).toString()};t.isLocal=function(){return location.href.includes(":300")};t.preventDefaultAnd=function(e){return function(t){t.preventDefault(),e(t)}}},9631:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ActionButton=t.ActionsMenu=t.ActionType=void 0;var u,s=n(24246),c=n(70099),l=n(18265),d=a(n(27378)),p=n(14648),f=n(40232),v=n(70760),m=n(32330);!function(e){e.AddPart="add-part",e.RemovePart="remove-part",e.Group="group",e.Ungroup="ungroup",e.AddInlineValue="add-inline-value",e.Inspect="inspect"}(u=t.ActionType||(t.ActionType={}));t.ActionsMenu=function(e){var n=e.onAction,r=e.selectedInstances,i=e.repo,o=e.part,a=e.from,c=e.to,m=e.hotkeysEnabled,y=d.default.useState(!1),b=y[0],h=y[1],I=(0,d.useCallback)((function(){h(!1)}),[]),C=[];if(C.push(u.AddPart),C.push(u.AddInlineValue),1===r.length){var P=o.instances.find((function(e){return e.id===r[0]}));if(P)try{var x=(0,l.getPartDef)(P,i);(0,l.isVisualPart)(x)&&C.push(u.Ungroup)}catch(O){console.error("Could not find part with id "+r[0]+" - "+O)}else console.error("Could not find instance with id "+r[0])}r.length>0&&C.push(u.Group),(1===r.length||a||c)&&C.push(u.Inspect),r.length>0&&C.push(u.RemovePart);var _=(0,d.useCallback)((function(e,t){if("click"===t.type&&g[e].hotkey&&(0,f.toastMsg)((0,s.jsxs)(s.Fragment,{children:["Did you know? you can also use the hotkey ",(0,s.jsx)("kbd",{className:"hotkey",children:g[e].hotkey})," to ",g[e].text.replace(/^[A-Z]/,(function(e){return e.toLowerCase()}))]}),"info",4e3),e===u.AddPart)h(!0);else n({type:e,data:void 0})}),[n]);Object.entries(g).forEach((function(e){var t=e[0],n=e[1];n.hotkey&&(0,p.useHotkeys)(n.hotkey,(function(e){e.preventDefault(),_(t,e)}),m)}));var j=(0,d.useCallback)((function(e){n({type:u.AddPart,data:{importablePart:e}})}),[n]);return(0,s.jsxs)("div",{className:"actions-menu",children:[C.map((function(e){return(0,s.jsx)(t.ActionButton,{type:e,onClick:_},e)})),b?(0,s.jsx)(v.AddPartMenu,{onRequestImportables:e.onRequestImportables,onAddPart:j,onClose:I}):null]})};var g=((r={})[u.AddPart]={icon:m.addPartIcon,text:'Open the "add part" menu',hotkey:"a"},r[u.RemovePart]={icon:m.removePartIcon,text:"Remove selected instances",hotkey:"backspace"},r[u.Group]={icon:m.groupIcon,text:"Group selection into a new part",hotkey:"g"},r[u.Ungroup]={icon:m.ungroupIcon,text:"Ungroup selected visual part"},r[u.Inspect]={icon:m.inspectIcon,text:"Inspect data",hotkey:"i"},r[u.AddInlineValue]={icon:m.pencilIcon,text:"Add value / inline function",hotkey:"v"},r),y={icon:"",text:"N/A",hotkey:void 0};t.ActionButton=function(e){var t,n=e.onClick,r=e.type,i=(0,d.useCallback)((function(e){return n(r,e)}),[n,r]),o=null!==(t=g[r])&&void 0!==t?t:y,a=o.hotkey?(0,s.jsxs)("span",{children:[o.text," ",(0,s.jsx)("kbd",{className:"hotkey",children:o.hotkey})]}):o.text;return(0,s.jsx)("div",{className:"action-button",onClick:i,children:(0,s.jsx)(c.Tooltip2,{hoverOpenDelay:100,content:a,className:"icon-wrapper",popoverClassName:"action-button-tooltip",children:(0,s.jsx)("span",{dangerouslySetInnerHTML:{__html:o.icon}})})})}},17982:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AddPartMenu=t.AddPartMenuFilterTree=void 0;var u=n(24246),s=n(42272),c=n(70099),l=a(n(60042)),d=o(n(27378)),p=n(99457),f=n(61335),v=n(83696);t.AddPartMenuFilterTree=s.Tree.ofType();function m(e,t,n){var r=e.external.map((function(e){return{id:e.module,label:e.module,hasCaret:!0,nodeData:{type:"external",module:e.module},isSelected:"external"===(null==t?void 0:t.type)&&t.module===e.module,isExpanded:n.has(e.module),childNodes:e.namespaces.map((function(r){return{id:e.module+"/"+r,label:r,hasCaret:!1,isSelected:"external"===(null==t?void 0:t.type)&&t.module===e.module&&t.namespace===r,isExpanded:n.has(e.module+"/"+r),nodeData:{type:"external",module:e.module,namespace:r}}}))}})),i={id:"internal",label:"Current Project",nodeData:{type:"internal"},isExpanded:n.has("internal"),hasCaret:!0,isSelected:"internal"===t.type,childNodes:e.internal.files.map((function(e){return{id:e,label:e,isSelected:"internal"===t.type&&t.file===e,hasCaret:!1,isExpanded:n.has(e),nodeData:{type:"internal",file:e}}}))};return[].concat(r,[i])}function g(e){return/\.flyde(\.[jt]s)?$/.test(e.module)}t.AddPartMenu=function(e){var n=e.onRequestImportables,r=e.onAddPart,i=e.onClose,o=d.default.useState(),a=o[0],y=o[1],b=d.default.useState(new Set),h=b[0],I=b[1],C=d.default.useState(""),P=C[0],x=C[1],_=d.default.useState({type:"all"}),j=_[0],O=_[1],w=d.default.useState(null),E=w[0],S=w[1],T=d.default.useState(null),k=T[0],D=T[1],N=d.default.useState(null),M=N[0],R=N[1],A=(0,d.useCallback)((function(e){h.add(e.id),I(new Set(h))}),[h]),V=(0,d.useCallback)((function(e){h.delete(e.id),I(new Set(h))}),[h]),H=(0,d.useCallback)((function(e){r(e),i()}),[r,i]);(0,d.useEffect)((function(){D(null==a?void 0:a.filter((function(e){var t;if(j)if("external"===j.type){if((e.module!==j.module||j.namespace)&&e.part.namespace!==j.namespace)return!1}else if("internal"===j.type&&(!g(e)||j.file&&e.module!==j.file))return!1;return!P||(e.part.id+" "+(null!==(t=e.part.namespace)&&void 0!==t?t:"")+" "+e.part.description).toLowerCase().includes(P.toLowerCase())})))}),[a,j,P]),(0,d.useEffect)((function(){n().then((function(e){var t=e.filter((function(e){return!g(e)})).reduce((function(e,t){var n,r,i;null!==(n=e[i=t.module])&&void 0!==n||(e[i]=[]);var o=null!==(r=t.part.namespace)&&void 0!==r?r:"";return e[t.module].includes(o)||e[t.module].push(o),e}),{}),n=e.filter(g).map((function(e){return e.module}));S({external:Object.entries(t).map((function(e){return{module:e[0],namespaces:e[1]}})),internal:{files:n}}),y(e),I(new Set(["internal"].concat(Object.keys(t))))}))}),[n]);var z=(0,d.useCallback)((function(e){switch(e.key){case"ArrowDown":case"ArrowUp":if(e.preventDefault(),k&&!M)return void R(k["ArrowDown"===e.key?0:k.length-1]);if(k&&M){var t=k.findIndex((function(e){return e===M})),n="ArrowDown"===e.key?t+1:t-1;n=(n=n<0?k.length-1:n)>=k.length?0:n,R(k[n])}break;case"Enter":M&&H(M)}}),[k,M,H]),G=(0,d.useCallback)((function(e){var t=e.nodeData;JSON.stringify(t)===JSON.stringify(j)?"external"===t.type?t.namespace?O({type:"external",module:t.module}):O({type:"all"}):"internal"===t.type&&(t.file?O({type:"internal"}):O({type:"all"})):O(t)}),[j]);return(0,u.jsx)(s.Dialog,{isOpen:!0,title:"Add Part Menu",onClose:e.onClose,className:"add-part-menu",isCloseButtonShown:!0,children:(0,u.jsxs)("main",{className:(0,l.default)(s.Classes.DIALOG_BODY),children:[(0,u.jsx)("header",{children:(0,u.jsxs)("div",{className:"bp3-input-group",children:[(0,u.jsx)(s.Icon,{icon:"search"}),(0,u.jsx)("input",{className:"bp3-input",type:"search",placeholder:"Search input",dir:"auto",autoFocus:!0,onChange:function(e){return x(e.target.value)},value:P,onKeyDown:z})]})}),(0,u.jsx)("div",{className:"content-wrapper",children:a?(0,u.jsxs)(d.default.Fragment,{children:[(0,u.jsxs)("aside",{children:[(0,u.jsxs)("div",{className:"filter-header",children:["Filter by package"," ",(0,u.jsx)(c.Tooltip2,{content:(0,u.jsxs)("span",{children:["Click to learn more about how packages work in Flyde"," "]}),hoverCloseDelay:1500,children:(0,u.jsx)("a",{target:"_blank",href:"https://www.flyde.dev/docs/packages",rel:"noreferrer",children:(0,u.jsx)(s.Icon,{icon:"help",intent:"primary",iconSize:12})})})]}),(0,u.jsx)("div",{className:"tree-container",children:(0,u.jsx)(t.AddPartMenuFilterTree,{contents:m(E,j,h),onNodeCollapse:V,onNodeExpand:A,onNodeClick:G,className:s.Classes.ELEVATION_0})})]}),(0,u.jsx)("main",{children:k?0===k.length?(0,u.jsxs)("div",{className:"no-results",children:[(0,u.jsx)(v.AddPartMenuResultsSummary,{filter:j,onChangeFilter:O,query:P,onChangeQuery:x,resultsCount:k.length}),(0,u.jsxs)(s.Callout,{className:"callout",intent:"primary",children:["Can't find a suitable part? Create one yourself! ",(0,u.jsx)("a",{href:"https://www.flyde.dev/docs/code-parts",target:"_blank",rel:"noreferrer",children:"Learn more"})]})]}):(0,u.jsxs)(d.default.Fragment,{children:[(0,u.jsx)(v.AddPartMenuResultsSummary,{filter:j,onChangeFilter:O,query:P,onChangeQuery:x,resultsCount:k.length}),(0,u.jsx)("div",{className:"results",children:k.map((function(e){return(0,u.jsx)(f.AddPartMenuListItem,{importablePart:e,onAdd:H,selected:(null==M?void 0:M.part)===e.part,onSelect:R,onSetFilter:O},e.part.id+e.module)}))})]}):(0,u.jsx)(p.Loader,{})})]}):(0,u.jsx)(p.Loader,{})})]})})}},59021:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AddPartMenuListItem=void 0;var u=n(24246),s=n(42272),c=a(n(60042)),l=o(n(27378));t.AddPartMenuListItem=function(e){var t=e.importablePart,n=e.onSetFilter,r=e.onAdd,i=e.onSelect,o=t.part,a=t.module,d=o.id,p=o.description,f=l.default.useRef(null);l.default.useEffect((function(){e.selected&&f.current&&f.current.scrollIntoView({block:"center"})}),[e.selected]);var v=(0,l.useCallback)((function(){r(t)}),[r,t]),m=(0,l.useCallback)((function(){i(t)}),[i,t]);return(0,u.jsxs)("div",{className:(0,c.default)("add-part-menu-list-item",{selected:e.selected}),ref:f,onClick:m,children:[(0,u.jsxs)("div",{className:"content",children:[(0,u.jsxs)("header",{children:[(0,u.jsx)("span",{className:"id",children:d}),(0,u.jsxs)(s.Tag,{interactive:!0,onClick:function(){return n({type:"external",module:a,namespace:o.namespace})},className:"source",minimal:!0,children:[a,o.namespace?" / "+o.namespace:null]})]}),(0,u.jsx)("div",{className:"description",children:p||(0,u.jsx)("em",{children:"No description"})})]}),(0,u.jsx)("aside",{children:(0,u.jsx)(s.Button,{onClick:v,children:"Add"})})]})}},61335:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(59021),t)},53972:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddPartMenuResultsSummary=void 0;var r=n(24246),i=n(42272);t.AddPartMenuResultsSummary=function(e){var t=e.resultsCount,n=e.query,o=e.filter,a=e.onChangeFilter,u=e.onChangeQuery;return(0,r.jsxs)("div",{className:"add-part-menu-results-summary",children:[t?"Showing "+t+" result"+(t>1?"s":""):"No results found","\xa0",n?(0,r.jsxs)(r.Fragment,{children:["matching query\xa0",(0,r.jsxs)(i.Tag,{minimal:!0,interactive:!0,onRemove:function(){return u("")},children:['"',n,'"']})]}):null,"all"===o.type?null:"external"===o.type?(0,r.jsxs)(r.Fragment,{children:["from \xa0",(0,r.jsxs)(i.Tag,{minimal:!0,interactive:!0,onRemove:function(){return a({type:"all"})},children:["package ",o.module,o.namespace?" / "+o.namespace:null]})]}):(0,r.jsxs)(r.Fragment,{children:["from \xa0",(0,r.jsxs)(i.Tag,{minimal:!0,interactive:!0,onRemove:function(){return a({type:"all"})},children:["\xa0this project ",o.file?" / "+o.file:null]})]})]})}},83696:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(53972),t)},70760:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(17982),t)},32330:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pencilIcon=t.ungroupIcon=t.groupIcon=t.inspectIcon=t.removePartIcon=t.addPartIcon=void 0,t.addPartIcon='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M15 7H9V1C9 0.734784 8.89464 0.48043 8.70711 0.292893C8.51957 0.105357 8.26522 0 8 0C7.73478 0 7.48043 0.105357 7.29289 0.292893C7.10536 0.48043 7 0.734784 7 1V7H1C0.734784 7 0.48043 7.10536 0.292893 7.29289C0.105357 7.48043 0 7.73478 0 8C0 8.26522 0.105357 8.51957 0.292893 8.70711C0.48043 8.89464 0.734784 9 1 9H7V15C7 15.2652 7.10536 15.5196 7.29289 15.7071C7.48043 15.8946 7.73478 16 8 16C8.26522 16 8.51957 15.8946 8.70711 15.7071C8.89464 15.5196 9 15.2652 9 15V9H15C15.2652 9 15.5196 8.89464 15.7071 8.70711C15.8946 8.51957 16 8.26522 16 8C16 7.73478 15.8946 7.48043 15.7071 7.29289C15.5196 7.10536 15.2652 7 15 7Z"/>\n</svg>',t.removePartIcon='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M10.0002 18C10.2655 18 10.5198 17.8946 10.7074 17.7071C10.8949 17.5196 11.0002 17.2652 11.0002 17V11C11.0002 10.7348 10.8949 10.4804 10.7074 10.2929C10.5198 10.1054 10.2655 10 10.0002 10C9.73503 10 9.48067 10.1054 9.29314 10.2929C9.1056 10.4804 9.00024 10.7348 9.00024 11V17C9.00024 17.2652 9.1056 17.5196 9.29314 17.7071C9.48067 17.8946 9.73503 18 10.0002 18ZM20.0002 6H16.0002V5C16.0002 4.20435 15.6842 3.44129 15.1216 2.87868C14.559 2.31607 13.7959 2 13.0002 2H11.0002C10.2046 2 9.44153 2.31607 8.87892 2.87868C8.31631 3.44129 8.00024 4.20435 8.00024 5V6H4.00024C3.73503 6 3.48067 6.10536 3.29314 6.29289C3.1056 6.48043 3.00024 6.73478 3.00024 7C3.00024 7.26522 3.1056 7.51957 3.29314 7.70711C3.48067 7.89464 3.73503 8 4.00024 8H5.00024V19C5.00024 19.7956 5.31631 20.5587 5.87892 21.1213C6.44153 21.6839 7.20459 22 8.00024 22H16.0002C16.7959 22 17.559 21.6839 18.1216 21.1213C18.6842 20.5587 19.0002 19.7956 19.0002 19V8H20.0002C20.2655 8 20.5198 7.89464 20.7074 7.70711C20.8949 7.51957 21.0002 7.26522 21.0002 7C21.0002 6.73478 20.8949 6.48043 20.7074 6.29289C20.5198 6.10536 20.2655 6 20.0002 6ZM10.0002 5C10.0002 4.73478 10.1056 4.48043 10.2931 4.29289C10.4807 4.10536 10.735 4 11.0002 4H13.0002C13.2655 4 13.5198 4.10536 13.7074 4.29289C13.8949 4.48043 14.0002 4.73478 14.0002 5V6H10.0002V5ZM17.0002 19C17.0002 19.2652 16.8949 19.5196 16.7074 19.7071C16.5198 19.8946 16.2655 20 16.0002 20H8.00024C7.73503 20 7.48067 19.8946 7.29314 19.7071C7.1056 19.5196 7.00024 19.2652 7.00024 19V8H17.0002V19ZM14.0002 18C14.2655 18 14.5198 17.8946 14.7074 17.7071C14.8949 17.5196 15.0002 17.2652 15.0002 17V11C15.0002 10.7348 14.8949 10.4804 14.7074 10.2929C14.5198 10.1054 14.2655 10 14.0002 10C13.735 10 13.4807 10.1054 13.2931 10.2929C13.1056 10.4804 13.0002 10.7348 13.0002 11V17C13.0002 17.2652 13.1056 17.5196 13.2931 17.7071C13.4807 17.8946 13.735 18 14.0002 18Z"/>\n</svg>',t.inspectIcon='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M21.07 16.8302L19 14.7102C18.5547 14.2869 17.9931 14.0065 17.3872 13.9049C16.7813 13.8034 16.1589 13.8853 15.6 14.1402L14.7 13.2402C15.7605 11.8231 16.2449 10.0569 16.0555 8.29702C15.8662 6.53718 15.0172 4.91441 13.6794 3.75539C12.3417 2.59636 10.6145 1.98714 8.84565 2.05037C7.07678 2.1136 5.39754 2.84458 4.14596 4.09615C2.89438 5.34773 2.1634 7.02698 2.10017 8.79585C2.03695 10.5647 2.64617 12.2919 3.80519 13.6296C4.96421 14.9674 6.58699 15.8164 8.34683 16.0057C10.1067 16.1951 11.8729 15.7107 13.29 14.6502L14.18 15.5402C13.8951 16.0998 13.793 16.7348 13.8881 17.3555C13.9831 17.9762 14.2706 18.5515 14.71 19.0002L16.83 21.1202C17.3925 21.682 18.155 21.9975 18.95 21.9975C19.745 21.9975 20.5075 21.682 21.07 21.1202C21.3557 20.8408 21.5828 20.5071 21.7378 20.1388C21.8928 19.7704 21.9726 19.3748 21.9726 18.9752C21.9726 18.5756 21.8928 18.1799 21.7378 17.8116C21.5828 17.4432 21.3557 17.1096 21.07 16.8302V16.8302ZM12.59 12.5902C11.8902 13.2882 10.9993 13.7631 10.0297 13.955C9.06017 14.1469 8.05549 14.0472 7.14259 13.6684C6.2297 13.2896 5.44955 12.6487 4.9007 11.8267C4.35185 11.0048 4.05893 10.0386 4.05893 9.05019C4.05893 8.06182 4.35185 7.09562 4.9007 6.27365C5.44955 5.45168 6.2297 4.81081 7.14259 4.432C8.05549 4.05319 9.06017 3.95343 10.0297 4.14534C10.9993 4.33724 11.8902 4.81219 12.59 5.51019C13.0556 5.97464 13.4251 6.5264 13.6771 7.13385C13.9292 7.7413 14.0589 8.39251 14.0589 9.05019C14.0589 9.70786 13.9292 10.3591 13.6771 10.9665C13.4251 11.574 13.0556 12.1257 12.59 12.5902V12.5902ZM19.66 19.6602C19.567 19.7539 19.4564 19.8283 19.3346 19.8791C19.2127 19.9298 19.082 19.956 18.95 19.956C18.818 19.956 18.6873 19.9298 18.5654 19.8791C18.4436 19.8283 18.333 19.7539 18.24 19.6602L16.12 17.5402C16.0263 17.4472 15.9519 17.3366 15.9011 17.2148C15.8503 17.0929 15.8242 16.9622 15.8242 16.8302C15.8242 16.6982 15.8503 16.5675 15.9011 16.4456C15.9519 16.3237 16.0263 16.2131 16.12 16.1202C16.213 16.0265 16.3236 15.9521 16.4454 15.9013C16.5673 15.8505 16.698 15.8244 16.83 15.8244C16.962 15.8244 17.0927 15.8505 17.2146 15.9013C17.3364 15.9521 17.447 16.0265 17.54 16.1202L19.66 18.2402C19.7537 18.3331 19.8281 18.4437 19.8789 18.5656C19.9297 18.6875 19.9558 18.8182 19.9558 18.9502C19.9558 19.0822 19.9297 19.2129 19.8789 19.3348C19.8281 19.4566 19.7537 19.5672 19.66 19.6602V19.6602Z"/>\n</svg>\n',t.groupIcon='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M16 9.99998H14V7.99998C14 7.73477 13.8946 7.48041 13.7071 7.29288C13.5196 7.10534 13.2652 6.99998 13 6.99998H7.99998C7.73477 6.99998 7.48041 7.10534 7.29288 7.29288C7.10534 7.48041 6.99998 7.73477 6.99998 7.99998V13C6.99998 13.2652 7.10534 13.5196 7.29288 13.7071C7.48041 13.8946 7.73477 14 7.99998 14H9.99998V16C9.99998 16.2652 10.1053 16.5196 10.2929 16.7071C10.4804 16.8946 10.7348 17 11 17H16C16.2652 17 16.5196 16.8946 16.7071 16.7071C16.8946 16.5196 17 16.2652 17 16V11C17 10.7348 16.8946 10.4804 16.7071 10.2929C16.5196 10.1053 16.2652 9.99998 16 9.99998ZM9.99998 11V12H8.99998V8.99998H12V9.99998H11C10.7348 9.99998 10.4804 10.1053 10.2929 10.2929C10.1053 10.4804 9.99998 10.7348 9.99998 11ZM15 15H12V12H15V15ZM21 18.28V5.71998C21.2704 5.56955 21.5023 5.3584 21.6773 5.10317C21.8523 4.84793 21.9657 4.55556 22.0085 4.24906C22.0514 3.94257 22.0225 3.63031 21.9242 3.33686C21.8259 3.04342 21.6608 2.77679 21.442 2.55795C21.2232 2.33912 20.9565 2.17406 20.6631 2.07575C20.3697 1.97745 20.0574 1.94858 19.7509 1.99143C19.4444 2.03427 19.152 2.14766 18.8968 2.32267C18.6416 2.49768 18.4304 2.72953 18.28 2.99998H5.71998C5.56955 2.72953 5.3584 2.49768 5.10317 2.32267C4.84793 2.14766 4.55556 2.03427 4.24906 1.99143C3.94257 1.94858 3.63031 1.97745 3.33686 2.07575C3.04342 2.17406 2.77679 2.33912 2.55795 2.55795C2.33912 2.77679 2.17406 3.04342 2.07575 3.33686C1.97745 3.63031 1.94858 3.94257 1.99143 4.24906C2.03427 4.55556 2.14766 4.84793 2.32267 5.10317C2.49768 5.3584 2.72953 5.56955 2.99998 5.71998V18.28C2.72953 18.4304 2.49768 18.6416 2.32267 18.8968C2.14766 19.152 2.03427 19.4444 1.99143 19.7509C1.94858 20.0574 1.97745 20.3697 2.07575 20.6631C2.17406 20.9565 2.33912 21.2232 2.55795 21.442C2.77679 21.6608 3.04342 21.8259 3.33686 21.9242C3.63031 22.0225 3.94257 22.0514 4.24906 22.0085C4.55556 21.9657 4.84793 21.8523 5.10317 21.6773C5.3584 21.5023 5.56955 21.2704 5.71998 21H18.28C18.4304 21.2704 18.6416 21.5023 18.8968 21.6773C19.152 21.8523 19.4444 21.9657 19.7509 22.0085C20.0574 22.0514 20.3697 22.0225 20.6631 21.9242C20.9565 21.8259 21.2232 21.6608 21.442 21.442C21.6608 21.2232 21.8259 20.9565 21.9242 20.6631C22.0225 20.3697 22.0514 20.0574 22.0085 19.7509C21.9657 19.4444 21.8523 19.152 21.6773 18.8968C21.5023 18.6416 21.2704 18.4304 21 18.28ZM19 18.28C18.6993 18.4504 18.4504 18.6993 18.28 19H5.71998C5.54956 18.6993 5.30071 18.4504 4.99998 18.28V5.71998C5.30071 5.54956 5.54956 5.30071 5.71998 4.99998H18.28C18.4504 5.30071 18.6993 5.54956 19 5.71998V18.28Z"/>\n</svg>\n',t.ungroupIcon='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M21.0002 18.28V11.72C21.2707 11.5695 21.5025 11.3584 21.6775 11.1032C21.8525 10.8479 21.9659 10.5556 22.0088 10.2491C22.0516 9.94257 22.0228 9.63031 21.9245 9.33686C21.8262 9.04342 21.6611 8.77679 21.4423 8.55795C21.2234 8.33912 20.9568 8.17406 20.6633 8.07575C20.3699 7.97745 20.0576 7.94858 19.7511 7.99143C19.4447 8.03427 19.1523 8.14766 18.897 8.32267C18.6418 8.49768 18.4307 8.72953 18.2802 8.99998H15.0002V5.71998C15.2707 5.56955 15.5025 5.3584 15.6775 5.10317C15.8525 4.84793 15.9659 4.55556 16.0088 4.24906C16.0516 3.94257 16.0228 3.63031 15.9245 3.33686C15.8262 3.04342 15.6611 2.77679 15.4423 2.55795C15.2234 2.33912 14.9568 2.17406 14.6633 2.07575C14.3699 1.97745 14.0576 1.94858 13.7511 1.99143C13.4447 2.03427 13.1523 2.14766 12.897 2.32267C12.6418 2.49768 12.4307 2.72953 12.2802 2.99998H5.72023C5.56979 2.72953 5.35865 2.49768 5.10341 2.32267C4.84817 2.14766 4.5558 2.03427 4.24931 1.99143C3.94281 1.94858 3.63055 1.97745 3.33711 2.07575C3.04366 2.17406 2.77703 2.33912 2.5582 2.55795C2.33937 2.77679 2.1743 3.04342 2.076 3.33686C1.97769 3.63031 1.94883 3.94257 1.99167 4.24906C2.03452 4.55556 2.14791 4.84793 2.32291 5.10317C2.49792 5.3584 2.72977 5.56955 3.00023 5.71998V12.28C2.72977 12.4304 2.49792 12.6416 2.32291 12.8968C2.14791 13.152 2.03452 13.4444 1.99167 13.7509C1.94883 14.0574 1.97769 14.3697 2.076 14.6631C2.1743 14.9565 2.33937 15.2232 2.5582 15.442C2.77703 15.6608 3.04366 15.8259 3.33711 15.9242C3.63055 16.0225 3.94281 16.0514 4.24931 16.0085C4.5558 15.9657 4.84817 15.8523 5.10341 15.6773C5.35865 15.5023 5.56979 15.2704 5.72023 15H9.00023V18.28C8.72977 18.4304 8.49792 18.6416 8.32291 18.8968C8.14791 19.152 8.03452 19.4444 7.99167 19.7509C7.94883 20.0574 7.97769 20.3697 8.076 20.6631C8.1743 20.9565 8.33937 21.2232 8.5582 21.442C8.77703 21.6608 9.04366 21.8259 9.33711 21.9242C9.63055 22.0225 9.94281 22.0514 10.2493 22.0085C10.5558 21.9657 10.8482 21.8523 11.1034 21.6773C11.3586 21.5023 11.5698 21.2704 11.7202 21H18.2802C18.4307 21.2704 18.6418 21.5023 18.897 21.6773C19.1523 21.8523 19.4447 21.9657 19.7511 22.0085C20.0576 22.0514 20.3699 22.0225 20.6633 21.9242C20.9568 21.8259 21.2234 21.6608 21.4423 21.442C21.6611 21.2232 21.8262 20.9565 21.9245 20.6631C22.0228 20.3697 22.0516 20.0574 22.0088 19.7509C21.9659 19.4444 21.8525 19.152 21.6775 18.8968C21.5025 18.6416 21.2707 18.4304 21.0002 18.28ZM8.00023 9.99998C8.00233 10.349 8.09574 10.6914 8.27118 10.9932C8.44661 11.2949 8.69795 11.5455 9.00023 11.72V13H5.72023C5.5498 12.6993 5.30096 12.4504 5.00023 12.28V5.71998C5.30096 5.54956 5.5498 5.30071 5.72023 4.99998H12.2802C12.4507 5.30071 12.6995 5.54956 13.0002 5.71998V8.99998H11.7202C11.4975 8.62457 11.1581 8.33233 10.7538 8.16784C10.3495 8.00335 9.90245 7.97565 9.48092 8.08896C9.05939 8.20228 8.6865 8.45039 8.41915 8.79543C8.15181 9.14047 8.00468 9.56351 8.00023 9.99998V9.99998ZM13.0002 11V12.28C12.6995 12.4504 12.4507 12.6993 12.2802 13H11.0002V11.72C11.301 11.5496 11.5498 11.3007 11.7202 11H13.0002ZM19.0002 18.28C18.6995 18.4504 18.4507 18.6993 18.2802 19H11.7202C11.5498 18.6993 11.301 18.4504 11.0002 18.28V15H12.2802C12.4307 15.2704 12.6418 15.5023 12.897 15.6773C13.1523 15.8523 13.4447 15.9657 13.7511 16.0085C14.0576 16.0514 14.3699 16.0225 14.6633 15.9242C14.9568 15.8259 15.2234 15.6608 15.4423 15.442C15.6611 15.2232 15.8262 14.9565 15.9245 14.6631C16.0228 14.3697 16.0516 14.0574 16.0088 13.7509C15.9659 13.4444 15.8525 13.152 15.6775 12.8968C15.5025 12.6416 15.2707 12.4304 15.0002 12.28V11H18.2802C18.4507 11.3007 18.6995 11.5496 19.0002 11.72V18.28Z"/>\n</svg>\n',t.pencilIcon='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M5 17.9999H9.24C9.37161 18.0007 9.50207 17.9755 9.62391 17.9257C9.74574 17.8759 9.85656 17.8026 9.95 17.7099L16.87 10.7799L19.71 7.99994C19.8037 7.90698 19.8781 7.79637 19.9289 7.67452C19.9797 7.55266 20.0058 7.42195 20.0058 7.28994C20.0058 7.15793 19.9797 7.02722 19.9289 6.90536C19.8781 6.7835 19.8037 6.6729 19.71 6.57994L15.47 2.28994C15.377 2.19621 15.2664 2.12182 15.1446 2.07105C15.0227 2.02028 14.892 1.99414 14.76 1.99414C14.628 1.99414 14.4973 2.02028 14.3754 2.07105C14.2536 2.12182 14.143 2.19621 14.05 2.28994L11.23 5.11994L4.29 12.0499C4.19732 12.1434 4.12399 12.2542 4.07423 12.376C4.02446 12.4979 3.99924 12.6283 4 12.7599V16.9999C4 17.2652 4.10536 17.5195 4.29289 17.707C4.48043 17.8946 4.73478 17.9999 5 17.9999ZM14.76 4.40994L17.59 7.23994L16.17 8.65994L13.34 5.82994L14.76 4.40994ZM6 13.1699L11.93 7.23994L14.76 10.0699L8.83 15.9999H6V13.1699ZM21 19.9999H3C2.73478 19.9999 2.48043 20.1053 2.29289 20.2928C2.10536 20.4804 2 20.7347 2 20.9999C2 21.2652 2.10536 21.5195 2.29289 21.707C2.48043 21.8946 2.73478 21.9999 3 21.9999H21C21.2652 21.9999 21.5196 21.8946 21.7071 21.707C21.8946 21.5195 22 21.2652 22 20.9999C22 20.7347 21.8946 20.4804 21.7071 20.2928C21.5196 20.1053 21.2652 19.9999 21 19.9999Z"/>\n</svg>'},71362:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(9631),t)},41304:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VisualPartEditor=t.defaultBoardData=t.defaultViewPort=t.PART_HEIGHT=void 0;var c=n(24246),l=u(n(27378)),d=n(18265),p=n(57768),f=n(95160),v=n(12901),m=n(87944),g=n(13011),y=n(63300),b=n(27378),h=n(14648),I=s(n(54037)),C=n(42272),P=n(43318),x=n(99743),_=n(29841),j=n(18265),O=n(5681),w=n(94e3),E=n(14264),S=n(40232),T=n(51424),k=n(63213),D=n(52178),N=s(n(98784)),M=n(27234),R=n(91312),A=s(n(60042)),V=n(24398),H=n(75012),z=n(97841),G=n(3065),q=n(41978),F=n(9631),L=l.memo(C.Slider),B=function(e){return null};t.PART_HEIGHT=28;t.defaultViewPort={pos:{x:0,y:0},zoom:1},t.defaultBoardData={selected:[],viewPort:t.defaultViewPort,lastMousePos:{x:0,y:0}},t.VisualPartEditor=l.memo(l.forwardRef((function(e,n){var o,a=e.onChangePart,u=e.partIoEditable,s=e.onCopy,W=e.onGoToPartDef,J=e.onRequestHistory,Z=e.onInspectPin,Y=e.boardData,$=e.onChangeBoardData,X=e.insId,Q=e.part,K=e.onShowOmnibar,ee=e.resolvedFlow,te=e.onImportPart,ne=e.queuedInputsData,re=e.parentViewport||t.defaultViewPort,ie=(0,b.useState)(Object.assign({},ee.dependencies,((o={})[ee.main.id]=ee.main,o))),oe=ie[0],ae=ie[1];(0,b.useEffect)((function(){var e;ae(Object.assign({},ee.dependencies,((e={})[ee.main.id]=ee.main,e)))}),[ee]);var ue=Y.selected,se=Y.from,ce=Y.to,le=Q.instances,de=Q.connections,pe=Q.inputsPosition,fe=Q.outputsPosition,ve=Q.inputs,me=Q.outputs,ge=(0,b.useState)(),ye=ge[0],be=ge[1],he=(0,b.useState)(),Ie=he[0],Ce=he[1],Pe=(0,b.useState)(0),xe=Pe[0],_e=Pe[1],je=(0,b.useState)(),Oe=je[0],we=je[1],Ee=(0,b.useState)(!1),Se=Ee[0],Te=Ee[1],ke=(0,b.useState)(),De=ke[0],Ne=ke[1],Me=(0,b.useState)(),Re=Me[0],Ae=Me[1],Ve=(0,b.useState)(),He=Ve[0],ze=Ve[1],Ge=(0,b.useState)(),qe=Ge[0],Fe=Ge[1],Le=(0,b.useRef)();(0,m.useDidMount)((function(){Le.current=nt.current.querySelector(".inline-editor-portal-root")}));var Be=(0,R.useConfirm)(),Ue=(0,R.usePrompt)(),We=Y.viewPort,Je=(0,b.useRef)(!0),Ze=l.useCallback((function(e){$({viewPort:e})}),[$]),Ye=l.useCallback((function(e,t,n){return J(e,t,n)}),[J]),$e=l.useCallback((function(e,t){return Z(X+"."+e,t)}),[Z,X]),Xe=l.useCallback((function(e,t){var n=(0,H.handleConnectionCloseEditorCommand)(Q,{from:e,to:t}),r=(0,d.isInternalConnectionNode)(t)?le.find((function(e){return e.id===t.insId})):null,i=(r?r.inputConfig:{})[t.pinId],o=(0,d.isStaticInputPinConfig)(i)?(0,z.handleDetachConstEditorCommand)(n,t.insId,t.pinId):n;a(o,(0,T.functionalChange)("close-connection")),$({from:void 0,to:void 0})}),[le,a,$,Q]),Qe=l.useCallback(i(r().mark((function e(){var t,n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue("New visual part name?");case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,(0,M.groupSelected)(Y.selected,Q,t,"inline",Ue);case 7:n=e.sent,i=n.currentPart,a(i,(0,T.functionalChange)("group part")),(0,S.toastMsg)("Part grouped");case 11:case"end":return e.stop()}}),e)}))),[Ue,Y.selected,a,Q]);(0,b.useEffect)((function(){if(Oe){var e=setTimeout((function(){we(void 0)}),350);return function(){return clearTimeout(e)}}}),[Oe]);var Ke=(0,b.useState)(),et=Ke[0],tt=Ke[1];(0,b.useEffect)((function(){(0,E.preloadMonaco)()}),[]);var nt=(0,b.useRef)(),rt=(0,I.default)(nt),it=l.useRef({x:400,y:400}),ot=(0,m.useBoundingclientrect)(nt)||x.vZero,at=function(){var e=(0,g.fitViewPortToPart)(Q,oe,rt);(0,g.animateViewPort)(We,e,500,(function(e){Ze(e)}))},ut=l.useCallback((function(e,t){var n=Y.to,r=Y.from,i="input"===t?r:n,o="input"===t?n:r,a={pinId:e,insId:d.THIS_INS_ID},u="input"===t?{from:a}:{to:a};i&&i.pinId===e?$({from:void 0,to:void 0}):o?"input"===t&&n?Xe(a,n):r&&Xe(r,a):$(u)}),[Y,$,Xe]),st=l.useCallback((function(e,t,n){var r=(0,y.produce)(Q,(function(r){"input"===e?r.inputs[t].description=n:r.outputs[t].description=n}));a(r,(0,T.functionalChange)("Part io description"))}),[a,Q]),ct=l.useCallback((function(e,t,n){var r=Y.from,i=Y.to;if(se&&se.insId===e.id||ce&&ce.insId===e.id)$({from:void 0,to:void 0});else if("input"===n){var o={insId:e.id,pinId:t};!i||i.pinId!==t||(0,d.isInternalConnectionNode)(i)&&i.insId!==e.id?se?Xe(se,o):$({to:o,selected:[]}):$({to:void 0})}else{var a={insId:e.id,pinId:t};!r||r.pinId!==t||(0,d.isInternalConnectionNode)(r)&&r.insId!==e.id?ce?Xe(a,ce):$({from:a,selected:[]}):$({from:void 0})}}),[Y,se,$,Xe,ce]);(0,b.useEffect)((function(){if(!Se&&rt.width){var t=(0,g.fitViewPortToPart)(Q,oe,rt);e.thumbnailMode||Ze(t);var n=setTimeout((function(){var t=(0,g.fitViewPortToPart)(Q,oe,rt);e.thumbnailMode||Ze(t),Te(!0)}),100);return function(){return clearTimeout(n)}}}),[Q,rt,e.thumbnailMode,Se,oe,Ze]);var lt=l.useCallback((function(){var e=Y.selected,t=Q.instances.filter((function(t){return e.includes(t.id)})).map((function(e){return Object.assign({},e,{id:e.id+"-copy"})})),n=Q.connections.filter((function(t){var n=t.from,r=t.to;return e.includes(n.insId)&&e.includes(r.insId)}));s({instances:t,connections:n})}),[Y,s,Q]),dt=l.useCallback((function(){var t=(0,V.pasteInstancesCommand)(Q,it.current,e.clipboardData),n=t.newPart,r=t.newInstances;a(n,(0,T.functionalChange)("paste instances")),$({selected:r.map((function(e){return e.id}))})}),[a,$,Q,e.clipboardData]),pt=l.useCallback((function(){var e=Q.id;et?"input"===et.type?et.ins.id===e?ut(et.pin,"input"):ct(et.ins,et.pin,"input"):et.ins.id===e?ut(et.pin,"output"):ct(et.ins,et.pin,"output"):console.warn("tried selecting closest with no pin nearby")}),[Q.id,et,ut,ct]),ft=l.useCallback((function(e,t){var n=Math.min(Math.max(e,.1),3),r="mouse"===t?it.current:{x:We.pos.x+rt.width/2,y:We.pos.y+rt.height/2},i=(0,g.centerBoardPosOnTarget)(r,rt,n,We);Ze(Object.assign({},We,{zoom:n,pos:i}))}),[Ze,We,rt]);(0,h.useHotkeys)("cmd+=",(function(e){ft(We.zoom+.1,"hotkey"),e.preventDefault()}),Je,[We,ft]),(0,h.useHotkeys)("cmd+-",(function(e){ft(We.zoom-.1,"hotkey"),e.preventDefault()}),Je,[ft,We.zoom]),(0,h.useHotkeys)("cmd+o",(function(e){e.preventDefault(),(0,S.toastMsg)("Ordering");var t=[];(0,O.orderVisualPart)(Q,oe,200,(function(e,n){n%3==0&&t.push(e)})),i(r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.length){e.next=9;break}return n=t.shift(),(0,S.toastMsg)("Step "+t.length+"!"),e.next=5,(0,d.delay)(200);case 5:a(n,(0,T.metaChange)("order-step")),(0,S.toastMsg)("Step "+t.length+"! done"),e.next=0;break;case 9:case"end":return e.stop()}}),e)})))()}),Je,[a,Q,ee]),(0,h.useHotkeys)("cmd+0",(function(e){ft(1),e.preventDefault()}),Je,[We,ft]);var vt=function(){$({from:void 0,to:void 0,selected:[]})},mt=l.useCallback((function(e,t){be(e.id),a(Object.assign({},Q),(0,T.metaChange)("drag-start"))}),[a,Q]),gt=l.useCallback((function(e,t,n){var r=(0,g.handleInstanceDrag)(Q,e,n,t,ue,ye),i=r.newValue,o=r.newSelected;a(i,(0,T.metaChange)("drag-move")),o&&$({selected:o})}),[ye,a,$,ue,Q]),yt=l.useCallback((function(e,t){t.preventDefault(),t.stopPropagation(),be(void 0)}),[]),bt=l.useCallback((function(e,t){t.preventDefault(),t.stopPropagation(),be(d.THIS_INS_ID)}),[]),ht=l.useCallback(function(){var t=i(r().mark((function t(n,i,o,a){var u,s,c;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.preventDefault(),o.stopPropagation(),u=a.x,s=a.y,c=(0,y.produce)(Q,(function(e){"input"===n?e.inputsPosition[i]={x:u,y:s}:e.outputsPosition[i]={x:u,y:s}})),e.onChangePart(c,(0,T.metaChange)("part-io-drag-move"));case 5:case"end":return t.stop()}}),t)})));return function(e,n,r,i){return t.apply(this,arguments)}}(),[e,Q]),It=l.useCallback(function(){var e=i(r().mark((function e(t,n,i,o){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.preventDefault(),i.stopPropagation(),be(void 0);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),[]),Ct=l.useCallback((function(e,t){var n=e.id,r=t.shiftKey?ue.filter((function(e){return e!==n})):[],i=t.shiftKey?[].concat(ue,[n]):[n],o=ue.includes(n)?r:i;$({selected:o,from:void 0,to:void 0})}),[$,ue]),Pt=l.useCallback((function(){var e=Q.instances.map((function(e){return e.id}));$({selected:e,from:void 0,to:void 0})}),[$,Q.instances]),xt=l.useCallback((function(e){var t=de.filter((function(t){var n=t.from,r=t.to;return-1===e.indexOf(n.insId)&&-1===e.indexOf(r.insId)})),n=(0,y.produce)(Q,(function(n){n.connections=t,n.instances=n.instances.filter((function(t){return!e.includes(t.id)}))}));$({selected:[]}),a(n,(0,T.functionalChange)("delete-ins"))}),[de,a,$,Q]),_t=l.useCallback((function(e){xt([e.id])}),[xt]),jt=l.useCallback((function(e,t){var n=(0,y.produce)(Q,(function(n){"input"===e?(delete n.inputs[t],n.connections=n.connections.filter((function(e){return!((0,d.isExternalConnectionNode)(e.from)&&e.from.pinId===t)}))):(n.connections=n.connections.filter((function(e){return!((0,d.isExternalConnectionNode)(e.to)&&e.to.pinId===t)})),n.completionOutputs=(n.completionOutputs||[]).map((function(e){return e.split("+").filter((function(e){return e!==t})).join("+")})).filter((function(e){return!!e})),delete n.outputs[t])}));se.insId===d.THIS_INS_ID&&se.pinId===t?$({from:void 0}):ce.insId===d.THIS_INS_ID&&ce.pinId===t&&$({to:void 0}),a(n,(0,T.functionalChange)("remove io pin"))}),[Q,se,ce,a,$]),Ot=l.useCallback(i(r().mark((function e(){var t,n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Y.selected,n=Y.from,i=Y.to,0!==t.length){e.next=16;break}if(!n||!(0,d.isExternalConnectionNode)(n)){e.next=9;break}return e.next=5,Be("Are you sure you want to remove main input "+n.pinId+"?");case 5:if(!e.sent){e.next=7;break}jt("input",n.pinId);case 7:e.next=14;break;case 9:if(!i||!(0,d.isExternalConnectionNode)(i)){e.next=14;break}return e.next=12,Be("Are you sure you want to remove main output "+i.pinId+"?");case 12:if(!e.sent){e.next=14;break}jt("output",i.pinId);case 14:e.next=17;break;case 16:xt(t);case 17:case"end":return e.stop()}}),e)}))),[Be,Y,xt,jt]),wt=l.useCallback((function(e,t,n){a((0,g.toggleStickyPin)(Q,e.id,t,n),(0,T.functionalChange)("toggle-sticky"))}),[a,Q]),Et=l.useCallback((function(){var e=(0,G.handleDuplicateSelectedEditorCommand)(Q,ue),t=e.newPart,n=e.newInstances;a(t,(0,T.functionalChange)("duplicated instances")),$({selected:n.map((function(e){return e.id}))})}),[a,$,Q,ue]),St=l.useCallback((function(e){var t=e.nativeEvent.target;if(0===e.button&&U(e.nativeEvent,Q.id)&&t&&"board-editor-inner"===t.className){if(Date.now()-xe<300)return void K(e);_e(Date.now());var n={x:e.clientX,y:e.clientY},r=(0,x.vSub)(n,ot),i=(0,g.domToViewPort)(r,We,re);Ce({from:i,to:i})}}),[Q.id,We,xe,ot,re,K]),Tt=l.useCallback((function(e){if(U(e.nativeEvent,Q.id)&&Ie){if((0,g.calcSelectionBoxArea)(Ie)>50){var t=(0,g.getInstancesInRect)(Ie,oe,We,Qt.current,Q.instances,ot,re);console.log({toSelect:t,selectionBox:Ie});var n=e.shiftKey?[].concat(ue,t):t;$({selected:n})}Ce(void 0)}}),[Q.id,Q.instances,Ie,oe,We,ot,re,ue,$]),kt=l.useCallback((function(e){if(U(e.nativeEvent,Q.id)){Je.current=!0;var t={x:e.clientX,y:e.clientY},n=(0,x.vSub)(t,(0,x.vAdd)(ot,x.vZero)),r=(0,g.domToViewPort)(n,We,re);Ie&&Ce(Object.assign({},Ie,{to:r}));var i=(0,g.findClosestPin)(Q,oe,n,ot,X,We),o=et;if(i)(!o||o.ins!==i.ins||o.ins===i.ins&&o.pin!==i.pin)&&tt({ins:i.ins,type:i.type,pin:i.id});it.current=r,$({lastMousePos:it.current})}else Je.current=!1}),[Q,ot,We,re,Ie,oe,X,et,$]),Dt=l.useCallback((function(){tt(void 0),Je.current=!1}),[]),Nt=l.useCallback((function(e,t){if(t){var n=(0,d.isInlinePartInstance)(e)?e.part:(0,d.getPartDef)(e.partId,oe);if(!n)throw new Error("Impossible state inspecting inexisting part");if(!(0,d.isVisualPart)(n))return void(0,S.toastMsg)("Cannot inspect a non visual part","warning");Fe({insId:X+"."+e.id,part:n})}else if((0,d.isRefPartInstance)(e)){var r=(0,d.getPartDef)(e,oe);W(r)}else{var i=e.part;if(!(0,d.isInlineValuePart)(i))return void((0,d.isVisualPart)(i)?Fe({insId:e.id,part:i}):(0,S.toastMsg)("Editing this type of part is not supported"));var o=atob(i.dataBuilderSource);ze({insId:e.id,templateType:i.templateType,value:o,type:"existing"}),(0,S.toastMsg)("Editing inline visual part not supported yet")}}),[W,oe,X]),Mt=l.useCallback((function(e){if((0,d.isInlinePartInstance)(e)){var t=e.part;if(!(0,d.isVisualPart)(t))return void(0,S.toastMsg)("Not supported","warning");var n=(0,y.produce)(Q,(function(n){var r,i;n.instances=n.instances.filter((function(t){return t.id!==e.id})),n.connections=n.connections.filter((function(t){var n=t.from,r=t.to;return n.insId!==e.id&&r.insId!==e.id})),(r=n.instances).push.apply(r,t.instances),(i=n.connections).push.apply(i,t.connections.filter((function(e){return(0,d.isInternalConnectionNode)(e.from)&&(0,d.isInternalConnectionNode)(e.to)})))}));a(n,{type:"functional",message:"ungroup"}),$({selected:[]})}else{var r=(0,d.getPartDef)(e.partId,oe);if(!(0,d.isVisualPart)(r))return void(0,S.toastMsg)("Not supported","warning")}}),[Q,a,$,oe]),Rt=l.useCallback(function(){var e=i(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),At=l.useCallback((function(e,t){var n=(0,z.handleDetachConstEditorCommand)(Q,e.id,t);a(n,(0,T.functionalChange)("detach-const"))}),[a,Q]),Vt=l.useCallback((function(e,t){var n=e.inputConfig[t]||(0,j.queueInputPinConfig)();(0,d.isStaticInputPinConfig)(n)&&(Ae(n.value),S.AppToaster.show({message:"Value copied"}))}),[]),Ht=l.useCallback((function(e,t){var n=(0,y.produce)(Q,(function(n){var r=n.instances.find((function(t){return t.id===e.id}));if(!r)throw new Error("Impossible state");r.inputConfig[t]=(0,d.staticInputPinConfig)(Re),n.connections=n.connections.filter((function(n){return!(0,d.isInternalConnectionNode)(n.to)||!(n.to.insId===e.id&&n.to.pinId===t)}))}));a(n,(0,T.functionalChange)("paste const value"))}),[Q,a,Re]),zt=l.useCallback(function(){var e=i(r().mark((function e(t){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue("New name?");case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:i=(0,y.produce)(Q,(function(e){if("input"===t)Q.inputs||(e.inputs={}),e.inputs[n]=(0,d.partInput)(),e.inputsPosition[n]=it.current;else{Q.outputs||(e.outputs={}),e.outputs[n]=(0,d.partOutput)(),e.outputsPosition[n]=it.current;var r=(e.completionOutputs||[])[0];if(r){var i=r.split("+");e.completionOutputs[0]=[].concat(i,[n]).join("+")}else e.completionOutputs=[n]}})),a(i,(0,T.functionalChange)("add new io pin"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[Ue,Q,a]),Gt=l.useCallback(i(r().mark((function e(){var t,n,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null===(t=Q.completionOutputs)||void 0===t?void 0:t.join(","),e.next=3,Ue("Edit completion outputs",n);case 3:i=e.sent,(0,v.isDefined)(i)&&null!==i&&(o=(0,y.produce)(Q,(function(e){e.completionOutputs=""===i?void 0:i.split(",")})),a(o,(0,T.functionalChange)("change part completions")));case 5:case"end":return e.stop()}}),e)}))),[Ue,a,Q]),qt=l.useCallback(i(r().mark((function e(){var t,n,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null===(t=Q.reactiveInputs)||void 0===t?void 0:t.join(","),e.next=3,Ue("Edit reactive inputs",n);case 3:i=e.sent,(0,v.isDefined)(i)&&null!==i&&(o=(0,y.produce)(Q,(function(e){e.reactiveInputs=""===i?void 0:i.split(",")})),a(o,(0,T.functionalChange)("change reactive inputs")));case 5:case"end":return e.stop()}}),e)}))),[Ue,a,Q]),Ft=l.useCallback(i(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue("Description?",Q.description);case 2:t=e.sent,n=(0,y.produce)(Q,(function(e){e.description=t})),a(n,(0,T.functionalChange)("Edit part description"));case 5:case"end":return e.stop()}}),e)}))),[Ue,a,Q]),Lt=l.useCallback((function(e){var t=(0,y.produce)(Q,(function(t){t.defaultStyle=e}));a(t,(0,T.functionalChange)("change default style"))}),[a,Q]),Bt=l.useCallback(function(){var e=i(r().mark((function e(t,n){var i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue("New name?",n);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=n;case 5:i=e.t0,o=(0,g.handleIoPinRename)(Q,t,n,i),a(o,(0,T.functionalChange)("rename io pin"));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[Q,a,Ue]),Ut=l.useCallback((function(e,t){var n=(0,g.handleChangePartInputType)(Q,e,t);a(n,(0,T.functionalChange)("toggle io pin optional"))}),[Q,a]),Wt=l.useCallback((function(e,t){var n=X.split(".").reverse()[0];return J(n,e,t)}),[J,X]),Jt=l.useCallback((function(e){switch(e.type){case F.ActionType.RemovePart:var t=(0,y.produce)(Q,(function(e){if(!(0,d.isVisualPart)(Q))throw new Error("Impossible state, deleting instances opf non visual part");e.instances=e.instances.filter((function(e){return!ue.includes(e.id)})),e.connections=e.connections.filter((function(e){return!ue.includes(e.from.insId)&&!ue.includes(e.to.insId)}))}));$({selected:[]}),a(t,(0,T.functionalChange)("remove-instances")),(0,S.toastMsg)("Removed "+ue.length+" instances(s)");break;case F.ActionType.Inspect:if(1===ue.length||se||ce){var n=ue[0]||(null==se?void 0:se.insId)||(null==ce?void 0:ce.insId),o=(null==se?void 0:se.pinId)||(null==ce?void 0:ce.pinId);Z(n,{type:se?"output":"input",id:o})}break;case F.ActionType.Group:i(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe();case 2:case"end":return e.stop()}}),e)})))();break;case F.ActionType.Ungroup:var u=Q.instances.find((function(e){return e.id===ue[0]}));Mt(u);var s=(0,d.getPartDef)(u,oe);(0,S.toastMsg)("Ungrouped inline part "+s.id);break;case F.ActionType.AddInlineValue:ze({type:"new-floating",pos:it.current});break;case F.ActionType.AddPart:i(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(0,g.getMiddleOfViewPort)(We,rt),t.next=3,te(e.data.importablePart,{selectAfterAdding:!0,pos:(0,x.vSub)(n,{x:0,y:50*We.zoom})});case 3:case"end":return t.stop()}}),t)})))();break;default:(0,S.toastMsg)(e+" not supported yet")}}),[se,a,Qe,te,Z,Mt,Q,oe,ue,ce,We,rt]),Zt=l.useCallback(function(){var e=i(r().mark((function e(t,n,i,o){var a,u,s,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("input"!==i){e.next=6;break}a=t.inputConfig[n],u=(0,d.isStaticInputPinConfig)(a)?JSON.stringify(a.value):void 0,ze({type:"static-input",insId:t.id,pinId:n,value:u}),e.next=12;break;case 6:if(s=(0,d.getPartDef)(t,oe),c=(0,d.getPartOutputs)(s),c[n]){e.next=11;break}throw new Error("Dbl clicked on un-existing pin");case 11:Ne({pos:{x:o.clientX,y:o.clientY},ins:t,part:s,pinId:n,pinType:i});case 12:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),[oe]),Yt=l.useCallback(function(){var e=i(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Q.inputs[t]){e.next=3;break}throw new Error("Dbl clicked on un-existing pin");case 3:Ne({pos:{x:n.clientX,y:n.clientY},pinId:t,pinType:"input",part:Q});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[Q]),$t=l.useCallback((function(e){if(e.metaKey||e.ctrlKey){var t=-.005*e.deltaY;ft(We.zoom+t,"mouse"),e.preventDefault(),e.stopPropagation()}else{var n=e.deltaX,r=e.deltaY,i=(0,y.produce)(We,(function(e){e.pos.x=e.pos.x+n/e.zoom,e.pos.y=e.pos.y+r/e.zoom}));Ze(i),e.stopPropagation(),e.preventDefault()}}),[ft,Ze,We]);(0,b.useEffect)((function(){var e=nt.current;if(e)return e.addEventListener("wheel",$t),function(){e.removeEventListener("wheel",$t)}}),[$t]);var Xt={backgroundPositionX:(0,g.roundNumber)(-We.pos.x*We.zoom),backgroundPositionY:(0,g.roundNumber)(-We.pos.y*We.zoom),backgroundSize:(0,g.roundNumber)(25*We.zoom)+"px"},Qt=l.useRef(new Map);l.useEffect((function(){var e=le.reduce((function(e,t){var n=(0,d.getPartDef)(t,oe);return n&&e.set(t.id,(0,d.keys)((0,d.getPartInputs)(n))),e}),new Map),t=le.reduce((function(e,t){var n=(0,d.getPartDef)(t,oe);return n&&e.set(t.id,(0,d.keys)((0,d.getPartOutputs)(n))),e}),new Map);e.set(d.THIS_INS_ID,(0,d.keys)(Q.outputs)),t.set(d.THIS_INS_ID,(0,d.keys)(Q.inputs));var n=de.filter((function(n){var r=e.get(n.to.insId)&&e.get(n.to.insId).includes(n.to.pinId),i=t.get(n.from.insId)&&t.get(n.from.insId).includes(n.from.pinId);return!(r&&i)}));if(n.length>0){(0,S.toastMsg)(n.length+" orphan connections removed","warning"),console.log(n.length+" orphan connections removed",n);var r=(0,y.produce)(Q,(function(e){e.connections=Q.connections.filter((function(e){return!n.includes(e)}))}));a(r,(0,T.functionalChange)("prune orphan connections"))}}),[le,a,de,ee,Q,oe]),(0,b.useEffect)((function(){var e=new Map(le.map((function(e){return[e.id,e]})));Qt.current=de.reduce((function(t,n){var r,i=t.get(n.to.insId)||{},o=i[n.to.pinId]||[],a=Object.assign({},i,((r={})[n.to.pinId]=[].concat(o,[e.get(n.from.insId)]),r));return t.set(n.to.insId,a),t}),new Map)}),[de,le]);var Kt=l.useCallback((function(){Ne(void 0)}),[]),en=l.useCallback(function(){var e=i(r().mark((function e(t){var n,i,o,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(De){e.next=2;break}throw new Error("impossible state - quick add menu invoked but not available");case 2:n=De.ins,i=De.pinId,e.t0=t.type,e.next="part"===e.t0?6:"import"===e.t0?9:"value"===e.t0?13:17;break;case 6:return(o=(0,g.createNewPartInstance)(t.part.id,100,it.current,oe))&&(u=(0,y.produce)(Q,(function(e){e.instances.push(o),e.connections.push({from:{insId:n?n.id:d.THIS_INS_ID,pinId:i},to:{insId:o.id,pinId:d.TRIGGER_PIN_ID}})})),a(u,(0,T.functionalChange)("add-item-quick-menu")),Kt()),e.abrupt("break",17);case 9:return e.next=11,te(t.importablePart,{pos:it.current,connectTo:{insId:n.id,outputId:i}});case 11:return Kt(),e.abrupt("break",17);case 13:if(n){e.next=16;break}return(0,S.toastMsg)("Cannot add value to main input"),e.abrupt("return");case 16:ze({type:"new-output",insId:n.id,pinId:i});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[De,oe,Q,a,Kt,te]),tn=l.useCallback(i(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.stringify(Q),e.next=3,navigator.clipboard.writeText(t);case 3:S.AppToaster.show({message:"Copied!"});case 4:case"end":return e.stop()}}),e)}))),[Q]),nn=l.useCallback((function(e){var t,n,r=u?"":" (cannot edit main part, only visual)";return(0,c.jsxs)(C.Menu,{children:[(0,c.jsx)(C.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},text:"New Value",onClick:(0,v.preventDefaultAnd)((function(){return ze({type:"new-floating",pos:it.current})}))}),(0,c.jsx)(C.MenuItem,{text:"New input "+r,onMouseDown:function(e){return e.stopPropagation()},onClick:(0,v.preventDefaultAnd)((function(){return zt("input")})),disabled:!u}),(0,c.jsx)(C.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},text:"New output "+r,onClick:(0,v.preventDefaultAnd)((function(){return zt("output")})),disabled:!u}),(0,c.jsx)(C.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},text:"Copy part to clipboard",onClick:(0,v.preventDefaultAnd)(tn)}),(0,c.jsx)(C.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},text:"Edit Completion Outputs ("+((null===(t=Q.completionOutputs)||void 0===t?void 0:t.join(","))||"n/a")+")",onClick:(0,v.preventDefaultAnd)((function(){return Gt()}))}),(0,c.jsx)(C.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},text:"Edit Reactive inputs ("+((null===(n=Q.reactiveInputs)||void 0===n?void 0:n.join(","))||"n/a")+")",onClick:(0,v.preventDefaultAnd)((function(){return qt()}))}),(0,c.jsx)(C.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},text:"Edit description",onClick:(0,v.preventDefaultAnd)((function(){return Ft()}))}),(0,c.jsx)(C.MenuDivider,{}),(0,c.jsx)(C.MenuItem,{text:"Default Style",children:(0,c.jsx)(q.PartStyleMenu,{style:Q.defaultStyle,onChange:Lt,promptFn:Ue})})]})}),[u,tn,Q.completionOutputs,Q.reactiveInputs,Q.defaultStyle,Lt,Ue,zt,Gt,qt,Ft]),rn=l.useCallback((function(e){if(e.preventDefault(),Je.current){var t=(0,g.domToViewPort)({x:e.clientX,y:e.clientY},We,re),n=nn(t);C.ContextMenu.show(n,{left:e.clientX,top:e.clientY})}}),[nn,re,We]);(0,h.useHotkeys)("shift+c",at,Je),(0,h.useHotkeys)("cmd+c",lt,Je),(0,h.useHotkeys)("cmd+v",dt,Je),(0,h.useHotkeys)("esc",vt,Je),(0,h.useHotkeys)("backspace",Ot,Je),(0,h.useHotkeys)("shift+d",Et,Je),(0,h.useHotkeys)("cmd+a",Pt,Je),(0,h.useHotkeys)("s",pt,Je);var on=l.useCallback((function(e,t){if(!qe)throw new Error("impossible state");var n=(0,y.produce)(Q,(function(t){var n=t.instances.find((function(e){return e.id===qe.insId}));if(!n||!(0,d.isInlinePartInstance)(n))throw new Error("impossible state");n.part=e}));a(n,(0,T.functionalChange)("Inner change: "+t.message)),Fe((function(t){return Object.assign({},t,{part:e})}))}),[a,qe,Q]),an=(0,b.useState)({selected:[],viewPort:t.defaultViewPort,lastMousePos:{x:0,y:0}}),un=an[0],sn=an[1],cn=l.useCallback((function(e){return sn((function(t){return Object.assign({},t,e)}))}),[]),ln=function(n){return qe&&qe.insId===n.id?{insId:X+"."+qe.insId,boardData:un,onChangeBoardData:cn,resolvedFlow:ee,onCopy:s,clipboardData:e.clipboardData,onInspectPin:e.onInspectPin,onGoToPartDef:e.onGoToPartDef,partIoEditable:e.partIoEditable,onRequestHistory:J,part:qe.part,onChangePart:on,onShowOmnibar:K,parentViewport:t.defaultViewPort,parentBoardPos:ot,onExtractInlinePart:e.onExtractInlinePart,onImportPart:e.onImportPart,queuedInputsData:e.queuedInputsData,onRequestImportables:e.onRequestImportables}:void 0},dn=function(){if(se&&("input"===(null==et?void 0:et.type)&&(null==et?void 0:et.ins.id)!==Q.id||(null==et?void 0:et.ins.id)===Q.id&&"output"===(null==et?void 0:et.type))){var e=et.ins.id===Q.id?{pinId:et.pin,insId:d.THIS_INS_ID}:{insId:et.ins.id,pinId:et.pin};if(!(0,d.isInternalConnectionNode)(e)&&!(0,d.isInternalConnectionNode)(se))return;return{from:se,to:e}}if(ce&&("output"===(null==et?void 0:et.type)&&(null==et?void 0:et.ins.id)!==Q.id||(null==et?void 0:et.ins.id)===Q.id&&"input"===(null==et?void 0:et.type))){var t=et.ins.id===Q.id?{pinId:et.pin,insId:d.THIS_INS_ID}:{insId:et.ins.id,pinId:et.pin};if(!(0,d.isInternalConnectionNode)(ce)&&!(0,d.isInternalConnectionNode)(t))return;return{from:t,to:ce}}},pn=l.useCallback((function(e,t){var n=(0,y.produce)(Q,(function(n){n.instances=n.instances.map((function(n){return n.id===e.id?Object.assign({},n,{visibleInputs:t}):n}))}));a(n,(0,T.functionalChange)("change instance visible inputs"))}),[Q,a]),fn=l.useCallback((function(e,t){var n=(0,y.produce)(Q,(function(n){n.instances=n.instances.map((function(n){return n.id===e.id?Object.assign({},n,{style:t}):n}))}));a(n,(0,T.functionalChange)("change instance style"))}),[a,Q]),vn=l.useCallback((function(e,t){var n=(0,y.produce)(Q,(function(n){n.instances=n.instances.map((function(n){return n.id===e.id?Object.assign({},n,{visibleOutputs:t}):n}))}));a(n,(0,T.functionalChange)("change instance visible outputs"))}),[Q,a]),mn=l.useCallback((function(e,t){var n=(0,y.produce)(Q,(function(n){n.instances=n.instances.map((function(n){return n.id===e.id?Object.assign({},n,{displayName:t}):n}))}));a(n,(0,T.functionalChange)("change instance display name"))}),[Q,a]);l.useImperativeHandle(n,(function(){return{centerInstance:function(e){var t=Q.instances.find((function(t){return t.id===e}));if(t){var n=(0,x.vSub)(t.pos,(0,x.vec)(rt.width/2,rt.height/2));Ze(Object.assign({},We,{pos:n}))}},centerViewPort:function(){at()},getViewPort:function(){return We},clearSelection:function(){vt()}}}));l.useCallback((function(e,t){var n={visibleInputs:e.visibleInputs,visibleOutputs:e.visibleOutputs,inputConfig:e.inputConfig,displayName:e.displayName},r=(0,y.produce)(Q,(function(t){t.instances=t.instances.map((function(t){return t.id===e.id?Object.assign({},t,n):t}))}));a(r,(0,T.functionalChange)("change instance config - "+t))}),[a,Q]);var gn=l.useState([]),yn=(gn[0],gn[1],l.useCallback((function(e,t){var n=t.trim().substr(0,100),r="Inline-value-"+n.substr(0,15).replace(/["'`]/g,""),i=(0,D.createInlineValuePart)({code:t,customView:n,partId:r,type:e});switch(He.type){case"existing":var o=Q.instances.filter((function(e){return e.id===He.insId})).filter((function(e){return(0,d.isInlinePartInstance)(e)})).map((function(e){return e.part})),u=o[0];if(!u)throw new Error("Unable to find inline part to save to");var s=(0,d.keys)(u.inputs),c=(0,d.keys)(i.inputs),l=new Set(N.default.difference(s,c)),p=(0,y.produce)(Q,(function(e){e.instances=e.instances.map((function(e){return e.id===He.insId?(0,d.inlinePartInstance)(e.id,i,e.inputConfig,e.pos):e})),e.connections=e.connections.filter((function(e){return!(e.to.insId===He.insId&&l.has(e.to.pinId))}))}));a(p,(0,T.functionalChange)("change inline value")),ze(void 0);break;case"static-input":var f;try{var v=t.replace(/^['`]/,'"').replace(/['`]$/,'"');f=JSON.parse(v)}catch(j){return void(0,S.toastMsg)("Input values must not be formulas or code")}var m=(0,y.produce)(Q,(function(e){e.instances.find((function(e){return e.id===He.insId})).inputConfig[He.pinId]=(0,d.staticInputPinConfig)(f)}));a(m,(0,T.functionalChange)("set static input value")),ze(void 0);break;case"new-floating":var g=(0,d.inlinePartInstance)((0,d.createInsId)(i),i,{},He.pos),b=(0,y.produce)(Q,(function(e){e.instances.push(g)}));a(b,(0,T.functionalChange)("new floating value")),ze(void 0);break;case"new-output":var h=He.insId,I=He.pinId,C=Q.instances.find((function(e){return e.id===h}));if(!C)throw new Error("Impossible state");var P=(0,d.inlinePartInstance)((0,d.createInsId)(i),i,{},(0,x.vAdd)(C.pos,{x:-50,y:150})),_=(0,y.produce)(Q,(function(e){e.instances.push(P),e.connections.push({from:(0,d.connectionNode)(h,I),to:(0,d.connectionNode)(P.id,d.TRIGGER_PIN_ID)})}));a(_,(0,T.functionalChange)("new value connected to output")),ze(void 0)}}),[He,a,Q])),bn=de.filter((function(e){var t=dn();return!t||!(0,d.connectionDataEquals)(t,e)})),hn=l.useCallback((function(){Fe(void 0),sn(t.defaultBoardData)}),[]),In=l.useCallback((function(e){var t=(0,y.produce)(Q,(function(t){var n=t.connections.find((function(t){return(0,d.connectionDataEquals)(t,e)}));n.hidden=!n.hidden}));a(t,(0,T.functionalChange)("toggle connection hidden"))}),[a,Q]),Cn=l.useCallback((function(e){var t=(0,y.produce)(Q,(function(t){t.connections=t.connections.filter((function(t){return!(0,d.connectionDataEquals)(t,e)}))}));a(t,(0,T.functionalChange)("remove connection"))}),[a,Q]);try{return(0,c.jsxs)("div",{className:(0,A.default)("visual-part-editor",e.className),"data-id":Q.id,onContextMenu:rn,children:[(0,c.jsxs)("main",{className:"board-editor-inner",onMouseDown:St,onMouseUp:Tt,onMouseMove:kt,onMouseLeave:Dt,ref:nt,style:Xt,children:[(0,c.jsx)(l.Fragment,{children:(0,c.jsx)(w.LayoutDebugger,{vp:We,part:Q,extraDebug:g.emptyList,mousePos:it.current})}),(0,c.jsx)(f.ConnectionView,{repo:oe,parentInsId:X,size:rt,part:Q,boardPos:ot,instances:le,connections:bn,futureConnection:function(){var e=dn();if(e)return{connection:{from:e.from,to:e.to},type:de.some((function(t){return(0,d.connectionDataEquals)(t,e)}))?"future-remove":"future-add"}}(),onDblClick:d.noop,viewPort:We,parentVp:re,selectedInstances:ue,toggleHidden:In,removeConnection:Cn}),function(){var e=Y.from;return(0,v.entries)(ve).map((function(t){var n=t[0],r=t[1];return(0,c.jsx)(P.PartIoView,{insId:X,type:"input",pos:pe[n]||{x:0,y:0},id:n,onDelete:u?jt:void 0,onRename:u?Bt:void 0,onDblClick:Yt,closest:!(!et||"input"!==et.type||et.ins.id!==Q.id||et.pin!==n),connected:!1,inputMode:r.mode,onChangeInputMode:Ut,viewPort:We,onDragStart:bt,onDragEnd:It,onDragMove:ht,onSelect:ut,onSetDescription:st,selected:(null==e?void 0:e.pinId)===n,description:r.description,onRequestHistory:Wt},n)}))}(),le.map((function(e){var t;return(0,c.jsx)(p.InstanceView,{onUngroup:Mt,onExtractInlinePart:Rt,onDetachConstValue:At,onCopyConstValue:Vt,onPasteConstValue:Ht,copiedConstValue:Re,connectionsPerInput:Qt.current.get(e.id)||g.emptyObj,connectionsPerOutput:g.emptyObj,part:(0,d.getPartDef)(e,oe),parentInsId:X,onPinClick:ct,onPinDblClick:Zt,onDragStart:mt,onDragEnd:yt,partDefRepo:oe,onDragMove:gt,onDblClick:Nt,onSelect:Ct,onToggleSticky:wt,selected:-1!==ue.indexOf(e.id),dragged:ye===e.id,onInspectPin:$e,selectedInput:ce&&(0,d.isInternalConnectionNode)(ce)&&ce.insId===e.id?ce.pinId:void 0,selectedOutput:se&&(0,d.isInternalConnectionNode)(se)&&se.insId===e.id?se.pinId:void 0,closestPin:et&&et.ins.id===e.id?et:void 0,queuedInputsData:null!==(t=ne[e.id])&&void 0!==t?t:g.emptyObj,instance:e,connections:de,onTogglePinBreakpoint:d.noop,onTogglePinLog:d.noop,viewPort:We,onRequestHistory:Ye,onChangeVisibleInputs:pn,onChangeVisibleOutputs:vn,onSetDisplayName:mn,onDeleteInstance:_t,forceShowMinimized:se?"input":ce?"output":void 0,isConnectedInstanceSelected:ue.some((function(t){return de.some((function(n){var r=n.from,i=n.to;return r.insId===e.id&&i.insId===t||r.insId===t&&i.insId===e.id}))})),inlineGroupProps:ln(e),onCloseInlineEditor:hn,inlineEditorPortalDomNode:Le.current,onChangeStyle:fn,onGroupSelected:Qe},e.id)})),function(){if(Ie){var e=Ie.from,t=Ie.to,n=(0,g.logicalPosToRenderedPos)(e,We),r=(0,g.logicalPosToRenderedPos)(t,We);console.log(e.x,t.x," | ",n.x,r.x);var i=(0,g.getSelectionBoxRect)(n,r),o=i.x,a=i.y,u=i.w,s=i.h;return(0,c.jsx)("div",{className:"selection-box",style:{top:a,left:o,width:u,height:s}})}return null}(),function(){var e=Y.to;return(0,v.entries)(me).map((function(t){var n=t[0],r=t[1];return(0,c.jsx)(P.PartIoView,{insId:X,type:"output",pos:fe[n]||{x:0,y:0},id:n,onDelete:u?jt:void 0,onRename:u?Bt:void 0,closest:!(!et||"output"!==et.type||et.ins.id!==Q.id||et.pin!==n),connected:!1,viewPort:We,onDragStart:bt,onDragEnd:It,onDragMove:ht,onSelect:ut,onSetDescription:st,description:r.description,selected:(null==e?void 0:e.pinId)===n,onRequestHistory:Wt},n)}))}(),De?(0,c.jsx)(_.QuickAddMenu,{part:De.part,pinId:De.pinId,pinType:De.pinType,pos:De.pos,resolvedFlow:ee,onRequestImportables:e.onRequestImportables,onAdd:en,onClose:Kt}):null,(0,c.jsxs)("div",{className:"viewport-controls",children:[(0,c.jsx)(C.Button,{small:!0,onClick:at,children:"Center view"}),(0,c.jsx)(L,{min:.15,max:3,stepSize:.05,labelStepSize:10,labelRenderer:B,onChange:ft,value:We.zoom})]}),He?(0,c.jsx)(k.InlineCodeModal,{env:g.emptyObj,initialValue:He.value,initialType:"existing"===He.type?He.templateType:void 0,onCancel:function(){return ze(void 0)},onSubmit:yn}):null,(0,c.jsx)("div",{className:"inline-editor-portal-root"})]}),(0,c.jsx)(F.ActionsMenu,{onAction:Jt,selectedInstances:ue,part:Q,repo:oe,to:ce,from:se,hotkeysEnabled:Je,onRequestImportables:e.onRequestImportables})]})}catch(Pn){return console.error(Pn),(0,c.jsxs)("div",{children:["Error rendering board - ",Pn.toString()]})}})));var U=function(e,t){var n=e.target.closest(".visual-part-editor");return n&&n.getAttribute("data-id")===t}},12589:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BasePartView=void 0;var u=n(24246),s=o(n(27378)),c=a(n(60042)),l=a(n(48304));t.BasePartView=function(e){var t=e.dragged,n=e.viewPort,r=e.pos,i=e.onDragEnd,o=e.onDragMove,a=e.onDragStart,d=e.displayMode,p=s.useCallback((function(e,t){a(e,t)}),[a]),f=s.useCallback((function(e,t){var o=r,a=(t.x-o.x)/n.zoom,u=(t.y-o.y)/n.zoom,s=o.x+a,c=o.y+u;i(e,Object.assign({},t,{x:s,y:c}))}),[r,i,n]),v=s.useCallback((function(e,t){o(e,{x:t.x,y:t.y})}),[o]),m={transform:"scale("+n.zoom+")"},g=(0,c.default)("base-part-view",e.className,{dragged:t,"display-mode":d}),y=r.x*n.zoom-n.pos.x*n.zoom,b=r.y*n.zoom-n.pos.y*n.zoom,h={transform:"translate("+(y-r.x)+"px, "+(b-r.y)+"px)"},I=(0,c.default)("base-part-view-vp-fixer",{"display-mode":d});return(0,u.jsx)("div",{className:I,style:h,children:(0,u.jsx)(l.default,{onStop:f,onStart:p,onDrag:v,position:r,cancel:".no-drag",children:(0,u.jsx)("span",{className:"base-part-view-wrapper",children:(0,u.jsx)("div",{className:g,style:m,id:e.domId,children:e.children})})})})}},75012:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.handleConnectionCloseEditorCommand=void 0;var i=n(18265),o=r(n(63300));t.handleConnectionCloseEditorCommand=function(e,t){var n=t.from,r=t.to;return(0,o.default)(e,(function(e){var t=e.connections.find((function(e){var t=(0,i.connectionNodeEquals)(n,e.from),o=(0,i.connectionNodeEquals)(r,e.to);return t&&o}));t?e.connections=e.connections.filter((function(e){return e!==t})):e.connections.push({from:n,to:r})}))}},97841:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.handleDetachConstEditorCommand=void 0;var i=n(18265),o=r(n(63300)),a=n(52178);t.handleDetachConstEditorCommand=function(e,t,n){return(0,o.default)(e,(function(e){var r=e.instances.find((function(e){return e.id===t}));if(!r)throw new Error("Impossible state ins id with no matching instance");var o=r.inputConfig[n];if(!o)throw new Error("impossible state detaching const from unexistent config");if(!(0,i.isStaticInputPinConfig)(o))throw new Error("impossible state detaching const with no value");var u=o.value,s=(0,a.createInlineValuePart)({code:""+u,type:i.InlineValuePartType.VALUE}),c=(0,i.inlinePartInstance)("value-"+(0,i.randomInt)(999),s,{},{x:r.pos.x,y:r.pos.y-100});if(!e.instances.find((function(e){return e.id===r.id})))throw new Error("impossible state instance not found");r.inputConfig[n]=(0,i.queueInputPinConfig)(),e.instances.push(c),e.connections.push((0,i.connectionData)(c.id+".r",r.id+"."+n))}))}},3065:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.handleDuplicateSelectedEditorCommand=void 0;var i=n(18265),o=r(n(63300));t.handleDuplicateSelectedEditorCommand=function(e,t){var n=[];return{newPart:(0,o.default)(e,(function(r){var o=r.instances;t.forEach((function(t){var r=o.find((function(e){return e.id===t}));if(!r)throw new Error("impossible state duplicate selected no matching instance");if(r){var a=r.pos,u=Object.assign({},r,{pos:{x:a.x+20,y:a.y+20},id:(0,i.createInsId)(e)});o.push(u),n.push(u.id)}}))})),newInstances:n}}},24398:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.pasteInstancesCommand=void 0;var i=n(18265),o=r(n(63300));t.pasteInstancesCommand=function(e,t,n){var r=n.instances.map((function(n){return Object.assign({},n,{pos:t,id:(0,i.createInsId)(e)})})),a=new Map(r.map((function(e,t){return[n.instances[t].id,e.id]})));return{newPart:(0,o.default)(e,(function(e){var t,i;(t=e.instances).push.apply(t,r);var o=n.connections.map((function(e){var t=e.from,n=e.to;return{from:Object.assign({},t,{insId:a.get(t.insId)||t.insId}),to:Object.assign({},n,{insId:a.get(n.insId)||n.insId})}}));(i=e.connections).push.apply(i,o)})),newInstances:r}}},95160:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionView=t.SingleConnectionView=void 0;var u=n(27378),s=n(24246),c=o(n(27378)),l=a(n(60042)),d=n(18265),p=n(68488),f=n(64452),v=n(29768),m=n(99743),g=n(42272);t.SingleConnectionView=function(e){var t=(0,v.useSsr)().isBrowser,n=e.connection,r=e.part,i=e.repo,o=e.instances,a=e.type,u=e.viewPort,y=e.toggleHidden,b=e.parentSelected,h=e.removeConnection,I=n.from,C=(0,d.isInternalConnectionNode)(I)&&o.find((function(e){return e.id===I.insId}));if(!C&&(0,d.isInternalConnectionNode)(I))throw new Error('impossible state  - "from instance id - ['+I.insId+'] does not exist"');var P=((0,d.isInternalConnectionNode)(I)&&C?(0,d.getPartDef)(C,i):r).outputs[I.pinId],x=P&&P.delayed,_=t?function(e){var t=e.connection,n=e.boardPos,r=e.parentInsId,i=e.viewPort,o=t.from;return(0,d.isExternalConnectionNode)(o)?(0,p.calcMainInputPosition)(o.pinId,r,"input",n,i):(0,p.calcPinPosition)(r,o.insId,o.pinId,"output",n,i)}(e):{x:0,y:0},j=t?function(e){var t=e.connection,n=e.boardPos,r=e.parentInsId,i=e.viewPort,o=t.to;return(0,d.isExternalConnectionNode)(o)?(0,p.calcMainOutputPosition)(o.pinId,r,"output",n,i):(0,p.calcPinPosition)(r,o.insId,o.pinId,"input",n,i)}(e):{x:0,y:0},O=(0,m.vDiv)(_,e.parentVp.zoom),w=O.x,E=O.y,S=(0,m.vDiv)(j,e.parentVp.zoom),T=S.x,k=S.y,D=(0,l.default)("connection",{delayed:x,hidden:n.hidden,"parent-selected":b},a),N=(0,f.calcBezierPath)({sourceX:w,sourceY:E,targetX:T,targetY:k,curvature:.15}),M=2*u.zoom,R="regular"===a?void 0:6*u.zoom,A=(w+T)/2,V=(E+k)/2,H=c.useCallback((function(e){e.preventDefault(),e.stopPropagation();var t=(0,s.jsxs)(g.Menu,{children:[(0,s.jsx)(g.MenuItem,{text:n.hidden?"Show connection":"Hide connection",onClick:function(){return y(n)}}),(0,s.jsx)(g.MenuItem,{text:"Remove connection",onClick:function(){return h(n)}})]});g.ContextMenu.show(t,{left:e.pageX,top:e.pageY})}),[n,h,y]);return(0,s.jsxs)(c.Fragment,{children:[(0,s.jsx)("path",{d:N,className:D,style:{strokeWidth:M,strokeDasharray:R},onContextMenu:H}),"future-add"===a?(0,s.jsx)("text",{className:"label",x:A,y:V,fontSize:"12px",children:"Add connection"}):null,"future-remove"===a?(0,s.jsx)("text",{className:"label",x:A,y:V,fontSize:"12",children:"Remove connection"}):null]})};t.ConnectionView=function(e){var n=e.viewPort,r=e.futureConnection,i=e.toggleHidden,o=e.selectedInstances,a=c.useState(0),l=a[0],d=a[1],p=c.useCallback((function(e){return requestAnimationFrame((function(){d((function(e){return(e+1)%9})),e>0&&p(e-1)}))}),[]);c.useEffect((function(){var e=p(10);return function(){cancelAnimationFrame(e)}}),[p]),c.useEffect((function(){var e=function(){p(3)};return window.addEventListener("scroll",e),window.addEventListener("resize",e),function(){window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}}),[p,l]);var f=e.connections.map((function(n){var r=o.includes(n.from.insId)||o.includes(n.to.insId);return(0,u.createElement)(t.SingleConnectionView,Object.assign({},e,{connection:n,type:"regular",parentSelected:r,key:n.from.insId+n.from.pinId+n.to.insId+n.to.pinId}))}));return r&&f.push((0,u.createElement)(t.SingleConnectionView,Object.assign({},e,{connection:r.connection,type:r.type,toggleHidden:i,parentSelected:!1,key:"future"}))),(0,s.jsx)("span",{className:"connections-view",style:{opacity:n.zoom},children:(0,s.jsx)("svg",{style:{width:"100%"},children:f})})}},64452:function(e,t){"use strict";var n;function r(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function i(e){var t,i,o=e.pos,a=e.x1,u=e.y1,s=e.x2,c=e.y2,l=e.c;switch(o){case n.Left:t=a-r(a-s,l),i=u;break;case n.Right:t=a+r(s-a,l),i=u;break;case n.Top:t=a,i=u-r(u-c,l);break;case n.Bottom:t=a,i=u+r(c-u,l)}return[t,i]}Object.defineProperty(t,"__esModule",{value:!0}),t.getBezierCenter=t.calcBezierPath=t.Position=void 0,function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(n=t.Position||(t.Position={}));t.calcBezierPath=function(e){var t=e.sourceX,r=e.sourceY,o=e.sourcePosition,a=void 0===o?n.Bottom:o,u=e.targetX,s=e.targetY,c=e.targetPosition,l=void 0===c?n.Top:c,d=e.curvature,p=void 0===d?.25:d,f=i({pos:a,x1:t,y1:r,x2:u,y2:s,c:p}),v=f[0],m=f[1],g=i({pos:l,x1:u,y1:s,x2:t,y2:r,c:p});return"M"+t+","+r+" C"+v+","+m+" "+g[0]+","+g[1]+" "+u+","+s},t.getBezierCenter=function(e){var t=e.sourceX,r=e.sourceY,o=e.sourcePosition,a=void 0===o?n.Bottom:o,u=e.targetX,s=e.targetY,c=e.targetPosition,l=void 0===c?n.Top:c,d=e.curvature,p=void 0===d?.25:d,f=i({pos:a,x1:t,y1:r,x2:u,y2:s,c:p}),v=f[0],m=f[1],g=i({pos:l,x1:u,y1:s,x2:t,y2:r,c:p}),y=.125*t+.375*v+.375*g[0]+.125*u,b=.125*r+.375*m+.375*g[1]+.125*s;return[y,b,Math.abs(y-t),Math.abs(b-r)]}},68488:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcMainOutputPosition=t.calcMainInputPosition=t.calcPinPosition=void 0;var r=n(90095),i={x:99999,y:99999},o=function(e,t,n,r){if(!e)return console.warn("Cannot find element "+n+" to render connection"),i;var o=e.getBoundingClientRect(),a=o.x,u=o.y,s=o.width,c=u+o.height/2;return{x:a+s/2-t.x,y:c-t.y}};t.calcPinPosition=function(e,t,n,i,a,u){var s=(0,r.getPinDomId)(e,t,n,i),c=document.getElementById(s);return o(c,a,s)};t.calcMainInputPosition=function(e,t,n,i,a){var u=(0,r.getMainPinDomId)(t,e,n),s=document.getElementById(u);return o(s,i,u)};t.calcMainOutputPosition=function(e,t,n,i,a){var u=(0,r.getMainPinDomId)(t,e,n),s=document.getElementById(u);return o(s,i,u)}},90095:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMainPinDomId=t.getPinDomId=t.getInstanceDomId=void 0;t.getInstanceDomId=function(e,t){return("ins:"+e+":"+t).replace(/\s+/g,"-")};t.getPinDomId=function(e,t,n,r){return("pin:"+r+":"+e+":"+t+":"+n).replace(/\s+/g,"-")};t.getMainPinDomId=function(e,t,n){return("main-pin:"+e+":"+t+":"+n).replace(/\s+/g,"-")}},57768:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceView=t.getVisibleOutputs=t.getVisibleInputs=t.INSTANCE_INFO_TOOLTIP_DELAY=t.MAX_INSTANCE_WIDTH=t.MIN_WIDTH_PER_PIN=t.PIECE_CHAR_WIDTH=t.PIECE_HORIZONTAL_PADDING=void 0;var c=n(24246),l=u(n(27378)),d=n(92739),p=n(18265),f=s(n(60042)),v=n(57076),m=n(18265),g=n(18265),y=n(71462),b=n(12589),h=n(18265),I=n(90095),C=n(41304),P=n(96149),x=n(42272),_=s(n(31542)),j=n(41978),O=s(n(49040));t.PIECE_HORIZONTAL_PADDING=25,t.PIECE_CHAR_WIDTH=11,t.MIN_WIDTH_PER_PIN=40,t.MAX_INSTANCE_WIDTH=400,t.INSTANCE_INFO_TOOLTIP_DELAY=400;t.getVisibleInputs=function(e,t,n){var r=e.visibleInputs;if(r)return r;var i=(0,p.keys)((0,g.getPartInputs)(t)).filter((function(r,i){var o,a=n.some((function(t){return t.to.insId===e.id&&t.to.pinId===r})),u=t.inputs[r]&&"optional"===(null===(o=t.inputs[r])||void 0===o?void 0:o.mode);return a||!u&&r!==m.TRIGGER_PIN_ID}));return 0===i.length?[m.TRIGGER_PIN_ID]:i};t.getVisibleOutputs=function(e,t,n){var r=e.visibleOutputs;if(r)return r;var i=Object.keys(t.outputs);return n.some((function(t){return t.from.insId===e.id&&t.from.pinId===m.ERROR_PIN_ID}))?[].concat(i,[m.ERROR_PIN_ID]):i};t.InstanceView=function(e){var n=e.selected,o=e.selectedInput,a=e.selectedOutput,u=e.closestPin,s=e.dragged,w=e.onTogglePinLog,E=e.onTogglePinBreakpoint,S=e.onDetachConstValue,T=e.onCopyConstValue,k=e.onPasteConstValue,D=e.displayMode,N=e.connections,M=e.instance,R=e.viewPort,A=e.part,V=e.onPinClick,H=e.onPinDblClick,z=e.onDragStart,G=e.onRequestHistory,q=e.onDragEnd,F=e.onDragMove,L=e.onToggleSticky,B=e.onSelect,U=e.onDblClick,W=e.onChangeVisibleInputs,J=e.onChangeVisibleOutputs,Z=e.onConvertConstToEnv,Y=e.inlineGroupProps,$=e.onUngroup,X=e.onExtractInlinePart,Q=e.onGroupSelected,K=e.isConnectedInstanceSelected,ee=e.inlineEditorPortalDomNode,te=e.onChangeStyle,ne=e.onDeleteInstance,re=e.onSetDisplayName,ie=M.id,oe=l.useMemo((function(){var e=(0,p.randomInt)(6,1);return{icon:(0,p.pickRandom)([["fab","discord"],["fab","slack"],"bug","cube"]),color:e,size:(0,p.randomInt)(3,1),variation:(0,p.randomInt)(5,1)}}),[]),ae=l.useRef(),ue=l.useMemo((function(){return M.style||A.defaultStyle||{}}),[A,M]),se=ue.size||"regular",ce=l.useMemo((function(){return new Map(N.filter((function(e){return e.to.insId===ie})).map((function(e){var t=e.to,n=e.hidden;return[t.pinId,n]})))}),[N,ie]),le=l.useMemo((function(){return new Map(N.filter((function(e){return e.from.insId===ie})).map((function(e){var t=e.from,n=e.hidden;return[t.pinId,n]})))}),[N,ie]),de=(0,P.usePrompt)(),pe=l.useCallback((function(e){return V(M,e,"input")}),[M,V]),fe=l.useCallback((function(e,t){return H(M,e,"input",t)}),[M,H]),ve=l.useCallback((function(e,t){return H(M,e,"output",t)}),[M,H]),me=l.useCallback((function(e){return V(M,e,"output")}),[M,V]),ge=l.useCallback((function(e,t){z(M,e,t)}),[M,z]),ye=l.useCallback((function(e,t){var n=M.pos,r=(t.x-n.x)/R.zoom,i=(t.y-n.y)/R.zoom,o=n.x+r,a=n.y+i;q(M,e,Object.assign({},t,{x:o,y:a}))}),[M,q,R.zoom]),be=l.useCallback((function(e,t){F(M,e,{x:t.x,y:t.y})}),[M,F]),he=l.useCallback((function(e){return L(M,e)}),[M,L]),Ie=l.useCallback((function(e){return S(M,e)}),[M,S]),Ce=l.useCallback((function(e){return T(M,e)}),[M,T]),Pe=l.useCallback((function(e){return k(M,e)}),[M,k]),xe=l.useCallback((function(e){return B(M,e)}),[M,B]),_e=l.useCallback((function(e){return U(M,e.shiftKey)}),[M,U]),je=(0,p.entries)(A.inputs),Oe=M.visibleInputs,we=M.visibleOutputs;Oe&&je.sort((function(e,t){return Oe.indexOf(e[0])-Oe.indexOf(t[0])}));var Ee=(0,p.entries)(A.outputs);we&&Ee.sort((function(e,t){return we.indexOf(e[0])-we.indexOf(t[0])}));var Se=(0,t.getVisibleInputs)(M,A,N),Te=(0,t.getVisibleOutputs)(M,A,N);je.push([m.TRIGGER_PIN_ID,(0,p.partInput)()]),Ee.push([m.ERROR_PIN_ID,(0,m.partOutput)()]);var ke=je.filter((function(e){var t=e[0];return Se.includes(t)||(n||K)&&ce.has(t)})),De=Ee.filter((function(e){var t=e[0];return Te.includes(t)||(n||K)&&le.has(t)})),Ne=(0,f.default)("ins-view",{"no-inputs":0===je.length,"no-outputs":0===Ee.length,"display-mode":D,"force-minimized-input":"input"===e.forceShowMinimized||"both"===e.forceShowMinimized,"force-minimized-output":"output"===e.forceShowMinimized||"both"===e.forceShowMinimized,"inline-part-edited":!!Y}),Me=(0,f.default)({selected:n,dragged:s,closest:u&&u.ins.id===M.id},"size-"+se),Re=new Set((0,p.entries)(A.inputs).filter((function(e){e[0];var t=e[1];return(0,m.isInputPinOptional)(t)})).map(p.pickFirst)),Ae=(0,p.entries)(M.inputConfig).reduce((function(e,t){var n,r=t[0],i=t[1];return(0,m.isStickyInputPinConfig)(i)||i.sticky?Object.assign({},e,((n={})[r]=!0,n)):e}),{}),Ve=(0,y.calcPartContent)(M,A),He=function(e){var t=M.inputConfig[e];if((0,h.isStaticInputPinConfig)(t))return t.value},ze=l.useCallback(i(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,p.okeys)(A.inputs),e.next=3,de("New order?",(M.visibleInputs||t).join(","));case 3:(n=e.sent)&&W(M,n.split(","));case 5:case"end":return e.stop()}}),e)}))),[A.inputs,de,M,W]),Ge=l.useCallback(i(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,p.okeys)(A.outputs),e.next=3,de("New order?",(M.visibleOutputs||t).join(","));case 3:(n=e.sent)&&J(M,n.split(","));case 5:case"end":return e.stop()}}),e)}))),[A.outputs,de,M,J]),qe=l.useCallback((function(){ne(M)}),[ne,M]),Fe=l.useCallback(i(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de("Set custom display name",M.displayName||A.id);case 2:t=e.sent,re(M,t);case 4:case"end":return e.stop()}}),e)}))),[de,M,re,A.id]),Le=Object.keys((0,g.getPartInputs)(A)),Be=Object.keys((0,p.getPartOutputs)(A)),Ue=l.useCallback((function(e,t){return G(M.id,e,t)}),[M,G]),We=l.useCallback((function(e){Z&&Z(M,e)}),[M,Z]),Je=function(){return(0,c.jsx)("div",{className:"inputs no-drag",children:ke.map((function(t){var r,i=t[0],a=t[1];return(0,c.jsx)(v.PinView,{type:"input",insId:M.id,parentInsId:e.parentInsId,id:i,optional:Re.has(i),connected:ce.has(i),isSticky:Ae[i],minimized:!n&&1===ke.length,onToggleSticky:he,onDetachConstValue:Ie,onCopyConstValue:Ce,onPasteConstValue:Pe,copiedConstValue:e.copiedConstValue,selected:i===o,onClick:pe,onDoubleClick:fe,isClosestToMouse:!!u&&"input"===u.type&&u.pin===i,onToggleLogged:w,onToggleBreakpoint:E,onInspect:e.onInspectPin,constValue:He(i),onRequestHistory:Ue,onConvertConstToEnv:e.onConvertConstToEnv?We:void 0,description:a.description,queuedValues:null!==(r=e.queuedInputsData[i])&&void 0!==r?r:0},i)}))})},Ze=function(){return(0,c.jsx)("div",{className:"outputs no-drag",children:De.map((function(t){var r=t[0],i=t[1];return(0,c.jsx)(v.PinView,{insId:M.id,parentInsId:e.parentInsId,connected:le.has(r),type:"output",id:r,minimized:!n&&1===De.length,isClosestToMouse:!!u&&"output"===u.type&&u.pin===r,selected:r===a,onClick:me,onDoubleClick:ve,onToggleLogged:w,onToggleBreakpoint:E,onInspect:e.onInspectPin,onRequestHistory:Ue,description:i.description},r)}))})},Ye=l.useCallback((function(e){te(M,e)}),[M,te]),$e=l.useCallback((function(){var e=Le.map((function(e){var t=Se.includes(e),n=ce.has(e)&&!0!==ce.get(e),r=(0,p.getInputName)(e);return{text:t?n?'Hide input "'+r+'" (disconnect first)':'Hide input "'+r+'"':'Show input "'+r+'"',onClick:function(){return W(M,t?Se.filter((function(t){return t!==e})):[].concat(Se,[e]))},disabled:n&&t}})),t=Be.map((function(e){var t=Te.includes(e),n=le.has(e),r=(0,p.getOutputName)(e);return{text:t?n?'Hide output "'+r+'" (disconnect first)':'Hide output "'+r+'"':'Show output "'+r+'"',onClick:function(){return J(M,t?Te.filter((function(t){return t!==e})):[].concat(Te,[e]))},disabled:n&&t}})),n=[].concat(e,t,(0,p.isInlinePartInstance)(M)&&(0,g.isVisualPart)(M.part)?[{text:"Ungroup inline part",onClick:function(){return $(M)}}]:[],(0,p.isInlinePartInstance)(M)?[{text:"Extract inline part to file",onClick:function(){return X(M)}}]:[],[{text:"Reorder inputs",onClick:ze},{text:"Reorder outputs",onClick:Ge},{text:"Set display name",onClick:Fe},{text:"Group selected instances",onClick:Q},{text:"Delete instance",intent:"danger",onClick:qe}]);return(0,c.jsxs)(x.Menu,{children:[(0,c.jsx)(x.MenuItem,{text:"Style",children:(0,c.jsx)(j.PartStyleMenu,{style:ue,onChange:Ye,promptFn:de})}),n.map((function(e){return(0,c.jsx)(x.MenuItem,Object.assign({},e))}))]})}),[Le,Be,M,ze,Ge,Fe,qe,ue,Ye,de,Se,ce,W,Te,le,J,$,X,Q]),Xe=l.useCallback((function(e){e.preventDefault(),e.stopPropagation();var t=$e();x.ContextMenu.show(t,{left:e.clientX,top:e.clientY})}),[$e]),Qe=Object.assign({"--part-color":ue.color},ue.cssOverride||{}),Ke=(0,I.getInstanceDomId)(e.parentInsId,M.id);return(0,c.jsx)("div",{className:Ne,children:(0,c.jsxs)(b.BasePartView,{pos:M.pos,viewPort:R,onDragStart:ge,onDragMove:be,onDragEnd:ye,upperRenderer:Je,bottomRenderer:Ze,displayMode:D,domId:Ke,children:[(0,c.jsx)(O.default,{className:"instance-info-tooltip",html:!0,id:Ke+"__tooltip",delayShow:t.INSTANCE_INFO_TOOLTIP_DELAY}),Je(),Y?_.default.createPortal((0,c.jsxs)("div",{className:"inline-group-editor-container no-drag",children:[(0,c.jsxs)("header",{children:[Ve," ",(0,c.jsx)("button",{onClick:e.onCloseInlineEditor,children:"close"})]}),(0,c.jsx)(C.VisualPartEditor,Object.assign({},e.inlineGroupProps,{className:"no-drag",ref:ae}))]}),ee):(0,c.jsxs)("div",{className:(0,f.default)("ins-view-inner",Me,"size-"+oe.size),onClick:xe,onDoubleClick:_e,onContextMenu:Xe,style:Qe,"data-tip":A.description,"data-for":Ke+"__tooltip",children:[ue.icon?(0,c.jsx)(d.FontAwesomeIcon,{icon:ue.icon}):null," ",Ve]}),Ze()]})})}},91530:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PartStyleMenu=void 0;var s=n(24246),c=n(42272),l=u(n(27378)),d=n(40232),p={size:"regular"};t.PartStyleMenu=function(e){var t=e.onChange,n=e.style||p,o=e.promptFn,a=l.default.useCallback((function(e,r){var i;t(Object.assign({},n,((i={})[e]=r,i)))}),[n,t]),u=l.default.useCallback(i(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("Icon name? (Font Awesome conventions)","rocket");case 2:t=e.sent,n=t.includes(",")?t.split(","):t,a("icon",n);case 5:case"end":return e.stop()}}),e)}))),[o,a]),f=(0,l.useCallback)(i(r().mark((function e(){var t,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("Enter a custom style (valid JSON representing a React CSS object)",n.cssOverride?JSON.stringify(n.cssOverride):"");case 2:t=e.sent;try{i=JSON.parse(t),a("cssOverride",i)}catch(r){console.error(r),(0,d.toastMsg)("Invalid object","danger")}case 4:case"end":return e.stop()}}),e)}))),[o,a,n.cssOverride]);return(0,s.jsxs)(l.default.Fragment,{children:[(0,s.jsxs)(c.MenuItem,{text:"Color",children:[(0,s.jsx)(c.MenuItem,{text:"Amethyst",onClick:function(){return a("color","#9b5de5")}}),(0,s.jsx)(c.MenuItem,{text:"Magenta",onClick:function(){return a("color","#f15bb5")}}),(0,s.jsx)(c.MenuItem,{text:"Yellow",onClick:function(){return a("color","#fee440")}}),(0,s.jsx)(c.MenuItem,{text:"Capri",onClick:function(){return a("color","#00bbf9")}}),(0,s.jsx)(c.MenuItem,{text:"Sea Green",onClick:function(){return a("color","#00f5d4")}}),(0,s.jsx)(c.MenuDivider,{}),(0,s.jsx)(c.MenuItem,{text:"Remove Color",onClick:function(){return a("color",void 0)}})]}),(0,s.jsxs)(c.MenuItem,{text:"Size ("+n.size+")",children:[(0,s.jsx)(c.MenuItem,{text:"Small",onClick:function(){return a("size","small")}}),(0,s.jsx)(c.MenuItem,{text:"Regular",onClick:function(){return a("size","regular")}}),(0,s.jsx)(c.MenuItem,{text:"Large",onClick:function(){return a("size","large")}})]}),(0,s.jsxs)(c.MenuItem,{text:"Icon",children:[(0,s.jsx)(c.MenuItem,{text:"Choose Icon",onClick:u}),(0,s.jsx)(c.MenuItem,{text:"Remove Icon",onClick:function(){return a("icon",void 0)}})]}),(0,s.jsx)(c.MenuItem,{text:"Custom Styling",onClick:f})]})}},41978:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(91530),t)},41756:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(57768),t)},71462:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.calcInstancePosition=t.calcPartWidth=t.calcPartContent=void 0;var a=n(18265),u=o(n(78284)),s=n(12901),c=n(57768),l=n(98784),d=n(90095);t.calcPartContent=function(e,t){if(e.displayName)return e.displayName;if(t.customViewCode)try{var n=Object.entries(e.inputConfig).filter((function(e){var t=e[1];return(0,a.isStaticInputPinConfig)(t)})).reduce((function(e,t){var n,r=t[0],i=t[1];return Object.assign({},e,((n={})[r]=i.value,n))}),{});return u.render(t.customViewCode,{inputs:n,isDefined:s.isDefined}).trim()}catch(r){return console.error("Error with custom view",r),"Error in custom view ["+t.id+"]"}return t.id};t.calcPartWidth=function(e,n){var r=(0,a.okeys)(n.inputs).length*c.MIN_WIDTH_PER_PIN,i=(0,t.calcPartContent)(e,n),o=c.PIECE_CHAR_WIDTH;return(0,l.clamp)(i.length*o+2*c.PIECE_HORIZONTAL_PADDING,r,c.MAX_INSTANCE_WIDTH)};t.calcInstancePosition=function(e,t,n){var r=(0,d.getInstanceDomId)(t,e),i=document.getElementById(r);if(i){var o=i.getBoundingClientRect(),a=o.x,u=o.y,s=o.width,c=u+o.height/2;return{x:a+s/2-n.x,y:c-n.y}}return console.warn("Cannot find element to draw connection to",r),{x:99999,y:99999}}},10616:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutDebugger=t.LayoutDebuggerItem=t.PosDebugger=void 0;var i=n(27378),o=n(24246),a=n(18265),u=r(n(27378)),s=n(13011),c=function(e){var t=e.pos;return(0,o.jsxs)("span",{children:[t.x.toFixed(1),", ",t.y.toFixed(1)]})};t.PosDebugger=function(e){return(0,o.jsx)("span",{className:"pos-debugger",children:(0,o.jsx)(c,{pos:e.pos})})};t.LayoutDebuggerItem=function(e){var n=e.pos,r=e.viewPort,i=e.size,a=e.color,u=r.zoom,s=n.x*u-r.pos.x*u,c=n.y*u-r.pos.y*u,l={transform:"translate("+(s-n.x)+"px, "+(c-n.y)+"px)"},d={transform:"scale("+r.zoom+")"},p={transform:"translate("+n.x+"px, "+n.y+"px)"},f={width:i.width+"px",height:i.height+"px",backgroundColor:a};return(0,o.jsx)("div",{className:"layout-debugger",style:l,children:(0,o.jsxs)("span",{className:"drag-sim",style:p,children:[(0,o.jsx)(t.PosDebugger,{pos:n}),(0,o.jsx)("div",{className:"layout-debugger-zoom-wrapper",style:d,children:(0,o.jsx)("div",{className:"layout-debugger-inner",style:f})})]})})};var l=function(){try{return"true"===localStorage.getItem("pos-debugger")}catch(e){return!1}}();t.LayoutDebugger=function(e){var n=e.extraDebug,r=e.vp,d=e.part,p=e.mousePos;if(!l)return null;var f=n.map((function(e,n){return(0,i.createElement)(t.LayoutDebuggerItem,Object.assign({},e,{key:n}))})),v=[].concat(d.instances.map((function(e){return e.pos})),(0,a.values)(d.inputsPosition),(0,a.values)(d.outputsPosition)).map((function(e){return(0,o.jsx)(t.LayoutDebuggerItem,{pos:e,viewPort:r,size:{width:0,height:0},color:"red"})})),m=(0,s.logicalPosToRenderedPos)(p,r),g=(0,o.jsxs)("div",{className:"viewport-data",children:[(0,o.jsxs)("div",{children:["Pos: ",(0,o.jsx)(c,{pos:r.pos})]}),(0,o.jsxs)("div",{children:["Zoom: ",r.zoom.toFixed(2)," "]}),(0,o.jsxs)("div",{children:["Mouse (logical): ",(0,o.jsx)(c,{pos:p})]}),(0,o.jsxs)("div",{children:["Rendered (rendered): ",(0,o.jsx)(c,{pos:m})]})]});return(0,o.jsxs)(u.default.Fragment,{children:[g,f,v]})}},94e3:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(10616),t)},5681:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.orderVisualPart=t.layoutToInstances=void 0;var i=n(41304),o=n(18265),a=n(72913),u=r(n(63300)),s=n(80807),c=n(99743),l=n(71462);t.layoutToInstances=function(e,t){return(0,u.default)(t,(function(t){(0,o.entries)(e.nodes).forEach((function(e){var n=e[0],r=e[1];if(n.startsWith("ins-")){var i=n.replace("ins-",""),o=t.instances.find((function(e){return e.id===i}));o?o.pos=r.p:console.warn("WAT")}if(n.startsWith("part-input-")){var a=n.replace("part-input-","");t.inputsPosition[a]=r.p}if(n.startsWith("part-output-")){var u=n.replace("part-output-","");t.outputsPosition[u]=r.p}}))}))};t.orderVisualPart=function(e,n,r,u){var d=e.instances,p=e.connections,f=d.reduce((function(e,t){var r,a=(0,c.size)((0,l.calcPartWidth)(t,(0,o.getPartDef)(t,n)),i.PART_HEIGHT);return Object.assign({},e,((r={})["ins-"+t.id]={p:t.pos,s:a},r))}),{}),v=(0,o.okeys)(e.inputsPosition).reduce((function(t,n){var r,o=e.inputsPosition[n],a=(0,c.size)((0,s.calcPartIoWidth)(n),i.PART_HEIGHT);return Object.assign({},t,((r={})["part-input-"+n]={p:o,s:a},r))}),{}),m=(0,o.okeys)(e.outputsPosition).reduce((function(t,n){var r,o=e.outputsPosition[n],a=(0,c.size)((0,s.calcPartIoWidth)(n),i.PART_HEIGHT);return Object.assign({},t,((r={})["part-output-"+n]={p:o,s:a},r))}),{}),g=Object.assign({},f,v,m),y=p.map((function(e){return[(0,o.isExternalConnectionNode)(e.from)?"part-input-"+e.from.pinId:"ins-"+e.from.insId,(0,o.isExternalConnectionNode)(e.to)?"part-output-"+e.to.pinId:"ins-"+e.to.insId]})),b=(0,a.orderLayout)({nodes:g,edges:y},r,(function(n,r){u&&u((0,t.layoutToInstances)(n,e),r)}));return(0,t.layoutToInstances)(b,e)}},72913:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.orderLayout=void 0;var r=n(99743),i=400,o=function(e){return e.reduce((function(e,t){var n,i=(0,r.vSub)(t.p,(0,r.vec)(t.s.width/2,t.s.height/2));return Object.assign({},e,((n={})[t.id]={p:i,s:t.s},n))}),{})};t.orderLayout=function(e,t,n){for(var a=e.nodes,u=e.edges,s=Object.entries(a).map((function(e){var t=e[0],n=e[1];return{id:t,p:(0,r.vAdd)(n.p,(0,r.vec)(n.s.width/2,n.s.height/2)),f:(0,r.vec)(0,0),v:(0,r.vec)(0,0),m:1,s:n.s}})),c=0,l=function(){for(var e=s,t=0;t<e.length;t++)for(var a=t+1;a<e.length;a++)if(t!==a){var l=e[t],d=e[a],p=(0,r.vSub)(l.p,d.p),f=Math.abs(p.x),v=Math.abs(p.y),m=l.id.startsWith("part-input"),g=l.id.startsWith("part-output"),y=d.id.startsWith("part-input"),b=d.id.startsWith("part-output");if(f<i&&v<80){var h=1e3*(i-f);l.f=(0,r.vAdd)(l.f,(0,r.vec)(.5*h,0)),d.f=(0,r.vAdd)(d.f,(0,r.vec)(-.5*h,0))}if(v<50){var I=100*p.y;l.f=(0,r.vAdd)(l.f,(0,r.vec)(0,.5*I)),d.f=(0,r.vAdd)(d.f,(0,r.vec)(0,-.5*I))}if(m&&b){var C=(0,r.vSub)(l.p,d.p).y;if(C<-500){var P=100*(i-C);l.f=(0,r.vAdd)(l.f,(0,r.vec)(0,-.5*P)),d.f=(0,r.vAdd)(d.f,(0,r.vec)(0,.5*P))}}else if(g&&y){var x=(0,r.vSub)(l.p,d.p).y;if(x<500){var _=100*(i-x);l.f=(0,r.vAdd)(l.f,(0,r.vec)(0,-.5*_)),d.f=(0,r.vAdd)(d.f,(0,r.vec)(0,.5*_))}}var j=(0,r.vSub)(l.p,(0,r.vec)(0,l.p.y)),O=(0,r.vLen)(j),w=(0,r.vMul)((0,r.vNorm)(j),-50*O);l.f=(0,r.vAdd)(l.f,w)}u.forEach((function(t){var n=e.find((function(e){return e.id===t[0]})),i=e.find((function(e){return e.id===t[1]}));if(n&&i){var o=(0,r.vec)(0,-200),a=(0,r.vSub)(n.p,i.p),u=(0,r.vSub)(o,a),s=1e3*(0,r.vLen)(u),c=(0,r.vMul)((0,r.vNorm)(u),.5*s),l=(0,r.vMul)((0,r.vNorm)(u),-.5*s);n.f=(0,r.vAdd)(n.f,c),i.f=(0,r.vAdd)(i.f,l)}else console.warn("weoops",t[0],t[1])})),e=(e=e.map((function(e){return(0,r.itrPhysics)(15,e)}))).map((function(e){var t=(0,r.vMul)(e.v,.5),n=(0,r.vLen)(t)>100?(0,r.vMul)((0,r.vNorm)(t),100):t;return Object.assign({},e,{v:n})})),s=e,n&&n({nodes:o(e),edges:u},c),c++};c<t&&(c<2||(0,r.totalEnergy)(s)>.01);)l();return{nodes:o(s),edges:u,itrs:c,timeout:c>=t,total:(0,r.totalEnergy)(s)}}},52688:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateInstancesWithSingleConstPinsMap=t.getLeafInstancesOfSelection=void 0;t.getLeafInstancesOfSelection=function(e,t,n){return e.reduce((function(e,r){var i=n.filter((function(e){return e.to.insId===r.id})).map((function(e){return t.find((function(t){return t.id===e.from.insId}))})).filter((function(e){return!!e}));return[].concat(e,i)}),[]).filter((function(t){return 1===n.filter((function(e){return e.from.insId===t.id||e.to.insId===t.id})).length&&!e.includes(t)}))};t.calculateInstancesWithSingleConstPinsMap=function(e,t){return e.connections.filter((function(e){return t.has(e.from.insId)})).reduce((function(e,n){var r=t.get(n.from.insId),i=n.to.insId,o=e.get(i)||new Map;return o.set(n.to.pinId,{val:r,insId:n.from.insId}),e.set(i,o),e}),new Map)}},16914:function(e,t,n){"use strict";var r=n(48357).default,i=n(1145).default,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PartIoView=void 0;var c=n(24246),l=u(n(27378)),d=n(18265),p=n(12589),f=n(90095),v=s(n(60042)),m=n(42272),g=n(91312),y=n(40411),b=n(18265),h=s(n(49040));t.PartIoView=l.memo((function(e){var t=e.viewPort,n=e.selected,o=e.pos,a=e.type,u=e.id,s=e.onDblClick,I=e.onRename,C=e.onDelete,P=e.onChangeInputMode,x=e.inputMode,_=e.onSelect,j=e.closest,O=e.onSetDescription,w=e.description,E=e.onRequestHistory,S=(0,y.useHistoryHelpers)(E,u,a),T=S.history,k=S.resetHistory,D=S.refreshHistory,N=(0,g.usePrompt)(),M=l.useCallback(i(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("Description?",w);case 2:t=e.sent,O(a,u,t);case 4:case"end":return e.stop()}}),e)}))),[N,w,O,a,u]),R=l.useCallback((function(){C&&C(a,u)}),[a,u,C]),A=l.useCallback((function(){I&&I(a,u)}),[a,u,I]),V=l.useCallback((function(e){P&&P(u,e)}),[u,P]),H=l.useCallback((function(){return[{text:"Current mode - "+x,onClick:d.noop},{text:"Make required",onClick:function(){return V("required")}},{text:"Make optional",onClick:function(){return V("optional")}},{text:"Make required-if-connected",onClick:function(){return V("required-if-connected")}},{text:"Set description",onClick:M}].concat(e.onRename?[{text:"Rename",onClick:A}]:[],e.onDelete?[{text:"Delete",onClick:R}]:[])}),[M,x,V,R,A,e.onDelete,e.onRename]),z=l.useCallback((function(t){s&&s(e.id,t)}),[s,e.id]),G=l.useCallback((function(){_(u,a)}),[u,a,_]),q=l.useCallback((function(){return(0,c.jsx)(m.Menu,{children:H().map((function(e){return(0,c.jsx)(m.MenuItem,Object.assign({},e))}))})}),[H]),F=l.useCallback((function(e){e.preventDefault(),e.stopPropagation();var t=q();m.ContextMenu.show(t,{left:e.clientX,top:e.clientY})}),[q]),L="input"===a?(0,b.getInputName)(u):(0,d.getOutputName)(u);return(0,c.jsxs)(p.BasePartView,{className:(0,v.default)("part-io-view",a),pos:o,onDragEnd:function(n,r){var i=e.pos,o=(r.x-i.x)/t.zoom,s=(r.y-i.y)/t.zoom,c=i.x+o,l=i.y+s;e.onDragEnd(a,u,n,Object.assign({},r,{x:c,y:l}))},onDragStart:function(t,n){e.onDragStart(u,t,n)},onDragMove:function(n,r){var i=e.pos,o=(r.x-i.x)/t.zoom,s=(r.y-i.y)/t.zoom,c=i.x+o,l=i.y+s;e.onDragMove(a,u,n,Object.assign({},r,{x:c,y:l}))},viewPort:t,children:[(0,c.jsx)(h.default,{className:"pin-info-tooltip",html:!0,id:u+e.insId,getContent:[function(){var t=(0,y.calcHistoryContent)(T),n=e.description?"<em>"+e.description+"</em>":"";return"<div><div><strong>"+L+"</strong> ("+a+") </div>\n      "+n+"\n      <hr/>\n      "+t+"\n    "},25]}),(0,c.jsx)("div",{onMouseEnter:D,onMouseOut:k,"data-tip":"","data-html":!0,"data-for":u+e.insId,className:(0,v.default)("part-io-view-inner",{closest:j,selected:n}),id:(0,f.getMainPinDomId)(e.insId,u,a),onClick:G,onDoubleClick:z,onContextMenu:F,children:u})]})}))},43318:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(16914),t)},80807:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcPartIoWidth=t.MIN_WIDTH_PER_PIN=t.PIECE_CHAR_WIDTH=t.PIECE_HORIZONTAL_PADDING=void 0,t.PIECE_HORIZONTAL_PADDING=15,t.PIECE_CHAR_WIDTH=9,t.MIN_WIDTH_PER_PIN=40;t.calcPartIoWidth=function(e){return Math.max(t.MIN_WIDTH_PER_PIN,e.length*t.PIECE_CHAR_WIDTH+2*t.PIECE_HORIZONTAL_PADDING)}},57076:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PinView=t.PIN_HEIGHT=void 0;var u=n(24246),s=o(n(27378)),c=a(n(60042)),l=n(42272),d=n(12901),p=n(18265),f=n(90095),v=n(75579),m=a(n(49040)),g=n(40411);t.PIN_HEIGHT=23;t.PinView=s.memo((function(e){var t=e.selected,n=e.type,r=e.connected,i=e.rotate,o=e.optional,a=e.isClosestToMouse,y=e.id,b=e.onRequestHistory,h=(0,g.useHistoryHelpers)(b,y,n),I=h.history,C=h.resetHistory,P=h.refreshHistory,x="input"===n?(0,p.getInputName)(y):(0,p.getOutputName)(y),_="input"===e.type&&(0,d.isDefined)(e.constValue)?e.constValue:void 0,j=i&&"input"===n;return(0,u.jsxs)("div",{className:function(){if("input"===e.type){var u=e.isSticky,s=e.constValue;return(0,c.default)("pin",{sticky:u,selected:t,closest:a,optional:o,connected:r,rotate:i,"const-value":(0,d.isDefined)(s),"env-value":(0,d.isDefined)(s)&&(0,p.isEnvValue)(s),minimized:e.minimized},n)}return(0,c.default)("pin",{selected:t,connected:r,closest:a,rotate:i,optional:o,minimized:e.minimized},n,i)}(),"data-pin-id":y,children:[(0,u.jsx)(m.default,{className:"pin-info-tooltip",html:!0,id:y+e.insId,getContent:[function(){var t=(0,g.calcHistoryContent)(I,"input"===n?e.queuedValues:void 0),r=e.description?"<em>"+e.description+"</em>":"";return"<div><div><strong>"+x+"</strong> ("+n+") </div>\n      "+r+"\n      <hr/>\n      "+((0,d.isDefined)(_)?"<div>Static value: <strong>"+(0,v.valuePreview)(_).substr(0,200)+"</strong></div>":t)+"\n    "},25]}),(0,u.jsxs)("div",{onMouseEnter:P,onMouseOut:C,"data-tip":"","data-html":!0,"data-for":y+e.insId,id:(0,f.getPinDomId)(e.parentInsId,e.insId,y,n),"data-place":j?"bottom":null,onDoubleClick:function(t){return e.onDoubleClick&&e.onDoubleClick(y,t)},className:"pin-inner",onContextMenu:function(t){t.preventDefault(),t.stopPropagation();var n=function(){var t=(0,u.jsx)(l.MenuItem,{onClick:function(){return e.onToggleLogged(e.insId,e.id,e.type)}}),n=(0,u.jsx)(l.MenuItem,{onClick:function(){return e.onToggleBreakpoint(e.insId,e.id,e.type)}}),r=(0,u.jsx)(l.MenuItem,{onClick:function(){return e.onInspect(e.insId,{id:e.id,type:e.type})},text:"Inspect"});if("input"===e.type){var i=e.onConvertConstToEnv;return(0,d.isDefined)(_)?(0,u.jsxs)(l.Menu,{children:[(0,u.jsx)(l.MenuItem,{onClick:function(){return e.onDetachConstValue(e.id)},text:"Detach value"}),(0,u.jsx)(l.MenuItem,{onClick:function(){return e.onCopyConstValue(e.id)},text:"Copy value"}),(0,d.isDefined)(e.copiedConstValue)?(0,u.jsx)(l.MenuItem,{onClick:function(){return e.onPasteConstValue(e.id)},text:"Paste value"}):null,i?(0,u.jsx)(l.MenuItem,{onClick:function(){return i(e.id)},text:"Convert to Env Var"}):null]}):(0,u.jsxs)(l.Menu,{children:[(0,u.jsx)(l.MenuItem,{onClick:function(){return e.onToggleSticky(e.id)},text:"Toggle sticky (square means sticky)"}),t,n,r,(0,d.isDefined)(e.copiedConstValue)?(0,u.jsx)(l.MenuItem,{onClick:function(){return e.onPasteConstValue(e.id)},text:"Paste value"}):null]})}return(0,u.jsx)(l.Menu,{children:r})}();l.ContextMenu.show(n,{left:t.clientX,top:t.clientY})},onClick:function(t){var r=e.onShiftClick,i=e.onClick,o=e.id;t.shiftKey&&r?r(o,t):i(o,n,t)},children:[x," ",(0,d.isDefined)(_)?(0,u.jsxs)(s.Fragment,{children:[":",(0,u.jsx)("span",{className:"value",children:(0,d.toString)(_)})]}):null,"input"===e.type&&e.isSticky?(0,u.jsx)("span",{className:"suffix",children:"s"}):null,"input"===e.type&&e.queueSize?(0,u.jsxs)("span",{className:"suffix",children:[e.queueSize," in Q"]}):null]}),(0,u.jsx)("div",{className:"wire"})]})}))},40411:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useHistoryHelpers=t.calcHistoryContent=void 0;var i=n(75579),o=r(n(27378)),a=n(27378);t.calcHistoryContent=function(e,t){if(e){var n=e.total,r=e.lastSamples;return"<strong>Activated "+n+" times this session</strong>"+" "+(r.length>0?"<div>Last value: <strong>"+(0,i.valuePreview)(r[0].val).substring(0,200)+"</strong></div><em>Inspect instance for the full value</em>":"")+(t?"<hr/><div>Queued values: <strong>"+t+"</strong></div>":"")}return"Loading session data.."};t.useHistoryHelpers=function(e,t,n){var r=(0,a.useRef)(),i=(0,a.useState)(),u=i[0],s=i[1];return{history:u,refreshHistory:(0,a.useCallback)((function(){clearInterval(r.current),e(t,n).then((function(e){s(e)})),r.current=setInterval((function(){e(t,n).then((function(e){s(e)}))}),500)}),[e,t,n]),resetHistory:o.default.useCallback((function(){clearInterval(r.current),s(void 0)}),[])}}},40490:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.QuickAddMenu=void 0;var a=n(24246),u=o(n(27378)),s=n(18265),c=n(42272),l=n(18264),d=n(10934),p=l.Select.ofType(),f=function(e){switch(e.type){case"part":return""+e.part.id;case"value":return"Add inline value or function";case"import":return"Import "+e.importablePart.part.id+" from "+e.importablePart.module}},v=function(e,t){var n=t.handleClick,r=t.modifiers,i=t.query;if(!r.matchesPredicate)return null;var o=f(e);return"value"===e.type?(0,a.jsxs)(u.Fragment,{children:[(0,a.jsx)(c.MenuDivider,{}),(0,a.jsx)(c.MenuItem,{active:r.active,disabled:r.disabled,onClick:n,text:(0,d.highlightText)(o,i)},f(e))]}):(0,a.jsx)(c.MenuItem,{active:r.active,disabled:r.disabled,onClick:n,text:(0,d.highlightText)(o,i)},f(e))},m=function(e,t,n,r){var i=f(t).toLocaleLowerCase(),o=e.toLowerCase();return r?i===o:i.includes(o)};t.QuickAddMenu=function(e){var t,n=e.resolvedFlow,r=e.onRequestImportables,i={left:e.pos.x,top:e.pos.y},o=u.useState(),l=o[0],d=o[1];u.useEffect((function(){r&&r("").then(d)}),[r]);var f=(0,s.values)(Object.assign({},n.dependencies,((t={})[n.main.id]=n.main,t))),g=f.map((function(e){return{type:"part",part:e}})),y=new Set(f.map((function(e){return e.id}))),b=l?l.filter((function(e){return!y.has(e.part.id)})).map((function(e){return{type:"import",importablePart:e}})):[],h=g.concat(b).concat({type:"value"});return(0,a.jsx)("div",{className:"quick-add-menu",style:i,children:(0,a.jsx)(p,{className:"quick-add-parts-select",items:h,itemPredicate:m,itemRenderer:v,inputProps:{className:"quick-add-input"},noResults:(0,a.jsx)(c.MenuItem,{disabled:!0,text:"No results."}),onItemSelect:function(t){return e.onAdd(t)},popoverProps:{isOpen:!0,onClose:function(){return e.onClose()}}})})}},29841:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(40490),t)},70030:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRuntimePlayer=void 0;var r=n(18265),i=n(22940),o=(0,r.debugLogger)("runtime-player");t.createRuntimePlayer=function(e){var t=0,n=[],r=!1,a=Date.now(),u=t,s=function s(){return requestAnimationFrame((function(){var c,l,d,p=Date.now();u=t,t+=p-a,a=p,c=u,l=t,d=n,n=[],d.length&&o("Playing "+d.length+" events from",c,l),d.forEach((function(t){o("Playing event",t),(0,i.playEvent)(e,t)})),r&&s()}))},c=function(){r=!1},l=function(){n=[],document.querySelectorAll("[data-runtime]").forEach((function(e){e.removeAttribute("data-runtime")})),document.querySelectorAll("[data-runtime-queue]").forEach((function(e){e.removeAttribute("data-runtime-queue")}))};return{stop:c,start:function(e){void 0===e&&(e=0),r=!0,t=e,a=Date.now(),s()},addEvents:function(e){var t;(t=n).push.apply(t,e)},destroy:function(){c(),l()},clear:l,status:function(){return{running:r,currDt:t,lastDt:u,queue:n,last:a}}}}},22940:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.playEvent=t.cancelTimers=void 0;var r=n(18265),i=n(90095),o=5e3,a=(0,r.debugLogger)("runtime-player:play-event"),u=function(e){return e.type===r.DebuggerEventType.INPUT_CHANGE||e.type===r.DebuggerEventType.OUTPUT_CHANGE?e.parentInsId+"."+e.insId+"."+e.pinId:e.parentInsId+"."+e.insId};t.cancelTimers=new Map;t.playEvent=function(e,n){var s,c,l=u(n);switch(n.type){case r.DebuggerEventType.INPUT_CHANGE:case r.DebuggerEventType.OUTPUT_CHANGE:var d=n.pinId,p=n.insId,f=n.parentInsId,v=n.type===r.DebuggerEventType.INPUT_CHANGE?"input":"output",m=p===e?(0,i.getMainPinDomId)(p,d,v):(0,i.getPinDomId)(f,p,d,v),g=document.getElementById(m),y=p+"."+d,b=n.type===r.DebuggerEventType.OUTPUT_CHANGE?document.querySelectorAll('[data-from-id="'+y+'"]'):[];if(g){clearTimeout(t.cancelTimers.get(l)),g.removeAttribute("data-runtime"),b.forEach((function(e){e.removeAttribute("data-runtime")})),setTimeout((function(){g.setAttribute("data-runtime","active"),b.forEach((function(e){e.setAttribute("data-runtime","active")}))}),0);var h=setTimeout((function(){g.removeAttribute("data-runtime"),b.forEach((function(e){e.removeAttribute("data-runtime")})),t.cancelTimers.delete(l)}),o);t.cancelTimers.set(u(n),h)}else console.warn("No DOM element with Id ["+m+"] found to play event"),a("No DOM element with Id ["+m+"] found to play event",n);break;case r.DebuggerEventType.PROCESSING_CHANGE:var I=n.insId,C=n.parentInsId,P=(0,i.getInstanceDomId)(C,I),x=null===(s=document.getElementById(P))||void 0===s?void 0:s.parentElement;if(!x)return void a("No DOM element with Id ["+P+"] found to play event",n);if(!0===n.val)x.setAttribute("data-runtime","processing"),clearTimeout(t.cancelTimers.get(l));else{x.removeAttribute("data-runtime"),setTimeout((function(){x.setAttribute("data-runtime","done")}),0);var _=setTimeout((function(){x.removeAttribute("data-runtime"),t.cancelTimers.delete(l)}),o);t.cancelTimers.set(l,_)}break;case r.DebuggerEventType.ERROR:var j=n.insId,O=n.parentInsId,w=(0,i.getInstanceDomId)(O,j),E=null===(c=document.getElementById(w))||void 0===c?void 0:c.parentElement;if(!E)return void a("No DOM element with Id ["+w+"] found to play event",n);clearTimeout(t.cancelTimers.get(l)),E.removeAttribute("data-runtime"),setTimeout((function(){E.setAttribute("data-runtime","error")}));var S=setTimeout((function(){E.removeAttribute("data-runtime"),t.cancelTimers.delete(l)}),o);t.cancelTimers.set(l,S);var T=Object.assign({},n,{type:r.DebuggerEventType.OUTPUT_CHANGE,pinId:r.ERROR_PIN_ID});(0,t.playEvent)(e,T);break;case r.DebuggerEventType.INPUTS_STATE_CHANGE:(0,r.entries)(n.val).forEach((function(e){var t=e[0],r=e[1],o=n.insId,u=n.parentInsId,s=(0,i.getPinDomId)(u,o,t,"input"),c=document.getElementById(s);c?r>0?c.setAttribute("data-runtime-queue",""+r):c.removeAttribute("data-runtime-queue"):a("No DOM element with Id ["+s+"] found to play event",n)}))}}},69385:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useDebounce=void 0;var r=n(27378);t.useDebounce=function(e,t){var n=(0,r.useState)(e),i=n[0],o=n[1];return(0,r.useEffect)((function(){var n=setTimeout((function(){o(e)}),t);return function(){clearTimeout(n)}}),[e,t]),[i,o]}},13011:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.handleChangePartInputType=t.handleIoPinRename=t.handleInstanceDrag=t.getInstancesInRect=t.isJsxValue=t.getMiddleOfViewPort=t.fitViewPortToPart=t.centerBoardPosOnTarget=t.renderedPosToLogicalPos=t.logicalPosToRenderedPos=t.getEffectivePartDimensions=t.calcPartsPositions=t.calcSelectionBoxArea=t.animateViewPort=t.easeInOutNum=t.easeInOutPos=t.easeInOutQuad=t.center=t.distance=t.clamp=t.domToViewPort=t.roundNumber=t.createNewPartInstance=t.createNewInlinePartInstance=t.parseInputOutputTypes=t.parsePromptValue=t.getSelectionBoxRect=t.findClosestPin=t.toggleStickyPin=t.emptyList=t.emptyObj=void 0;var u=o(n(63300)),s=a(n(98739)),c=n(41304),l=n(18265),d=n(68488),p=n(18265),f=n(71462),v=n(80807),m=n(99743),g=n(52688),y=n(41756);t.emptyObj={},t.emptyList=[];t.toggleStickyPin=function(e,t,n,r){return u.produce(e,(function(e){var r=e.instances,i=r.find((function(e){return e.id===t}));if(!i)throw new Error("blah");var o=i.inputConfig||{},a=o[n]||(0,l.queueInputPinConfig)();(0,l.isStickyInputPinConfig)(a)?o[n]=(0,l.queueInputPinConfig)():o[n]=(0,l.stickyInputPinConfig)(),e.instances=r.map((function(e){return e===i?Object.assign({},i,{inputConfig:o}):e}))}))};t.findClosestPin=function(e,t,n,r,i,o){var a=(0,l.partInstance)(e.id,e.id),u=(0,p.okeys)(e.inputs).map((function(e){return{id:e,type:"input",pos:(0,d.calcMainInputPosition)(e,i,"input",r,o),ins:a}})),s=(0,p.okeys)(e.outputs).map((function(e){return{id:e,type:"output",pos:(0,d.calcMainOutputPosition)(e,i,"output",r,o),ins:a}})),c=e.instances.reduce((function(n,a){var u=(0,l.getPartDef)(a,t),s=(0,y.getVisibleInputs)(a,u,e.connections),c=(0,y.getVisibleOutputs)(a,u,e.connections),p=s.map((function(e){return{ins:a,type:"input",pos:(0,d.calcPinPosition)(i,a.id,e,"input",r,o),id:e}})),f=c.map((function(e){return{ins:a,type:"output",pos:(0,d.calcPinPosition)(i,a.id,e,"output",r,o),id:e}}));return[].concat(n,p,f)}),[]),f=[].concat(u,c,s),v={dis:1e5,item:f[0]};return f.forEach((function(e){var t=e.pos.x-n.x,r=e.pos.y-n.y,i=Math.sqrt(t*t+r*r);i<v.dis&&(v.dis=i,v.item=e)})),v.item};t.getSelectionBoxRect=function(e,t){var n=Math.min(e.x,t.x),r=Math.min(e.y,t.y);return{x:n,y:r,w:Math.max(e.x,t.x)-n,h:Math.max(e.y,t.y)-r}};t.parsePromptValue=function(e){if(null!==e){var t=parseInt(e,10),n=e;return t.toString()!=e||isNaN(t)||(n=t),n}};t.parseInputOutputTypes=function(e){var t=e.match(/part\((.+)\|(.+)\)/)||[],n=t[1],r=t[2],i=(0,p.entries)(JSON.parse(n)).map((function(e){var t=e[0],n={type:e[1],optional:(0,p.isOptionalType)(t)};return[t.replace(/\?$/,""),n]})),o=(0,p.entries)(JSON.parse(r)).map((function(e){var t=e[0],n={type:e[1],optional:(0,p.isOptionalType)(t)};return[t.replace(/\?$/,""),n]}));return{inputs:(0,p.fromEntries)(i),outputs:(0,p.fromEntries)(o)}};t.createNewInlinePartInstance=function(e,t,n){void 0===t&&(t=-1*c.PART_HEIGHT*1.5);var r=(0,l.inlinePartInstance)(e.id+"-"+(0,p.randomInt)(999),e,{},{x:0,y:0}),i=(0,f.calcPartWidth)(r,e),o={x:n.x-i/2,y:n.y+t};return Object.assign({},r,{pos:o})};t.createNewPartInstance=function(e,t,n,r){void 0===t&&(t=-1*c.PART_HEIGHT*1.5);var i="string"==typeof e?(0,l.getPartDef)(e,r):e;if(!i)throw new Error(e+" part not found in repo");var o=(0,p.entries)(i.inputs).reduce((function(e,t){var n=t[0],r=t[1];return r.defaultValue&&(e[n]=(0,l.staticInputPinConfig)(r.defaultValue)),e}),{}),a=(0,l.partInstance)((0,s.default)(),i.id,o,{x:0,y:0}),u=(0,f.calcPartWidth)(a,i),d={x:n.x-u/2,y:n.y+t};return Object.assign({},a,{pos:d})};t.roundNumber=function(e){return Math.round(100*e)/100};t.domToViewPort=function(e,n,r){return{x:(0,t.roundNumber)(n.pos.x+e.x/n.zoom/r.zoom),y:(0,t.roundNumber)(n.pos.y+e.y/n.zoom/r.zoom)}};t.clamp=function(e,t,n){return Math.max(e,Math.min(t,n))};t.distance=function(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)};t.center=function(e,t,n){var r=n.zoom,i=e.x+e.w/2,o=e.y+e.h/2;return{x:i-t.w/r/2,y:o-t.h/r/2}};t.easeInOutQuad=function(e){return e<.5?2*e*e:(4-2*e)*e-1};t.easeInOutPos=function(e,n,r,i,o){var a=(0,t.clamp)(0,1,(o-r)/i),u=(0,t.easeInOutQuad)(a),s=n.x-e.x,c=n.y-e.y;return{x:e.x+s*u,y:e.y+c*u}};t.easeInOutNum=function(e,n,r,i,o){var a=(0,t.clamp)(0,1,(o-r)/i);return e+(n-e)*(0,t.easeInOutQuad)(a)};t.animateViewPort=function(e,n,r,i){var o=(0,t.distance)(e.pos,n.pos),a=Date.now(),u=r;if(0!==o){requestAnimationFrame((function r(){var o=Date.now(),s=(0,t.easeInOutPos)(e.pos,n.pos,a,u,o),c=(0,t.easeInOutNum)(e.zoom,n.zoom,a,u,o);o-a<u?(i({pos:s,zoom:c}),requestAnimationFrame(r)):i({pos:s,zoom:c})}))}else i(e)};t.calcSelectionBoxArea=function(e){var n=(0,t.getSelectionBoxRect)(e.from,e.to);return n.h*n.w};var b=function(e,t,n,r){return{left:n.x,right:n.x+e,top:n.y,bottom:n.y+t,tag:r,center:(0,l.calcCenter)(Object.assign({w:e,h:t},n))}};t.calcPartsPositions=function(e,t){var n=e.instances.map((function(e){var n=(0,f.calcPartWidth)(e,(0,l.getPartDef)(e,t)),r=c.PART_HEIGHT;return b(n,r,e.pos,e.id)})),r=(0,p.okeys)(e.inputs).map((function(t){var n=(0,v.calcPartIoWidth)(t),r=c.PART_HEIGHT,i=e.inputsPosition[t]||{x:0,y:0};return b(n,r,i,"input_"+t)})),i=(0,p.okeys)(e.outputs).map((function(t){var n=(0,v.calcPartIoWidth)(t),r=c.PART_HEIGHT,i=e.outputsPosition[t]||{x:0,y:0};return b(n,r,i,"output"+t)}));return[].concat(n,r,i)};t.getEffectivePartDimensions=function(e,n){var r=(0,t.calcPartsPositions)(e,n),i=r[0]||{left:0,right:0,top:0,bottom:0},o=r.reduce((function(e,t){return t.left<e?t.left:e}),i.left),a=r.reduce((function(e,t){return t.right>e?t.right:e}),i.right),u=r.reduce((function(e,t){return t.top<e?t.top:e}),i.top),s=a-o,c=r.reduce((function(e,t){return t.bottom>e?t.bottom:e}),i.bottom)-u,d={x:o,y:u};return{size:{width:s,height:c},pos:d,center:(0,l.calcCenter)(Object.assign({w:s,h:c},d))}};t.logicalPosToRenderedPos=function(e,t){var n=(0,m.vSub)(e,t.pos);return(0,m.vMul)(n,t.zoom)};t.renderedPosToLogicalPos=function(e,t){var n=(0,m.vDiv)(e,t.zoom);return(0,m.vAdd)(t.pos,n)};t.centerBoardPosOnTarget=function(e,n,r,i){var o=(0,t.logicalPosToRenderedPos)(e,i),a=(0,t.renderedPosToLogicalPos)(o,Object.assign({},i,{zoom:r})),u=Math.max(e.x,a.x)-Math.min(e.x,a.x),s=Math.max(e.y,a.y)-Math.min(e.y,a.y);return{x:r>i.zoom?i.pos.x+u:i.pos.x-u,y:r>i.zoom?i.pos.y+s:i.pos.y-s}};t.fitViewPortToPart=function(e,n,r){var i=(0,t.getEffectivePartDimensions)(e,n),o=i.size,a=i.center,u=o.width+20,s=o.height+150,c=r.width/u,l=r.height/s,d=Math.min(c,l)/1.15,p=(0,t.clamp)(.3,1.2,d);return{zoom:p,pos:{x:a.x-r.width/2/p,y:a.y-r.height/2/p}}};t.getMiddleOfViewPort=function(e,n){var r={x:n.width/2,y:n.height/2};return(0,t.renderedPosToLogicalPos)(r,e)};t.isJsxValue=function(e){var t=function(e){return(0,p.isDefined)(e.ref)&&(0,p.isDefined)(e.type)&&(0,p.isDefined)(e.props)};try{var n=JSON.parse(e);return t(n)||Array.isArray(n)&&t(n[0])}catch(r){return!1}};t.getInstancesInRect=function(e,n,r,i,o,a,u){var s=e.from,d=e.to,p=(0,t.getSelectionBoxRect)(s,d);return o.filter((function(e){var t=e.pos,i=(0,f.calcPartWidth)(e,(0,l.getPartDef)(e,n))*r.zoom*u.zoom,o=Object.assign({},t,{w:i,h:c.PART_HEIGHT*r.zoom*u.zoom});return console.log(e.id,o,"main",p),(0,l.intersectRect)(p,o)||(0,l.intersectRect)(o,p)})).map((function(e){return e.id}))};t.handleInstanceDrag=function(e,t,n,r,i,o){r.preventDefault(),r.stopPropagation();var a,s=(0,m.vSub)(n,t.pos),c=u.produce(e,(function(e){var u=e.instances.find((function(e){return e.id===t.id}));if(!u)throw new Error("impossible state dragging instance that does not exist");!r.shiftKey&&o&&(a=[o]);var c=e.instances.filter((function(e){return i.includes(e.id)&&e!==u})),l=[u].concat(c),d=(0,g.getLeafInstancesOfSelection)(l,e.instances,e.connections);[].concat(c,d).forEach((function(e){e.pos=(0,m.vAdd)(e.pos,s)})),u.pos=n,!r.shiftKey&&o&&(a=[o])}));return{newValue:c,newSelected:a}};t.handleIoPinRename=function(e,t,n,r){return u.produce(e,(function(e){"input"===t?(e.inputs[r]=e.inputs[n],e.inputsPosition[r]=e.inputsPosition[n],delete e.inputs[n],e.connections=e.connections.map((function(e){return(0,l.isExternalConnectionNode)(e.from)&&e.from.pinId===n?Object.assign({},e,{from:Object.assign({},e.from,{pinId:r})}):e}))):(e.outputs[r]=e.outputs[n],e.outputsPosition[r]=e.outputsPosition[n],e.connections=e.connections.map((function(e){return(0,l.isExternalConnectionNode)(e.to)&&e.to.pinId===n?Object.assign({},e,{to:Object.assign({},e.to,{pinId:r})}):e})),e.completionOutputs=(e.completionOutputs||[]).map((function(e){return e.split("+").map((function(e){return e===n?r:n})).join("+")})),delete e.outputs[n])}))};t.handleChangePartInputType=function(e,t,n){return u.produce(e,(function(e){var r=e.inputs[t];if(!r)throw new Error("Wat");r.mode=n}))}},17229:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createEditorClient=void 0;var r=n(18265),i=n(14206),o=n(50208),a=n(19389),u=(0,r.debugLogger)("runtime-editor-client");t.createEditorClient=function(e,t){var r=new URL(e),s=(0,o.default)(r.origin,{path:("/"===r.pathname?"":r.pathname)+"/socket.io/editor",parser:n(61212)});return s.emit("join-room-editor",t),{emitChange:function(e){s.emit(a.DebuggerServerEventType.CHANGE_EVENT_NAME,e)},emitBreakpointsChange:function(e){s.emit(a.DebuggerServerEventType.UPDATE_BREAKPOINTS,e)},interceptInput:function(e){s.emit(a.DebuggerServerEventType.INPUT_VALUE_OVERRIDE,e)},interceptOutput:function(e){s.emit(a.DebuggerServerEventType.OUTPUT_VALUE_OVERRIDE,e)},onRuntimeReady:function(e){return s.on(a.DebuggerServerEventType.RUNTIME_READY,e),function(){return s.off(a.DebuggerServerEventType.RUNTIME_READY,e)}},onChangeAwk:function(e){return s.on(a.DebuggerServerEventType.CHANGE_AWK,e),function(){return s.off(a.DebuggerServerEventType.CHANGE_AWK,e)}},onChangeError:function(e){return s.on(a.DebuggerServerEventType.CHANGE_ERROR,e),function(){return s.off(a.DebuggerServerEventType.CHANGE_ERROR,e)}},onIsAlive:function(e){return s.on(a.DebuggerServerEventType.IS_ALIVE,e),function(){return s.off(a.DebuggerServerEventType.IS_ALIVE,e)}},emitInputValue:function(e,t){u("Emitting push input value to "+e+" %o",t),s.emit(a.DebuggerServerEventType.PUSH_INPUT_VALUE,{pinId:e,value:t})},destroy:function(){s.disconnect(),(0,a.enumToArray)(a.DebuggerServerEventType).forEach((function(e){return s.off(e)}))},onDisconnect:function(e){return s.on("disconnect",e),function(){return s.off("disconnect",e)}},debugInfo:function(){return"Remote debugger for "+e},onBatchedEvents:function(e){return s.on(a.DebuggerServerEventType.EVENTS_BATCH,e),function(){return s.off(a.DebuggerServerEventType.EVENTS_BATCH,e)}},requestState:function(){return i.default.get(e+"/state").then((function(e){return e.data.state}))},getHistory:function(t){return i.default.get(e+"/history",{params:{insId:t.insId,pinId:t.pinId,limit:t.limit}}).then((function(e){return e.data}))},clearHistory:function(){return i.default.delete(e+"/history").then((function(){}))},triggerPart:function(t,n){return i.default.post(e+"/trigger",{partId:t,inputs:n}).then((function(e){return e.data}))}}}},4278:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRuntimeClient=t.DEFAULT_DT_SCALE=void 0;var r=n(18265),i=n(50208),o=n(19389),a=(0,r.debugLogger)("debugger-runtime-client");t.DEFAULT_DT_SCALE=1;t.createRuntimeClient=function(e,t){var u=new URL(e),s=(0,i.io)(u.origin,{path:("/"===u.pathname?"":u.pathname)+"/socket.io/runtime",parser:n(61212)});s.emit("join-room-runtime",t);new Set;s.on(o.DebuggerServerEventType.UPDATE_BREAKPOINTS,(function(e){new Set(e)}));var c=(0,r.cappedArrayDebounce)((function(e){a("Emitting debounced batched events - "+e.length),s.emit(o.DebuggerServerEventType.EVENTS_BATCH,e)}),100,200),l={onChange:function(e){return s.on(o.DebuggerServerEventType.CHANGE_EVENT_NAME,e),function(){return s.off(o.DebuggerServerEventType.CHANGE_EVENT_NAME,e)}},onInput:function(e){return s.on(o.DebuggerServerEventType.PUSH_INPUT_VALUE,e),function(){return s.off(o.DebuggerServerEventType.PUSH_INPUT_VALUE,e)}},emitEvent:function(e){a("Emitting event "+e.type+" change event of "+e.insId),"object"==typeof e.val&&(e.val=Object.assign({},e.val)),c.addItem(Object.assign({},e,{time:Date.now()}))},emitRuntimeReady:function(){s.emit(o.DebuggerServerEventType.RUNTIME_READY,{})},emitChangeAwk:function(){s.emit(o.DebuggerServerEventType.CHANGE_AWK,{})},emitChangeError:function(e){s.emit(o.DebuggerServerEventType.CHANGE_ERROR,{error:e})},emitIsAlive:function(e){s.emit(o.DebuggerServerEventType.IS_ALIVE,{time:e})},destroy:function(){c.flush(),(0,o.enumToArray)(o.DebuggerServerEventType).forEach((function(e){return s.off(e)})),s.disconnect()},onDisconnect:function(e){return s.on("disconnect",e),function(){return s.off("disconnect",e)}}};return new Promise((function(e,t){s.connected?e(l):(s.on("connect_error",(function(e){t("Socket connect error: "+e)})),s.on("connect",(function(){e(l)})))}))}},19389:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DebuggerServerEventType=t.enumToArray=t.isNumber=t.isSimpleType=t.valuePreview=t.toString=void 0;var r=n(63726);t.toString=function(e){if("object"===typeof e){if(e instanceof Error)return JSON.stringify((0,r.serializeError)(e));try{return JSON.stringify(e).substr(0,250)}catch(t){return"Object (cannot stringify)"}}return(""+e).substr(0,250)};t.valuePreview=function(e){return(0,t.toString)(e).substr(0,100)};t.isSimpleType=function(e){return["number","string","boolean"].includes(typeof e)};t.isNumber=function(e){return!1===isNaN(Number(e))},t.enumToArray=function(e){return Object.keys(e).filter(t.isNumber).map((function(t){return e[t]}))},function(e){e.RUNTIME_READY="runtime-ready",e.CHANGE_EVENT_NAME="change",e.PUSH_INPUT_VALUE="push-input-value",e.CHANGE_AWK="live-change-awk",e.CHANGE_ERROR="live-change-error",e.IS_ALIVE="is-alive",e.UPDATE_BREAKPOINTS="update-breakpoints",e.INPUT_VALUE_OVERRIDE="input-value-override",e.OUTPUT_VALUE_OVERRIDE="output-value-override",e.INPUT_VALUE_CHANGE="input-value-changed",e.OUTPUT_VALUE_CHANGE="output-value-changed",e.PROCESSING_CHANGE="processing-changed",e.INPUTS_STATE_CHANGE="inputs-state-changed",e.PART_ERROR="part-error",e.EVENTS_BATCH="events-batch"}(t.DebuggerServerEventType||(t.DebuggerServerEventType={}))},61212:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(61015),i=n(14398);t.protocol=5;var o=t.PacketType={CONNECT:0,DISCONNECT:1,EVENT:2,ACK:3,CONNECT_ERROR:4},a=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},u=function(e){return"[object Object]"===Object.prototype.toString.call(e)};function s(){}function c(){}s.prototype.encode=function(e){return[(0,r.stringify)(e)]},i(c.prototype),c.prototype.add=function(e){var t=(0,r.parse)(e);if(!(a(t.type)&&t.type>=o.CONNECT&&t.type<=o.CONNECT_ERROR))throw new Error("invalid packet type");if("string"!=typeof t.nsp)throw new Error("invalid namespace");if(!function(e){switch(e.type){case o.CONNECT:return void 0===e.data||u(e.data);case o.DISCONNECT:return void 0===e.data;case o.CONNECT_ERROR:return u(e.data);default:return Array.isArray(e.data)}}(t))throw new Error("invalid payload");if(!(void 0===t.id||a(t.id)))throw new Error("invalid packet id");this.emit("decoded",t)},c.prototype.destroy=function(){},t.Encoder=s,t.Decoder=c},75579:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(19389),t),i(n(17229),t),i(n(4278),t)},41396:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Request=t.Put=t.Post=t.Get=void 0;var r=n(18265),i=n(25717),o="HTTP";t.Get=(0,r.partFromSimpleFunction)({id:"GET Request",icon:"fa-server",namespace:o,description:"Performs a HTTP GET request to a URL and emits the response data",inputs:[{name:"url",description:"URL to fetch data from"},{name:"headers",description:"Headers to send with the request",mode:"required-if-connected"},{name:"params",description:"Query parameters to send with the request",mode:"required-if-connected"}],output:{name:"data",description:"The response data"},fn:function(e){return i.default.get(e).then((function(e){return e.data}))}}),t.Post=(0,r.partFromSimpleFunction)({id:"POST Request",icon:"fa-server",namespace:o,description:"Performs a HTTP POST request to a URL and emits the response data",inputs:[{name:"url",description:"URL to fetch data from"},{name:"headers",description:"Headers to send with the request",mode:"required-if-connected"},{name:"params",description:"Query parameters to send with the request",mode:"required-if-connected"},{name:"data",description:"Data to send with the request",mode:"required-if-connected"}],output:{name:"data",description:"The response data"},fn:function(e,t,n,r){return i.default.post(e,r,{headers:t,params:n}).then((function(e){return e.data}))}}),t.Put=(0,r.partFromSimpleFunction)({id:"PUT Request",icon:"fa-server",namespace:o,description:"Performs a HTTP PUT request to a URL and emits the response data",inputs:[{name:"url",description:"URL to fetch data from"},{name:"headers",description:"Headers to send with the request",mode:"required-if-connected"},{name:"params",description:"Query parameters to send with the request",mode:"required-if-connected"},{name:"data",description:"Data to send with the request",mode:"required-if-connected"}],output:{name:"data",description:"The response data"},fn:function(e,t,n,r){return i.default.put(e,r,{headers:t,params:n}).then((function(e){return e.data}))}}),t.Request=(0,r.partFromSimpleFunction)({id:"Request",icon:"fa-server",namespace:o,description:"Performs a HTTP request to a URL and emits the response data",inputs:[{name:"url",description:"URL to fetch data from"},{name:"method",description:"HTTP method to use"},{name:"headers",description:"Headers to send with the request",mode:"required-if-connected"},{name:"params",description:"Query parameters to send with the request",mode:"required-if-connected"},{name:"data",description:"Data to send with the request",mode:"required-if-connected"}],output:{name:"data",description:"The response data"},fn:function(e,t,n,r,o){return i.default.request({url:e,method:t,data:o,headers:n,params:r}).then((function(e){return e.data}))}})},16505:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropertyEquals=t.DeleteAttribute=t.SetAttribute=t.GetAttribute=t.ObjectAssign=t.ObjectFromEntries=t.ObjectEntries=t.ObjectValues=t.ObjectKeys=t.JSONStringify=t.JSONParse=void 0;var r=n(18265),i="Objects";t.JSONParse=(0,r.partFromSimpleFunction)({id:"JSON Parse",icon:"fa-glasses",namespace:i,description:"Parses a JSON string into an object",inputs:[{name:"json",description:"JSON string to parse"}],output:{name:"object",description:"The parsed object"},fn:function(e){return JSON.parse(e)}}),t.JSONStringify=(0,r.partFromSimpleFunction)({id:"JSON Stringify",icon:"fa-pen-fancy",namespace:i,description:"Stringifies an object into a JSON string",inputs:[{name:"object",description:"Object to stringify"}],output:{name:"json",description:"The stringified JSON"},fn:function(e){return JSON.stringify(e)}}),t.ObjectKeys=(0,r.partFromSimpleFunction)({id:"Keys",icon:"fa-key",namespace:i,description:"Emits the keys of an object",inputs:[{name:"object",description:"Object to get keys of"}],output:{name:"keys",description:"The keys of object"},fn:function(e){return Object.keys(e)}}),t.ObjectValues=(0,r.partFromSimpleFunction)({id:"Values",namespace:i,description:"Emits the values of an object",inputs:[{name:"object",description:"Object to get values of"}],output:{name:"values",description:"The values of object"},fn:function(e){return Object.values(e)}}),t.ObjectEntries=(0,r.partFromSimpleFunction)({id:"Entries",namespace:i,icon:"fa-box",description:"Emits the entries of an object",inputs:[{name:"object",description:"Object to get entries of"}],output:{name:"entries",description:"The entries of object"},fn:function(e){return Object.entries(e)}}),t.ObjectFromEntries=(0,r.partFromSimpleFunction)({id:"From Entries",namespace:i,icon:"fa-box",description:"Creates an object from an array of entries",inputs:[{name:"entries",description:"Array of entries to create object from"}],output:{name:"object",description:"The created object"},fn:function(e){return Object.fromEntries(e)}}),t.ObjectAssign=(0,r.partFromSimpleFunction)({id:"Assign",namespace:i,icon:"fa-box",description:"Assigns properties from one or more objects to a target object",inputs:[{name:"target",description:"Target object to assign properties to"},{name:"sources",description:"One or more objects to assign properties from"}],output:{name:"object",description:"The target object"},fn:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object.assign.apply(Object,[e].concat(n))}}),t.GetAttribute=(0,r.partFromSimpleFunction)({id:"Get Attribute",namespace:i,icon:"fa-magnifying-glass",description:"Gets an attribute from an object",inputs:[{name:"object",description:"Object to get attribute from"},{name:"attribute",description:"Attribute to get"}],output:{name:"value",description:"The value of the attribute"},customViewCode:'<% if (inputs.attribute) { %> Get "<%- inputs.attribute %>"<% } else { %> Get Attribute <% } %>',fn:function(e,t){return t.split(".").reduce((function(e,t){return e[t]}),e)}}),t.SetAttribute=(0,r.partFromSimpleFunction)({id:"Set Attribute",namespace:i,icon:"fa-box",description:"Sets an attribute on an object",inputs:[{name:"object",description:"Object to set attribute on"},{name:"attribute",description:"Attribute to set"},{name:"value",description:"Value to set attribute to"}],customViewCode:'<% if (inputs.attribute) { %> Set "<%- inputs.attribute %>"<% } else { %> Set Attribute <% } %>',output:{name:"object",description:"The object with the attribute set"},fn:function(e,t,n){var r=t.split("."),i=r.pop();return r.reduce((function(e,t){return e[t]}),e)[i]=n,e}}),t.DeleteAttribute=(0,r.partFromSimpleFunction)({id:"Delete Attribute",namespace:i,icon:"fa-box",description:"Deletes an attribute from an object",inputs:[{name:"object",description:"Object to delete attribute from"},{name:"attribute",description:"Attribute to delete"}],customViewCode:'<% if (inputs.attribute) { %> Delete "<%- inputs.attribute %>"<% } else { %> Delete Attribute <% } %>',output:{name:"object",description:"The object with the attribute deleted"},fn:function(e,t){var n=t.split("."),r=n.pop();return delete n.reduce((function(e,t){return e[t]}),e)[r],e}}),t.PropertyEquals={id:"Property Equals",namespace:i,defaultStyle:{icon:"fa-equals"},description:'Emits the object to the "true" output if an object\'s property equals a value, otherwise emits to the "false" output',inputs:{object:{description:"Object to check property of"},attribute:{description:"Attribute to check"},value:{description:"Value to check attribute against"}},outputs:{true:{description:"Emitted if the attribute equals the value"},false:{description:"Emitted if the attribute does not equal the value"}},customViewCode:'<% if (inputs.attribute) { %> "<%- inputs.attribute %>" equals "<%- inputs.value %>"<% } else { %> Property Equals <% } %>',fn:function(e,t){e.attribute.split(".").reduce((function(e,t){return e[t]}),e.object)===e.value?t.true.next(e.object):t.false.next(e.object)}}},42716:function(e,t,n){"use strict";n.d(t,{V:function(){return a}});var r=n(52685),i=n(27378),o=function(e){return i.createElement("li",{className:"log-item"},i.createElement("main",{className:"content"},e.value),i.createElement("aside",null,new Date(e.time).toLocaleTimeString()))},a=function(e){var t=i.useState([]),n=t[0],a=t[1];return i.useEffect((function(){e.output.subscribe((function(e){var t="object"==typeof e&&i.isValidElement(e)?e:""+e;a((function(e){return[].concat(e,[{value:t,time:Date.now()}])}))}))}),[]),i.createElement("div",{className:"output-log"},i.createElement("header",null,"Output Log"," ",i.createElement("button",{className:"clear-btn button button--outline button--secondary button--sm",onClick:function(){return a([])}},"Clear")),i.createElement("main",null,i.createElement("ul",null,n.map((function(e,t){return i.createElement(o,(0,r.Z)({},e,{key:t}))}))),0===n.length?i.createElement("div",{className:"empty-state"},"Nothing to show. Interact with the example to emit some outputs!"):null))}},38941:function(e,t,n){"use strict";n.d(t,{I:function(){return _}});var r=n(44305),i=n(13127),o=n(27378),a=n(67651),u=n(59821),s=n(38944),c=n(96149),l=n(18265),d={VMScript:function(e){this.script=e},VM:function(){function e(e){this.context=e}return e.prototype.run=function(e){var t=(0,l.okeys)(this.context.sandbox),n=Object.values(this.context.sandbox);Function.apply(void 0,t.concat([e.script])).apply(void 0,n)},e}()},p=n(81884),f=200,v=n(60512),m=n(1706),g=n(12902),y=n(33099);n.g.vm2=d;var b,h,I,C=(h=new Map,I=new Map,{requestHistory:(b=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var o,a,u,s,c,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o="input"===i?l.DebuggerEventType.INPUT_CHANGE:l.DebuggerEventType.OUTPUT_CHANGE,console.log({insId:t,pinId:n,type:o}),!n){e.next=9;break}return a=t+"."+n+"."+o,u=h.get(a)||{total:0,lastSamples:[]},s=u.lastSamples.slice(0,f),e.abrupt("return",Object.assign({},u,{lastSamples:s}));case 9:return c=I.get(t)||{total:0,lastSamples:[]},d=c.lastSamples.slice(0,f),e.abrupt("return",Object.assign({},c,{lastSamples:d}));case 12:case"end":return e.stop()}}),e)}))),function(e,t,n){return b.apply(this,arguments)}),addEvents:function(e){e.forEach((function(e){if(e.type===l.DebuggerEventType.ERROR){var t=e;t.type=l.DebuggerEventType.OUTPUT_CHANGE,t.pinId=l.ERROR_PIN_ID}if(e.type===l.DebuggerEventType.INPUT_CHANGE||e.type===l.DebuggerEventType.OUTPUT_CHANGE){var n=e.insId,r=e.type,i=n+"."+e.pinId+"."+r,o=h.get(i)||{total:0,lastSamples:[]};o.lastSamples.unshift(e),o.lastSamples.length>f&&o.lastSamples.splice(f,o.lastSamples.length-f),o.total++,h.set(i,o);var a=I.get(n)||{total:0,lastSamples:[]};a.lastSamples.unshift(e),a.lastSamples.length>f&&a.lastSamples.splice(f,a.lastSamples.length-f),a.total++,h.set(n,a)}}))}}),P=[{title:"Hello World",key:"hello-world"},{title:"React Counter",key:"react-counter"},{title:"BMI Calculator",key:"bmi"},{title:"REST API Usage",key:"apis"},{title:"Debounce vs. Throttling",key:"debounce-throttling"},{title:"Fibonacci Seq.",key:"fibonacci"}],x=function(e){var t,n,r=e.flow,i=e.output,o=e.inputs,u=e.onError,s=e.debugDelay,c=function(e,t){var n=new Set;return{onEvent:function(r){var i=Object.assign({},r,{time:Date.now()});console.info("Got debugger event",r),t.addEvents([i]),e.addEvents([i]),n.forEach((function(e){return e([i])}))},onBatchedEvents:function(e){return n.add(e),function(){return n.delete(e)}}}}(e.player,C);c.debugDelay=s;var d=(0,l.keys)(r.main.outputs)[0];return{executeResult:(0,l.execute)({part:r.main,inputs:o,outputs:(t={},t[d]=i,t),partsRepo:Object.assign({},r.dependencies,(n={},n[r.main.id]=r.main,n)),_debugger:c,onBubbleError:function(e){u(e)},extraContext:{PubSub:a}}),localDebugger:c}},_=function(e){var t=e.flowProps,a=t.flow,d=t.inputs,f=t.output,b=(0,o.useState)(e.initWidth||500),h=b[0],I=b[1],_=(0,o.useState)(e.defaultDelay||0),j=_[0],O=_[1],w=(0,o.useState)(!1),E=w[0],S=w[1],T=(0,o.useRef)((0,c.createRuntimePlayer)("root."+e.flowProps.flow.part.id)),k=(0,o.useState)(e.flowProps.resolvedFlow),D=k[0],N=k[1],M=(0,o.useState)(),R=M[0],A=M[1],V=(0,c.useDebounce)(D,500)[0],H=(0,o.useState)(!1),z=(H[0],H[1],(0,o.useState)({flow:a,boardData:{viewPort:{pos:{x:0,y:0},zoom:1},lastMousePos:{x:0,y:0},selected:[]}})),G=z[0],q=z[1];(0,o.useEffect)((function(){N((function(e){return Object.assign({},e,{main:G.flow.part})}))}),[G.flow.part]);var F,L,B={state:G,resolvedRepoWithDeps:D,onChangeEditorState:q,onInspectPin:l.noop,onRequestHistory:C.requestHistory,hideTemplatingTips:!0,onImportPart:(L=(0,i.Z)((0,r.Z)().mark((function e(t,i){var o,u,s,d,p;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.part,e.t0=Object,e.next=4,Promise.all([n.e(5717),n.e(4500)]).then(n.t.bind(n,84500,23));case 4:return e.t1=e.sent,u=e.t0.values.call(e.t0,e.t1).find((function(e){return(0,l.isBasePart)(e)&&e.id===o.id})),N((function(e){var t;return Object.assign({},e,{dependencies:Object.assign({},e.dependencies,(t={},t[u.id]=Object.assign({},u,{source:{path:"@flyde/stdlib/dist/all-browser",export:u.id}}),t))})})),s=void 0,d=(0,g.ZP)(a,(function(e){if(i){var n=(0,c.vAdd)({x:0,y:0},i.pos);if(s=(0,c.createNewPartInstance)(t.part,0,n,D.dependencies),e.part.instances.push(s),i.connectTo){var r=i.connectTo,o=r.insId,a=r.outputId;e.part.connections.push({from:{insId:o,pinId:a},to:{insId:s.id,pinId:l.TRIGGER_PIN_ID}})}}})),e.next=11,new Promise((function(e){return setTimeout(e,10)}));case 11:return p=(0,g.ZP)(G,(function(e){var t;e.flow=d,null!=i&&i.selectAfterAdding&&s&&(e.boardData.selected=[null==(t=s)?void 0:t.id])})),q(p),(0,c.toastMsg)("Part "+o.id+" successfully imported from "+t.module),e.abrupt("return",s);case 15:case"end":return e.stop()}}),e)}))),function(e,t){return L.apply(this,arguments)}),onExtractInlinePart:l.noop,onQueryImportables:(F=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Object,e.next=3,Promise.all([n.e(5717),n.e(4500)]).then(n.t.bind(n,84500,23));case 3:return e.t1=e.sent,t=e.t0.values.call(e.t0,e.t1).filter(l.isBasePart),e.abrupt("return",t.map((function(e){return{part:e,module:"@flyde/stdlib"}})));case 6:case"end":return e.stop()}}),e)}))),function(){return F.apply(this,arguments)}),debuggerClient:R};(0,o.useEffect)((function(){T.current.start()}),[]),(0,o.useEffect)((function(){var t=x({flow:D,output:f,inputs:d,onError:l.noop,debugDelay:j,player:T.current}),n=t.executeResult,r=t.localDebugger,i=e.flowProps.output.subscribe((function(){return S(!0)}));return A(r),function(){n(),i.unsubscribe()}}),[j,V]);var U=(0,o.useCallback)((function(e,t){var n=t.size;I(n.width),q((function(e){var t=document.querySelector(".flow-container"),n=t?t.getBoundingClientRect():{width:500,height:500};return(0,g.ZP)(e,(function(e){e.boardData.viewPort=(0,c.fitViewPortToPart)(e.flow.part,D.dependencies,n)}))}))}),[]),W=o.createElement("div",{className:"delay-container"},o.createElement("input",{type:"range",id:"volume",name:"delay",value:j,step:"100",min:"0",max:"300",onChange:function(e){return O(Number(e.target.value))}}),o.createElement("label",{htmlFor:"volume"},"Debug Delay: ",j,"ms")),J=P.findIndex((function(t){return t.key===e.meta.key})),Z=P[J+1],Y=P[J-1];return o.createElement(u.Z,{title:e.meta.title+" | Playground",description:"Flyde Playground - "+e.meta.title+" example"},o.createElement("header",{className:(0,s.Z)("hero hero--primary",v.Z.heroBanner,"playground-hero")},o.createElement("div",{className:"container"},o.createElement("h1",{className:"hero__title"},"Welcome to Flyde's Online Playground"),o.createElement("p",{className:"hero__subtitle"},"Choose one of the examples below to get started. Feel free to play around with the canvas and see how your changes affect the result!"))),o.createElement("div",{className:"mobile-warning"},"Flyde is currently not optimized for mobile devices. Please ",o.createElement("strong",null,"use a desktop computer for the best experience"),"."),o.createElement("ul",{className:"examples__menu"},P.map((function(e){return o.createElement("li",{key:e.key},o.createElement(p.Z,{to:"/playground/"+e.key,className:"button button--primary"},e.title))}))),o.createElement("div",{className:"playground-container"},o.createElement("header",null,o.createElement("h2",{className:"playground-title"},e.meta.title),o.createElement("div",{className:"playground-description"},e.meta.description),E?o.createElement(o.Fragment,null,o.createElement("hr",null),o.createElement("div",{className:"playground-extra"},e.extraInfo||e.meta.extraInfo)):null,e.prefixComponent),o.createElement("div",{className:"playground"},o.createElement("div",{className:"flow-container"},!0!==e.hideDelay?W:null,o.createElement(y.Z,null,(function(){return o.createElement(c.FlowEditor,B)}))),o.createElement(m.Resizable,{height:0,width:h,onResize:U,axis:"x",handle:o.createElement("div",{className:"handle"}),resizeHandles:["w"]},o.createElement("div",{className:"output-container",style:{flexBasis:h}},e.children))),o.createElement("nav",{className:"pagination-nav"},o.createElement("div",{className:"pagination-nav__item"},Y?o.createElement("a",{className:"pagination-nav__link",href:"/playground/"+Y.key},o.createElement("div",{className:"pagination-nav__sublabel"},"Previous Example"),o.createElement("div",{className:"pagination-nav__label"},Y.title)):null),o.createElement("div",{className:"pagination-nav__item pagination-nav__item--next"},Z?o.createElement("a",{className:"pagination-nav__link",href:"/playground/"+Z.key},o.createElement("div",{className:"pagination-nav__sublabel"},"Next Example"),o.createElement("div",{className:"pagination-nav__label"},Z.title)):null))))}},65689:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r=n(27378),i=n(18265),o=n(38941),a={resolvedFlow:{main:{instances:[{pos:{x:-656.1905053710938,y:325.03946411132813},id:"Inline-value-Hello from ${i76",inputConfig:{},part:{id:"Inline-value-Hello from ${i",inputs:{country:{type:"any",mode:"required"},capital:{type:"any",mode:"required"},population:{type:"any",mode:"required"}},outputs:{value:{type:"any",delayed:!1,optional:!1}},fnCode:"const result = (`Hello from ${inputs.country}! It's capital is ${inputs.capital} (population of ${inputs.population})`); Promise.resolve(result).then(val => outputs.value.next(val))",customViewCode:"`Hello from ${inputs.country}! It's capital is ${inputs.capital} (population of ${inputs.population}",dataBuilderSource:"YEhlbGxvIGZyb20gJHtpbnB1dHMuY291bnRyeX0hIEl0J3MgY2FwaXRhbCBpcyAke2lucHV0cy5jYXBpdGFsfSAocG9wdWxhdGlvbiBvZiAke2lucHV0cy5wb3B1bGF0aW9ufSlg",templateType:"value",completionOutputs:["value"],defaultStyle:{size:"regular",icon:"code",cssOverride:{fontFamily:"monospace",fontWeight:"500"}}}},{pos:{x:-578.892123413086,y:-223.60953734636303},id:"Get User's Country-ins",inputConfig:{},part:{id:"Get User's Country",inputs:{},outputs:{country:{type:"any",delayed:!1,optional:!1}},instances:[{pos:{x:-335.7258349609375,y:-194.68226864814756},id:"GET Request-907",inputConfig:{url:{mode:"static",value:"https://api.country.is/"}},visibleInputs:["url","__trigger"],visibleOutputs:["r","__error","response","data"],partId:"GET Request"},{id:"Inline-value-{iso2: ${input76",part:{id:"Inline-value-{iso2: inputs.d",inputs:{data:{type:"any",mode:"required"}},outputs:{value:{type:"any",delayed:!1,optional:!1}},fnCode:"const result = ({iso2: inputs.data.country}); Promise.resolve(result).then(val => outputs.value.next(val))",customViewCode:"{iso2: inputs.data.country}",dataBuilderSource:"e2lzbzI6IGlucHV0cy5kYXRhLmNvdW50cnl9",templateType:"value",completionOutputs:["value"],defaultStyle:{size:"regular",icon:"code",cssOverride:{fontFamily:"monospace",fontWeight:"500"}}},inputConfig:{},pos:{x:-468.5056274414062,y:-39.30523986816405}}],inputsPosition:{},outputsPosition:{r:{x:-363.42401672132144,y:105.34149194113161},country:{x:-322.5739794922268,y:138.57280736180334}},connections:[{from:{insId:"Inline-value-{iso2: ${input76",pinId:"value"},to:{pinId:"country",insId:"__this"}},{from:{insId:"GET Request-907",pinId:"data"},to:{insId:"Inline-value-{iso2: ${input76",pinId:"data"}}],completionOutputs:["country"]},style:{size:"large",color:"#f15bb5"}},{pos:{x:-637.9743029785157,y:-84.37110525846481},id:"Get Country Name And Capital-ins",inputConfig:{},visibleOutputs:["name","capital"],part:{id:"Get Country Name And Capital",inputs:{body:{type:"any",mode:"required"}},outputs:{capital:{type:"any",delayed:!1,optional:!1},name:{type:"any",delayed:!1,optional:!1}},instances:[{pos:{x:-455.39787109375004,y:43.691497802734375},id:"POST Request-624",inputConfig:{url:{mode:"static",value:"https://countriesnow.space/api/v0.1/countries/capital"}},visibleInputs:["url","body","data"],partId:"POST Request"},{id:"Get Attribute-217",partId:"Get Attribute",inputConfig:{attribute:{mode:"static",value:"data.capital"}},pos:{x:-285.6922900390625,y:219.88888122558592}},{id:"Get Country Name And Capital-srp46ei",partId:"Get Attribute",inputConfig:{attribute:{mode:"static",value:"data.name"}},pos:{x:-608.0307299804688,y:225.56220581054686}}],inputsPosition:{body:{x:-333.75691140339336,y:-63.66470402308542}},outputsPosition:{value:{x:-514.1541695281439,y:411.8457371232514},i10:{x:-280.88783057750686,y:411.581705357324},capital:{x:-214.78486673798952,y:473.65942918140723},name:{x:-523.761854810908,y:479.9947571097377}},connections:[{from:{pinId:"body",insId:"__this"},to:{insId:"POST Request-624",pinId:"data"}},{from:{insId:"Get Attribute-217",pinId:"value"},to:{pinId:"capital",insId:"__this"}},{from:{insId:"POST Request-624",pinId:"data"},to:{insId:"Get Country Name And Capital-srp46ei",pinId:"object"}},{from:{insId:"Get Country Name And Capital-srp46ei",pinId:"value"},to:{pinId:"name",insId:"__this"}},{from:{insId:"POST Request-624",pinId:"data"},to:{insId:"Get Attribute-217",pinId:"object"}}],completionOutputs:["name+capital"]},style:{size:"large",color:"#9b5de5"}},{pos:{x:-266.7627111816406,y:205.0337203979492},id:"Format Number-ins",inputConfig:{},part:{id:"Format Number",inputs:{number:{type:"any",mode:"required"}},outputs:{string:{type:"any",delayed:!1,optional:!1}},instances:[{id:"Inline-value-Result is ${in47",part:{id:"Inline-value-new Intl.Number",inputs:{population:{type:"any",mode:"required"}},outputs:{r:{type:"any",delayed:!1,optional:!1}},fnCode:"outputs.r.next((new Intl.NumberFormat().format(inputs.population)))",customViewCode:"new Intl.NumberFormat().format(inputs.population)",dataBuilderSource:"bmV3IEludGwuTnVtYmVyRm9ybWF0KCkuZm9ybWF0KGlucHV0cy5wb3B1bGF0aW9uKQ==",templateType:"value",completionOutputs:["r"]},inputConfig:{},pos:{x:-452.21022216796877,y:176.39826171875}}],inputsPosition:{population:{x:0,y:0},number:{x:0,y:0}},outputsPosition:{r:{x:0,y:400},string:{x:0,y:400}},connections:[{from:{insId:"__this",pinId:"number"},to:{insId:"Inline-value-Result is ${in47",pinId:"population"}},{from:{insId:"Inline-value-Result is ${in47",pinId:"r"},to:{insId:"__this",pinId:"string"}}],completionOutputs:["string"]},style:{size:"regular",color:"#fee440"}},{pos:{x:-305.335751953125,y:65.09392517089844},id:"cl8x5r4qp00074666lb382z1c",inputConfig:{},part:{id:"Get Population By City",inputs:{city:{type:"any",mode:"required"}},outputs:{value:{type:"any",delayed:!1,optional:!1}},instances:[{pos:{x:-204.90311279296873,y:349.60314422607416},id:"POST Request-775",inputConfig:{url:{mode:"static",value:"https://countriesnow.space/api/v0.1/countries/population/cities"}},visibleInputs:["url","body","data"],partId:"POST Request"},{pos:{x:-143.08780761718754,y:233.70198646545413},id:"Inline-value-{city: inputs.c75",inputConfig:{},part:{id:"Inline-value-{city: inputs.c",inputs:{city:{type:"any",mode:"required"}},outputs:{r:{type:"any",delayed:!1,optional:!1}},fnCode:"outputs.r.next(({city: inputs.city}))",customViewCode:"{city: inputs.city}",dataBuilderSource:"e2NpdHk6IGlucHV0cy5jaXR5fQ==",templateType:"value",completionOutputs:["r"]}},{id:"Get Attribute-893",partId:"Get Attribute",inputConfig:{attribute:{mode:"static",value:"data.populationCounts.0.value"}},pos:{x:-196.82018798828125,y:535.9137713623047},style:{icon:"fa-box",size:"small"}}],inputsPosition:{city:{x:-59.242744173605615,y:192.73141904118035}},outputsPosition:{value:{x:-116.77230284586054,y:698.5630767231784}},connections:[{from:{pinId:"city",insId:"__this"},to:{insId:"Inline-value-{city: inputs.c75",pinId:"city"}},{from:{insId:"Inline-value-{city: inputs.c75",pinId:"r"},to:{insId:"POST Request-775",pinId:"data"}},{from:{insId:"Get Attribute-893",pinId:"value"},to:{pinId:"value",insId:"__this"}},{from:{insId:"POST Request-775",pinId:"data"},to:{insId:"Get Attribute-893",pinId:"object"}}],completionOutputs:["value"]},style:{size:"large",color:"#00bbf9"}}],connections:[{from:{insId:"Get Country Name And Capital-ins",pinId:"name"},to:{insId:"Inline-value-Hello from ${i76",pinId:"country"}},{from:{insId:"Get Country Name And Capital-ins",pinId:"capital"},to:{insId:"Inline-value-Hello from ${i76",pinId:"capital"}},{from:{insId:"Format Number-ins",pinId:"string"},to:{insId:"Inline-value-Hello from ${i76",pinId:"population"}},{from:{insId:"cl8x5r4qp00074666lb382z1c",pinId:"value"},to:{insId:"Format Number-ins",pinId:"number"}},{from:{insId:"Get Country Name And Capital-ins",pinId:"capital"},to:{insId:"cl8x5r4qp00074666lb382z1c",pinId:"city"}},{from:{insId:"Get User's Country-ins",pinId:"country"},to:{insId:"Get Country Name And Capital-ins",pinId:"body"}},{from:{insId:"Inline-value-Hello from ${i76",pinId:"value"},to:{insId:"__this",pinId:"response"}}],id:"ApisCombination",inputs:{},outputs:{response:{type:"any",optional:!1,delayed:!1}},inputsPosition:{city:{x:-187.27285824815934,y:-14.13215209416181}},outputsPosition:{json:{x:-441.98276309426666,y:480.38719404276554},na:{x:-441.98276309426666,y:480.38719404276554},result:{x:-499.82438378976735,y:706.7650396699393},output:{x:-474.64252250807056,y:437.71313745088565},response:{x:-506.3386688159596,y:488.67302443385125}},completionOutputs:["response"]},dependencies:{"GET Request":{id:"GET Request",description:"Performs a HTTP GET request to a URL and emits the response data",namespace:"HTTP",inputs:{url:{description:"URL to fetch data from",mode:"required"},headers:{description:"Headers to send with the request",mode:"required-if-connected"},params:{description:"Query parameters to send with the request",mode:"required-if-connected"}},outputs:{data:{description:"The response data"}},defaultStyle:{icon:"fa-server"},fn:n(41396).Get.fn,source:{path:"/Users/gabrielgrinberg/projects/flyde/stdlib/dist/Http.flyde.js",export:"Get"}},"POST Request":{id:"POST Request",description:"Performs a HTTP POST request to a URL and emits the response data",namespace:"HTTP",inputs:{url:{description:"URL to fetch data from",mode:"required"},headers:{description:"Headers to send with the request",mode:"required-if-connected"},params:{description:"Query parameters to send with the request",mode:"required-if-connected"},data:{description:"Data to send with the request",mode:"required-if-connected"}},outputs:{data:{description:"The response data"}},defaultStyle:{icon:"fa-server"},fn:n(41396).Post.fn,source:{path:"/Users/gabrielgrinberg/projects/flyde/stdlib/dist/Http.flyde.js",export:"Post"}},"Get Attribute":{id:"Get Attribute",description:"Gets an attribute from an object",namespace:"Objects",inputs:{object:{description:"Object to get attribute from",mode:"required"},attribute:{description:"Attribute to get",mode:"required"}},outputs:{value:{description:"The value of the attribute"}},defaultStyle:{icon:"fa-magnifying-glass"},fn:n(16505).GetAttribute.fn,customViewCode:'<% if (inputs.attribute) { %> Get "<%- inputs.attribute %>"<% } else { %> Get Attribute <% } %>',source:{path:"/Users/gabrielgrinberg/projects/flyde/stdlib/dist/Objects.flyde.js",export:"GetAttribute"}}}},flow:{imports:{"@flyde/stdlib":["GET Request","POST Request","Get Attribute"]},part:{instances:[{pos:{x:-656.1905053710938,y:325.03946411132813},id:"Inline-value-Hello from ${i76",inputConfig:{},part:{id:"Inline-value-Hello from ${i",inputs:{country:{type:"any",mode:"required"},capital:{type:"any",mode:"required"},population:{type:"any",mode:"required"}},outputs:{value:{type:"any",delayed:!1,optional:!1}},fnCode:"const result = (`Hello from ${inputs.country}! It's capital is ${inputs.capital} (population of ${inputs.population})`); Promise.resolve(result).then(val => outputs.value.next(val))",customViewCode:"`Hello from ${inputs.country}! It's capital is ${inputs.capital} (population of ${inputs.population}",dataBuilderSource:"YEhlbGxvIGZyb20gJHtpbnB1dHMuY291bnRyeX0hIEl0J3MgY2FwaXRhbCBpcyAke2lucHV0cy5jYXBpdGFsfSAocG9wdWxhdGlvbiBvZiAke2lucHV0cy5wb3B1bGF0aW9ufSlg",templateType:"value",completionOutputs:["value"],defaultStyle:{size:"regular",icon:"code",cssOverride:{fontFamily:"monospace",fontWeight:"500"}}}},{pos:{x:-578.892123413086,y:-223.60953734636303},id:"Get User's Country-ins",inputConfig:{},part:{id:"Get User's Country",inputs:{},outputs:{country:{type:"any",delayed:!1,optional:!1}},instances:[{pos:{x:-335.7258349609375,y:-194.68226864814756},id:"GET Request-907",inputConfig:{url:{mode:"static",value:"https://api.country.is/"}},visibleInputs:["url","__trigger"],visibleOutputs:["r","__error","response","data"],partId:"GET Request"},{id:"Inline-value-{iso2: ${input76",part:{id:"Inline-value-{iso2: inputs.d",inputs:{data:{type:"any",mode:"required"}},outputs:{value:{type:"any",delayed:!1,optional:!1}},fnCode:"const result = ({iso2: inputs.data.country}); Promise.resolve(result).then(val => outputs.value.next(val))",customViewCode:"{iso2: inputs.data.country}",dataBuilderSource:"e2lzbzI6IGlucHV0cy5kYXRhLmNvdW50cnl9",templateType:"value",completionOutputs:["value"],defaultStyle:{size:"regular",icon:"code",cssOverride:{fontFamily:"monospace",fontWeight:"500"}}},inputConfig:{},pos:{x:-468.5056274414062,y:-39.30523986816405}}],inputsPosition:{},outputsPosition:{r:{x:-363.42401672132144,y:105.34149194113161},country:{x:-322.5739794922268,y:138.57280736180334}},connections:[{from:{insId:"Inline-value-{iso2: ${input76",pinId:"value"},to:{pinId:"country",insId:"__this"}},{from:{insId:"GET Request-907",pinId:"data"},to:{insId:"Inline-value-{iso2: ${input76",pinId:"data"}}],completionOutputs:["country"]},style:{size:"large",color:"#f15bb5"}},{pos:{x:-637.9743029785157,y:-84.37110525846481},id:"Get Country Name And Capital-ins",inputConfig:{},visibleOutputs:["name","capital"],part:{id:"Get Country Name And Capital",inputs:{body:{type:"any",mode:"required"}},outputs:{capital:{type:"any",delayed:!1,optional:!1},name:{type:"any",delayed:!1,optional:!1}},instances:[{pos:{x:-455.39787109375004,y:43.691497802734375},id:"POST Request-624",inputConfig:{url:{mode:"static",value:"https://countriesnow.space/api/v0.1/countries/capital"}},visibleInputs:["url","body","data"],partId:"POST Request"},{id:"Get Attribute-217",partId:"Get Attribute",inputConfig:{attribute:{mode:"static",value:"data.capital"}},pos:{x:-285.6922900390625,y:219.88888122558592}},{id:"Get Country Name And Capital-srp46ei",partId:"Get Attribute",inputConfig:{attribute:{mode:"static",value:"data.name"}},pos:{x:-608.0307299804688,y:225.56220581054686}}],inputsPosition:{body:{x:-333.75691140339336,y:-63.66470402308542}},outputsPosition:{value:{x:-514.1541695281439,y:411.8457371232514},i10:{x:-280.88783057750686,y:411.581705357324},capital:{x:-214.78486673798952,y:473.65942918140723},name:{x:-523.761854810908,y:479.9947571097377}},connections:[{from:{pinId:"body",insId:"__this"},to:{insId:"POST Request-624",pinId:"data"}},{from:{insId:"Get Attribute-217",pinId:"value"},to:{pinId:"capital",insId:"__this"}},{from:{insId:"POST Request-624",pinId:"data"},to:{insId:"Get Country Name And Capital-srp46ei",pinId:"object"}},{from:{insId:"Get Country Name And Capital-srp46ei",pinId:"value"},to:{pinId:"name",insId:"__this"}},{from:{insId:"POST Request-624",pinId:"data"},to:{insId:"Get Attribute-217",pinId:"object"}}],completionOutputs:["name+capital"]},style:{size:"large",color:"#9b5de5"}},{pos:{x:-266.7627111816406,y:205.0337203979492},id:"Format Number-ins",inputConfig:{},part:{id:"Format Number",inputs:{number:{type:"any",mode:"required"}},outputs:{string:{type:"any",delayed:!1,optional:!1}},instances:[{id:"Inline-value-Result is ${in47",part:{id:"Inline-value-new Intl.Number",inputs:{population:{type:"any",mode:"required"}},outputs:{r:{type:"any",delayed:!1,optional:!1}},fnCode:"outputs.r.next((new Intl.NumberFormat().format(inputs.population)))",customViewCode:"new Intl.NumberFormat().format(inputs.population)",dataBuilderSource:"bmV3IEludGwuTnVtYmVyRm9ybWF0KCkuZm9ybWF0KGlucHV0cy5wb3B1bGF0aW9uKQ==",templateType:"value",completionOutputs:["r"]},inputConfig:{},pos:{x:-452.21022216796877,y:176.39826171875}}],inputsPosition:{population:{x:0,y:0},number:{x:0,y:0}},outputsPosition:{r:{x:0,y:400},string:{x:0,y:400}},connections:[{from:{insId:"__this",pinId:"number"},to:{insId:"Inline-value-Result is ${in47",pinId:"population"}},{from:{insId:"Inline-value-Result is ${in47",pinId:"r"},to:{insId:"__this",pinId:"string"}}],completionOutputs:["string"]},style:{size:"regular",color:"#fee440"}},{pos:{x:-305.335751953125,y:65.09392517089844},id:"cl8x5r4qp00074666lb382z1c",inputConfig:{},part:{id:"Get Population By City",inputs:{city:{type:"any",mode:"required"}},outputs:{value:{type:"any",delayed:!1,optional:!1}},instances:[{pos:{x:-204.90311279296873,y:349.60314422607416},id:"POST Request-775",inputConfig:{url:{mode:"static",value:"https://countriesnow.space/api/v0.1/countries/population/cities"}},visibleInputs:["url","body","data"],partId:"POST Request"},{pos:{x:-143.08780761718754,y:233.70198646545413},id:"Inline-value-{city: inputs.c75",inputConfig:{},part:{id:"Inline-value-{city: inputs.c",inputs:{city:{type:"any",mode:"required"}},outputs:{r:{type:"any",delayed:!1,optional:!1}},fnCode:"outputs.r.next(({city: inputs.city}))",customViewCode:"{city: inputs.city}",dataBuilderSource:"e2NpdHk6IGlucHV0cy5jaXR5fQ==",templateType:"value",completionOutputs:["r"]}},{id:"Get Attribute-893",partId:"Get Attribute",inputConfig:{attribute:{mode:"static",value:"data.populationCounts.0.value"}},pos:{x:-196.82018798828125,y:535.9137713623047},style:{icon:"fa-box",size:"small"}}],inputsPosition:{city:{x:-59.242744173605615,y:192.73141904118035}},outputsPosition:{value:{x:-116.77230284586054,y:698.5630767231784}},connections:[{from:{pinId:"city",insId:"__this"},to:{insId:"Inline-value-{city: inputs.c75",pinId:"city"}},{from:{insId:"Inline-value-{city: inputs.c75",pinId:"r"},to:{insId:"POST Request-775",pinId:"data"}},{from:{insId:"Get Attribute-893",pinId:"value"},to:{pinId:"value",insId:"__this"}},{from:{insId:"POST Request-775",pinId:"data"},to:{insId:"Get Attribute-893",pinId:"object"}}],completionOutputs:["value"]},style:{size:"large",color:"#00bbf9"}}],connections:[{from:{insId:"Get Country Name And Capital-ins",pinId:"name"},to:{insId:"Inline-value-Hello from ${i76",pinId:"country"}},{from:{insId:"Get Country Name And Capital-ins",pinId:"capital"},to:{insId:"Inline-value-Hello from ${i76",pinId:"capital"}},{from:{insId:"Format Number-ins",pinId:"string"},to:{insId:"Inline-value-Hello from ${i76",pinId:"population"}},{from:{insId:"cl8x5r4qp00074666lb382z1c",pinId:"value"},to:{insId:"Format Number-ins",pinId:"number"}},{from:{insId:"Get Country Name And Capital-ins",pinId:"capital"},to:{insId:"cl8x5r4qp00074666lb382z1c",pinId:"city"}},{from:{insId:"Get User's Country-ins",pinId:"country"},to:{insId:"Get Country Name And Capital-ins",pinId:"body"}},{from:{insId:"Inline-value-Hello from ${i76",pinId:"value"},to:{insId:"__this",pinId:"response"}}],id:"ApisCombination",inputs:{},outputs:{response:{type:"any",optional:!1,delayed:!1}},inputsPosition:{city:{x:-187.27285824815934,y:-14.13215209416181}},outputsPosition:{json:{x:-441.98276309426666,y:480.38719404276554},na:{x:-441.98276309426666,y:480.38719404276554},result:{x:-499.82438378976735,y:706.7650396699393},output:{x:-474.64252250807056,y:437.71313745088565},response:{x:-506.3386688159596,y:488.67302443385125}},completionOutputs:["response"]}}},u=n(42716),s={title:"HTTP Requests",description:"Flyde works great for heavy asynchronous & concurrent tasks, like combining several REST APIs together. This example shows exactly that, by combining 3 different REST APIs, the population of the capital of the country your IP is assigned with is retrieved",key:"api",extraInfo:r.createElement("strong",null,r.createElement("h3",null,"Try double-clicking each API part to see it's underlying implementation! In Flyde, nothing is hidden, only abstracted"))};function c(){var e=(0,r.useRef)((0,i.dynamicOutput)()),t=(0,r.useRef)({__trigger:(0,i.dynamicPartInput)()}),n=(0,r.useState)({flow:a.flow,resolvedFlow:a.resolvedFlow,inputs:t.current,output:e.current}),c=n[0],l=(n[1],r.createElement("button",{className:"button button--success",onClick:function(){return t.current.__trigger.subject.next("run")}},"Run!"));return r.createElement(o.I,{meta:s,flowProps:c,defaultDelay:100,prefixComponent:l},r.createElement(u.V,{output:e.current}))}},60512:function(e,t){"use strict";t.Z={buttons:"buttons_AeoN","gh-stars-wrapper":"gh-stars-wrapper_LiAa","project-editor":"project-editor_XBpx",_hj_feedback_container:"_hj_feedback_container_Af03"}},95126:function(e,t,n){var r={"./af":1009,"./af.js":1009,"./ar":88769,"./ar-dz":23739,"./ar-dz.js":23739,"./ar-kw":93745,"./ar-kw.js":93745,"./ar-ly":99576,"./ar-ly.js":99576,"./ar-ma":67408,"./ar-ma.js":67408,"./ar-sa":48781,"./ar-sa.js":48781,"./ar-tn":87856,"./ar-tn.js":87856,"./ar.js":88769,"./az":2030,"./az.js":2030,"./be":56476,"./be.js":56476,"./bg":25304,"./bg.js":25304,"./bm":48125,"./bm.js":48125,"./bn":34,"./bn-bd":29835,"./bn-bd.js":29835,"./bn.js":34,"./bo":64082,"./bo.js":64082,"./br":8317,"./br.js":8317,"./bs":93107,"./bs.js":93107,"./ca":68272,"./ca.js":68272,"./cs":98567,"./cs.js":98567,"./cv":61583,"./cv.js":61583,"./cy":10076,"./cy.js":10076,"./da":31760,"./da.js":31760,"./de":8973,"./de-at":63214,"./de-at.js":63214,"./de-ch":74728,"./de-ch.js":74728,"./de.js":8973,"./dv":54053,"./dv.js":54053,"./el":7499,"./el.js":7499,"./en-au":67876,"./en-au.js":67876,"./en-ca":47010,"./en-ca.js":47010,"./en-gb":34239,"./en-gb.js":34239,"./en-ie":99830,"./en-ie.js":99830,"./en-il":28438,"./en-il.js":28438,"./en-in":25322,"./en-in.js":25322,"./en-nz":43264,"./en-nz.js":43264,"./en-sg":55449,"./en-sg.js":55449,"./eo":39486,"./eo.js":39486,"./es":32430,"./es-do":16310,"./es-do.js":16310,"./es-mx":27038,"./es-mx.js":27038,"./es-us":73099,"./es-us.js":73099,"./es.js":32430,"./et":34975,"./et.js":34975,"./eu":87063,"./eu.js":87063,"./fa":68073,"./fa.js":68073,"./fi":50957,"./fi.js":50957,"./fil":8764,"./fil.js":8764,"./fo":81775,"./fo.js":81775,"./fr":74179,"./fr-ca":14306,"./fr-ca.js":14306,"./fr-ch":73791,"./fr-ch.js":73791,"./fr.js":74179,"./fy":47014,"./fy.js":47014,"./ga":46911,"./ga.js":46911,"./gd":62958,"./gd.js":62958,"./gl":87344,"./gl.js":87344,"./gom-deva":33161,"./gom-deva.js":33161,"./gom-latn":35798,"./gom-latn.js":35798,"./gu":68485,"./gu.js":68485,"./he":27917,"./he.js":27917,"./hi":52159,"./hi.js":52159,"./hr":95842,"./hr.js":95842,"./hu":30005,"./hu.js":30005,"./hy-am":51312,"./hy-am.js":51312,"./id":60781,"./id.js":60781,"./is":64101,"./is.js":64101,"./it":43467,"./it-ch":4759,"./it-ch.js":4759,"./it.js":43467,"./ja":44164,"./ja.js":44164,"./jv":70079,"./jv.js":70079,"./ka":57036,"./ka.js":57036,"./kk":92022,"./kk.js":92022,"./km":63418,"./km.js":63418,"./kn":43655,"./kn.js":43655,"./ko":30986,"./ko.js":30986,"./ku":91902,"./ku.js":91902,"./ky":4604,"./ky.js":4604,"./lb":99026,"./lb.js":99026,"./lo":20537,"./lo.js":20537,"./lt":22288,"./lt.js":22288,"./lv":1495,"./lv.js":1495,"./me":60690,"./me.js":60690,"./mi":2571,"./mi.js":2571,"./mk":93959,"./mk.js":93959,"./ml":97225,"./ml.js":97225,"./mn":88,"./mn.js":88,"./mr":46622,"./mr.js":46622,"./ms":11070,"./ms-my":48899,"./ms-my.js":48899,"./ms.js":11070,"./mt":63931,"./mt.js":63931,"./my":95393,"./my.js":95393,"./nb":4274,"./nb.js":4274,"./ne":8914,"./ne.js":8914,"./nl":33114,"./nl-be":68479,"./nl-be.js":68479,"./nl.js":33114,"./nn":4513,"./nn.js":4513,"./oc-lnc":46549,"./oc-lnc.js":46549,"./pa-in":28264,"./pa-in.js":28264,"./pl":32848,"./pl.js":32848,"./pt":90899,"./pt-br":55077,"./pt-br.js":55077,"./pt.js":90899,"./ro":92512,"./ro.js":92512,"./ru":21753,"./ru.js":21753,"./sd":16840,"./sd.js":16840,"./se":78362,"./se.js":78362,"./si":50464,"./si.js":50464,"./sk":66324,"./sk.js":66324,"./sl":41963,"./sl.js":41963,"./sq":53039,"./sq.js":53039,"./sr":93454,"./sr-cyrl":10466,"./sr-cyrl.js":10466,"./sr.js":93454,"./ss":95158,"./ss.js":95158,"./sv":28859,"./sv.js":28859,"./sw":57594,"./sw.js":57594,"./ta":26915,"./ta.js":26915,"./te":15677,"./te.js":15677,"./tet":92154,"./tet.js":92154,"./tg":74098,"./tg.js":74098,"./th":89071,"./th.js":89071,"./tk":49381,"./tk.js":49381,"./tl-ph":1869,"./tl-ph.js":1869,"./tlh":92346,"./tlh.js":92346,"./tr":71483,"./tr.js":71483,"./tzl":30266,"./tzl.js":30266,"./tzm":33138,"./tzm-latn":32960,"./tzm-latn.js":32960,"./tzm.js":33138,"./ug-cn":29456,"./ug-cn.js":29456,"./uk":50805,"./uk.js":50805,"./ur":61127,"./ur.js":61127,"./uz":29628,"./uz-latn":80840,"./uz-latn.js":80840,"./uz.js":29628,"./vi":56962,"./vi.js":56962,"./x-pseudo":49257,"./x-pseudo.js":49257,"./yo":62423,"./yo.js":62423,"./zh-cn":61002,"./zh-cn.js":61002,"./zh-hk":6046,"./zh-hk.js":6046,"./zh-mo":36903,"./zh-mo.js":36903,"./zh-tw":24710,"./zh-tw.js":24710};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=95126},91764:function(){}}]);