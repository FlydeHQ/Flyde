(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7],{79440:function(t,e,n){"use strict";var i=this&&this.__spreadArray||function(t,e){for(var n=0,i=e.length,o=t.length;n<i;n++,o++)t[o]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.fakeVm=e.VM=e.VMScript=void 0;var o=n(18265),r=function(t){this.script=t};e.VMScript=r;var a=function(){function t(t){this.context=t}return t.prototype.run=function(t){var e=o.okeys(this.context.sandbox),n=Object.values(this.context.sandbox);Function.apply(void 0,i(i([],e),[t.script])).apply(void 0,n)},t}();e.VM=a,e.fakeVm={VMScript:r,VM:a}},35537:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getVM2Instance=void 0;var i=n(79440);e.getVM2Instance=function(){return i.fakeVm}},98343:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},o=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]])}return n},r=this&&this.__spreadArray||function(t,e){for(var n=0,i=e.length,o=t.length;n<i;n++,o++)t[o]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.customRepoToPartRepo=e.codePartToNative=void 0;var a=n(14206),u=n(18265),s=n(24048),c=n(18265),l=n(35537).getVM2Instance();e.codePartToNative=function(t,e){void 0===e&&(e={});var n=t.fnCode,d=o(t,["fnCode"]),p=u.debugLogger("code-part:"+t.id),f="\n  try {\n    "+n+"\n  } catch (e) {\n    adv.onError(e);\n  }\n  ",v=new l.VMScript(f),m=i(i({},d),{fn:function(n,o,d){var f=new l.VM({sandbox:i({inputs:n,outputs:o,setInterval:setInterval,clearInterval:clearInterval,setTimeout:setTimeout,clearTimeout:clearTimeout,encodeURIComponent:encodeURIComponent,adv:d,log:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];p.apply(void 0,r(["Log from code part "+t.id+" ["+d.insId+"]"],e))},axios:a.default,DEFAULT_AXIOS_TIMEOUT:15e3,dynamicPartInput:s.dynamicPartInput,dynamicPartArg:s.dynamicPartInput,dynamicOutput:c.dynamicOutput,isDefined:c.isDefined,compileStringTemplate:u.compileStringTemplate,compileObjectTemplate:u.compileObjectTemplate,__FLYDE_MODE:"production"},e)});f.run(v)}});return m};e.customRepoToPartRepo=function(t,n){void 0===n&&(n={});var i={};for(var o in t){var r=t[o];i[o]=s.isCodePart(r)?e.codePartToNative(r,n):r}return i}},8541:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.cappedArrayDebounce=void 0;e.cappedArrayDebounce=function(t,e,n,i){void 0===i&&(i=500);var o=[],r=null,a=null;return{addItem:function(u){clearTimeout(r),o.push(u),a||(a=setTimeout((function(){t(o),clearTimeout(r),a=null}),i)),o.length>=n?(t(o),clearTimeout(a),a=null,o=[]):r=setTimeout((function(){t(o),clearTimeout(a),a=null,o=[]}),e)},flush:function(){o.length&&(t(o),o=[],clearTimeout(a))}}}},96615:function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.dataShaper=e.DataShapeType=void 0,function(t){t[t.STRING=0]="STRING",t[t.NUMBER=1]="NUMBER",t[t.BOOLEAN=2]="BOOLEAN",t[t.ARRAY=3]="ARRAY",t[t.OBJECT=4]="OBJECT",t[t.NULL=5]="NULL"}(n=e.DataShapeType||(e.DataShapeType={}));var i={string:n.STRING,number:n.NUMBER,boolean:n.BOOLEAN,object:n.OBJECT,array:n.ARRAY,null:n.NULL};e.dataShaper=function(t,n,o){void 0===n&&(n=5),void 0===o&&(o=5);var r,a,u=null===(r=t)?"null":typeof r;if("object"===u){if(Array.isArray(t))return n>1?t.filter((function(t,e){return e<o})).map((function(t){return e.dataShaper(t,n-1,o)})):i.array;if(n>1){var s={};for(var c in t)s[c]=e.dataShaper(t[c],n-1,o);return a=s,Object.keys(a).sort().reduce((function(t,e){return t[e]=a[e],t}),{})}return i.object}return i[u]}},40189:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.debugLogger=void 0;var i=n(96292).default("flyde");e.debugLogger=function(t){return i.extend(t)}},68132:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},o=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]])}return n},r=this&&this.__spreadArray||function(t,e){for(var n=0,i=e.length,o=t.length;n<i;n++,o++)t[o]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.hashFlow=e.hashPart=void 0;var a=n(61586),u=n(18265),s=function(t){return a(t)};e.hashPart=function(t,e){void 0===e&&(e=!0);var n={id:t.id,completionOutputs:t.completionOutputs,reactiveInputs:t.reactiveInputs,inputs:t.inputs,outputs:t.outputs};if(u.isGroupedPart(t)){var a=t.instances,c=t.id,l=t.connections,d=t.inputsPosition,p=t.outputsPosition,f=a.map((function(t){t.pos;return o(t,["pos"])})),v=e?{}:{inputsPosition:d,outputsPosition:p},m=e?f:a;m.sort((function(t,e){return t.id.localeCompare(e.id)}));var y=r([],l);y.sort((function(t,e){var n=t.from.insId+"."+t.from.pinId,i=e.from.insId+"."+e.from.pinId;return n.localeCompare(i)}));var h=JSON.stringify(i(i({id:c,instancesToUse:m,conns:y},n),{maybeIoPos:v}));return s(h)}if(u.isCodePart(t)){var g=t.fnCode,I=t.customViewCode;h=JSON.stringify(i({fnCode:g,customViewCode:I},n));return s(h)}throw new Error("Hashing native parts unsupported")};e.hashFlow=function(t,n){void 0===n&&(n=!0);var o=t.part,r=t.imports,a=e.hashPart(o,!1),u=Object.entries(r).sort((function(t,e){var n=t[0],i=e[0];return n.localeCompare(i)})).map((function(t){return[t[0],t[1].sort()]})).reduce((function(t,e){var n,o=e[0],r=e[1];return i(i({},t),((n={})[o]=r,n))}),{}),c=JSON.stringify(u);return s(a+c)}},45821:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.DepGraph=void 0,o(n(69985),e),o(n(94919),e),o(n(40189),e),o(n(8541),e),o(n(94919),e),o(n(68132),e),o(n(67748),e),o(n(96615),e),e.DepGraph=n(59280).DepGraph},69985:function(t,e){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.testDataCreator=void 0;e.testDataCreator=function(t){return function(e){void 0===e&&(e={});var i="function"==typeof t?t():t,o=e;return n(n({},i),o)}}},94919:function(t,e){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},n.apply(this,arguments)},i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{s(i.next(t))}catch(e){r(e)}}function u(t){try{s(i.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function u(r){return function(u){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(u){r=[6,u],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,u])}}},r=this&&this.__spreadArray||function(t,e){for(var n=0,i=e.length,o=t.length;n<i;n++,o++)t[o]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.eventually=e.delay=e.noop=e.removeDupes=e.ensure=e.isOptionalType=e.callFnOrFnPromise=e.isPromise=e.isDefined=e.containsAll=e.shuffle=e.randomInts=e.repeat=e.pickRandom=e.randomPos=e.randomInt=e.pickSecond=e.pickFirst=e.fromEntries=e.entries=e.okeys=e.values=e.keys=e.filterOMap=e.mapOMap=void 0;e.mapOMap=function(t,i){return e.entries(t).map((function(t){var e=t[0],n=t[1];return[e,i(e,n)]})).reduce((function(t,e){var i,o=e[0],r=e[1];return n(n({},t),((i={})[o]=r,i))}),{})};e.filterOMap=function(t,i){return e.entries(t).filter((function(t){var e=t[0],n=t[1];return i(e,n)})).reduce((function(t,e){var i,o=e[0],r=e[1];return n(n({},t),((i={})[o]=r,i))}),{})};e.keys=function(t){return Object.keys(t)};e.values=function(t){return Object.values(t)},e.okeys=e.keys;e.entries=function(t){return e.okeys(t).map((function(e){return[e,t[e]]}))};e.fromEntries=function(t){return t.reduce((function(t,e){var i,o=e[0],r=e[1];return n(n({},t),((i={})[o]=r,i))}),{})};e.pickFirst=function(t){return t[0]};e.pickSecond=function(t){return t[1]};e.randomInt=function(t,e){void 0===e&&(e=0);var n=Math.random();return e+Math.floor((t-e)*n)};e.randomPos=function(t,n){return void 0===t&&(t=1e3),void 0===n&&(n=0),{x:e.randomInt(t,n),y:e.randomInt(t,n)}};e.pickRandom=function(t){return t[e.randomInt(t.length)]};e.repeat=function(t,e){return"x".repeat(t).split("").map((function(t,n){return e(n)}))};e.randomInts=function(t,n,i){return void 0===n&&(n=100),void 0===i&&(i=0),e.repeat(t,(function(){return e.randomInt(n,i)}))};e.shuffle=function(t){for(var e,n=r([],t),i=n.length-1;i>=0;i--){var o=Math.floor(Math.random()*(i+1));e=[n[o],n[i]],n[i]=e[0],n[o]=e[1]}return n};e.containsAll=function(t,e){return e.every((function(e){return t.includes(e)}))};e.isDefined=function(t){return void 0!==t};e.isPromise=function(t){return t&&"function"==typeof t.then};e.callFnOrFnPromise=function(t,n){if(e.isDefined(t)){var i=function(t){try{t()}catch(e){console.error(e)}};"function"==typeof t?i(t):Promise.resolve(t).then((function(t){"function"==typeof t&&i(t)}))}};e.isOptionalType=function(t){return/\?$/.test(t)};e.ensure=function(t,e){if(void 0===t)throw new Error(e||"Undefined value passed");return t};e.removeDupes=function(t){return Array.from(new Set(t))};e.noop=function(){};e.delay=function(t){return new Promise((function(e){return setTimeout(e,t)}))};e.eventually=function(t,n,r,a){return void 0===n&&(n=3e3),void 0===r&&(r=100),void 0===a&&(a=new Set),i(void 0,void 0,void 0,(function(){var i,u,s,c;return o(this,(function(o){switch(o.label){case 0:if(n<0)throw i=Array.from(a).reduce((function(t,e,n){return t+"\n\t\t"+(n+1)+". "+e}),""),new Error("[Eventually timeout exceeded after: timeout with error]: "+i);o.label=1;case 1:return o.trys.push([1,3,,5]),[4,t()];case 2:return o.sent(),[3,5];case 3:return u=o.sent(),s=Date.now(),[4,e.delay(r)];case 4:return o.sent(),c=Date.now()-s,a.add(u.message),[2,e.eventually(t,n-c,r,a)];case 5:return[2]}}))}))}},67748:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compileObjectTemplate=e.compileStringTemplate=void 0;e.compileStringTemplate=function(t,e){var n=decodeURIComponent(t);return Object.keys(e).forEach((function(t){var i=e[t],o=new RegExp("\\$\\{"+t+"\\}","g");n=n.replace(o,i)})),n};e.compileObjectTemplate=function(t,e){var n=decodeURIComponent(t);return Object.keys(e).forEach((function(t){var i=e[t],o=JSON.stringify(i),r=new RegExp('"\\$\\$\\{'+t+'\\}"',"g"),a=new RegExp("\\$\\{"+t+"\\}","g"),u="string"==typeof i?i.replace(/"/g,(function(t,e,n){return"\\"!==n[e-1]?'\\"':n[e]})):i;n=n.replace(r,o).replace(a,u).replace(/\n/g,"\\n")})),JSON.parse(n)}},1076:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.connection=e.connectionData=e.connectionDataEquals=e.connectionNodeEquals=e.connectionNode=e.externalConnectionNode=e.isInternalConnection=e.isExternalConnection=e.isInternalConnectionNode=e.isExternalConnectionNode=e.getPartOutputs=e.getOutputName=e.getInputName=e.getPartInputs=e.TRIGGER_PIN_ID=e.ERROR_PIN_ID=e.THIS_INS_ID=void 0;var o=n(18265);e.THIS_INS_ID="__this",e.ERROR_PIN_ID="__error",e.TRIGGER_PIN_ID="__trigger";e.getPartInputs=function(t){var n;return i(i({},t.inputs),((n={})[e.TRIGGER_PIN_ID]=o.partInput("any"),n))};e.getInputName=function(t){return t===e.TRIGGER_PIN_ID?"Trigger Part":t};e.getOutputName=function(t){return t===e.ERROR_PIN_ID?"Error":t};e.getPartOutputs=function(t){var n;return i(i({},t.outputs),((n={})[e.ERROR_PIN_ID]=o.partOutput("error"),n))};e.isExternalConnectionNode=function(t){return t.insId===e.THIS_INS_ID};e.isInternalConnectionNode=function(t){return t.insId!==e.THIS_INS_ID};e.isExternalConnection=function(t){var n=t.from,i=t.to;return e.isExternalConnectionNode(n)||e.isExternalConnectionNode(i)};e.isInternalConnection=function(t){return!e.isExternalConnection(t)};e.externalConnectionNode=function(t){return{insId:e.THIS_INS_ID,pinId:t}};e.connectionNode=function(t,e){return{insId:t,pinId:e}};e.connectionNodeEquals=function(t,e){return t.insId===e.insId&&t.pinId===e.pinId};e.connectionDataEquals=function(t,n){return!(!t||!n)&&(e.connectionNodeEquals(t.from,n.from)&&e.connectionNodeEquals(t.to,n.to))},e.connectionData=function(t,n,i){var o="string"==typeof t?t.split("."):t,r="string"==typeof n?n.split("."):n;if(o.length>2||r.length>2)throw new Error("invalid source or target to connection data - "+t+" / "+n);return{from:2===o.length?e.connectionNode(o[0],o[1]):e.externalConnectionNode(o[0]),to:2===r.length?e.connectionNode(r[0],r[1]):e.externalConnectionNode(r[0]),delayed:i}};e.connection=function(t,e,n){return void 0===n&&(n=!1),{from:t,to:e,delayed:n}}},6485:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)},r=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{s(i.next(t))}catch(e){r(e)}}function u(t){try{s(i.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function u(r){return function(u){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(u){r=[6,u],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.connect=void 0;var u=n(24048),s=n(30385),c=n(45821),l=n(1076);o(n(1076),e);e.connect=function(t,e,n,i,o,d,p,f){void 0===n&&(n={}),void 0===i&&(i="root"),void 0===o&&(o={bob:new Map}),void 0===d&&(d=c.noop),void 0===p&&(p={}),void 0===f&&(f={});var v=t.id,m=t.connections,y=t.instances,h=v||"connected-part"+c.randomInt(999);return{inputs:t.inputs,outputs:t.outputs,id:h,completionOutputs:t.completionOutputs,reactiveInputs:t.reactiveInputs,fn:function(v,g){var I=[],b=new c.DepGraph({}),P=new Map,_=new Map,C=new Map,x=new Map,E=new Map,j=new Map;y.forEach((function(t){var n=u.getPart(t,e),i=t.id;P.set(t,i),_.set(i,t),b.addNode(i);var o=Object.keys(n.inputs),r=Object.keys(n.outputs),a={},s={};if(o.forEach((function(e){var n=(t.inputConfig||{})[e]||u.queueInputPinConfig();u.isStaticInputPinConfig(n)?a[e]=u.staticPartInput(n.value):a[e]=u.dynamicPartInput({config:n})})),a[l.TRIGGER_PIN_ID]=u.dynamicPartInput({config:u.queueInputPinConfig()}),m.some((function(e){return l.isInternalConnectionNode(e.to)&&e.to.insId===t.id&&e.to.pinId===l.TRIGGER_PIN_ID}))&&t.inputConfig&&t.inputConfig[l.TRIGGER_PIN_ID])throw"Trigger connection can not be configured";r.forEach((function(t){var e=u.dynamicOutput();s[t]=e})),m.some((function(e){return l.isInternalConnectionNode(e.from)&&e.from.insId===t.id&&e.from.pinId===l.ERROR_PIN_ID}))&&(s[l.ERROR_PIN_ID]=u.dynamicOutput()),C.set(i,a),x.set(i,s)}));var w=new Set;return m.forEach((function(n){var i=n.from,o=n.to,s=i.insId,c=i.pinId,d=o.insId,p=o.pinId,f=x.get(s),v=C.get(d);if(l.isInternalConnectionNode(o)&&w.add(o.insId+"."+o.pinId),l.isExternalConnection(n))if(l.isExternalConnectionNode(i)){var m=v[o.pinId];if(!m)throw new Error("Input "+o.pinId+" of instance "+d+" not found");(y=E.get(i.pinId)||[]).push(m),E.set(i.pinId,y)}else{var y,g=f[i.pinId];if(!g)throw new Error("Output "+i.pinId+" of instance "+s+" not found");(y=j.get(o.pinId)||[]).push(g),j.set(o.pinId,y)}else{if(!f)throw new Error("No outputs found for instance ["+s+"]");if(!v)throw _.has(d)?new Error("No inputs found for instance ["+d+"]"):new Error("Instance with id ["+d+"] does not exist!");var P=f[c];if(!P)throw new Error("Output source - ["+i+"] not found in part ["+h+"]");var O=v[p],T=_.get(s);if(!T&&s!==l.THIS_INS_ID)throw new Error("Instance ["+s+"] does not exist! failed to connect ["+i+"] -> ["+o+"]");var S=(T?u.getPart(T,e):t).outputs[c];if(S&&S.delayed||n.delayed||s!==l.THIS_INS_ID&&d!==l.THIS_INS_ID&&b.addDependency(s,d),!O)throw new Error("Target arg - ["+o+"] not found in part ["+h+"]");var k=P.subscribe((function(t){return r(void 0,void 0,void 0,(function(){return a(this,(function(e){if(!u.isDynamicInput(O))throw console.info(O),new Error("Impossible state listening to non dynamic input - "+d+"."+p);return O.subject.next(t),[2]}))}))}));I.push((function(){return k.unsubscribe()}))}})),c.okeys(g).forEach((function(t){(j.get(t)||[]).forEach((function(e){var n=e.subscribe((function(e){return r(void 0,void 0,void 0,(function(){return a(this,(function(n){return g[t].next(e),[2]}))}))}));I.push((function(){return n.unsubscribe()}))}))})),b.overallOrder().map((function(t){return _.get(t)})).forEach((function(t){var r=C.get(t.id),a=x.get(t.id),c=u.getPart(t,e);if(!r)throw new Error("Unexpected error - args not found when running "+t);if(!a)throw new Error("Unexpected error - outputs not found when running "+t);for(var l in r){var v=t.inputConfig[l];w.has(t.id+"."+l)||u.isStaticInputPinConfig(v)||delete r[l]}var m=s.execute({part:c,inputs:r,outputs:a,partsRepo:e,_debugger:n,insId:t.id,extraContext:f,mainState:o,parentInsId:i,onBubbleError:d,env:p});I.push(m)})),Object.keys(v).forEach((function(t){return r(void 0,void 0,void 0,(function(){return a(this,(function(e){return(E.get(t)||[]).forEach((function(e){var n=v[t];if(!u.isDynamicInput(e))throw new Error("Unsure what to do with key "+t+", input: "+e+" of ins "+i);c.isDefined(n)&&e.subject.next(n)})),[2]}))}))})),function(){return I.forEach((function(t){try{t()}catch(e){console.error("error unsubscribing",e)}}))}}}}},30385:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},o=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{s(i.next(t))}catch(e){r(e)}}function u(t){try{s(i.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function u(r){return function(u){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(u){r=[6,u],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.execute=e.INPUTS_STATE_SUFFIX=e.INNER_STATE_SUFFIX=void 0;var a=n(71542),u=n(21730),s=n(98739),c=n(24048),l=n(6485),d=n(23939),p=n(45821),f=n(40189),v=n(18265);e.INNER_STATE_SUFFIX="_inner",e.INPUTS_STATE_SUFFIX="_inputs";e.execute=function(t){var n=t.part,m=t.inputs,y=t.outputs,h=t.partsRepo,g=t._debugger,I=void 0===g?{}:g,b=t.insId,P=void 0===b?n.id:b,_=t.extraContext,C=void 0===_?{}:_,x=t.mainState,E=void 0===x?{}:x,j=t.parentInsId,w=void 0===j?"root":j,O=t.onBubbleError,T=void 0===O?a.noop:O,S=t.env,k=void 0===S?{}:S,N=t.onCompleted,D=void 0===N?a.noop:N,M=[],R=s(),A=i(i({},C),{ENV:k}),V=v.customRepoToPartRepo(h,A),H=function(t){if(y[l.ERROR_PIN_ID])y[l.ERROR_PIN_ID].next(t);else{var e=t instanceof Error?t:new Error("Raw error: "+t.toString());if(e.message="error in child instance "+P+": "+e.message,e.insId=P,T(e),I.onError){var n=e;n.insId=w+"."+P,I.onError(n)}}},z=function(t){return c.isGroupedPart(t)?l.connect(t,V,I,w+"."+P,E,H,k,C):c.isCodePart(t)?v.codePartToNative(t,A):t}(n),G=I.onInput||a.noop,F=I.onOutput||a.noop,q={},B={},U=w+"."+P;p.entries(m).forEach((function(t){var e=t[0],n=t[1];if(c.isDynamicInput(n)){var i=c.dynamicPartInput({config:n.config}),a=n.subject.subscribe((function(t){return o(void 0,void 0,void 0,(function(){var n,o;return r(this,(function(r){switch(r.label){case 0:return(n=G({insId:U,pinId:e,val:t,time:Date.now(),partId:z.id,executionId:R}))?[4,n.valuePromise]:[3,2];case 1:return o=r.sent(),i.subject.next(o),[3,5];case 2:return I.debugDelay?[4,p.delay(I.debugDelay)]:[3,4];case 3:r.sent(),r.label=4;case 4:i.subject.next(t),r.label=5;case 5:return[2]}}))}))}));M.push((function(){return a.unsubscribe()})),B[e]=i}else{var u=c.staticPartInput(c.getStaticValue(n.config.value,V,P));B[e]=u}})),p.entries(y).forEach((function(t){var e=t[0],n=t[1],i=c.dynamicOutput(),a=i.subscribe((function(t){return o(void 0,void 0,void 0,(function(){var i,o;return r(this,(function(r){switch(r.label){case 0:return(i=F({insId:U,pinId:e,val:t,time:Date.now(),partId:z.id,executionId:R}))?[4,i.valuePromise]:[3,2];case 1:return o=r.sent(),n.next(o),[3,3];case 2:n.next(t),r.label=3;case 3:return[2]}}))}))}));M.push((function(){return a.unsubscribe()})),q[e]=i}));var L=function(t){var n,o=t.part,r=t.inputs,s=t.outputs,l=t.repo,m=t._debugger,y=t.insId,h=t.parentInsId,g=t.mainState,I=t.onError,b=(t.onBubbleError,t.onCompleted),P=t.env,_=t.extraContext,C=o.fn,x=f.debugLogger("core"),E=[],j=m.onProcessing||a.noop,w=m.onInputsStateChange||a.noop,O=(h||"root")+"."+y,T=""+O+e.INNER_STATE_SUFFIX,S=""+O+e.INPUTS_STATE_SUFFIX,k=x.extend(O);g[T]||(g[T]=new Map),g[S]||(g[S]=new Map),g[T];var N,D=g[S],M=function(){var t=Array.from(D.entries()).reduce((function(t,e){var n,o=e[0],a=e[1],u=c.isQueueInputPinConfig(r[o].config,r[o]);return i(i({},t),((n={})[o]=u?null==a?void 0:a.length:1,n))}),{});w({inputs:t,insId:O})},R={execute:function(t,n,i,o){return e.execute({part:t,inputs:n,outputs:i,partsRepo:l,_debugger:m,insId:o,onCompleted:b})},insId:y,state:g[T],onCleanup:function(t){E.push(t)},onError:function(t){I(t)},context:_},A=!1,V=o.reactiveInputs||[],H=function(){g[T].clear(),p.keys(g).filter((function(t){return t.startsWith(O+".")})).forEach((function(t){g[t]=new Map}))},z=function t(e){var a,l=V.includes(null==e?void 0:e.key);if(A&&!l);else{var f=A&&l;if(d.isPartStateValid(r,D,o)||f){var m=void 0;if(A){if(!e)throw new Error("Unexpected state,  got reactive part while not processing and not valid");var y=d.pullValueForExecution(e.key,r[e.key],D,P);m=i(i({},N),((a={})[e.key]=y,a)),M()}else m=d.pullValuesForExecution(r,D,P),N=m,M();var h=new Set,g={};if(o.completionOutputs){j({processing:A=!0,insId:O});var _=o.completionOutputs.map((function(t){return t.split("+")})).reduce((function(t,e){return e.forEach((function(n){t.set(n,e)})),t}),new Map);p.entries(s).forEach((function(e){var i=e[0];e[1].pipe(u.first()).subscribe((function(e){h.add(i),g[i]=e;var a=_.get(i);a&&(a.splice(a.indexOf(i),1),0===a.length&&(j({processing:A=!1,insId:O}),b&&b(g),H(),v.callFnOrFnPromise(n,"Error with cleanup function of "+o.id),n=void 0,h.clear(),g={},d.hasNewSignificantValues(r,D,P,o.id)&&t()))}))}))}else H();try{k("Running part %s with values %o",o.id,m),n=C(m,s,R)}catch(S){j({processing:A=!1,insId:O}),I(S)}var x=V.find((function(t){return r[t]&&d.peekValueForExecution(t,r[t],D,P,o.id)}));if(x)y=d.peekValueForExecution(x,r[x],D,P,o.id),t({key:x,value:y});else{var E=p.entries(r).find((function(t){var e=t[0],n=t[1],i=c.isQueueInputPinConfig(n.config,n),r=d.peekValueForExecution(e,n,D,P,o.id);if(i)return p.isDefined(r)}));if(E){var w=E[0],T=E[1];y=d.peekValueForExecution(w,T,D,P,o.id),t({key:w,value:y})}}}}};z();var G=d.subscribeInputsToState(r,D,l,y,(function(t,e){x("Got input %s - value is [%o]",t,e),M();try{z({key:t,value:e})}catch(n){I(n)}}));return E.push(G),function(){v.callFnOrFnPromise(n,"Error with cleanup function of "+o.id),E.forEach((function(t){return t()}))}}({part:z,inputs:B,outputs:q,repo:V,_debugger:I,insId:P,mainState:E,parentInsId:w,onError:H,onBubbleError:T,env:k,extraContext:C,onCompleted:D});return function(){M.forEach((function(t){return t()})),L()}}},23939:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},o=this&&this.__spreadArray||function(t,e){for(var n=0,i=e.length,o=t.length;n<i;n++,o++)t[o]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.subscribeInputsToState=e.isPartStateValid=e.hasNewSignificantValues=e.peekValuesForExecution=e.pullValuesForExecution=e.pullValueForExecution=e.peekValueForExecution=void 0;var r=n(24048),a=n(45821),u=n(6485),s=function(t,e){var n=r.extractStaticValue(t);return r.isEnvValue(n)?function(t,e){for(var n=t.split("."),o=i({},e),r=0,u=n;r<u.length;r++){var s=u[r];if(!o||!a.isDefined(o[s])||null===o[s])throw new Error("Cannot find key "+t+" inside obj "+e);o=o[s]}return o}(r.getEnvKeyFromValue(n),e):n};e.peekValueForExecution=function(t,e,n,i,a){var u=n.get(t);if(!e)throw new Error('Trying to peek value of inexsting input in key "'+t+'" in part "'+a+'"');return r.isStaticInput(e)?s(e,i):r.isQueueInputPinConfig(e.config,e)?u?o([],u).shift():void 0:u};e.pullValueForExecution=function(t,e,n,i){var o,a=n.get(t);return r.isStaticInput(e)?o=s(e,i):r.isQueueInputPinConfig(e.config,e)?(o=(a||[]).shift(),n.set(t,a)):(o=a,r.isStickyInputPinConfig(e.config)||n.delete(t)),o};e.pullValuesForExecution=function(t,n,i){return a.entries(t).reduce((function(t,o){var r=o[0],a=o[1];return t[r]=e.pullValueForExecution(r,a,n,i),t}),{})};e.peekValuesForExecution=function(t,n,i,o){return a.entries(t).reduce((function(t,r){var a=r[0],u=r[1];return t[a]=e.peekValueForExecution(a,u,n,i,o),t}),{})};e.hasNewSignificantValues=function(t,n,i,o){return a.entries(t).some((function(t){var u=t[0],s=t[1],c=r.isQueueInputPinConfig(s.config,s),l=e.peekValueForExecution(u,s,n,i,o);return a.isDefined(l)&&c}))};e.isPartStateValid=function(t,e,n){var i=a.keys(t),o=a.keys(n.inputs).filter((function(t){return"required"===n.inputs[t].mode}));return i.includes(u.TRIGGER_PIN_ID)&&o.push(u.TRIGGER_PIN_ID),!!a.containsAll(i,o)&&a.entries(t).filter((function(t){var e=t[0];return!!n.inputs[e]||e===u.TRIGGER_PIN_ID})).every((function(t){var i,o=t[0],u=t[1],s=e.get(o);return"optional"===((null===(i=n.inputs[o])||void 0===i?void 0:i.mode)||"required")||(!!r.isStaticInput(u)||(r.isQueueInputPinConfig(u.config,u)?a.isDefined(s)&&s.length>0:a.isDefined(s)))}))};e.subscribeInputsToState=function(t,e,n,i,o){var u=[];return a.entries(t).forEach((function(t){var n=t[0],i=t[1];if(i&&!r.isStaticInput(i)){var a=i.subject.subscribe((function(t){if(r.isQueueInputPinConfig(i.config,i)){var a=e.get(n)||[];if(!Array.isArray(a))throw new Error("impossible state - state of key "+n+" is set but not an array");a.push(t),e.set(n,a),o(n,t)}else e.set(n,t),o(n,t)}));u.push((function(){return a.unsubscribe()}))}})),function(){return u.forEach((function(t){return t()}))}}},19735:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.flydeFlowSchema=void 0;var i=n(89510),o=i.z.record(i.z.string(),i.z.string().or(i.z.array(i.z.string()))),r=i.z.strictObject({x:i.z.number(),y:i.z.number()}),a=i.z.discriminatedUnion("mode",[i.z.strictObject({mode:i.z.literal("static"),value:i.z.any()}),i.z.strictObject({mode:i.z.literal("queue")}),i.z.strictObject({mode:i.z.literal("sticky")})]),u=i.z.object({size:i.z.optional(i.z.enum(["small","regular","large"])),icon:i.z.optional(i.z.any()),color:i.z.optional(i.z.string()),cssOverride:i.z.optional(i.z.record(i.z.string()))}),s=i.z.object({pos:r.default({x:0,y:0}),id:i.z.string(),inputConfig:i.z.optional(i.z.record(i.z.string(),a)).default({}),visibleInputs:i.z.optional(i.z.array(i.z.string())),visibleOutputs:i.z.optional(i.z.array(i.z.string())),partId:i.z.optional(i.z.string()),part:i.z.optional(i.z.any()),style:i.z.optional(u)}).refine((function(t){return t.part||t.partId}),{message:"Instance must have either an inline part or refer to a partId"}),c=i.z.object({id:i.z.optional(i.z.string()),inputs:i.z.record(i.z.string(),i.z.union([i.z.string(),i.z.object({mode:i.z.enum(["required","optional","required-if-connected"]),type:i.z.string()})])),outputs:i.z.record(i.z.string(),i.z.union([i.z.string(),i.z.object({type:i.z.string(),optional:i.z.optional(i.z.boolean()),delayed:i.z.optional(i.z.boolean())})])),inputsPosition:i.z.optional(i.z.record(i.z.string(),r)),outputsPosition:i.z.optional(i.z.record(i.z.string(),r)),customViewCode:i.z.optional(i.z.string()),dataBuilderSource:i.z.optional(i.z.string()),templateType:i.z.optional(i.z.string()),completionOutputs:i.z.optional(i.z.array(i.z.string())),reactiveInputs:i.z.optional(i.z.array(i.z.string())),defaultStyle:i.z.optional(u)}),l=i.z.object({instances:i.z.array(s),connections:i.z.array(i.z.strictObject({from:i.z.strictObject({insId:i.z.string(),pinId:i.z.string()}),to:i.z.strictObject({insId:i.z.string(),pinId:i.z.string()}),delayed:i.z.optional(i.z.boolean()),hidden:i.z.optional(i.z.boolean())}))}).and(c);e.flydeFlowSchema=i.z.strictObject({imports:i.z.optional(o).default({}),part:l})},18265:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectType=e.isStaticValueGroupedPart=void 0,o(n(45821),e);var r=n(24048);o(n(6485),e),o(n(30385),e),o(n(69789),e),o(n(24048),e),o(n(90163),e),o(n(51922),e),o(n(98343),e),o(n(55281),e),o(n(75596),e),o(n(19735),e);e.isStaticValueGroupedPart=function(t){return t&&!!r.maybeGetStaticValuePartId(""+t)},function(t){t.WEB_UI="web-ui",t.SERVER="server",t.MOBILE="mobile",t.CLI="cli"}(e.ProjectType||(e.ProjectType={}))},90163:function(t,e,n){"use strict";var i=this&&this.__spreadArray||function(t,e){for(var n=0,i=e.length,o=t.length;n<i;n++,o++)t[o]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.getPartWithDependencies=void 0;var o=n(24048),r=n(18265),a=n(93471);e.getPartWithDependencies=function(t,n,u){if(void 0===u&&(u=[]),o.isCodePart(t))return[t];if(u.includes(t.id))return[];var s=r.removeDupes(t.instances.filter((function(t){return a.isRefPartInstance(t)})).map((function(t){return t.partId})).filter((function(t){return n[t]}))),c=s.map((function(t){return n[t]})).reduce((function(t,o){return i(i([],t),e.getPartWithDependencies(o,n,i(i([],u),s)))}),[]);return i([t],c)}},24048:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||o(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.nativeFromFunction=e.getPartDef=e.getPart=e.getStaticValue=e.maybeGetStaticValuePartId=e.staticPartRefence=e.fromSimplified=e.codePart=e.nativePart=e.groupedPart=e.isCodePart=e.isGroupedPart=e.isNativePart=e.CodePartTemplateTypeInline=void 0;var a=n(45821),u=n(18265),s=n(93471);r(n(93471),e),r(n(85089),e),r(n(34702),e),function(t){t.VALUE="value",t.FUNCTION="function"}(e.CodePartTemplateTypeInline||(e.CodePartTemplateTypeInline={}));e.isNativePart=function(t){return!e.isGroupedPart(t)};e.isGroupedPart=function(t){return!!t.instances};e.isCodePart=function(t){return a.isDefined(t)&&a.isDefined(t.fnCode)},e.groupedPart=a.testDataCreator({id:"grouped-part",inputs:{},outputs:{},instances:[],connections:[],outputsPosition:{},inputsPosition:{}}),e.nativePart=a.testDataCreator({id:"part",inputs:{},outputs:{},fn:a.noop}),e.codePart=a.testDataCreator({id:"part",inputs:{},outputs:{},fnCode:""});e.fromSimplified=function(t){var e=t.fn,n=t.inputTypes,o=t.outputTypes,r=t.id,u=a.entries(n).reduce((function(t,e){var n,o=e[0],r=e[1];return i(i({},t),((n={})[o]={type:r},n))}),{}),s=a.entries(o).reduce((function(t,e){var n,o=e[0],r=e[1];return i(i({},t),((n={})[o]={type:r},n))}),{});return{id:r,inputs:u,outputs:s,fn:e}};e.staticPartRefence=function(t){return"__part:"+t.id};e.maybeGetStaticValuePartId=function(t){var e="string"==typeof t&&t.match(/^__part\:(.*)/);return e?e[1]:null};e.getStaticValue=function(t,n,i){var o=e.maybeGetStaticValuePartId(t);if(o){var r=n[o];if(!r)throw new Error("Instance "+i+" referrer to a part reference "+o+" that does not exist");return r}return t};e.getPart=function(t,e){if("string"!=typeof t&&s.isInlinePartInstance(t))return t.part;var n="string"==typeof t?t:t.partId,i=e[n];if(!i)throw new Error("Part with id "+n+" not found");return i};e.getPartDef=function(t,e){if("string"!=typeof t&&s.isInlinePartInstance(t))return t.part;var n="string"==typeof t?t:t.partId,i=e[n];if(!i)throw console.error("Part with id "+n+" not found"),new Error("Part with id "+n+" not found");return i};e.nativeFromFunction=function(t){var e,n=t.id,o=t.fn,r=t.inputNames,a=t.outputName,s=t.defaultStyle;return{id:n,inputs:r.reduce((function(t,e){var n;return i(i({},t),((n={})[e]=u.partInput("any"),n))}),{}),outputs:(e={},e[a]=u.partOutput(),e),fn:function(t,e){var n=r.map((function(e){return t[e]})),i=e[a],u=o.apply(void 0,n);Promise.resolve(u).then((function(t){return i.next(t)}))},completionOutputs:[a],defaultStyle:s}}},93471:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PartInstance=e.isRefPartInstance=e.isInlinePartInstance=e.inlinePartInstance=e.partInstance=void 0;e.partInstance=function(t,e,n,i){return{id:t,partId:e,inputConfig:n||{},pos:i||{x:0,y:0}}};e.inlinePartInstance=function(t,e,n,i){return{id:t,part:e,inputConfig:n||{},pos:i||{x:0,y:0}}};e.isInlinePartInstance=function(t){return!!t.part};e.isRefPartInstance=function(t){return!e.isInlinePartInstance(t)};e.PartInstance=function(t,e,n,i){return{id:t,partId:e.id,inputConfig:n||{},pos:i||{x:0,y:0}}}},85089:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getEnvKeyFromValue=e.toEnvValue=e.isEnvValue=e.extractStaticValue=e.isStaticInput=e.isDynamicInput=e.staticPartInput=e.dynamicPartInputs=e.dynamicPartInput=e.dynamicOutput=e.partOutputs=e.partOutput=e.partInputs=e.isInputPinOptional=e.partInput=void 0;var i=n(71542),o=n(24048),r=n(45821),a=n(34702);e.partInput=function(t,e){return void 0===t&&(t="any"),void 0===e&&(e="required"),{type:t,mode:e}};e.isInputPinOptional=function(t){return"optional"===t.mode};e.partInputs=function(t,n){return r.repeat(t,(function(t){return e.partInput("any",n[t]||"required")}))};e.partOutput=function(t,e,n){return void 0===t&&(t="any"),void 0===e&&(e=!1),void 0===n&&(n=!1),{type:t,delayed:e,optional:n}};e.partOutputs=function(t){return r.repeat(t,(function(){return e.partOutput("any")}))};e.dynamicOutput=function(){return new i.Subject},e.dynamicPartInput=r.testDataCreator((function(){return{subject:new i.Subject,config:a.queueInputPinConfig()}}));e.dynamicPartInputs=function(t){return void 0===t&&(t=10),r.repeat(t,(function(){return r.testDataCreator((function(){return{subject:new i.Subject,config:a.queueInputPinConfig()}}))()}))};e.staticPartInput=function(t){return{config:a.staticInputPinConfig(t)}};e.isDynamicInput=function(t){var e=t;return e&&e.subject&&!!e.subject.next};e.isStaticInput=function(t){return o.isStaticInputPinConfig(t.config)};e.extractStaticValue=function(t){if(e.isStaticInput(t))return t.config.value;throw new Error("Cannot extract static value from non static arg")};e.isEnvValue=function(t){return"string"==typeof t&&t.startsWith("$ENV.")};e.toEnvValue=function(t){return"$ENV."+t};e.getEnvKeyFromValue=function(t){return"string"==typeof t?t.replace(/^\$ENV\./,""):t}},34702:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isStaticInputPinConfig=e.isStickyInputPinConfig=e.isQueueInputPinConfig=e.staticInputPinConfig=e.stickyInputPinConfig=e.queueInputPinConfig=e.INPUT_MODES=void 0,e.INPUT_MODES=["queue","sticky","static"];e.queueInputPinConfig=function(){return{mode:"queue"}};e.stickyInputPinConfig=function(){return{mode:"sticky"}};e.staticInputPinConfig=function(t){return{mode:"static",value:t}};e.isQueueInputPinConfig=function(t,e){return"queue"===t.mode};e.isStickyInputPinConfig=function(t){return t&&"sticky"===t.mode};e.isStaticInputPinConfig=function(t){return t&&"static"===t.mode}},75596:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},69789:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.simplifiedExecute=void 0;var o=n(18265),r=n(30385);e.simplifiedExecute=function(t,e,n,a,u){void 0===u&&(u={});var s=o.keys(t.outputs),c=Object.keys(n).reduce((function(t,e){var r;return i(i({},t),((r={})[e]=o.staticPartInput(n[e]),r))}),{}),l=s.reduce((function(t,e){var n,r=o.dynamicOutput();return a&&r.subscribe((function(t){a(e,t)})),i(i({},t),((n={})[e]=r,n))}),{});return r.execute(i({part:t,inputs:c,outputs:l,partsRepo:e,onBubbleError:function(t){throw t}},u))}},51922:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},55281:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isScheduledTrigger=e.isRestApiTrigger=e.isWebAppTrigger=void 0;e.isWebAppTrigger=function(t){return"web-app"===t.type};e.isRestApiTrigger=function(t){return"rest-api"===t.type};e.isScheduledTrigger=function(t){return"scheduled"===t.type}},23489:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.PartPreview=void 0;var o=n(24246),r=n(18265),a=n(53574);e.PartPreview=function(t){var e=t.part,n={part:e,instance:r.partInstance("bob",e.id,{}),connections:[],connectionsPerInput:{},connectionsPerOutput:{},viewPort:{pos:{x:0,y:0},zoom:1},partDefRepo:{},onUngroup:r.noop,onDblClick:r.noop,onDragEnd:r.noop,onDragMove:r.noop,onDragStart:r.noop,onPinClick:r.noop,onPinDblClick:r.noop,onSelect:r.noop,onTogglePinBreakpoint:r.noop,onTogglePinLog:r.noop,onToggleSticky:r.noop,displayMode:!0,onInspectPin:r.noop,onDetachConstValue:r.noop,onCopyConstValue:r.noop,onPasteConstValue:r.noop,onRequestHistory:r.noop,parentInsId:"",onChangeVisibleInputs:r.noop,onChangeVisibleOutputs:r.noop,onConvertConstToEnv:r.noop,forceShowMinimized:"both",onExtractInlinePart:r.noop,onCloseInlineEditor:r.noop,isConnectedInstanceSelected:!1,inlineEditorPortalDomNode:null,onChangeStyle:r.noop,onDeleteInstance:r.noop,onGroupSelected:r.noop,onSetDisplayName:r.noop};return o.jsx("div",i({className:"part-preview"},{children:o.jsx(a.InstanceView,i({},n),void 0)}),void 0)}},90412:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&o(e,t,n);return r(e,t),e},u=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||o(e,t,n)},s=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{s(i.next(t))}catch(e){r(e)}}function u(t){try{s(i.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},c=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function u(r){return function(u){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(u){r=[6,u],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,u])}}},l=this&&this.__spreadArray||function(t,e){for(var n=0,i=e.length,o=t.length;n<i;n++,o++)t[o]=e[n];return t},d=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.FlowEditor=void 0;var p=n(24246),f=a(n(27378)),v=n(18265),m=n(12465),y=d(n(63300)),h=n(14648),g=n(52395),I=n(40232),b=n(51424),P=n(24935),_=n(91312),C=n(30537),x=n(31425),E=n(44370),j=n(96149);u(n(91312),e),C.library.add(x.fab,E.fas);var w=["select","drag-move","order-step"],O=function(t){var e;return i(i({},t.dependencies),((e={})[t.main.id]=t.main,e))};e.FlowEditor=f.memo(f.forwardRef((function(t,e){var n=t.state,o=t.resolvedRepoWithDeps,r=t.onChangeEditorState,a=t.onImportPart,u=f.useState([]),d=u[0],C=u[1],x=f.useState([]),E=x[0],T=x[1],S=n.flow,k=n.boardData,N=n.flow.part,D=_.usePorts().openFile,M=f.useCallback((function(t,e){console.log("onChangeFlow",e.type),"functional"===e.type&&(C(l([{flow:t}],d.slice(0,50))),T([])),r((function(e){return i(i({},e),{flow:t})}))}),[r,d]),R=f.useState({instances:[],connections:[]}),A=R[0],V=R[1],H=f.useState(!1),z=H[0],G=H[1],F=f.useCallback((function(){return G(!1)}),[]),q=f.useCallback((function(){return G(!0)}),[]),B=f.useCallback((function(t){r((function(e){return i(i({},e),{boardData:i(i({},e.boardData),t)})}))}),[r]);f.useEffect((function(){B({selected:[],viewPort:m.defaultViewPort,from:void 0,to:void 0,lastMousePos:{x:0,y:0}})}),[N.id]),h.useHotkeys("cmd+z",(function(t){T(l(l([],E),[n]));var e=d[0],o=d.slice(1);e&&(r((function(t){return i(i({},t),e)})),C(o)),t.preventDefault()}),void 0,[n,d,E]),h.useHotkeys("a",(function(t){t.preventDefault(),q()}));var U=f.useCallback((function(t,e){w.some((function(t){return e.message.includes(t)}))||T([]);var n=y.default(S,(function(e){e.part=t}));M(n,e)}),[S,M]),L=f.useCallback((function(t){D({absPath:t.importPath})}),[D]),W=f.useCallback((function(t,e){void 0===e&&(e=-1*m.PART_HEIGHT*1.5);var n=g.createNewPartInstance(t,e,k.lastMousePos,O(o));if(n){var i=y.default(S,(function(t){var e=t.part;if(!v.isGroupedPart(e))throw new Error("Impossible state, adding part to non grouped part");e.instances.push(n)}));return M(i,b.functionalChange("add-part")),F(),n}}),[k.lastMousePos,S,M,F,o]),$=f.useCallback((function(t){return s(void 0,void 0,void 0,(function(){var e,n,i;return c(this,(function(r){switch(r.label){case 0:switch(t.type){case P.OmniBarCmdType.ADD:return[3,1];case P.OmniBarCmdType.ADD_VALUE:return[3,2];case P.OmniBarCmdType.CREATE_CODE_PART:return[3,3];case P.OmniBarCmdType.CREATE_GROUPED_PART:return[3,4];case P.OmniBarCmdType.IMPORT:return[3,5]}return[3,7];case 1:return[2,W(t.data)];case 2:return g.domToViewPort(k.lastMousePos,k.viewPort,m.defaultViewPort),I.toastMsg("TODO"),[3,8];case 3:case 4:return I.toastMsg("TODO"),[3,8];case 5:return[4,a(t.data,{pos:k.lastMousePos})];case 6:return r.sent(),e=j.vAdd({x:0,y:0},k.lastMousePos),n=g.createNewPartInstance(t.data.part,0,e,O(o)),i=y.default(S,(function(t){t.part.instances.push(n)})),M(i,b.functionalChange("add-imported-part")),[3,8];case 7:I.AppToaster.show({intent:"warning",message:"Not supported yet"}),r.label=8;case 8:return F(),[2]}}))}))}),[F,W,k.lastMousePos,k.viewPort,a,o,S,M]);return p.jsx("div",i({className:"project-editor"},{children:function(){if(v.isCodePart(N))throw new Error("Impossible state");return p.jsxs(f.Fragment,{children:[p.jsx(m.GroupedPartEditor,{insId:"root."+N.id,ref:e,boardData:k,onChangeBoardData:B,part:N,onGoToPartDef:L,onChangePart:U,resolvedFlow:o,clipboardData:A,onCopy:V,partIoEditable:!N.id.startsWith("Trigger"),onInspectPin:t.onInspectPin,onRequestHistory:t.onRequestHistory,onRequestImportables:t.onQueryImportables,onImportPart:t.onImportPart,onShowOmnibar:q,onExtractInlinePart:t.onExtractInlinePart},N.id),z?p.jsx(P.Omnibar,{flow:S,repo:o.dependencies,onCommand:$,visible:z,onClose:F,onRequestImportables:t.onQueryImportables},void 0):null]},void 0)}()}),void 0)})))},57779:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},o=this&&this.__spreadArray||function(t,e){for(var n=0,i=e.length,o=t.length;n<i;n++,o++)t[o]=e[n];return t},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.BasePartEditor=void 0;var a=n(24246),u=r(n(27378)),s=n(18265),c=n(42272),l=r(n(77324)),d=n(79927),p=r(n(63300)),f=n(18185),v=n(23489),m=f.MultiSelect.ofType();e.BasePartEditor=function(t){var e,n,r=t.part,f=t.onChange,y=s.entries(r.inputs),h=y.filter((function(t){return"required"===t[1].mode})).map((function(t){return t[0]})),g=y.filter((function(t){return"optional"===t[1].mode})).map((function(t){return t[0]})),I=y.filter((function(t){return"required-if-connected"===t[1].mode})).map((function(t){return t[0]})),b=u.default.useState(!1),P=b[0],_=b[1],C=s.okeys(r.outputs),x=u.default.useCallback((function(t){f(i(i({},r),{id:t}))}),[r,f]),E=u.default.useCallback((function(t){var e=t?t.split(","):void 0;"[]"===t&&(e=[]),console.log(t,e),f(i(i({},r),{completionOutputs:e}))}),[r,f]),j=u.default.useCallback((function(t){var e=t?t.split(","):void 0;f(i(i({},r),{reactiveInputs:e}))}),[r,f]),w=u.default.useCallback((function(t,e){var n=p.default(r,(function(n){n.inputs[t]=s.partInput("any",e)}));f(n)}),[r,f]),O=u.default.useCallback((function(t){var e=p.default(r,(function(e){delete e.inputs[t]}));f(e)}),[r,f]),T=u.default.useCallback((function(t){var e=p.default(r,(function(e){e.outputs[t]=s.partOutput("any")}));f(e)}),[r,f]),S=u.default.useCallback((function(t){var e=p.default(r,(function(e){delete e.outputs[t]}));f(e)}),[r,f]),k=u.default.useCallback((function(t){try{var e=JSON.parse(t),n=p.default(r,(function(t){Object.entries(e).forEach((function(e){var n=e[0],o=e[1],r=t.inputs[n],a=t.outputs[n];r?t.inputs[n]=i(i({},r),{type:o}):a&&(t.outputs[n]=i(i({},a),{type:o}))}))}));f(n)}catch(o){console.error("cannot parse")}}),[f,r]),N=o(o([],s.entries(r.inputs)),s.entries(r.outputs)).map((function(t){return[t[0],t[1].type]})).reduce((function(t,e){var n,o=e[0],r=e[1];return i(i({},t),((n={})[o]=r,n))}),{});return a.jsxs("div",i({className:"base-part-editor"},{children:[a.jsx("div",i({className:"form-row"},{children:a.jsx(c.FormGroup,i({label:"Part Name",labelFor:"text-input",labelInfo:"(required)"},{children:a.jsx(c.InputGroup,{id:"part-name",disabled:t.idDisabled,placeholder:"Part ID",value:r.id,onChange:function(t){return x(t.target.value)}},void 0)}),void 0)}),void 0),a.jsx(c.FormGroup,i({label:"Required Inputs"},{children:a.jsx(m,{selectedItems:h,placeholder:"Enter input names here",items:[],tagRenderer:function(t){return t},onItemSelect:function(t){return w(t,"required")},onRemove:O,resetOnSelect:!0,itemRenderer:function(t){return a.jsx("span",{children:t},void 0)},createNewItemFromQuery:function(t){return t},createNewItemRenderer:d.renderCreateIOOption,fill:!0},void 0)}),void 0),!0!==t.hiddenOutputs?a.jsx(c.FormGroup,i({label:"Outputs"},{children:a.jsx(m,{selectedItems:C,placeholder:"Enter output names here",items:[],tagRenderer:function(t){return t},onItemSelect:T,onRemove:S,resetOnSelect:!0,itemRenderer:function(t){return a.jsx("span",{children:t},void 0)},createNewItemFromQuery:function(t){return t},createNewItemRenderer:d.renderCreateIOOption,fill:!0},void 0)}),void 0):null,a.jsx(c.Checkbox,i({checked:P,onChange:function(t){return _(t.target.checked)}},{children:"Show advanced options"}),void 0),a.jsxs(c.Collapse,i({isOpen:P},{children:[a.jsx(c.FormGroup,i({label:"Optional Inputs"},{children:a.jsx(m,{selectedItems:g,placeholder:"Enter input names here",items:[],tagRenderer:function(t){return t},onItemSelect:function(t){return w(t,"optional")},onRemove:O,resetOnSelect:!0,itemRenderer:function(t){return a.jsx("span",{children:t},void 0)},createNewItemFromQuery:function(t){return t},createNewItemRenderer:d.renderCreateIOOption,fill:!0},void 0)}),void 0),a.jsx(c.FormGroup,i({label:"Required-if-connected Inputs"},{children:a.jsx(m,{selectedItems:I,placeholder:"Enter input names here",items:[],tagRenderer:function(t){return t},onItemSelect:function(t){return w(t,"required-if-connected")},onRemove:O,resetOnSelect:!0,itemRenderer:function(t){return a.jsx("span",{children:t},void 0)},createNewItemFromQuery:function(t){return t},createNewItemRenderer:d.renderCreateIOOption,fill:!0},void 0)}),void 0),a.jsx(c.FormGroup,i({label:"Types"},{children:a.jsx(l.default,{height:"100px",theme:"vs-dark",defaultLanguage:"json",value:JSON.stringify(N,null,4),onChange:function(t){return k(t||"")}},void 0)}),void 0),a.jsx(c.FormGroup,i({label:"Completion Outputs"},{children:a.jsx(c.InputGroup,{id:"completion-outputs",placeholder:"completion outputs",value:(null===(e=r.completionOutputs)||void 0===e?void 0:e.join(","))||"",onChange:function(t){return E(t.target.value)}},void 0)}),void 0),a.jsx(c.FormGroup,i({label:"Reactive Inputs"},{children:a.jsx(c.InputGroup,{id:"reactive-inputs",placeholder:"Reactive inputs",value:(null===(n=r.reactiveInputs)||void 0===n?void 0:n.join(","))||"",onChange:function(t){return j(t.target.value)}},void 0)}),void 0)]}),void 0),a.jsx(c.FormGroup,i({label:"Preview"},{children:a.jsx("div",i({className:"preview-wrapper"},{children:a.jsx(v.PartPreview,{part:r},void 0)}),void 0)}),void 0)]}),void 0)}},79927:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.CodePartEditor=e.renderCreateIOOption=void 0;var r=n(24246),a=n(42272),u=o(n(27378)),s=o(n(77324)),c=n(57779);e.renderCreateIOOption=function(t,e,n){return r.jsx(a.MenuItem,{icon:"add",text:'Create "'+t+'"',active:e,onClick:n,shouldDismissPopover:!1},void 0)};e.CodePartEditor=function(t){var e=t.part,n=t.onChange,o=u.default.useCallback((function(t){n(i(i({},e),{fnCode:t}))}),[e,n]),l=u.default.useCallback((function(t){n(i(i({},e),{customViewCode:t}))}),[e,n]),d=u.default.useCallback((function(t){n(i(i(i({},e),t),{completionOutputs:t.completionOutputs}))}),[e,n]);return r.jsxs("div",i({className:"code-part-editor"},{children:[r.jsx(c.BasePartEditor,{part:e,onChange:d,idDisabled:t.editMode},void 0),r.jsx(a.FormGroup,i({label:"Code"},{children:r.jsx(s.default,{height:"200px",theme:"vs-dark",defaultLanguage:"javascript",value:e.fnCode,onChange:function(t){return o(t||"")}},void 0)}),void 0),r.jsxs(a.FormGroup,i({label:"Custom View"},{children:[r.jsx(s.default,{height:"100px",theme:"vs-dark",defaultLanguage:"ejs",value:e.customViewCode,onChange:function(t){return l(t||"")}},void 0),r.jsxs(a.Callout,{children:["Example:",r.jsx(a.Code,{children:'<% if (inputs.key) { %>\n              Pick "<%- inputs.key %>"\n              <% }  else { %>\n                Pick\n              <% } %>\n              '},void 0)]},void 0)]}),void 0)]}),void 0)}},51424:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.metaChange=e.functionalChange=void 0;e.functionalChange=function(t){return{type:"functional",message:t}};e.metaChange=function(t){return void 0===t&&(t="n/a"),{type:"meta",message:t}}},63213:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&o(e,t,n);return r(e,t),e},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.InlineCodeModal=void 0;var s=n(24246),c=a(n(27378)),l=u(n(77324)),d=n(42272),p=u(n(60042)),f=n(52178),v=n(18265),m=n(28983),y="`Result is ${inputs.a + inputs.b}`";e.InlineCodeModal=c.memo((function(t){var e,n=t.initialValue,o=t.initialType,r=c.useState(v.isDefined(n)?n:y),a=r[0],u=r[1],h=c.useState(o||v.CodePartTemplateTypeInline.VALUE),g=h[0],I=h[1],b=s.jsxs("div",{children:[s.jsxs("p",{children:['You can add variables to by referrencing the "inputs" object.',s.jsx("br",{},void 0)," For example:",s.jsx(d.Code,{children:"`Hello {inputs.name}`"},void 0),' will expose an input pin named "name"']},void 0),s.jsxs("p",{children:["You can also use ternery expressions, arithmetic operators and more!",s.jsx("br",{},void 0),"For example:",s.jsx(d.Code,{children:"inputs.a > inputs.b ? inputs.a + 42 : Math.random() * inputs.b"},void 0)]},void 0)]},void 0),P=s.jsxs("span",{children:["Type in any valid JS value, such as ",s.jsx(d.Code,{children:"true"},void 0),", ",s.jsx(d.Code,{children:"42"},void 0),","," ",s.jsx(d.Code,{children:'["bob", "alice", "dave"]'},void 0),".",s.jsx("br",{},void 0)," Dynamic inputs may also be used"]},void 0),_=s.jsxs("span",{children:["Write any JS code and return a value.",s.jsx("br",{},void 0)," The returned value will be the output.",s.jsx("br",{},void 0)," Example:",s.jsx(d.Code,{children:"const a = inputs.a; const b = inputs.b; return Math.floor(a/b);"},void 0)]},void 0),C=f.getVariables(a);return c.useEffect((function(){a===y&&g===v.CodePartTemplateTypeInline.FUNCTION&&u("return "+y),a==="return "+y&&g===v.CodePartTemplateTypeInline.VALUE&&u(y)}),[a,g]),s.jsxs(d.Dialog,i({isOpen:!0,title:"Inline Value / Code",onClose:t.onCancel,canEscapeKeyClose:!1,className:"inline-code-modal"},{children:[s.jsxs("main",i({className:p.default(d.Classes.DIALOG_BODY),onKeyDown:function(e){"Enter"===e.key&&e.metaKey&&t.onSubmit(g,a)},tabIndex:0},{children:[s.jsxs(d.RadioGroup,i({inline:!0,onChange:function(t){return I(t.target.value)},selectedValue:g},{children:[s.jsx(d.Radio,{labelElement:s.jsxs(c.Fragment,{children:["Value"," ",s.jsx(m.Tooltip2,i({content:P,placement:"top"},{children:s.jsx(d.Icon,{icon:"info-sign",intent:"primary"},void 0)}),void 0)]},void 0),value:v.CodePartTemplateTypeInline.VALUE},void 0),s.jsx(d.Radio,{labelElement:s.jsxs(c.Fragment,{children:["Function"," ",s.jsx(m.Tooltip2,i({content:_,placement:"top"},{children:s.jsx(d.Icon,{icon:"info-sign",intent:"primary"},void 0)}),void 0)]},void 0),value:v.CodePartTemplateTypeInline.FUNCTION},void 0)]}),void 0),s.jsx(l.default,{height:"80px",theme:"vs-dark",defaultLanguage:"javascript",value:a,onChange:function(t){return u(t||"")},onMount:function(t){t&&t.updateOptions({lineNumbers:"off",minimap:{enabled:!1}})}},void 0),(e=a.includes("return"),e&&g===v.CodePartTemplateTypeInline.VALUE?s.jsx(d.Callout,i({intent:d.Intent.WARNING},{children:'When using the "value" type you are not expected to return anything'}),void 0):e||g!==v.CodePartTemplateTypeInline.FUNCTION?null:s.jsxs(d.Callout,i({intent:d.Intent.DANGER},{children:['When using the "function" type you are expected to ',s.jsx(d.Code,{children:"return"},void 0)," a value.",s.jsx("br",{},void 0),"Example: ",s.jsx(d.Code,{children:"return 42 + Date.now();"},void 0)]}),void 0)),s.jsxs(d.Callout,i({intent:d.Intent.NONE},{children:["Input pins detected: ",C.length?C.map((function(t){return s.jsx(d.Code,{children:t},t)})):"None",s.jsx(m.Tooltip2,i({content:b},{children:s.jsx(d.Icon,{icon:"info-sign",intent:d.Intent.PRIMARY},void 0)}),void 0)]}),void 0)]}),void 0),s.jsx("div",i({className:d.Classes.DIALOG_FOOTER},{children:s.jsxs("div",i({className:d.Classes.DIALOG_FOOTER_ACTIONS},{children:[s.jsx(d.Button,i({onClick:t.onCancel},{children:"Cancel"}),void 0),s.jsx(d.Button,i({onClick:function(){return t.onSubmit(g,a)},intent:d.Intent.PRIMARY,className:"save-btn"},{children:"Save"}),void 0)]}),void 0)}),void 0)]}),void 0)}))},52178:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.createInlineCodePart=e.getVariables=void 0;var o=n(18265),r=n(18265);e.getVariables=function(t){return(t.match(/inputs\.([a-zA-Z]\w*)/g)||[]).map((function(t){return t.replace(/inputs\./,"")}))};e.createInlineCodePart=function(t){var n=t.code,a=t.customView,u=t.partId,s=t.type,c=e.getVariables(n).reduce((function(t,e){var n;return i(i({},t),((n={})[e]=o.partInput("any","required"),n))}),{}),l={value:o.partOutput("any")},d=s===o.CodePartTemplateTypeInline.FUNCTION?"const result = (function() { "+n+"}());\n  Promise.resolve(result).then(val => outputs.value.next(val))":"const result = ("+n+"); Promise.resolve(result).then(val => outputs.value.next(val))",p=btoa(n);return r.codePart({id:u||"Inline Code "+o.randomInt(99999),inputs:c,outputs:l,fnCode:d,customViewCode:a||n,dataBuilderSource:p,templateType:s,completionOutputs:["value"],defaultStyle:{size:"regular",icon:"code",cssOverride:{fontFamily:"monospace",fontWeight:"500"}}})}},24935:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},a=this&&this.__spreadArray||function(t,e){for(var n=0,i=e.length,o=t.length;n<i;n++,o++)t[o]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.Omnibar=e.OmniBarCmdType=void 0;var u,s=n(24246),c=r(n(27378)),l=n(18185),d=n(18265),p=n(18265),f=n(42272);!function(t){t.ADD="add",t.ADD_VALUE="add-value",t.CREATE_CODE_PART="create-core-part",t.CREATE_GROUPED_PART="create-grouped-part",t.IMPORT="import"}(u=e.OmniBarCmdType||(e.OmniBarCmdType={}));var v=[{cmd:{type:u.CREATE_GROUPED_PART},title:"Create new grouped part",suggestOnEmpty:!0},{cmd:{type:u.CREATE_CODE_PART},title:"Create new code part",suggestOnEmpty:!0}];e.Omnibar=function(t){var e=t.repo,n=c.useState(""),i=n[0],o=n[1],r=c.useState(null),m=r[0],y=r[1],h=c.useState([]),g=h[0],I=h[1];c.useEffect((function(){var t=d.keys(e).map((function(t){var n=e[t];return{title:"Add - "+n.id,cmd:{type:u.ADD,data:t},extra:p.okeys(n.inputs)+" | "+p.okeys(n.outputs)}})),n=g.map((function(t){return{title:"Add - "+t.part.id,cmd:{type:u.IMPORT,data:t},extra:"(import from "+t.module+")"}})),i={title:"Add inline value or code",suggestOnEmpty:!0,cmd:{type:u.ADD_VALUE}},o=a(a(a(a([],v),n),[i]),t);y(o)}),[e,g]),c.useEffect((function(){t.onRequestImportables&&t.onRequestImportables(i).then((function(t){I(t)}))}),[t,i]);var b=c.useCallback((function(t,e){var n=e.handleClick,i=e.modifiers,o=(e.query,e.index);if(!i.matchesPredicate)return null;var r=""+t.title;return s.jsx(f.MenuItem,{active:i.active,disabled:i.disabled,label:t.extra,onClick:n,text:r},o)}),[]),P=c.useCallback((function(t,e){if(!t)return!!e.suggestOnEmpty;var n=t.toLowerCase().split("").map((function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")+".*"})).join(""),i=new RegExp(n);return!!e.title.toLowerCase().match(i)}),[]),_=c.useCallback((function(e){t.onCommand(e.cmd),t.onClose()}),[t]);return m?s.jsx(l.Omnibar,{query:i,onQueryChange:o,onClose:t.onClose,noResults:s.jsx(f.MenuItem,{disabled:!0,text:"No results."},void 0),itemPredicate:P,isOpen:t.visible,items:m,initialContent:void 0,onItemSelect:_,itemRenderer:b,inputProps:{placeholder:"Search for parts or commands.."}},void 0):null}},91312:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),o(n(2297),e)},2297:function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{s(i.next(t))}catch(e){r(e)}}function u(t){try{s(i.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function u(r){return function(u){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(u){r=[6,u],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.usePorts=e.useConfirm=e.usePrompt=e.PortsContext=e.defaultPorts=void 0;var r=n(40232),a=n(27378),u=function(){return i(void 0,void 0,void 0,(function(){return o(this,(function(t){throw new Error("Not implemented")}))}))};e.defaultPorts={prompt:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){var e=t.text,n=t.defaultValue;return i(void 0,void 0,void 0,(function(){return o(this,(function(t){return[2,prompt(""+e,n)]}))}))})),openFile:function(t){return i(void 0,void 0,void 0,(function(){return o(this,(function(e){return r.toastMsg("Open "+t),[2]}))}))},confirm:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){var e=t.text;return i(void 0,void 0,void 0,(function(){return o(this,(function(t){return[2,confirm(e)]}))}))})),readFlow:u,saveFlow:u,resolveDeps:u,getImportables:u,onFlowChange:u},e.PortsContext=a.createContext(e.defaultPorts);e.usePrompt=function(){var t=a.useContext(e.PortsContext).prompt;return function(e,n){return t({text:e,defaultValue:n})}};e.useConfirm=function(){var t=a.useContext(e.PortsContext).confirm;return function(e){return t({text:e})}};e.usePorts=function(){return a.useContext(e.PortsContext)}},27234:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},o=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{s(i.next(t))}catch(e){r(e)}}function u(t){try{s(i.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function u(r){return function(u){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(u){r=[6,u],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,u])}}},a=this&&this.__spreadArray||function(t,e){for(var n=0,i=e.length,o=t.length;n<i;n++,o++)t[o]=e[n];return t},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.groupSelected=void 0;var s=n(18265),c=u(n(63300)),l=n(78504),d=n(52395);e.groupSelected=function(t,e,n,u,p){return o(void 0,void 0,void 0,(function(){var o,f,v,m,y,h,g,I,b,P,_,C;return r(this,(function(r){switch(r.label){case 0:if(o=e.instances,f=e.connections,v=o.filter((function(e){return t.includes(e.id)})),m=f.filter((function(e){var n=e.from,i=e.to;return-1!==t.indexOf(n.insId)||-1!==t.indexOf(i.insId)})),!v.length)throw new Error("grouped without selections");return[4,l.createGroup(v,m,n,p)];case 1:return y=r.sent(),h=y.groupedPart,g=y.renamedInputs,I=y.renamedOutputs,b=v.reduce((function(t,e){return d.middlePos(e.pos,t)}),o[0].pos),P="ref"===u?s.partInstance(h.id+"-ins",h.id,{},b):s.inlinePartInstance(h.id+"-ins",h,{},b),_=o.filter((function(e){return-1===t.indexOf(e.id)})),C=f.map((function(t){var e=t.from.insId+"."+t.from.pinId,n=t.to.insId+"."+t.to.pinId;return g[n]?i(i({},t),{to:{insId:P.id,pinId:g[n]}}):I[e]?i(i({},t),{from:{insId:P.id,pinId:I[e]}}):t})).filter((function(e){return-1===t.indexOf(e.from.insId)&&-1===t.indexOf(e.to.insId)})),[2,{newPart:h,currentPart:c.default(e,(function(t){t.instances=a(a([],_),[P]),t.connections=C}))}]}}))}))}},12465:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&o(e,t,n);return r(e,t),e},u=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{s(i.next(t))}catch(e){r(e)}}function u(t){try{s(i.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function u(r){return function(u){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(u){r=[6,u],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,u])}}},c=this&&this.__spreadArray||function(t,e){for(var n=0,i=e.length,o=t.length;n<i;n++,o++)t[o]=e[n];return t},l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.GroupedPartEditor=e.defaultBoardData=e.defaultViewPort=e.PART_HEIGHT=void 0;var d=n(24246),p=a(n(27378)),f=l(n(98739)),v=n(18265),m=n(53574),y=n(64153),h=n(12901),g=n(87944),I=n(52395),b=n(63300),P=n(27378),_=n(14648),C=l(n(54037)),x=n(42272),E=n(20712),j=n(99743),w=n(35683),O=n(18265),T=n(56111),S=n(65883),k=n(14264),N=n(40232),D=n(51424),M=n(63213),R=n(52178),A=l(n(98784)),V=n(27234),H=n(91312),z=l(n(60042)),G=n(87816),F=n(96149),q=n(20685),B=n(83779),U=n(2939),L=n(83438),W=p.memo(x.Slider),$=function(t){return d.jsx("div",{},void 0)};e.PART_HEIGHT=28;e.defaultViewPort={pos:{x:0,y:0},zoom:1},e.defaultBoardData={selected:[],viewPort:e.defaultViewPort,lastMousePos:{x:0,y:0}},e.GroupedPartEditor=p.memo(p.forwardRef((function(t,n){var o,r=t.onChangePart,a=t.partIoEditable,l=t.onCopy,J=t.onGoToPartDef,X=t.onRequestHistory,K=t.onInspectPin,Z=t.boardData,Q=t.onChangeBoardData,tt=t.insId,et=t.part,nt=t.onShowOmnibar,it=t.resolvedFlow,ot=t.onImportPart,rt=t.parentViewport||e.defaultViewPort,at=P.useState(i(i({},it.dependencies),((o={})[it.main.id]=it.main,o))),ut=at[0],st=at[1];P.useEffect((function(){var t;st(i(i({},it.dependencies),((t={})[it.main.id]=it.main,t)))}),[it]);var ct=Z.selected,lt=Z.from,dt=Z.to,pt=et.instances,ft=et.connections,vt=et.inputsPosition,mt=et.outputsPosition,yt=et.inputs,ht=et.outputs,gt=P.useState(),It=gt[0],bt=gt[1],Pt=P.useState(),_t=Pt[0],Ct=Pt[1],xt=P.useState(0),Et=xt[0],jt=xt[1],wt=P.useState(),Ot=wt[0],Tt=wt[1],St=P.useState(!1),kt=St[0],Nt=St[1],Dt=P.useState(),Mt=Dt[0],Rt=Dt[1],At=P.useState(),Vt=At[0],Ht=At[1],zt=P.useState(),Gt=zt[0],Ft=zt[1],qt=P.useState(),Bt=qt[0],Ut=qt[1],Lt=P.useRef();g.useDidMount((function(){Lt.current=oe.current.querySelector(".inline-editor-portal-root")}));var Wt=H.useConfirm(),$t=H.usePrompt(),Yt=Z.viewPort,Jt=P.useRef(!0),Xt=p.useCallback((function(t){Q({viewPort:t})}),[Q]),Kt=p.useCallback((function(t,e,n){return X(tt+"."+t,e,n)}),[X,tt]),Zt=p.useCallback((function(t,e,n){return K(tt+"."+t,e,n)}),[K,tt]),Qt=p.useCallback((function(t,e){var n=q.handleConnectionCloseEditorCommand(et,{from:t,to:e}),i=v.isInternalConnectionNode(e)?pt.find((function(t){return t.id===e.insId})):null,o=(i?i.inputConfig:{})[e.pinId],a=v.isStaticInputPinConfig(o)?B.handleDetachConstEditorCommand(n,e.insId,e.pinId):n;r(a,D.functionalChange("close-connection")),Q({from:void 0,to:void 0})}),[pt,r,Q,et]),te=p.useCallback((function(){return u(void 0,void 0,void 0,(function(){var t,e;return s(this,(function(n){switch(n.label){case 0:return[4,$t("New grouped part name?")];case 1:return t=n.sent(),[4,V.groupSelected(Z.selected,et,t,"inline",$t)];case 2:return e=n.sent().currentPart,r(e,D.functionalChange("group part")),N.toastMsg("Part grouped!"),[2]}}))}))}),[$t,Z.selected,r,et]);P.useEffect((function(){if(Ot){var t=setTimeout((function(){Tt(void 0)}),350);return function(){return clearTimeout(t)}}}),[Ot]);var ee=P.useState(),ne=ee[0],ie=ee[1];P.useEffect((function(){k.preloadMonaco()}),[]);var oe=P.useRef(),re=C.default(oe),ae=p.useRef({x:400,y:400}),ue=g.useBoundingclientrect(oe)||j.vZero,se=function(){var t=I.fitViewPortToPart(et,ut,re);F.animateViewPort(Yt,t,10,(function(t){Xt(t)}))},ce=p.useCallback((function(t,e){var n=Z.to,i=Z.from,o="input"===e?i:n,r="input"===e?n:i,a={pinId:t,insId:v.THIS_INS_ID},u="input"===e?{from:a}:{to:a};o&&o.pinId===t?Q({from:void 0,to:void 0}):r?"input"===e&&n?Qt(a,n):i&&Qt(i,a):Q(u)}),[Z,Q,Qt]),le=p.useCallback((function(t,e,n){var i=Z.from,o=Z.to;if(lt&&lt.insId===t.id||dt&&dt.insId===t.id)Q({from:void 0,to:void 0});else if("input"===n){var r={insId:t.id,pinId:e};!o||o.pinId!==e||v.isInternalConnectionNode(o)&&o.insId!==t.id?lt?Qt(lt,r):Q({to:r,selected:[]}):Q({to:void 0})}else{var a={insId:t.id,pinId:e};!i||i.pinId!==e||v.isInternalConnectionNode(i)&&i.insId!==t.id?dt?Qt(a,dt):Q({from:a,selected:[]}):Q({from:void 0})}}),[Z,lt,Q,Qt,dt]);P.useEffect((function(){if(!kt&&re.width){var e=I.fitViewPortToPart(et,ut,re);t.thumbnailMode||Xt(e);var n=setTimeout((function(){var e=I.fitViewPortToPart(et,ut,re);t.thumbnailMode||Xt(e),Nt(!0)}),100);return function(){return clearTimeout(n)}}}),[et,re,t.thumbnailMode,kt,ut,Xt]);var de=p.useCallback((function(){var t=Z.selected,e=et.instances.filter((function(e){return t.includes(e.id)})).map((function(t){return i(i({},t),{id:t.id+"-copy"})})),n=et.connections.filter((function(e){var n=e.from,i=e.to;return t.includes(n.insId)&&t.includes(i.insId)}));l({instances:e,connections:n})}),[Z,l,et]),pe=p.useCallback((function(){var e=G.pasteInstancesCommand(et,ae.current,t.clipboardData),n=e.newPart,i=e.newInstances;r(n,D.functionalChange("paste instances")),Q({selected:i.map((function(t){return t.id}))})}),[r,Q,et,t.clipboardData]),fe=p.useCallback((function(){var t=et.id;ne?"input"===ne.type?ne.ins.id===t?ce(ne.pin,"input"):le(ne.ins,ne.pin,"input"):ne.ins.id===t?ce(ne.pin,"output"):le(ne.ins,ne.pin,"output"):console.warn("tried selecting closest with no pin nearby")}),[et.id,ne,ce,le]),ve=p.useCallback((function(t,e){var n="mouse"===e?ae.current:{x:Yt.pos.x+re.width/2,y:Yt.pos.y+re.height/2},o=I.centerBoardPosOnTarget(n,re,t,Yt);Xt(i(i({},Yt),{zoom:t,pos:o}))}),[Xt,Yt,re]);_.useHotkeys("cmd+=",(function(t){ve(Yt.zoom+.1,"hotkey"),t.preventDefault()}),Jt,[Yt,ve]),_.useHotkeys("cmd+-",(function(t){ve(Yt.zoom-.1,"hotkey"),t.preventDefault()}),Jt,[ve,Yt.zoom]),_.useHotkeys("cmd+o",(function(t){t.preventDefault(),N.toastMsg("Ordering");var e=[];T.orderGroupedPart(et,ut,200,(function(t,n){n%3==0&&e.push(t)})),u(void 0,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return e.length?(t=e.shift(),N.toastMsg("Step "+e.length+"!"),[4,v.delay(200)]):[3,2];case 1:return n.sent(),r(t,D.metaChange("order-step")),N.toastMsg("Step "+e.length+"! done"),[3,0];case 2:return[2]}}))}))}),Jt,[r,et,it]),_.useHotkeys("cmd+0",(function(t){ve(1),t.preventDefault()}),Jt,[Yt,ve]);var me=function(){Q({from:void 0,to:void 0,selected:[]})},ye=p.useCallback((function(t,e){bt(t.id),r(i({},et),D.metaChange("drag-start"))}),[r,et]),he=p.useCallback((function(t,e,n){var i=I.handleInstanceDrag(et,t,n,e,ct,It),o=i.newValue,a=i.newSelected;r(o,D.metaChange("drag-move")),a&&Q({selected:a})}),[It,r,Q,ct,et]),ge=p.useCallback((function(t,e){e.preventDefault(),e.stopPropagation(),bt(void 0)}),[]),Ie=p.useCallback((function(t,e){e.preventDefault(),e.stopPropagation(),bt(v.THIS_INS_ID)}),[]),be=p.useCallback((function(e,n,i,o){return u(void 0,void 0,void 0,(function(){var r,a,u;return s(this,(function(s){return i.preventDefault(),i.stopPropagation(),r=o.x,a=o.y,u=b.produce(et,(function(t){"input"===e?t.inputsPosition[n]={x:r,y:a}:t.outputsPosition[n]={x:r,y:a}})),t.onChangePart(u,D.metaChange("part-io-drag-move")),[2]}))}))}),[t,et]),Pe=p.useCallback((function(t,e,n,i){return u(void 0,void 0,void 0,(function(){return s(this,(function(t){return n.preventDefault(),n.stopPropagation(),bt(void 0),[2]}))}))}),[]),_e=p.useCallback((function(t,e){var n=t.id,i=e.shiftKey?ct.filter((function(t){return t!==n})):[],o=e.shiftKey?c(c([],ct),[n]):[n],r=ct.includes(n)?i:o;Q({selected:r,from:void 0,to:void 0})}),[Q,ct]),Ce=p.useCallback((function(){var t=et.instances.map((function(t){return t.id}));Q({selected:t,from:void 0,to:void 0})}),[Q,et.instances]),xe=p.useCallback((function(t){var e=ft.filter((function(e){var n=e.from,i=e.to;return-1===t.indexOf(n.insId)&&-1===t.indexOf(i.insId)})),n=b.produce(et,(function(n){n.connections=e,n.instances=n.instances.filter((function(e){return!t.includes(e.id)}))}));r(n,D.functionalChange("delete-ins")),Q({selected:[]})}),[ft,r,Q,et]),Ee=p.useCallback((function(t){xe([t.id])}),[xe]),je=p.useCallback((function(t,e){var n=b.produce(et,(function(n){"input"===t?(delete n.inputs[e],n.connections=n.connections.filter((function(t){return!(v.isExternalConnectionNode(t.from)&&t.from.pinId===e)}))):(n.connections=n.connections.filter((function(t){return!(v.isExternalConnectionNode(t.to)&&t.to.pinId===e)})),n.completionOutputs=(n.completionOutputs||[]).map((function(t){return t.split("+").filter((function(t){return t!==e})).join("+")})).filter((function(t){return!!t})),delete n.outputs[e])}));r(n,D.functionalChange("remove io pin"))}),[et,r]),we=p.useCallback((function(){return u(void 0,void 0,void 0,(function(){var t,e,n;return s(this,(function(i){switch(i.label){case 0:return t=Z.selected,e=Z.from,n=Z.to,0!==t.length?[3,5]:v.isExternalConnectionNode(e)?[4,Wt("Are you sure you want to remove main input "+e.pinId+"?")]:[3,2];case 1:return i.sent()&&je("input",e.pinId),[3,4];case 2:return v.isExternalConnectionNode(n)?[4,Wt("Are you sure you want to remove main output "+n.pinId+"?")]:[3,4];case 3:i.sent()&&je("output",n.pinId),i.label=4;case 4:return[3,6];case 5:xe(t),i.label=6;case 6:return[2]}}))}))}),[Wt,Z,xe,je]),Oe=p.useCallback((function(t,e,n){r(I.toggleStickyPin(et,t.id,e,n),D.functionalChange("toggle-sticky"))}),[r,et]),Te=p.useCallback((function(){var t=U.handleDuplicateSelectedEditorCommand(et,ct),e=t.newPart,n=t.newInstances;r(e,D.functionalChange("duplicated instances")),Q({selected:n.map((function(t){return t.id}))})}),[r,Q,et,ct]),Se=P.useRef(),ke=P.useRef(),Ne=p.useCallback((function(t){var e=t.nativeEvent.target;if(0===t.button&&Y(t.nativeEvent,et.id))if(t.shiftKey)ke.current={x:t.pageX,y:t.pageY},Se.current=Yt.pos,console.log("STARTING",et.id);else if(e&&"board-editor-inner"===e.className){if(Date.now()-Et<300)return void nt(t);jt(Date.now());var n={x:t.clientX,y:t.clientY},i=j.vSub(n,ue),o=I.domToViewPort(i,Yt,rt);Ct({from:o,to:o})}}),[et.id,Yt,Et,ue,nt]),De=p.useCallback((function(t){if(Y(t.nativeEvent,et.id)){if(_t){if(I.calcSelectionBoxArea(_t)>50){var e=I.getInstancesInRect(_t,ut,Yt,Ze.current,et.instances,ue,rt);console.log({toSelect:e,selectionBox:_t});var n=t.shiftKey?c(c([],ct),e):e;Q({selected:n})}Ct(void 0)}ke.current=void 0,Se.current=void 0}}),[et.id,et.instances,_t,ut,Yt,ue,rt,ct,Q]),Me=p.useCallback((function(t){if(Y(t.nativeEvent,et.id)){Jt.current=!0;var e={x:t.clientX,y:t.clientY},n=j.vSub(e,j.vAdd(ue,j.vZero)),o=I.domToViewPort(n,Yt,rt);if(_t&&Ct(i(i({},_t),{to:o})),ke.current&&Se.current){var r=I.calcMoveViewPort(t,ke.current,Se.current,Yt);Xt(r),t.stopPropagation()}var a=I.findClosestPin(et,ut,n,re,ue,tt,Yt),u=ne;if(a)(!u||u.ins!==a.ins||u.ins===a.ins&&u.pin!==a.pin)&&ie({ins:a.ins,type:a.type,pin:a.id});ae.current=o,Q({lastMousePos:ae.current})}else Jt.current=!1}),[et,ue,Yt,rt,_t,ut,re,tt,ne,Q,Xt]),Re=p.useCallback((function(){ie(void 0),ke.current=void 0,Se.current=void 0,Jt.current=!1}),[]),Ae=p.useCallback((function(t,e){if(e){var n=v.isInlinePartInstance(t)?t.part:v.getPartDef(t.partId,ut);if(!n)throw new Error("Impossible state inspecting inexisting part");if(!v.isGroupedPart(n))return void N.toastMsg("Cannot inspect a non visual part","warning");Ut({insId:tt+"."+t.id,part:n})}else if(v.isRefPartInstance(t)){var i=v.getPartDef(t,ut);J(i)}else{var o=t.part;if(!v.isCodePart(o))return void(v.isGroupedPart(o)?Ut({insId:t.id,part:o}):N.toastMsg("Editing this type of part is not supported"));var r=atob(o.dataBuilderSource);Ft({insId:t.id,templateType:o.templateType,value:r,type:"existing"}),N.toastMsg("Editing inline grouped part not supported yet")}}),[J,ut,tt]),Ve=p.useCallback((function(t){if(v.isInlinePartInstance(t)){var e=t.part;if(!v.isGroupedPart(e))return void N.toastMsg("Not supported","warning");var n=b.produce(et,(function(n){var i,o;n.instances=n.instances.filter((function(e){return e.id!==t.id})),n.connections=n.connections.filter((function(e){var n=e.from,i=e.to;return n.insId!==t.id&&i.insId!==t.id})),(i=n.instances).push.apply(i,e.instances),(o=n.connections).push.apply(o,e.connections.filter((function(t){return v.isInternalConnectionNode(t.from)&&v.isInternalConnectionNode(t.to)})))}));r(n,{type:"functional",message:"ungroup"}),Q({selected:[]})}else{var i=v.getPartDef(t.partId,ut);if(!v.isGroupedPart(i))return void N.toastMsg("Not supported","warning")}}),[et,r,Q,ut]),He=p.useCallback((function(t){return u(void 0,void 0,void 0,(function(){return s(this,(function(t){return[2]}))}))}),[]),ze=p.useCallback((function(t,e){var n=B.handleDetachConstEditorCommand(et,t.id,e);r(n,D.functionalChange("detach-const"))}),[r,et]),Ge=p.useCallback((function(t,e){var n=t.inputConfig[e]||O.queueInputPinConfig();v.isStaticInputPinConfig(n)&&(Ht(n.value),N.AppToaster.show({message:"Value copied"}))}),[]),Fe=p.useCallback((function(t,e){var n=b.produce(et,(function(n){var i=n.instances.find((function(e){return e.id===t.id}));if(!i)throw new Error("Impossible state");i.inputConfig[e]=v.staticInputPinConfig(Vt),n.connections=n.connections.filter((function(n){return!v.isInternalConnectionNode(n.to)||!(n.to.insId===t.id&&n.to.pinId===e)}))}));r(n,D.functionalChange("paste const value"))}),[et,r,Vt]),qe=p.useCallback((function(t){return u(void 0,void 0,void 0,(function(){var e,n;return s(this,(function(i){switch(i.label){case 0:return[4,$t("New name?")];case 1:return(e=i.sent())?("any",n=b.produce(et,(function(n){if("input"===t)et.inputs||(n.inputs={}),n.inputs[e]=v.partInput("any"),n.inputsPosition[e]=ae.current;else{et.outputs||(n.outputs={}),n.outputs[e]=v.partOutput("any",!1,!1),n.outputsPosition[e]=ae.current;var i=(n.completionOutputs||[])[0];if(i){var o=i.split("+");n.completionOutputs[0]=c(c([],o),[e]).join("+")}else n.completionOutputs=[e]}})),r(n,D.functionalChange("add new io pin")),[2]):[2]}}))}))}),[$t,et,r]),Be=p.useCallback((function(){return u(void 0,void 0,void 0,(function(){var t,e,n,i;return s(this,(function(o){switch(o.label){case 0:return t=null===(i=et.completionOutputs)||void 0===i?void 0:i.join(","),[4,$t("Edit completion outputs",t)];case 1:return e=o.sent(),h.isDefined(e)&&null!==e&&(n=b.produce(et,(function(t){t.completionOutputs=""===e?void 0:e.split(",")})),r(n,D.functionalChange("change part completions"))),[2]}}))}))}),[$t,r,et]),Ue=p.useCallback((function(){return u(void 0,void 0,void 0,(function(){var t,e,n,i;return s(this,(function(o){switch(o.label){case 0:return t=null===(i=et.reactiveInputs)||void 0===i?void 0:i.join(","),[4,$t("Edit reactive inputs",t)];case 1:return e=o.sent(),h.isDefined(e)&&null!==e&&(n=b.produce(et,(function(t){t.reactiveInputs=""===e?void 0:e.split(",")})),r(n,D.functionalChange("change reactive inputs"))),[2]}}))}))}),[$t,r,et]),Le=p.useCallback((function(t){var e=b.produce(et,(function(e){e.defaultStyle=t}));r(e,D.functionalChange("change default style"))}),[r,et]),We=p.useCallback((function(t,e){return u(void 0,void 0,void 0,(function(){var n,i;return s(this,(function(o){switch(o.label){case 0:return[4,$t("New name?",e)];case 1:return n=o.sent()||e,i=I.handleIoPinRename(et,t,e,n),r(i,D.functionalChange("rename io pin")),[2]}}))}))}),[et,r,$t]),$e=p.useCallback((function(t,e){var n=I.handleChangePartInputType(et,t,e);r(n,D.functionalChange("toggle io pin optional"))}),[et,r]),Ye=p.useCallback((function(t,e,n,i){return u(void 0,void 0,void 0,(function(){var o,r,a,u;return s(this,(function(s){if("input"===n)o=t.inputConfig[e],r=v.isStaticInputPinConfig(o)?JSON.stringify(o.value):void 0,Ft({type:"static-input",insId:t.id,pinId:e,value:r});else{if(a=v.getPartDef(t,ut),u=v.getPartOutputs(a),!u[e])throw new Error("Dbl clicked on un-existing pin");Rt({pos:{x:i.clientX,y:i.clientY},ins:t,part:a,pinId:e,pinType:n})}return[2]}))}))}),[ut]),Je=p.useCallback((function(t,e){return u(void 0,void 0,void 0,(function(){return s(this,(function(n){if(!et.inputs[t])throw new Error("Dbl clicked on un-existing pin");return Rt({pos:{x:e.clientX,y:e.clientY},pinId:t,pinType:"input",part:et}),[2]}))}))}),[et]),Xe=p.useCallback((function(t){if(t.metaKey||t.ctrlKey){var e=-.001*t.deltaY;ve(Yt.zoom+e,"mouse"),t.preventDefault(),t.stopPropagation()}}),[ve,Yt.zoom]);P.useEffect((function(){var t=oe.current;if(t)return t.addEventListener("wheel",Xe),function(){t.removeEventListener("wheel",Xe)}}),[Xe]);var Ke={backgroundPositionX:I.roundNumber(-Yt.pos.x*Yt.zoom),backgroundPositionY:I.roundNumber(-Yt.pos.y*Yt.zoom),backgroundSize:I.roundNumber(25*Yt.zoom)+"px"},Ze=p.useRef(new Map);p.useEffect((function(){var t=pt.reduce((function(t,e){var n=v.getPartDef(e,ut);return n&&t.set(e.id,v.keys(n.inputs)),t}),new Map),e=pt.reduce((function(t,e){var n=v.getPartDef(e,ut);return n&&t.set(e.id,v.keys(n.outputs)),t}),new Map),n=ft.filter((function(n){if(v.isExternalConnectionNode(n.from)||v.isExternalConnectionNode(n.to))return!1;if(n.to.pinId===v.TRIGGER_PIN_ID||n.from.pinId===v.ERROR_PIN_ID)return!1;var i=t.get(n.to.insId)&&t.get(n.to.insId).includes(n.to.pinId),o=e.get(n.from.insId)&&e.get(n.from.insId).includes(n.from.pinId);return!(i&&o)}));if(n.length>0){N.toastMsg(n.length+" orphan connections removed","warning"),console.log(n.length+" orphan connections removed",n);var i=b.produce(et,(function(t){t.connections=et.connections.filter((function(t){return!n.includes(t)}))}));r(i,D.functionalChange("prune orphan connections"))}}),[pt,r,ft,it,et,ut]),P.useEffect((function(){var t=new Map(pt.map((function(t){return[t.id,t]})));Ze.current=ft.reduce((function(e,n){var o,r=e.get(n.to.insId)||{},a=r[n.to.pinId]||[],u=i(i({},r),((o={})[n.to.pinId]=c(c([],a),[t.get(n.from.insId)]),o));return e.set(n.to.insId,u),e}),new Map)}),[ft,pt]);var Qe=p.useCallback((function(){Rt(void 0)}),[]),tn=p.useCallback((function(t){return u(void 0,void 0,void 0,(function(){var e,n,i,o;return s(this,(function(a){switch(a.label){case 0:if(!Mt)throw new Error("impossible state - quick add menu invoked but not available");switch(e=Mt.ins,Mt.pos,n=Mt.pinId,t.type){case"part":return[3,1];case"import":return[3,2];case"value":return[3,4]}return[3,5];case 1:return(i=I.createNewPartInstance(t.part.id,100,ae.current,ut))&&(o=b.produce(et,(function(t){t.instances.push(i),t.connections.push({from:{insId:e?e.id:v.THIS_INS_ID,pinId:n},to:{insId:i.id,pinId:v.TRIGGER_PIN_ID}})})),r(o,D.functionalChange("add-item-quick-menu")),Qe()),[3,5];case 2:return[4,ot(t.importablePart,{pos:ae.current,connectTo:{insId:e.id,outputId:n}})];case 3:return a.sent(),Qe(),[3,5];case 4:if(!e)return N.toastMsg("Cannot add value to main input"),[2];Ft({type:"new-output",insId:e.id,pinId:n}),a.label=5;case 5:return[2]}}))}))}),[Mt,ut,et,r,Qe,ot]),en=p.useCallback((function(){return u(void 0,void 0,void 0,(function(){var t;return s(this,(function(e){switch(e.label){case 0:return t=JSON.stringify(et),[4,navigator.clipboard.writeText(t)];case 1:return e.sent(),N.AppToaster.show({message:"Copied!"}),[2]}}))}))}),[et]),nn=p.useCallback((function(t){var e,n,o=a?"":" (cannot edit main part, only grouped)";return d.jsxs(x.Menu,{children:[d.jsx(x.MenuItem,{onMouseDown:function(t){return t.stopPropagation()},text:"New Value",onClick:h.preventDefaultAnd((function(){return Ft({type:"new-floating",pos:ae.current})}))},void 0),d.jsx(x.MenuItem,{text:"New input "+o,onMouseDown:function(t){return t.stopPropagation()},onClick:h.preventDefaultAnd((function(){return qe("input")})),disabled:!a},void 0),d.jsx(x.MenuItem,{onMouseDown:function(t){return t.stopPropagation()},text:"New output "+o,onClick:h.preventDefaultAnd((function(){return qe("output")})),disabled:!a},void 0),d.jsx(x.MenuItem,{onMouseDown:function(t){return t.stopPropagation()},text:"Copy part to clipboard",onClick:h.preventDefaultAnd(en)},void 0),d.jsx(x.MenuItem,{onMouseDown:function(t){return t.stopPropagation()},text:"Edit Completion Outputs ("+((null===(e=et.completionOutputs)||void 0===e?void 0:e.join(","))||"n/a")+")",onClick:h.preventDefaultAnd((function(){return Be()}))},void 0),d.jsx(x.MenuItem,{onMouseDown:function(t){return t.stopPropagation()},text:"Edit Reactive inputs ("+((null===(n=et.reactiveInputs)||void 0===n?void 0:n.join(","))||"n/a")+")",onClick:h.preventDefaultAnd((function(){return Ue()}))},void 0),d.jsx(x.MenuDivider,{},void 0),d.jsx(x.MenuItem,i({text:"Default Style"},{children:d.jsx(L.PartStyleMenu,{style:et.defaultStyle,onChange:Le,promptFn:$t},void 0)}),void 0)]},void 0)}),[en,qe,a,Be,et,Ue]),on=p.useCallback((function(t){if(t.preventDefault(),Jt.current){var e=I.domToViewPort({x:t.clientX,y:t.clientY},Yt,rt),n=nn(e);x.ContextMenu.show(n,{left:t.clientX,top:t.clientY})}}),[nn,rt,Yt]);_.useHotkeys("shift+c",se,Jt),_.useHotkeys("cmd+c",de,Jt),_.useHotkeys("cmd+v",pe,Jt),_.useHotkeys("esc",me,Jt),_.useHotkeys("backspace",we,Jt),_.useHotkeys("shift+g",te,Jt),_.useHotkeys("shift+d",Te,Jt),_.useHotkeys("cmd+a",Ce,Jt),_.useHotkeys("s",fe,Jt);var rn=p.useCallback((function(t,e){if(!Bt)throw new Error("impossible state");var n=b.produce(et,(function(e){var n=e.instances.find((function(t){return t.id===Bt.insId}));if(!n||!v.isInlinePartInstance(n))throw new Error("impossible state");n.part=t}));r(n,D.functionalChange("Inner change: "+e.message)),Ut((function(e){return i(i({},e),{part:t})}))}),[r,Bt,et]),an=P.useState({selected:[],viewPort:e.defaultViewPort,lastMousePos:{x:0,y:0}}),un=an[0],sn=an[1],cn=p.useCallback((function(t){return sn((function(e){return i(i({},e),t)}))}),[]),ln=function(n){return Bt&&Bt.insId===n.id?{insId:tt+"."+Bt.insId,boardData:un,onChangeBoardData:cn,resolvedFlow:it,onCopy:l,clipboardData:t.clipboardData,onInspectPin:t.onInspectPin,onGoToPartDef:t.onGoToPartDef,partIoEditable:t.partIoEditable,onRequestHistory:X,part:Bt.part,onChangePart:rn,onShowOmnibar:nt,parentViewport:e.defaultViewPort,parentBoardPos:ue,onExtractInlinePart:t.onExtractInlinePart,onImportPart:t.onImportPart}:void 0},dn=function(){if(lt&&("input"===(null==ne?void 0:ne.type)||(null==ne?void 0:ne.ins.id)===et.id&&"output"===(null==ne?void 0:ne.type))){var t=ne.ins.id===et.id?{pinId:ne.pin,insId:v.THIS_INS_ID}:{insId:ne.ins.id,pinId:ne.pin};if(!v.isInternalConnectionNode(t)&&!v.isInternalConnectionNode(lt))return;return{from:lt,to:t}}if(dt&&("output"===(null==ne?void 0:ne.type)||(null==ne?void 0:ne.ins.id)===et.id&&"input"===(null==ne?void 0:ne.type))){var e=ne.ins.id===et.id?{pinId:ne.pin,insId:v.THIS_INS_ID}:{insId:ne.ins.id,pinId:ne.pin};if(!v.isInternalConnectionNode(dt)&&!v.isInternalConnectionNode(e))return;return{from:e,to:dt}}},pn=p.useCallback((function(t,e){var n=b.produce(et,(function(n){n.instances=n.instances.map((function(n){return n.id===t.id?i(i({},n),{visibleInputs:e}):n}))}));r(n,D.functionalChange("change instance visible inputs"))}),[et,r]),fn=p.useCallback((function(t,e){var n=b.produce(et,(function(n){n.instances=n.instances.map((function(n){return n.id===t.id?i(i({},n),{style:e}):n}))}));r(n,D.functionalChange("change instance style"))}),[r,et]),vn=p.useCallback((function(t,e){var n=b.produce(et,(function(n){n.instances=n.instances.map((function(n){return n.id===t.id?i(i({},n),{visibleOutputs:e}):n}))}));r(n,D.functionalChange("change instance visible outputs"))}),[et,r]),mn=p.useCallback((function(t,e){var n=b.produce(et,(function(n){n.instances=n.instances.map((function(n){return n.id===t.id?i(i({},n),{displayName:e}):n}))}));r(n,D.functionalChange("change instance display name"))}),[et,r]);p.useImperativeHandle(n,(function(){return{centerInstance:function(t){var e=et.instances.find((function(e){return e.id===t}));if(e){var n=j.vSub(e.pos,j.vec(re.width/2,re.height/2));Xt(i(i({},Yt),{pos:n}))}},centerViewPort:function(){se()},getViewPort:function(){return Yt},clearSelection:function(){me()}}}));p.useCallback((function(t,e){var n={visibleInputs:t.visibleInputs,visibleOutputs:t.visibleOutputs,inputConfig:t.inputConfig,displayName:t.displayName},o=b.produce(et,(function(e){e.instances=e.instances.map((function(e){return e.id===t.id?i(i({},e),n):e}))}));r(o,D.functionalChange("change instance config - "+e))}),[r,et]);var yn=p.useState([]),hn=(yn[0],yn[1],p.useCallback((function(t,e){var n=e.trim().substr(0,100),i="Inline-value-"+n.substr(0,15).replace(/["'`]/g,""),o=R.createInlineCodePart({code:e,customView:n,partId:i,type:t});switch(Gt.type){case"existing":var a=et.instances.filter((function(t){return t.id===Gt.insId})).filter((function(t){return v.isInlinePartInstance(t)})).map((function(t){return t.part}))[0];if(!a)throw new Error("Unable to find inline part to save to");var u=v.keys(a.inputs),s=v.keys(o.inputs),c=new Set(A.default.difference(u,s)),l=b.produce(et,(function(t){t.instances=t.instances.map((function(t){return t.id===Gt.insId?v.inlinePartInstance(t.id,o,t.inputConfig,t.pos):t})),t.connections=t.connections.filter((function(t){return!(t.to.insId===Gt.insId&&c.has(t.to.pinId))}))}));r(l,D.functionalChange("change inline value")),Ft(void 0);break;case"static-input":var d;try{var p=e.replace(/^['`]/,'"').replace(/['`]$/,'"');d=JSON.parse(p)}catch(P){return void N.toastMsg("Input values must not be formulas or code")}l=b.produce(et,(function(t){t.instances.find((function(t){return t.id===Gt.insId})).inputConfig[Gt.pinId]=v.staticInputPinConfig(d)}));r(l,D.functionalChange("set static input value")),Ft(void 0);break;case"new-floating":var m=v.inlinePartInstance(f.default(),o,{},Gt.pos);l=b.produce(et,(function(t){t.instances.push(m)}));r(l,D.functionalChange("new floating value")),Ft(void 0);break;case"new-output":var y=Gt.insId,h=Gt.pinId,g=et.instances.find((function(t){return t.id===y}));if(!g)throw new Error("Impossible state");var I=v.inlinePartInstance(f.default(),o,{},j.vAdd(g.pos,{x:-50,y:150}));l=b.produce(et,(function(t){t.instances.push(I),t.connections.push({from:v.connectionNode(y,h),to:v.connectionNode(I.id,v.TRIGGER_PIN_ID)})}));r(l,D.functionalChange("new value connected to output")),Ft(void 0)}}),[Gt,r,et])),gn=ft.filter((function(t){var e=dn();return!e||!v.connectionDataEquals(e,t)})),In=p.useCallback((function(){Ut(void 0),sn(e.defaultBoardData)}),[]),bn=p.useCallback((function(t){var e=b.produce(et,(function(e){var n=e.connections.find((function(e){return v.connectionDataEquals(e,t)}));n.hidden=!n.hidden}));r(e,D.functionalChange("toggle connection hidden"))}),[r,et]),Pn=p.useCallback((function(t){var e=b.produce(et,(function(e){e.connections=e.connections.filter((function(e){return!v.connectionDataEquals(e,t)}))}));r(e,D.functionalChange("remove connection"))}),[r,et]);try{return d.jsx("div",i({className:z.default("grouped-part-editor",t.className),"data-id":et.id,onContextMenu:on},{children:d.jsxs("main",i({className:"board-editor-inner",onMouseDown:Ne,onMouseUp:De,onMouseMove:Me,onMouseLeave:Re,ref:oe,style:Ke},{children:[d.jsx(p.Fragment,{children:d.jsx(S.LayoutDebugger,{vp:Yt,part:et,extraDebug:I.emptyList,mousePos:ae.current},void 0)},void 0),d.jsx(y.ConnectionView,{repo:ut,parentInsId:tt,size:re,part:et,boardPos:ue,instances:pt,connections:gn,futureConnection:function(){var t=dn();if(t){var e=t.from,n=t.to,i=new Set(ft.map((function(t){return t.from.insId+"|"+t.from.pinId+"|"+t.to.insId+"|"+t.to.pinId}))),o=e.insId+"|"+e.pinId+"|"+n.insId+"|"+n.pinId;return{connection:{from:e,to:n},type:i.has(o)?"future-remove":"future-add"}}}(),onDblClick:v.noop,viewPort:Yt,parentVp:rt,selectedInstances:ct,toggleHidden:bn,removeConnection:Pn},void 0),function(){var t=Z.from;return h.entries(yt).map((function(e){var n=e[0],i=e[1];return d.jsx(E.PartIoView,{insId:tt,type:"input",pos:vt[n]||{x:0,y:0},id:n,onDelete:a?je:void 0,onRename:a?We:void 0,onDblClick:Je,closest:!(!ne||"input"!==ne.type||ne.ins.id!==et.id||ne.pin!==n),connected:!1,inputMode:i.mode,onChangeInputMode:$e,viewPort:Yt,onDragStart:Ie,onDragEnd:Pe,onDragMove:be,pinType:i.type,onSelect:ce,selected:(null==t?void 0:t.pinId)===n},n)}))}(),pt.map((function(t){return d.jsx(m.InstanceView,{onUngroup:Ve,onExtractInlinePart:He,onDetachConstValue:ze,onCopyConstValue:Ge,onPasteConstValue:Fe,copiedConstValue:Vt,connectionsPerInput:Ze.current.get(t.id)||I.emptyObj,connectionsPerOutput:I.emptyObj,part:v.getPartDef(t,ut),parentInsId:tt,onPinClick:le,onPinDblClick:Ye,onDragStart:ye,onDragEnd:ge,partDefRepo:ut,onDragMove:he,onDblClick:Ae,onSelect:_e,onToggleSticky:Oe,selected:-1!==ct.indexOf(t.id),dragged:It===t.id,onInspectPin:Zt,selectedInput:dt&&v.isInternalConnectionNode(dt)&&dt.insId===t.id?dt.pinId:void 0,selectedOutput:lt&&v.isInternalConnectionNode(lt)&&lt.insId===t.id?lt.pinId:void 0,closestPin:ne&&ne.ins.id===t.id?ne:void 0,instance:t,connections:ft,onTogglePinBreakpoint:v.noop,onTogglePinLog:v.noop,viewPort:Yt,onRequestHistory:Kt,onChangeVisibleInputs:pn,onChangeVisibleOutputs:vn,onSetDisplayName:mn,onDeleteInstance:Ee,forceShowMinimized:lt?"input":dt?"output":void 0,isConnectedInstanceSelected:ct.some((function(e){return ft.some((function(n){var i=n.from,o=n.to;return i.insId===t.id&&o.insId===e||i.insId===e&&o.insId===t.id}))})),inlineGroupProps:ln(t),onCloseInlineEditor:In,inlineEditorPortalDomNode:Lt.current,onChangeStyle:fn,onGroupSelected:te},t.id)})),function(){if(_t){var t=_t.from,e=_t.to,n=F.logicalPosToRenderedPos(t,Yt),i=F.logicalPosToRenderedPos(e,Yt);console.log(t.x,e.x," | ",n.x,i.x);var o=I.getSelectionBoxRect(n,i),r=o.x,a=o.y,u=o.w,s=o.h;return d.jsx("div",{className:"selection-box",style:{top:a,left:r,width:u,height:s}},void 0)}return null}(),function(){var t=Z.to;return h.entries(ht).map((function(e){var n=e[0],i=e[1];return d.jsx(E.PartIoView,{insId:tt,type:"output",pos:mt[n]||{x:0,y:0},id:n,onDelete:a?je:void 0,onRename:a?We:void 0,closest:!(!ne||"output"!==ne.type||ne.ins.id!==et.id||ne.pin!==n),connected:!1,viewPort:Yt,onDragStart:Ie,onDragEnd:Pe,onDragMove:be,pinType:i.type,onSelect:ce,selected:(null==t?void 0:t.pinId)===n},n)}))}(),Mt?d.jsx(w.QuickAddMenu,{part:Mt.part,pinId:Mt.pinId,pinType:Mt.pinType,pos:Mt.pos,resolvedFlow:it,onRequestImportables:t.onRequestImportables,onAdd:tn,onClose:Qe},void 0):null,d.jsx("div",i({className:"zoom-slider"},{children:d.jsx(W,{min:.05,max:3,stepSize:.05,labelStepSize:10,labelRenderer:$,onChange:ve,value:Yt.zoom},void 0)}),void 0),Gt?d.jsx(M.InlineCodeModal,{env:I.emptyObj,initialValue:Gt.value,initialType:"existing"===Gt.type?Gt.templateType:void 0,onCancel:function(){return Ft(void 0)},onSubmit:hn},void 0):null,d.jsx("div",{className:"inline-editor-portal-root"},void 0)]}),void 0)}),void 0)}catch(_n){return console.error(_n),d.jsxs("div",{children:["Error rendering board - ",_n.toString()]},void 0)}})));var Y=function(t,e){var n=t.target.closest(".grouped-part-editor");return n&&n.getAttribute("data-id")===e}},84320:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&o(e,t,n);return r(e,t),e},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.BasePartView=void 0;var s=n(24246),c=a(n(27378)),l=u(n(60042)),d=u(n(48304));e.BasePartView=function(t){var e=t.dragged,n=t.viewPort,o=t.pos,r=t.onDragEnd,a=t.onDragMove,u=t.onDragStart,p=t.displayMode,f=c.useCallback((function(t,e){u(t,e)}),[u]),v=c.useCallback((function(t,e){var a=o,u=(e.x-a.x)/n.zoom,s=(e.y-a.y)/n.zoom,c=a.x+u,l=a.y+s;r(t,i(i({},e),{x:c,y:l}))}),[o,r,n]),m=c.useCallback((function(t,e){a(t,{x:e.x,y:e.y})}),[a]),y={transform:"scale("+n.zoom+")"},h=l.default("base-part-view",t.className,{dragged:e,"display-mode":p}),g=o.x*n.zoom-n.pos.x*n.zoom,I=o.y*n.zoom-n.pos.y*n.zoom,b={transform:"translate("+(g-o.x)+"px, "+(I-o.y)+"px)"},P=l.default("base-part-view-vp-fixer",{"display-mode":p});return s.jsx("div",i({className:P,style:b},{children:s.jsx(d.default,i({onStop:v,onStart:f,onDrag:m,position:o,cancel:".no-drag"},{children:s.jsx("span",i({className:"base-part-view-wrapper"},{children:s.jsx("div",i({className:h,style:y,id:t.domId},{children:t.children}),void 0)}),void 0)}),void 0)}),void 0)}},20685:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.handleConnectionCloseEditorCommand=void 0;var o=n(18265),r=i(n(63300));e.handleConnectionCloseEditorCommand=function(t,e){var n=e.from,i=e.to;return r.default(t,(function(t){var e=t.connections.find((function(t){var e=o.connectionNodeEquals(n,t.from),r=o.connectionNodeEquals(i,t.to);return e&&r}));e?t.connections=t.connections.filter((function(t){return t!==e})):t.connections.push({from:n,to:i})}))}},83779:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.handleDetachConstEditorCommand=void 0;var o=n(18265),r=i(n(63300)),a=n(52178);e.handleDetachConstEditorCommand=function(t,e,n){return r.default(t,(function(t){var i=t.instances.find((function(t){return t.id===e}));if(!i)throw new Error("Impossible state ins id with no matching instance");var r=i.inputConfig[n];if(!r)throw new Error("impossible state detaching const from unexistent config");if(!o.isStaticInputPinConfig(r))throw new Error("impossible state detaching const with no value");var u=r.value,s=a.createInlineCodePart({code:""+u,type:o.CodePartTemplateTypeInline.VALUE}),c=o.inlinePartInstance("value-"+o.randomInt(999),s,{},{x:i.pos.x,y:i.pos.y-100});if(!t.instances.find((function(t){return t.id===i.id})))throw new Error("impossible state instance not found");i.inputConfig[n]=o.queueInputPinConfig(),t.instances.push(c),t.connections.push(o.connectionData(c.id+".r",i.id+"."+n))}))}},2939:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.handleDuplicateSelectedEditorCommand=void 0;var r=o(n(98739)),a=o(n(63300));e.handleDuplicateSelectedEditorCommand=function(t,e){var n=[];return{newPart:a.default(t,(function(t){var o=t.instances;e.forEach((function(t){var e=o.find((function(e){return e.id===t}));if(!e)throw new Error("impossible state duplicate selected no matching instance");if(e){var a=e.pos,u=i(i({},e),{pos:{x:a.x+20,y:a.y+20},id:r.default()});o.push(u),n.push(u.id)}}))})),newInstances:n}}},87816:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.pasteInstancesCommand=void 0;var r=o(n(63300)),a=o(n(98739));e.pasteInstancesCommand=function(t,e,n){var o=n.instances.map((function(t){return i(i({},t),{pos:e,id:a.default()})})),u=new Map(o.map((function(t,e){return[n.instances[e].id,t.id]})));return{newPart:r.default(t,(function(t){var e,r;(e=t.instances).push.apply(e,o);var a=n.connections.map((function(t){var e=t.from,n=t.to;return{from:i(i({},e),{insId:u.get(e.insId)||e.insId}),to:i(i({},n),{insId:u.get(n.insId)||n.insId})}}));(r=t.connections).push.apply(r,a)})),newInstances:o}}},64153:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&o(e,t,n);return r(e,t),e},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionView=e.SingleConnectionView=void 0;var s=n(24246),c=a(n(27378)),l=u(n(60042)),d=n(18265),p=n(48199),f=n(31872),v=n(29768),m=n(99743),y=n(42272);e.SingleConnectionView=function(t){var e=v.useSsr().isBrowser,n=t.connection,o=t.part,r=t.repo,a=t.instances,u=t.type,h=t.viewPort,g=t.toggleHidden,I=t.parentSelected,b=t.removeConnection,P=n.from,_=d.isInternalConnectionNode(P)&&a.find((function(t){return t.id===P.insId}));if(!_&&d.isInternalConnectionNode(P))throw new Error('impossible state  - "from instance id - ['+P.insId+'] does not exist"');var C=(d.isInternalConnectionNode(P)&&_?d.getPartDef(_,r):o).outputs[P.pinId],x=C&&C.delayed,E=e?function(t){var e=t.connection,n=t.part,i=t.size,o=t.boardPos,r=t.parentInsId,a=t.viewPort,u=e.from;return d.isExternalConnectionNode(u)?p.calcMainInputPosition(n,i,u.pinId,r,"input",o,a):p.calcPinPosition(r,u.insId,u.pinId,"output",o,a)}(t):{x:0,y:0},j=e?function(t){var e=t.connection,n=t.part,i=t.size,o=t.boardPos,r=t.parentInsId,a=t.viewPort,u=e.to;return d.isExternalConnectionNode(u)?p.calcMainOutputPosition(n,i,u.pinId,r,"output",o,a):p.calcPinPosition(r,u.insId,u.pinId,"input",o,a)}(t):{x:0,y:0},w=m.vDiv(E,t.parentVp.zoom),O=w.x,T=w.y,S=m.vDiv(j,t.parentVp.zoom),k=S.x,N=S.y,D=l.default("connection",{delayed:x,hidden:n.hidden,"parent-selected":I},u),M=f.calcBezierPath({sourceX:O,sourceY:T,targetX:k,targetY:N,curvature:.15}),R=2*h.zoom,A="regular"===u?void 0:6*h.zoom,V=(O+k)/2,H=(T+N)/2,z=c.useCallback((function(t){t.preventDefault(),t.stopPropagation();var e=s.jsxs(y.Menu,{children:[s.jsx(y.MenuItem,{text:n.hidden?"Show connection":"Hide connection",onClick:function(){return g(n)}},void 0),s.jsx(y.MenuItem,{text:"Remove connection",onClick:function(){return b(n)}},void 0)]},void 0);y.ContextMenu.show(e,{left:t.pageX,top:t.pageY})}),[n,b,g]);return s.jsxs(c.Fragment,{children:[s.jsx("path",{d:M,className:D,style:{strokeWidth:R,strokeDasharray:A},onContextMenu:z},void 0),"future-add"===u?s.jsx("text",i({className:"label",x:V,y:H,fontSize:"12px"},{children:"Add connection"}),void 0):null,"future-remove"===u?s.jsx("text",i({className:"label",x:V,y:H,fontSize:"12"},{children:"Remove connection"}),void 0):null]},void 0)};e.ConnectionView=function(t){var n=t.viewPort,o=t.futureConnection,r=t.toggleHidden,a=t.selectedInstances,u=c.useState(0),l=u[0],d=u[1],p=c.useCallback((function(t){return requestAnimationFrame((function(){d((function(t){return(t+1)%9})),t>0&&p(t-1)}))}),[]);c.useEffect((function(){var t=p(10);return function(){cancelAnimationFrame(t)}}),[p]),c.useEffect((function(){var t=function(){p(3)};return window.addEventListener("scroll",t),window.addEventListener("resize",t),function(){window.removeEventListener("scroll",t),window.removeEventListener("resize",t)}}),[p,l]);var f=t.connections.map((function(n){var o=a.includes(n.from.insId)||a.includes(n.to.insId);return s.jsx(e.SingleConnectionView,i({},t,{connection:n,type:"regular",parentSelected:o}),void 0)}));return o&&f.push(s.jsx(e.SingleConnectionView,i({},t,{connection:o.connection,type:o.type,toggleHidden:r,parentSelected:!1}),void 0)),s.jsx("span",i({className:"connections-view",style:{opacity:n.zoom}},{children:s.jsx("svg",i({style:{width:"100%"}},{children:f}),void 0)}),void 0)}},31872:function(t,e){"use strict";var n;function i(t,e){return t>=0?.5*t:25*e*Math.sqrt(-t)}function o(t){var e,o,r=t.pos,a=t.x1,u=t.y1,s=t.x2,c=t.y2,l=t.c;switch(r){case n.Left:e=a-i(a-s,l),o=u;break;case n.Right:e=a+i(s-a,l),o=u;break;case n.Top:e=a,o=u-i(u-c,l);break;case n.Bottom:e=a,o=u+i(c-u,l)}return[e,o]}Object.defineProperty(e,"__esModule",{value:!0}),e.getBezierCenter=e.calcBezierPath=e.Position=void 0,function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"}(n=e.Position||(e.Position={}));e.calcBezierPath=function(t){var e=t.sourceX,i=t.sourceY,r=t.sourcePosition,a=void 0===r?n.Bottom:r,u=t.targetX,s=t.targetY,c=t.targetPosition,l=void 0===c?n.Top:c,d=t.curvature,p=void 0===d?.25:d,f=o({pos:a,x1:e,y1:i,x2:u,y2:s,c:p}),v=f[0],m=f[1],y=o({pos:l,x1:u,y1:s,x2:e,y2:i,c:p});return"M"+e+","+i+" C"+v+","+m+" "+y[0]+","+y[1]+" "+u+","+s},e.getBezierCenter=function(t){var e=t.sourceX,i=t.sourceY,r=t.sourcePosition,a=void 0===r?n.Bottom:r,u=t.targetX,s=t.targetY,c=t.targetPosition,l=void 0===c?n.Top:c,d=t.curvature,p=void 0===d?.25:d,f=o({pos:a,x1:e,y1:i,x2:u,y2:s,c:p}),v=f[0],m=f[1],y=o({pos:l,x1:u,y1:s,x2:e,y2:i,c:p}),h=.125*e+.375*v+.375*y[0]+.125*u,g=.125*i+.375*m+.375*y[1]+.125*s;return[h,g,Math.abs(h-e),Math.abs(g-i)]}},48199:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.calcMainOutputPosition=e.calcMainInputPosition=e.calcPinPosition=void 0;var i=n(92548),o={x:99999,y:99999},r=function(t,e,n,i){if(!t)return console.warn("Cannot find element "+n+" to render connection"),o;var r=t.getBoundingClientRect(),a=r.x,u=r.y,s=r.width,c=u+r.height/2;return{x:a+s/2-e.x,y:c-e.y}};e.calcPinPosition=function(t,e,n,o,a,u){var s=i.getPinDomId(t,e,n,o),c=document.getElementById(s);return r(c,a,s)};e.calcMainInputPosition=function(t,e,n,o,a,u,s){var c=i.getMainPinDomId(o,n,a),l=document.getElementById(c);return r(l,u,c)};e.calcMainOutputPosition=function(t,e,n,o,a,u,s){var c=i.getMainPinDomId(o,n,a),l=document.getElementById(c);return r(l,u,c)}},92548:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getMainPinDomId=e.getPinDomId=e.getInstanceDomId=void 0;e.getInstanceDomId=function(t,e){return("ins-view-"+t+"."+e).replace(/\s+/g,"-")};e.getPinDomId=function(t,e,n,i){return("pin-"+t+"."+e+"-"+n+"-"+i).replace(/\s+/g,"-")};e.getMainPinDomId=function(t,e,n){return("pin-main-"+t+"-"+e+"-"+n).replace(/\s+/g,"-")}},53574:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&o(e,t,n);return r(e,t),e},u=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{s(i.next(t))}catch(e){r(e)}}function u(t){try{s(i.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function u(r){return function(u){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(u){r=[6,u],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,u])}}},c=this&&this.__spreadArray||function(t,e){for(var n=0,i=e.length,o=t.length;n<i;n++,o++)t[o]=e[n];return t},l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.InstanceView=e.getVisibleOutputs=e.getVisibleInputs=e.MAX_INSTANCE_WIDTH=e.MIN_WIDTH_PER_PIN=e.PIECE_CHAR_WIDTH=e.PIECE_HORIZONTAL_PADDING=void 0;var d=n(24246),p=a(n(27378)),f=n(92739),v=n(18265),m=l(n(60042)),y=n(11901),h=n(18265),g=n(18265),I=n(42957),b=n(84320),P=n(18265),_=n(98784),C=n(92548),x=n(12465),E=n(96149),j=n(42272),w=l(n(31542)),O=n(83438);e.PIECE_HORIZONTAL_PADDING=25,e.PIECE_CHAR_WIDTH=11,e.MIN_WIDTH_PER_PIN=40,e.MAX_INSTANCE_WIDTH=400;e.getVisibleInputs=function(t,e,n){var i=t.visibleInputs;if(i)return i;var o=v.keys(g.getPartInputs(e)).filter((function(i,o){var r,a=n.some((function(e){return e.to.insId===t.id&&e.to.pinId===i})),u=e.inputs[i]&&"optional"===(null===(r=e.inputs[i])||void 0===r?void 0:r.mode);return a||!u&&i!==h.TRIGGER_PIN_ID}));return 0===o.length?[h.TRIGGER_PIN_ID]:o};e.getVisibleOutputs=function(t,e,n){var i=t.visibleOutputs;if(i)return i;var o=Object.keys(e.outputs);return n.some((function(e){return e.from.insId===t.id&&e.from.pinId===h.ERROR_PIN_ID}))?c(c([],o),[h.ERROR_PIN_ID]):o};e.InstanceView=function(t){var n=this,o=t.selected,r=t.selectedInput,a=t.selectedOutput,l=t.closestPin,T=t.dragged,S=t.onTogglePinLog,k=t.onTogglePinBreakpoint,N=t.onDetachConstValue,D=t.onCopyConstValue,M=t.onPasteConstValue,R=t.displayMode,A=t.connections,V=t.instance,H=t.viewPort,z=t.part,G=t.onPinClick,F=t.onPinDblClick,q=t.onDragStart,B=t.onRequestHistory,U=t.onDragEnd,L=t.onDragMove,W=t.onToggleSticky,$=t.onSelect,Y=t.onDblClick,J=t.onChangeVisibleInputs,X=t.onChangeVisibleOutputs,K=t.onConvertConstToEnv,Z=t.inlineGroupProps,Q=t.onUngroup,tt=t.onExtractInlinePart,et=t.onGroupSelected,nt=t.isConnectedInstanceSelected,it=t.inlineEditorPortalDomNode,ot=t.onChangeStyle,rt=t.onDeleteInstance,at=t.onSetDisplayName,ut=V.id,st=g.isNativePart(z),ct=p.useState({w:800,h:600}),lt=(ct[0],ct[1]),dt=p.useMemo((function(){var t=v.randomInt(6,1);return{icon:v.pickRandom([["fab","discord"],["fab","slack"],"bug","cube"]),color:t,size:v.randomInt(3,1),variation:v.randomInt(5,1)}}),[]),pt=p.useRef(),ft=V.style||z.defaultStyle||{},vt=ft.size||"regular",mt=p.useMemo((function(){return new Map(A.filter((function(t){return t.to.insId===ut})).map((function(t){var e=t.to,n=t.hidden;return[e.pinId,n]})))}),[A,ut]),yt=p.useMemo((function(){return new Map(A.filter((function(t){return t.from.insId===ut})).map((function(t){var e=t.from,n=t.hidden;return[e.pinId,n]})))}),[A,ut]),ht=E.usePrompt(),gt=p.useCallback((function(t){return G(V,t,"input")}),[V,G]),It=p.useCallback((function(t,e){return F(V,t,"input",e)}),[V,F]),bt=p.useCallback((function(t,e){return F(V,t,"output",e)}),[V,F]),Pt=p.useCallback((function(t){return G(V,t,"output")}),[V,G]),_t=p.useCallback((function(t,e){q(V,t,e)}),[V,q]),Ct=p.useCallback((function(t,e){var n=V.pos,o=(e.x-n.x)/H.zoom,r=(e.y-n.y)/H.zoom,a=n.x+o,u=n.y+r;U(V,t,i(i({},e),{x:a,y:u}))}),[V,U,H.zoom]),xt=p.useCallback((function(t,e){L(V,t,{x:e.x,y:e.y})}),[V,L]),Et=p.useCallback((function(t){return W(V,t)}),[V,W]),jt=p.useCallback((function(t){return N(V,t)}),[V,N]),wt=p.useCallback((function(t){return D(V,t)}),[V,D]),Ot=p.useCallback((function(t){return M(V,t)}),[V,M]),Tt=p.useCallback((function(t){return $(V,t)}),[V,$]),St=p.useCallback((function(t){return Y(V,t.shiftKey)}),[V,Y]),kt=v.entries(z.inputs),Nt=V.visibleInputs,Dt=V.visibleOutputs;Nt&&kt.sort((function(t,e){return Nt.indexOf(t[0])-Nt.indexOf(e[0])}));var Mt=v.entries(z.outputs);Dt&&Mt.sort((function(t,e){return Dt.indexOf(t[0])-Dt.indexOf(e[0])}));var Rt=e.getVisibleInputs(V,z,A),At=e.getVisibleOutputs(V,z,A);kt.push([h.TRIGGER_PIN_ID,v.partInput("trigger")]),Mt.push([h.ERROR_PIN_ID,h.partOutput("error")]);var Vt=kt.filter((function(t){var e=t[0];return Rt.includes(e)||(o||nt)&&mt.has(e)})),Ht=Mt.filter((function(t){var e=t[0];return At.includes(e)||(o||nt)&&yt.has(e)})),zt=m.default("ins-view",{native:st,"no-inputs":0===kt.length,"no-outputs":0===Mt.length,"display-mode":R,"force-minimized-input":"input"===t.forceShowMinimized||"both"===t.forceShowMinimized,"force-minimized-output":"output"===t.forceShowMinimized||"both"===t.forceShowMinimized,"inline-part-edited":!!Z}),Gt=m.default({selected:o,dragged:T,closest:l&&l.ins.id===V.id},"size-"+vt),Ft=new Set(v.entries(z.inputs).filter((function(t){t[0];var e=t[1];return h.isInputPinOptional(e)})).map(v.pickFirst)),qt=v.entries(V.inputConfig).reduce((function(t,e){var n,o=e[0],r=e[1];return h.isStickyInputPinConfig(r)||r.sticky?i(i({},t),((n={})[o]=!0,n)):t}),{}),Bt=I.calcPartContent(V,z),Ut=function(t){var e=V.inputConfig[t];if(P.isStaticInputPinConfig(e))return e.value},Lt=p.useCallback((function(){return u(n,void 0,void 0,(function(){var t,e;return s(this,(function(n){switch(n.label){case 0:return t=v.okeys(z.inputs),[4,ht("New order?",(V.visibleInputs||t).join(","))];case 1:return(e=n.sent())&&J(V,e.split(",")),[2]}}))}))}),[z.inputs,ht,V,J]),Wt=p.useCallback((function(){return u(n,void 0,void 0,(function(){var t,e;return s(this,(function(n){switch(n.label){case 0:return t=v.okeys(z.outputs),[4,ht("New order?",(V.visibleOutputs||t).join(","))];case 1:return(e=n.sent())&&X(V,e.split(",")),[2]}}))}))}),[z.outputs,ht,V,X]),$t=p.useCallback((function(){rt(V)}),[rt,V]),Yt=p.useCallback((function(){return u(n,void 0,void 0,(function(){var t;return s(this,(function(e){switch(e.label){case 0:return[4,ht("Set custom display name",V.displayName||z.id)];case 1:return t=e.sent(),at(V,t),[2]}}))}))}),[ht,V,at,z.id]),Jt=Object.keys(g.getPartInputs(z)),Xt=Object.keys(v.getPartOutputs(z)),Kt=p.useCallback((function(t,e){return B(V.id,t,e)}),[V,B]),Zt=p.useCallback((function(t){K&&K(V,t)}),[V,K]),Qt=function(){return d.jsx("div",i({className:"inputs no-drag"},{children:Vt.map((function(e){var n=e[0],i=e[1];return d.jsx(y.PinView,{type:"input",insId:V.id,parentInsId:t.parentInsId,id:n,optional:Ft.has(n),connected:mt.has(n),isSticky:qt[n],minimized:!o&&1===Vt.length,onToggleSticky:Et,onDetachConstValue:jt,onCopyConstValue:wt,onPasteConstValue:Ot,copiedConstValue:t.copiedConstValue,selected:n===r,onClick:gt,onDoubleClick:It,isPart:0===i.type.indexOf("part"),isClosestToMouse:!!l&&"input"===l.type&&l.pin===n,onToggleLogged:S,onToggleBreakpoint:k,onInspect:t.onInspectPin,constValue:Ut(n),dataType:i.type,onRequestHistory:Kt,onConvertConstToEnv:t.onConvertConstToEnv?Zt:void 0},n)}))}),void 0)},te=function(){return d.jsx("div",i({className:"outputs no-drag"},{children:Ht.map((function(e){var n=e[0],i=e[1];return d.jsx(y.PinView,{insId:V.id,parentInsId:t.parentInsId,connected:yt.has(n),type:"output",id:n,minimized:!o&&1===Ht.length,optional:i.optional,isClosestToMouse:!!l&&"output"===l.type&&l.pin===n,selected:n===a,onClick:Pt,onDoubleClick:bt,onToggleLogged:S,onToggleBreakpoint:k,dataType:i.type,onInspect:t.onInspectPin,onRequestHistory:Kt},n)}))}),void 0)},ee=p.useCallback((function(t){ot(V,t)}),[V,ot]),ne=p.useCallback((function(){var t=Jt.map((function(t){var e=Rt.includes(t),n=mt.has(t)&&!0!==mt.get(t),i=v.getInputName(t);return{text:e?n?'Hide input "'+i+'" (disconnect first)':'Hide input "'+i+'"':'Show input "'+i+'"',onClick:function(){return J(V,e?Rt.filter((function(e){return e!==t})):c(c([],Rt),[t]))},disabled:n&&e}})),e=Xt.map((function(t){var e=At.includes(t),n=yt.has(t),i=v.getOutputName(t);return{text:e?n?'Hide output "'+i+'" (disconnect first)':'Hide output "'+i+'"':'Show output "'+i+'"',onClick:function(){return X(V,e?At.filter((function(e){return e!==t})):c(c([],At),[t]))},disabled:n&&e}})),n=c(c(c(c(c([],t),e),v.isInlinePartInstance(V)&&g.isGroupedPart(V.part)?[{text:"Ungroup inline part",onClick:function(){return Q(V)}}]:[]),v.isInlinePartInstance(V)?[{text:"Extract inline part to file",onClick:function(){return tt(V)}}]:[]),[{text:"Reorder inputs",onClick:Lt},{text:"Reorder outputs",onClick:Wt},{text:"Set display name",onClick:Yt},{text:"Group selected instances",onClick:et},{text:"Delete instance",intent:"danger",onClick:$t}]);return d.jsxs(j.Menu,{children:[d.jsx(j.MenuItem,i({text:"Style"},{children:d.jsx(O.PartStyleMenu,{style:ft,onChange:ee,promptFn:ht},void 0)}),void 0),n.map((function(t){return d.jsx(j.MenuItem,i({},t),void 0)}))]},void 0)}),[Jt,Xt,V,Lt,Wt,Yt,$t,ft,ee,ht,Rt,mt,J,At,yt,X,Q,tt,et]),ie=p.useCallback((function(t){t.preventDefault(),t.stopPropagation();var e=ne();j.ContextMenu.show(e,{left:t.clientX,top:t.clientY})}),[ne]),oe=p.useCallback(_.debounce((function(){var t=pt.current;t&&t.centerViewPort()}),100),[]),re=(p.useCallback((function(t,e){var n=e.size;t.stopPropagation(),lt({w:n.width,h:n.height}),oe()}),[oe]),i({"--part-color":ft.color},ft.cssOverride||{}));return d.jsx("div",i({className:zt,"data-part-id":z.id},{children:d.jsxs(b.BasePartView,i({pos:V.pos,viewPort:H,onDragStart:_t,onDragMove:xt,onDragEnd:Ct,upperRenderer:Qt,bottomRenderer:te,displayMode:R,domId:C.getInstanceDomId(t.parentInsId,V.id)},{children:[Qt(),Z?w.default.createPortal(d.jsxs("div",i({className:"inline-group-editor-container no-drag"},{children:[d.jsxs("header",{children:[Bt," ",d.jsx("button",i({onClick:t.onCloseInlineEditor},{children:"close"}),void 0)]},void 0),d.jsx(x.GroupedPartEditor,i({},t.inlineGroupProps,{className:"no-drag",ref:pt}),void 0)]}),void 0),it):d.jsxs("div",i({className:m.default("ins-view-inner",Gt,"size-"+dt.size),onClick:Tt,onDoubleClick:St,onContextMenu:ie,style:re},{children:[ft.icon?d.jsx(f.FontAwesomeIcon,{icon:ft.icon},void 0):null," ",Bt]}),void 0),te()]}),void 0)}),void 0)}},89232:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&o(e,t,n);return r(e,t),e},u=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{s(i.next(t))}catch(e){r(e)}}function u(t){try{s(i.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function u(r){return function(u){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(u){r=[6,u],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.PartStyleMenu=void 0;var c=n(24246),l=n(42272),d=a(n(27378)),p=n(40232),f={size:"regular"};e.PartStyleMenu=function(t){var e=t.onChange,n=t.style||f,o=t.promptFn,r=d.default.useCallback((function(t,o){var r;e(i(i({},n),((r={})[t]=o,r)))}),[n,e]),a=d.default.useCallback((function(){return u(void 0,void 0,void 0,(function(){var t,e;return s(this,(function(n){switch(n.label){case 0:return[4,o("Icon name? (Font Awesome conventions)","rocket")];case 1:return t=n.sent(),e=t.includes(",")?t.split(","):t,r("icon",e),[2]}}))}))}),[o,r]),v=d.useCallback((function(){return u(void 0,void 0,void 0,(function(){var t,e;return s(this,(function(i){switch(i.label){case 0:return[4,o("Enter a custom style (valid JSON representing a React CSS object)",n.cssOverride?JSON.stringify(n.cssOverride):"")];case 1:t=i.sent();try{e=JSON.parse(t),r("cssOverride",e)}catch(a){console.error(a),p.toastMsg("Invalid object","danger")}return[2]}}))}))}),[o,r,n.cssOverride]);return c.jsxs(d.default.Fragment,{children:[c.jsxs(l.MenuItem,i({text:"Color"},{children:[c.jsx(l.MenuItem,{text:"Amethyst",onClick:function(){return r("color","#9b5de5")}},void 0),c.jsx(l.MenuItem,{text:"Magenta",onClick:function(){return r("color","#f15bb5")}},void 0),c.jsx(l.MenuItem,{text:"Yellow",onClick:function(){return r("color","#fee440")}},void 0),c.jsx(l.MenuItem,{text:"Capri",onClick:function(){return r("color","#00bbf9")}},void 0),c.jsx(l.MenuItem,{text:"Sea Green",onClick:function(){return r("color","#00f5d4")}},void 0),c.jsx(l.MenuDivider,{},void 0),c.jsx(l.MenuItem,{text:"Remove Color",onClick:function(){return r("color",void 0)}},void 0)]}),void 0),c.jsxs(l.MenuItem,i({text:"Size ("+n.size+")"},{children:[c.jsx(l.MenuItem,{text:"Small",onClick:function(){return r("size","small")}},void 0),c.jsx(l.MenuItem,{text:"Regular",onClick:function(){return r("size","regular")}},void 0),c.jsx(l.MenuItem,{text:"Large",onClick:function(){return r("size","large")}},void 0)]}),void 0),c.jsxs(l.MenuItem,i({text:"Icon"},{children:[c.jsx(l.MenuItem,{text:"Choose Icon",onClick:a},void 0),c.jsx(l.MenuItem,{text:"Remove Icon",onClick:function(){return r("icon",void 0)}},void 0)]}),void 0),c.jsx(l.MenuItem,{text:"Custom Styling",onClick:v},void 0)]},void 0)}},83438:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),o(n(89232),e)},83100:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),o(n(53574),e)},42957:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&o(e,t,n);return r(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.calcInstancePosition=e.calcPartWidth=e.calcPartContent=void 0;var u=n(18265),s=a(n(78284)),c=n(12901),l=n(53574),d=n(98784),p=n(92548);e.calcPartContent=function(t,e){if(t.displayName)return t.displayName;if(e.customViewCode)try{var n=Object.entries(t.inputConfig).filter((function(t){var e=t[1];return u.isStaticInputPinConfig(e)})).reduce((function(t,e){var n,o=e[0],r=e[1];return i(i({},t),((n={})[o]=r.value,n))}),{});return s.render(e.customViewCode,{inputs:n,isDefined:c.isDefined}).trim()}catch(o){return console.error("Error with custom view",o),"Error in custom view ["+e.id+"]"}return e.id};e.calcPartWidth=function(t,n){var i=u.okeys(n.inputs).length*l.MIN_WIDTH_PER_PIN,o=e.calcPartContent(t,n),r=l.PIECE_CHAR_WIDTH;return d.clamp(o.length*r+2*l.PIECE_HORIZONTAL_PADDING,i,l.MAX_INSTANCE_WIDTH)};e.calcInstancePosition=function(t,e,n){var i=p.getInstanceDomId(e,t),o=document.getElementById(i);if(o){var r=o.getBoundingClientRect(),a=r.x,u=r.y,s=r.width,c=u+r.height/2;return{x:a+s/2-n.x,y:c-n.y}}return console.warn("Cannot find element to draw connection to",i),{x:99999,y:99999}}},58651:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},o=this&&this.__spreadArray||function(t,e){for(var n=0,i=e.length,o=t.length;n<i;n++,o++)t[o]=e[n];return t},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.LayoutDebugger=e.LayoutDebuggerItem=e.PosDebugger=void 0;var a=n(27378),u=n(24246),s=n(18265),c=r(n(27378)),l=n(96149),d=function(t){var e=t.pos;return u.jsxs("span",{children:[e.x.toFixed(1),", ",e.y.toFixed(1)]},void 0)};e.PosDebugger=function(t){return u.jsx("span",i({className:"pos-debugger"},{children:u.jsx(d,{pos:t.pos},void 0)}),void 0)};e.LayoutDebuggerItem=function(t){var n=t.pos,o=t.viewPort,r=t.size,a=t.color,s=o.zoom,c=n.x*s-o.pos.x*s,l=n.y*s-o.pos.y*s,d={transform:"translate("+(c-n.x)+"px, "+(l-n.y)+"px)"},p={transform:"scale("+o.zoom+")"},f={transform:"translate("+n.x+"px, "+n.y+"px)"},v={width:r.width+"px",height:r.height+"px",backgroundColor:a};return u.jsx("div",i({className:"layout-debugger",style:d},{children:u.jsxs("span",i({className:"drag-sim",style:f},{children:[u.jsx(e.PosDebugger,{pos:n},void 0),u.jsx("div",i({className:"layout-debugger-zoom-wrapper",style:p},{children:u.jsx("div",{className:"layout-debugger-inner",style:v},void 0)}),void 0)]}),void 0)}),void 0)};var p=function(){try{return"true"===localStorage.getItem("pos-debugger")}catch(t){return!1}}();e.LayoutDebugger=function(t){var n=t.extraDebug,r=t.vp,f=t.part,v=t.mousePos;if(!p)return null;var m=n.map((function(t,n){return a.createElement(e.LayoutDebuggerItem,i({},t,{key:n}))})),y=o(o(o([],f.instances.map((function(t){return t.pos}))),s.values(f.inputsPosition)),s.values(f.outputsPosition)).map((function(t){return u.jsx(e.LayoutDebuggerItem,{pos:t,viewPort:r,size:{width:0,height:0},color:"red"},void 0)})),h=l.logicalPosToRenderedPos(v,r),g=u.jsxs("div",i({className:"viewport-data"},{children:[u.jsxs("div",{children:["Pos: ",u.jsx(d,{pos:r.pos},void 0)]},void 0),u.jsxs("div",{children:["Zoom: ",r.zoom.toFixed(2)," "]},void 0),u.jsxs("div",{children:["Mouse (logical): ",u.jsx(d,{pos:v},void 0)]},void 0),u.jsxs("div",{children:["Rendered (rendered): ",u.jsx(d,{pos:h},void 0)]},void 0)]}),void 0);return u.jsxs(c.default.Fragment,{children:[g,m,y]},void 0)}},65883:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),o(n(58651),e)},56111:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.orderGroupedPart=e.layoutToInstances=void 0;var r=n(12465),a=n(18265),u=n(7979),s=o(n(63300)),c=n(98936),l=n(99743),d=n(42957);e.layoutToInstances=function(t,e){return s.default(e,(function(e){a.entries(t.nodes).forEach((function(t){var n=t[0],i=t[1];if(n.startsWith("ins-")){var o=n.replace("ins-",""),r=e.instances.find((function(t){return t.id===o}));r?r.pos=i.p:console.warn("WAT")}if(n.startsWith("part-input-")){var a=n.replace("part-input-","");e.inputsPosition[a]=i.p}if(n.startsWith("part-output-")){a=n.replace("part-output-","");e.outputsPosition[a]=i.p}}))}))};e.orderGroupedPart=function(t,n,o,s){var p=t.instances,f=t.connections,v=p.reduce((function(t,e){var o,u=l.size(d.calcPartWidth(e,a.getPartDef(e,n)),r.PART_HEIGHT);return i(i({},t),((o={})["ins-"+e.id]={p:e.pos,s:u},o))}),{}),m=a.okeys(t.inputsPosition).reduce((function(e,n){var o,a=t.inputsPosition[n],u=l.size(c.calcPartIoWidth(n),r.PART_HEIGHT);return i(i({},e),((o={})["part-input-"+n]={p:a,s:u},o))}),{}),y=a.okeys(t.outputsPosition).reduce((function(e,n){var o,a=t.outputsPosition[n],u=l.size(c.calcPartIoWidth(n),r.PART_HEIGHT);return i(i({},e),((o={})["part-output-"+n]={p:a,s:u},o))}),{}),h=i(i(i({},v),m),y),g=f.map((function(t){return[a.isExternalConnectionNode(t.from)?"part-input-"+t.from.pinId:"ins-"+t.from.insId,a.isExternalConnectionNode(t.to)?"part-output-"+t.to.pinId:"ins-"+t.to.insId]})),I=u.orderLayout({nodes:h,edges:g},o,(function(n,i){s&&s(e.layoutToInstances(n,t),i)}));return e.layoutToInstances(I,t)}},7979:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.orderLayout=void 0;var o=n(99743),r=400,a=function(t){return t.reduce((function(t,e){var n,r=o.vSub(e.p,o.vec(e.s.width/2,e.s.height/2));return i(i({},t),((n={})[e.id]={p:r,s:e.s},n))}),{})};e.orderLayout=function(t,e,n){for(var u=t.nodes,s=t.edges,c=Object.entries(u).map((function(t){var e=t[0],n=t[1];return{id:e,p:o.vAdd(n.p,o.vec(n.s.width/2,n.s.height/2)),f:o.vec(0,0),v:o.vec(0,0),m:1,s:n.s}})),l=0,d=function(){for(var t=c,e=0;e<t.length;e++)for(var u=e+1;u<t.length;u++)if(e!==u){var d=t[e],p=t[u],f=o.vSub(d.p,p.p),v=Math.abs(f.x),m=Math.abs(f.y),y=d.id.startsWith("part-input"),h=d.id.startsWith("part-output"),g=p.id.startsWith("part-input"),I=p.id.startsWith("part-output");if(v<r&&m<80){var b=1e3*(r-v);d.f=o.vAdd(d.f,o.vec(.5*b,0)),p.f=o.vAdd(p.f,o.vec(-.5*b,0))}if(m<50){var P=100*f.y;d.f=o.vAdd(d.f,o.vec(0,.5*P)),p.f=o.vAdd(p.f,o.vec(0,-.5*P))}if(y&&I){var _=o.vSub(d.p,p.p).y;if(_<-500){var C=100*(r-_);d.f=o.vAdd(d.f,o.vec(0,-.5*C)),p.f=o.vAdd(p.f,o.vec(0,.5*C))}}else if(h&&g){var x=o.vSub(d.p,p.p).y;if(x<500){var E=100*(r-x);d.f=o.vAdd(d.f,o.vec(0,-.5*E)),p.f=o.vAdd(p.f,o.vec(0,.5*E))}}var j=o.vSub(d.p,o.vec(0,d.p.y)),w=o.vLen(j),O=o.vMul(o.vNorm(j),-50*w);d.f=o.vAdd(d.f,O)}s.forEach((function(e){var n=t.find((function(t){return t.id===e[0]})),i=t.find((function(t){return t.id===e[1]}));if(n&&i){var r=o.vec(0,-200),a=o.vSub(n.p,i.p),u=o.vSub(r,a),s=1e3*o.vLen(u),c=o.vMul(o.vNorm(u),.5*s),l=o.vMul(o.vNorm(u),-.5*s);n.f=o.vAdd(n.f,c),i.f=o.vAdd(i.f,l)}else console.warn("weoops",e[0],e[1])})),t=(t=t.map((function(t){return o.itrPhysics(15,t)}))).map((function(t){var e=o.vMul(t.v,.5),n=o.vLen(e)>100?o.vMul(o.vNorm(e),100):e;return i(i({},t),{v:n})})),c=t,n&&n({nodes:a(t),edges:s},l),l++};l<e&&(l<2||o.totalEnergy(c)>.01);)d();return{nodes:a(c),edges:s,itrs:l,timeout:l>=e,total:o.totalEnergy(c)}}},8417:function(t,e){"use strict";var n=this&&this.__spreadArray||function(t,e){for(var n=0,i=e.length,o=t.length;n<i;n++,o++)t[o]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.calculateInstancesWithSingleConstPinsMap=e.getLeafInstancesOfSelection=void 0;e.getLeafInstancesOfSelection=function(t,e,i){return t.reduce((function(t,o){var r=i.filter((function(t){return t.to.insId===o.id})).map((function(t){return e.find((function(e){return e.id===t.from.insId}))})).filter((function(t){return!!t}));return n(n([],t),r)}),[]).filter((function(e){return 1===i.filter((function(t){return t.from.insId===e.id||t.to.insId===e.id})).length&&!t.includes(e)}))};e.calculateInstancesWithSingleConstPinsMap=function(t,e){return t.connections.filter((function(t){return e.has(t.from.insId)})).reduce((function(t,n){var i=e.get(n.from.insId),o=n.to.insId,r=t.get(o)||new Map;return r.set(n.to.pinId,{val:i,insId:n.from.insId}),t.set(o,r),t}),new Map)}},4974:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&o(e,t,n);return r(e,t),e},u=this&&this.__spreadArray||function(t,e){for(var n=0,i=e.length,o=t.length;n<i;n++,o++)t[o]=e[n];return t},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.PartIoView=void 0;var c=n(24246),l=a(n(27378)),d=n(18265),p=n(84320),f=n(92548),v=s(n(60042)),m=n(42272);e.PartIoView=l.memo((function(t){var e=t.viewPort,n=t.selected,o=t.pos,r=t.type,a=t.id,s=t.onDblClick,y=t.onRename,h=t.onDelete,g=t.onChangeInputMode,I=t.inputMode,b=t.onSelect,P=t.closest,_=l.useCallback((function(){h&&h(r,a)}),[r,a,h]),C=l.useCallback((function(){y&&y(r,a)}),[r,a,y]),x=l.useCallback((function(t){g&&g(a,t)}),[a,g]),E=l.useCallback((function(){return u(u([{text:"Current mode - "+I,onClick:d.noop},{text:"Make required",onClick:function(){return x("required")}},{text:"Make optional",onClick:function(){return x("optional")}},{text:"Make required-if-connected",onClick:function(){return x("required-if-connected")}}],t.onRename?[{text:"Rename",onClick:C}]:[]),t.onDelete?[{text:"Delete",onClick:_}]:[])}),[I,x,_,C,t.onDelete,t.onRename]),j=l.useCallback((function(e){s&&s(t.id,e)}),[s,t.id]),w=l.useCallback((function(){b(a,r)}),[a,r,b]),O=l.useCallback((function(){return c.jsx(m.Menu,{children:E().map((function(t){return c.jsx(m.MenuItem,i({},t),void 0)}))},void 0)}),[E]),T=l.useCallback((function(t){t.preventDefault(),t.stopPropagation();var e=O();m.ContextMenu.show(e,{left:t.clientX,top:t.clientY})}),[O]);return c.jsx(p.BasePartView,i({className:v.default("part-io-view",r),domId:f.getMainPinDomId(t.insId,a,r),pos:o,onDragEnd:function(n,o){var u=t.pos,s=(o.x-u.x)/e.zoom,c=(o.y-u.y)/e.zoom,l=u.x+s,d=u.y+c;t.onDragEnd(r,a,n,i(i({},o),{x:l,y:d}))},onDragStart:function(e,n){t.onDragStart(a,e,n)},onDragMove:function(n,o){var u=t.pos,s=(o.x-u.x)/e.zoom,c=(o.y-u.y)/e.zoom,l=u.x+s,d=u.y+c;t.onDragMove(r,a,n,i(i({},o),{x:l,y:d}))},viewPort:e},{children:c.jsx("div",i({className:v.default("part-io-view-inner",{closest:P,selected:n}),onClick:w,onDoubleClick:j,onContextMenu:T},{children:a}),void 0)}),void 0)}))},20712:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),o(n(4974),e)},98936:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.calcPartIoWidth=e.MIN_WIDTH_PER_PIN=e.PIECE_CHAR_WIDTH=e.PIECE_HORIZONTAL_PADDING=void 0,e.PIECE_HORIZONTAL_PADDING=15,e.PIECE_CHAR_WIDTH=9,e.MIN_WIDTH_PER_PIN=40;e.calcPartIoWidth=function(t){return Math.max(e.MIN_WIDTH_PER_PIN,t.length*e.PIECE_CHAR_WIDTH+2*e.PIECE_HORIZONTAL_PADDING)}},11901:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&o(e,t,n);return r(e,t),e},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.PinView=e.PIN_HEIGHT=void 0;var s=n(24246),c=a(n(27378)),l=u(n(60042)),d=n(42272),p=n(12901),f=n(27378),v=n(18265),m=n(18265),y=n(92548),h=n(75579),g=u(n(49040));e.PIN_HEIGHT=23;e.PinView=c.memo((function(t){var e=t.selected,n=t.type,o=t.connected,r=t.rotate,a=t.optional,u=t.isClosestToMouse,I=(t.dataType,t.id),b=t.onRequestHistory,P=function(t){switch(t){case v.TRIGGER_PIN_ID:return"Trigger";case m.ERROR_PIN_ID:return"Error";default:return t}}(I),_=f.useState(),C=_[0],x=_[1],E="input"===t.type&&p.isDefined(t.constValue)?t.constValue:void 0,j=r&&"input"===n,w=c.useRef(),O=c.useCallback((function(){clearInterval(w.current),b(I,n).then((function(t){x(t)})),w.current=setInterval((function(){b(I,n).then((function(t){x(t)}))}),500)}),[b,I,n]),T=c.useCallback((function(){clearInterval(w.current),x(void 0)}),[]);return s.jsxs("div",i({className:function(){if("input"===t.type){var i=t.isSticky,s=t.isPart,c=t.constValue;return l.default("pin",{sticky:i,selected:e,closest:u,optional:a,connected:o,rotate:r,"const-value":p.isDefined(c),"env-value":p.isDefined(c)&&v.isEnvValue(c),"is-part":s,minimized:t.minimized},n)}return l.default("pin",{selected:e,connected:o,closest:u,rotate:r,optional:a,minimized:t.minimized},n,r)}(),onContextMenu:function(e){e.preventDefault(),e.stopPropagation();var n=function(){var e=s.jsx(d.MenuItem,{onClick:function(){return t.onToggleLogged(t.insId,t.id,t.type)}},void 0),n=s.jsx(d.MenuItem,{onClick:function(){return t.onToggleBreakpoint(t.insId,t.id,t.type)}},void 0),i=s.jsx(d.MenuItem,{onClick:function(){return t.onInspect(t.insId,t.id,t.type)},text:"Inspect"},void 0);if("input"===t.type){var o=t.onConvertConstToEnv;return p.isDefined(E)?s.jsxs(d.Menu,{children:[s.jsx(d.MenuItem,{onClick:function(){return t.onDetachConstValue(t.id)},text:"Detach value"},void 0),s.jsx(d.MenuItem,{onClick:function(){return t.onCopyConstValue(t.id)},text:"Copy value"},void 0),p.isDefined(t.copiedConstValue)?s.jsx(d.MenuItem,{onClick:function(){return t.onPasteConstValue(t.id)},text:"Paste value"},void 0):null,o?s.jsx(d.MenuItem,{onClick:function(){return o(t.id)},text:"Convert to Env Var"},void 0):null]},void 0):s.jsxs(d.Menu,{children:[s.jsx(d.MenuItem,{onClick:function(){return t.onToggleSticky(t.id)},text:"Toggle sticky (square means sticky)"},void 0),e,n,i,p.isDefined(t.copiedConstValue)?s.jsx(d.MenuItem,{onClick:function(){return t.onPasteConstValue(t.id)},text:"Paste value"},void 0):null]},void 0)}return s.jsxs(d.Menu,{children:[e,n,i]},void 0)}();d.ContextMenu.show(n,{left:e.clientX,top:e.clientY})},"data-pin-id":I},{children:[s.jsx(g.default,{className:"insights-tooltip",html:!0,id:I+t.insId,getContent:[function(t){if(p.isDefined(E))return"<div>"+P+" ("+n+")<div>Const Value: <strong>"+h.valuePreview(E).substr(0,200)+"</strong></div></div>";if(!C)return"<div>Loading..</div>";var e=C.total,i=C.lastSamples,o=i.length>0?"<div>Last value: <strong>"+h.valuePreview(i[0].val).substr(0,200)+"</strong></div>":"";return"<div><div>"+P+" ("+n+") </div>\n    <strong>Activated "+e+" times this session</strong>\n    "+o},25]},void 0),s.jsxs("div",i({onMouseEnter:O,onMouseOut:T,"data-tip":"","data-html":!0,id:y.getPinDomId(t.parentInsId,t.insId,I,n),"data-for":I+t.insId,"data-place":j?"bottom":null,onDoubleClick:function(e){return t.onDoubleClick&&t.onDoubleClick(I,e)},className:"pin-inner",onClick:function(e){var i=t.onShiftClick,o=t.onClick,r=t.id;e.shiftKey&&i?i(r,e):o(r,n,e)}},{children:[p.isDefined(E)?s.jsxs(c.Fragment,{children:[P,": ",s.jsx("span",i({className:"value"},{children:p.toString(E)}),void 0)]},void 0):P,"input"===t.type&&t.isSticky?s.jsx("span",i({className:"suffix"},{children:"s"}),void 0):null,"input"===t.type&&t.queueSize?s.jsxs("span",i({className:"suffix"},{children:[t.queueSize," in Q"]}),void 0):null]}),void 0),s.jsx("div",{className:"wire"},void 0)]}),void 0)}))},33593:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&o(e,t,n);return r(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.QuickAddMenu=void 0;var u=n(24246),s=a(n(27378)),c=n(18265),l=n(42272),d=n(18185),p=n(10934),f=d.Select.ofType(),v=function(t){switch(t.type){case"part":return""+t.part.id;case"value":return"Add inline value or function";case"import":return"Import "+t.importablePart.part.id+" from "+t.importablePart.module}},m=function(t,e){var n=e.handleClick,i=e.modifiers,o=e.query;if(!i.matchesPredicate)return null;var r=v(t);return"value"===t.type?u.jsxs(s.Fragment,{children:[u.jsx(l.MenuDivider,{},void 0),u.jsx(l.MenuItem,{active:i.active,disabled:i.disabled,onClick:n,text:p.highlightText(r,o)},v(t))]},void 0):u.jsx(l.MenuItem,{active:i.active,disabled:i.disabled,onClick:n,text:p.highlightText(r,o)},v(t))},y=function(t,e,n,i){var o=v(e).toLocaleLowerCase(),r=t.toLowerCase();return i?o===r:o.includes(r)};e.QuickAddMenu=function(t){var e,n=t.resolvedFlow,o=t.onRequestImportables,r={left:t.pos.x,top:t.pos.y},a=s.useState(),d=a[0],p=a[1];s.useEffect((function(){o&&o("").then(p)}),[o]);var v=c.values(i(i({},n.dependencies),((e={})[n.main.id]=n.main,e))),h=v.map((function(t){return{type:"part",part:t}})),g=new Set(v.map((function(t){return t.id}))),I=d?d.filter((function(t){return!g.has(t.part.id)})).map((function(t){return{type:"import",importablePart:t}})):[],b=h.concat(I).concat({type:"value"});return u.jsx("div",i({className:"quick-add-menu",style:r},{children:u.jsx(f,{className:"quick-add-parts-select",items:b,itemPredicate:y,itemRenderer:m,inputProps:{className:"quick-add-input"},noResults:u.jsx(l.MenuItem,{disabled:!0,text:"No results."},void 0),onItemSelect:function(e){return t.onAdd(e)},popoverProps:{isOpen:!0,onClose:function(){return t.onClose()}}},void 0)}),void 0)}},35683:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),o(n(33593),e)},867:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createRuntimePlayer=void 0;var i=n(18265),o=n(77159),r=i.debugLogger("runtime-player");e.createRuntimePlayer=function(t){var e=0,n=[],i=!1,a=Date.now(),u=e,s=function s(){return requestAnimationFrame((function(){var c,l,d,p=Date.now();u=e,e+=p-a,a=p,c=u,l=e,d=n,n=[],d.length&&r("Playing "+d.length+" events from",c,l),d.forEach((function(e){r("Playing event",e),o.playEvent(t,e)})),i&&s()}))},c=function(){i=!1},l=function(){n=[],document.querySelectorAll("[data-runtime]").forEach((function(t){t.removeAttribute("data-runtime")})),document.querySelectorAll("[data-runtime-queue]").forEach((function(t){t.removeAttribute("data-runtime-queue")}))};return{stop:c,start:function(t){void 0===t&&(t=0),i=!0,e=t,a=Date.now(),s()},addEvents:function(t){n.push.apply(n,t),n.sort((function(t,e){return t.dt-e.dt}))},destroy:function(){c(),l()},clear:l,status:function(){return{running:i,currDt:e,lastDt:u,queue:n,last:a}}}}},77159:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.playEvent=e.cancelTimers=void 0;var i=n(18265),o=n(75579),r=n(92548),a=5e3,u=i.debugLogger("runtime-player:play-event"),s=function(t){return""+t.id};e.cancelTimers=new Map;e.playEvent=function(t,n){var c,l,d=s(n);switch(n.type){case o.RuntimeEventType.INPUT_CHANGE:case o.RuntimeEventType.OUTPUT_CHANGE:var p=n.id.split(".").reverse(),f=p[0],v=p[1],m=p[2],y=p.slice(3).reverse().join("."),h=r.getPinDomId(y,m,v,f),g=document.getElementById(h),I=m+"."+v,b=n.type===o.RuntimeEventType.OUTPUT_CHANGE?document.querySelectorAll('[data-from-id="'+I+'"]'):[];if(g){clearTimeout(e.cancelTimers.get(d)),g.removeAttribute("data-runtime"),b.forEach((function(t){t.removeAttribute("data-runtime")})),setTimeout((function(){g.setAttribute("data-runtime","active"),b.forEach((function(t){t.setAttribute("data-runtime","active")}))}),0);var P=setTimeout((function(){g.removeAttribute("data-runtime"),b.forEach((function(t){t.removeAttribute("data-runtime")})),e.cancelTimers.delete(d)}),a);e.cancelTimers.set(s(n),P)}else console.warn("No DOM element with Id ["+h+"] found to play event"),u("No DOM element with Id ["+h+"] found to play event",n);break;case o.RuntimeEventType.PROCESSING_CHANGE:var _=n.id.split(".").reverse(),C=(m=_[0],_.slice(1).reverse().join(".")),x=(h=r.getInstanceDomId(C,m),null===(c=document.getElementById(h))||void 0===c?void 0:c.parentElement);if(!x)return void u("No DOM element with Id ["+h+"] found to play event",n);if(!0===n.val)x.setAttribute("data-runtime","processing"),clearTimeout(e.cancelTimers.get(d));else{x.removeAttribute("data-runtime"),setTimeout((function(){x.setAttribute("data-runtime","done")}),0);P=setTimeout((function(){x.removeAttribute("data-runtime"),e.cancelTimers.delete(d)}),a);e.cancelTimers.set(d,P)}break;case o.RuntimeEventType.ERROR:var E=n.id.split(".").reverse(),j=(m=E[0],E.slice(1).reverse().join(".")),w=(h=r.getInstanceDomId(j,m),null===(l=document.getElementById(h))||void 0===l?void 0:l.parentElement);if(!w)return void u("No DOM element with Id ["+h+"] found to play event",n);clearTimeout(e.cancelTimers.get(d)),w.removeAttribute("data-runtime"),setTimeout((function(){w.setAttribute("data-runtime","error")}));P=setTimeout((function(){w.removeAttribute("data-runtime"),e.cancelTimers.delete(d)}),a);e.cancelTimers.set(d,P);break;case o.RuntimeEventType.INPUTS_STATE_CHANGE:i.entries(n.val).forEach((function(t){var e=t[0],i=t[1],o=n.id.split(".").reverse(),a=o[0],s=o.slice(1).reverse().join("."),c=r.getPinDomId(s,a,e,"input"),l=document.getElementById(c);l?i>0?l.setAttribute("data-runtime-queue",""+i):l.removeAttribute("data-runtime-queue"):u("No DOM element with Id ["+c+"] found to play event",n)}))}}},13521:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useDebounce=void 0;var i=n(27378);e.useDebounce=function(t,e){var n=i.useState(t),o=n[0],r=n[1];return i.useEffect((function(){var n=setTimeout((function(){r(t)}),e);return function(){clearTimeout(n)}}),[t,e]),[o,r]}},52395:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&o(e,t,n);return r(e,t),e},u=this&&this.__spreadArray||function(t,e){for(var n=0,i=e.length,o=t.length;n<i;n++,o++)t[o]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.handleChangePartInputType=e.handleIoPinRename=e.calcMoveViewPort=e.handleInstanceDrag=e.getInstancesInRect=e.isJsxValue=e.fitViewPortToPart=e.centerBoardPosOnTarget=e.renderedPosToLogicalPos=e.logicalPosToRenderedPos=e.getEffectivePartDimensions=e.calcPartsPositions=e.calcSelectionBoxArea=e.middlePos=e.calcCenter=e.animateViewPort=e.easeInOutNum=e.easeInOutPos=e.easeInOutQuad=e.center=e.distance=e.clamp=e.domToViewPort=e.roundNumber=e.createNewPartInstance=e.createNewInlinePartInstance=e.parseInputOutputTypes=e.parsePromptValue=e.getSelectionBoxRect=e.findClosestPin=e.toggleStickyPin=e.emptyList=e.emptyObj=void 0;var s=a(n(63300)),c=n(12465),l=n(18265),d=n(48199),p=n(12901),f=n(18265),v=n(42957),m=n(98936),y=n(99743),h=n(8417),g=n(83100);e.emptyObj={},e.emptyList=[];e.toggleStickyPin=function(t,e,n,o){return s.produce(t,(function(t){var o=t.instances,r=o.find((function(t){return t.id===e}));if(!r)throw new Error("blah");var a=r.inputConfig||{},u=a[n]||l.queueInputPinConfig();l.isStickyInputPinConfig(u)?a[n]=l.queueInputPinConfig():a[n]=l.stickyInputPinConfig(),t.instances=o.map((function(t){return t===r?i(i({},r),{inputConfig:a}):t}))}))};e.findClosestPin=function(t,e,n,i,o,r,a){var s=l.partInstance(t.id,t.id),c=f.okeys(t.inputs).map((function(e){return{id:e,type:"input",pos:d.calcMainInputPosition(t,i,e,r,"input",o,a),ins:s}})),p=f.okeys(t.outputs).map((function(e){return{id:e,type:"output",pos:d.calcMainOutputPosition(t,i,e,r,"output",o,a),ins:s}})),v=t.instances.reduce((function(n,i){var s=l.getPartDef(i,e),c=g.getVisibleInputs(i,s,t.connections),p=g.getVisibleOutputs(i,s,t.connections),f=c.map((function(t){return{ins:i,type:"input",pos:d.calcPinPosition(r,i.id,t,"input",o,a),id:t}})),v=p.map((function(t){return{ins:i,type:"output",pos:d.calcPinPosition(r,i.id,t,"output",o,a),id:t}}));return u(u(u([],n),f),v)}),[]),m=u(u(u([],c),v),p),y={dis:1e5,item:m[0]};return m.forEach((function(t){var e=t.pos.x-n.x,i=t.pos.y-n.y,o=Math.sqrt(e*e+i*i);o<y.dis&&(y.dis=o,y.item=t)})),y.item};e.getSelectionBoxRect=function(t,e){var n=Math.min(t.x,e.x),i=Math.min(t.y,e.y);return{x:n,y:i,w:Math.max(t.x,e.x)-n,h:Math.max(t.y,e.y)-i}};e.parsePromptValue=function(t){if(null!==t){var e=parseInt(t,10),n=t;return e.toString()!=t||isNaN(e)||(n=e),n}};e.parseInputOutputTypes=function(t){var e=t.match(/part\((.+)\|(.+)\)/)||[],n=e[1],i=e[2],o=f.entries(JSON.parse(n)).map((function(t){var e=t[0],n={type:t[1],optional:f.isOptionalType(e)};return[e.replace(/\?$/,""),n]})),r=f.entries(JSON.parse(i)).map((function(t){var e=t[0],n={type:t[1],optional:f.isOptionalType(e)};return[e.replace(/\?$/,""),n]}));return{inputs:f.fromEntries(o),outputs:f.fromEntries(r)}};e.createNewInlinePartInstance=function(t,e,n){void 0===e&&(e=-1*c.PART_HEIGHT*1.5);var o=l.inlinePartInstance(t.id+"-"+f.randomInt(999),t,{},{x:0,y:0}),r=v.calcPartWidth(o,t),a={x:n.x-r/2,y:n.y+e};return i(i({},o),{pos:a})};e.createNewPartInstance=function(t,e,n,o){void 0===e&&(e=-1*c.PART_HEIGHT*1.5);var r="string"==typeof t?l.getPartDef(t,o):t;if(!r)throw new Error(t+" part not found in repo");var a=l.partInstance(r.id+"-"+f.randomInt(999),r.id,{},{x:0,y:0}),u=v.calcPartWidth(a,r),s={x:n.x-u/2,y:n.y+e};return i(i({},a),{pos:s})};e.roundNumber=function(t){return Math.round(100*t)/100};e.domToViewPort=function(t,n,i){return{x:e.roundNumber(n.pos.x+t.x/n.zoom/i.zoom),y:e.roundNumber(n.pos.y+t.y/n.zoom/i.zoom)}};e.clamp=function(t,e,n){return Math.max(t,Math.min(e,n))};e.distance=function(t,e){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)};e.center=function(t,e,n){var i=n.zoom,o=t.x+t.w/2,r=t.y+t.h/2;return{x:o-e.w/i/2,y:r-e.h/i/2}};e.easeInOutQuad=function(t){return t<.5?2*t*t:(4-2*t)*t-1};e.easeInOutPos=function(t,n,i,o,r){var a=e.clamp(0,1,(r-i)/o),u=e.easeInOutQuad(a),s=n.x-t.x,c=n.y-t.y;return{x:t.x+s*u,y:t.y+c*u}};e.easeInOutNum=function(t,n,i,o,r){var a=e.clamp(0,1,(r-i)/o);return t+(n-t)*e.easeInOutQuad(a)};e.animateViewPort=function(t,n,i,o){var r=e.distance(t.pos,n.pos),a=Date.now(),u=Math.sqrt(r)*i;if(0!==r){requestAnimationFrame((function i(){var r=Date.now(),s=e.easeInOutPos(t.pos,n.pos,a,u,r),c=e.easeInOutNum(t.zoom,n.zoom,a,u,r);r-a<u?(o({pos:s,zoom:c}),requestAnimationFrame(i)):o({pos:s,zoom:c})}))}else o(t)};e.calcCenter=function(t){var e=t.w,n=t.h;return{x:t.x+e/2,y:t.y+n/2}};e.middlePos=function(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}};e.calcSelectionBoxArea=function(t){var n=e.getSelectionBoxRect(t.from,t.to);return n.h*n.w};var I=function(t,n,o,r){return{left:o.x,right:o.x+t,top:o.y,bottom:o.y+n,tag:r,center:e.calcCenter(i({w:t,h:n},o))}};e.calcPartsPositions=function(t,e){var n=t.instances.map((function(t){var n=v.calcPartWidth(t,l.getPartDef(t,e)),i=c.PART_HEIGHT;return I(n,i,t.pos,t.id)})),i=f.okeys(t.inputs).map((function(e){var n=m.calcPartIoWidth(e),i=c.PART_HEIGHT,o=t.inputsPosition[e]||{x:0,y:0};return I(n,i,o,"input_"+e)})),o=f.okeys(t.outputs).map((function(e){var n=m.calcPartIoWidth(e),i=c.PART_HEIGHT,o=t.outputsPosition[e]||{x:0,y:0};return I(n,i,o,"output"+e)}));return u(u(u([],n),i),o)};e.getEffectivePartDimensions=function(t,n){var o=e.calcPartsPositions(t,n),r=o[0]||{left:0,right:0,top:0,bottom:0},a=o.reduce((function(t,e){return e.left<t?e.left:t}),r.left),u=o.reduce((function(t,e){return e.right>t?e.right:t}),r.right),s=o.reduce((function(t,e){return e.top<t?e.top:t}),r.top),c=u-a,l=o.reduce((function(t,e){return e.bottom>t?e.bottom:t}),r.bottom)-s,d={x:a,y:s};return{size:{width:c,height:l},pos:d,center:e.calcCenter(i({w:c,h:l},d))}};e.logicalPosToRenderedPos=function(t,e){var n=y.vSub(t,e.pos);return y.vMul(n,e.zoom)};e.renderedPosToLogicalPos=function(t,e){var n=y.vDiv(t,e.zoom);return y.vAdd(e.pos,n)};e.centerBoardPosOnTarget=function(t,n,o,r){var a=e.logicalPosToRenderedPos(t,r),u=e.renderedPosToLogicalPos(a,i(i({},r),{zoom:o})),s=Math.max(t.x,u.x)-Math.min(t.x,u.x),c=Math.max(t.y,u.y)-Math.min(t.y,u.y);return{x:o>r.zoom?r.pos.x+s:r.pos.x-s,y:o>r.zoom?r.pos.y+c:r.pos.y-c}};e.fitViewPortToPart=function(t,n,i){var o=e.getEffectivePartDimensions(t,n),r=o.size,a=o.center,u=r.width+0,s=r.height+0,c=i.width/u,l=i.height/s,d=Math.min(c,l)/1.15,p=e.clamp(.3,1.2,d);return{zoom:p,pos:{x:a.x-i.width/2/p,y:a.y-i.height/2/p}}};e.isJsxValue=function(t){var e=function(t){return f.isDefined(t.ref)&&f.isDefined(t.type)&&f.isDefined(t.props)};try{var n=JSON.parse(t);return e(n)||Array.isArray(n)&&e(n[0])}catch(i){return!1}};e.getInstancesInRect=function(t,n,o,r,a,u,s){var d=t.from,f=t.to,m=e.getSelectionBoxRect(d,f);return a.filter((function(t){var e=t.pos,r=v.calcPartWidth(t,l.getPartDef(t,n))*o.zoom*s.zoom,a=i(i({},e),{w:r,h:c.PART_HEIGHT*o.zoom*s.zoom});return console.log(t.id,a,"main",m),p.intersectRect(m,a)||p.intersectRect(a,m)})).map((function(t){return t.id}))};e.handleInstanceDrag=function(t,e,n,i,o,r){i.preventDefault(),i.stopPropagation();var a,c=y.vSub(n,e.pos),l=s.produce(t,(function(t){var s=t.instances.find((function(t){return t.id===e.id}));if(!s)throw new Error("impossible state dragging instance that does not exist");!i.shiftKey&&r&&(a=[r]);var l=t.instances.filter((function(t){return o.includes(t.id)&&t!==s})),d=u([s],l),p=h.getLeafInstancesOfSelection(d,t.instances,t.connections);u(u([],l),p).forEach((function(t){t.pos=y.vAdd(t.pos,c)})),s.pos=n,!i.shiftKey&&r&&(a=[r])}));return{newValue:l,newSelected:a}};e.calcMoveViewPort=function(t,e,n,i){var o=t.pageX,r=t.pageY,a=e.x-o,u=e.y-r,c=n.x,l=n.y;return s.produce(i,(function(t){t.pos.x=c+3*a/t.zoom,t.pos.y=l+3*u/t.zoom}))};e.handleIoPinRename=function(t,e,n,o){return s.produce(t,(function(t){"input"===e?(t.inputs[o]=t.inputs[n],t.inputsPosition[o]=t.inputsPosition[n],delete t.inputs[n],t.connections=t.connections.map((function(t){return l.isExternalConnectionNode(t.from)&&t.from.pinId===n?i(i({},t),{from:i(i({},t.from),{pinId:o})}):t}))):(t.outputs[o]=t.outputs[n],t.outputsPosition[o]=t.outputsPosition[n],t.connections=t.connections.map((function(t){return l.isExternalConnectionNode(t.to)&&t.to.pinId===n?i(i({},t),{to:i(i({},t.to),{pinId:o})}):t})),t.completionOutputs=(t.completionOutputs||[]).map((function(t){return t.split("+").map((function(t){return t===n?o:n})).join("+")})),delete t.outputs[n])}))};e.handleChangePartInputType=function(t,e,n){return s.produce(t,(function(t){var i=t.inputs[e];if(!i)throw new Error("Wat");i.mode=n}))}},96149:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),o(n(90412),e),o(n(12901),e),o(n(77437),e),o(n(40232),e),o(n(99457),e),o(n(51424),e),o(n(23489),e),o(n(13521),e),o(n(10934),e),o(n(4824),e),o(n(14648),e),o(n(26013),e),o(n(867),e),o(n(11897),e),o(n(99743),e),o(n(57779),e),o(n(52395),e),o(n(12887),e)},60614:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.BrowserOnlyReactJson=void 0;var o=n(24246);e.BrowserOnlyReactJson=function(t){if("undefined"==typeof window)return null;var e=n(51366).default;return o.jsx(e,i({},t),void 0)}},26013:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnalyticsValueRenderer=void 0;var i=n(24246),o=n(18265),r=n(60614);e.AnalyticsValueRenderer=function(t){var e=t.val;try{var n=JSON.parse(e),a="object"==typeof n?n:{value:n},u=n&&[n.type,n.key,n.props,n.ref].every(o.isDefined),s=u?{jsxValue:n}:a;return i.jsx(r.BrowserOnlyReactJson,{src:s,name:!1,collapseStringsAfterLength:50,groupArraysAfterLength:5,collapsed:u},void 0)}catch(c){return i.jsx(r.BrowserOnlyReactJson,{src:{value:e},name:!1,collapseStringsAfterLength:50,groupArraysAfterLength:5},void 0)}}},78504:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},o=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{s(i.next(t))}catch(e){r(e)}}function u(t){try{s(i.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((i=i.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function u(r){return function(u){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(u){r=[6,u],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,u])}}},a=this&&this.__spreadArray||function(t,e){for(var n=0,i=e.length,o=t.length;n<i;n++,o++)t[o]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.createGroup=void 0;var u=n(18265),s=n(18265),c=n(52395),l=n(99743);e.createGroup=function(t,e,n,d){return o(void 0,void 0,void 0,(function(){var o,p,f,v,m,y,h,g,I,b,P,_,C,x,E,j,w,O,T,S,k,N,D,M;return r(this,(function(r){switch(r.label){case 0:if(0===t.length)throw new Error("cannot create group without instances");o=t.map((function(t){return t.id})),p=e.filter((function(t){var e=o.includes(t.from.insId),n=o.includes(t.to.insId);return!e&&n})).filter((function(t,e,n){return n.findIndex((function(e){return s.connectionNodeEquals(e.to,t.to)}))===e})),f=e.filter((function(t){var e=o.includes(t.from.insId),n=o.includes(t.to.insId);return e&&!n})).filter((function(t,e,n){return n.findIndex((function(e){return s.connectionNodeEquals(e.from,t.from)}))===e})),v={},m={},y={},h={},g=[],I={},b=0,P=p,r.label=1;case 1:return b<P.length?(w=P[b],O=w.to.insId+"."+w.to.pinId,T=w.from.insId+"."+w.from.pinId,S=w.to.pinId,y[T]?(g.push({from:s.externalConnectionNode(y[T]),to:s.connectionNode(w.to.insId,w.to.pinId)}),[3,5]):I[S]?[4,d("Name this input ("+S+" of "+w.to.insId+") is already taken:")]:[3,3]):[3,6];case 2:return C=r.sent()||"i"+l.rnd(),[3,4];case 3:C=S,r.label=4;case 4:_=C,v[O]=_,y[T]=_,g.push({from:s.externalConnectionNode(_),to:s.connectionNode(w.to.insId,w.to.pinId)}),I[_]=s.partInput("any"),r.label=5;case 5:return b++,[3,1];case 6:x={},E=0,j=f,r.label=7;case 7:return E<j.length?(w=j[E],O=w.to.insId+"."+w.to.pinId,T=w.from.insId+"."+w.from.pinId,S=w.from.pinId,h[O]?(g.push({from:s.connectionNode(w.from.insId,w.from.pinId),to:s.externalConnectionNode(h[O])}),[3,11]):x[S]?[4,d("Name this output ("+S+" of "+w.from.insId+" is already taken:")]:[3,9]):[3,12];case 8:return N=r.sent()||"i"+l.rnd(),[3,10];case 9:N=S,r.label=10;case 10:k=N,m[T]=k,h[O]=k,g.push({from:s.connectionNode(w.from.insId,w.from.pinId),to:s.externalConnectionNode(k)}),x[k]=u.partOutput("any"),r.label=11;case 11:return E++,[3,7];case 12:return t.reduce((function(t,e){return c.middlePos(e.pos,t)}),t[0].pos),D=e.filter((function(t){return o.includes(t.from.insId)&&o.includes(t.to.insId)})),M={id:n,inputs:I,outputs:x,instances:t,inputsPosition:u.okeys(I).reduce((function(t,e,n){var o;return i(i({},t),((o={})[e]={x:0+100*n,y:0},o))}),{}),outputsPosition:u.okeys(x).reduce((function(t,e,n){var o;return i(i({},t),((o={})[e]={x:0+100*n,y:400},o))}),{}),connections:a(a([],D),g),completionOutputs:u.okeys(x)},[2,{groupedPart:M,renamedInputs:v,renamedOutputs:m}]}}))}))}},10934:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.highlightText=void 0;var i=n(24246);function o(t){return t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}e.highlightText=function(t,e){var n=0,r=e.split(/\s+/).filter((function(t){return t.length>0})).map(o);if(0===r.length)return[t];for(var a=new RegExp(r.join("|"),"gi"),u=[];;){var s=a.exec(t);if(!s)break;var c=s[0].length,l=t.slice(n,a.lastIndex-c);l.length>0&&u.push(l),n=a.lastIndex,u.push(i.jsx("strong",{children:s[0]},n))}var d=t.slice(n);return d.length>0&&u.push(d),u}},99457:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Loader=void 0;var o=n(24246),r=i(n(44271));e.Loader=function(){return o.jsx(r.default,{type:"ball-clip-rotate",active:!0},void 0)}},12887:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.logger=void 0;var i=n(18265);e.logger=i.debugLogger("editor")},14264:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.preloadMonaco=void 0;var i=n(77324),o=n(12887),r=!1;e.preloadMonaco=function(){r||i.loader.init().then((function(){o.logger("monaco preloaded"),r=!0}))}},4824:function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.appHotkeysConfig=e.hotkey=e.EditorHotkeyCmd=e.AppHotkeyCmd=void 0,function(t){t.SAVE_PART="save-part",t.NEW_PROJECT="new-project",t.SAVE_PROJECT="save-project",t.TOGGLE_SIDE="toggle-side",t.RUN="run",t.UNDO="undo"}(n=e.AppHotkeyCmd||(e.AppHotkeyCmd={})),function(t){t.SHOW_OMNIBAR="show-omnibar",t.CLEAR_SELECTION="clear-selection",t.DELETE_COMP="delete-comp",t.DUPLICATE_COMP="duplicate-comp",t.GROUP="group",t.SELECT_ALL="select-all",t.SELECT_CLOSEST="select-closest"}(e.EditorHotkeyCmd||(e.EditorHotkeyCmd={}));e.hotkey=function(t,e,n,i,o){return{combo:t,label:e,cmd:n,global:i,preventDefault:o}},e.appHotkeysConfig=[e.hotkey("shift+p","Save part",n.SAVE_PART,!0,!0),e.hotkey("shift+t","New project",n.NEW_PROJECT,!0,!0),e.hotkey("cmd+shift+s","Toggle side",n.TOGGLE_SIDE,!0,!0),e.hotkey("cmd+s","Toggle side",n.SAVE_PROJECT,!0,!0),e.hotkey("shift+r","Run",n.RUN,!0,!0),e.hotkey("cmd+z","Undo",n.UNDO,!0,!0)]},14648:function(t,e,n){"use strict";var i=this&&this.__spreadArray||function(t,e){for(var n=0,i=e.length,o=t.length;n<i;n++,o++)t[o]=e[n];return t},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.useHotkeys=void 0;var r=o(n(34618)),a=n(27378);e.useHotkeys=function(t,e,n,o,u){void 0===o&&(o=[]),void 0===u&&(u={});var s=a.useCallback((function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];n&&!n.current||e.apply(void 0,t)}),i(i([],o),[e]));a.useEffect((function(){return r.default(t,u,s),function(){return r.default.unbind(t,s)}}),[t,s,u])}},11897:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.safeSessionStorage=e.safeLocalstorage=void 0,e.safeLocalstorage={getItem:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return localStorage.getItem.apply(localStorage,t)}catch(n){return null}},setItem:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return localStorage.setItem.apply(localStorage,t)}catch(n){return null}}},e.safeSessionStorage={getItem:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return sessionStorage.getItem.apply(sessionStorage,t)}catch(n){return null}},setItem:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return sessionStorage.setItem.apply(sessionStorage,t)}catch(n){return null}}}},49040:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.CustomReactTooltip=void 0;var r=n(24246),a=n(27378),u=o(n(31542)),s=o(n(87661));function c(t){var e=t.children,n=t.domNode;return u.default.createPortal(e,n)}e.CustomReactTooltip=function(t){var e=a.useRef();return a.useEffect((function(){e.current=document.createElement("div"),document.body.appendChild(e.current)}),[]),e.current?r.jsx(c,i({domNode:e.current},{children:r.jsx(s.default,i({},t),void 0)}),void 0):null},e.default=e.CustomReactTooltip},77437:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.useLocalStorage=e.useResizePref=e.userPreferences=e.useUserPref=void 0;var a,u=r(n(27378)),s=n(12901),c=n(11897);e.useUserPref=function(t,n){var i=u.useState((function(){var i=e.userPreferences.getItem(t);return s.isDefined(i)?i:n})),o=i[0],r=i[1];u.useEffect((function(){var i=e.userPreferences.getItem(t),o=s.isDefined(i)?i:n;r(o)}),[t]);return[o,function(n){e.userPreferences.setItem(t,n),console.log("Saved",t,n),r(n)}]},e.userPreferences=(a=function(t){return"up."+t},{getItem:function(t){var e=c.safeLocalstorage.getItem(a(t))||"",n=c.safeSessionStorage.getItem(a(t))||"";try{return JSON.parse(n||e).value}catch(i){return}},setItem:function(t,e,n){void 0===n&&(n=!1);var i=n?sessionStorage:c.safeLocalstorage;try{var o=JSON.stringify({value:e});return i.setItem(a(t),o),!0}catch(r){return console.error("Error saving user preference",r),!1}}});e.useResizePref=function(t,n){var i="resize."+t;return e.useUserPref(i,n)};var l=function(t){var e=c.safeLocalstorage.getItem(t);if(!e)return null;try{return JSON.parse(e).value}catch(n){return null}};e.useLocalStorage=function(t,e){var n=u.useState(l(t)||e),i=n[0],o=n[1],r=u.useCallback((function(e){c.safeLocalstorage.setItem(t,JSON.stringify({value:e})),o(e)}),[t]);return u.useEffect((function(){l(t)||c.safeLocalstorage.setItem(t,JSON.stringify({value:e}))}),[t,e,r]),[i,r]}},99743:function(t,e){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.totalEnergy=e.itrPhysics=e.hookes=e.coulombs=e.vToStr=e.vNorm=e.vLen=e.vSub=e.vAdd=e.vDiv=e.vMul=e.vZero=e.rnd=e.vec=e.size=void 0;e.size=function(t,e){return{width:t,height:e}};e.vec=function(t,e){return{x:t,y:e}};e.rnd=function(t,e){return void 0===t&&(t=100),void 0===e&&(e=0),Math.floor(Math.random()*(t-e))+e},e.vZero={x:0,y:0};e.vMul=function(t,e){return{x:t.x*e,y:t.y*e}};e.vDiv=function(t,n){var i=t.x,o=t.y;return e.vMul({x:i,y:o},1/n)};e.vAdd=function(t,e){return{x:t.x+e.x,y:t.y+e.y}};e.vSub=function(t,n){return e.vAdd(t,e.vMul(n,-1))};e.vLen=function(t){var e=t.x,n=t.y;return Math.sqrt(e*e+n*n)};e.vNorm=function(t){return e.vDiv(t,e.vLen(t)||1)};e.vToStr=function(t){var e=t.x,n=t.y;return e.toFixed(1)+","+n.toFixed(1)};e.coulombs=function(t,n,i){var o=e.vLen(e.vSub(t.p,n.p));if(0===o){var r=e.vec(2*Math.random()-1,2*Math.random()-1),a=t.m*n.m/Math.pow(10,2);return e.vMul(r,a*i)}r=e.vNorm(e.vSub(n.p,t.p)),a=t.m*n.m/Math.pow(o+.1,2);return e.vMul(r,a*i)};e.hookes=function(t,n,i,o,r){var a=e.vLen(e.vSub(t.p,n.p)),u=e.vNorm(e.vSub(t.p,n.p)),s=0;return a<i?s=i-a:a>o&&(s=o-a),e.vMul(u,r*s)};e.itrPhysics=function(t,i){var o=i.p,r=i.v,a=i.f,u=i.m,s=e.vDiv(a,u),c=t/1e3,l=e.vAdd(e.vMul(s,c),r),d=e.vAdd(e.vMul(l,c),o);return n(n({},i),{p:d,v:l,f:e.vec(0,0)})};e.totalEnergy=function(t){return t.reduce((function(t,n){var i=e.vLen(n.v);return t+.5*n.m*i*i}),0)}},40232:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.updateToast=e.toastMsg=e.AppToaster=void 0;var i=n(42272);e.AppToaster=function(){try{return i.Toaster.create({className:"app-toaster",position:i.Position.BOTTOM_RIGHT})}catch(t){return{}}}();e.toastMsg=function(t,n,i){return e.AppToaster.show({message:t,intent:n,timeout:i})};e.updateToast=function(t,n,i){return e.AppToaster.show({message:n,intent:i},t)}},12901:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.preventDefaultAnd=e.isLocal=e.fullTime=e.timeAgoFromDt=e.timeAgo=e.toString=e.intersectRect=e.isDefined=e.set=e.createOmap=e.toOmap=e.values=e.keys=e.entries=void 0;var r=n(52395),a=n(18265),u=o(n(61320));e.entries=function(t){return Object.keys(t).map((function(e){return[e,t[e]]}))};e.keys=function(t){return Object.keys(t)};e.values=function(t){return Object.keys(t).map((function(e){return t[e]}))};e.toOmap=function(t){return Array.from(t.entries()).reduce((function(t,e){var n,o=e[0],r=e[1];return i(i({},t),((n={})[o]=r,n))}),{})};e.createOmap=function(t){return void 0===t&&(t=[]),t.reduce((function(t,e){var n;return i(i({},t),((n={})[e[0]]=e[1],n))}),{})};e.set=function(t,e,n){t[e]=n};e.isDefined=function(t){return void 0!==t};e.intersectRect=function(t,e){var n=t.x+t.w,i=e.x+e.w;return!(e.x>n||i<t.x||e.y>t.y+t.h||e.y+e.h<t.y)};e.toString=function(t){var e=typeof t;if(""===t)return"(empty string)";if(r.isJsxValue(t))return"JSX Value";if(a.isStaticValueGroupedPart(t))return"Embedded Part";if(a.isEnvValue(t))return a.getEnvKeyFromValue(t);if("object"===e)try{var n=JSON.stringify(t);return"{}"===n?"Empty object":n}catch(i){return"Object (cannot stringify)"}return""+t};e.timeAgo=function(t){return u.default(new Date(t)).fromNow()};e.timeAgoFromDt=function(t){return u.default(Date.now()-t).fromNow()};e.fullTime=function(t){return u.default(new Date(t)).toString()};e.isLocal=function(){return location.href.includes(":300")};e.preventDefaultAnd=function(t){return function(e){e.preventDefault(),t(e)}}},17229:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.createEditorClient=void 0;var o=n(18265),r=n(14206),a=n(50208),u=n(19389),s=n(63726),c=o.debugLogger("runtime-editor-client");e.createEditorClient=function(t,e){var n=new URL(t),o=a.default(n.origin,{path:("/"===n.pathname?"":n.pathname)+"/socket.io/editor"});return o.emit("join-room-editor",e),{emitChange:function(t){o.emit(u.EventType.CHANGE_EVENT_NAME,t)},emitBreakpointsChange:function(t){o.emit(u.EventType.UPDATE_BREAKPOINTS,t)},onInputValueChange:function(t){return o.on(u.EventType.INPUT_VALUE_CHANGE,t),function(){return o.off(u.EventType.INPUT_VALUE_CHANGE,t)}},interceptInput:function(t){o.emit(u.EventType.INPUT_VALUE_OVERRIDE,t)},onOutputValueChange:function(t){return o.on(u.EventType.OUTPUT_VALUE_CHANGE,t),function(){return o.off(u.EventType.OUTPUT_VALUE_CHANGE,t)}},interceptOutput:function(t){o.emit(u.EventType.OUTPUT_VALUE_OVERRIDE,t)},onRuntimeReady:function(t){return o.on(u.EventType.RUNTIME_READY,t),function(){return o.off(u.EventType.RUNTIME_READY,t)}},onChangeAwk:function(t){return o.on(u.EventType.CHANGE_AWK,t),function(){return o.off(u.EventType.CHANGE_AWK,t)}},onChangeError:function(t){return o.on(u.EventType.CHANGE_ERROR,t),function(){return o.off(u.EventType.CHANGE_ERROR,t)}},onIsAlive:function(t){return o.on(u.EventType.IS_ALIVE,t),function(){return o.off(u.EventType.IS_ALIVE,t)}},emitInputValue:function(t,e){c("Emitting push input value to "+t+" %o",e),o.emit(u.EventType.PUSH_INPUT_VALUE,{pinId:t,value:e})},destroy:function(){o.disconnect(),u.enumToArray(u.EventType).forEach((function(t){return o.off(t)}))},onDisconnect:function(t){return o.on("disconnect",t),function(){return o.off("disconnect",t)}},debugInfo:function(){return"Remote debugger for "+t},onProcessingChange:function(t){return o.on(u.EventType.PROCESSING_CHANGE,t),function(){return o.off(u.EventType.PROCESSING_CHANGE,t)}},onInputsStateChange:function(t){return o.on(u.EventType.INPUTS_STATE_CHANGE,t),function(){return o.off(u.EventType.INPUTS_STATE_CHANGE,t)}},onPartError:function(t){return o.on(u.EventType.PART_ERROR,(function(e){var n=s.deserializeError(e.error);t(i(i({},e),{error:n}))})),function(){return o.off(u.EventType.PART_ERROR,t)}},onBatchedEvents:function(t){return o.on(u.EventType.EVENTS_BATCH,t),function(){return o.off(u.EventType.EVENTS_BATCH,t)}},requestState:function(){return r.default.get(t+"/state").then((function(t){return t.data.state}))},getHistory:function(e){return r.default.get(t+"/history",{params:{id:e.id,types:e.types,limit:e.limit}}).then((function(t){return t.data}))},clearHistory:function(){return r.default.delete(t+"/history").then((function(){}))},triggerPart:function(e,n){return r.default.post(t+"/trigger",{partId:e,inputs:n}).then((function(t){return t.data}))}}}},4278:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createRuntimeClient=e.DEFAULT_DT_SCALE=void 0;var i=n(18265),o=n(63726),r=n(50208),a=n(19389),u=i.debugLogger("debugger-runtime-client");e.DEFAULT_DT_SCALE=1;e.createRuntimeClient=function(t,n){var s=new URL(t),c=r.io(s.origin,{path:("/"===s.pathname?"":s.pathname)+"/socket.io/runtime"});c.emit("join-room-runtime",n);new Set;c.on(a.EventType.UPDATE_BREAKPOINTS,(function(t){new Set(t)}));var l=Date.now(),d=function(){var t=Date.now()-l;return Math.round(t/e.DEFAULT_DT_SCALE)},p=i.cappedArrayDebounce((function(t){u("Emitting debounced batched events - "+t.length),c.emit(a.EventType.EVENTS_BATCH,t)}),100,200),f={onChange:function(t){return c.on(a.EventType.CHANGE_EVENT_NAME,t),function(){return c.off(a.EventType.CHANGE_EVENT_NAME,t)}},onInput:function(t){return c.on(a.EventType.PUSH_INPUT_VALUE,t),function(){return c.off(a.EventType.PUSH_INPUT_VALUE,t)}},emitInputChange:function(t){u("Emitting input change event of "+t.insId+":"+t.pinId);t.insId.split(".").length;p.addItem({type:a.RuntimeEventType.INPUT_CHANGE,id:t.insId+"."+t.pinId+".input",dt:d(),val:a.toString(t.val),t:Date.now()})},emitOutputChange:function(t){u("Emitting output change event of "+t.insId+":"+t.pinId+" -> [o%]",t.val),p.addItem({type:a.RuntimeEventType.OUTPUT_CHANGE,id:t.insId+"."+t.pinId+".output",dt:d(),val:a.toString(t.val),t:Date.now()})},emitProcessing:function(t){t.insId.split(".").length;p.addItem({type:a.RuntimeEventType.PROCESSING_CHANGE,id:t.insId,dt:d(),val:t.processing,t:Date.now()})},emitInputsStateChange:function(t){t.insId.split(".").length;p.addItem({type:a.RuntimeEventType.INPUTS_STATE_CHANGE,id:t.insId,dt:d(),val:t.inputs,t:Date.now()})},emitPartError:function(t){t.insId.split(".").length;u("Emitting error event of "+t.insId+", error - ["+t+"]");var e=o.serializeError(t);p.addItem({type:a.RuntimeEventType.OUTPUT_CHANGE,id:t.insId+"."+i.ERROR_PIN_ID+".output",dt:d(),val:a.toString(t),t:Date.now()}),p.addItem({type:a.RuntimeEventType.ERROR,id:t.insId,dt:d(),val:e,t:Date.now()})},emitRuntimeReady:function(){c.emit(a.EventType.RUNTIME_READY,{})},emitChangeAwk:function(){c.emit(a.EventType.CHANGE_AWK,{})},emitChangeError:function(t){c.emit(a.EventType.CHANGE_ERROR,{error:t})},emitIsAlive:function(t){c.emit(a.EventType.IS_ALIVE,{time:t})},destroy:function(){p.flush(),a.enumToArray(a.EventType).forEach((function(t){return c.off(t)})),c.disconnect()},onDisconnect:function(t){return c.on("disconnect",t),function(){return c.off("disconnect",t)}}};return new Promise((function(t,e){c.connected?t(f):(c.on("connect_error",(function(t){e("Socket connect error: "+t)})),c.on("connect",(function(){t(f)})))}))}},19389:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MINOR_EVENT_TYPES=e.MAJOR_EVENT_TYPES=e.RuntimeEventType=e.EventType=e.enumToArray=e.isNumber=e.isSimpleType=e.valuePreview=e.toString=void 0;var i=n(63726);e.toString=function(t){if("object"===typeof t){if(t instanceof Error)return JSON.stringify(i.serializeError(t));try{return JSON.stringify(t).substr(0,250)}catch(e){return"Object (cannot stringify)"}}return(""+t).substr(0,250)};e.valuePreview=function(t){return e.toString(t).substr(0,100)};e.isSimpleType=function(t){return["number","string","boolean"].includes(typeof t)};var o;e.isNumber=function(t){return!1===isNaN(Number(t))},e.enumToArray=function(t){return Object.keys(t).filter(e.isNumber).map((function(e){return t[e]}))},function(t){t.RUNTIME_READY="runtime-ready",t.CHANGE_EVENT_NAME="change",t.PUSH_INPUT_VALUE="push-input-value",t.CHANGE_AWK="live-change-awk",t.CHANGE_ERROR="live-change-error",t.IS_ALIVE="is-alive",t.UPDATE_BREAKPOINTS="update-breakpoints",t.INPUT_VALUE_OVERRIDE="input-value-override",t.OUTPUT_VALUE_OVERRIDE="output-value-override",t.INPUT_VALUE_CHANGE="input-value-changed",t.OUTPUT_VALUE_CHANGE="output-value-changed",t.PROCESSING_CHANGE="processing-changed",t.INPUTS_STATE_CHANGE="inputs-state-changed",t.PART_ERROR="part-error",t.EVENTS_BATCH="events-batch"}(e.EventType||(e.EventType={})),function(t){t.INPUT_CHANGE="i",t.OUTPUT_CHANGE="o",t.PROCESSING_CHANGE="pc",t.ERROR="err",t.INPUTS_STATE_CHANGE="isc"}(o=e.RuntimeEventType||(e.RuntimeEventType={})),e.MAJOR_EVENT_TYPES=[o.INPUT_CHANGE,o.OUTPUT_CHANGE,o.ERROR],e.MINOR_EVENT_TYPES=[o.PROCESSING_CHANGE,o.INPUTS_STATE_CHANGE]},75579:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),o(n(19389),e),o(n(17229),e),o(n(4278),e)},97534:function(t,e,n){var i=n(45597).default;t.exports={id:"Dot",defaultStyle:{size:"small"},inputs:{obj:{mode:"required",type:"any"},key:{mode:"required",type:"any"}},outputs:{value:{type:"any"}},customViewCode:"<% if (inputs.key) { %> .<%- inputs.key %> <% } else { %> Dot <% } %>",completionOutputs:["value"],fn:function(t,e,n){for(var o,r=t.obj,a=t.key,u=e.value,s=!1,c={},l=a.replace(/\["(([^"])+)"\]/g,(function(t,e,n,i){var o="__$KEY$__"+i;return c[o]=e,"."+o})).split("."),d=Object.assign({},r),p=i(l);!(o=p()).done;){var f=o.value,v=c[f]||f;d&&void 0!==d[v]&&null!==d[v]?d=d[v]:(u.next(null),s=!0)}s||u.next(d)}}},68649:function(t){t.exports={id:"HtmlTag",inputs:{id:{mode:"required-if-connected",type:"any"},style:{mode:"required-if-connected",type:"any"},className:{mode:"required-if-connected",type:"any"},tagName:{mode:"required",type:"any"},extra:{mode:"required-if-connected",type:"any"},children:{mode:"required-if-connected",type:"any"}},outputs:{jsx:{type:"any"},click:{type:"any"}},fn:function(t,e,n){var i={className:t.className,id:t.id,style:t.style},o=e.click?function(t){return e.click.next(t)}:void 0,r=React.createElement(t.tagName,Object.assign({},i,t.extra||{},{onClick:o}),t.children);e.jsx.next(r)}}},71611:function(t,e,n){t.exports={id:"HttpGet",inputs:{url:{mode:"required",type:"any"},headers:{mode:"required-if-connected",type:"any"}},outputs:{r:{type:"any"}},completionOutputs:["r"],fn:function(t,e,i){var o=n(25717),r=t.url,a=t.headers,u=e.r,s=(e.error,i.onError);o.get(r,{headers:a,timeout:15e3}).then((function(t){u.next(t.data)}),(function(t){s(t)}))}}},80902:function(t,e,n){t.exports={id:"HttpPost",inputs:{url:{mode:"required",type:"any"},body:{mode:"required",type:"any"},headers:{mode:"required-if-connected",type:"any"},bodyType:{mode:"required-if-connected",type:"any"}},outputs:{r:{type:"any"},e:{type:"any"}},fn:function(t,e,i){var o=n(25717),r=t.url,a=t.body,u=t.headers,s=t.bodyType,c=e.r,l=e.e,d=i.onError,p={headers:u,timeout:15e3};if("form"===s){var f=[];Object.keys(a).forEach((function(t){f.push(t+"="+encodeURIComponent(a[t]))})),o.post(r,f.join("&"),p).then((function(t){c.next(t.data)}),(function(t){var e=t.response,n=t.message,i=e?{data:e.data,status:e.status}:{data:n,status:-1};l.next(i),d(i)}))}else o.post(r,a,p).then((function(t){c.next(t.data)}),(function(t){var e=t.response,n=t.message,i=e?{data:e.data,status:e.status}:{data:n,status:-1};l.next(i),d(i)}))}}},42716:function(t,e,n){"use strict";n.d(e,{V:function(){return a}});var i=n(52685),o=n(27378),r=function(t){return o.createElement("li",{className:"log-item"},o.createElement("main",{className:"content"},t.value),o.createElement("aside",null,new Date(t.time).toLocaleTimeString()))},a=function(t){var e=o.useState([]),n=e[0],a=e[1];return o.useEffect((function(){t.output.subscribe((function(t){var e="object"==typeof t&&o.isValidElement(t)?t:""+t;a((function(t){return[].concat(t,[{value:e,time:Date.now()}])}))}))}),[]),o.createElement("div",{className:"output-log"},o.createElement("header",null,"Output Log"," ",o.createElement("button",{className:"clear-btn button button--outline button--secondary button--sm",onClick:function(){return a([])}},"Clear")),o.createElement("main",null,o.createElement("ul",null,n.map((function(t,e){return o.createElement(r,(0,i.Z)({},t,{key:e}))}))),0===n.length?o.createElement("div",{className:"empty-state"},"Nothing to show. Interact with the example to emit some outputs!"):null))}},38941:function(t,e,n){"use strict";n.d(e,{I:function(){return x}});var i=n(27378),o=n(67651),r=n(59821),a=n(38944),u=n(96149),s=n(18265),c={VMScript:function(t){this.script=t},VM:function(){function t(t){this.context=t}return t.prototype.run=function(t){var e=(0,s.okeys)(this.context.sandbox),n=Object.values(this.context.sandbox);Function.apply(void 0,e.concat([t.script])).apply(void 0,n)},t}()},l=n(81884),d=n(44305),p=n(13127),f=200,v=n(75579),m=n(60512),y=n(1706),h=n(12902),g=n(33099);n.g.vm2=c;var I,b,P=(b=new Map,{requestHistory:(I=(0,p.Z)((0,d.Z)().mark((function t(e,n,i){var o,r,a;return(0,d.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e+"."+n+"."+i,r=b.get(o)||{total:0,lastSamples:[]},a=r.lastSamples.slice(0,f),t.abrupt("return",Object.assign({},r,{lastSamples:a}));case 4:case"end":return t.stop()}}),t)}))),function(t,e,n){return I.apply(this,arguments)}),addEvents:function(t){t.forEach((function(t){var e=b.get(t.id)||{total:0,lastSamples:[]};e.lastSamples.unshift(t),e.lastSamples.length>f&&e.lastSamples.splice(f,e.lastSamples.length-f),e.total++,b.set(t.id,e)}))}}),_=[{title:"Hello World",key:"hello-world"},{title:"React Counter",key:"react-counter"},{title:"BMI Calculator",key:"bmi"},{title:"REST API Usage",key:"apis"},{title:"Debounce vs. Throttling",key:"debounce-throttling"},{title:"Fibonacci Seq.",key:"fibonacci"}],C=function(t){var e,n,i=t.flow,r=t.output,a=t.inputs,u=t.onError,c=t.debugDelay,l=function(t,e){return{onInput:function(n){var i=[{type:v.RuntimeEventType.INPUT_CHANGE,t:n.time,id:n.insId+"."+n.pinId+".input",dt:0,val:n.val}];t.addEvents(i),e.addEvents(i)},onOutput:function(n){var i=[{type:v.RuntimeEventType.OUTPUT_CHANGE,t:n.time,id:n.insId+"."+n.pinId+".output",dt:0,val:n.val}];e.addEvents(i),t.addEvents(i)},onInputsStateChange:function(e){t.addEvents([{type:v.RuntimeEventType.INPUTS_STATE_CHANGE,t:Date.now(),id:""+e.insId,dt:0,val:e.inputs}])},onProcessing:function(e){t.addEvents([{type:v.RuntimeEventType.PROCESSING_CHANGE,t:Date.now(),id:""+e.insId,dt:0,val:e.processing}])},onError:function(e){t.addEvents([{type:v.RuntimeEventType.ERROR,t:Date.now(),id:""+e.insId,dt:0,val:e.message}]),t.addEvents([{type:v.RuntimeEventType.OUTPUT_CHANGE,t:Date.now(),id:e.insId+"."+s.TRIGGER_PIN_ID+".output",dt:0,val:e.message}])}}}(t.player,P);l.debugDelay=c;var d=(0,s.keys)(i.main.outputs)[0];return(0,s.execute)({part:i.main,inputs:a,outputs:(e={},e[d]=r,e),partsRepo:Object.assign({},i.dependencies,(n={},n[i.main.id]=i.main,n)),_debugger:l,onBubbleError:function(t){u(t)},extraContext:{PubSub:o}})},x=function(t){var e=t.flowProps,n=e.flow,o=e.inputs,c=e.output,d=(0,i.useState)(t.initWidth||500),p=d[0],f=d[1],v=(0,i.useState)(t.defaultDelay||0),I=v[0],b=v[1],x=(0,i.useState)(!1),E=x[0],j=x[1],w=(0,i.useRef)((0,u.createRuntimePlayer)(t.flowProps.flow.part.id)),O=(0,i.useState)(t.flowProps.resolvedFlow),T=O[0],S=O[1],k=(0,i.useState)({flow:n,boardData:{viewPort:{pos:{x:0,y:0},zoom:1},lastMousePos:{x:0,y:0},selected:[]}}),N=k[0],D=k[1];(0,i.useEffect)((function(){S((function(t){return Object.assign({},t,{main:N.flow.part})}))}),[N.flow.part]);var M={state:N,resolvedRepoWithDeps:T,onChangeEditorState:D,onInspectPin:s.noop,onRequestHistory:P.requestHistory,hideTemplatingTips:!0,onImportPart:s.noop,onExtractInlinePart:s.noop};(0,i.useEffect)((function(){w.current.start()}),[]),(0,i.useEffect)((function(){var e=C({flow:T,output:c,inputs:o,onError:s.noop,debugDelay:I,player:w.current}),n=t.flowProps.output.subscribe((function(){return j(!0)}));return function(){e(),n.unsubscribe()}}),[I,T]);var R=(0,i.useCallback)((function(t,e){var n=e.size;f(n.width),D((function(t){var e=document.querySelector(".flow-container"),n=e?e.getBoundingClientRect():{width:500,height:500};return(0,h.ZP)(t,(function(t){t.boardData.viewPort=(0,u.fitViewPortToPart)(t.flow.part,T.dependencies,n)}))}))}),[]),A=i.createElement("div",{className:"delay-container"},i.createElement("input",{type:"range",id:"volume",name:"delay",value:I,step:"100",min:"0",max:"300",onChange:function(t){return b(Number(t.target.value))}}),i.createElement("label",{htmlFor:"volume"},"Debug Delay: ",I,"ms")),V=_.findIndex((function(e){return e.key===t.meta.key})),H=_[V+1],z=_[V-1];return i.createElement(r.Z,{title:t.meta.title+" | Playground",description:"Flyde Playground - "+t.meta.title+" example"},i.createElement("header",{className:(0,a.Z)("hero hero--primary",m.Z.heroBanner,"playground-hero")},i.createElement("div",{className:"container"},i.createElement("h1",{className:"hero__title"},"Welcome to Flyde's Online Playground"),i.createElement("p",{className:"hero__subtitle"},"Choose one of the examples below to get started. Feel free to play around with the canvas and see how your changes affect the result!"))),i.createElement("ul",{className:"examples__menu"},_.map((function(t){return i.createElement("li",null,i.createElement(l.Z,{to:"/playground/"+t.key,className:"button button--primary"},t.title))}))),i.createElement("div",{className:"playground-container"},i.createElement("header",null,i.createElement("h2",{className:"playground-title"},t.meta.title),i.createElement("div",{className:"playground-description"},t.meta.description),E?i.createElement(i.Fragment,null,i.createElement("hr",null),i.createElement("div",{className:"playground-extra"},t.extraInfo||t.meta.extraInfo)):null,t.prefixComponent),i.createElement("div",{className:"playground"},i.createElement("div",{className:"flow-container"},!0!==t.hideDelay?A:null,i.createElement(g.Z,null,(function(){return i.createElement(u.FlowEditor,M)}))),i.createElement(y.Resizable,{height:0,width:p,onResize:R,axis:"x",handle:i.createElement("div",{className:"handle"}),resizeHandles:["w"]},i.createElement("div",{className:"output-container",style:{flexBasis:p}},t.children))),i.createElement("nav",{className:"pagination-nav"},i.createElement("div",{className:"pagination-nav__item"},z?i.createElement("a",{className:"pagination-nav__link",href:"/playground/"+z.key},i.createElement("div",{className:"pagination-nav__sublabel"},"Previous Example"),i.createElement("div",{className:"pagination-nav__label"},z.title)):null),i.createElement("div",{className:"pagination-nav__item pagination-nav__item--next"},H?i.createElement("a",{className:"pagination-nav__link",href:"/playground/"+H.key},i.createElement("div",{className:"pagination-nav__sublabel"},"Next Example"),i.createElement("div",{className:"pagination-nav__label"},H.title)):null))))}},65689:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return c}});var i=n(27378),o=n(18265),r=n(38941),a={resolvedFlow:{main:{instances:[{pos:{x:-699.7832788085938,y:290.22256958007813},id:"Inline-value-Hello from ${i76",inputConfig:{},part:{id:"Inline-value-Hello from ${i",inputs:{country:{type:"any",mode:"required"},capital:{type:"any",mode:"required"},population:{type:"any",mode:"required"}},outputs:{r:{type:"any",delayed:!1,optional:!1}},fnCode:"outputs.r.next((`Hello from ${inputs.country}! It's capital is ${inputs.capital} (population of ${inputs.population})`))",customViewCode:"`Hello from ${inputs.country}! It's capital is ${inputs.capital} (population of ${inputs.population}",dataBuilderSource:"YEhlbGxvIGZyb20gJHtpbnB1dHMuY291bnRyeX0hIEl0J3MgY2FwaXRhbCBpcyAke2lucHV0cy5jYXBpdGFsfSAocG9wdWxhdGlvbiBvZiAke2lucHV0cy5wb3B1bGF0aW9ufSlg",templateType:"value",completionOutputs:["r"],defaultStyle:{size:"small",icon:"code",cssOverride:{fontFamily:"monospace",fontWeight:"500"}}},style:{size:"regular",icon:"code",cssOverride:{fontFamily:"monospace",fontWeight:"500"}}},{pos:{x:-587.805941772461,y:-218.61628173112865},id:"Get User's Country-ins",inputConfig:{},part:{id:"Get User's Country",inputs:{},outputs:{r:{type:"any",delayed:!1,optional:!1}},instances:[{pos:{x:-341.654423828125,y:-135.189943819046},id:"HttpGet-907",inputConfig:{url:{mode:"static",value:"https://api.country.is/"}},visibleInputs:["url","__trigger"],visibleOutputs:["r","__error"],partId:"HttpGet"},{pos:{x:-454.35468749999995,y:-35.96441955566405},id:"Inline-value-{iso2: ${input76",inputConfig:{},part:{id:"Inline-value-{iso2: inputs.d",inputs:{data:{type:"any",mode:"required"}},outputs:{r:{type:"any",delayed:!1,optional:!1}},fnCode:"outputs.r.next(({iso2: inputs.data.country}))",customViewCode:"{iso2: inputs.data.country}",dataBuilderSource:"e2lzbzI6IGlucHV0cy5kYXRhLmNvdW50cnl9",templateType:"value",completionOutputs:["r"]}}],inputsPosition:{},outputsPosition:{r:{x:-313.78723630742843,y:123.50129731187559}},connections:[{from:{insId:"HttpGet-907",pinId:"r"},to:{insId:"Inline-value-{iso2: ${input76",pinId:"data"}},{from:{insId:"Inline-value-{iso2: ${input76",pinId:"r"},to:{insId:"__this",pinId:"r"}}],completionOutputs:["r"]},style:{size:"large",color:"#f15bb5"}},{pos:{x:-636.9743029785157,y:-85.37110525846481},id:"Get Country Name And Capital-ins",inputConfig:{},visibleOutputs:["name","capital"],part:{id:"Get Country Name And Capital",inputs:{body:{type:"any",mode:"required"}},outputs:{capital:{type:"any",delayed:!1,optional:!1},name:{type:"any",delayed:!1,optional:!1}},instances:[{pos:{x:-455.39787109375004,y:43.691497802734375},id:"HttpPost-624",inputConfig:{url:{mode:"static",value:"https://countriesnow.space/api/v0.1/countries/capital"}},visibleInputs:["url","body"],partId:"HttpPost"},{pos:{x:-559.7825415039063,y:194.45557312011715},id:"Dot-286",inputConfig:{key:{mode:"static",value:"data.name"}},visibleInputs:["obj"],partId:"Dot"},{pos:{x:-400.3785717773437,y:198.4349559259415},id:"Dot-822",inputConfig:{key:{mode:"static",value:"data.capital"}},visibleInputs:["obj"],partId:"Dot"}],inputsPosition:{body:{x:-333.75691140339336,y:-63.66470402308542}},outputsPosition:{value:{x:-514.1541695281439,y:411.8457371232514},i10:{x:-280.88783057750686,y:411.581705357324},capital:{x:-373.87585887717984,y:347.90184574177306},name:{x:-537.398329068569,y:348.1765805072715}},connections:[{from:{insId:"HttpPost-624",pinId:"r"},to:{insId:"Dot-286",pinId:"obj"}},{from:{insId:"HttpPost-624",pinId:"r"},to:{insId:"Dot-822",pinId:"obj"}},{from:{insId:"__this",pinId:"body"},to:{insId:"HttpPost-624",pinId:"body"}},{from:{insId:"Dot-286",pinId:"value"},to:{insId:"__this",pinId:"name"}},{from:{insId:"Dot-822",pinId:"value"},to:{insId:"__this",pinId:"capital"}}],completionOutputs:["name+capital"]},style:{size:"large",color:"#9b5de5"}},{pos:{x:-264.4149328613281,y:175.11608734130857},id:"Format Number-ins",inputConfig:{},part:{id:"Format Number",inputs:{number:{type:"any",mode:"required"}},outputs:{string:{type:"any",delayed:!1,optional:!1}},instances:[{id:"Inline-value-Result is ${in47",part:{id:"Inline-value-new Intl.Number",inputs:{population:{type:"any",mode:"required"}},outputs:{r:{type:"any",delayed:!1,optional:!1}},fnCode:"outputs.r.next((new Intl.NumberFormat().format(inputs.population)))",customViewCode:"new Intl.NumberFormat().format(inputs.population)",dataBuilderSource:"bmV3IEludGwuTnVtYmVyRm9ybWF0KCkuZm9ybWF0KGlucHV0cy5wb3B1bGF0aW9uKQ==",templateType:"value",completionOutputs:["r"]},inputConfig:{},pos:{x:-452.21022216796877,y:176.39826171875}}],inputsPosition:{population:{x:0,y:0},number:{x:0,y:0}},outputsPosition:{r:{x:0,y:400},string:{x:0,y:400}},connections:[{from:{insId:"__this",pinId:"number"},to:{insId:"Inline-value-Result is ${in47",pinId:"population"}},{from:{insId:"Inline-value-Result is ${in47",pinId:"r"},to:{insId:"__this",pinId:"string"}}],completionOutputs:["string"]},style:{size:"regular",color:"#fee440"}},{pos:{x:-319.75787109375,y:32.73055236816407},id:"cl8x5r4qp00074666lb382z1c",inputConfig:{},part:{id:"Get Population By City",inputs:{city:{type:"any",mode:"required"}},outputs:{value:{type:"any",delayed:!1,optional:!1}},instances:[{pos:{x:-204.90311279296873,y:349.60314422607416},id:"HttpPost-775",inputConfig:{url:{mode:"static",value:"https://countriesnow.space/api/v0.1/countries/population/cities"}},visibleInputs:["url","body"],partId:"HttpPost"},{pos:{x:-143.08780761718754,y:233.70198646545413},id:"Inline-value-{city: inputs.c75",inputConfig:{},part:{id:"Inline-value-{city: inputs.c",inputs:{city:{type:"any",mode:"required"}},outputs:{r:{type:"any",delayed:!1,optional:!1}},fnCode:"outputs.r.next(({city: inputs.city}))",customViewCode:"{city: inputs.city}",dataBuilderSource:"e2NpdHk6IGlucHV0cy5jaXR5fQ==",templateType:"value",completionOutputs:["r"]}},{id:"Dot-710",partId:"Dot",inputConfig:{key:{mode:"static",value:"data.populationCounts.0.value"}},pos:{x:-206.3246728515625,y:483.9902026367188},visibleInputs:["obj"]}],inputsPosition:{city:{x:-59.242744173605615,y:192.73141904118035}},outputsPosition:{value:{x:-107.75930491072856,y:617.5218613166921}},connections:[{from:{insId:"Inline-value-{city: inputs.c75",pinId:"r"},to:{insId:"HttpPost-775",pinId:"body"}},{from:{insId:"__this",pinId:"city"},to:{insId:"Inline-value-{city: inputs.c75",pinId:"city"}},{from:{insId:"HttpPost-775",pinId:"r"},to:{insId:"Dot-710",pinId:"obj"}},{from:{insId:"Dot-710",pinId:"value"},to:{pinId:"value",insId:"__this"}}],completionOutputs:["value"]},style:{size:"large",color:"#00bbf9"}},{pos:{x:-225.01,y:237.48},id:"HtmlBtn-32",inputConfig:{},partId:"HtmlBtn"}],connections:[{from:{insId:"Inline-value-Hello from ${i76",pinId:"r"},to:{insId:"__this",pinId:"output"}},{from:{insId:"Get User's Country-ins",pinId:"r"},to:{insId:"Get Country Name And Capital-ins",pinId:"body"}},{from:{insId:"Get Country Name And Capital-ins",pinId:"name"},to:{insId:"Inline-value-Hello from ${i76",pinId:"country"}},{from:{insId:"Get Country Name And Capital-ins",pinId:"capital"},to:{insId:"Inline-value-Hello from ${i76",pinId:"capital"}},{from:{insId:"Format Number-ins",pinId:"string"},to:{insId:"Inline-value-Hello from ${i76",pinId:"population"}},{from:{insId:"cl8x5r4qp00074666lb382z1c",pinId:"value"},to:{insId:"Format Number-ins",pinId:"number"}},{from:{insId:"Get Country Name And Capital-ins",pinId:"capital"},to:{insId:"cl8x5r4qp00074666lb382z1c",pinId:"city"}},{from:{insId:"Format Number-ins",pinId:"string"},to:{insId:"HtmlBtn-32",pinId:"__trigger"}}],id:"ApisCombination",inputs:{},outputs:{output:{type:"any",optional:!1,delayed:!1}},inputsPosition:{city:{x:-187.27285824815934,y:-14.13215209416181}},outputsPosition:{json:{x:-441.98276309426666,y:480.38719404276554},na:{x:-441.98276309426666,y:480.38719404276554},result:{x:-499.82438378976735,y:706.7650396699393},output:{x:-474.64252250807056,y:437.71313745088565}}},dependencies:{HtmlBtn__HtmlTag:{id:"HtmlBtn__HtmlTag",inputs:{id:{mode:"required-if-connected",type:"any"},style:{mode:"required-if-connected",type:"any"},className:{mode:"required-if-connected",type:"any"},tagName:{mode:"required",type:"any"},extra:{mode:"required-if-connected",type:"any"},children:{mode:"required-if-connected",type:"any"}},outputs:{jsx:{type:"any"},click:{type:"any"}},fn:n(68649).fn,importPath:"/Users/gabrielgrinberg/projects/flyde/stdlib/parts/HtmlTag.flyde.js",part:{id:"HtmlTag",inputs:{id:{mode:"required-if-connected",type:"any"},style:{mode:"required-if-connected",type:"any"},className:{mode:"required-if-connected",type:"any"},tagName:{mode:"required",type:"any"},extra:{mode:"required-if-connected",type:"any"},children:{mode:"required-if-connected",type:"any"}},outputs:{jsx:{type:"any"},click:{type:"any"}},fn:n(68649).fn,importPath:"/Users/gabrielgrinberg/projects/flyde/stdlib/parts/HtmlTag.flyde.js"}},HtmlBtn:{instances:[{pos:{x:-145.77105590820312,y:179.20621673583986},id:"HtmlTag-344",inputConfig:{tagName:{mode:"static",value:"button"},children:{mode:"sticky"}},partId:"HtmlBtn__HtmlTag"}],connections:[{from:{insId:"HtmlTag-344",pinId:"jsx"},to:{insId:"__this",pinId:"jsx"}},{from:{insId:"__this",pinId:"style"},to:{insId:"HtmlTag-344",pinId:"style"}},{from:{insId:"__this",pinId:"className"},to:{insId:"HtmlTag-344",pinId:"className"}},{from:{insId:"__this",pinId:"children"},to:{insId:"HtmlTag-344",pinId:"children"}},{from:{insId:"__this",pinId:"extra"},to:{insId:"HtmlTag-344",pinId:"extra"}},{from:{insId:"__this",pinId:"id"},to:{insId:"HtmlTag-344",pinId:"id"}},{from:{insId:"HtmlTag-344",pinId:"click"},to:{insId:"__this",pinId:"click"}}],id:"HtmlBtn",inputs:{children:{mode:"optional",type:"any"},className:{mode:"optional",type:"any"},style:{mode:"optional",type:"any"},extra:{mode:"optional",type:"any"},id:{mode:"optional",type:"any"}},outputs:{jsx:{type:"any"},click:{type:"any"}},inputsPosition:{children:{x:427.3633539266118,y:18.715560526434157},className:{x:79.49840810022538,y:-190.6116525494369},style:{x:-115.72005229266348,y:-241.4589222372525},extra:{x:250.068522112266,y:-182.374320409234},id:{x:-248.71519834765635,y:-202.88061148563915}},outputsPosition:{jsx:{x:-150.11084357782397,y:424.0177174689956},click:{x:178.6462610269776,y:423.83950155636643},style:{x:1.46,y:-24.05}},importPath:"/Users/gabrielgrinberg/projects/flyde/stdlib/parts/HtmlBtn.flyde"},HttpGet:{id:"HttpGet",inputs:{url:{mode:"required",type:"any"},headers:{mode:"required-if-connected",type:"any"}},outputs:{r:{type:"any"}},completionOutputs:["r"],fn:n(71611).fn,importPath:"/Users/gabrielgrinberg/projects/flyde/stdlib/parts/http/HttpGet.flyde.js",part:{id:"HttpGet",inputs:{url:{mode:"required",type:"any"},headers:{mode:"required-if-connected",type:"any"}},outputs:{r:{type:"any"}},completionOutputs:["r"],fn:n(71611).fn,importPath:"/Users/gabrielgrinberg/projects/flyde/stdlib/parts/http/HttpGet.flyde.js"}},HttpPost:{id:"HttpPost",inputs:{url:{mode:"required",type:"any"},body:{mode:"required",type:"any"},headers:{mode:"required-if-connected",type:"any"},bodyType:{mode:"required-if-connected",type:"any"}},outputs:{r:{type:"any"},e:{type:"any"}},fn:n(80902).fn,importPath:"/Users/gabrielgrinberg/projects/flyde/stdlib/parts/http/HttpPost.flyde.js",part:{id:"HttpPost",inputs:{url:{mode:"required",type:"any"},body:{mode:"required",type:"any"},headers:{mode:"required-if-connected",type:"any"},bodyType:{mode:"required-if-connected",type:"any"}},outputs:{r:{type:"any"},e:{type:"any"}},fn:n(80902).fn,importPath:"/Users/gabrielgrinberg/projects/flyde/stdlib/parts/http/HttpPost.flyde.js"}},Dot:{id:"Dot",defaultStyle:{size:"small"},inputs:{obj:{mode:"required",type:"any"},key:{mode:"required",type:"any"}},outputs:{value:{type:"any"}},customViewCode:"<% if (inputs.key) { %> .<%- inputs.key %> <% } else { %> Dot <% } %>",completionOutputs:["value"],fn:n(97534).fn,importPath:"/Users/gabrielgrinberg/projects/flyde/stdlib/parts/Dot.flyde.js",part:{id:"Dot",defaultStyle:{size:"small"},inputs:{obj:{mode:"required",type:"any"},key:{mode:"required",type:"any"}},outputs:{value:{type:"any"}},customViewCode:"<% if (inputs.key) { %> .<%- inputs.key %> <% } else { %> Dot <% } %>",completionOutputs:["value"],fn:n(97534).fn,importPath:"/Users/gabrielgrinberg/projects/flyde/stdlib/parts/Dot.flyde.js"}}}},flow:{imports:{"@flyde/stdlib":["HttpResponse","HttpGet","Pick","HttpPost","Dot","HtmlBtn","Accumulate2"]},part:{instances:[{pos:{x:-699.7832788085938,y:290.22256958007813},id:"Inline-value-Hello from ${i76",inputConfig:{},part:{id:"Inline-value-Hello from ${i",inputs:{country:{type:"any",mode:"required"},capital:{type:"any",mode:"required"},population:{type:"any",mode:"required"}},outputs:{r:{type:"any",delayed:!1,optional:!1}},fnCode:"outputs.r.next((`Hello from ${inputs.country}! It's capital is ${inputs.capital} (population of ${inputs.population})`))",customViewCode:"`Hello from ${inputs.country}! It's capital is ${inputs.capital} (population of ${inputs.population}",dataBuilderSource:"YEhlbGxvIGZyb20gJHtpbnB1dHMuY291bnRyeX0hIEl0J3MgY2FwaXRhbCBpcyAke2lucHV0cy5jYXBpdGFsfSAocG9wdWxhdGlvbiBvZiAke2lucHV0cy5wb3B1bGF0aW9ufSlg",templateType:"value",completionOutputs:["r"],defaultStyle:{size:"small",icon:"code",cssOverride:{fontFamily:"monospace",fontWeight:"500"}}},style:{size:"regular",icon:"code",cssOverride:{fontFamily:"monospace",fontWeight:"500"}}},{pos:{x:-587.805941772461,y:-218.61628173112865},id:"Get User's Country-ins",inputConfig:{},part:{id:"Get User's Country",inputs:{},outputs:{r:{type:"any",delayed:!1,optional:!1}},instances:[{pos:{x:-341.654423828125,y:-135.189943819046},id:"HttpGet-907",inputConfig:{url:{mode:"static",value:"https://api.country.is/"}},visibleInputs:["url","__trigger"],visibleOutputs:["r","__error"],partId:"HttpGet"},{pos:{x:-454.35468749999995,y:-35.96441955566405},id:"Inline-value-{iso2: ${input76",inputConfig:{},part:{id:"Inline-value-{iso2: inputs.d",inputs:{data:{type:"any",mode:"required"}},outputs:{r:{type:"any",delayed:!1,optional:!1}},fnCode:"outputs.r.next(({iso2: inputs.data.country}))",customViewCode:"{iso2: inputs.data.country}",dataBuilderSource:"e2lzbzI6IGlucHV0cy5kYXRhLmNvdW50cnl9",templateType:"value",completionOutputs:["r"]}}],inputsPosition:{},outputsPosition:{r:{x:-313.78723630742843,y:123.50129731187559}},connections:[{from:{insId:"HttpGet-907",pinId:"r"},to:{insId:"Inline-value-{iso2: ${input76",pinId:"data"}},{from:{insId:"Inline-value-{iso2: ${input76",pinId:"r"},to:{insId:"__this",pinId:"r"}}],completionOutputs:["r"]},style:{size:"large",color:"#f15bb5"}},{pos:{x:-636.9743029785157,y:-85.37110525846481},id:"Get Country Name And Capital-ins",inputConfig:{},visibleOutputs:["name","capital"],part:{id:"Get Country Name And Capital",inputs:{body:{type:"any",mode:"required"}},outputs:{capital:{type:"any",delayed:!1,optional:!1},name:{type:"any",delayed:!1,optional:!1}},instances:[{pos:{x:-455.39787109375004,y:43.691497802734375},id:"HttpPost-624",inputConfig:{url:{mode:"static",value:"https://countriesnow.space/api/v0.1/countries/capital"}},visibleInputs:["url","body"],partId:"HttpPost"},{pos:{x:-559.7825415039063,y:194.45557312011715},id:"Dot-286",inputConfig:{key:{mode:"static",value:"data.name"}},visibleInputs:["obj"],partId:"Dot"},{pos:{x:-400.3785717773437,y:198.4349559259415},id:"Dot-822",inputConfig:{key:{mode:"static",value:"data.capital"}},visibleInputs:["obj"],partId:"Dot"}],inputsPosition:{body:{x:-333.75691140339336,y:-63.66470402308542}},outputsPosition:{value:{x:-514.1541695281439,y:411.8457371232514},i10:{x:-280.88783057750686,y:411.581705357324},capital:{x:-373.87585887717984,y:347.90184574177306},name:{x:-537.398329068569,y:348.1765805072715}},connections:[{from:{insId:"HttpPost-624",pinId:"r"},to:{insId:"Dot-286",pinId:"obj"}},{from:{insId:"HttpPost-624",pinId:"r"},to:{insId:"Dot-822",pinId:"obj"}},{from:{insId:"__this",pinId:"body"},to:{insId:"HttpPost-624",pinId:"body"}},{from:{insId:"Dot-286",pinId:"value"},to:{insId:"__this",pinId:"name"}},{from:{insId:"Dot-822",pinId:"value"},to:{insId:"__this",pinId:"capital"}}],completionOutputs:["name+capital"]},style:{size:"large",color:"#9b5de5"}},{pos:{x:-264.4149328613281,y:175.11608734130857},id:"Format Number-ins",inputConfig:{},part:{id:"Format Number",inputs:{number:{type:"any",mode:"required"}},outputs:{string:{type:"any",delayed:!1,optional:!1}},instances:[{id:"Inline-value-Result is ${in47",part:{id:"Inline-value-new Intl.Number",inputs:{population:{type:"any",mode:"required"}},outputs:{r:{type:"any",delayed:!1,optional:!1}},fnCode:"outputs.r.next((new Intl.NumberFormat().format(inputs.population)))",customViewCode:"new Intl.NumberFormat().format(inputs.population)",dataBuilderSource:"bmV3IEludGwuTnVtYmVyRm9ybWF0KCkuZm9ybWF0KGlucHV0cy5wb3B1bGF0aW9uKQ==",templateType:"value",completionOutputs:["r"]},inputConfig:{},pos:{x:-452.21022216796877,y:176.39826171875}}],inputsPosition:{population:{x:0,y:0},number:{x:0,y:0}},outputsPosition:{r:{x:0,y:400},string:{x:0,y:400}},connections:[{from:{insId:"__this",pinId:"number"},to:{insId:"Inline-value-Result is ${in47",pinId:"population"}},{from:{insId:"Inline-value-Result is ${in47",pinId:"r"},to:{insId:"__this",pinId:"string"}}],completionOutputs:["string"]},style:{size:"regular",color:"#fee440"}},{pos:{x:-319.75787109375,y:32.73055236816407},id:"cl8x5r4qp00074666lb382z1c",inputConfig:{},part:{id:"Get Population By City",inputs:{city:{type:"any",mode:"required"}},outputs:{value:{type:"any",delayed:!1,optional:!1}},instances:[{pos:{x:-204.90311279296873,y:349.60314422607416},id:"HttpPost-775",inputConfig:{url:{mode:"static",value:"https://countriesnow.space/api/v0.1/countries/population/cities"}},visibleInputs:["url","body"],partId:"HttpPost"},{pos:{x:-143.08780761718754,y:233.70198646545413},id:"Inline-value-{city: inputs.c75",inputConfig:{},part:{id:"Inline-value-{city: inputs.c",inputs:{city:{type:"any",mode:"required"}},outputs:{r:{type:"any",delayed:!1,optional:!1}},fnCode:"outputs.r.next(({city: inputs.city}))",customViewCode:"{city: inputs.city}",dataBuilderSource:"e2NpdHk6IGlucHV0cy5jaXR5fQ==",templateType:"value",completionOutputs:["r"]}},{id:"Dot-710",partId:"Dot",inputConfig:{key:{mode:"static",value:"data.populationCounts.0.value"}},pos:{x:-206.3246728515625,y:483.9902026367188},visibleInputs:["obj"]}],inputsPosition:{city:{x:-59.242744173605615,y:192.73141904118035}},outputsPosition:{value:{x:-107.75930491072856,y:617.5218613166921}},connections:[{from:{insId:"Inline-value-{city: inputs.c75",pinId:"r"},to:{insId:"HttpPost-775",pinId:"body"}},{from:{insId:"__this",pinId:"city"},to:{insId:"Inline-value-{city: inputs.c75",pinId:"city"}},{from:{insId:"HttpPost-775",pinId:"r"},to:{insId:"Dot-710",pinId:"obj"}},{from:{insId:"Dot-710",pinId:"value"},to:{pinId:"value",insId:"__this"}}],completionOutputs:["value"]},style:{size:"large",color:"#00bbf9"}},{pos:{x:-225.01,y:237.48},id:"HtmlBtn-32",inputConfig:{},partId:"HtmlBtn"}],connections:[{from:{insId:"Inline-value-Hello from ${i76",pinId:"r"},to:{insId:"__this",pinId:"output"}},{from:{insId:"Get User's Country-ins",pinId:"r"},to:{insId:"Get Country Name And Capital-ins",pinId:"body"}},{from:{insId:"Get Country Name And Capital-ins",pinId:"name"},to:{insId:"Inline-value-Hello from ${i76",pinId:"country"}},{from:{insId:"Get Country Name And Capital-ins",pinId:"capital"},to:{insId:"Inline-value-Hello from ${i76",pinId:"capital"}},{from:{insId:"Format Number-ins",pinId:"string"},to:{insId:"Inline-value-Hello from ${i76",pinId:"population"}},{from:{insId:"cl8x5r4qp00074666lb382z1c",pinId:"value"},to:{insId:"Format Number-ins",pinId:"number"}},{from:{insId:"Get Country Name And Capital-ins",pinId:"capital"},to:{insId:"cl8x5r4qp00074666lb382z1c",pinId:"city"}},{from:{insId:"Format Number-ins",pinId:"string"},to:{insId:"HtmlBtn-32",pinId:"__trigger"}}],id:"ApisCombination",inputs:{},outputs:{output:{type:"any",optional:!1,delayed:!1}},inputsPosition:{city:{x:-187.27285824815934,y:-14.13215209416181}},outputsPosition:{json:{x:-441.98276309426666,y:480.38719404276554},na:{x:-441.98276309426666,y:480.38719404276554},result:{x:-499.82438378976735,y:706.7650396699393},output:{x:-474.64252250807056,y:437.71313745088565}}}}},u=n(42716),s={title:"HTTP Requests",description:"Flyde works great for heavy asynchronous & concurrent tasks, like combining several REST APIs together. This example shows exactly that, by combining 3 different REST APIs, the population of the capital of the country your IP is assigned with is retrieved",key:"api",extraInfo:i.createElement("strong",null,i.createElement("h3",null,"Try double-clicking each API part to see it's underlying implementation! In Flyde, nothing is hidden, only abstracted"))};function c(){var t=(0,i.useRef)((0,o.dynamicOutput)()),e=(0,i.useRef)({__trigger:(0,o.dynamicPartInput)()}),n=(0,i.useState)({flow:a.flow,resolvedFlow:a.resolvedFlow,inputs:e.current,output:t.current}),c=n[0],l=(n[1],i.createElement("button",{className:"button button--success",onClick:function(){return e.current.__trigger.subject.next("run")}},"Run!"));return i.createElement(r.I,{meta:s,flowProps:c,defaultDelay:100,prefixComponent:l},i.createElement(u.V,{output:t.current}))}},60512:function(t,e){"use strict";e.Z={heroBanner:"heroBanner_qdFl",buttons:"buttons_AeoN","gh-stars-wrapper":"gh-stars-wrapper_LiAa","project-editor":"project-editor_XBpx",_hj_feedback_container:"_hj_feedback_container_Af03"}},95126:function(t,e,n){var i={"./af":1009,"./af.js":1009,"./ar":88769,"./ar-dz":23739,"./ar-dz.js":23739,"./ar-kw":93745,"./ar-kw.js":93745,"./ar-ly":99576,"./ar-ly.js":99576,"./ar-ma":67408,"./ar-ma.js":67408,"./ar-sa":48781,"./ar-sa.js":48781,"./ar-tn":87856,"./ar-tn.js":87856,"./ar.js":88769,"./az":2030,"./az.js":2030,"./be":56476,"./be.js":56476,"./bg":25304,"./bg.js":25304,"./bm":48125,"./bm.js":48125,"./bn":34,"./bn-bd":29835,"./bn-bd.js":29835,"./bn.js":34,"./bo":64082,"./bo.js":64082,"./br":8317,"./br.js":8317,"./bs":93107,"./bs.js":93107,"./ca":68272,"./ca.js":68272,"./cs":98567,"./cs.js":98567,"./cv":61583,"./cv.js":61583,"./cy":10076,"./cy.js":10076,"./da":31760,"./da.js":31760,"./de":8973,"./de-at":63214,"./de-at.js":63214,"./de-ch":74728,"./de-ch.js":74728,"./de.js":8973,"./dv":54053,"./dv.js":54053,"./el":7499,"./el.js":7499,"./en-au":67876,"./en-au.js":67876,"./en-ca":47010,"./en-ca.js":47010,"./en-gb":34239,"./en-gb.js":34239,"./en-ie":99830,"./en-ie.js":99830,"./en-il":28438,"./en-il.js":28438,"./en-in":25322,"./en-in.js":25322,"./en-nz":43264,"./en-nz.js":43264,"./en-sg":55449,"./en-sg.js":55449,"./eo":39486,"./eo.js":39486,"./es":32430,"./es-do":16310,"./es-do.js":16310,"./es-mx":27038,"./es-mx.js":27038,"./es-us":73099,"./es-us.js":73099,"./es.js":32430,"./et":34975,"./et.js":34975,"./eu":87063,"./eu.js":87063,"./fa":68073,"./fa.js":68073,"./fi":50957,"./fi.js":50957,"./fil":8764,"./fil.js":8764,"./fo":81775,"./fo.js":81775,"./fr":74179,"./fr-ca":14306,"./fr-ca.js":14306,"./fr-ch":73791,"./fr-ch.js":73791,"./fr.js":74179,"./fy":47014,"./fy.js":47014,"./ga":46911,"./ga.js":46911,"./gd":62958,"./gd.js":62958,"./gl":87344,"./gl.js":87344,"./gom-deva":33161,"./gom-deva.js":33161,"./gom-latn":35798,"./gom-latn.js":35798,"./gu":68485,"./gu.js":68485,"./he":27917,"./he.js":27917,"./hi":52159,"./hi.js":52159,"./hr":95842,"./hr.js":95842,"./hu":30005,"./hu.js":30005,"./hy-am":51312,"./hy-am.js":51312,"./id":60781,"./id.js":60781,"./is":64101,"./is.js":64101,"./it":43467,"./it-ch":4759,"./it-ch.js":4759,"./it.js":43467,"./ja":44164,"./ja.js":44164,"./jv":70079,"./jv.js":70079,"./ka":57036,"./ka.js":57036,"./kk":92022,"./kk.js":92022,"./km":63418,"./km.js":63418,"./kn":43655,"./kn.js":43655,"./ko":30986,"./ko.js":30986,"./ku":91902,"./ku.js":91902,"./ky":4604,"./ky.js":4604,"./lb":99026,"./lb.js":99026,"./lo":20537,"./lo.js":20537,"./lt":22288,"./lt.js":22288,"./lv":1495,"./lv.js":1495,"./me":60690,"./me.js":60690,"./mi":2571,"./mi.js":2571,"./mk":93959,"./mk.js":93959,"./ml":97225,"./ml.js":97225,"./mn":88,"./mn.js":88,"./mr":46622,"./mr.js":46622,"./ms":11070,"./ms-my":48899,"./ms-my.js":48899,"./ms.js":11070,"./mt":63931,"./mt.js":63931,"./my":95393,"./my.js":95393,"./nb":4274,"./nb.js":4274,"./ne":8914,"./ne.js":8914,"./nl":33114,"./nl-be":68479,"./nl-be.js":68479,"./nl.js":33114,"./nn":4513,"./nn.js":4513,"./oc-lnc":46549,"./oc-lnc.js":46549,"./pa-in":28264,"./pa-in.js":28264,"./pl":32848,"./pl.js":32848,"./pt":90899,"./pt-br":55077,"./pt-br.js":55077,"./pt.js":90899,"./ro":92512,"./ro.js":92512,"./ru":21753,"./ru.js":21753,"./sd":16840,"./sd.js":16840,"./se":78362,"./se.js":78362,"./si":50464,"./si.js":50464,"./sk":66324,"./sk.js":66324,"./sl":41963,"./sl.js":41963,"./sq":53039,"./sq.js":53039,"./sr":93454,"./sr-cyrl":10466,"./sr-cyrl.js":10466,"./sr.js":93454,"./ss":95158,"./ss.js":95158,"./sv":28859,"./sv.js":28859,"./sw":57594,"./sw.js":57594,"./ta":26915,"./ta.js":26915,"./te":15677,"./te.js":15677,"./tet":92154,"./tet.js":92154,"./tg":74098,"./tg.js":74098,"./th":89071,"./th.js":89071,"./tk":49381,"./tk.js":49381,"./tl-ph":1869,"./tl-ph.js":1869,"./tlh":92346,"./tlh.js":92346,"./tr":71483,"./tr.js":71483,"./tzl":30266,"./tzl.js":30266,"./tzm":33138,"./tzm-latn":32960,"./tzm-latn.js":32960,"./tzm.js":33138,"./ug-cn":29456,"./ug-cn.js":29456,"./uk":50805,"./uk.js":50805,"./ur":61127,"./ur.js":61127,"./uz":29628,"./uz-latn":80840,"./uz-latn.js":80840,"./uz.js":29628,"./vi":56962,"./vi.js":56962,"./x-pseudo":49257,"./x-pseudo.js":49257,"./yo":62423,"./yo.js":62423,"./zh-cn":61002,"./zh-cn.js":61002,"./zh-hk":6046,"./zh-hk.js":6046,"./zh-mo":36903,"./zh-mo.js":36903,"./zh-tw":24710,"./zh-tw.js":24710};function o(t){var e=r(t);return n(e)}function r(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}o.keys=function(){return Object.keys(i)},o.resolve=r,t.exports=o,o.id=95126},91764:function(){}}]);