(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7],{79440:function(e,t,n){"use strict";var i=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,o=e.length;n<i;n++,o++)e[o]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.fakeVm=t.VM=t.VMScript=void 0;var o=n(18265),r=function(e){this.script=e};t.VMScript=r;var u=function(){function e(e){this.context=e}return e.prototype.run=function(e){var t=o.okeys(this.context.sandbox),n=Object.values(this.context.sandbox);Function.apply(void 0,i(i([],t),[e.script])).apply(void 0,n)},e}();t.VM=u,t.fakeVm={VMScript:r,VM:u}},35537:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getVM2Instance=void 0;var i=n(79440);t.getVM2Instance=function(){return i.fakeVm}},98343:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},o=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n},r=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,o=e.length;n<i;n++,o++)e[o]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.customRepoToPartRepo=t.codePartToNative=void 0;var u=n(14206),a=n(18265),s=n(24048),c=n(18265),l=n(35537).getVM2Instance();t.codePartToNative=function(e,t){void 0===t&&(t={});var n=e.fnCode,d=o(e,["fnCode"]),p=a.debugLogger("code-part:"+e.id),f="\n  try {\n    "+n+"\n  } catch (e) {\n    adv.onError(e);\n  }\n  ",v=new l.VMScript(f),m=i(i({},d),{fn:function(n,o,d){var f=new l.VM({sandbox:i({inputs:n,outputs:o,setInterval:setInterval,clearInterval:clearInterval,setTimeout:setTimeout,clearTimeout:clearTimeout,encodeURIComponent:encodeURIComponent,adv:d,log:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];p.apply(void 0,r(["Log from code part "+e.id+" ["+d.insId+"]"],t))},axios:u.default,DEFAULT_AXIOS_TIMEOUT:15e3,dynamicPartInput:s.dynamicPartInput,dynamicPartArg:s.dynamicPartInput,dynamicOutput:c.dynamicOutput,isDefined:c.isDefined,compileStringTemplate:a.compileStringTemplate,compileObjectTemplate:a.compileObjectTemplate,__FLYDE_MODE:"production"},t)});f.run(v)}});return m};t.customRepoToPartRepo=function(e,n){void 0===n&&(n={});var i={};for(var o in e){var r=e[o];i[o]=s.isCodePart(r)?t.codePartToNative(r,n):r}return i}},8541:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cappedArrayDebounce=void 0;t.cappedArrayDebounce=function(e,t,n,i){void 0===i&&(i=500);var o=[],r=null,u=null;return{addItem:function(a){clearTimeout(r),o.push(a),u||(u=setTimeout((function(){e(o),clearTimeout(r),u=null}),i)),o.length>=n?(e(o),clearTimeout(u),u=null,o=[]):r=setTimeout((function(){e(o),clearTimeout(u),u=null,o=[]}),t)},flush:function(){o.length&&(e(o),o=[],clearTimeout(u))}}}},96615:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.dataShaper=t.DataShapeType=void 0,function(e){e[e.STRING=0]="STRING",e[e.NUMBER=1]="NUMBER",e[e.BOOLEAN=2]="BOOLEAN",e[e.ARRAY=3]="ARRAY",e[e.OBJECT=4]="OBJECT",e[e.NULL=5]="NULL"}(n=t.DataShapeType||(t.DataShapeType={}));var i={string:n.STRING,number:n.NUMBER,boolean:n.BOOLEAN,object:n.OBJECT,array:n.ARRAY,null:n.NULL};t.dataShaper=function(e,n,o){void 0===n&&(n=5),void 0===o&&(o=5);var r,u,a=null===(r=e)?"null":typeof r;if("object"===a){if(Array.isArray(e))return n>1?e.filter((function(e,t){return t<o})).map((function(e){return t.dataShaper(e,n-1,o)})):i.array;if(n>1){var s={};for(var c in e)s[c]=t.dataShaper(e[c],n-1,o);return u=s,Object.keys(u).sort().reduce((function(e,t){return e[t]=u[t],e}),{})}return i.object}return i[a]}},40189:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debugLogger=void 0;var i=n(96292).default("flyde");t.debugLogger=function(e){return i.extend(e)}},68132:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},o=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n},r=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,o=e.length;n<i;n++,o++)e[o]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.hashFlow=t.hashPart=void 0;var u=n(61586),a=n(18265),s=function(e){return u(e)};t.hashPart=function(e,t){void 0===t&&(t=!0);var n={id:e.id,completionOutputs:e.completionOutputs,reactiveInputs:e.reactiveInputs,inputs:e.inputs,outputs:e.outputs};if(a.isGroupedPart(e)){var u=e.instances,c=e.id,l=e.connections,d=e.inputsPosition,p=e.outputsPosition,f=u.map((function(e){e.pos;return o(e,["pos"])})),v=t?{}:{inputsPosition:d,outputsPosition:p},m=t?f:u;m.sort((function(e,t){return e.id.localeCompare(t.id)}));var y=r([],l);y.sort((function(e,t){var n=e.from.insId+"."+e.from.pinId,i=t.from.insId+"."+t.from.pinId;return n.localeCompare(i)}));var h=JSON.stringify(i(i({id:c,instancesToUse:m,conns:y},n),{maybeIoPos:v}));return s(h)}if(a.isCodePart(e)){var g=e.fnCode,I=e.customViewCode;h=JSON.stringify(i({fnCode:g,customViewCode:I},n));return s(h)}throw new Error("Hashing native parts unsupported")};t.hashFlow=function(e,n){void 0===n&&(n=!0);var o=e.part,r=e.imports,u=t.hashPart(o,!1),a=Object.entries(r).sort((function(e,t){var n=e[0],i=t[0];return n.localeCompare(i)})).map((function(e){return[e[0],e[1].sort()]})).reduce((function(e,t){var n,o=t[0],r=t[1];return i(i({},e),((n={})[o]=r,n))}),{}),c=JSON.stringify(a);return s(u+c)}},45821:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.DepGraph=void 0,o(n(69985),t),o(n(94919),t),o(n(40189),t),o(n(8541),t),o(n(94919),t),o(n(68132),t),o(n(67748),t),o(n(96615),t),t.DepGraph=n(59280).DepGraph},69985:function(e,t){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.testDataCreator=void 0;t.testDataCreator=function(e){return function(t){void 0===t&&(t={});var i="function"==typeof e?e():e,o=t;return n(n({},i),o)}}},94919:function(e,t){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function u(e){try{s(i.next(e))}catch(t){r(t)}}function a(e){try{s(i.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,a)}s((i=i.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return u.label++,{value:r[1],done:!1};case 5:u.label++,i=r[1],r=[0];continue;case 7:r=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){u=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){u.label=r[1];break}if(6===r[0]&&u.label<o[1]){u.label=o[1],o=r;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(r);break}o[2]&&u.ops.pop(),u.trys.pop();continue}r=t.call(e,u)}catch(a){r=[6,a],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},r=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,o=e.length;n<i;n++,o++)e[o]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.eventually=t.delay=t.noop=t.removeDupes=t.ensure=t.isOptionalType=t.callFnOrFnPromise=t.isPromise=t.isDefined=t.containsAll=t.shuffle=t.randomInts=t.repeat=t.pickRandom=t.randomPos=t.randomInt=t.pickSecond=t.pickFirst=t.fromEntries=t.entries=t.okeys=t.values=t.keys=t.filterOMap=t.mapOMap=t.middlePos=t.calcCenter=t.intersectRect=void 0;t.intersectRect=function(e,t){var n=e.x+e.w,i=t.x+t.w;return!(t.x>n||i<e.x||t.y>e.y+e.h||t.y+t.h<e.y)};t.calcCenter=function(e){var t=e.w,n=e.h;return{x:e.x+t/2,y:e.y+n/2}};t.middlePos=function(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}};t.mapOMap=function(e,i){return t.entries(e).map((function(e){var t=e[0],n=e[1];return[t,i(t,n)]})).reduce((function(e,t){var i,o=t[0],r=t[1];return n(n({},e),((i={})[o]=r,i))}),{})};t.filterOMap=function(e,i){return t.entries(e).filter((function(e){var t=e[0],n=e[1];return i(t,n)})).reduce((function(e,t){var i,o=t[0],r=t[1];return n(n({},e),((i={})[o]=r,i))}),{})};t.keys=function(e){return Object.keys(e)};t.values=function(e){return Object.values(e)},t.okeys=t.keys;t.entries=function(e){return t.okeys(e).map((function(t){return[t,e[t]]}))};t.fromEntries=function(e){return e.reduce((function(e,t){var i,o=t[0],r=t[1];return n(n({},e),((i={})[o]=r,i))}),{})};t.pickFirst=function(e){return e[0]};t.pickSecond=function(e){return e[1]};t.randomInt=function(e,t){void 0===t&&(t=0);var n=Math.random();return t+Math.floor((e-t)*n)};t.randomPos=function(e,n){return void 0===e&&(e=1e3),void 0===n&&(n=0),{x:t.randomInt(e,n),y:t.randomInt(e,n)}};t.pickRandom=function(e){return e[t.randomInt(e.length)]};t.repeat=function(e,t){return"x".repeat(e).split("").map((function(e,n){return t(n)}))};t.randomInts=function(e,n,i){return void 0===n&&(n=100),void 0===i&&(i=0),t.repeat(e,(function(){return t.randomInt(n,i)}))};t.shuffle=function(e){for(var t,n=r([],e),i=n.length-1;i>=0;i--){var o=Math.floor(Math.random()*(i+1));t=[n[o],n[i]],n[i]=t[0],n[o]=t[1]}return n};t.containsAll=function(e,t){return t.every((function(t){return e.includes(t)}))};t.isDefined=function(e){return void 0!==e};t.isPromise=function(e){return e&&"function"==typeof e.then};t.callFnOrFnPromise=function(e,n){if(t.isDefined(e)){var i=function(e){try{e()}catch(t){console.error(t)}};"function"==typeof e?i(e):Promise.resolve(e).then((function(e){"function"==typeof e&&i(e)}))}};t.isOptionalType=function(e){return/\?$/.test(e)};t.ensure=function(e,t){if(void 0===e)throw new Error(t||"Undefined value passed");return e};t.removeDupes=function(e){return Array.from(new Set(e))};t.noop=function(){};t.delay=function(e){return new Promise((function(t){return setTimeout(t,e)}))};t.eventually=function(e,n,r,u){return void 0===n&&(n=3e3),void 0===r&&(r=100),void 0===u&&(u=new Set),i(void 0,void 0,void 0,(function(){var i,a,s,c;return o(this,(function(o){switch(o.label){case 0:if(n<0)throw i=Array.from(u).reduce((function(e,t,n){return e+"\n\t\t"+(n+1)+". "+t}),""),new Error("[Eventually timeout exceeded after: timeout with error]: "+i);o.label=1;case 1:return o.trys.push([1,3,,5]),[4,e()];case 2:return o.sent(),[3,5];case 3:return a=o.sent(),s=Date.now(),[4,t.delay(r)];case 4:return o.sent(),c=Date.now()-s,u.add(a.message),[2,t.eventually(e,n-c,r,u)];case 5:return[2]}}))}))}},67748:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compileObjectTemplate=t.compileStringTemplate=void 0;t.compileStringTemplate=function(e,t){var n=decodeURIComponent(e);return Object.keys(t).forEach((function(e){var i=t[e],o=new RegExp("\\$\\{"+e+"\\}","g");n=n.replace(o,i)})),n};t.compileObjectTemplate=function(e,t){var n=decodeURIComponent(e);return Object.keys(t).forEach((function(e){var i=t[e],o=JSON.stringify(i),r=new RegExp('"\\$\\$\\{'+e+'\\}"',"g"),u=new RegExp("\\$\\{"+e+"\\}","g"),a="string"==typeof i?i.replace(/"/g,(function(e,t,n){return"\\"!==n[t-1]?'\\"':n[t]})):i;n=n.replace(r,o).replace(u,a).replace(/\n/g,"\\n")})),JSON.parse(n)}},1076:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.connection=t.connectionData=t.connectionDataEquals=t.connectionNodeEquals=t.connectionNode=t.externalConnectionNode=t.isInternalConnection=t.isExternalConnection=t.isInternalConnectionNode=t.isExternalConnectionNode=t.getPartOutputs=t.getOutputName=t.getInputName=t.getPartInputs=t.TRIGGER_PIN_ID=t.ERROR_PIN_ID=t.THIS_INS_ID=void 0;var o=n(18265);t.THIS_INS_ID="__this",t.ERROR_PIN_ID="__error",t.TRIGGER_PIN_ID="__trigger";t.getPartInputs=function(e){var n;return i(i({},e.inputs),((n={})[t.TRIGGER_PIN_ID]=o.partInput("any"),n))};t.getInputName=function(e){return e===t.TRIGGER_PIN_ID?"Trigger Part":e};t.getOutputName=function(e){return e===t.ERROR_PIN_ID?"Error":e};t.getPartOutputs=function(e){var n;return i(i({},e.outputs),((n={})[t.ERROR_PIN_ID]=o.partOutput("error"),n))};t.isExternalConnectionNode=function(e){return e.insId===t.THIS_INS_ID};t.isInternalConnectionNode=function(e){return e.insId!==t.THIS_INS_ID};t.isExternalConnection=function(e){var n=e.from,i=e.to;return t.isExternalConnectionNode(n)||t.isExternalConnectionNode(i)};t.isInternalConnection=function(e){return!t.isExternalConnection(e)};t.externalConnectionNode=function(e){return{insId:t.THIS_INS_ID,pinId:e}};t.connectionNode=function(e,t){return{insId:e,pinId:t}};t.connectionNodeEquals=function(e,t){return e.insId===t.insId&&e.pinId===t.pinId};t.connectionDataEquals=function(e,n){return!(!e||!n)&&(t.connectionNodeEquals(e.from,n.from)&&t.connectionNodeEquals(e.to,n.to))},t.connectionData=function(e,n,i){var o="string"==typeof e?e.split("."):e,r="string"==typeof n?n.split("."):n;if(o.length>2||r.length>2)throw new Error("invalid source or target to connection data - "+e+" / "+n);return{from:2===o.length?t.connectionNode(o[0],o[1]):t.externalConnectionNode(o[0]),to:2===r.length?t.connectionNode(r[0],r[1]):t.externalConnectionNode(r[0]),delayed:i}};t.connection=function(e,t,n){return void 0===n&&(n=!1),{from:e,to:t,delayed:n}}},6485:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)},r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function u(e){try{s(i.next(e))}catch(t){r(t)}}function a(e){try{s(i.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,a)}s((i=i.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var n,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return u.label++,{value:r[1],done:!1};case 5:u.label++,i=r[1],r=[0];continue;case 7:r=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){u=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){u.label=r[1];break}if(6===r[0]&&u.label<o[1]){u.label=o[1],o=r;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(r);break}o[2]&&u.ops.pop(),u.trys.pop();continue}r=t.call(e,u)}catch(a){r=[6,a],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.connect=void 0;var a=n(24048),s=n(30385),c=n(45821),l=n(1076);o(n(1076),t);t.connect=function(e,t,n,i,o,d,p,f){void 0===n&&(n={}),void 0===i&&(i="root"),void 0===o&&(o={bob:new Map}),void 0===d&&(d=c.noop),void 0===p&&(p={}),void 0===f&&(f={});var v=e.id,m=e.connections,y=e.instances,h=v||"connected-part"+c.randomInt(999);return{inputs:e.inputs,outputs:e.outputs,id:h,completionOutputs:e.completionOutputs,reactiveInputs:e.reactiveInputs,fn:function(v,g){var I,b=[],P=new c.DepGraph({}),_=new Map,C=new Map,x=new Map,O=new Map,E=new Map,w=new Map,j=new Set;y.forEach((function(e){var n=a.getPart(e,t),i=e.id;_.set(e,i),C.set(i,e),P.addNode(i);var o=Object.keys(n.inputs),r=Object.keys(n.outputs),u={},s={};if(o.forEach((function(t){var n=(e.inputConfig||{})[t]||a.queueInputPinConfig();a.isStaticInputPinConfig(n)?u[t]=a.staticPartInput(n.value):u[t]=a.dynamicPartInput({config:n})})),u[l.TRIGGER_PIN_ID]=a.dynamicPartInput({config:a.queueInputPinConfig()}),m.some((function(t){return l.isInternalConnectionNode(t.to)&&t.to.insId===e.id&&t.to.pinId===l.TRIGGER_PIN_ID}))&&e.inputConfig&&e.inputConfig[l.TRIGGER_PIN_ID])throw"Trigger connection can not be configured";r.forEach((function(e){var t=a.dynamicOutput();s[e]=t})),m.some((function(t){return l.isInternalConnectionNode(t.from)&&t.from.insId===e.id&&t.from.pinId===l.ERROR_PIN_ID}))&&(s[l.ERROR_PIN_ID]=a.dynamicOutput()),x.set(i,u),O.set(i,s)}));var S=new Set;return m.forEach((function(n){var i=n.from,o=n.to,s=i.insId,c=i.pinId,d=o.insId,p=o.pinId,f=O.get(s),v=x.get(d);if(l.isInternalConnectionNode(o)&&S.add(o.insId+"."+o.pinId),l.isExternalConnection(n))if(l.isExternalConnectionNode(i)){var m=v[o.pinId];if(!m)throw new Error("Input "+o.pinId+" of instance "+d+" not found");(y=E.get(i.pinId)||[]).push(m),E.set(i.pinId,y)}else{var y,g=f[i.pinId];if(!g)throw new Error("Output "+i.pinId+" of instance "+s+" not found");(y=w.get(o.pinId)||[]).push(g),w.set(o.pinId,y)}else{if(!f)throw new Error("No outputs found for instance ["+s+"]");if(!v)throw C.has(d)?new Error("No inputs found for instance ["+d+"]"):new Error("Instance with id ["+d+"] does not exist!");var I=f[c];if(!I)throw new Error("Output source - ["+i+"] not found in part ["+h+"]");var _=v[p],j=C.get(s);if(!j&&s!==l.THIS_INS_ID)throw new Error("Instance ["+s+"] does not exist! failed to connect ["+i+"] -> ["+o+"]");var D=(j?a.getPart(j,t):e).outputs[c];if(D&&D.delayed||n.delayed||s!==l.THIS_INS_ID&&d!==l.THIS_INS_ID&&P.addDependency(s,d),!_)throw new Error("Target arg - ["+o+"] not found in part ["+h+"]");var T=I.subscribe((function(e){return r(void 0,void 0,void 0,(function(){return u(this,(function(t){if(!a.isDynamicInput(_))throw console.info(_),new Error("Impossible state listening to non dynamic input - "+d+"."+p);return _.subject.next(e),[2]}))}))}));b.push((function(){return T.unsubscribe()}))}})),c.okeys(g).forEach((function(e){(w.get(e)||[]).forEach((function(t){var n=t.subscribe((function(t){return r(void 0,void 0,void 0,(function(){return u(this,(function(n){return g[e].next(t),[2]}))}))}));b.push((function(){return n.unsubscribe()}))}))})),P.overallOrder().map((function(e){return C.get(e)})).forEach((function(e){var r=x.get(e.id),u=O.get(e.id),c=a.getPart(e,t);if(!r)throw new Error("Unexpected error - args not found when running "+e);if(!u)throw new Error("Unexpected error - outputs not found when running "+e);for(var l in r){var v=e.inputConfig[l];S.has(e.id+"."+l)||a.isStaticInputPinConfig(v)||delete r[l]}var m=s.execute({part:c,inputs:r,outputs:u,partsRepo:t,_debugger:n,insId:e.id,extraContext:f,mainState:o,parentInsId:i,onBubbleError:d,onCompleted:function(){return t=e.id,j.delete(t),void(0===j.size&&I&&I());var t},onStarted:function(){return t=e.id,void j.add(t);var t},env:p});b.push(m)})),Object.keys(v).forEach((function(e){return r(void 0,void 0,void 0,(function(){return u(this,(function(t){return(E.get(e)||[]).forEach((function(t){var n=v[e];if(!a.isDynamicInput(t))throw new Error("Unsure what to do with key "+e+", input: "+t+" of ins "+i);c.isDefined(n)&&t.subject.next(n)})),[2]}))}))})),void 0===e.completionOutputs&&j.size>0?new Promise((function(e){I=e})):function(){return b.forEach((function(e){try{e()}catch(t){console.error("error unsubscribing",t)}}))}}}}},28674:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.MINOR_DEBUGGER_EVENT_TYPES=t.MAJOR_DEBUGGER_EVENT_TYPES=t.DebuggerEventType=void 0,function(e){e.INPUT_CHANGE="i",e.OUTPUT_CHANGE="o",e.PROCESSING_CHANGE="pc",e.ERROR="err",e.INPUTS_STATE_CHANGE="isc"}(n=t.DebuggerEventType||(t.DebuggerEventType={})),t.MAJOR_DEBUGGER_EVENT_TYPES=[n.INPUT_CHANGE,n.OUTPUT_CHANGE,n.ERROR],t.MINOR_DEBUGGER_EVENT_TYPES=[n.PROCESSING_CHANGE,n.INPUTS_STATE_CHANGE]},76296:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(28674),t)},30385:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)},u=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function u(e){try{s(i.next(e))}catch(t){r(t)}}function a(e){try{s(i.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,a)}s((i=i.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return u.label++,{value:r[1],done:!1};case 5:u.label++,i=r[1],r=[0];continue;case 7:r=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){u=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){u.label=r[1];break}if(6===r[0]&&u.label<o[1]){u.label=o[1],o=r;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(r);break}o[2]&&u.ops.pop(),u.trys.pop();continue}r=t.call(e,u)}catch(a){r=[6,a],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.execute=t.INPUTS_STATE_SUFFIX=t.INNER_STATE_SUFFIX=void 0;var s=n(71542),c=n(21730);r(n(76296),t);var l=n(24048),d=n(6485),p=n(23939),f=n(45821),v=n(40189),m=n(18265),y=n(76296);t.INNER_STATE_SUFFIX="_inner",t.INPUTS_STATE_SUFFIX="_inputs";t.execute=function(e){var n=e.part,o=e.inputs,r=e.outputs,h=e.partsRepo,g=e._debugger,I=void 0===g?{}:g,b=e.insId,P=void 0===b?n.id:b,_=e.extraContext,C=void 0===_?{}:_,x=e.mainState,O=void 0===x?{}:x,E=e.parentInsId,w=void 0===E?"root":E,j=e.onBubbleError,S=void 0===j?s.noop:j,D=e.env,T=void 0===D?{}:D,k=e.onCompleted,N=void 0===k?s.noop:k,M=e.onStarted,R=void 0===M?s.noop:M,A=[],H=i(i({},C),{ENV:T}),V=m.customRepoToPartRepo(h,H),z=function(e){var t=e instanceof Error?e:new Error("Raw error: "+e.toString());if(t.message="error in child instance "+P+": "+t.message,r[d.ERROR_PIN_ID]?r[d.ERROR_PIN_ID].next(e):(t.insId=P,S(t)),I.onEvent){var n=t;n.insId=w+"."+P,I.onEvent({type:y.DebuggerEventType.ERROR,val:n,insId:P,parentInsId:w})}},G=function(e){return l.isGroupedPart(e)?d.connect(e,V,I,w+"."+P,O,z,T,C):l.isCodePart(e)?m.codePartToNative(e,H):e}(n),F=I.onEvent||s.noop,B={},L={};f.entries(o).forEach((function(e){var t=e[0],n=e[1];if(l.isDynamicInput(n)){var i=l.dynamicPartInput({config:n.config}),o=n.subject.subscribe((function(e){return u(void 0,void 0,void 0,(function(){var n,o;return a(this,(function(r){switch(r.label){case 0:return(n=F({type:y.DebuggerEventType.INPUT_CHANGE,insId:P,pinId:t,val:e,parentInsId:w}))?[4,n.valuePromise]:[3,2];case 1:return o=r.sent(),i.subject.next(o),[3,5];case 2:return I.debugDelay?[4,f.delay(I.debugDelay)]:[3,4];case 3:r.sent(),r.label=4;case 4:i.subject.next(e),r.label=5;case 5:return[2]}}))}))}));A.push((function(){return o.unsubscribe()})),L[t]=i}else{F({type:y.DebuggerEventType.INPUT_CHANGE,insId:P,pinId:t,val:n.config.value,parentInsId:w});var r=l.staticPartInput(l.getStaticValue(n.config.value,V,P));L[t]=r}})),f.entries(r).forEach((function(e){var t=e[0],n=e[1],i=l.dynamicOutput(),o=i.subscribe((function(e){return u(void 0,void 0,void 0,(function(){var i,o;return a(this,(function(r){switch(r.label){case 0:return(i=F({type:y.DebuggerEventType.OUTPUT_CHANGE,insId:P,pinId:t,val:e,parentInsId:w}))?[4,i.valuePromise]:[3,2];case 1:return o=r.sent(),n.next(o),[3,3];case 2:n.next(e),r.label=3;case 3:return[2]}}))}))}));A.push((function(){return o.unsubscribe()})),B[t]=i}));var U=function(e){var n,o=e.part,r=e.inputs,u=e.outputs,a=e.repo,d=e._debugger,h=e.insId,g=e.parentInsId,I=e.mainState,b=e.onError,P=e.onStarted,_=e.onCompleted,C=e.env,x=e.extraContext,O=o.fn,E=v.debugLogger("core"),w=[],j=d.onEvent||s.noop,S=(g||"root")+"."+h,D=""+S+t.INNER_STATE_SUFFIX,T=""+S+t.INPUTS_STATE_SUFFIX,k=E.extend(S);I[D]||(I[D]=new Map),I[T]||(I[T]=new Map),I[D];var N,M=I[T],R=function(){var e=Array.from(M.entries()).reduce((function(e,t){var n,o=t[0],u=t[1],a=l.isQueueInputPinConfig(r[o].config,r[o]);return i(i({},e),((n={})[o]=a?null==u?void 0:u.length:1,n))}),{});j({type:y.DebuggerEventType.INPUTS_STATE_CHANGE,val:e,insId:h,parentInsId:g})},A={execute:function(e,n,i,o){return t.execute({part:e,inputs:n,outputs:i,partsRepo:a,_debugger:d,insId:o,onCompleted:_,onStarted:P})},insId:h,state:I[D],onCleanup:function(e){w.push(e)},onError:function(e){b(e)},context:x},H=!1,V=(o.reactiveInputs||[]).filter((function(e){return!m.isStaticInputPinConfig(r[e].config)})),z=function(){I[D].clear(),f.keys(I).filter((function(e){return e.startsWith(S+".")})).forEach((function(e){I[e]=new Map}))},G=function e(t){var a,s=V.includes(null==t?void 0:t.key);if(H&&!s);else{var d=H&&s;if(p.isPartStateValid(r,M,o)||d){var v=void 0;if(H){if(!t)throw new Error("Unexpected state,  got reactive part while not processing and not valid");var I=p.pullValueForExecution(t.key,r[t.key],M,C);v=i(i({},N),((a={})[t.key]=I,a)),R()}else v=p.pullValuesForExecution(r,M,C),N=v,R();var x=new Set,E={};if(H=!0,j({type:y.DebuggerEventType.PROCESSING_CHANGE,val:H,insId:h,parentInsId:g}),o.completionOutputs){var w=o.completionOutputs.map((function(e){return e.split("+")})).reduce((function(e,t){return t.forEach((function(n){e.set(n,t)})),e}),new Map);f.entries(u).forEach((function(t){var i=t[0];t[1].pipe(c.first()).subscribe((function(t){x.add(i),E[i]=t;var u=w.get(i);u&&(u.splice(u.indexOf(i),1),0===u.length&&(H=!1,j({type:y.DebuggerEventType.PROCESSING_CHANGE,val:H,insId:h,parentInsId:g}),_&&_(E),z(),m.callFnOrFnPromise(n,"Error with cleanup function of "+o.id),n=void 0,x.clear(),E={},p.hasNewSignificantValues(r,M,C,o.id)&&e()))}))}))}else z();try{k("Running part %s with values %o",o.id,v),P&&P(),n=O(v,u,A),m.isPromise(n)?n.then((function(){void 0===o.completionOutputs&&_&&(H=!1,j({type:y.DebuggerEventType.PROCESSING_CHANGE,val:H,insId:h,parentInsId:g}),_(E))})):void 0===o.completionOutputs&&_&&(H=!1,j({type:y.DebuggerEventType.PROCESSING_CHANGE,val:H,insId:h,parentInsId:g}),_(E))}catch(F){console.log(F),H=!1,k("Error in part %s - value %e",o.id,F),j({type:y.DebuggerEventType.PROCESSING_CHANGE,val:H,insId:h,parentInsId:g}),b(F)}var S=V.find((function(e){return r[e]&&p.peekValueForExecution(e,r[e],M,C,o.id)}));if(S)I=p.peekValueForExecution(S,r[S],M,C,o.id),e({key:S,value:I});else{var D=f.entries(r).find((function(e){var t=e[0],n=e[1],i=l.isQueueInputPinConfig(n.config,n),r=p.peekValueForExecution(t,n,M,C,o.id);if(i)return f.isDefined(r)}));if(D){var T=D[0],G=D[1];I=p.peekValueForExecution(T,G,M,C,o.id),e({key:T,value:I})}}}}};G();var F=p.subscribeInputsToState(r,M,a,h,(function(e,t){E("Got input %s - value is [%o]",e,t),R();try{G({key:e,value:t})}catch(n){b(n)}}));return w.push(F),function(){m.callFnOrFnPromise(n,"Error with cleanup function of "+o.id),w.forEach((function(e){return e()}))}}({part:G,inputs:L,outputs:B,repo:V,_debugger:I,insId:P,mainState:O,parentInsId:w,onError:z,onBubbleError:S,env:T,extraContext:C,onCompleted:N,onStarted:R});return function(){A.forEach((function(e){return e()})),U()}}},23939:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,o=e.length;n<i;n++,o++)e[o]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeInputsToState=t.isPartStateValid=t.hasNewSignificantValues=t.peekValuesForExecution=t.pullValuesForExecution=t.pullValueForExecution=t.peekValueForExecution=void 0;var r=n(24048),u=n(45821),a=n(6485),s=function(e,t){var n=r.extractStaticValue(e);return r.isEnvValue(n)?function(e,t){for(var n=e.split("."),o=i({},t),r=0,a=n;r<a.length;r++){var s=a[r];if(!o||!u.isDefined(o[s])||null===o[s])throw new Error("Cannot find key "+e+" inside obj "+t);o=o[s]}return o}(r.getEnvKeyFromValue(n),t):n};t.peekValueForExecution=function(e,t,n,i,u){var a=n.get(e);if(!t)throw new Error('Trying to peek value of inexsting input in key "'+e+'" in part "'+u+'"');return r.isStaticInput(t)?s(t,i):r.isQueueInputPinConfig(t.config,t)?a?o([],a).shift():void 0:a};t.pullValueForExecution=function(e,t,n,i){var o,u=n.get(e);return r.isStaticInput(t)?o=s(t,i):r.isQueueInputPinConfig(t.config,t)?(o=(u||[]).shift(),n.set(e,u)):(o=u,r.isStickyInputPinConfig(t.config)||n.delete(e)),o};t.pullValuesForExecution=function(e,n,i){return u.entries(e).reduce((function(e,o){var r=o[0],u=o[1];return e[r]=t.pullValueForExecution(r,u,n,i),e}),{})};t.peekValuesForExecution=function(e,n,i,o){return u.entries(e).reduce((function(e,r){var u=r[0],a=r[1];return e[u]=t.peekValueForExecution(u,a,n,i,o),e}),{})};t.hasNewSignificantValues=function(e,n,i,o){return u.entries(e).some((function(e){var a=e[0],s=e[1],c=r.isQueueInputPinConfig(s.config,s),l=t.peekValueForExecution(a,s,n,i,o);return u.isDefined(l)&&c}))};t.isPartStateValid=function(e,t,n){var i=u.keys(e),o=u.keys(n.inputs).filter((function(e){return"required"===n.inputs[e].mode}));return i.includes(a.TRIGGER_PIN_ID)&&o.push(a.TRIGGER_PIN_ID),!!u.containsAll(i,o)&&u.entries(e).filter((function(e){var t=e[0];return!!n.inputs[t]||t===a.TRIGGER_PIN_ID})).every((function(e){var i,o=e[0],a=e[1],s=t.get(o);return"optional"===((null===(i=n.inputs[o])||void 0===i?void 0:i.mode)||"required")||(!!r.isStaticInput(a)||(r.isQueueInputPinConfig(a.config,a)?u.isDefined(s)&&s.length>0:u.isDefined(s)))}))};t.subscribeInputsToState=function(e,t,n,i,o){var a=[];return u.entries(e).forEach((function(e){var n=e[0],i=e[1];if(i&&!r.isStaticInput(i)){var u=i.subject.subscribe((function(e){if(r.isQueueInputPinConfig(i.config,i)){var u=t.get(n)||[];if(!Array.isArray(u))throw new Error("impossible state - state of key "+n+" is set but not an array");u.push(e),t.set(n,u),o(n,e)}else t.set(n,e),o(n,e)}));a.push((function(){return u.unsubscribe()}))}})),function(){return a.forEach((function(e){return e()}))}}},19735:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flydeFlowSchema=void 0;var i=n(89510),o=i.z.record(i.z.string(),i.z.string().or(i.z.array(i.z.string()))),r=i.z.strictObject({x:i.z.number(),y:i.z.number()}),u=i.z.discriminatedUnion("mode",[i.z.strictObject({mode:i.z.literal("static"),value:i.z.any()}),i.z.strictObject({mode:i.z.literal("queue")}),i.z.strictObject({mode:i.z.literal("sticky")})]),a=i.z.object({size:i.z.optional(i.z.enum(["small","regular","large"])),icon:i.z.optional(i.z.any()),color:i.z.optional(i.z.string()),cssOverride:i.z.optional(i.z.record(i.z.string()))}),s=i.z.object({pos:r.default({x:0,y:0}),id:i.z.string(),inputConfig:i.z.optional(i.z.record(i.z.string(),u)).default({}),visibleInputs:i.z.optional(i.z.array(i.z.string())),visibleOutputs:i.z.optional(i.z.array(i.z.string())),partId:i.z.optional(i.z.string()),part:i.z.optional(i.z.any()),style:i.z.optional(a)}).refine((function(e){return e.part||e.partId}),{message:"Instance must have either an inline part or refer to a partId"}),c=i.z.union([i.z.string(),i.z.object({mode:i.z.enum(["required","optional","required-if-connected"]),type:i.z.string(),description:i.z.optional(i.z.string()),defaultValue:i.z.optional(i.z.any())})]),l=i.z.object({type:i.z.string(),optional:i.z.optional(i.z.boolean()),delayed:i.z.optional(i.z.boolean()),description:i.z.optional(i.z.string())}),d=i.z.object({id:i.z.optional(i.z.string()),inputs:i.z.record(i.z.string(),c),outputs:i.z.record(i.z.string(),l),inputsPosition:i.z.optional(i.z.record(i.z.string(),r)),outputsPosition:i.z.optional(i.z.record(i.z.string(),r)),customViewCode:i.z.optional(i.z.string()),dataBuilderSource:i.z.optional(i.z.string()),templateType:i.z.optional(i.z.string()),completionOutputs:i.z.optional(i.z.array(i.z.string())),reactiveInputs:i.z.optional(i.z.array(i.z.string())),defaultStyle:i.z.optional(a),description:i.z.optional(i.z.string())}),p=i.z.object({instances:i.z.array(s),connections:i.z.array(i.z.strictObject({from:i.z.strictObject({insId:i.z.string(),pinId:i.z.string()}),to:i.z.strictObject({insId:i.z.string(),pinId:i.z.string()}),delayed:i.z.optional(i.z.boolean()),hidden:i.z.optional(i.z.boolean())}))}).and(d);t.flydeFlowSchema=i.z.strictObject({imports:i.z.optional(o).default({}),part:p})},18265:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectType=t.isStaticValueGroupedPart=void 0,o(n(45821),t);var r=n(24048);o(n(6485),t),o(n(30385),t),o(n(69789),t),o(n(24048),t),o(n(90163),t),o(n(51922),t),o(n(98343),t),o(n(55281),t),o(n(75596),t),o(n(19735),t);t.isStaticValueGroupedPart=function(e){return e&&!!r.maybeGetStaticValuePartId(""+e)},function(e){e.WEB_UI="web-ui",e.SERVER="server",e.MOBILE="mobile",e.CLI="cli"}(t.ProjectType||(t.ProjectType={}))},90163:function(e,t,n){"use strict";var i=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,o=e.length;n<i;n++,o++)e[o]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.getPartWithDependencies=void 0;var o=n(24048),r=n(18265),u=n(93471);t.getPartWithDependencies=function(e,n,a){if(void 0===a&&(a=[]),o.isCodePart(e))return[e];if(a.includes(e.id))return[];var s=r.removeDupes(e.instances.filter((function(e){return u.isRefPartInstance(e)})).map((function(e){return e.partId})).filter((function(e){return n[e]}))),c=s.map((function(e){return n[e]})).reduce((function(e,o){return i(i([],e),t.getPartWithDependencies(o,n,i(i([],a),s)))}),[]);return i([e],c)}},24048:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.nativeFromFunction=t.getPartDef=t.getPart=t.getStaticValue=t.maybeGetStaticValuePartId=t.staticPartRefence=t.fromSimplified=t.codePart=t.nativePart=t.groupedPart=t.isCodePart=t.isGroupedPart=t.isNativePart=t.CodePartTemplateTypeInline=void 0;var u=n(45821),a=n(18265),s=n(93471);r(n(93471),t),r(n(85089),t),r(n(34702),t),function(e){e.VALUE="value",e.FUNCTION="function"}(t.CodePartTemplateTypeInline||(t.CodePartTemplateTypeInline={}));t.isNativePart=function(e){return!t.isGroupedPart(e)};t.isGroupedPart=function(e){return!!e.instances};t.isCodePart=function(e){return u.isDefined(e)&&u.isDefined(e.fnCode)},t.groupedPart=u.testDataCreator({id:"grouped-part",inputs:{},outputs:{},instances:[],connections:[],outputsPosition:{},inputsPosition:{}}),t.nativePart=u.testDataCreator({id:"part",inputs:{},outputs:{},fn:u.noop}),t.codePart=u.testDataCreator({id:"part",inputs:{},outputs:{},fnCode:""});t.fromSimplified=function(e){var t=e.fn,n=e.inputTypes,o=e.outputTypes,r=e.id,a=u.entries(n).reduce((function(e,t){var n,o=t[0],r=t[1];return i(i({},e),((n={})[o]={type:r},n))}),{}),s=u.entries(o).reduce((function(e,t){var n,o=t[0],r=t[1];return i(i({},e),((n={})[o]={type:r},n))}),{});return{id:r,inputs:a,outputs:s,fn:t}};t.staticPartRefence=function(e){return"__part:"+e.id};t.maybeGetStaticValuePartId=function(e){var t="string"==typeof e&&e.match(/^__part\:(.*)/);return t?t[1]:null};t.getStaticValue=function(e,n,i){var o=t.maybeGetStaticValuePartId(e);if(o){var r=n[o];if(!r)throw new Error("Instance "+i+" referrer to a part reference "+o+" that does not exist");return r}return e};t.getPart=function(e,t){if("string"!=typeof e&&s.isInlinePartInstance(e))return e.part;var n="string"==typeof e?e:e.partId,i=t[n];if(!i)throw new Error("Part with id "+n+" not found");return i};t.getPartDef=function(e,t){if("string"!=typeof e&&s.isInlinePartInstance(e))return e.part;var n="string"==typeof e?e:e.partId,i=t[n];if(!i)throw console.error("Part with id "+n+" not found"),new Error("Part with id "+n+" not found");return i};t.nativeFromFunction=function(e){var t,n=e.id,o=e.fn,r=e.inputNames,u=e.outputName,s=e.defaultStyle;return{id:n,inputs:r.reduce((function(e,t){var n;return i(i({},e),((n={})[t]=a.partInput("any"),n))}),{}),outputs:(t={},t[u]=a.partOutput(),t),fn:function(e,t){var n=r.map((function(t){return e[t]})),i=t[u],a=o.apply(void 0,n);Promise.resolve(a).then((function(e){return i.next(e)}))},completionOutputs:[u],defaultStyle:s}}},93471:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PartInstance=t.isRefPartInstance=t.isInlinePartInstance=t.inlinePartInstance=t.partInstance=void 0;t.partInstance=function(e,t,n,i){return{id:e,partId:t,inputConfig:n||{},pos:i||{x:0,y:0}}};t.inlinePartInstance=function(e,t,n,i){return{id:e,part:t,inputConfig:n||{},pos:i||{x:0,y:0}}};t.isInlinePartInstance=function(e){return!!e.part};t.isRefPartInstance=function(e){return!t.isInlinePartInstance(e)};t.PartInstance=function(e,t,n,i){return{id:e,partId:t.id,inputConfig:n||{},pos:i||{x:0,y:0}}}},85089:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEnvKeyFromValue=t.toEnvValue=t.isEnvValue=t.extractStaticValue=t.isStaticInput=t.isDynamicInput=t.staticPartInput=t.dynamicPartInputs=t.dynamicPartInput=t.dynamicOutput=t.partOutputs=t.partOutput=t.partInputs=t.isInputPinOptional=t.partInput=void 0;var i=n(71542),o=n(24048),r=n(45821),u=n(34702);t.partInput=function(e,t){return void 0===e&&(e="any"),void 0===t&&(t="required"),{type:e,mode:t}};t.isInputPinOptional=function(e){return"optional"===e.mode};t.partInputs=function(e,n){return r.repeat(e,(function(e){return t.partInput("any",n[e]||"required")}))};t.partOutput=function(e,t,n){return void 0===e&&(e="any"),void 0===t&&(t=!1),void 0===n&&(n=!1),{type:e,delayed:t,optional:n}};t.partOutputs=function(e){return r.repeat(e,(function(){return t.partOutput("any")}))};t.dynamicOutput=function(){return new i.Subject},t.dynamicPartInput=r.testDataCreator((function(){return{subject:new i.Subject,config:u.queueInputPinConfig()}}));t.dynamicPartInputs=function(e){return void 0===e&&(e=10),r.repeat(e,(function(){return r.testDataCreator((function(){return{subject:new i.Subject,config:u.queueInputPinConfig()}}))()}))};t.staticPartInput=function(e){return{config:u.staticInputPinConfig(e)}};t.isDynamicInput=function(e){var t=e;return t&&t.subject&&!!t.subject.next};t.isStaticInput=function(e){return o.isStaticInputPinConfig(e.config)};t.extractStaticValue=function(e){if(t.isStaticInput(e))return e.config.value;throw new Error("Cannot extract static value from non static arg")};t.isEnvValue=function(e){return"string"==typeof e&&e.startsWith("$ENV.")};t.toEnvValue=function(e){return"$ENV."+e};t.getEnvKeyFromValue=function(e){return"string"==typeof e?e.replace(/^\$ENV\./,""):e}},34702:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isStaticInputPinConfig=t.isStickyInputPinConfig=t.isQueueInputPinConfig=t.staticInputPinConfig=t.stickyInputPinConfig=t.queueInputPinConfig=t.INPUT_MODES=void 0,t.INPUT_MODES=["queue","sticky","static"];t.queueInputPinConfig=function(){return{mode:"queue"}};t.stickyInputPinConfig=function(){return{mode:"sticky"}};t.staticInputPinConfig=function(e){return{mode:"static",value:e}};t.isQueueInputPinConfig=function(e,t){return"queue"===e.mode};t.isStickyInputPinConfig=function(e){return e&&"sticky"===e.mode},t.isStaticInputPinConfig=function(e){return e&&"static"===e.mode}},75596:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},69789:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.simplifiedExecute=void 0;var o=n(18265),r=n(30385);t.simplifiedExecute=function(e,t,n,u,a){void 0===a&&(a={});var s=o.keys(e.outputs),c=Object.keys(n).reduce((function(e,t){var r,u=n[t];return i(i({},e),((r={})[t]=o.isDynamicInput(u)?u:o.staticPartInput(u),r))}),{}),l=s.reduce((function(e,t){var n,r=o.dynamicOutput();return u&&r.subscribe((function(e){u(t,e)})),i(i({},e),((n={})[t]=r,n))}),{});return r.execute(i({part:e,inputs:c,outputs:l,partsRepo:t,onBubbleError:function(e){throw e}},a))}},51922:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},55281:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isScheduledTrigger=t.isRestApiTrigger=t.isWebAppTrigger=void 0;t.isWebAppTrigger=function(e){return"web-app"===e.type};t.isRestApiTrigger=function(e){return"rest-api"===e.type};t.isScheduledTrigger=function(e){return"scheduled"===e.type}},23489:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.PartPreview=void 0;var o=n(24246),r=n(18265),u=n(53574);t.PartPreview=function(e){var t=e.part,n={part:t,instance:r.partInstance("bob",t.id,{}),connections:[],connectionsPerInput:{},connectionsPerOutput:{},viewPort:{pos:{x:0,y:0},zoom:1},partDefRepo:{},onUngroup:r.noop,onDblClick:r.noop,onDragEnd:r.noop,onDragMove:r.noop,onDragStart:r.noop,onPinClick:r.noop,onPinDblClick:r.noop,onSelect:r.noop,onTogglePinBreakpoint:r.noop,onTogglePinLog:r.noop,onToggleSticky:r.noop,displayMode:!0,onInspectPin:r.noop,onDetachConstValue:r.noop,onCopyConstValue:r.noop,onPasteConstValue:r.noop,onRequestHistory:r.noop,parentInsId:"",onChangeVisibleInputs:r.noop,onChangeVisibleOutputs:r.noop,onConvertConstToEnv:r.noop,forceShowMinimized:"both",onExtractInlinePart:r.noop,onCloseInlineEditor:r.noop,isConnectedInstanceSelected:!1,inlineEditorPortalDomNode:null,onChangeStyle:r.noop,onDeleteInstance:r.noop,onGroupSelected:r.noop,onSetDisplayName:r.noop};return o.jsx("div",i({className:"part-preview"},{children:o.jsx(u.InstanceView,i({},n),void 0)}),void 0)}},90412:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t},a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)},s=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function u(e){try{s(i.next(e))}catch(t){r(t)}}function a(e){try{s(i.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,a)}s((i=i.apply(e,t||[])).next())}))},c=this&&this.__generator||function(e,t){var n,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return u.label++,{value:r[1],done:!1};case 5:u.label++,i=r[1],r=[0];continue;case 7:r=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){u=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){u.label=r[1];break}if(6===r[0]&&u.label<o[1]){u.label=o[1],o=r;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(r);break}o[2]&&u.ops.pop(),u.trys.pop();continue}r=t.call(e,u)}catch(a){r=[6,a],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},l=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,o=e.length;n<i;n++,o++)e[o]=t[n];return e},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FlowEditor=void 0;var p=n(24246),f=u(n(27378)),v=n(18265),m=n(12465),y=d(n(63300)),h=n(14648),g=n(52395),I=n(40232),b=n(51424),P=n(24935),_=n(91312),C=n(30537),x=n(31425),O=n(44370),E=n(96149);a(n(91312),t),C.library.add(x.fab,O.fas);var w=["select","drag-move","order-step"],j=function(e){var t;return i(i({},e.dependencies),((t={})[e.main.id]=e.main,t))};t.FlowEditor=f.memo(f.forwardRef((function(e,t){var n=e.state,o=e.resolvedRepoWithDeps,r=e.onChangeEditorState,u=e.onImportPart,a=f.useState([]),d=a[0],C=a[1],x=f.useState([]),O=x[0],S=x[1],D=n.flow,T=n.boardData,k=n.flow.part,N=_.usePorts().openFile,M=f.useCallback((function(e,t){console.log("onChangeFlow",t.type),"functional"===t.type&&(C(l([{flow:e}],d.slice(0,50))),S([])),r((function(t){return i(i({},t),{flow:e})}))}),[r,d]),R=f.useState({instances:[],connections:[]}),A=R[0],H=R[1],V=f.useState(!1),z=V[0],G=V[1],F=f.useCallback((function(){return G(!1)}),[]),B=f.useCallback((function(){return G(!0)}),[]),L=f.useCallback((function(e){r((function(t){return i(i({},t),{boardData:i(i({},t.boardData),e)})}))}),[r]);f.useEffect((function(){L({selected:[],viewPort:m.defaultViewPort,from:void 0,to:void 0,lastMousePos:{x:0,y:0}})}),[k.id]),h.useHotkeys("cmd+z",(function(e){S(l(l([],O),[n]));var t=d[0],o=d.slice(1);t&&(r((function(e){return i(i({},e),t)})),C(o)),e.preventDefault()}),void 0,[n,d,O]),h.useHotkeys("a",(function(e){e.preventDefault(),B()}));var U=f.useCallback((function(e,t){w.some((function(e){return t.message.includes(e)}))||S([]);var n=y.default(D,(function(t){t.part=e}));M(n,t)}),[D,M]),q=f.useCallback((function(e){N({absPath:e.importPath})}),[N]),W=f.useCallback((function(e,t){void 0===t&&(t=-1*m.PART_HEIGHT*1.5);var n=g.createNewPartInstance(e,t,T.lastMousePos,j(o));if(n){var i=y.default(D,(function(e){var t=e.part;if(!v.isGroupedPart(t))throw new Error("Impossible state, adding part to non grouped part");t.instances.push(n)}));return M(i,b.functionalChange("add-part")),F(),n}}),[T.lastMousePos,D,M,F,o]),$=f.useCallback((function(e){return s(void 0,void 0,void 0,(function(){var t,n,i;return c(this,(function(r){switch(r.label){case 0:switch(e.type){case P.OmniBarCmdType.ADD:return[3,1];case P.OmniBarCmdType.ADD_VALUE:return[3,2];case P.OmniBarCmdType.CREATE_CODE_PART:return[3,3];case P.OmniBarCmdType.CREATE_GROUPED_PART:return[3,4];case P.OmniBarCmdType.IMPORT:return[3,5]}return[3,7];case 1:return[2,W(e.data)];case 2:return g.domToViewPort(T.lastMousePos,T.viewPort,m.defaultViewPort),I.toastMsg("TODO"),[3,8];case 3:case 4:return I.toastMsg("TODO"),[3,8];case 5:return[4,u(e.data,{pos:T.lastMousePos})];case 6:return r.sent(),t=E.vAdd({x:0,y:0},T.lastMousePos),n=g.createNewPartInstance(e.data.part,0,t,j(o)),i=y.default(D,(function(e){e.part.instances.push(n)})),M(i,b.functionalChange("add-imported-part")),[3,8];case 7:I.AppToaster.show({intent:"warning",message:"Not supported yet"}),r.label=8;case 8:return F(),[2]}}))}))}),[F,W,T.lastMousePos,T.viewPort,u,o,D,M]);return p.jsx("div",i({className:"project-editor"},{children:function(){if(v.isCodePart(k))throw new Error("Impossible state");return p.jsxs(f.Fragment,{children:[p.jsx(m.GroupedPartEditor,{insId:"root."+k.id,ref:t,boardData:T,onChangeBoardData:L,part:k,onGoToPartDef:q,onChangePart:U,resolvedFlow:o,clipboardData:A,onCopy:H,partIoEditable:!k.id.startsWith("Trigger"),onInspectPin:e.onInspectPin,onRequestHistory:e.onRequestHistory,onRequestImportables:e.onQueryImportables,onImportPart:e.onImportPart,onShowOmnibar:B,onExtractInlinePart:e.onExtractInlinePart},k.id),z?p.jsx(P.Omnibar,{flow:D,repo:o.dependencies,onCommand:$,visible:z,onClose:F,onRequestImportables:e.onQueryImportables},void 0):null]},void 0)}()}),void 0)})))},57779:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,o=e.length;n<i;n++,o++)e[o]=t[n];return e},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BasePartEditor=void 0;var u=n(24246),a=r(n(27378)),s=n(18265),c=n(42272),l=r(n(77324)),d=n(79927),p=r(n(63300)),f=n(18185),v=n(23489),m=f.MultiSelect.ofType();t.BasePartEditor=function(e){var t,n,r=e.part,f=e.onChange,y=s.entries(r.inputs),h=y.filter((function(e){return"required"===e[1].mode})).map((function(e){return e[0]})),g=y.filter((function(e){return"optional"===e[1].mode})).map((function(e){return e[0]})),I=y.filter((function(e){return"required-if-connected"===e[1].mode})).map((function(e){return e[0]})),b=a.default.useState(!1),P=b[0],_=b[1],C=s.okeys(r.outputs),x=a.default.useCallback((function(e){f(i(i({},r),{id:e}))}),[r,f]),O=a.default.useCallback((function(e){var t=e?e.split(","):void 0;"[]"===e&&(t=[]),console.log(e,t),f(i(i({},r),{completionOutputs:t}))}),[r,f]),E=a.default.useCallback((function(e){var t=e?e.split(","):void 0;f(i(i({},r),{reactiveInputs:t}))}),[r,f]),w=a.default.useCallback((function(e,t){var n=p.default(r,(function(n){n.inputs[e]=s.partInput("any",t)}));f(n)}),[r,f]),j=a.default.useCallback((function(e){var t=p.default(r,(function(t){delete t.inputs[e]}));f(t)}),[r,f]),S=a.default.useCallback((function(e){var t=p.default(r,(function(t){t.outputs[e]=s.partOutput("any")}));f(t)}),[r,f]),D=a.default.useCallback((function(e){var t=p.default(r,(function(t){delete t.outputs[e]}));f(t)}),[r,f]),T=a.default.useCallback((function(e){try{var t=JSON.parse(e),n=p.default(r,(function(e){Object.entries(t).forEach((function(t){var n=t[0],o=t[1],r=e.inputs[n],u=e.outputs[n];r?e.inputs[n]=i(i({},r),{type:o}):u&&(e.outputs[n]=i(i({},u),{type:o}))}))}));f(n)}catch(o){console.error("cannot parse")}}),[f,r]),k=o(o([],s.entries(r.inputs)),s.entries(r.outputs)).map((function(e){return[e[0],e[1].type]})).reduce((function(e,t){var n,o=t[0],r=t[1];return i(i({},e),((n={})[o]=r,n))}),{});return u.jsxs("div",i({className:"base-part-editor"},{children:[u.jsx("div",i({className:"form-row"},{children:u.jsx(c.FormGroup,i({label:"Part Name",labelFor:"text-input",labelInfo:"(required)"},{children:u.jsx(c.InputGroup,{id:"part-name",disabled:e.idDisabled,placeholder:"Part ID",value:r.id,onChange:function(e){return x(e.target.value)}},void 0)}),void 0)}),void 0),u.jsx(c.FormGroup,i({label:"Required Inputs"},{children:u.jsx(m,{selectedItems:h,placeholder:"Enter input names here",items:[],tagRenderer:function(e){return e},onItemSelect:function(e){return w(e,"required")},onRemove:j,resetOnSelect:!0,itemRenderer:function(e){return u.jsx("span",{children:e},void 0)},createNewItemFromQuery:function(e){return e},createNewItemRenderer:d.renderCreateIOOption,fill:!0},void 0)}),void 0),!0!==e.hiddenOutputs?u.jsx(c.FormGroup,i({label:"Outputs"},{children:u.jsx(m,{selectedItems:C,placeholder:"Enter output names here",items:[],tagRenderer:function(e){return e},onItemSelect:S,onRemove:D,resetOnSelect:!0,itemRenderer:function(e){return u.jsx("span",{children:e},void 0)},createNewItemFromQuery:function(e){return e},createNewItemRenderer:d.renderCreateIOOption,fill:!0},void 0)}),void 0):null,u.jsx(c.Checkbox,i({checked:P,onChange:function(e){return _(e.target.checked)}},{children:"Show advanced options"}),void 0),u.jsxs(c.Collapse,i({isOpen:P},{children:[u.jsx(c.FormGroup,i({label:"Optional Inputs"},{children:u.jsx(m,{selectedItems:g,placeholder:"Enter input names here",items:[],tagRenderer:function(e){return e},onItemSelect:function(e){return w(e,"optional")},onRemove:j,resetOnSelect:!0,itemRenderer:function(e){return u.jsx("span",{children:e},void 0)},createNewItemFromQuery:function(e){return e},createNewItemRenderer:d.renderCreateIOOption,fill:!0},void 0)}),void 0),u.jsx(c.FormGroup,i({label:"Required-if-connected Inputs"},{children:u.jsx(m,{selectedItems:I,placeholder:"Enter input names here",items:[],tagRenderer:function(e){return e},onItemSelect:function(e){return w(e,"required-if-connected")},onRemove:j,resetOnSelect:!0,itemRenderer:function(e){return u.jsx("span",{children:e},void 0)},createNewItemFromQuery:function(e){return e},createNewItemRenderer:d.renderCreateIOOption,fill:!0},void 0)}),void 0),u.jsx(c.FormGroup,i({label:"Types"},{children:u.jsx(l.default,{height:"100px",theme:"vs-dark",defaultLanguage:"json",value:JSON.stringify(k,null,4),onChange:function(e){return T(e||"")}},void 0)}),void 0),u.jsx(c.FormGroup,i({label:"Completion Outputs"},{children:u.jsx(c.InputGroup,{id:"completion-outputs",placeholder:"completion outputs",value:(null===(t=r.completionOutputs)||void 0===t?void 0:t.join(","))||"",onChange:function(e){return O(e.target.value)}},void 0)}),void 0),u.jsx(c.FormGroup,i({label:"Reactive Inputs"},{children:u.jsx(c.InputGroup,{id:"reactive-inputs",placeholder:"Reactive inputs",value:(null===(n=r.reactiveInputs)||void 0===n?void 0:n.join(","))||"",onChange:function(e){return E(e.target.value)}},void 0)}),void 0)]}),void 0),u.jsx(c.FormGroup,i({label:"Preview"},{children:u.jsx("div",i({className:"preview-wrapper"},{children:u.jsx(v.PartPreview,{part:r},void 0)}),void 0)}),void 0)]}),void 0)}},79927:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CodePartEditor=t.renderCreateIOOption=void 0;var r=n(24246),u=n(42272),a=o(n(27378)),s=o(n(77324)),c=n(57779);t.renderCreateIOOption=function(e,t,n){return r.jsx(u.MenuItem,{icon:"add",text:'Create "'+e+'"',active:t,onClick:n,shouldDismissPopover:!1},void 0)};t.CodePartEditor=function(e){var t=e.part,n=e.onChange,o=a.default.useCallback((function(e){n(i(i({},t),{fnCode:e}))}),[t,n]),l=a.default.useCallback((function(e){n(i(i({},t),{customViewCode:e}))}),[t,n]),d=a.default.useCallback((function(e){n(i(i(i({},t),e),{completionOutputs:e.completionOutputs}))}),[t,n]);return r.jsxs("div",i({className:"code-part-editor"},{children:[r.jsx(c.BasePartEditor,{part:t,onChange:d,idDisabled:e.editMode},void 0),r.jsx(u.FormGroup,i({label:"Code"},{children:r.jsx(s.default,{height:"200px",theme:"vs-dark",defaultLanguage:"javascript",value:t.fnCode,onChange:function(e){return o(e||"")}},void 0)}),void 0),r.jsxs(u.FormGroup,i({label:"Custom View"},{children:[r.jsx(s.default,{height:"100px",theme:"vs-dark",defaultLanguage:"ejs",value:t.customViewCode,onChange:function(e){return l(e||"")}},void 0),r.jsxs(u.Callout,{children:["Example:",r.jsx(u.Code,{children:'<% if (inputs.key) { %>\n              Pick "<%- inputs.key %>"\n              <% }  else { %>\n                Pick\n              <% } %>\n              '},void 0)]},void 0)]}),void 0)]}),void 0)}},51424:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.metaChange=t.functionalChange=void 0;t.functionalChange=function(e){return{type:"functional",message:e}};t.metaChange=function(e){return void 0===e&&(e="n/a"),{type:"meta",message:e}}},63213:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InlineCodeModal=void 0;var s=n(24246),c=u(n(27378)),l=a(n(77324)),d=n(42272),p=a(n(60042)),f=n(52178),v=n(18265),m=n(28983),y="`Result is ${inputs.a + inputs.b}`";t.InlineCodeModal=c.memo((function(e){var t,n=e.initialValue,o=e.initialType,r=c.useState(v.isDefined(n)?n:y),u=r[0],a=r[1],h=c.useState(o||v.CodePartTemplateTypeInline.VALUE),g=h[0],I=h[1],b=s.jsxs("div",{children:[s.jsxs("p",{children:['You can add variables to by referrencing the "inputs" object.',s.jsx("br",{},void 0)," For example:",s.jsx(d.Code,{children:"`Hello {inputs.name}`"},void 0),' will expose an input pin named "name"']},void 0),s.jsxs("p",{children:["You can also use ternery expressions, arithmetic operators and more!",s.jsx("br",{},void 0),"For example:",s.jsx(d.Code,{children:"inputs.a > inputs.b ? inputs.a + 42 : Math.random() * inputs.b"},void 0)]},void 0)]},void 0),P=s.jsxs("span",{children:["Type in any valid JS value, such as ",s.jsx(d.Code,{children:"true"},void 0),", ",s.jsx(d.Code,{children:"42"},void 0),","," ",s.jsx(d.Code,{children:'["bob", "alice", "dave"]'},void 0),".",s.jsx("br",{},void 0)," Dynamic inputs may also be used"]},void 0),_=s.jsxs("span",{children:["Write any JS code and return a value.",s.jsx("br",{},void 0)," The returned value will be the output.",s.jsx("br",{},void 0)," Example:",s.jsx(d.Code,{children:"const a = inputs.a; const b = inputs.b; return Math.floor(a/b);"},void 0)]},void 0),C=f.getVariables(u);return c.useEffect((function(){u===y&&g===v.CodePartTemplateTypeInline.FUNCTION&&a("return "+y),u==="return "+y&&g===v.CodePartTemplateTypeInline.VALUE&&a(y)}),[u,g]),s.jsxs(d.Dialog,i({isOpen:!0,title:"Inline Value / Code",onClose:e.onCancel,canEscapeKeyClose:!1,className:"inline-code-modal"},{children:[s.jsxs("main",i({className:p.default(d.Classes.DIALOG_BODY),onKeyDown:function(t){"Enter"===t.key&&t.metaKey&&e.onSubmit(g,u)},tabIndex:0},{children:[s.jsxs(d.RadioGroup,i({inline:!0,onChange:function(e){return I(e.target.value)},selectedValue:g},{children:[s.jsx(d.Radio,{labelElement:s.jsxs(c.Fragment,{children:["Value"," ",s.jsx(m.Tooltip2,i({content:P,placement:"top"},{children:s.jsx(d.Icon,{icon:"info-sign",intent:"primary"},void 0)}),void 0)]},void 0),value:v.CodePartTemplateTypeInline.VALUE},void 0),s.jsx(d.Radio,{labelElement:s.jsxs(c.Fragment,{children:["Function"," ",s.jsx(m.Tooltip2,i({content:_,placement:"top"},{children:s.jsx(d.Icon,{icon:"info-sign",intent:"primary"},void 0)}),void 0)]},void 0),value:v.CodePartTemplateTypeInline.FUNCTION},void 0)]}),void 0),s.jsx(l.default,{height:"80px",theme:"vs-dark",defaultLanguage:"javascript",value:u,onChange:function(e){return a(e||"")},onMount:function(e){e&&e.updateOptions({lineNumbers:"off",minimap:{enabled:!1}})}},void 0),(t=u.includes("return"),t&&g===v.CodePartTemplateTypeInline.VALUE?s.jsx(d.Callout,i({intent:d.Intent.WARNING},{children:'When using the "value" type you are not expected to return anything'}),void 0):t||g!==v.CodePartTemplateTypeInline.FUNCTION?null:s.jsxs(d.Callout,i({intent:d.Intent.DANGER},{children:['When using the "function" type you are expected to'," ",s.jsx(d.Code,{children:"return"},void 0)," a value.",s.jsx("br",{},void 0),"Example: ",s.jsx(d.Code,{children:"return 42 + Date.now();"},void 0)]}),void 0)),s.jsxs(d.Callout,i({intent:d.Intent.NONE},{children:["Input pins detected:"," ",C.length?C.map((function(e){return s.jsx(d.Code,{children:e},e)})):"None",s.jsx(m.Tooltip2,i({content:b},{children:s.jsx(d.Icon,{icon:"info-sign",intent:d.Intent.PRIMARY},void 0)}),void 0)]}),void 0)]}),void 0),s.jsx("div",i({className:d.Classes.DIALOG_FOOTER},{children:s.jsxs("div",i({className:d.Classes.DIALOG_FOOTER_ACTIONS},{children:[s.jsx(d.Button,i({onClick:e.onCancel},{children:"Cancel"}),void 0),s.jsx(d.Button,i({onClick:function(){return e.onSubmit(g,u)},intent:d.Intent.PRIMARY,className:"save-btn"},{children:"Save"}),void 0)]}),void 0)}),void 0)]}),void 0)}))},52178:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.createInlineCodePart=t.getVariables=void 0;var o=n(18265),r=n(18265);t.getVariables=function(e){return(e.match(/inputs\.([a-zA-Z]\w*)/g)||[]).map((function(e){return e.replace(/inputs\./,"")}))};t.createInlineCodePart=function(e){var n=e.code,u=e.customView,a=e.partId,s=e.type,c=t.getVariables(n).reduce((function(e,t){var n;return i(i({},e),((n={})[t]=o.partInput("any","required"),n))}),{}),l={value:o.partOutput("any")},d=s===o.CodePartTemplateTypeInline.FUNCTION?"const result = (function() { "+n+"}());\n  Promise.resolve(result).then(val => outputs.value.next(val))":"const result = ("+n+"); Promise.resolve(result).then(val => outputs.value.next(val))",p=btoa(n);return r.codePart({id:a||"Inline Code "+o.randomInt(99999),inputs:c,outputs:l,fnCode:d,customViewCode:u||n,dataBuilderSource:p,templateType:s,completionOutputs:["value"],defaultStyle:{size:"regular",icon:"code",cssOverride:{fontFamily:"monospace",fontWeight:"500"}},description:"Custom inline "+(s===o.CodePartTemplateTypeInline.VALUE?"value":"function")})}},24935:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t},a=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,o=e.length;n<i;n++,o++)e[o]=t[n];return e},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Omnibar=t.OmniBarCmdType=void 0;var c,l=n(24246),d=u(n(27378)),p=n(18185),f=n(18265),v=n(42272),m=s(n(60042));!function(e){e.ADD="add",e.ADD_VALUE="add-value",e.CREATE_CODE_PART="create-core-part",e.CREATE_GROUPED_PART="create-grouped-part",e.IMPORT="import"}(c=t.OmniBarCmdType||(t.OmniBarCmdType={}));var y=[];t.Omnibar=function(e){var t=e.repo,n=d.useState(""),o=n[0],r=n[1],u=d.useState(null),s=u[0],h=u[1],g=d.useState([]),I=g[0],b=g[1];d.useEffect((function(){var e=f.keys(t).map((function(e){return{title:""+t[e].id,cmd:{type:c.ADD,data:e},extra:"current flow"}})),n=I.map((function(e){return{title:""+e.part.id,description:e.part.description,cmd:{type:c.IMPORT,data:e},extra:""+e.module}})),i={title:"Add inline value or code",suggestOnEmpty:!0,cmd:{type:c.ADD_VALUE}},o=a(a(a(a([],y),n),[i]),e);h(o)}),[t,I]),d.useEffect((function(){e.onRequestImportables&&e.onRequestImportables(o).then((function(e){b(e)}))}),[e,o]);var P=d.useCallback((function(e,t){var n=t.handleClick,o=t.modifiers,r=(t.query,t.index);if(!o.matchesPredicate)return null;var u=""+e.title;return l.jsx(v.MenuItem,{active:o.active,disabled:o.disabled,onClick:n,text:l.jsxs("div",i({className:m.default("omnibar-item",{active:o.active})},{children:[l.jsxs("div",i({className:"title"},{children:[u," ",e.extra?l.jsx("span",i({className:"extra"},{children:e.extra}),void 0):null]}),void 0),e.description?l.jsx("div",i({className:"description"},{children:e.description}),void 0):null]}),void 0)},r)}),[]),_=d.useCallback((function(e,t){var n=e.toLowerCase().split("").map((function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")+".*"})).join(""),i=new RegExp(n);return!!t.title.toLowerCase().match(i)}),[]),C=d.useCallback((function(t){e.onCommand(t.cmd),e.onClose()}),[e]);return s?l.jsx(p.Omnibar,{query:o,onQueryChange:r,onClose:e.onClose,noResults:l.jsx(v.MenuItem,{disabled:!0,text:"No results."},void 0),itemPredicate:_,isOpen:e.visible,items:s,initialContent:void 0,onItemSelect:C,itemRenderer:P,inputProps:{placeholder:"Search for parts or commands.."}},void 0):null}},91312:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(2297),t)},2297:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function u(e){try{s(i.next(e))}catch(t){r(t)}}function a(e){try{s(i.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,a)}s((i=i.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return u.label++,{value:r[1],done:!1};case 5:u.label++,i=r[1],r=[0];continue;case 7:r=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){u=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){u.label=r[1];break}if(6===r[0]&&u.label<o[1]){u.label=o[1],o=r;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(r);break}o[2]&&u.ops.pop(),u.trys.pop();continue}r=t.call(e,u)}catch(a){r=[6,a],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.usePorts=t.useConfirm=t.usePrompt=t.PortsContext=t.defaultPorts=void 0;var r=n(40232),u=n(27378),a=function(){return i(void 0,void 0,void 0,(function(){return o(this,(function(e){throw new Error("Not implemented")}))}))};t.defaultPorts={prompt:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=e.text,n=e.defaultValue;return i(void 0,void 0,void 0,(function(){return o(this,(function(e){return[2,prompt(""+t,n)]}))}))})),openFile:function(e){return i(void 0,void 0,void 0,(function(){return o(this,(function(t){return r.toastMsg("Open "+e),[2]}))}))},confirm:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=e.text;return i(void 0,void 0,void 0,(function(){return o(this,(function(e){return[2,confirm(t)]}))}))})),readFlow:a,saveFlow:a,resolveDeps:a,getImportables:a,onFlowChange:a},t.PortsContext=u.createContext(t.defaultPorts);t.usePrompt=function(){var e=u.useContext(t.PortsContext).prompt;return function(t,n){return e({text:t,defaultValue:n})}};t.useConfirm=function(){var e=u.useContext(t.PortsContext).confirm;return function(t){return e({text:t})}};t.usePorts=function(){return u.useContext(t.PortsContext)}},27234:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function u(e){try{s(i.next(e))}catch(t){r(t)}}function a(e){try{s(i.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,a)}s((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return u.label++,{value:r[1],done:!1};case 5:u.label++,i=r[1],r=[0];continue;case 7:r=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){u=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){u.label=r[1];break}if(6===r[0]&&u.label<o[1]){u.label=o[1],o=r;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(r);break}o[2]&&u.ops.pop(),u.trys.pop();continue}r=t.call(e,u)}catch(a){r=[6,a],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},u=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,o=e.length;n<i;n++,o++)e[o]=t[n];return e},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.groupSelected=void 0;var s=n(18265),c=a(n(63300)),l=n(78504);t.groupSelected=function(e,t,n,a,d){return o(void 0,void 0,void 0,(function(){var o,p,f,v,m,y,h,g,I,b,P,_;return r(this,(function(r){switch(r.label){case 0:if(o=t.instances,p=t.connections,f=o.filter((function(t){return e.includes(t.id)})),v=p.filter((function(t){var n=t.from,i=t.to;return-1!==e.indexOf(n.insId)||-1!==e.indexOf(i.insId)})),!f.length)throw new Error("grouped without selections");return[4,l.createGroup(f,v,n,d)];case 1:return m=r.sent(),y=m.groupedPart,h=m.renamedInputs,g=m.renamedOutputs,I=f.reduce((function(e,t){return s.middlePos(t.pos,e)}),o[0].pos),b="ref"===a?s.partInstance(y.id+"-ins",y.id,{},I):s.inlinePartInstance(y.id+"-ins",y,{},I),P=o.filter((function(t){return-1===e.indexOf(t.id)})),_=p.map((function(e){var t=e.from.insId+"."+e.from.pinId,n=e.to.insId+"."+e.to.pinId;return h[n]?i(i({},e),{to:{insId:b.id,pinId:h[n]}}):g[t]?i(i({},e),{from:{insId:b.id,pinId:g[t]}}):e})).filter((function(t){return-1===e.indexOf(t.from.insId)&&-1===e.indexOf(t.to.insId)})),[2,{newPart:y,currentPart:c.default(t,(function(e){e.instances=u(u([],P),[b]),e.connections=_}))}]}}))}))}},12465:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t},a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function u(e){try{s(i.next(e))}catch(t){r(t)}}function a(e){try{s(i.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,a)}s((i=i.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return u.label++,{value:r[1],done:!1};case 5:u.label++,i=r[1],r=[0];continue;case 7:r=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){u=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){u.label=r[1];break}if(6===r[0]&&u.label<o[1]){u.label=o[1],o=r;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(r);break}o[2]&&u.ops.pop(),u.trys.pop();continue}r=t.call(e,u)}catch(a){r=[6,a],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},c=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,o=e.length;n<i;n++,o++)e[o]=t[n];return e},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GroupedPartEditor=t.defaultBoardData=t.defaultViewPort=t.PART_HEIGHT=void 0;var d=n(24246),p=u(n(27378)),f=l(n(98739)),v=n(18265),m=n(53574),y=n(64153),h=n(12901),g=n(87944),I=n(52395),b=n(63300),P=n(27378),_=n(14648),C=l(n(54037)),x=n(42272),O=n(20712),E=n(99743),w=n(35683),j=n(18265),S=n(56111),D=n(65883),T=n(14264),k=n(40232),N=n(51424),M=n(63213),R=n(52178),A=l(n(98784)),H=n(27234),V=n(91312),z=l(n(60042)),G=n(87816),F=n(96149),B=n(20685),L=n(83779),U=n(2939),q=n(83438),W=p.memo(x.Slider),$=function(e){return null};t.PART_HEIGHT=28;t.defaultViewPort={pos:{x:0,y:0},zoom:1},t.defaultBoardData={selected:[],viewPort:t.defaultViewPort,lastMousePos:{x:0,y:0}},t.GroupedPartEditor=p.memo(p.forwardRef((function(e,n){var o,r=e.onChangePart,u=e.partIoEditable,l=e.onCopy,J=e.onGoToPartDef,X=e.onRequestHistory,K=e.onInspectPin,Q=e.boardData,Z=e.onChangeBoardData,ee=e.insId,te=e.part,ne=e.onShowOmnibar,ie=e.resolvedFlow,oe=e.onImportPart,re=e.parentViewport||t.defaultViewPort,ue=P.useState(i(i({},ie.dependencies),((o={})[ie.main.id]=ie.main,o))),ae=ue[0],se=ue[1];P.useEffect((function(){var e;se(i(i({},ie.dependencies),((e={})[ie.main.id]=ie.main,e)))}),[ie]);var ce=Q.selected,le=Q.from,de=Q.to,pe=te.instances,fe=te.connections,ve=te.inputsPosition,me=te.outputsPosition,ye=te.inputs,he=te.outputs,ge=P.useState(),Ie=ge[0],be=ge[1],Pe=P.useState(),_e=Pe[0],Ce=Pe[1],xe=P.useState(0),Oe=xe[0],Ee=xe[1],we=P.useState(),je=we[0],Se=we[1],De=P.useState(!1),Te=De[0],ke=De[1],Ne=P.useState(),Me=Ne[0],Re=Ne[1],Ae=P.useState(),He=Ae[0],Ve=Ae[1],ze=P.useState(),Ge=ze[0],Fe=ze[1],Be=P.useState(),Le=Be[0],Ue=Be[1],qe=P.useRef();g.useDidMount((function(){qe.current=ot.current.querySelector(".inline-editor-portal-root")}));var We=V.useConfirm(),$e=V.usePrompt(),Ye=Q.viewPort,Je=P.useRef(!0),Xe=p.useCallback((function(e){Z({viewPort:e})}),[Z]),Ke=p.useCallback((function(e,t,n){return X(e,t,n)}),[X]),Qe=p.useCallback((function(e,t,n){return K(ee+"."+e,t,n)}),[K,ee]),Ze=p.useCallback((function(e,t){var n=B.handleConnectionCloseEditorCommand(te,{from:e,to:t}),i=v.isInternalConnectionNode(t)?pe.find((function(e){return e.id===t.insId})):null,o=(i?i.inputConfig:{})[t.pinId],u=v.isStaticInputPinConfig(o)?L.handleDetachConstEditorCommand(n,t.insId,t.pinId):n;r(u,N.functionalChange("close-connection")),Z({from:void 0,to:void 0})}),[pe,r,Z,te]),et=p.useCallback((function(){return a(void 0,void 0,void 0,(function(){var e,t;return s(this,(function(n){switch(n.label){case 0:return[4,$e("New grouped part name?")];case 1:return e=n.sent(),[4,H.groupSelected(Q.selected,te,e,"inline",$e)];case 2:return t=n.sent().currentPart,r(t,N.functionalChange("group part")),k.toastMsg("Part grouped!"),[2]}}))}))}),[$e,Q.selected,r,te]);P.useEffect((function(){if(je){var e=setTimeout((function(){Se(void 0)}),350);return function(){return clearTimeout(e)}}}),[je]);var tt=P.useState(),nt=tt[0],it=tt[1];P.useEffect((function(){T.preloadMonaco()}),[]);var ot=P.useRef(),rt=C.default(ot),ut=p.useRef({x:400,y:400}),at=g.useBoundingclientrect(ot)||E.vZero,st=function(){var e=I.fitViewPortToPart(te,ae,rt);F.animateViewPort(Ye,e,500,(function(e){Xe(e)}))},ct=p.useCallback((function(e,t){var n=Q.to,i=Q.from,o="input"===t?i:n,r="input"===t?n:i,u={pinId:e,insId:v.THIS_INS_ID},a="input"===t?{from:u}:{to:u};o&&o.pinId===e?Z({from:void 0,to:void 0}):r?"input"===t&&n?Ze(u,n):i&&Ze(i,u):Z(a)}),[Q,Z,Ze]),lt=p.useCallback((function(e,t,n){var i=b.produce(te,(function(i){"input"===e?i.inputs[t].description=n:i.outputs[t].description=n}));r(i,N.functionalChange("Part io description"))}),[r,te]),dt=p.useCallback((function(e,t,n){var i=Q.from,o=Q.to;if(le&&le.insId===e.id||de&&de.insId===e.id)Z({from:void 0,to:void 0});else if("input"===n){var r={insId:e.id,pinId:t};!o||o.pinId!==t||v.isInternalConnectionNode(o)&&o.insId!==e.id?le?Ze(le,r):Z({to:r,selected:[]}):Z({to:void 0})}else{var u={insId:e.id,pinId:t};!i||i.pinId!==t||v.isInternalConnectionNode(i)&&i.insId!==e.id?de?Ze(u,de):Z({from:u,selected:[]}):Z({from:void 0})}}),[Q,le,Z,Ze,de]);P.useEffect((function(){if(!Te&&rt.width){var t=I.fitViewPortToPart(te,ae,rt);e.thumbnailMode||Xe(t);var n=setTimeout((function(){var t=I.fitViewPortToPart(te,ae,rt);e.thumbnailMode||Xe(t),ke(!0)}),100);return function(){return clearTimeout(n)}}}),[te,rt,e.thumbnailMode,Te,ae,Xe]);var pt=p.useCallback((function(){var e=Q.selected,t=te.instances.filter((function(t){return e.includes(t.id)})).map((function(e){return i(i({},e),{id:e.id+"-copy"})})),n=te.connections.filter((function(t){var n=t.from,i=t.to;return e.includes(n.insId)&&e.includes(i.insId)}));l({instances:t,connections:n})}),[Q,l,te]),ft=p.useCallback((function(){var t=G.pasteInstancesCommand(te,ut.current,e.clipboardData),n=t.newPart,i=t.newInstances;r(n,N.functionalChange("paste instances")),Z({selected:i.map((function(e){return e.id}))})}),[r,Z,te,e.clipboardData]),vt=p.useCallback((function(){var e=te.id;nt?"input"===nt.type?nt.ins.id===e?ct(nt.pin,"input"):dt(nt.ins,nt.pin,"input"):nt.ins.id===e?ct(nt.pin,"output"):dt(nt.ins,nt.pin,"output"):console.warn("tried selecting closest with no pin nearby")}),[te.id,nt,ct,dt]),mt=p.useCallback((function(e,t){var n="mouse"===t?ut.current:{x:Ye.pos.x+rt.width/2,y:Ye.pos.y+rt.height/2},o=I.centerBoardPosOnTarget(n,rt,e,Ye);Xe(i(i({},Ye),{zoom:e,pos:o}))}),[Xe,Ye,rt]);_.useHotkeys("cmd+=",(function(e){mt(Ye.zoom+.1,"hotkey"),e.preventDefault()}),Je,[Ye,mt]),_.useHotkeys("cmd+-",(function(e){mt(Ye.zoom-.1,"hotkey"),e.preventDefault()}),Je,[mt,Ye.zoom]),_.useHotkeys("cmd+o",(function(e){e.preventDefault(),k.toastMsg("Ordering");var t=[];S.orderGroupedPart(te,ae,200,(function(e,n){n%3==0&&t.push(e)})),a(void 0,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return t.length?(e=t.shift(),k.toastMsg("Step "+t.length+"!"),[4,v.delay(200)]):[3,2];case 1:return n.sent(),r(e,N.metaChange("order-step")),k.toastMsg("Step "+t.length+"! done"),[3,0];case 2:return[2]}}))}))}),Je,[r,te,ie]),_.useHotkeys("cmd+0",(function(e){mt(1),e.preventDefault()}),Je,[Ye,mt]);var yt=function(){Z({from:void 0,to:void 0,selected:[]})},ht=p.useCallback((function(e,t){be(e.id),r(i({},te),N.metaChange("drag-start"))}),[r,te]),gt=p.useCallback((function(e,t,n){var i=I.handleInstanceDrag(te,e,n,t,ce,Ie),o=i.newValue,u=i.newSelected;r(o,N.metaChange("drag-move")),u&&Z({selected:u})}),[Ie,r,Z,ce,te]),It=p.useCallback((function(e,t){t.preventDefault(),t.stopPropagation(),be(void 0)}),[]),bt=p.useCallback((function(e,t){t.preventDefault(),t.stopPropagation(),be(v.THIS_INS_ID)}),[]),Pt=p.useCallback((function(t,n,i,o){return a(void 0,void 0,void 0,(function(){var r,u,a;return s(this,(function(s){return i.preventDefault(),i.stopPropagation(),r=o.x,u=o.y,a=b.produce(te,(function(e){"input"===t?e.inputsPosition[n]={x:r,y:u}:e.outputsPosition[n]={x:r,y:u}})),e.onChangePart(a,N.metaChange("part-io-drag-move")),[2]}))}))}),[e,te]),_t=p.useCallback((function(e,t,n,i){return a(void 0,void 0,void 0,(function(){return s(this,(function(e){return n.preventDefault(),n.stopPropagation(),be(void 0),[2]}))}))}),[]),Ct=p.useCallback((function(e,t){var n=e.id,i=t.shiftKey?ce.filter((function(e){return e!==n})):[],o=t.shiftKey?c(c([],ce),[n]):[n],r=ce.includes(n)?i:o;Z({selected:r,from:void 0,to:void 0})}),[Z,ce]),xt=p.useCallback((function(){var e=te.instances.map((function(e){return e.id}));Z({selected:e,from:void 0,to:void 0})}),[Z,te.instances]),Ot=p.useCallback((function(e){var t=fe.filter((function(t){var n=t.from,i=t.to;return-1===e.indexOf(n.insId)&&-1===e.indexOf(i.insId)})),n=b.produce(te,(function(n){n.connections=t,n.instances=n.instances.filter((function(t){return!e.includes(t.id)}))}));r(n,N.functionalChange("delete-ins")),Z({selected:[]})}),[fe,r,Z,te]),Et=p.useCallback((function(e){Ot([e.id])}),[Ot]),wt=p.useCallback((function(e,t){var n=b.produce(te,(function(n){"input"===e?(delete n.inputs[t],n.connections=n.connections.filter((function(e){return!(v.isExternalConnectionNode(e.from)&&e.from.pinId===t)}))):(n.connections=n.connections.filter((function(e){return!(v.isExternalConnectionNode(e.to)&&e.to.pinId===t)})),n.completionOutputs=(n.completionOutputs||[]).map((function(e){return e.split("+").filter((function(e){return e!==t})).join("+")})).filter((function(e){return!!e})),delete n.outputs[t])}));le.insId===v.THIS_INS_ID&&le.pinId===t?Z({from:void 0}):de.insId===v.THIS_INS_ID&&de.pinId===t&&Z({to:void 0}),r(n,N.functionalChange("remove io pin"))}),[te,le,de,r,Z]),jt=p.useCallback((function(){return a(void 0,void 0,void 0,(function(){var e,t,n;return s(this,(function(i){switch(i.label){case 0:return e=Q.selected,t=Q.from,n=Q.to,0!==e.length?[3,5]:v.isExternalConnectionNode(t)?[4,We("Are you sure you want to remove main input "+t.pinId+"?")]:[3,2];case 1:return i.sent()&&wt("input",t.pinId),[3,4];case 2:return v.isExternalConnectionNode(n)?[4,We("Are you sure you want to remove main output "+n.pinId+"?")]:[3,4];case 3:i.sent()&&wt("output",n.pinId),i.label=4;case 4:return[3,6];case 5:Ot(e),i.label=6;case 6:return[2]}}))}))}),[We,Q,Ot,wt]),St=p.useCallback((function(e,t,n){r(I.toggleStickyPin(te,e.id,t,n),N.functionalChange("toggle-sticky"))}),[r,te]),Dt=p.useCallback((function(){var e=U.handleDuplicateSelectedEditorCommand(te,ce),t=e.newPart,n=e.newInstances;r(t,N.functionalChange("duplicated instances")),Z({selected:n.map((function(e){return e.id}))})}),[r,Z,te,ce]),Tt=p.useCallback((function(e){var t=e.nativeEvent.target;if(0===e.button&&Y(e.nativeEvent,te.id)&&t&&"board-editor-inner"===t.className){if(Date.now()-Oe<300)return void ne(e);Ee(Date.now());var n={x:e.clientX,y:e.clientY},i=E.vSub(n,at),o=I.domToViewPort(i,Ye,re);Ce({from:o,to:o})}}),[te.id,Ye,Oe,at,re,ne]),kt=p.useCallback((function(e){if(Y(e.nativeEvent,te.id)&&_e){if(I.calcSelectionBoxArea(_e)>50){var t=I.getInstancesInRect(_e,ae,Ye,Zt.current,te.instances,at,re);console.log({toSelect:t,selectionBox:_e});var n=e.shiftKey?c(c([],ce),t):t;Z({selected:n})}Ce(void 0)}}),[te.id,te.instances,_e,ae,Ye,at,re,ce,Z]),Nt=p.useCallback((function(e){if(Y(e.nativeEvent,te.id)){Je.current=!0;var t={x:e.clientX,y:e.clientY},n=E.vSub(t,E.vAdd(at,E.vZero)),o=I.domToViewPort(n,Ye,re);_e&&Ce(i(i({},_e),{to:o}));var r=I.findClosestPin(te,ae,n,at,ee,Ye),u=nt;if(r)(!u||u.ins!==r.ins||u.ins===r.ins&&u.pin!==r.pin)&&it({ins:r.ins,type:r.type,pin:r.id});ut.current=o,Z({lastMousePos:ut.current})}else Je.current=!1}),[te,at,Ye,re,_e,ae,ee,nt,Z]),Mt=p.useCallback((function(){it(void 0),Je.current=!1}),[]),Rt=p.useCallback((function(e,t){if(t){var n=v.isInlinePartInstance(e)?e.part:v.getPartDef(e.partId,ae);if(!n)throw new Error("Impossible state inspecting inexisting part");if(!v.isGroupedPart(n))return void k.toastMsg("Cannot inspect a non visual part","warning");Ue({insId:ee+"."+e.id,part:n})}else if(v.isRefPartInstance(e)){var i=v.getPartDef(e,ae);J(i)}else{var o=e.part;if(!v.isCodePart(o))return void(v.isGroupedPart(o)?Ue({insId:e.id,part:o}):k.toastMsg("Editing this type of part is not supported"));var r=atob(o.dataBuilderSource);Fe({insId:e.id,templateType:o.templateType,value:r,type:"existing"}),k.toastMsg("Editing inline grouped part not supported yet")}}),[J,ae,ee]),At=p.useCallback((function(e){if(v.isInlinePartInstance(e)){var t=e.part;if(!v.isGroupedPart(t))return void k.toastMsg("Not supported","warning");var n=b.produce(te,(function(n){var i,o;n.instances=n.instances.filter((function(t){return t.id!==e.id})),n.connections=n.connections.filter((function(t){var n=t.from,i=t.to;return n.insId!==e.id&&i.insId!==e.id})),(i=n.instances).push.apply(i,t.instances),(o=n.connections).push.apply(o,t.connections.filter((function(e){return v.isInternalConnectionNode(e.from)&&v.isInternalConnectionNode(e.to)})))}));r(n,{type:"functional",message:"ungroup"}),Z({selected:[]})}else{var i=v.getPartDef(e.partId,ae);if(!v.isGroupedPart(i))return void k.toastMsg("Not supported","warning")}}),[te,r,Z,ae]),Ht=p.useCallback((function(e){return a(void 0,void 0,void 0,(function(){return s(this,(function(e){return[2]}))}))}),[]),Vt=p.useCallback((function(e,t){var n=L.handleDetachConstEditorCommand(te,e.id,t);r(n,N.functionalChange("detach-const"))}),[r,te]),zt=p.useCallback((function(e,t){var n=e.inputConfig[t]||j.queueInputPinConfig();v.isStaticInputPinConfig(n)&&(Ve(n.value),k.AppToaster.show({message:"Value copied"}))}),[]),Gt=p.useCallback((function(e,t){var n=b.produce(te,(function(n){var i=n.instances.find((function(t){return t.id===e.id}));if(!i)throw new Error("Impossible state");i.inputConfig[t]=v.staticInputPinConfig(He),n.connections=n.connections.filter((function(n){return!v.isInternalConnectionNode(n.to)||!(n.to.insId===e.id&&n.to.pinId===t)}))}));r(n,N.functionalChange("paste const value"))}),[te,r,He]),Ft=p.useCallback((function(e){return a(void 0,void 0,void 0,(function(){var t,n;return s(this,(function(i){switch(i.label){case 0:return[4,$e("New name?")];case 1:return(t=i.sent())?("any",n=b.produce(te,(function(n){if("input"===e)te.inputs||(n.inputs={}),n.inputs[t]=v.partInput("any"),n.inputsPosition[t]=ut.current;else{te.outputs||(n.outputs={}),n.outputs[t]=v.partOutput("any",!1,!1),n.outputsPosition[t]=ut.current;var i=(n.completionOutputs||[])[0];if(i){var o=i.split("+");n.completionOutputs[0]=c(c([],o),[t]).join("+")}else n.completionOutputs=[t]}})),r(n,N.functionalChange("add new io pin")),[2]):[2]}}))}))}),[$e,te,r]),Bt=p.useCallback((function(){return a(void 0,void 0,void 0,(function(){var e,t,n,i;return s(this,(function(o){switch(o.label){case 0:return e=null===(i=te.completionOutputs)||void 0===i?void 0:i.join(","),[4,$e("Edit completion outputs",e)];case 1:return t=o.sent(),h.isDefined(t)&&null!==t&&(n=b.produce(te,(function(e){e.completionOutputs=""===t?void 0:t.split(",")})),r(n,N.functionalChange("change part completions"))),[2]}}))}))}),[$e,r,te]),Lt=p.useCallback((function(){return a(void 0,void 0,void 0,(function(){var e,t,n,i;return s(this,(function(o){switch(o.label){case 0:return e=null===(i=te.reactiveInputs)||void 0===i?void 0:i.join(","),[4,$e("Edit reactive inputs",e)];case 1:return t=o.sent(),h.isDefined(t)&&null!==t&&(n=b.produce(te,(function(e){e.reactiveInputs=""===t?void 0:t.split(",")})),r(n,N.functionalChange("change reactive inputs"))),[2]}}))}))}),[$e,r,te]),Ut=p.useCallback((function(){return a(void 0,void 0,void 0,(function(){var e,t;return s(this,(function(n){switch(n.label){case 0:return[4,$e("Description?",te.description)];case 1:return e=n.sent(),t=b.produce(te,(function(t){t.description=e})),r(t,N.functionalChange("Edit part description")),[2]}}))}))}),[$e,r,te]),qt=p.useCallback((function(e){var t=b.produce(te,(function(t){t.defaultStyle=e}));r(t,N.functionalChange("change default style"))}),[r,te]),Wt=p.useCallback((function(e,t){return a(void 0,void 0,void 0,(function(){var n,i;return s(this,(function(o){switch(o.label){case 0:return[4,$e("New name?",t)];case 1:return n=o.sent()||t,i=I.handleIoPinRename(te,e,t,n),r(i,N.functionalChange("rename io pin")),[2]}}))}))}),[te,r,$e]),$t=p.useCallback((function(e,t){var n=I.handleChangePartInputType(te,e,t);r(n,N.functionalChange("toggle io pin optional"))}),[te,r]),Yt=p.useCallback((function(e,t){var n=ee.split(".").reverse()[0];return X(n,e,t)}),[X,ee]),Jt=p.useCallback((function(e,t,n,i){return a(void 0,void 0,void 0,(function(){var o,r,u,a;return s(this,(function(s){if("input"===n)o=e.inputConfig[t],r=v.isStaticInputPinConfig(o)?JSON.stringify(o.value):void 0,Fe({type:"static-input",insId:e.id,pinId:t,value:r});else{if(u=v.getPartDef(e,ae),a=v.getPartOutputs(u),!a[t])throw new Error("Dbl clicked on un-existing pin");Re({pos:{x:i.clientX,y:i.clientY},ins:e,part:u,pinId:t,pinType:n})}return[2]}))}))}),[ae]),Xt=p.useCallback((function(e,t){return a(void 0,void 0,void 0,(function(){return s(this,(function(n){if(!te.inputs[e])throw new Error("Dbl clicked on un-existing pin");return Re({pos:{x:t.clientX,y:t.clientY},pinId:e,pinType:"input",part:te}),[2]}))}))}),[te]),Kt=p.useCallback((function(e){if(e.metaKey||e.ctrlKey){var t=-.005*e.deltaY;mt(Ye.zoom+t,"mouse"),e.preventDefault(),e.stopPropagation()}else{var n=e.deltaX,i=e.deltaY,o=b.produce(Ye,(function(e){e.pos.x=e.pos.x+n/e.zoom,e.pos.y=e.pos.y+i/e.zoom}));Xe(o),e.stopPropagation(),e.preventDefault()}}),[mt,Xe,Ye]);P.useEffect((function(){var e=ot.current;if(e)return e.addEventListener("wheel",Kt),function(){e.removeEventListener("wheel",Kt)}}),[Kt]);var Qt={backgroundPositionX:I.roundNumber(-Ye.pos.x*Ye.zoom),backgroundPositionY:I.roundNumber(-Ye.pos.y*Ye.zoom),backgroundSize:I.roundNumber(25*Ye.zoom)+"px"},Zt=p.useRef(new Map);p.useEffect((function(){var e=pe.reduce((function(e,t){var n=v.getPartDef(t,ae);return n&&e.set(t.id,v.keys(n.inputs)),e}),new Map),t=pe.reduce((function(e,t){var n=v.getPartDef(t,ae);return n&&e.set(t.id,v.keys(n.outputs)),e}),new Map);e.set(v.THIS_INS_ID,v.keys(te.outputs)),t.set(v.THIS_INS_ID,v.keys(te.inputs));var n=fe.filter((function(n){if(n.to.pinId===v.TRIGGER_PIN_ID||n.from.pinId===v.ERROR_PIN_ID)return!1;var i=e.get(n.to.insId)&&e.get(n.to.insId).includes(n.to.pinId),o=t.get(n.from.insId)&&t.get(n.from.insId).includes(n.from.pinId);return!(i&&o)}));if(n.length>0){k.toastMsg(n.length+" orphan connections removed","warning"),console.log(n.length+" orphan connections removed",n);var i=b.produce(te,(function(e){e.connections=te.connections.filter((function(e){return!n.includes(e)}))}));r(i,N.functionalChange("prune orphan connections"))}}),[pe,r,fe,ie,te,ae]),P.useEffect((function(){var e=new Map(pe.map((function(e){return[e.id,e]})));Zt.current=fe.reduce((function(t,n){var o,r=t.get(n.to.insId)||{},u=r[n.to.pinId]||[],a=i(i({},r),((o={})[n.to.pinId]=c(c([],u),[e.get(n.from.insId)]),o));return t.set(n.to.insId,a),t}),new Map)}),[fe,pe]);var en=p.useCallback((function(){Re(void 0)}),[]),tn=p.useCallback((function(e){return a(void 0,void 0,void 0,(function(){var t,n,i,o;return s(this,(function(u){switch(u.label){case 0:if(!Me)throw new Error("impossible state - quick add menu invoked but not available");switch(t=Me.ins,Me.pos,n=Me.pinId,e.type){case"part":return[3,1];case"import":return[3,2];case"value":return[3,4]}return[3,5];case 1:return(i=I.createNewPartInstance(e.part.id,100,ut.current,ae))&&(o=b.produce(te,(function(e){e.instances.push(i),e.connections.push({from:{insId:t?t.id:v.THIS_INS_ID,pinId:n},to:{insId:i.id,pinId:v.TRIGGER_PIN_ID}})})),r(o,N.functionalChange("add-item-quick-menu")),en()),[3,5];case 2:return[4,oe(e.importablePart,{pos:ut.current,connectTo:{insId:t.id,outputId:n}})];case 3:return u.sent(),en(),[3,5];case 4:if(!t)return k.toastMsg("Cannot add value to main input"),[2];Fe({type:"new-output",insId:t.id,pinId:n}),u.label=5;case 5:return[2]}}))}))}),[Me,ae,te,r,en,oe]),nn=p.useCallback((function(){return a(void 0,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return e=JSON.stringify(te),[4,navigator.clipboard.writeText(e)];case 1:return t.sent(),k.AppToaster.show({message:"Copied!"}),[2]}}))}))}),[te]),on=p.useCallback((function(e){var t,n,o=u?"":" (cannot edit main part, only grouped)";return d.jsxs(x.Menu,{children:[d.jsx(x.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},text:"New Value",onClick:h.preventDefaultAnd((function(){return Fe({type:"new-floating",pos:ut.current})}))},void 0),d.jsx(x.MenuItem,{text:"New input "+o,onMouseDown:function(e){return e.stopPropagation()},onClick:h.preventDefaultAnd((function(){return Ft("input")})),disabled:!u},void 0),d.jsx(x.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},text:"New output "+o,onClick:h.preventDefaultAnd((function(){return Ft("output")})),disabled:!u},void 0),d.jsx(x.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},text:"Copy part to clipboard",onClick:h.preventDefaultAnd(nn)},void 0),d.jsx(x.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},text:"Edit Completion Outputs ("+((null===(t=te.completionOutputs)||void 0===t?void 0:t.join(","))||"n/a")+")",onClick:h.preventDefaultAnd((function(){return Bt()}))},void 0),d.jsx(x.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},text:"Edit Reactive inputs ("+((null===(n=te.reactiveInputs)||void 0===n?void 0:n.join(","))||"n/a")+")",onClick:h.preventDefaultAnd((function(){return Lt()}))},void 0),d.jsx(x.MenuItem,{onMouseDown:function(e){return e.stopPropagation()},text:"Edit description",onClick:h.preventDefaultAnd((function(){return Ut()}))},void 0),d.jsx(x.MenuDivider,{},void 0),d.jsx(x.MenuItem,i({text:"Default Style"},{children:d.jsx(q.PartStyleMenu,{style:te.defaultStyle,onChange:qt,promptFn:$e},void 0)}),void 0)]},void 0)}),[nn,Ft,u,Bt,te,Lt]),rn=p.useCallback((function(e){if(e.preventDefault(),Je.current){var t=I.domToViewPort({x:e.clientX,y:e.clientY},Ye,re),n=on(t);x.ContextMenu.show(n,{left:e.clientX,top:e.clientY})}}),[on,re,Ye]);_.useHotkeys("shift+c",st,Je),_.useHotkeys("cmd+c",pt,Je),_.useHotkeys("cmd+v",ft,Je),_.useHotkeys("esc",yt,Je),_.useHotkeys("backspace",jt,Je),_.useHotkeys("shift+g",et,Je),_.useHotkeys("shift+d",Dt,Je),_.useHotkeys("cmd+a",xt,Je),_.useHotkeys("s",vt,Je);var un=p.useCallback((function(e,t){if(!Le)throw new Error("impossible state");var n=b.produce(te,(function(t){var n=t.instances.find((function(e){return e.id===Le.insId}));if(!n||!v.isInlinePartInstance(n))throw new Error("impossible state");n.part=e}));r(n,N.functionalChange("Inner change: "+t.message)),Ue((function(t){return i(i({},t),{part:e})}))}),[r,Le,te]),an=P.useState({selected:[],viewPort:t.defaultViewPort,lastMousePos:{x:0,y:0}}),sn=an[0],cn=an[1],ln=p.useCallback((function(e){return cn((function(t){return i(i({},t),e)}))}),[]),dn=function(n){return Le&&Le.insId===n.id?{insId:ee+"."+Le.insId,boardData:sn,onChangeBoardData:ln,resolvedFlow:ie,onCopy:l,clipboardData:e.clipboardData,onInspectPin:e.onInspectPin,onGoToPartDef:e.onGoToPartDef,partIoEditable:e.partIoEditable,onRequestHistory:X,part:Le.part,onChangePart:un,onShowOmnibar:ne,parentViewport:t.defaultViewPort,parentBoardPos:at,onExtractInlinePart:e.onExtractInlinePart,onImportPart:e.onImportPart}:void 0},pn=function(){if(le&&("input"===(null==nt?void 0:nt.type)&&(null==nt?void 0:nt.ins.id)!==te.id||(null==nt?void 0:nt.ins.id)===te.id&&"output"===(null==nt?void 0:nt.type))){var e=nt.ins.id===te.id?{pinId:nt.pin,insId:v.THIS_INS_ID}:{insId:nt.ins.id,pinId:nt.pin};if(!v.isInternalConnectionNode(e)&&!v.isInternalConnectionNode(le))return;return{from:le,to:e}}if(de&&("output"===(null==nt?void 0:nt.type)&&(null==nt?void 0:nt.ins.id)!==te.id||(null==nt?void 0:nt.ins.id)===te.id&&"input"===(null==nt?void 0:nt.type))){var t=nt.ins.id===te.id?{pinId:nt.pin,insId:v.THIS_INS_ID}:{insId:nt.ins.id,pinId:nt.pin};if(!v.isInternalConnectionNode(de)&&!v.isInternalConnectionNode(t))return;return{from:t,to:de}}},fn=p.useCallback((function(e,t){var n=b.produce(te,(function(n){n.instances=n.instances.map((function(n){return n.id===e.id?i(i({},n),{visibleInputs:t}):n}))}));r(n,N.functionalChange("change instance visible inputs"))}),[te,r]),vn=p.useCallback((function(e,t){var n=b.produce(te,(function(n){n.instances=n.instances.map((function(n){return n.id===e.id?i(i({},n),{style:t}):n}))}));r(n,N.functionalChange("change instance style"))}),[r,te]),mn=p.useCallback((function(e,t){var n=b.produce(te,(function(n){n.instances=n.instances.map((function(n){return n.id===e.id?i(i({},n),{visibleOutputs:t}):n}))}));r(n,N.functionalChange("change instance visible outputs"))}),[te,r]),yn=p.useCallback((function(e,t){var n=b.produce(te,(function(n){n.instances=n.instances.map((function(n){return n.id===e.id?i(i({},n),{displayName:t}):n}))}));r(n,N.functionalChange("change instance display name"))}),[te,r]);p.useImperativeHandle(n,(function(){return{centerInstance:function(e){var t=te.instances.find((function(t){return t.id===e}));if(t){var n=E.vSub(t.pos,E.vec(rt.width/2,rt.height/2));Xe(i(i({},Ye),{pos:n}))}},centerViewPort:function(){st()},getViewPort:function(){return Ye},clearSelection:function(){yt()}}}));p.useCallback((function(e,t){var n={visibleInputs:e.visibleInputs,visibleOutputs:e.visibleOutputs,inputConfig:e.inputConfig,displayName:e.displayName},o=b.produce(te,(function(t){t.instances=t.instances.map((function(t){return t.id===e.id?i(i({},t),n):t}))}));r(o,N.functionalChange("change instance config - "+t))}),[r,te]);var hn=p.useState([]),gn=(hn[0],hn[1],p.useCallback((function(e,t){var n=t.trim().substr(0,100),i="Inline-value-"+n.substr(0,15).replace(/["'`]/g,""),o=R.createInlineCodePart({code:t,customView:n,partId:i,type:e});switch(Ge.type){case"existing":var u=te.instances.filter((function(e){return e.id===Ge.insId})).filter((function(e){return v.isInlinePartInstance(e)})).map((function(e){return e.part}))[0];if(!u)throw new Error("Unable to find inline part to save to");var a=v.keys(u.inputs),s=v.keys(o.inputs),c=new Set(A.default.difference(a,s)),l=b.produce(te,(function(e){e.instances=e.instances.map((function(e){return e.id===Ge.insId?v.inlinePartInstance(e.id,o,e.inputConfig,e.pos):e})),e.connections=e.connections.filter((function(e){return!(e.to.insId===Ge.insId&&c.has(e.to.pinId))}))}));r(l,N.functionalChange("change inline value")),Fe(void 0);break;case"static-input":var d;try{var p=t.replace(/^['`]/,'"').replace(/['`]$/,'"');d=JSON.parse(p)}catch(P){return void k.toastMsg("Input values must not be formulas or code")}l=b.produce(te,(function(e){e.instances.find((function(e){return e.id===Ge.insId})).inputConfig[Ge.pinId]=v.staticInputPinConfig(d)}));r(l,N.functionalChange("set static input value")),Fe(void 0);break;case"new-floating":var m=v.inlinePartInstance(f.default(),o,{},Ge.pos);l=b.produce(te,(function(e){e.instances.push(m)}));r(l,N.functionalChange("new floating value")),Fe(void 0);break;case"new-output":var y=Ge.insId,h=Ge.pinId,g=te.instances.find((function(e){return e.id===y}));if(!g)throw new Error("Impossible state");var I=v.inlinePartInstance(f.default(),o,{},E.vAdd(g.pos,{x:-50,y:150}));l=b.produce(te,(function(e){e.instances.push(I),e.connections.push({from:v.connectionNode(y,h),to:v.connectionNode(I.id,v.TRIGGER_PIN_ID)})}));r(l,N.functionalChange("new value connected to output")),Fe(void 0)}}),[Ge,r,te])),In=fe.filter((function(e){var t=pn();return!t||!v.connectionDataEquals(t,e)})),bn=p.useCallback((function(){Ue(void 0),cn(t.defaultBoardData)}),[]),Pn=p.useCallback((function(e){var t=b.produce(te,(function(t){var n=t.connections.find((function(t){return v.connectionDataEquals(t,e)}));n.hidden=!n.hidden}));r(t,N.functionalChange("toggle connection hidden"))}),[r,te]),_n=p.useCallback((function(e){var t=b.produce(te,(function(t){t.connections=t.connections.filter((function(t){return!v.connectionDataEquals(t,e)}))}));r(t,N.functionalChange("remove connection"))}),[r,te]);try{return d.jsx("div",i({className:z.default("grouped-part-editor",e.className),"data-id":te.id,onContextMenu:rn},{children:d.jsxs("main",i({className:"board-editor-inner",onMouseDown:Tt,onMouseUp:kt,onMouseMove:Nt,onMouseLeave:Mt,ref:ot,style:Qt},{children:[d.jsx(p.Fragment,{children:d.jsx(D.LayoutDebugger,{vp:Ye,part:te,extraDebug:I.emptyList,mousePos:ut.current},void 0)},void 0),d.jsx(y.ConnectionView,{repo:ae,parentInsId:ee,size:rt,part:te,boardPos:at,instances:pe,connections:In,futureConnection:function(){var e=pn();if(e)return{connection:{from:e.from,to:e.to},type:fe.some((function(t){return v.connectionDataEquals(t,e)}))?"future-remove":"future-add"}}(),onDblClick:v.noop,viewPort:Ye,parentVp:re,selectedInstances:ce,toggleHidden:Pn,removeConnection:_n},void 0),function(){var e=Q.from;return h.entries(ye).map((function(t){var n=t[0],i=t[1];return d.jsx(O.PartIoView,{insId:ee,type:"input",pos:ve[n]||{x:0,y:0},id:n,onDelete:u?wt:void 0,onRename:u?Wt:void 0,onDblClick:Xt,closest:!(!nt||"input"!==nt.type||nt.ins.id!==te.id||nt.pin!==n),connected:!1,inputMode:i.mode,onChangeInputMode:$t,viewPort:Ye,onDragStart:bt,onDragEnd:_t,onDragMove:Pt,pinType:i.type,onSelect:ct,onSetDescription:lt,selected:(null==e?void 0:e.pinId)===n,description:i.description,onRequestHistory:Yt},n)}))}(),pe.map((function(e){return d.jsx(m.InstanceView,{onUngroup:At,onExtractInlinePart:Ht,onDetachConstValue:Vt,onCopyConstValue:zt,onPasteConstValue:Gt,copiedConstValue:He,connectionsPerInput:Zt.current.get(e.id)||I.emptyObj,connectionsPerOutput:I.emptyObj,part:v.getPartDef(e,ae),parentInsId:ee,onPinClick:dt,onPinDblClick:Jt,onDragStart:ht,onDragEnd:It,partDefRepo:ae,onDragMove:gt,onDblClick:Rt,onSelect:Ct,onToggleSticky:St,selected:-1!==ce.indexOf(e.id),dragged:Ie===e.id,onInspectPin:Qe,selectedInput:de&&v.isInternalConnectionNode(de)&&de.insId===e.id?de.pinId:void 0,selectedOutput:le&&v.isInternalConnectionNode(le)&&le.insId===e.id?le.pinId:void 0,closestPin:nt&&nt.ins.id===e.id?nt:void 0,instance:e,connections:fe,onTogglePinBreakpoint:v.noop,onTogglePinLog:v.noop,viewPort:Ye,onRequestHistory:Ke,onChangeVisibleInputs:fn,onChangeVisibleOutputs:mn,onSetDisplayName:yn,onDeleteInstance:Et,forceShowMinimized:le?"input":de?"output":void 0,isConnectedInstanceSelected:ce.some((function(t){return fe.some((function(n){var i=n.from,o=n.to;return i.insId===e.id&&o.insId===t||i.insId===t&&o.insId===e.id}))})),inlineGroupProps:dn(e),onCloseInlineEditor:bn,inlineEditorPortalDomNode:qe.current,onChangeStyle:vn,onGroupSelected:et},e.id)})),function(){if(_e){var e=_e.from,t=_e.to,n=F.logicalPosToRenderedPos(e,Ye),i=F.logicalPosToRenderedPos(t,Ye);console.log(e.x,t.x," | ",n.x,i.x);var o=I.getSelectionBoxRect(n,i),r=o.x,u=o.y,a=o.w,s=o.h;return d.jsx("div",{className:"selection-box",style:{top:u,left:r,width:a,height:s}},void 0)}return null}(),function(){var e=Q.to;return h.entries(he).map((function(t){var n=t[0],i=t[1];return d.jsx(O.PartIoView,{insId:ee,type:"output",pos:me[n]||{x:0,y:0},id:n,onDelete:u?wt:void 0,onRename:u?Wt:void 0,closest:!(!nt||"output"!==nt.type||nt.ins.id!==te.id||nt.pin!==n),connected:!1,viewPort:Ye,onDragStart:bt,onDragEnd:_t,onDragMove:Pt,pinType:i.type,onSelect:ct,onSetDescription:lt,description:i.description,selected:(null==e?void 0:e.pinId)===n,onRequestHistory:Yt},n)}))}(),Me?d.jsx(w.QuickAddMenu,{part:Me.part,pinId:Me.pinId,pinType:Me.pinType,pos:Me.pos,resolvedFlow:ie,onRequestImportables:e.onRequestImportables,onAdd:tn,onClose:en},void 0):null,d.jsxs("div",i({className:"viewport-controls"},{children:[d.jsx(x.Button,i({small:!0,onClick:st},{children:"Reset view"}),void 0),d.jsx(W,{min:.05,max:3,stepSize:.05,labelStepSize:10,labelRenderer:$,onChange:mt,value:Ye.zoom},void 0)]}),void 0),Ge?d.jsx(M.InlineCodeModal,{env:I.emptyObj,initialValue:Ge.value,initialType:"existing"===Ge.type?Ge.templateType:void 0,onCancel:function(){return Fe(void 0)},onSubmit:gn},void 0):null,d.jsx("div",{className:"inline-editor-portal-root"},void 0)]}),void 0)}),void 0)}catch(Cn){return console.error(Cn),d.jsxs("div",{children:["Error rendering board - ",Cn.toString()]},void 0)}})));var Y=function(e,t){var n=e.target.closest(".grouped-part-editor");return n&&n.getAttribute("data-id")===t}},84320:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BasePartView=void 0;var s=n(24246),c=u(n(27378)),l=a(n(60042)),d=a(n(48304));t.BasePartView=function(e){var t=e.dragged,n=e.viewPort,o=e.pos,r=e.onDragEnd,u=e.onDragMove,a=e.onDragStart,p=e.displayMode,f=c.useCallback((function(e,t){a(e,t)}),[a]),v=c.useCallback((function(e,t){var u=o,a=(t.x-u.x)/n.zoom,s=(t.y-u.y)/n.zoom,c=u.x+a,l=u.y+s;r(e,i(i({},t),{x:c,y:l}))}),[o,r,n]),m=c.useCallback((function(e,t){u(e,{x:t.x,y:t.y})}),[u]),y={transform:"scale("+n.zoom+")"},h=l.default("base-part-view",e.className,{dragged:t,"display-mode":p}),g=o.x*n.zoom-n.pos.x*n.zoom,I=o.y*n.zoom-n.pos.y*n.zoom,b={transform:"translate("+(g-o.x)+"px, "+(I-o.y)+"px)"},P=l.default("base-part-view-vp-fixer",{"display-mode":p});return s.jsx("div",i({className:P,style:b},{children:s.jsx(d.default,i({onStop:v,onStart:f,onDrag:m,position:o,cancel:".no-drag"},{children:s.jsx("span",i({className:"base-part-view-wrapper"},{children:s.jsx("div",i({className:h,style:y,id:e.domId},{children:e.children}),void 0)}),void 0)}),void 0)}),void 0)}},20685:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.handleConnectionCloseEditorCommand=void 0;var o=n(18265),r=i(n(63300));t.handleConnectionCloseEditorCommand=function(e,t){var n=t.from,i=t.to;return r.default(e,(function(e){var t=e.connections.find((function(e){var t=o.connectionNodeEquals(n,e.from),r=o.connectionNodeEquals(i,e.to);return t&&r}));t?e.connections=e.connections.filter((function(e){return e!==t})):e.connections.push({from:n,to:i})}))}},83779:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.handleDetachConstEditorCommand=void 0;var o=n(18265),r=i(n(63300)),u=n(52178);t.handleDetachConstEditorCommand=function(e,t,n){return r.default(e,(function(e){var i=e.instances.find((function(e){return e.id===t}));if(!i)throw new Error("Impossible state ins id with no matching instance");var r=i.inputConfig[n];if(!r)throw new Error("impossible state detaching const from unexistent config");if(!o.isStaticInputPinConfig(r))throw new Error("impossible state detaching const with no value");var a=r.value,s=u.createInlineCodePart({code:""+a,type:o.CodePartTemplateTypeInline.VALUE}),c=o.inlinePartInstance("value-"+o.randomInt(999),s,{},{x:i.pos.x,y:i.pos.y-100});if(!e.instances.find((function(e){return e.id===i.id})))throw new Error("impossible state instance not found");i.inputConfig[n]=o.queueInputPinConfig(),e.instances.push(c),e.connections.push(o.connectionData(c.id+".r",i.id+"."+n))}))}},2939:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.handleDuplicateSelectedEditorCommand=void 0;var r=o(n(98739)),u=o(n(63300));t.handleDuplicateSelectedEditorCommand=function(e,t){var n=[];return{newPart:u.default(e,(function(e){var o=e.instances;t.forEach((function(e){var t=o.find((function(t){return t.id===e}));if(!t)throw new Error("impossible state duplicate selected no matching instance");if(t){var u=t.pos,a=i(i({},t),{pos:{x:u.x+20,y:u.y+20},id:r.default()});o.push(a),n.push(a.id)}}))})),newInstances:n}}},87816:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.pasteInstancesCommand=void 0;var r=o(n(63300)),u=o(n(98739));t.pasteInstancesCommand=function(e,t,n){var o=n.instances.map((function(e){return i(i({},e),{pos:t,id:u.default()})})),a=new Map(o.map((function(e,t){return[n.instances[t].id,e.id]})));return{newPart:r.default(e,(function(e){var t,r;(t=e.instances).push.apply(t,o);var u=n.connections.map((function(e){var t=e.from,n=e.to;return{from:i(i({},t),{insId:a.get(t.insId)||t.insId}),to:i(i({},n),{insId:a.get(n.insId)||n.insId})}}));(r=e.connections).push.apply(r,u)})),newInstances:o}}},64153:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionView=t.SingleConnectionView=void 0;var s=n(27378),c=n(24246),l=u(n(27378)),d=a(n(60042)),p=n(18265),f=n(48199),v=n(31872),m=n(29768),y=n(99743),h=n(42272);t.SingleConnectionView=function(e){var t=m.useSsr().isBrowser,n=e.connection,o=e.part,r=e.repo,u=e.instances,a=e.type,s=e.viewPort,g=e.toggleHidden,I=e.parentSelected,b=e.removeConnection,P=n.from,_=p.isInternalConnectionNode(P)&&u.find((function(e){return e.id===P.insId}));if(!_&&p.isInternalConnectionNode(P))throw new Error('impossible state  - "from instance id - ['+P.insId+'] does not exist"');var C=(p.isInternalConnectionNode(P)&&_?p.getPartDef(_,r):o).outputs[P.pinId],x=C&&C.delayed,O=t?function(e){var t=e.connection,n=e.boardPos,i=e.parentInsId,o=e.viewPort,r=t.from;return p.isExternalConnectionNode(r)?f.calcMainInputPosition(r.pinId,i,"input",n,o):f.calcPinPosition(i,r.insId,r.pinId,"output",n,o)}(e):{x:0,y:0},E=t?function(e){var t=e.connection,n=e.boardPos,i=e.parentInsId,o=e.viewPort,r=t.to;return p.isExternalConnectionNode(r)?f.calcMainOutputPosition(r.pinId,i,"output",n,o):f.calcPinPosition(i,r.insId,r.pinId,"input",n,o)}(e):{x:0,y:0},w=y.vDiv(O,e.parentVp.zoom),j=w.x,S=w.y,D=y.vDiv(E,e.parentVp.zoom),T=D.x,k=D.y,N=d.default("connection",{delayed:x,hidden:n.hidden,"parent-selected":I},a),M=v.calcBezierPath({sourceX:j,sourceY:S,targetX:T,targetY:k,curvature:.15}),R=2*s.zoom,A="regular"===a?void 0:6*s.zoom,H=(j+T)/2,V=(S+k)/2,z=l.useCallback((function(e){e.preventDefault(),e.stopPropagation();var t=c.jsxs(h.Menu,{children:[c.jsx(h.MenuItem,{text:n.hidden?"Show connection":"Hide connection",onClick:function(){return g(n)}},void 0),c.jsx(h.MenuItem,{text:"Remove connection",onClick:function(){return b(n)}},void 0)]},void 0);h.ContextMenu.show(t,{left:e.pageX,top:e.pageY})}),[n,b,g]);return c.jsxs(l.Fragment,{children:[c.jsx("path",{d:M,className:N,style:{strokeWidth:R,strokeDasharray:A},onContextMenu:z},void 0),"future-add"===a?c.jsx("text",i({className:"label",x:H,y:V,fontSize:"12px"},{children:"Add connection"}),void 0):null,"future-remove"===a?c.jsx("text",i({className:"label",x:H,y:V,fontSize:"12"},{children:"Remove connection"}),void 0):null]},void 0)};t.ConnectionView=function(e){var n=e.viewPort,o=e.futureConnection,r=e.toggleHidden,u=e.selectedInstances,a=l.useState(0),d=a[0],p=a[1],f=l.useCallback((function(e){return requestAnimationFrame((function(){p((function(e){return(e+1)%9})),e>0&&f(e-1)}))}),[]);l.useEffect((function(){var e=f(10);return function(){cancelAnimationFrame(e)}}),[f]),l.useEffect((function(){var e=function(){f(3)};return window.addEventListener("scroll",e),window.addEventListener("resize",e),function(){window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}}),[f,d]);var v=e.connections.map((function(n){var o=u.includes(n.from.insId)||u.includes(n.to.insId);return s.createElement(t.SingleConnectionView,i({},e,{connection:n,type:"regular",parentSelected:o,key:n.from.insId+n.from.pinId+n.to.insId+n.to.pinId}))}));return o&&v.push(c.jsx(t.SingleConnectionView,i({},e,{connection:o.connection,type:o.type,toggleHidden:r,parentSelected:!1}),void 0)),c.jsx("span",i({className:"connections-view",style:{opacity:n.zoom}},{children:c.jsx("svg",i({style:{width:"100%"}},{children:v}),void 0)}),void 0)}},31872:function(e,t){"use strict";var n;function i(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function o(e){var t,o,r=e.pos,u=e.x1,a=e.y1,s=e.x2,c=e.y2,l=e.c;switch(r){case n.Left:t=u-i(u-s,l),o=a;break;case n.Right:t=u+i(s-u,l),o=a;break;case n.Top:t=u,o=a-i(a-c,l);break;case n.Bottom:t=u,o=a+i(c-a,l)}return[t,o]}Object.defineProperty(t,"__esModule",{value:!0}),t.getBezierCenter=t.calcBezierPath=t.Position=void 0,function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(n=t.Position||(t.Position={}));t.calcBezierPath=function(e){var t=e.sourceX,i=e.sourceY,r=e.sourcePosition,u=void 0===r?n.Bottom:r,a=e.targetX,s=e.targetY,c=e.targetPosition,l=void 0===c?n.Top:c,d=e.curvature,p=void 0===d?.25:d,f=o({pos:u,x1:t,y1:i,x2:a,y2:s,c:p}),v=f[0],m=f[1],y=o({pos:l,x1:a,y1:s,x2:t,y2:i,c:p});return"M"+t+","+i+" C"+v+","+m+" "+y[0]+","+y[1]+" "+a+","+s},t.getBezierCenter=function(e){var t=e.sourceX,i=e.sourceY,r=e.sourcePosition,u=void 0===r?n.Bottom:r,a=e.targetX,s=e.targetY,c=e.targetPosition,l=void 0===c?n.Top:c,d=e.curvature,p=void 0===d?.25:d,f=o({pos:u,x1:t,y1:i,x2:a,y2:s,c:p}),v=f[0],m=f[1],y=o({pos:l,x1:a,y1:s,x2:t,y2:i,c:p}),h=.125*t+.375*v+.375*y[0]+.125*a,g=.125*i+.375*m+.375*y[1]+.125*s;return[h,g,Math.abs(h-t),Math.abs(g-i)]}},48199:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcMainOutputPosition=t.calcMainInputPosition=t.calcPinPosition=void 0;var i=n(92548),o={x:99999,y:99999},r=function(e,t,n,i){if(!e)return console.warn("Cannot find element "+n+" to render connection"),o;var r=e.getBoundingClientRect(),u=r.x,a=r.y,s=r.width,c=a+r.height/2;return{x:u+s/2-t.x,y:c-t.y}};t.calcPinPosition=function(e,t,n,o,u,a){var s=i.getPinDomId(e,t,n,o),c=document.getElementById(s);return r(c,u,s)};t.calcMainInputPosition=function(e,t,n,o,u){var a=i.getMainPinDomId(t,e,n),s=document.getElementById(a);return r(s,o,a)};t.calcMainOutputPosition=function(e,t,n,o,u){var a=i.getMainPinDomId(t,e,n),s=document.getElementById(a);return r(s,o,a)}},92548:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMainPinDomId=t.getPinDomId=t.getInstanceDomId=void 0;t.getInstanceDomId=function(e,t){return("ins-view-"+e+"."+t).replace(/\s+/g,"-")};t.getPinDomId=function(e,t,n,i){return("pin-"+e+"."+t+"-"+n+"-"+i).replace(/\s+/g,"-")};t.getMainPinDomId=function(e,t,n){return("pin-"+e+"-"+t+"-"+n).replace(/\s+/g,"-")}},53574:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t},a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function u(e){try{s(i.next(e))}catch(t){r(t)}}function a(e){try{s(i.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,a)}s((i=i.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return u.label++,{value:r[1],done:!1};case 5:u.label++,i=r[1],r=[0];continue;case 7:r=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){u=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){u.label=r[1];break}if(6===r[0]&&u.label<o[1]){u.label=o[1],o=r;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(r);break}o[2]&&u.ops.pop(),u.trys.pop();continue}r=t.call(e,u)}catch(a){r=[6,a],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},c=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,o=e.length;n<i;n++,o++)e[o]=t[n];return e},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceView=t.getVisibleOutputs=t.getVisibleInputs=t.INSTANCE_INFO_TOOLTIP_DELAY=t.MAX_INSTANCE_WIDTH=t.MIN_WIDTH_PER_PIN=t.PIECE_CHAR_WIDTH=t.PIECE_HORIZONTAL_PADDING=void 0;var d=n(24246),p=u(n(27378)),f=n(92739),v=n(18265),m=l(n(60042)),y=n(11901),h=n(18265),g=n(18265),I=n(42957),b=n(84320),P=n(18265),_=n(98784),C=n(92548),x=n(12465),O=n(96149),E=n(42272),w=l(n(31542)),j=n(83438),S=l(n(49040));t.PIECE_HORIZONTAL_PADDING=25,t.PIECE_CHAR_WIDTH=11,t.MIN_WIDTH_PER_PIN=40,t.MAX_INSTANCE_WIDTH=400,t.INSTANCE_INFO_TOOLTIP_DELAY=400;t.getVisibleInputs=function(e,t,n){var i=e.visibleInputs;if(i)return i;var o=v.keys(g.getPartInputs(t)).filter((function(i,o){var r,u=n.some((function(t){return t.to.insId===e.id&&t.to.pinId===i})),a=t.inputs[i]&&"optional"===(null===(r=t.inputs[i])||void 0===r?void 0:r.mode);return u||!a&&i!==h.TRIGGER_PIN_ID}));return 0===o.length?[h.TRIGGER_PIN_ID]:o};t.getVisibleOutputs=function(e,t,n){var i=e.visibleOutputs;if(i)return i;var o=Object.keys(t.outputs);return n.some((function(t){return t.from.insId===e.id&&t.from.pinId===h.ERROR_PIN_ID}))?c(c([],o),[h.ERROR_PIN_ID]):o};t.InstanceView=function(e){var n=this,o=e.selected,r=e.selectedInput,u=e.selectedOutput,l=e.closestPin,D=e.dragged,T=e.onTogglePinLog,k=e.onTogglePinBreakpoint,N=e.onDetachConstValue,M=e.onCopyConstValue,R=e.onPasteConstValue,A=e.displayMode,H=e.connections,V=e.instance,z=e.viewPort,G=e.part,F=e.onPinClick,B=e.onPinDblClick,L=e.onDragStart,U=e.onRequestHistory,q=e.onDragEnd,W=e.onDragMove,$=e.onToggleSticky,Y=e.onSelect,J=e.onDblClick,X=e.onChangeVisibleInputs,K=e.onChangeVisibleOutputs,Q=e.onConvertConstToEnv,Z=e.inlineGroupProps,ee=e.onUngroup,te=e.onExtractInlinePart,ne=e.onGroupSelected,ie=e.isConnectedInstanceSelected,oe=e.inlineEditorPortalDomNode,re=e.onChangeStyle,ue=e.onDeleteInstance,ae=e.onSetDisplayName,se=V.id,ce=g.isNativePart(G),le=p.useState({w:800,h:600}),de=(le[0],le[1]),pe=p.useMemo((function(){var e=v.randomInt(6,1);return{icon:v.pickRandom([["fab","discord"],["fab","slack"],"bug","cube"]),color:e,size:v.randomInt(3,1),variation:v.randomInt(5,1)}}),[]),fe=p.useRef(),ve=V.style||G.defaultStyle||{},me=ve.size||"regular",ye=p.useMemo((function(){return new Map(H.filter((function(e){return e.to.insId===se})).map((function(e){var t=e.to,n=e.hidden;return[t.pinId,n]})))}),[H,se]),he=p.useMemo((function(){return new Map(H.filter((function(e){return e.from.insId===se})).map((function(e){var t=e.from,n=e.hidden;return[t.pinId,n]})))}),[H,se]),ge=O.usePrompt(),Ie=p.useCallback((function(e){return F(V,e,"input")}),[V,F]),be=p.useCallback((function(e,t){return B(V,e,"input",t)}),[V,B]),Pe=p.useCallback((function(e,t){return B(V,e,"output",t)}),[V,B]),_e=p.useCallback((function(e){return F(V,e,"output")}),[V,F]),Ce=p.useCallback((function(e,t){L(V,e,t)}),[V,L]),xe=p.useCallback((function(e,t){var n=V.pos,o=(t.x-n.x)/z.zoom,r=(t.y-n.y)/z.zoom,u=n.x+o,a=n.y+r;q(V,e,i(i({},t),{x:u,y:a}))}),[V,q,z.zoom]),Oe=p.useCallback((function(e,t){W(V,e,{x:t.x,y:t.y})}),[V,W]),Ee=p.useCallback((function(e){return $(V,e)}),[V,$]),we=p.useCallback((function(e){return N(V,e)}),[V,N]),je=p.useCallback((function(e){return M(V,e)}),[V,M]),Se=p.useCallback((function(e){return R(V,e)}),[V,R]),De=p.useCallback((function(e){return Y(V,e)}),[V,Y]),Te=p.useCallback((function(e){return J(V,e.shiftKey)}),[V,J]),ke=v.entries(G.inputs),Ne=V.visibleInputs,Me=V.visibleOutputs;Ne&&ke.sort((function(e,t){return Ne.indexOf(e[0])-Ne.indexOf(t[0])}));var Re=v.entries(G.outputs);Me&&Re.sort((function(e,t){return Me.indexOf(e[0])-Me.indexOf(t[0])}));var Ae=t.getVisibleInputs(V,G,H),He=t.getVisibleOutputs(V,G,H);ke.push([h.TRIGGER_PIN_ID,v.partInput("trigger")]),Re.push([h.ERROR_PIN_ID,h.partOutput("error")]);var Ve=ke.filter((function(e){var t=e[0];return Ae.includes(t)||(o||ie)&&ye.has(t)})),ze=Re.filter((function(e){var t=e[0];return He.includes(t)||(o||ie)&&he.has(t)})),Ge=m.default("ins-view",{native:ce,"no-inputs":0===ke.length,"no-outputs":0===Re.length,"display-mode":A,"force-minimized-input":"input"===e.forceShowMinimized||"both"===e.forceShowMinimized,"force-minimized-output":"output"===e.forceShowMinimized||"both"===e.forceShowMinimized,"inline-part-edited":!!Z}),Fe=m.default({selected:o,dragged:D,closest:l&&l.ins.id===V.id},"size-"+me),Be=new Set(v.entries(G.inputs).filter((function(e){e[0];var t=e[1];return h.isInputPinOptional(t)})).map(v.pickFirst)),Le=v.entries(V.inputConfig).reduce((function(e,t){var n,o=t[0],r=t[1];return h.isStickyInputPinConfig(r)||r.sticky?i(i({},e),((n={})[o]=!0,n)):e}),{}),Ue=I.calcPartContent(V,G),qe=function(e){var t=V.inputConfig[e];if(P.isStaticInputPinConfig(t))return t.value},We=p.useCallback((function(){return a(n,void 0,void 0,(function(){var e,t;return s(this,(function(n){switch(n.label){case 0:return e=v.okeys(G.inputs),[4,ge("New order?",(V.visibleInputs||e).join(","))];case 1:return(t=n.sent())&&X(V,t.split(",")),[2]}}))}))}),[G.inputs,ge,V,X]),$e=p.useCallback((function(){return a(n,void 0,void 0,(function(){var e,t;return s(this,(function(n){switch(n.label){case 0:return e=v.okeys(G.outputs),[4,ge("New order?",(V.visibleOutputs||e).join(","))];case 1:return(t=n.sent())&&K(V,t.split(",")),[2]}}))}))}),[G.outputs,ge,V,K]),Ye=p.useCallback((function(){ue(V)}),[ue,V]),Je=p.useCallback((function(){return a(n,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return[4,ge("Set custom display name",V.displayName||G.id)];case 1:return e=t.sent(),ae(V,e),[2]}}))}))}),[ge,V,ae,G.id]),Xe=Object.keys(g.getPartInputs(G)),Ke=Object.keys(v.getPartOutputs(G)),Qe=p.useCallback((function(e,t){return U(V.id,e,t)}),[V,U]),Ze=p.useCallback((function(e){Q&&Q(V,e)}),[V,Q]),et=function(){return d.jsx("div",i({className:"inputs no-drag"},{children:Ve.map((function(t){var n=t[0],i=t[1];return d.jsx(y.PinView,{type:"input",insId:V.id,parentInsId:e.parentInsId,id:n,optional:Be.has(n),connected:ye.has(n),isSticky:Le[n],minimized:!o&&1===Ve.length,onToggleSticky:Ee,onDetachConstValue:we,onCopyConstValue:je,onPasteConstValue:Se,copiedConstValue:e.copiedConstValue,selected:n===r,onClick:Ie,onDoubleClick:be,isPart:0===i.type.indexOf("part"),isClosestToMouse:!!l&&"input"===l.type&&l.pin===n,onToggleLogged:T,onToggleBreakpoint:k,onInspect:e.onInspectPin,constValue:qe(n),dataType:i.type,onRequestHistory:Qe,onConvertConstToEnv:e.onConvertConstToEnv?Ze:void 0,description:i.description},n)}))}),void 0)},tt=function(){return d.jsx("div",i({className:"outputs no-drag"},{children:ze.map((function(t){var n=t[0],i=t[1];return d.jsx(y.PinView,{insId:V.id,parentInsId:e.parentInsId,connected:he.has(n),type:"output",id:n,minimized:!o&&1===ze.length,optional:i.optional,isClosestToMouse:!!l&&"output"===l.type&&l.pin===n,selected:n===u,onClick:_e,onDoubleClick:Pe,onToggleLogged:T,onToggleBreakpoint:k,dataType:i.type,onInspect:e.onInspectPin,onRequestHistory:Qe,description:i.description},n)}))}),void 0)},nt=p.useCallback((function(e){re(V,e)}),[V,re]),it=p.useCallback((function(){var e=Xe.map((function(e){var t=Ae.includes(e),n=ye.has(e)&&!0!==ye.get(e),i=v.getInputName(e);return{text:t?n?'Hide input "'+i+'" (disconnect first)':'Hide input "'+i+'"':'Show input "'+i+'"',onClick:function(){return X(V,t?Ae.filter((function(t){return t!==e})):c(c([],Ae),[e]))},disabled:n&&t}})),t=Ke.map((function(e){var t=He.includes(e),n=he.has(e),i=v.getOutputName(e);return{text:t?n?'Hide output "'+i+'" (disconnect first)':'Hide output "'+i+'"':'Show output "'+i+'"',onClick:function(){return K(V,t?He.filter((function(t){return t!==e})):c(c([],He),[e]))},disabled:n&&t}})),n=c(c(c(c(c([],e),t),v.isInlinePartInstance(V)&&g.isGroupedPart(V.part)?[{text:"Ungroup inline part",onClick:function(){return ee(V)}}]:[]),v.isInlinePartInstance(V)?[{text:"Extract inline part to file",onClick:function(){return te(V)}}]:[]),[{text:"Reorder inputs",onClick:We},{text:"Reorder outputs",onClick:$e},{text:"Set display name",onClick:Je},{text:"Group selected instances",onClick:ne},{text:"Delete instance",intent:"danger",onClick:Ye}]);return d.jsxs(E.Menu,{children:[d.jsx(E.MenuItem,i({text:"Style"},{children:d.jsx(j.PartStyleMenu,{style:ve,onChange:nt,promptFn:ge},void 0)}),void 0),n.map((function(e){return d.jsx(E.MenuItem,i({},e),void 0)}))]},void 0)}),[Xe,Ke,V,We,$e,Je,Ye,ve,nt,ge,Ae,ye,X,He,he,K,ee,te,ne]),ot=p.useCallback((function(e){e.preventDefault(),e.stopPropagation();var t=it();E.ContextMenu.show(t,{left:e.clientX,top:e.clientY})}),[it]),rt=p.useCallback(_.debounce((function(){var e=fe.current;e&&e.centerViewPort()}),100),[]),ut=(p.useCallback((function(e,t){var n=t.size;e.stopPropagation(),de({w:n.width,h:n.height}),rt()}),[rt]),i({"--part-color":ve.color},ve.cssOverride||{})),at=C.getInstanceDomId(e.parentInsId,V.id);return d.jsx("div",i({className:Ge},{children:d.jsxs(b.BasePartView,i({pos:V.pos,viewPort:z,onDragStart:Ce,onDragMove:Oe,onDragEnd:xe,upperRenderer:et,bottomRenderer:tt,displayMode:A,domId:at},{children:[d.jsx(S.default,{className:"instance-info-tooltip",html:!0,id:at+"__tooltip",delayShow:t.INSTANCE_INFO_TOOLTIP_DELAY},void 0),et(),Z?w.default.createPortal(d.jsxs("div",i({className:"inline-group-editor-container no-drag"},{children:[d.jsxs("header",{children:[Ue," ",d.jsx("button",i({onClick:e.onCloseInlineEditor},{children:"close"}),void 0)]},void 0),d.jsx(x.GroupedPartEditor,i({},e.inlineGroupProps,{className:"no-drag",ref:fe}),void 0)]}),void 0),oe):d.jsxs("div",i({className:m.default("ins-view-inner",Fe,"size-"+pe.size),onClick:De,onDoubleClick:Te,onContextMenu:ot,style:ut,"data-tip":G.description,"data-for":at+"__tooltip"},{children:[ve.icon?d.jsx(f.FontAwesomeIcon,{icon:ve.icon},void 0):null," ",Ue]}),void 0),tt()]}),void 0)}),void 0)}},89232:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t},a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function u(e){try{s(i.next(e))}catch(t){r(t)}}function a(e){try{s(i.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,a)}s((i=i.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return u.label++,{value:r[1],done:!1};case 5:u.label++,i=r[1],r=[0];continue;case 7:r=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){u=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){u.label=r[1];break}if(6===r[0]&&u.label<o[1]){u.label=o[1],o=r;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(r);break}o[2]&&u.ops.pop(),u.trys.pop();continue}r=t.call(e,u)}catch(a){r=[6,a],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.PartStyleMenu=void 0;var c=n(24246),l=n(42272),d=u(n(27378)),p=n(40232),f={size:"regular"};t.PartStyleMenu=function(e){var t=e.onChange,n=e.style||f,o=e.promptFn,r=d.default.useCallback((function(e,o){var r;t(i(i({},n),((r={})[e]=o,r)))}),[n,t]),u=d.default.useCallback((function(){return a(void 0,void 0,void 0,(function(){var e,t;return s(this,(function(n){switch(n.label){case 0:return[4,o("Icon name? (Font Awesome conventions)","rocket")];case 1:return e=n.sent(),t=e.includes(",")?e.split(","):e,r("icon",t),[2]}}))}))}),[o,r]),v=d.useCallback((function(){return a(void 0,void 0,void 0,(function(){var e,t;return s(this,(function(i){switch(i.label){case 0:return[4,o("Enter a custom style (valid JSON representing a React CSS object)",n.cssOverride?JSON.stringify(n.cssOverride):"")];case 1:e=i.sent();try{t=JSON.parse(e),r("cssOverride",t)}catch(u){console.error(u),p.toastMsg("Invalid object","danger")}return[2]}}))}))}),[o,r,n.cssOverride]);return c.jsxs(d.default.Fragment,{children:[c.jsxs(l.MenuItem,i({text:"Color"},{children:[c.jsx(l.MenuItem,{text:"Amethyst",onClick:function(){return r("color","#9b5de5")}},void 0),c.jsx(l.MenuItem,{text:"Magenta",onClick:function(){return r("color","#f15bb5")}},void 0),c.jsx(l.MenuItem,{text:"Yellow",onClick:function(){return r("color","#fee440")}},void 0),c.jsx(l.MenuItem,{text:"Capri",onClick:function(){return r("color","#00bbf9")}},void 0),c.jsx(l.MenuItem,{text:"Sea Green",onClick:function(){return r("color","#00f5d4")}},void 0),c.jsx(l.MenuDivider,{},void 0),c.jsx(l.MenuItem,{text:"Remove Color",onClick:function(){return r("color",void 0)}},void 0)]}),void 0),c.jsxs(l.MenuItem,i({text:"Size ("+n.size+")"},{children:[c.jsx(l.MenuItem,{text:"Small",onClick:function(){return r("size","small")}},void 0),c.jsx(l.MenuItem,{text:"Regular",onClick:function(){return r("size","regular")}},void 0),c.jsx(l.MenuItem,{text:"Large",onClick:function(){return r("size","large")}},void 0)]}),void 0),c.jsxs(l.MenuItem,i({text:"Icon"},{children:[c.jsx(l.MenuItem,{text:"Choose Icon",onClick:u},void 0),c.jsx(l.MenuItem,{text:"Remove Icon",onClick:function(){return r("icon",void 0)}},void 0)]}),void 0),c.jsx(l.MenuItem,{text:"Custom Styling",onClick:v},void 0)]},void 0)}},83438:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(89232),t)},83100:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(53574),t)},42957:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.calcInstancePosition=t.calcPartWidth=t.calcPartContent=void 0;var a=n(18265),s=u(n(78284)),c=n(12901),l=n(53574),d=n(98784),p=n(92548);t.calcPartContent=function(e,t){if(e.displayName)return e.displayName;if(t.customViewCode)try{var n=Object.entries(e.inputConfig).filter((function(e){var t=e[1];return a.isStaticInputPinConfig(t)})).reduce((function(e,t){var n,o=t[0],r=t[1];return i(i({},e),((n={})[o]=r.value,n))}),{});return s.render(t.customViewCode,{inputs:n,isDefined:c.isDefined}).trim()}catch(o){return console.error("Error with custom view",o),"Error in custom view ["+t.id+"]"}return t.id};t.calcPartWidth=function(e,n){var i=a.okeys(n.inputs).length*l.MIN_WIDTH_PER_PIN,o=t.calcPartContent(e,n),r=l.PIECE_CHAR_WIDTH;return d.clamp(o.length*r+2*l.PIECE_HORIZONTAL_PADDING,i,l.MAX_INSTANCE_WIDTH)};t.calcInstancePosition=function(e,t,n){var i=p.getInstanceDomId(t,e),o=document.getElementById(i);if(o){var r=o.getBoundingClientRect(),u=r.x,a=r.y,s=r.width,c=a+r.height/2;return{x:u+s/2-n.x,y:c-n.y}}return console.warn("Cannot find element to draw connection to",i),{x:99999,y:99999}}},58651:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,o=e.length;n<i;n++,o++)e[o]=t[n];return e},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutDebugger=t.LayoutDebuggerItem=t.PosDebugger=void 0;var u=n(27378),a=n(24246),s=n(18265),c=r(n(27378)),l=n(96149),d=function(e){var t=e.pos;return a.jsxs("span",{children:[t.x.toFixed(1),", ",t.y.toFixed(1)]},void 0)};t.PosDebugger=function(e){return a.jsx("span",i({className:"pos-debugger"},{children:a.jsx(d,{pos:e.pos},void 0)}),void 0)};t.LayoutDebuggerItem=function(e){var n=e.pos,o=e.viewPort,r=e.size,u=e.color,s=o.zoom,c=n.x*s-o.pos.x*s,l=n.y*s-o.pos.y*s,d={transform:"translate("+(c-n.x)+"px, "+(l-n.y)+"px)"},p={transform:"scale("+o.zoom+")"},f={transform:"translate("+n.x+"px, "+n.y+"px)"},v={width:r.width+"px",height:r.height+"px",backgroundColor:u};return a.jsx("div",i({className:"layout-debugger",style:d},{children:a.jsxs("span",i({className:"drag-sim",style:f},{children:[a.jsx(t.PosDebugger,{pos:n},void 0),a.jsx("div",i({className:"layout-debugger-zoom-wrapper",style:p},{children:a.jsx("div",{className:"layout-debugger-inner",style:v},void 0)}),void 0)]}),void 0)}),void 0)};var p=function(){try{return"true"===localStorage.getItem("pos-debugger")}catch(e){return!1}}();t.LayoutDebugger=function(e){var n=e.extraDebug,r=e.vp,f=e.part,v=e.mousePos;if(!p)return null;var m=n.map((function(e,n){return u.createElement(t.LayoutDebuggerItem,i({},e,{key:n}))})),y=o(o(o([],f.instances.map((function(e){return e.pos}))),s.values(f.inputsPosition)),s.values(f.outputsPosition)).map((function(e){return a.jsx(t.LayoutDebuggerItem,{pos:e,viewPort:r,size:{width:0,height:0},color:"red"},void 0)})),h=l.logicalPosToRenderedPos(v,r),g=a.jsxs("div",i({className:"viewport-data"},{children:[a.jsxs("div",{children:["Pos: ",a.jsx(d,{pos:r.pos},void 0)]},void 0),a.jsxs("div",{children:["Zoom: ",r.zoom.toFixed(2)," "]},void 0),a.jsxs("div",{children:["Mouse (logical): ",a.jsx(d,{pos:v},void 0)]},void 0),a.jsxs("div",{children:["Rendered (rendered): ",a.jsx(d,{pos:h},void 0)]},void 0)]}),void 0);return a.jsxs(c.default.Fragment,{children:[g,m,y]},void 0)}},65883:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(58651),t)},56111:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.orderGroupedPart=t.layoutToInstances=void 0;var r=n(12465),u=n(18265),a=n(7979),s=o(n(63300)),c=n(98936),l=n(99743),d=n(42957);t.layoutToInstances=function(e,t){return s.default(t,(function(t){u.entries(e.nodes).forEach((function(e){var n=e[0],i=e[1];if(n.startsWith("ins-")){var o=n.replace("ins-",""),r=t.instances.find((function(e){return e.id===o}));r?r.pos=i.p:console.warn("WAT")}if(n.startsWith("part-input-")){var u=n.replace("part-input-","");t.inputsPosition[u]=i.p}if(n.startsWith("part-output-")){u=n.replace("part-output-","");t.outputsPosition[u]=i.p}}))}))};t.orderGroupedPart=function(e,n,o,s){var p=e.instances,f=e.connections,v=p.reduce((function(e,t){var o,a=l.size(d.calcPartWidth(t,u.getPartDef(t,n)),r.PART_HEIGHT);return i(i({},e),((o={})["ins-"+t.id]={p:t.pos,s:a},o))}),{}),m=u.okeys(e.inputsPosition).reduce((function(t,n){var o,u=e.inputsPosition[n],a=l.size(c.calcPartIoWidth(n),r.PART_HEIGHT);return i(i({},t),((o={})["part-input-"+n]={p:u,s:a},o))}),{}),y=u.okeys(e.outputsPosition).reduce((function(t,n){var o,u=e.outputsPosition[n],a=l.size(c.calcPartIoWidth(n),r.PART_HEIGHT);return i(i({},t),((o={})["part-output-"+n]={p:u,s:a},o))}),{}),h=i(i(i({},v),m),y),g=f.map((function(e){return[u.isExternalConnectionNode(e.from)?"part-input-"+e.from.pinId:"ins-"+e.from.insId,u.isExternalConnectionNode(e.to)?"part-output-"+e.to.pinId:"ins-"+e.to.insId]})),I=a.orderLayout({nodes:h,edges:g},o,(function(n,i){s&&s(t.layoutToInstances(n,e),i)}));return t.layoutToInstances(I,e)}},7979:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.orderLayout=void 0;var o=n(99743),r=400,u=function(e){return e.reduce((function(e,t){var n,r=o.vSub(t.p,o.vec(t.s.width/2,t.s.height/2));return i(i({},e),((n={})[t.id]={p:r,s:t.s},n))}),{})};t.orderLayout=function(e,t,n){for(var a=e.nodes,s=e.edges,c=Object.entries(a).map((function(e){var t=e[0],n=e[1];return{id:t,p:o.vAdd(n.p,o.vec(n.s.width/2,n.s.height/2)),f:o.vec(0,0),v:o.vec(0,0),m:1,s:n.s}})),l=0,d=function(){for(var e=c,t=0;t<e.length;t++)for(var a=t+1;a<e.length;a++)if(t!==a){var d=e[t],p=e[a],f=o.vSub(d.p,p.p),v=Math.abs(f.x),m=Math.abs(f.y),y=d.id.startsWith("part-input"),h=d.id.startsWith("part-output"),g=p.id.startsWith("part-input"),I=p.id.startsWith("part-output");if(v<r&&m<80){var b=1e3*(r-v);d.f=o.vAdd(d.f,o.vec(.5*b,0)),p.f=o.vAdd(p.f,o.vec(-.5*b,0))}if(m<50){var P=100*f.y;d.f=o.vAdd(d.f,o.vec(0,.5*P)),p.f=o.vAdd(p.f,o.vec(0,-.5*P))}if(y&&I){var _=o.vSub(d.p,p.p).y;if(_<-500){var C=100*(r-_);d.f=o.vAdd(d.f,o.vec(0,-.5*C)),p.f=o.vAdd(p.f,o.vec(0,.5*C))}}else if(h&&g){var x=o.vSub(d.p,p.p).y;if(x<500){var O=100*(r-x);d.f=o.vAdd(d.f,o.vec(0,-.5*O)),p.f=o.vAdd(p.f,o.vec(0,.5*O))}}var E=o.vSub(d.p,o.vec(0,d.p.y)),w=o.vLen(E),j=o.vMul(o.vNorm(E),-50*w);d.f=o.vAdd(d.f,j)}s.forEach((function(t){var n=e.find((function(e){return e.id===t[0]})),i=e.find((function(e){return e.id===t[1]}));if(n&&i){var r=o.vec(0,-200),u=o.vSub(n.p,i.p),a=o.vSub(r,u),s=1e3*o.vLen(a),c=o.vMul(o.vNorm(a),.5*s),l=o.vMul(o.vNorm(a),-.5*s);n.f=o.vAdd(n.f,c),i.f=o.vAdd(i.f,l)}else console.warn("weoops",t[0],t[1])})),e=(e=e.map((function(e){return o.itrPhysics(15,e)}))).map((function(e){var t=o.vMul(e.v,.5),n=o.vLen(t)>100?o.vMul(o.vNorm(t),100):t;return i(i({},e),{v:n})})),c=e,n&&n({nodes:u(e),edges:s},l),l++};l<t&&(l<2||o.totalEnergy(c)>.01);)d();return{nodes:u(c),edges:s,itrs:l,timeout:l>=t,total:o.totalEnergy(c)}}},8417:function(e,t){"use strict";var n=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,o=e.length;n<i;n++,o++)e[o]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.calculateInstancesWithSingleConstPinsMap=t.getLeafInstancesOfSelection=void 0;t.getLeafInstancesOfSelection=function(e,t,i){return e.reduce((function(e,o){var r=i.filter((function(e){return e.to.insId===o.id})).map((function(e){return t.find((function(t){return t.id===e.from.insId}))})).filter((function(e){return!!e}));return n(n([],e),r)}),[]).filter((function(t){return 1===i.filter((function(e){return e.from.insId===t.id||e.to.insId===t.id})).length&&!e.includes(t)}))};t.calculateInstancesWithSingleConstPinsMap=function(e,t){return e.connections.filter((function(e){return t.has(e.from.insId)})).reduce((function(e,n){var i=t.get(n.from.insId),o=n.to.insId,r=e.get(o)||new Map;return r.set(n.to.pinId,{val:i,insId:n.from.insId}),e.set(o,r),e}),new Map)}},4974:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t},a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function u(e){try{s(i.next(e))}catch(t){r(t)}}function a(e){try{s(i.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,a)}s((i=i.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return u.label++,{value:r[1],done:!1};case 5:u.label++,i=r[1],r=[0];continue;case 7:r=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){u=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){u.label=r[1];break}if(6===r[0]&&u.label<o[1]){u.label=o[1],o=r;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(r);break}o[2]&&u.ops.pop(),u.trys.pop();continue}r=t.call(e,u)}catch(a){r=[6,a],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},c=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,o=e.length;n<i;n++,o++)e[o]=t[n];return e},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PartIoView=void 0;var d=n(24246),p=u(n(27378)),f=n(18265),v=n(84320),m=n(92548),y=l(n(60042)),h=n(42272),g=n(91312),I=n(92093),b=n(18265),P=l(n(49040));t.PartIoView=p.memo((function(e){var t=this,n=e.viewPort,o=e.selected,r=e.pos,u=e.type,l=e.id,_=e.onDblClick,C=e.onRename,x=e.onDelete,O=e.onChangeInputMode,E=e.inputMode,w=e.onSelect,j=e.closest,S=e.onSetDescription,D=e.description,T=e.onRequestHistory,k=I.useHistoryHelpers(T,l,u),N=k.history,M=k.resetHistory,R=k.refreshHistory,A=g.usePrompt(),H=p.useCallback((function(){return a(t,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return[4,A("Description?",D)];case 1:return e=t.sent(),S(u,l,e),[2]}}))}))}),[A,D,S,u,l]),V=p.useCallback((function(){x&&x(u,l)}),[u,l,x]),z=p.useCallback((function(){C&&C(u,l)}),[u,l,C]),G=p.useCallback((function(e){O&&O(l,e)}),[l,O]),F=p.useCallback((function(){return c(c([{text:"Current mode - "+E,onClick:f.noop},{text:"Make required",onClick:function(){return G("required")}},{text:"Make optional",onClick:function(){return G("optional")}},{text:"Make required-if-connected",onClick:function(){return G("required-if-connected")}},{text:"Set description",onClick:H}],e.onRename?[{text:"Rename",onClick:z}]:[]),e.onDelete?[{text:"Delete",onClick:V}]:[])}),[H,E,G,V,z,e.onDelete,e.onRename]),B=p.useCallback((function(t){_&&_(e.id,t)}),[_,e.id]),L=p.useCallback((function(){w(l,u)}),[l,u,w]),U=p.useCallback((function(){return d.jsx(h.Menu,{children:F().map((function(e){return d.jsx(h.MenuItem,i({},e),void 0)}))},void 0)}),[F]),q=p.useCallback((function(e){e.preventDefault(),e.stopPropagation();var t=U();h.ContextMenu.show(t,{left:e.clientX,top:e.clientY})}),[U]),W="input"===u?b.getInputName(l):f.getOutputName(l);return d.jsxs(v.BasePartView,i({className:y.default("part-io-view",u),pos:r,onDragEnd:function(t,o){var r=e.pos,a=(o.x-r.x)/n.zoom,s=(o.y-r.y)/n.zoom,c=r.x+a,d=r.y+s;e.onDragEnd(u,l,t,i(i({},o),{x:c,y:d}))},onDragStart:function(t,n){e.onDragStart(l,t,n)},onDragMove:function(t,o){var r=e.pos,a=(o.x-r.x)/n.zoom,s=(o.y-r.y)/n.zoom,c=r.x+a,d=r.y+s;e.onDragMove(u,l,t,i(i({},o),{x:c,y:d}))},viewPort:n},{children:[d.jsx(P.default,{className:"pin-info-tooltip",html:!0,id:l+e.insId,getContent:[function(){var t=I.calcHistoryContent(N),n=e.description?"<em>"+e.description+"</em>":"";return"<div><div><strong>"+W+"</strong> ("+u+") </div>\n      "+n+"\n      <hr/>\n      "+t+"\n    "},25]},void 0),d.jsx("div",i({onMouseEnter:R,onMouseOut:M,"data-tip":"","data-html":!0,"data-for":l+e.insId,className:y.default("part-io-view-inner",{closest:j,selected:o}),id:m.getMainPinDomId(e.insId,l,u),onClick:L,onDoubleClick:B,onContextMenu:q},{children:l}),void 0)]}),void 0)}))},20712:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(4974),t)},98936:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcPartIoWidth=t.MIN_WIDTH_PER_PIN=t.PIECE_CHAR_WIDTH=t.PIECE_HORIZONTAL_PADDING=void 0,t.PIECE_HORIZONTAL_PADDING=15,t.PIECE_CHAR_WIDTH=9,t.MIN_WIDTH_PER_PIN=40;t.calcPartIoWidth=function(e){return Math.max(t.MIN_WIDTH_PER_PIN,e.length*t.PIECE_CHAR_WIDTH+2*t.PIECE_HORIZONTAL_PADDING)}},11901:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PinView=t.PIN_HEIGHT=void 0;var s=n(24246),c=u(n(27378)),l=a(n(60042)),d=n(42272),p=n(12901),f=n(18265),v=n(92548),m=n(75579),y=a(n(49040)),h=n(92093);t.PIN_HEIGHT=23;t.PinView=c.memo((function(e){var t=e.selected,n=e.type,o=e.connected,r=e.rotate,u=e.optional,a=e.isClosestToMouse,g=e.dataType,I=e.id,b=e.onRequestHistory,P=h.useHistoryHelpers(b,I,g),_=P.history,C=P.resetHistory,x=P.refreshHistory,O="input"===n?f.getInputName(I):f.getOutputName(I),E="input"===e.type&&p.isDefined(e.constValue)?e.constValue:void 0,w=r&&"input"===n;return s.jsxs("div",i({className:function(){if("input"===e.type){var i=e.isSticky,s=e.isPart,c=e.constValue;return l.default("pin",{sticky:i,selected:t,closest:a,optional:u,connected:o,rotate:r,"const-value":p.isDefined(c),"env-value":p.isDefined(c)&&f.isEnvValue(c),"is-part":s,minimized:e.minimized},n)}return l.default("pin",{selected:t,connected:o,closest:a,rotate:r,optional:u,minimized:e.minimized},n,r)}(),onContextMenu:function(t){t.preventDefault(),t.stopPropagation();var n=function(){var t=s.jsx(d.MenuItem,{onClick:function(){return e.onToggleLogged(e.insId,e.id,e.type)}},void 0),n=s.jsx(d.MenuItem,{onClick:function(){return e.onToggleBreakpoint(e.insId,e.id,e.type)}},void 0),i=s.jsx(d.MenuItem,{onClick:function(){return e.onInspect(e.insId,e.id,e.type)},text:"Inspect"},void 0);if("input"===e.type){var o=e.onConvertConstToEnv;return p.isDefined(E)?s.jsxs(d.Menu,{children:[s.jsx(d.MenuItem,{onClick:function(){return e.onDetachConstValue(e.id)},text:"Detach value"},void 0),s.jsx(d.MenuItem,{onClick:function(){return e.onCopyConstValue(e.id)},text:"Copy value"},void 0),p.isDefined(e.copiedConstValue)?s.jsx(d.MenuItem,{onClick:function(){return e.onPasteConstValue(e.id)},text:"Paste value"},void 0):null,o?s.jsx(d.MenuItem,{onClick:function(){return o(e.id)},text:"Convert to Env Var"},void 0):null]},void 0):s.jsxs(d.Menu,{children:[s.jsx(d.MenuItem,{onClick:function(){return e.onToggleSticky(e.id)},text:"Toggle sticky (square means sticky)"},void 0),t,n,i,p.isDefined(e.copiedConstValue)?s.jsx(d.MenuItem,{onClick:function(){return e.onPasteConstValue(e.id)},text:"Paste value"},void 0):null]},void 0)}return s.jsxs(d.Menu,{children:[t,n,i]},void 0)}();d.ContextMenu.show(n,{left:t.clientX,top:t.clientY})},"data-pin-id":I},{children:[s.jsx(y.default,{className:"pin-info-tooltip",html:!0,id:I+e.insId,getContent:[function(){var t=h.calcHistoryContent(_),i=e.description?"<em>"+e.description+"</em>":"";return"<div><div><strong>"+O+"</strong> ("+n+") </div>\n      "+i+"\n      <hr/>\n      "+(p.isDefined(E)?"<div>Static value: <strong>"+m.valuePreview(E).substr(0,200)+"</strong></div>":t)+"\n    "},25]},void 0),s.jsxs("div",i({onMouseEnter:x,onMouseOut:C,"data-tip":"","data-html":!0,"data-for":I+e.insId,id:v.getPinDomId(e.parentInsId,e.insId,I,n),"data-place":w?"bottom":null,onDoubleClick:function(t){return e.onDoubleClick&&e.onDoubleClick(I,t)},className:"pin-inner",onClick:function(t){var i=e.onShiftClick,o=e.onClick,r=e.id;t.shiftKey&&i?i(r,t):o(r,n,t)}},{children:[O," ",p.isDefined(E)?s.jsxs(c.Fragment,{children:[":",s.jsx("span",i({className:"value"},{children:p.toString(E)}),void 0)]},void 0):null,"input"===e.type&&e.isSticky?s.jsx("span",i({className:"suffix"},{children:"s"}),void 0):null,"input"===e.type&&e.queueSize?s.jsxs("span",i({className:"suffix"},{children:[e.queueSize," in Q"]}),void 0):null]}),void 0),s.jsx("div",{className:"wire"},void 0)]}),void 0)}))},92093:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useHistoryHelpers=t.calcHistoryContent=void 0;var o=n(75579),r=i(n(27378)),u=n(27378);t.calcHistoryContent=function(e){if(e){var t=e.total,n=e.lastSamples;return"<strong>Activated "+t+" times this session</strong>"+" "+(n.length>0?"<div>Last value: <strong>"+o.valuePreview(n[0].val).substr(0,200)+"</strong></div>":"")}return"Loading session data.."};t.useHistoryHelpers=function(e,t,n){var i=u.useRef(),o=u.useState(),a=o[0],s=o[1];return{history:a,refreshHistory:u.useCallback((function(){clearInterval(i.current),e(t,n).then((function(e){s(e)})),i.current=setInterval((function(){e(t,n).then((function(e){s(e)}))}),500)}),[e,t,n]),resetHistory:r.default.useCallback((function(){clearInterval(i.current),s(void 0)}),[])}}},33593:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.QuickAddMenu=void 0;var a=n(24246),s=u(n(27378)),c=n(18265),l=n(42272),d=n(18185),p=n(10934),f=d.Select.ofType(),v=function(e){switch(e.type){case"part":return""+e.part.id;case"value":return"Add inline value or function";case"import":return"Import "+e.importablePart.part.id+" from "+e.importablePart.module}},m=function(e,t){var n=t.handleClick,i=t.modifiers,o=t.query;if(!i.matchesPredicate)return null;var r=v(e);return"value"===e.type?a.jsxs(s.Fragment,{children:[a.jsx(l.MenuDivider,{},void 0),a.jsx(l.MenuItem,{active:i.active,disabled:i.disabled,onClick:n,text:p.highlightText(r,o)},v(e))]},void 0):a.jsx(l.MenuItem,{active:i.active,disabled:i.disabled,onClick:n,text:p.highlightText(r,o)},v(e))},y=function(e,t,n,i){var o=v(t).toLocaleLowerCase(),r=e.toLowerCase();return i?o===r:o.includes(r)};t.QuickAddMenu=function(e){var t,n=e.resolvedFlow,o=e.onRequestImportables,r={left:e.pos.x,top:e.pos.y},u=s.useState(),d=u[0],p=u[1];s.useEffect((function(){o&&o("").then(p)}),[o]);var v=c.values(i(i({},n.dependencies),((t={})[n.main.id]=n.main,t))),h=v.map((function(e){return{type:"part",part:e}})),g=new Set(v.map((function(e){return e.id}))),I=d?d.filter((function(e){return!g.has(e.part.id)})).map((function(e){return{type:"import",importablePart:e}})):[],b=h.concat(I).concat({type:"value"});return a.jsx("div",i({className:"quick-add-menu",style:r},{children:a.jsx(f,{className:"quick-add-parts-select",items:b,itemPredicate:y,itemRenderer:m,inputProps:{className:"quick-add-input"},noResults:a.jsx(l.MenuItem,{disabled:!0,text:"No results."},void 0),onItemSelect:function(t){return e.onAdd(t)},popoverProps:{isOpen:!0,onClose:function(){return e.onClose()}}},void 0)}),void 0)}},35683:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(33593),t)},867:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRuntimePlayer=void 0;var i=n(18265),o=n(77159),r=i.debugLogger("runtime-player");t.createRuntimePlayer=function(e){var t=0,n=[],i=!1,u=Date.now(),a=t,s=function s(){return requestAnimationFrame((function(){var c,l,d,p=Date.now();a=t,t+=p-u,u=p,c=a,l=t,d=n,n=[],d.length&&r("Playing "+d.length+" events from",c,l),d.forEach((function(t){r("Playing event",t),o.playEvent(e,t)})),i&&s()}))},c=function(){i=!1},l=function(){n=[],document.querySelectorAll("[data-runtime]").forEach((function(e){e.removeAttribute("data-runtime")})),document.querySelectorAll("[data-runtime-queue]").forEach((function(e){e.removeAttribute("data-runtime-queue")}))};return{stop:c,start:function(e){void 0===e&&(e=0),i=!0,t=e,u=Date.now(),s()},addEvents:function(e){n.push.apply(n,e)},destroy:function(){c(),l()},clear:l,status:function(){return{running:i,currDt:t,lastDt:a,queue:n,last:u}}}}},77159:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.playEvent=t.cancelTimers=void 0;var o=n(18265),r=n(92548),u=5e3,a=o.debugLogger("runtime-player:play-event"),s=function(e){return e.type===o.DebuggerEventType.INPUT_CHANGE||e.type===o.DebuggerEventType.OUTPUT_CHANGE?e.parentInsId+"."+e.insId+"."+e.pinId:e.parentInsId+"."+e.insId};t.cancelTimers=new Map;t.playEvent=function(e,n){var c,l,d=s(n);switch(n.type){case o.DebuggerEventType.INPUT_CHANGE:case o.DebuggerEventType.OUTPUT_CHANGE:var p=n.pinId,f=n.insId,v=n.parentInsId,m=n.type===o.DebuggerEventType.INPUT_CHANGE?"input":"output",y=f===e?r.getMainPinDomId(f,p,m):r.getPinDomId(v,f,p,m),h=document.getElementById(y),g=f+"."+p,I=n.type===o.DebuggerEventType.OUTPUT_CHANGE?document.querySelectorAll('[data-from-id="'+g+'"]'):[];if(h){clearTimeout(t.cancelTimers.get(d)),h.removeAttribute("data-runtime"),I.forEach((function(e){e.removeAttribute("data-runtime")})),setTimeout((function(){h.setAttribute("data-runtime","active"),I.forEach((function(e){e.setAttribute("data-runtime","active")}))}),0);var b=setTimeout((function(){h.removeAttribute("data-runtime"),I.forEach((function(e){e.removeAttribute("data-runtime")})),t.cancelTimers.delete(d)}),u);t.cancelTimers.set(s(n),b)}else console.warn("No DOM element with Id ["+y+"] found to play event"),a("No DOM element with Id ["+y+"] found to play event",n);break;case o.DebuggerEventType.PROCESSING_CHANGE:f=n.insId,v=n.parentInsId,y=r.getInstanceDomId(v,f);var P=null===(c=document.getElementById(y))||void 0===c?void 0:c.parentElement;if(!P)return void a("No DOM element with Id ["+y+"] found to play event",n);if(!0===n.val)P.setAttribute("data-runtime","processing"),clearTimeout(t.cancelTimers.get(d));else{P.removeAttribute("data-runtime"),setTimeout((function(){P.setAttribute("data-runtime","done")}),0);b=setTimeout((function(){P.removeAttribute("data-runtime"),t.cancelTimers.delete(d)}),u);t.cancelTimers.set(d,b)}break;case o.DebuggerEventType.ERROR:f=n.insId,v=n.parentInsId,y=r.getInstanceDomId(v,f);var _=null===(l=document.getElementById(y))||void 0===l?void 0:l.parentElement;if(!_)return void a("No DOM element with Id ["+y+"] found to play event",n);clearTimeout(t.cancelTimers.get(d)),_.removeAttribute("data-runtime"),setTimeout((function(){_.setAttribute("data-runtime","error")}));b=setTimeout((function(){_.removeAttribute("data-runtime"),t.cancelTimers.delete(d)}),u);t.cancelTimers.set(d,b);var C=i(i({},n),{type:o.DebuggerEventType.OUTPUT_CHANGE,pinId:o.ERROR_PIN_ID});t.playEvent(e,C);break;case o.DebuggerEventType.INPUTS_STATE_CHANGE:o.entries(n.val).forEach((function(e){var t=e[0],i=e[1],o=n.insId,u=n.parentInsId,s=r.getPinDomId(u,o,t,"input"),c=document.getElementById(s);c?i>0?c.setAttribute("data-runtime-queue",""+i):c.removeAttribute("data-runtime-queue"):a("No DOM element with Id ["+s+"] found to play event",n)}))}}},13521:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useDebounce=void 0;var i=n(27378);t.useDebounce=function(e,t){var n=i.useState(e),o=n[0],r=n[1];return i.useEffect((function(){var n=setTimeout((function(){r(e)}),t);return function(){clearTimeout(n)}}),[e,t]),[o,r]}},52395:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t},a=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,o=e.length;n<i;n++,o++)e[o]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.handleChangePartInputType=t.handleIoPinRename=t.handleInstanceDrag=t.getInstancesInRect=t.isJsxValue=t.fitViewPortToPart=t.centerBoardPosOnTarget=t.renderedPosToLogicalPos=t.logicalPosToRenderedPos=t.getEffectivePartDimensions=t.calcPartsPositions=t.calcSelectionBoxArea=t.animateViewPort=t.easeInOutNum=t.easeInOutPos=t.easeInOutQuad=t.center=t.distance=t.clamp=t.domToViewPort=t.roundNumber=t.createNewPartInstance=t.createNewInlinePartInstance=t.parseInputOutputTypes=t.parsePromptValue=t.getSelectionBoxRect=t.findClosestPin=t.toggleStickyPin=t.emptyList=t.emptyObj=void 0;var s=u(n(63300)),c=n(12465),l=n(18265),d=n(48199),p=n(18265),f=n(42957),v=n(98936),m=n(99743),y=n(8417),h=n(83100);t.emptyObj={},t.emptyList=[];t.toggleStickyPin=function(e,t,n,o){return s.produce(e,(function(e){var o=e.instances,r=o.find((function(e){return e.id===t}));if(!r)throw new Error("blah");var u=r.inputConfig||{},a=u[n]||l.queueInputPinConfig();l.isStickyInputPinConfig(a)?u[n]=l.queueInputPinConfig():u[n]=l.stickyInputPinConfig(),e.instances=o.map((function(e){return e===r?i(i({},r),{inputConfig:u}):e}))}))};t.findClosestPin=function(e,t,n,i,o,r){var u=l.partInstance(e.id,e.id),s=p.okeys(e.inputs).map((function(e){return{id:e,type:"input",pos:d.calcMainInputPosition(e,o,"input",i,r),ins:u}})),c=p.okeys(e.outputs).map((function(e){return{id:e,type:"output",pos:d.calcMainOutputPosition(e,o,"output",i,r),ins:u}})),f=e.instances.reduce((function(n,u){var s=l.getPartDef(u,t),c=h.getVisibleInputs(u,s,e.connections),p=h.getVisibleOutputs(u,s,e.connections),f=c.map((function(e){return{ins:u,type:"input",pos:d.calcPinPosition(o,u.id,e,"input",i,r),id:e}})),v=p.map((function(e){return{ins:u,type:"output",pos:d.calcPinPosition(o,u.id,e,"output",i,r),id:e}}));return a(a(a([],n),f),v)}),[]),v=a(a(a([],s),f),c),m={dis:1e5,item:v[0]};return v.forEach((function(e){var t=e.pos.x-n.x,i=e.pos.y-n.y,o=Math.sqrt(t*t+i*i);o<m.dis&&(m.dis=o,m.item=e)})),m.item};t.getSelectionBoxRect=function(e,t){var n=Math.min(e.x,t.x),i=Math.min(e.y,t.y);return{x:n,y:i,w:Math.max(e.x,t.x)-n,h:Math.max(e.y,t.y)-i}};t.parsePromptValue=function(e){if(null!==e){var t=parseInt(e,10),n=e;return t.toString()!=e||isNaN(t)||(n=t),n}};t.parseInputOutputTypes=function(e){var t=e.match(/part\((.+)\|(.+)\)/)||[],n=t[1],i=t[2],o=p.entries(JSON.parse(n)).map((function(e){var t=e[0],n={type:e[1],optional:p.isOptionalType(t)};return[t.replace(/\?$/,""),n]})),r=p.entries(JSON.parse(i)).map((function(e){var t=e[0],n={type:e[1],optional:p.isOptionalType(t)};return[t.replace(/\?$/,""),n]}));return{inputs:p.fromEntries(o),outputs:p.fromEntries(r)}};t.createNewInlinePartInstance=function(e,t,n){void 0===t&&(t=-1*c.PART_HEIGHT*1.5);var o=l.inlinePartInstance(e.id+"-"+p.randomInt(999),e,{},{x:0,y:0}),r=f.calcPartWidth(o,e),u={x:n.x-r/2,y:n.y+t};return i(i({},o),{pos:u})};t.createNewPartInstance=function(e,t,n,o){void 0===t&&(t=-1*c.PART_HEIGHT*1.5);var r="string"==typeof e?l.getPartDef(e,o):e;if(!r)throw new Error(e+" part not found in repo");var u=p.entries(r.inputs).reduce((function(e,t){var n=t[0],i=t[1];return i.defaultValue&&(e[n]=l.staticInputPinConfig(i.defaultValue)),e}),{}),a=l.partInstance(r.id+"-"+p.randomInt(999),r.id,u,{x:0,y:0}),s=f.calcPartWidth(a,r),d={x:n.x-s/2,y:n.y+t};return i(i({},a),{pos:d})};t.roundNumber=function(e){return Math.round(100*e)/100};t.domToViewPort=function(e,n,i){return{x:t.roundNumber(n.pos.x+e.x/n.zoom/i.zoom),y:t.roundNumber(n.pos.y+e.y/n.zoom/i.zoom)}};t.clamp=function(e,t,n){return Math.max(e,Math.min(t,n))};t.distance=function(e,t){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)};t.center=function(e,t,n){var i=n.zoom,o=e.x+e.w/2,r=e.y+e.h/2;return{x:o-t.w/i/2,y:r-t.h/i/2}};t.easeInOutQuad=function(e){return e<.5?2*e*e:(4-2*e)*e-1};t.easeInOutPos=function(e,n,i,o,r){var u=t.clamp(0,1,(r-i)/o),a=t.easeInOutQuad(u),s=n.x-e.x,c=n.y-e.y;return{x:e.x+s*a,y:e.y+c*a}};t.easeInOutNum=function(e,n,i,o,r){var u=t.clamp(0,1,(r-i)/o);return e+(n-e)*t.easeInOutQuad(u)};t.animateViewPort=function(e,n,i,o){var r=t.distance(e.pos,n.pos),u=Date.now(),a=i;if(0!==r){requestAnimationFrame((function i(){var r=Date.now(),s=t.easeInOutPos(e.pos,n.pos,u,a,r),c=t.easeInOutNum(e.zoom,n.zoom,u,a,r);r-u<a?(o({pos:s,zoom:c}),requestAnimationFrame(i)):o({pos:s,zoom:c})}))}else o(e)};t.calcSelectionBoxArea=function(e){var n=t.getSelectionBoxRect(e.from,e.to);return n.h*n.w};var g=function(e,t,n,o){return{left:n.x,right:n.x+e,top:n.y,bottom:n.y+t,tag:o,center:l.calcCenter(i({w:e,h:t},n))}};t.calcPartsPositions=function(e,t){var n=e.instances.map((function(e){var n=f.calcPartWidth(e,l.getPartDef(e,t)),i=c.PART_HEIGHT;return g(n,i,e.pos,e.id)})),i=p.okeys(e.inputs).map((function(t){var n=v.calcPartIoWidth(t),i=c.PART_HEIGHT,o=e.inputsPosition[t]||{x:0,y:0};return g(n,i,o,"input_"+t)})),o=p.okeys(e.outputs).map((function(t){var n=v.calcPartIoWidth(t),i=c.PART_HEIGHT,o=e.outputsPosition[t]||{x:0,y:0};return g(n,i,o,"output"+t)}));return a(a(a([],n),i),o)};t.getEffectivePartDimensions=function(e,n){var o=t.calcPartsPositions(e,n),r=o[0]||{left:0,right:0,top:0,bottom:0},u=o.reduce((function(e,t){return t.left<e?t.left:e}),r.left),a=o.reduce((function(e,t){return t.right>e?t.right:e}),r.right),s=o.reduce((function(e,t){return t.top<e?t.top:e}),r.top),c=a-u,d=o.reduce((function(e,t){return t.bottom>e?t.bottom:e}),r.bottom)-s,p={x:u,y:s};return{size:{width:c,height:d},pos:p,center:l.calcCenter(i({w:c,h:d},p))}};t.logicalPosToRenderedPos=function(e,t){var n=m.vSub(e,t.pos);return m.vMul(n,t.zoom)};t.renderedPosToLogicalPos=function(e,t){var n=m.vDiv(e,t.zoom);return m.vAdd(t.pos,n)};t.centerBoardPosOnTarget=function(e,n,o,r){var u=t.logicalPosToRenderedPos(e,r),a=t.renderedPosToLogicalPos(u,i(i({},r),{zoom:o})),s=Math.max(e.x,a.x)-Math.min(e.x,a.x),c=Math.max(e.y,a.y)-Math.min(e.y,a.y);return{x:o>r.zoom?r.pos.x+s:r.pos.x-s,y:o>r.zoom?r.pos.y+c:r.pos.y-c}};t.fitViewPortToPart=function(e,n,i){var o=t.getEffectivePartDimensions(e,n),r=o.size,u=o.center,a=r.width+0,s=r.height+0,c=i.width/a,l=i.height/s,d=Math.min(c,l)/1.15,p=t.clamp(.3,1.2,d);return{zoom:p,pos:{x:u.x-i.width/2/p,y:u.y-i.height/2/p}}};t.isJsxValue=function(e){var t=function(e){return p.isDefined(e.ref)&&p.isDefined(e.type)&&p.isDefined(e.props)};try{var n=JSON.parse(e);return t(n)||Array.isArray(n)&&t(n[0])}catch(i){return!1}};t.getInstancesInRect=function(e,n,o,r,u,a,s){var d=e.from,p=e.to,v=t.getSelectionBoxRect(d,p);return u.filter((function(e){var t=e.pos,r=f.calcPartWidth(e,l.getPartDef(e,n))*o.zoom*s.zoom,u=i(i({},t),{w:r,h:c.PART_HEIGHT*o.zoom*s.zoom});return console.log(e.id,u,"main",v),l.intersectRect(v,u)||l.intersectRect(u,v)})).map((function(e){return e.id}))};t.handleInstanceDrag=function(e,t,n,i,o,r){i.preventDefault(),i.stopPropagation();var u,c=m.vSub(n,t.pos),l=s.produce(e,(function(e){var s=e.instances.find((function(e){return e.id===t.id}));if(!s)throw new Error("impossible state dragging instance that does not exist");!i.shiftKey&&r&&(u=[r]);var l=e.instances.filter((function(e){return o.includes(e.id)&&e!==s})),d=a([s],l),p=y.getLeafInstancesOfSelection(d,e.instances,e.connections);a(a([],l),p).forEach((function(e){e.pos=m.vAdd(e.pos,c)})),s.pos=n,!i.shiftKey&&r&&(u=[r])}));return{newValue:l,newSelected:u}};t.handleIoPinRename=function(e,t,n,o){return s.produce(e,(function(e){"input"===t?(e.inputs[o]=e.inputs[n],e.inputsPosition[o]=e.inputsPosition[n],delete e.inputs[n],e.connections=e.connections.map((function(e){return l.isExternalConnectionNode(e.from)&&e.from.pinId===n?i(i({},e),{from:i(i({},e.from),{pinId:o})}):e}))):(e.outputs[o]=e.outputs[n],e.outputsPosition[o]=e.outputsPosition[n],e.connections=e.connections.map((function(e){return l.isExternalConnectionNode(e.to)&&e.to.pinId===n?i(i({},e),{to:i(i({},e.to),{pinId:o})}):e})),e.completionOutputs=(e.completionOutputs||[]).map((function(e){return e.split("+").map((function(e){return e===n?o:n})).join("+")})),delete e.outputs[n])}))};t.handleChangePartInputType=function(e,t,n){return s.produce(e,(function(e){var i=e.inputs[t];if(!i)throw new Error("Wat");i.mode=n}))}},96149:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(90412),t),o(n(12901),t),o(n(77437),t),o(n(40232),t),o(n(99457),t),o(n(51424),t),o(n(23489),t),o(n(13521),t),o(n(10934),t),o(n(4824),t),o(n(14648),t),o(n(26013),t),o(n(867),t),o(n(11897),t),o(n(99743),t),o(n(57779),t),o(n(52395),t),o(n(12887),t)},60614:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserOnlyReactJson=void 0;var o=n(24246);t.BrowserOnlyReactJson=function(e){if("undefined"==typeof window)return null;var t=n(51366).default;return o.jsx(t,i({},e),void 0)}},26013:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyticsValueRenderer=void 0;var i=n(24246),o=n(18265),r=n(60614);t.AnalyticsValueRenderer=function(e){var t=e.val;try{var n=JSON.parse(t),u="object"==typeof n?n:{value:n},a=n&&[n.type,n.key,n.props,n.ref].every(o.isDefined),s=a?{jsxValue:n}:u;return i.jsx(r.BrowserOnlyReactJson,{src:s,name:!1,collapseStringsAfterLength:50,groupArraysAfterLength:5,collapsed:a},void 0)}catch(c){return i.jsx(r.BrowserOnlyReactJson,{src:{value:t},name:!1,collapseStringsAfterLength:50,groupArraysAfterLength:5},void 0)}}},78504:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function u(e){try{s(i.next(e))}catch(t){r(t)}}function a(e){try{s(i.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,a)}s((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return u.label++,{value:r[1],done:!1};case 5:u.label++,i=r[1],r=[0];continue;case 7:r=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){u=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){u.label=r[1];break}if(6===r[0]&&u.label<o[1]){u.label=o[1],o=r;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(r);break}o[2]&&u.ops.pop(),u.trys.pop();continue}r=t.call(e,u)}catch(a){r=[6,a],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},u=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,o=e.length;n<i;n++,o++)e[o]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.createGroup=void 0;var a=n(18265),s=n(18265),c=n(99743);t.createGroup=function(e,t,n,l){return o(void 0,void 0,void 0,(function(){var o,d,p,f,v,m,y,h,g,I,b,P,_,C,x,O,E,w,j,S,D,T,k,N;return r(this,(function(r){switch(r.label){case 0:if(0===e.length)throw new Error("cannot create group without instances");o=e.map((function(e){return e.id})),d=t.filter((function(e){var t=o.includes(e.from.insId),n=o.includes(e.to.insId);return!t&&n})).filter((function(e,t,n){return n.findIndex((function(t){return s.connectionNodeEquals(t.to,e.to)}))===t})),p=t.filter((function(e){var t=o.includes(e.from.insId),n=o.includes(e.to.insId);return t&&!n})).filter((function(e,t,n){return n.findIndex((function(t){return s.connectionNodeEquals(t.from,e.from)}))===t})),f={},v={},m={},y={},h=[],g={},I=0,b=d,r.label=1;case 1:return I<b.length?(E=b[I],w=E.to.insId+"."+E.to.pinId,j=E.from.insId+"."+E.from.pinId,S=E.to.pinId,m[j]?(h.push({from:s.externalConnectionNode(m[j]),to:s.connectionNode(E.to.insId,E.to.pinId)}),[3,5]):g[S]?[4,l("Name this input ("+S+" of "+E.to.insId+") is already taken:")]:[3,3]):[3,6];case 2:return _=r.sent()||"i"+c.rnd(),[3,4];case 3:_=S,r.label=4;case 4:P=_,f[w]=P,m[j]=P,h.push({from:s.externalConnectionNode(P),to:s.connectionNode(E.to.insId,E.to.pinId)}),g[P]=s.partInput("any"),r.label=5;case 5:return I++,[3,1];case 6:C={},x=0,O=p,r.label=7;case 7:return x<O.length?(E=O[x],w=E.to.insId+"."+E.to.pinId,j=E.from.insId+"."+E.from.pinId,S=E.from.pinId,y[w]?(h.push({from:s.connectionNode(E.from.insId,E.from.pinId),to:s.externalConnectionNode(y[w])}),[3,11]):C[S]?[4,l("Name this output ("+S+" of "+E.from.insId+" is already taken:")]:[3,9]):[3,12];case 8:return T=r.sent()||"i"+c.rnd(),[3,10];case 9:T=S,r.label=10;case 10:D=T,v[j]=D,y[w]=D,h.push({from:s.connectionNode(E.from.insId,E.from.pinId),to:s.externalConnectionNode(D)}),C[D]=a.partOutput("any"),r.label=11;case 11:return x++,[3,7];case 12:return e.reduce((function(e,t){return s.middlePos(t.pos,e)}),e[0].pos),k=t.filter((function(e){return o.includes(e.from.insId)&&o.includes(e.to.insId)})),N={id:n,inputs:g,outputs:C,instances:e,inputsPosition:a.okeys(g).reduce((function(e,t,n){var o;return i(i({},e),((o={})[t]={x:0+100*n,y:0},o))}),{}),outputsPosition:a.okeys(C).reduce((function(e,t,n){var o;return i(i({},e),((o={})[t]={x:0+100*n,y:400},o))}),{}),connections:u(u([],k),h),completionOutputs:a.okeys(C)},[2,{groupedPart:N,renamedInputs:f,renamedOutputs:v}]}}))}))}},10934:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.highlightText=void 0;var i=n(24246);function o(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}t.highlightText=function(e,t){var n=0,r=t.split(/\s+/).filter((function(e){return e.length>0})).map(o);if(0===r.length)return[e];for(var u=new RegExp(r.join("|"),"gi"),a=[];;){var s=u.exec(e);if(!s)break;var c=s[0].length,l=e.slice(n,u.lastIndex-c);l.length>0&&a.push(l),n=u.lastIndex,a.push(i.jsx("strong",{children:s[0]},n))}var d=e.slice(n);return d.length>0&&a.push(d),a}},99457:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Loader=void 0;var o=n(24246),r=i(n(44271));t.Loader=function(){return o.jsx(r.default,{type:"ball-clip-rotate",active:!0},void 0)}},12887:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0;var i=n(18265);t.logger=i.debugLogger("editor")},14264:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.preloadMonaco=void 0;var i=n(77324),o=n(12887),r=!1;t.preloadMonaco=function(){r||i.loader.init().then((function(){o.logger("monaco preloaded"),r=!0}))}},4824:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.appHotkeysConfig=t.hotkey=t.EditorHotkeyCmd=t.AppHotkeyCmd=void 0,function(e){e.SAVE_PART="save-part",e.NEW_PROJECT="new-project",e.SAVE_PROJECT="save-project",e.TOGGLE_SIDE="toggle-side",e.RUN="run",e.UNDO="undo"}(n=t.AppHotkeyCmd||(t.AppHotkeyCmd={})),function(e){e.SHOW_OMNIBAR="show-omnibar",e.CLEAR_SELECTION="clear-selection",e.DELETE_COMP="delete-comp",e.DUPLICATE_COMP="duplicate-comp",e.GROUP="group",e.SELECT_ALL="select-all",e.SELECT_CLOSEST="select-closest"}(t.EditorHotkeyCmd||(t.EditorHotkeyCmd={}));t.hotkey=function(e,t,n,i,o){return{combo:e,label:t,cmd:n,global:i,preventDefault:o}},t.appHotkeysConfig=[t.hotkey("shift+p","Save part",n.SAVE_PART,!0,!0),t.hotkey("shift+t","New project",n.NEW_PROJECT,!0,!0),t.hotkey("cmd+shift+s","Toggle side",n.TOGGLE_SIDE,!0,!0),t.hotkey("cmd+s","Toggle side",n.SAVE_PROJECT,!0,!0),t.hotkey("shift+r","Run",n.RUN,!0,!0),t.hotkey("cmd+z","Undo",n.UNDO,!0,!0)]},14648:function(e,t,n){"use strict";var i=this&&this.__spreadArray||function(e,t){for(var n=0,i=t.length,o=e.length;n<i;n++,o++)e[o]=t[n];return e},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useHotkeys=void 0;var r=o(n(34618)),u=n(27378);t.useHotkeys=function(e,t,n,o,a){void 0===o&&(o=[]),void 0===a&&(a={});var s=u.useCallback((function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];n&&!n.current||t.apply(void 0,e)}),i(i([],o),[t]));u.useEffect((function(){return r.default(e,a,s),function(){return r.default.unbind(e,s)}}),[e,s,a])}},11897:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.safeSessionStorage=t.safeLocalstorage=void 0,t.safeLocalstorage={getItem:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return localStorage.getItem.apply(localStorage,e)}catch(n){return null}},setItem:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return localStorage.setItem.apply(localStorage,e)}catch(n){return null}}},t.safeSessionStorage={getItem:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return sessionStorage.getItem.apply(sessionStorage,e)}catch(n){return null}},setItem:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return sessionStorage.setItem.apply(sessionStorage,e)}catch(n){return null}}}},49040:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomReactTooltip=void 0;var r=n(24246),u=n(27378),a=o(n(31542)),s=o(n(87661));function c(e){var t=e.children,n=e.domNode;return a.default.createPortal(t,n)}t.CustomReactTooltip=function(e){var t=u.useRef();return u.useEffect((function(){t.current=document.createElement("div"),document.body.appendChild(t.current)}),[]),t.current?r.jsx(c,i({domNode:t.current},{children:r.jsx(s.default,i({},e),void 0)}),void 0):null},t.default=t.CustomReactTooltip},77437:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useLocalStorage=t.useResizePref=t.userPreferences=t.useUserPref=void 0;var u,a=r(n(27378)),s=n(12901),c=n(11897);t.useUserPref=function(e,n){var i=a.useState((function(){var i=t.userPreferences.getItem(e);return s.isDefined(i)?i:n})),o=i[0],r=i[1];a.useEffect((function(){var i=t.userPreferences.getItem(e),o=s.isDefined(i)?i:n;r(o)}),[e]);return[o,function(n){t.userPreferences.setItem(e,n),console.log("Saved",e,n),r(n)}]},t.userPreferences=(u=function(e){return"up."+e},{getItem:function(e){var t=c.safeLocalstorage.getItem(u(e))||"",n=c.safeSessionStorage.getItem(u(e))||"";try{return JSON.parse(n||t).value}catch(i){return}},setItem:function(e,t,n){void 0===n&&(n=!1);var i=n?sessionStorage:c.safeLocalstorage;try{var o=JSON.stringify({value:t});return i.setItem(u(e),o),!0}catch(r){return console.error("Error saving user preference",r),!1}}});t.useResizePref=function(e,n){var i="resize."+e;return t.useUserPref(i,n)};var l=function(e){var t=c.safeLocalstorage.getItem(e);if(!t)return null;try{return JSON.parse(t).value}catch(n){return null}};t.useLocalStorage=function(e,t){var n=a.useState(l(e)||t),i=n[0],o=n[1],r=a.useCallback((function(t){c.safeLocalstorage.setItem(e,JSON.stringify({value:t})),o(t)}),[e]);return a.useEffect((function(){l(e)||c.safeLocalstorage.setItem(e,JSON.stringify({value:t}))}),[e,t,r]),[i,r]}},99743:function(e,t){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.totalEnergy=t.itrPhysics=t.hookes=t.coulombs=t.vToStr=t.vNorm=t.vLen=t.vSub=t.vAdd=t.vDiv=t.vMul=t.vZero=t.rnd=t.vec=t.size=void 0;t.size=function(e,t){return{width:e,height:t}};t.vec=function(e,t){return{x:e,y:t}};t.rnd=function(e,t){return void 0===e&&(e=100),void 0===t&&(t=0),Math.floor(Math.random()*(e-t))+t},t.vZero={x:0,y:0};t.vMul=function(e,t){return{x:e.x*t,y:e.y*t}};t.vDiv=function(e,n){var i=e.x,o=e.y;return t.vMul({x:i,y:o},1/n)};t.vAdd=function(e,t){return{x:e.x+t.x,y:e.y+t.y}};t.vSub=function(e,n){return t.vAdd(e,t.vMul(n,-1))};t.vLen=function(e){var t=e.x,n=e.y;return Math.sqrt(t*t+n*n)};t.vNorm=function(e){return t.vDiv(e,t.vLen(e)||1)};t.vToStr=function(e){var t=e.x,n=e.y;return t.toFixed(1)+","+n.toFixed(1)};t.coulombs=function(e,n,i){var o=t.vLen(t.vSub(e.p,n.p));if(0===o){var r=t.vec(2*Math.random()-1,2*Math.random()-1),u=e.m*n.m/Math.pow(10,2);return t.vMul(r,u*i)}r=t.vNorm(t.vSub(n.p,e.p)),u=e.m*n.m/Math.pow(o+.1,2);return t.vMul(r,u*i)};t.hookes=function(e,n,i,o,r){var u=t.vLen(t.vSub(e.p,n.p)),a=t.vNorm(t.vSub(e.p,n.p)),s=0;return u<i?s=i-u:u>o&&(s=o-u),t.vMul(a,r*s)};t.itrPhysics=function(e,i){var o=i.p,r=i.v,u=i.f,a=i.m,s=t.vDiv(u,a),c=e/1e3,l=t.vAdd(t.vMul(s,c),r),d=t.vAdd(t.vMul(l,c),o);return n(n({},i),{p:d,v:l,f:t.vec(0,0)})};t.totalEnergy=function(e){return e.reduce((function(e,n){var i=t.vLen(n.v);return e+.5*n.m*i*i}),0)}},40232:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateToast=t.toastMsg=t.AppToaster=void 0;var i=n(42272);t.AppToaster=function(){try{return i.Toaster.create({className:"app-toaster",position:i.Position.BOTTOM_RIGHT})}catch(e){return{}}}();t.toastMsg=function(e,n,i){return t.AppToaster.show({message:e,intent:n,timeout:i})};t.updateToast=function(e,n,i){return t.AppToaster.show({message:n,intent:i},e)}},12901:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.preventDefaultAnd=t.isLocal=t.fullTime=t.timeAgoFromDt=t.timeAgo=t.toString=t.isDefined=t.set=t.createOmap=t.toOmap=t.values=t.keys=t.entries=void 0;var r=n(52395),u=n(18265),a=o(n(61320));t.entries=function(e){return Object.keys(e).map((function(t){return[t,e[t]]}))};t.keys=function(e){return Object.keys(e)};t.values=function(e){return Object.keys(e).map((function(t){return e[t]}))};t.toOmap=function(e){return Array.from(e.entries()).reduce((function(e,t){var n,o=t[0],r=t[1];return i(i({},e),((n={})[o]=r,n))}),{})};t.createOmap=function(e){return void 0===e&&(e=[]),e.reduce((function(e,t){var n;return i(i({},e),((n={})[t[0]]=t[1],n))}),{})};t.set=function(e,t,n){e[t]=n};t.isDefined=function(e){return void 0!==e};t.toString=function(e){var t=typeof e;if(""===e)return"(empty string)";if(r.isJsxValue(e))return"JSX Value";if(u.isStaticValueGroupedPart(e))return"Embedded Part";if(u.isEnvValue(e))return u.getEnvKeyFromValue(e);if("object"===t)try{var n=JSON.stringify(e);return"{}"===n?"Empty object":n}catch(i){return"Object (cannot stringify)"}return""+e};t.timeAgo=function(e){return a.default(new Date(e)).fromNow()};t.timeAgoFromDt=function(e){return a.default(Date.now()-e).fromNow()};t.fullTime=function(e){return a.default(new Date(e)).toString()};t.isLocal=function(){return location.href.includes(":300")};t.preventDefaultAnd=function(e){return function(t){t.preventDefault(),e(t)}}},17229:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createEditorClient=void 0;var i=n(18265),o=n(14206),r=n(50208),u=n(19389),a=i.debugLogger("runtime-editor-client");t.createEditorClient=function(e,t){var n=new URL(e),i=r.default(n.origin,{path:("/"===n.pathname?"":n.pathname)+"/socket.io/editor"});return i.emit("join-room-editor",t),{emitChange:function(e){i.emit(u.DebuggerServerEventType.CHANGE_EVENT_NAME,e)},emitBreakpointsChange:function(e){i.emit(u.DebuggerServerEventType.UPDATE_BREAKPOINTS,e)},interceptInput:function(e){i.emit(u.DebuggerServerEventType.INPUT_VALUE_OVERRIDE,e)},interceptOutput:function(e){i.emit(u.DebuggerServerEventType.OUTPUT_VALUE_OVERRIDE,e)},onRuntimeReady:function(e){return i.on(u.DebuggerServerEventType.RUNTIME_READY,e),function(){return i.off(u.DebuggerServerEventType.RUNTIME_READY,e)}},onChangeAwk:function(e){return i.on(u.DebuggerServerEventType.CHANGE_AWK,e),function(){return i.off(u.DebuggerServerEventType.CHANGE_AWK,e)}},onChangeError:function(e){return i.on(u.DebuggerServerEventType.CHANGE_ERROR,e),function(){return i.off(u.DebuggerServerEventType.CHANGE_ERROR,e)}},onIsAlive:function(e){return i.on(u.DebuggerServerEventType.IS_ALIVE,e),function(){return i.off(u.DebuggerServerEventType.IS_ALIVE,e)}},emitInputValue:function(e,t){a("Emitting push input value to "+e+" %o",t),i.emit(u.DebuggerServerEventType.PUSH_INPUT_VALUE,{pinId:e,value:t})},destroy:function(){i.disconnect(),u.enumToArray(u.DebuggerServerEventType).forEach((function(e){return i.off(e)}))},onDisconnect:function(e){return i.on("disconnect",e),function(){return i.off("disconnect",e)}},debugInfo:function(){return"Remote debugger for "+e},onBatchedEvents:function(e){return i.on(u.DebuggerServerEventType.EVENTS_BATCH,e),function(){return i.off(u.DebuggerServerEventType.EVENTS_BATCH,e)}},requestState:function(){return o.default.get(e+"/state").then((function(e){return e.data.state}))},getHistory:function(t){return o.default.get(e+"/history",{params:{insId:t.insId,pinId:t.pinId,limit:t.limit}}).then((function(e){return e.data}))},clearHistory:function(){return o.default.delete(e+"/history").then((function(){}))},triggerPart:function(t,n){return o.default.post(e+"/trigger",{partId:t,inputs:n}).then((function(e){return e.data}))}}}},4278:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRuntimeClient=t.DEFAULT_DT_SCALE=void 0;var i=n(18265),o=n(50208),r=n(19389),u=i.debugLogger("debugger-runtime-client");t.DEFAULT_DT_SCALE=1;t.createRuntimeClient=function(e,t){var n=new URL(e),a=o.io(n.origin,{path:("/"===n.pathname?"":n.pathname)+"/socket.io/runtime"});a.emit("join-room-runtime",t);new Set;a.on(r.DebuggerServerEventType.UPDATE_BREAKPOINTS,(function(e){new Set(e)}));Date.now();var s=i.cappedArrayDebounce((function(e){u("Emitting debounced batched events - "+e.length),a.emit(r.DebuggerServerEventType.EVENTS_BATCH,e)}),100,200),c={onChange:function(e){return a.on(r.DebuggerServerEventType.CHANGE_EVENT_NAME,e),function(){return a.off(r.DebuggerServerEventType.CHANGE_EVENT_NAME,e)}},onInput:function(e){return a.on(r.DebuggerServerEventType.PUSH_INPUT_VALUE,e),function(){return a.off(r.DebuggerServerEventType.PUSH_INPUT_VALUE,e)}},emitEvent:function(e){u("Emitting event "+e.type+" change event of "+e.insId),s.addItem(e)},emitRuntimeReady:function(){a.emit(r.DebuggerServerEventType.RUNTIME_READY,{})},emitChangeAwk:function(){a.emit(r.DebuggerServerEventType.CHANGE_AWK,{})},emitChangeError:function(e){a.emit(r.DebuggerServerEventType.CHANGE_ERROR,{error:e})},emitIsAlive:function(e){a.emit(r.DebuggerServerEventType.IS_ALIVE,{time:e})},destroy:function(){s.flush(),r.enumToArray(r.DebuggerServerEventType).forEach((function(e){return a.off(e)})),a.disconnect()},onDisconnect:function(e){return a.on("disconnect",e),function(){return a.off("disconnect",e)}}};return new Promise((function(e,t){a.connected?e(c):(a.on("connect_error",(function(e){t("Socket connect error: "+e)})),a.on("connect",(function(){e(c)})))}))}},19389:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DebuggerServerEventType=t.enumToArray=t.isNumber=t.isSimpleType=t.valuePreview=t.toString=void 0;var i=n(63726);t.toString=function(e){if("object"===typeof e){if(e instanceof Error)return JSON.stringify(i.serializeError(e));try{return JSON.stringify(e).substr(0,250)}catch(t){return"Object (cannot stringify)"}}return(""+e).substr(0,250)};t.valuePreview=function(e){return t.toString(e).substr(0,100)};t.isSimpleType=function(e){return["number","string","boolean"].includes(typeof e)};t.isNumber=function(e){return!1===isNaN(Number(e))},t.enumToArray=function(e){return Object.keys(e).filter(t.isNumber).map((function(t){return e[t]}))},function(e){e.RUNTIME_READY="runtime-ready",e.CHANGE_EVENT_NAME="change",e.PUSH_INPUT_VALUE="push-input-value",e.CHANGE_AWK="live-change-awk",e.CHANGE_ERROR="live-change-error",e.IS_ALIVE="is-alive",e.UPDATE_BREAKPOINTS="update-breakpoints",e.INPUT_VALUE_OVERRIDE="input-value-override",e.OUTPUT_VALUE_OVERRIDE="output-value-override",e.INPUT_VALUE_CHANGE="input-value-changed",e.OUTPUT_VALUE_CHANGE="output-value-changed",e.PROCESSING_CHANGE="processing-changed",e.INPUTS_STATE_CHANGE="inputs-state-changed",e.PART_ERROR="part-error",e.EVENTS_BATCH="events-batch"}(t.DebuggerServerEventType||(t.DebuggerServerEventType={}))},75579:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(19389),t),o(n(17229),t),o(n(4278),t)},97534:function(e,t,n){var i=n(45597).default;e.exports={id:"Dot",defaultStyle:{size:"small"},inputs:{obj:{mode:"required",type:"any"},key:{mode:"required",type:"any"}},outputs:{value:{type:"any"}},customViewCode:"<% if (inputs.key) { %> .<%- inputs.key %> <% } else { %> Dot <% } %>",completionOutputs:["value"],fn:function(e,t,n){for(var o,r=e.obj,u=e.key,a=t.value,s=!1,c={},l=u.replace(/\["(([^"])+)"\]/g,(function(e,t,n,i){var o="__$KEY$__"+i;return c[o]=t,"."+o})).split("."),d=Object.assign({},r),p=i(l);!(o=p()).done;){var f=o.value,v=c[f]||f;d&&void 0!==d[v]&&null!==d[v]?d=d[v]:(a.next(null),s=!0)}s||a.next(d)}}},71611:function(e,t,n){e.exports={id:"HttpGet",inputs:{url:{mode:"required",type:"any"},headers:{mode:"required-if-connected",type:"any"}},outputs:{response:{type:"any"}},completionOutputs:["response"],fn:function(e,t,i){var o=n(25717),r=e.url,u=e.headers,a=t.response,s=i.onError;o.get(r,{headers:u,timeout:15e3}).then((function(e){a.next(e.data)}),(function(e){s(e)}))}}},80902:function(e,t,n){e.exports={id:"HttpPost",inputs:{url:{mode:"required",type:"any"},body:{mode:"required",type:"any"},headers:{mode:"required-if-connected",type:"any"},bodyType:{mode:"required-if-connected",type:"any"}},completionOutputs:["response"],outputs:{response:{type:"any"}},fn:function(e,t,i){var o=n(25717),r=e.url,u=e.body,a=e.headers,s=e.bodyType,c=t.response,l=i.onError,d={headers:a,timeout:15e3};if("form"===s){var p=[];Object.keys(u).forEach((function(e){p.push(e+"="+encodeURIComponent(u[e]))})),o.post(r,p.join("&"),d).then((function(e){c.next(e.data)}),(function(e){var t=e.response,n=e.message,i=t?{data:t.data,status:t.status}:{data:n,status:-1};l(i)}))}else o.post(r,u,d).then((function(e){c.next(e.data)}),(function(e){var t=e.response,n=e.message,i=t?{data:t.data,status:t.status}:{data:n,status:-1};l(i)}))}}},42716:function(e,t,n){"use strict";n.d(t,{V:function(){return u}});var i=n(52685),o=n(27378),r=function(e){return o.createElement("li",{className:"log-item"},o.createElement("main",{className:"content"},e.value),o.createElement("aside",null,new Date(e.time).toLocaleTimeString()))},u=function(e){var t=o.useState([]),n=t[0],u=t[1];return o.useEffect((function(){e.output.subscribe((function(e){var t="object"==typeof e&&o.isValidElement(e)?e:""+e;u((function(e){return[].concat(e,[{value:t,time:Date.now()}])}))}))}),[]),o.createElement("div",{className:"output-log"},o.createElement("header",null,"Output Log"," ",o.createElement("button",{className:"clear-btn button button--outline button--secondary button--sm",onClick:function(){return u([])}},"Clear")),o.createElement("main",null,o.createElement("ul",null,n.map((function(e,t){return o.createElement(r,(0,i.Z)({},e,{key:t}))}))),0===n.length?o.createElement("div",{className:"empty-state"},"Nothing to show. Interact with the example to emit some outputs!"):null))}},38941:function(e,t,n){"use strict";n.d(t,{I:function(){return C}});var i=n(27378),o=n(67651),r=n(59821),u=n(38944),a=n(96149),s=n(18265),c={VMScript:function(e){this.script=e},VM:function(){function e(e){this.context=e}return e.prototype.run=function(e){var t=(0,s.okeys)(this.context.sandbox),n=Object.values(this.context.sandbox);Function.apply(void 0,t.concat([e.script])).apply(void 0,n)},e}()},l=n(81884),d=n(44305),p=n(13127),f=200,v=n(60512),m=n(1706),y=n(12902),h=n(33099);n.g.vm2=c;var g,I,b=(I=new Map,{requestHistory:(g=(0,p.Z)((0,d.Z)().mark((function e(t,n,i){var o,r,u,a;return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="input"===i?s.DebuggerEventType.INPUT_CHANGE:s.DebuggerEventType.OUTPUT_CHANGE,console.log({insId:t,pinId:n,type:o}),r=t+"."+n+"."+o,u=I.get(r)||{total:0,lastSamples:[]},a=u.lastSamples.slice(0,f),e.abrupt("return",Object.assign({},u,{lastSamples:a}));case 6:case"end":return e.stop()}}),e)}))),function(e,t,n){return g.apply(this,arguments)}),addEvents:function(e){e.forEach((function(e){if(e.type===s.DebuggerEventType.ERROR){var t=e;t.type=s.DebuggerEventType.OUTPUT_CHANGE,t.pinId=s.ERROR_PIN_ID}if(e.type===s.DebuggerEventType.INPUT_CHANGE||e.type===s.DebuggerEventType.OUTPUT_CHANGE){var n=e.insId,i=e.type,o=n+"."+e.pinId+"."+i,r=I.get(o)||{total:0,lastSamples:[]};r.lastSamples.unshift(e),r.lastSamples.length>f&&r.lastSamples.splice(f,r.lastSamples.length-f),r.total++,I.set(o,r)}}))}}),P=[{title:"Hello World",key:"hello-world"},{title:"React Counter",key:"react-counter"},{title:"BMI Calculator",key:"bmi"},{title:"REST API Usage",key:"apis"},{title:"Debounce vs. Throttling",key:"debounce-throttling"},{title:"Fibonacci Seq.",key:"fibonacci"}],_=function(e){var t,n,i=e.flow,r=e.output,u=e.inputs,a=e.onError,c=e.debugDelay,l=function(e,t){return{onEvent:function(n){console.info("Got debugger event",n),t.addEvents([n]),e.addEvents([n])}}}(e.player,b);l.debugDelay=c;var d=(0,s.keys)(i.main.outputs)[0];return(0,s.execute)({part:i.main,inputs:u,outputs:(t={},t[d]=r,t),partsRepo:Object.assign({},i.dependencies,(n={},n[i.main.id]=i.main,n)),_debugger:l,onBubbleError:function(e){a(e)},extraContext:{PubSub:o}})},C=function(e){var t=e.flowProps,n=t.flow,o=t.inputs,c=t.output,d=(0,i.useState)(e.initWidth||500),p=d[0],f=d[1],g=(0,i.useState)(e.defaultDelay||0),I=g[0],C=g[1],x=(0,i.useState)(!1),O=x[0],E=x[1],w=(0,i.useRef)((0,a.createRuntimePlayer)("root."+e.flowProps.flow.part.id)),j=(0,i.useState)(e.flowProps.resolvedFlow),S=j[0],D=j[1],T=(0,i.useState)({flow:n,boardData:{viewPort:{pos:{x:0,y:0},zoom:1},lastMousePos:{x:0,y:0},selected:[]}}),k=T[0],N=T[1];(0,i.useEffect)((function(){D((function(e){return Object.assign({},e,{main:k.flow.part})}))}),[k.flow.part]);var M={state:k,resolvedRepoWithDeps:S,onChangeEditorState:N,onInspectPin:s.noop,onRequestHistory:b.requestHistory,hideTemplatingTips:!0,onImportPart:s.noop,onExtractInlinePart:s.noop,onQueryImportables:s.noop};(0,i.useEffect)((function(){w.current.start()}),[]),(0,i.useEffect)((function(){var t=_({flow:S,output:c,inputs:o,onError:s.noop,debugDelay:I,player:w.current}),n=e.flowProps.output.subscribe((function(){return E(!0)}));return function(){t(),n.unsubscribe()}}),[I,S]);var R=(0,i.useCallback)((function(e,t){var n=t.size;f(n.width),N((function(e){var t=document.querySelector(".flow-container"),n=t?t.getBoundingClientRect():{width:500,height:500};return(0,y.ZP)(e,(function(e){e.boardData.viewPort=(0,a.fitViewPortToPart)(e.flow.part,S.dependencies,n)}))}))}),[]),A=i.createElement("div",{className:"delay-container"},i.createElement("input",{type:"range",id:"volume",name:"delay",value:I,step:"100",min:"0",max:"300",onChange:function(e){return C(Number(e.target.value))}}),i.createElement("label",{htmlFor:"volume"},"Debug Delay: ",I,"ms")),H=P.findIndex((function(t){return t.key===e.meta.key})),V=P[H+1],z=P[H-1];return i.createElement(r.Z,{title:e.meta.title+" | Playground",description:"Flyde Playground - "+e.meta.title+" example"},i.createElement("header",{className:(0,u.Z)("hero hero--primary",v.Z.heroBanner,"playground-hero")},i.createElement("div",{className:"container"},i.createElement("h1",{className:"hero__title"},"Welcome to Flyde's Online Playground"),i.createElement("p",{className:"hero__subtitle"},"Choose one of the examples below to get started. Feel free to play around with the canvas and see how your changes affect the result!"))),i.createElement("ul",{className:"examples__menu"},P.map((function(e){return i.createElement("li",{key:e.key},i.createElement(l.Z,{to:"/playground/"+e.key,className:"button button--primary"},e.title))}))),i.createElement("div",{className:"playground-container"},i.createElement("header",null,i.createElement("h2",{className:"playground-title"},e.meta.title),i.createElement("div",{className:"playground-description"},e.meta.description),O?i.createElement(i.Fragment,null,i.createElement("hr",null),i.createElement("div",{className:"playground-extra"},e.extraInfo||e.meta.extraInfo)):null,e.prefixComponent),i.createElement("div",{className:"playground"},i.createElement("div",{className:"flow-container"},!0!==e.hideDelay?A:null,i.createElement(h.Z,null,(function(){return i.createElement(a.FlowEditor,M)}))),i.createElement(m.Resizable,{height:0,width:p,onResize:R,axis:"x",handle:i.createElement("div",{className:"handle"}),resizeHandles:["w"]},i.createElement("div",{className:"output-container",style:{flexBasis:p}},e.children))),i.createElement("nav",{className:"pagination-nav"},i.createElement("div",{className:"pagination-nav__item"},z?i.createElement("a",{className:"pagination-nav__link",href:"/playground/"+z.key},i.createElement("div",{className:"pagination-nav__sublabel"},"Previous Example"),i.createElement("div",{className:"pagination-nav__label"},z.title)):null),i.createElement("div",{className:"pagination-nav__item pagination-nav__item--next"},V?i.createElement("a",{className:"pagination-nav__link",href:"/playground/"+V.key},i.createElement("div",{className:"pagination-nav__sublabel"},"Next Example"),i.createElement("div",{className:"pagination-nav__label"},V.title)):null))))}},65689:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var i=n(27378),o=n(18265),r=n(38941),u={resolvedFlow:{main:{instances:[{pos:{x:-656.1905053710938,y:326.03946411132813},id:"Inline-value-Hello from ${i76",inputConfig:{},part:{id:"Inline-value-Hello from ${i",inputs:{country:{type:"any",mode:"required"},capital:{type:"any",mode:"required"},population:{type:"any",mode:"required"}},outputs:{value:{type:"any",delayed:!1,optional:!1}},fnCode:"const result = (`Hello from ${inputs.country}! It's capital is ${inputs.capital} (population of ${inputs.population})`); Promise.resolve(result).then(val => outputs.value.next(val))",customViewCode:"`Hello from ${inputs.country}! It's capital is ${inputs.capital} (population of ${inputs.population}",dataBuilderSource:"YEhlbGxvIGZyb20gJHtpbnB1dHMuY291bnRyeX0hIEl0J3MgY2FwaXRhbCBpcyAke2lucHV0cy5jYXBpdGFsfSAocG9wdWxhdGlvbiBvZiAke2lucHV0cy5wb3B1bGF0aW9ufSlg",templateType:"value",completionOutputs:["value"],defaultStyle:{size:"regular",icon:"code",cssOverride:{fontFamily:"monospace",fontWeight:"500"}}}},{pos:{x:-577.892123413086,y:-224.60953734636303},id:"Get User's Country-ins",inputConfig:{},part:{id:"Get User's Country",inputs:{},outputs:{country:{type:"any",delayed:!1,optional:!1}},instances:[{pos:{x:-376.6389208984375,y:-180.36268857002256},id:"HttpGet-907",inputConfig:{url:{mode:"static",value:"https://api.country.is/"}},visibleInputs:["url","__trigger"],visibleOutputs:["r","__error","response"],partId:"HttpGet"},{id:"Inline-value-{iso2: ${input76",part:{id:"Inline-value-{iso2: inputs.d",inputs:{data:{type:"any",mode:"required"}},outputs:{value:{type:"any",delayed:!1,optional:!1}},fnCode:"const result = ({iso2: inputs.data.country}); Promise.resolve(result).then(val => outputs.value.next(val))",customViewCode:"{iso2: inputs.data.country}",dataBuilderSource:"e2lzbzI6IGlucHV0cy5kYXRhLmNvdW50cnl9",templateType:"value",completionOutputs:["value"],defaultStyle:{size:"regular",icon:"code",cssOverride:{fontFamily:"monospace",fontWeight:"500"}}},inputConfig:{},pos:{x:-468.5056274414062,y:-39.30523986816405}}],inputsPosition:{},outputsPosition:{r:{x:-363.42401672132144,y:105.34149194113161},country:{x:-322.5739794922268,y:138.57280736180334}},connections:[{from:{insId:"HttpGet-907",pinId:"response"},to:{insId:"Inline-value-{iso2: ${input76",pinId:"data"}},{from:{insId:"Inline-value-{iso2: ${input76",pinId:"value"},to:{pinId:"country",insId:"__this"}}],completionOutputs:["country"]},style:{size:"large",color:"#f15bb5"}},{pos:{x:-636.9743029785157,y:-85.37110525846481},id:"Get Country Name And Capital-ins",inputConfig:{},visibleOutputs:["name","capital"],part:{id:"Get Country Name And Capital",inputs:{body:{type:"any",mode:"required"}},outputs:{capital:{type:"any",delayed:!1,optional:!1},name:{type:"any",delayed:!1,optional:!1}},instances:[{pos:{x:-455.39787109375004,y:43.691497802734375},id:"HttpPost-624",inputConfig:{url:{mode:"static",value:"https://countriesnow.space/api/v0.1/countries/capital"}},visibleInputs:["url","body"],partId:"HttpPost"},{pos:{x:-559.7825415039063,y:194.45557312011715},id:"Dot-286",inputConfig:{key:{mode:"static",value:"data.name"}},visibleInputs:["obj"],partId:"Dot"},{pos:{x:-400.3785717773437,y:198.4349559259415},id:"Dot-822",inputConfig:{key:{mode:"static",value:"data.capital"}},visibleInputs:["obj"],partId:"Dot"}],inputsPosition:{body:{x:-333.75691140339336,y:-63.66470402308542}},outputsPosition:{value:{x:-514.1541695281439,y:411.8457371232514},i10:{x:-280.88783057750686,y:411.581705357324},capital:{x:-373.87585887717984,y:347.90184574177306},name:{x:-537.398329068569,y:348.1765805072715}},connections:[{from:{insId:"__this",pinId:"body"},to:{insId:"HttpPost-624",pinId:"body"}},{from:{insId:"Dot-286",pinId:"value"},to:{insId:"__this",pinId:"name"}},{from:{insId:"Dot-822",pinId:"value"},to:{insId:"__this",pinId:"capital"}},{from:{insId:"HttpPost-624",pinId:"response"},to:{insId:"Dot-286",pinId:"obj"}},{from:{insId:"HttpPost-624",pinId:"response"},to:{insId:"Dot-822",pinId:"obj"}}],completionOutputs:["name+capital"]},style:{size:"large",color:"#9b5de5"}},{pos:{x:-264.4149328613281,y:175.11608734130857},id:"Format Number-ins",inputConfig:{},part:{id:"Format Number",inputs:{number:{type:"any",mode:"required"}},outputs:{string:{type:"any",delayed:!1,optional:!1}},instances:[{id:"Inline-value-Result is ${in47",part:{id:"Inline-value-new Intl.Number",inputs:{population:{type:"any",mode:"required"}},outputs:{r:{type:"any",delayed:!1,optional:!1}},fnCode:"outputs.r.next((new Intl.NumberFormat().format(inputs.population)))",customViewCode:"new Intl.NumberFormat().format(inputs.population)",dataBuilderSource:"bmV3IEludGwuTnVtYmVyRm9ybWF0KCkuZm9ybWF0KGlucHV0cy5wb3B1bGF0aW9uKQ==",templateType:"value",completionOutputs:["r"]},inputConfig:{},pos:{x:-452.21022216796877,y:176.39826171875}}],inputsPosition:{population:{x:0,y:0},number:{x:0,y:0}},outputsPosition:{r:{x:0,y:400},string:{x:0,y:400}},connections:[{from:{insId:"__this",pinId:"number"},to:{insId:"Inline-value-Result is ${in47",pinId:"population"}},{from:{insId:"Inline-value-Result is ${in47",pinId:"r"},to:{insId:"__this",pinId:"string"}}],completionOutputs:["string"]},style:{size:"regular",color:"#fee440"}},{pos:{x:-318.75787109375,y:32.73055236816407},id:"cl8x5r4qp00074666lb382z1c",inputConfig:{},part:{id:"Get Population By City",inputs:{city:{type:"any",mode:"required"}},outputs:{value:{type:"any",delayed:!1,optional:!1}},instances:[{pos:{x:-204.90311279296873,y:349.60314422607416},id:"HttpPost-775",inputConfig:{url:{mode:"static",value:"https://countriesnow.space/api/v0.1/countries/population/cities"}},visibleInputs:["url","body"],partId:"HttpPost"},{pos:{x:-143.08780761718754,y:233.70198646545413},id:"Inline-value-{city: inputs.c75",inputConfig:{},part:{id:"Inline-value-{city: inputs.c",inputs:{city:{type:"any",mode:"required"}},outputs:{r:{type:"any",delayed:!1,optional:!1}},fnCode:"outputs.r.next(({city: inputs.city}))",customViewCode:"{city: inputs.city}",dataBuilderSource:"e2NpdHk6IGlucHV0cy5jaXR5fQ==",templateType:"value",completionOutputs:["r"]}},{id:"Dot-710",partId:"Dot",inputConfig:{key:{mode:"static",value:"data.populationCounts.0.value"}},pos:{x:-206.3246728515625,y:483.9902026367188},visibleInputs:["obj"]}],inputsPosition:{city:{x:-59.242744173605615,y:192.73141904118035}},outputsPosition:{value:{x:-107.75930491072856,y:617.5218613166921}},connections:[{from:{insId:"Inline-value-{city: inputs.c75",pinId:"r"},to:{insId:"HttpPost-775",pinId:"body"}},{from:{insId:"__this",pinId:"city"},to:{insId:"Inline-value-{city: inputs.c75",pinId:"city"}},{from:{insId:"Dot-710",pinId:"value"},to:{pinId:"value",insId:"__this"}},{from:{insId:"HttpPost-775",pinId:"response"},to:{insId:"Dot-710",pinId:"obj"}}],completionOutputs:["value"]},style:{size:"large",color:"#00bbf9"}}],connections:[{from:{insId:"Get Country Name And Capital-ins",pinId:"name"},to:{insId:"Inline-value-Hello from ${i76",pinId:"country"}},{from:{insId:"Get Country Name And Capital-ins",pinId:"capital"},to:{insId:"Inline-value-Hello from ${i76",pinId:"capital"}},{from:{insId:"Format Number-ins",pinId:"string"},to:{insId:"Inline-value-Hello from ${i76",pinId:"population"}},{from:{insId:"cl8x5r4qp00074666lb382z1c",pinId:"value"},to:{insId:"Format Number-ins",pinId:"number"}},{from:{insId:"Get Country Name And Capital-ins",pinId:"capital"},to:{insId:"cl8x5r4qp00074666lb382z1c",pinId:"city"}},{from:{insId:"Get User's Country-ins",pinId:"country"},to:{insId:"Get Country Name And Capital-ins",pinId:"body"}},{from:{insId:"Inline-value-Hello from ${i76",pinId:"value"},to:{insId:"__this",pinId:"response"}}],id:"ApisCombination",inputs:{},outputs:{response:{type:"any",optional:!1,delayed:!1}},inputsPosition:{city:{x:-187.27285824815934,y:-14.13215209416181}},outputsPosition:{json:{x:-441.98276309426666,y:480.38719404276554},na:{x:-441.98276309426666,y:480.38719404276554},result:{x:-499.82438378976735,y:706.7650396699393},output:{x:-474.64252250807056,y:437.71313745088565},response:{x:-506.3386688159596,y:488.67302443385125}},completionOutputs:["response"]},dependencies:{HttpGet:{id:"HttpGet",inputs:{url:{mode:"required",type:"any"},headers:{mode:"required-if-connected",type:"any"}},outputs:{response:{type:"any"}},completionOutputs:["response"],fn:n(71611).fn,importPath:"/Users/gabrielgrinberg/projects/flyde/stdlib/parts/http/HttpGet.flyde.js",part:{id:"HttpGet",inputs:{url:{mode:"required",type:"any"},headers:{mode:"required-if-connected",type:"any"}},outputs:{response:{type:"any"}},completionOutputs:["response"],fn:n(71611).fn,importPath:"/Users/gabrielgrinberg/projects/flyde/stdlib/parts/http/HttpGet.flyde.js"}},HttpPost:{id:"HttpPost",inputs:{url:{mode:"required",type:"any"},body:{mode:"required",type:"any"},headers:{mode:"required-if-connected",type:"any"},bodyType:{mode:"required-if-connected",type:"any"}},completionOutputs:["response"],outputs:{response:{type:"any"}},fn:n(80902).fn,importPath:"/Users/gabrielgrinberg/projects/flyde/stdlib/parts/http/HttpPost.flyde.js",part:{id:"HttpPost",inputs:{url:{mode:"required",type:"any"},body:{mode:"required",type:"any"},headers:{mode:"required-if-connected",type:"any"},bodyType:{mode:"required-if-connected",type:"any"}},completionOutputs:["response"],outputs:{response:{type:"any"}},fn:n(80902).fn,importPath:"/Users/gabrielgrinberg/projects/flyde/stdlib/parts/http/HttpPost.flyde.js"}},Dot:{id:"Dot",defaultStyle:{size:"small"},inputs:{obj:{mode:"required",type:"any"},key:{mode:"required",type:"any"}},outputs:{value:{type:"any"}},customViewCode:"<% if (inputs.key) { %> .<%- inputs.key %> <% } else { %> Dot <% } %>",completionOutputs:["value"],fn:n(97534).fn,importPath:"/Users/gabrielgrinberg/projects/flyde/stdlib/parts/Dot.flyde.js",part:{id:"Dot",defaultStyle:{size:"small"},inputs:{obj:{mode:"required",type:"any"},key:{mode:"required",type:"any"}},outputs:{value:{type:"any"}},customViewCode:"<% if (inputs.key) { %> .<%- inputs.key %> <% } else { %> Dot <% } %>",completionOutputs:["value"],fn:n(97534).fn,importPath:"/Users/gabrielgrinberg/projects/flyde/stdlib/parts/Dot.flyde.js"}}}},flow:{imports:{"@flyde/stdlib":["HttpResponse","HttpGet","Pick","HttpPost","Dot","HtmlBtn","Accumulate2"]},part:{instances:[{pos:{x:-656.1905053710938,y:326.03946411132813},id:"Inline-value-Hello from ${i76",inputConfig:{},part:{id:"Inline-value-Hello from ${i",inputs:{country:{type:"any",mode:"required"},capital:{type:"any",mode:"required"},population:{type:"any",mode:"required"}},outputs:{value:{type:"any",delayed:!1,optional:!1}},fnCode:"const result = (`Hello from ${inputs.country}! It's capital is ${inputs.capital} (population of ${inputs.population})`); Promise.resolve(result).then(val => outputs.value.next(val))",customViewCode:"`Hello from ${inputs.country}! It's capital is ${inputs.capital} (population of ${inputs.population}",dataBuilderSource:"YEhlbGxvIGZyb20gJHtpbnB1dHMuY291bnRyeX0hIEl0J3MgY2FwaXRhbCBpcyAke2lucHV0cy5jYXBpdGFsfSAocG9wdWxhdGlvbiBvZiAke2lucHV0cy5wb3B1bGF0aW9ufSlg",templateType:"value",completionOutputs:["value"],defaultStyle:{size:"regular",icon:"code",cssOverride:{fontFamily:"monospace",fontWeight:"500"}}}},{pos:{x:-577.892123413086,y:-224.60953734636303},id:"Get User's Country-ins",inputConfig:{},part:{id:"Get User's Country",inputs:{},outputs:{country:{type:"any",delayed:!1,optional:!1}},instances:[{pos:{x:-376.6389208984375,y:-180.36268857002256},id:"HttpGet-907",inputConfig:{url:{mode:"static",value:"https://api.country.is/"}},visibleInputs:["url","__trigger"],visibleOutputs:["r","__error","response"],partId:"HttpGet"},{id:"Inline-value-{iso2: ${input76",part:{id:"Inline-value-{iso2: inputs.d",inputs:{data:{type:"any",mode:"required"}},outputs:{value:{type:"any",delayed:!1,optional:!1}},fnCode:"const result = ({iso2: inputs.data.country}); Promise.resolve(result).then(val => outputs.value.next(val))",customViewCode:"{iso2: inputs.data.country}",dataBuilderSource:"e2lzbzI6IGlucHV0cy5kYXRhLmNvdW50cnl9",templateType:"value",completionOutputs:["value"],defaultStyle:{size:"regular",icon:"code",cssOverride:{fontFamily:"monospace",fontWeight:"500"}}},inputConfig:{},pos:{x:-468.5056274414062,y:-39.30523986816405}}],inputsPosition:{},outputsPosition:{r:{x:-363.42401672132144,y:105.34149194113161},country:{x:-322.5739794922268,y:138.57280736180334}},connections:[{from:{insId:"HttpGet-907",pinId:"response"},to:{insId:"Inline-value-{iso2: ${input76",pinId:"data"}},{from:{insId:"Inline-value-{iso2: ${input76",pinId:"value"},to:{pinId:"country",insId:"__this"}}],completionOutputs:["country"]},style:{size:"large",color:"#f15bb5"}},{pos:{x:-636.9743029785157,y:-85.37110525846481},id:"Get Country Name And Capital-ins",inputConfig:{},visibleOutputs:["name","capital"],part:{id:"Get Country Name And Capital",inputs:{body:{type:"any",mode:"required"}},outputs:{capital:{type:"any",delayed:!1,optional:!1},name:{type:"any",delayed:!1,optional:!1}},instances:[{pos:{x:-455.39787109375004,y:43.691497802734375},id:"HttpPost-624",inputConfig:{url:{mode:"static",value:"https://countriesnow.space/api/v0.1/countries/capital"}},visibleInputs:["url","body"],partId:"HttpPost"},{pos:{x:-559.7825415039063,y:194.45557312011715},id:"Dot-286",inputConfig:{key:{mode:"static",value:"data.name"}},visibleInputs:["obj"],partId:"Dot"},{pos:{x:-400.3785717773437,y:198.4349559259415},id:"Dot-822",inputConfig:{key:{mode:"static",value:"data.capital"}},visibleInputs:["obj"],partId:"Dot"}],inputsPosition:{body:{x:-333.75691140339336,y:-63.66470402308542}},outputsPosition:{value:{x:-514.1541695281439,y:411.8457371232514},i10:{x:-280.88783057750686,y:411.581705357324},capital:{x:-373.87585887717984,y:347.90184574177306},name:{x:-537.398329068569,y:348.1765805072715}},connections:[{from:{insId:"__this",pinId:"body"},to:{insId:"HttpPost-624",pinId:"body"}},{from:{insId:"Dot-286",pinId:"value"},to:{insId:"__this",pinId:"name"}},{from:{insId:"Dot-822",pinId:"value"},to:{insId:"__this",pinId:"capital"}},{from:{insId:"HttpPost-624",pinId:"response"},to:{insId:"Dot-286",pinId:"obj"}},{from:{insId:"HttpPost-624",pinId:"response"},to:{insId:"Dot-822",pinId:"obj"}}],completionOutputs:["name+capital"]},style:{size:"large",color:"#9b5de5"}},{pos:{x:-264.4149328613281,y:175.11608734130857},id:"Format Number-ins",inputConfig:{},part:{id:"Format Number",inputs:{number:{type:"any",mode:"required"}},outputs:{string:{type:"any",delayed:!1,optional:!1}},instances:[{id:"Inline-value-Result is ${in47",part:{id:"Inline-value-new Intl.Number",inputs:{population:{type:"any",mode:"required"}},outputs:{r:{type:"any",delayed:!1,optional:!1}},fnCode:"outputs.r.next((new Intl.NumberFormat().format(inputs.population)))",customViewCode:"new Intl.NumberFormat().format(inputs.population)",dataBuilderSource:"bmV3IEludGwuTnVtYmVyRm9ybWF0KCkuZm9ybWF0KGlucHV0cy5wb3B1bGF0aW9uKQ==",templateType:"value",completionOutputs:["r"]},inputConfig:{},pos:{x:-452.21022216796877,y:176.39826171875}}],inputsPosition:{population:{x:0,y:0},number:{x:0,y:0}},outputsPosition:{r:{x:0,y:400},string:{x:0,y:400}},connections:[{from:{insId:"__this",pinId:"number"},to:{insId:"Inline-value-Result is ${in47",pinId:"population"}},{from:{insId:"Inline-value-Result is ${in47",pinId:"r"},to:{insId:"__this",pinId:"string"}}],completionOutputs:["string"]},style:{size:"regular",color:"#fee440"}},{pos:{x:-318.75787109375,y:32.73055236816407},id:"cl8x5r4qp00074666lb382z1c",inputConfig:{},part:{id:"Get Population By City",inputs:{city:{type:"any",mode:"required"}},outputs:{value:{type:"any",delayed:!1,optional:!1}},instances:[{pos:{x:-204.90311279296873,y:349.60314422607416},id:"HttpPost-775",inputConfig:{url:{mode:"static",value:"https://countriesnow.space/api/v0.1/countries/population/cities"}},visibleInputs:["url","body"],partId:"HttpPost"},{pos:{x:-143.08780761718754,y:233.70198646545413},id:"Inline-value-{city: inputs.c75",inputConfig:{},part:{id:"Inline-value-{city: inputs.c",inputs:{city:{type:"any",mode:"required"}},outputs:{r:{type:"any",delayed:!1,optional:!1}},fnCode:"outputs.r.next(({city: inputs.city}))",customViewCode:"{city: inputs.city}",dataBuilderSource:"e2NpdHk6IGlucHV0cy5jaXR5fQ==",templateType:"value",completionOutputs:["r"]}},{id:"Dot-710",partId:"Dot",inputConfig:{key:{mode:"static",value:"data.populationCounts.0.value"}},pos:{x:-206.3246728515625,y:483.9902026367188},visibleInputs:["obj"]}],inputsPosition:{city:{x:-59.242744173605615,y:192.73141904118035}},outputsPosition:{value:{x:-107.75930491072856,y:617.5218613166921}},connections:[{from:{insId:"Inline-value-{city: inputs.c75",pinId:"r"},to:{insId:"HttpPost-775",pinId:"body"}},{from:{insId:"__this",pinId:"city"},to:{insId:"Inline-value-{city: inputs.c75",pinId:"city"}},{from:{insId:"Dot-710",pinId:"value"},to:{pinId:"value",insId:"__this"}},{from:{insId:"HttpPost-775",pinId:"response"},to:{insId:"Dot-710",pinId:"obj"}}],completionOutputs:["value"]},style:{size:"large",color:"#00bbf9"}}],connections:[{from:{insId:"Get Country Name And Capital-ins",pinId:"name"},to:{insId:"Inline-value-Hello from ${i76",pinId:"country"}},{from:{insId:"Get Country Name And Capital-ins",pinId:"capital"},to:{insId:"Inline-value-Hello from ${i76",pinId:"capital"}},{from:{insId:"Format Number-ins",pinId:"string"},to:{insId:"Inline-value-Hello from ${i76",pinId:"population"}},{from:{insId:"cl8x5r4qp00074666lb382z1c",pinId:"value"},to:{insId:"Format Number-ins",pinId:"number"}},{from:{insId:"Get Country Name And Capital-ins",pinId:"capital"},to:{insId:"cl8x5r4qp00074666lb382z1c",pinId:"city"}},{from:{insId:"Get User's Country-ins",pinId:"country"},to:{insId:"Get Country Name And Capital-ins",pinId:"body"}},{from:{insId:"Inline-value-Hello from ${i76",pinId:"value"},to:{insId:"__this",pinId:"response"}}],id:"ApisCombination",inputs:{},outputs:{response:{type:"any",optional:!1,delayed:!1}},inputsPosition:{city:{x:-187.27285824815934,y:-14.13215209416181}},outputsPosition:{json:{x:-441.98276309426666,y:480.38719404276554},na:{x:-441.98276309426666,y:480.38719404276554},result:{x:-499.82438378976735,y:706.7650396699393},output:{x:-474.64252250807056,y:437.71313745088565},response:{x:-506.3386688159596,y:488.67302443385125}},completionOutputs:["response"]}}},a=n(42716),s={title:"HTTP Requests",description:"Flyde works great for heavy asynchronous & concurrent tasks, like combining several REST APIs together. This example shows exactly that, by combining 3 different REST APIs, the population of the capital of the country your IP is assigned with is retrieved",key:"api",extraInfo:i.createElement("strong",null,i.createElement("h3",null,"Try double-clicking each API part to see it's underlying implementation! In Flyde, nothing is hidden, only abstracted"))};function c(){var e=(0,i.useRef)((0,o.dynamicOutput)()),t=(0,i.useRef)({__trigger:(0,o.dynamicPartInput)()}),n=(0,i.useState)({flow:u.flow,resolvedFlow:u.resolvedFlow,inputs:t.current,output:e.current}),c=n[0],l=(n[1],i.createElement("button",{className:"button button--success",onClick:function(){return t.current.__trigger.subject.next("run")}},"Run!"));return i.createElement(r.I,{meta:s,flowProps:c,defaultDelay:100,prefixComponent:l},i.createElement(a.V,{output:e.current}))}},60512:function(e,t){"use strict";t.Z={heroBanner:"heroBanner_qdFl",buttons:"buttons_AeoN","gh-stars-wrapper":"gh-stars-wrapper_LiAa","project-editor":"project-editor_XBpx",_hj_feedback_container:"_hj_feedback_container_Af03"}},95126:function(e,t,n){var i={"./af":1009,"./af.js":1009,"./ar":88769,"./ar-dz":23739,"./ar-dz.js":23739,"./ar-kw":93745,"./ar-kw.js":93745,"./ar-ly":99576,"./ar-ly.js":99576,"./ar-ma":67408,"./ar-ma.js":67408,"./ar-sa":48781,"./ar-sa.js":48781,"./ar-tn":87856,"./ar-tn.js":87856,"./ar.js":88769,"./az":2030,"./az.js":2030,"./be":56476,"./be.js":56476,"./bg":25304,"./bg.js":25304,"./bm":48125,"./bm.js":48125,"./bn":34,"./bn-bd":29835,"./bn-bd.js":29835,"./bn.js":34,"./bo":64082,"./bo.js":64082,"./br":8317,"./br.js":8317,"./bs":93107,"./bs.js":93107,"./ca":68272,"./ca.js":68272,"./cs":98567,"./cs.js":98567,"./cv":61583,"./cv.js":61583,"./cy":10076,"./cy.js":10076,"./da":31760,"./da.js":31760,"./de":8973,"./de-at":63214,"./de-at.js":63214,"./de-ch":74728,"./de-ch.js":74728,"./de.js":8973,"./dv":54053,"./dv.js":54053,"./el":7499,"./el.js":7499,"./en-au":67876,"./en-au.js":67876,"./en-ca":47010,"./en-ca.js":47010,"./en-gb":34239,"./en-gb.js":34239,"./en-ie":99830,"./en-ie.js":99830,"./en-il":28438,"./en-il.js":28438,"./en-in":25322,"./en-in.js":25322,"./en-nz":43264,"./en-nz.js":43264,"./en-sg":55449,"./en-sg.js":55449,"./eo":39486,"./eo.js":39486,"./es":32430,"./es-do":16310,"./es-do.js":16310,"./es-mx":27038,"./es-mx.js":27038,"./es-us":73099,"./es-us.js":73099,"./es.js":32430,"./et":34975,"./et.js":34975,"./eu":87063,"./eu.js":87063,"./fa":68073,"./fa.js":68073,"./fi":50957,"./fi.js":50957,"./fil":8764,"./fil.js":8764,"./fo":81775,"./fo.js":81775,"./fr":74179,"./fr-ca":14306,"./fr-ca.js":14306,"./fr-ch":73791,"./fr-ch.js":73791,"./fr.js":74179,"./fy":47014,"./fy.js":47014,"./ga":46911,"./ga.js":46911,"./gd":62958,"./gd.js":62958,"./gl":87344,"./gl.js":87344,"./gom-deva":33161,"./gom-deva.js":33161,"./gom-latn":35798,"./gom-latn.js":35798,"./gu":68485,"./gu.js":68485,"./he":27917,"./he.js":27917,"./hi":52159,"./hi.js":52159,"./hr":95842,"./hr.js":95842,"./hu":30005,"./hu.js":30005,"./hy-am":51312,"./hy-am.js":51312,"./id":60781,"./id.js":60781,"./is":64101,"./is.js":64101,"./it":43467,"./it-ch":4759,"./it-ch.js":4759,"./it.js":43467,"./ja":44164,"./ja.js":44164,"./jv":70079,"./jv.js":70079,"./ka":57036,"./ka.js":57036,"./kk":92022,"./kk.js":92022,"./km":63418,"./km.js":63418,"./kn":43655,"./kn.js":43655,"./ko":30986,"./ko.js":30986,"./ku":91902,"./ku.js":91902,"./ky":4604,"./ky.js":4604,"./lb":99026,"./lb.js":99026,"./lo":20537,"./lo.js":20537,"./lt":22288,"./lt.js":22288,"./lv":1495,"./lv.js":1495,"./me":60690,"./me.js":60690,"./mi":2571,"./mi.js":2571,"./mk":93959,"./mk.js":93959,"./ml":97225,"./ml.js":97225,"./mn":88,"./mn.js":88,"./mr":46622,"./mr.js":46622,"./ms":11070,"./ms-my":48899,"./ms-my.js":48899,"./ms.js":11070,"./mt":63931,"./mt.js":63931,"./my":95393,"./my.js":95393,"./nb":4274,"./nb.js":4274,"./ne":8914,"./ne.js":8914,"./nl":33114,"./nl-be":68479,"./nl-be.js":68479,"./nl.js":33114,"./nn":4513,"./nn.js":4513,"./oc-lnc":46549,"./oc-lnc.js":46549,"./pa-in":28264,"./pa-in.js":28264,"./pl":32848,"./pl.js":32848,"./pt":90899,"./pt-br":55077,"./pt-br.js":55077,"./pt.js":90899,"./ro":92512,"./ro.js":92512,"./ru":21753,"./ru.js":21753,"./sd":16840,"./sd.js":16840,"./se":78362,"./se.js":78362,"./si":50464,"./si.js":50464,"./sk":66324,"./sk.js":66324,"./sl":41963,"./sl.js":41963,"./sq":53039,"./sq.js":53039,"./sr":93454,"./sr-cyrl":10466,"./sr-cyrl.js":10466,"./sr.js":93454,"./ss":95158,"./ss.js":95158,"./sv":28859,"./sv.js":28859,"./sw":57594,"./sw.js":57594,"./ta":26915,"./ta.js":26915,"./te":15677,"./te.js":15677,"./tet":92154,"./tet.js":92154,"./tg":74098,"./tg.js":74098,"./th":89071,"./th.js":89071,"./tk":49381,"./tk.js":49381,"./tl-ph":1869,"./tl-ph.js":1869,"./tlh":92346,"./tlh.js":92346,"./tr":71483,"./tr.js":71483,"./tzl":30266,"./tzl.js":30266,"./tzm":33138,"./tzm-latn":32960,"./tzm-latn.js":32960,"./tzm.js":33138,"./ug-cn":29456,"./ug-cn.js":29456,"./uk":50805,"./uk.js":50805,"./ur":61127,"./ur.js":61127,"./uz":29628,"./uz-latn":80840,"./uz-latn.js":80840,"./uz.js":29628,"./vi":56962,"./vi.js":56962,"./x-pseudo":49257,"./x-pseudo.js":49257,"./yo":62423,"./yo.js":62423,"./zh-cn":61002,"./zh-cn.js":61002,"./zh-hk":6046,"./zh-hk.js":6046,"./zh-mo":36903,"./zh-mo.js":36903,"./zh-tw":24710,"./zh-tw.js":24710};function o(e){var t=r(e);return n(t)}function r(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=r,e.exports=o,o.id=95126},91764:function(){}}]);