(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3237],{19121:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cappedArrayDebounce=void 0;t.cappedArrayDebounce=function(e,t,n,o){void 0===o&&(o=500);let i=[],r=null,a=null;return{addItem:s=>{clearTimeout(r),i.push(s),a||(a=setTimeout((()=>{e(i),clearTimeout(r),a=null}),o)),i.length>=n?(e(i),clearTimeout(a),a=null,i=[]):r=setTimeout((()=>{e(i),clearTimeout(a),a=null,i=[]}),t)},flush:()=>{i.length&&(e(i),i=[],clearTimeout(a))},pendingItems:()=>i.length}}},59792:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.dataShaper=t.DataShapeType=void 0,function(e){e[e.STRING=0]="STRING",e[e.NUMBER=1]="NUMBER",e[e.BOOLEAN=2]="BOOLEAN",e[e.ARRAY=3]="ARRAY",e[e.OBJECT=4]="OBJECT",e[e.NULL=5]="NULL",e[e.UNSUPPORTED=6]="UNSUPPORTED"}(n=t.DataShapeType||(t.DataShapeType={}));const o={string:n.STRING,number:n.NUMBER,boolean:n.BOOLEAN,object:n.OBJECT,array:n.ARRAY,null:n.NULL,symbol:n.UNSUPPORTED,undefined:n.UNSUPPORTED,function:n.UNSUPPORTED,bigint:n.UNSUPPORTED};t.dataShaper=function(e,n,i){void 0===n&&(n=5),void 0===i&&(i=5);const r=null===(a=e)?"null":typeof a;var a,s;if("object"===r){if(Array.isArray(e))return n>1?e.filter(((e,t)=>t<i)).map((e=>(0,t.dataShaper)(e,n-1,i))):o.array;if(n>1){const o={};for(const r in e)o[r]=(0,t.dataShaper)(e[r],n-1,i);return s=o,Object.keys(s).sort().reduce(((e,t)=>(e[t]=s[t],e)),{})}return o.object}return o[r]}},23046:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.debugLogger=void 0;const i=(0,o(n(55899)).default)("flyde");t.debugLogger=e=>i.extend(e)},24331:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fullInsIdPath=void 0,t.fullInsIdPath=function(e,t){if(!e)throw new Error("insId is not defined");return t?`${t}.${e}`:e}},34459:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hashFlow=t.hashNode=void 0;const i=o(n(68805)),r=n(30292),a=e=>(0,i.default)(e);t.hashNode=function(e,t){void 0===t&&(t=!0);const{id:n,completionOutputs:o,reactiveInputs:i,inputs:s,outputs:l}=e,u={id:n,completionOutputs:o,reactiveInputs:i,inputs:s,outputs:l};if((0,r.isVisualNode)(e)){const{instances:n,connections:o,inputsPosition:i,outputsPosition:r}=e,s=n.map((e=>{const{pos:t,...n}=e;return n})),l=t?{}:{inputsPosition:i,outputsPosition:r},c=t?s:n;c.sort(((e,t)=>e.id.localeCompare(t.id)));const d=[...o];d.sort(((e,t)=>{const n=`${e.from.insId}.${e.from.pinId}`,o=`${t.from.insId}.${t.from.pinId}`;return n.localeCompare(o)}));const p=JSON.stringify({instancesToUse:c,conns:d,...u,maybeIoPos:l});return a(p)}throw new Error("Hashing code nodes unsupported")};t.hashFlow=e=>{const{node:n,imports:o}=e,i=(0,t.hashNode)(n,!1),r=Object.entries(null!=o?o:{}).sort(((e,t)=>{let[n]=e,[o]=t;return n.localeCompare(o)})).map((e=>{let[t,n]=e;return[t,n.sort()]})).reduce(((e,t)=>{let[n,o]=t;return{...e,[n]:o}}),{}),s=JSON.stringify(r);return a(i+s)}},86873:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.DepGraph=void 0,i(n(3172),t),i(n(59962),t),i(n(23046),t),i(n(19121),t),i(n(59962),t),i(n(34459),t),i(n(39043),t),i(n(59792),t),i(n(24331),t),t.DepGraph=n(60359).DepGraph},3172:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.testDataCreator=void 0;t.testDataCreator=e=>function(t){void 0===t&&(t={});return{..."function"==typeof e?e():e,...t}}},59962:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.simplePluralize=t.eventually=t.delay=t.noop=t.removeDupes=t.ensure=t.isOptionalType=t.callFnOrFnPromise=t.isPromise=t.isDefined=t.containsAll=t.shuffle=t.randomInts=t.repeat=t.pickRandom=t.randomPos=t.randomInt=t.pickSecond=t.pickFirst=t.fromEntries=t.entries=t.okeys=t.values=t.keys=t.filterOMap=t.mapOMap=t.middlePos=t.calcCenter=t.intersectRect=void 0;t.intersectRect=(e,t)=>{const n=e.x+e.w,o=t.x+t.w;return!(t.x>n||o<e.x||t.y>e.y+e.h||t.y+t.h<e.y)};t.calcCenter=e=>{let{w:t,h:n,x:o,y:i}=e;return{x:o+t/2,y:i+n/2}};t.middlePos=(e,t)=>({x:(e.x+t.x)/2,y:(e.y+t.y)/2});t.mapOMap=(e,n)=>(0,t.entries)(e).map((e=>{let[t,o]=e;return[t,n(t,o)]})).reduce(((e,t)=>{let[n,o]=t;return{...e,[n]:o}}),{});t.filterOMap=(e,n)=>(0,t.entries)(e).filter((e=>{let[t,o]=e;return n(t,o)})).reduce(((e,t)=>{let[n,o]=t;return{...e,[n]:o}}),{});t.keys=e=>Object.keys(e);t.values=e=>Object.values(e),t.okeys=t.keys;t.entries=e=>(0,t.okeys)(e).map((t=>[t,e[t]]));t.fromEntries=e=>e.reduce(((e,t)=>{let[n,o]=t;return{...e,[n]:o}}),{});t.pickFirst=e=>e[0];t.pickSecond=e=>e[1];t.randomInt=function(e,t){void 0===t&&(t=0);const n=Math.random();return t+Math.floor((e-t)*n)};t.randomPos=function(e,n){void 0===e&&(e=1e3),void 0===n&&(n=0);return{x:(0,t.randomInt)(e,n),y:(0,t.randomInt)(e,n)}};t.pickRandom=e=>e[(0,t.randomInt)(e.length)];t.repeat=(e,t)=>"x".repeat(e).split("").map(((e,n)=>t(n)));t.randomInts=function(e,n,o){return void 0===n&&(n=100),void 0===o&&(o=0),(0,t.repeat)(e,(()=>(0,t.randomInt)(n,o)))};t.shuffle=e=>{const t=[...e];for(let n=t.length-1;n>=0;n--){const e=Math.floor(Math.random()*(n+1));[t[n],t[e]]=[t[e],t[n]]}return t};t.containsAll=(e,t)=>t.every((t=>e.includes(t)));t.isDefined=e=>void 0!==e;t.isPromise=e=>e&&"function"==typeof e.then;t.callFnOrFnPromise=(e,n)=>{if(!(0,t.isDefined)(e))return;const o=e=>{try{e()}catch(t){console.error(n,t)}};"function"==typeof e?o(e):Promise.resolve(e).then((e=>{"function"==typeof e&&o(e)}))};t.isOptionalType=e=>/\?$/.test(e);t.ensure=(e,t)=>{if(void 0===e)throw new Error(t||"Undefined value passed");return e};t.removeDupes=e=>Array.from(new Set(e));t.noop=()=>{};t.delay=e=>new Promise((t=>setTimeout(t,e)));t.eventually=async function(e,n,o,i){if(void 0===n&&(n=1e3),void 0===o&&(o=100),void 0===i&&(i=new Set),n<0){const e=Array.from(i).reduce(((e,t,n)=>`${e}\n\t\t${n+1}. ${t}`),"");throw new Error(`[Eventually timeout exceeded after: timeout with error]: ${e}`)}try{await e()}catch(r){const a=Date.now();await(0,t.delay)(o);const s=Date.now()-a;return i.add(null==r?void 0:r.message),(0,t.eventually)(e,n-s,o,i)}},t.simplePluralize=function(e,t){return`${e} ${t}${1!==e?"s":""}`}},39043:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compileObjectTemplate=t.compileStringTemplate=void 0;t.compileStringTemplate=(e,t)=>{let n=decodeURIComponent(e);return Object.keys(t).forEach((e=>{const o=t[e],i=new RegExp("\\$\\{"+e+"\\}","g");n=n.replace(i,o)})),n};t.compileObjectTemplate=(e,t)=>{let n=decodeURIComponent(e);return Object.keys(t).forEach((e=>{const o=t[e],i=JSON.stringify(o),r=new RegExp('"\\$\\$\\{'+e+'\\}"',"g"),a=new RegExp("\\$\\{"+e+"\\}","g"),s="string"==typeof o?o.replace(/"/g,((e,t,n)=>"\\"!==n[t-1]?'\\"':n[t])):o;n=n.replace(r,i).replace(a,s).replace(/\n/g,"\\n")})),JSON.parse(n)}},69150:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.connection=t.connectionData=t.connectionDataEquals=t.connectionNodeEquals=t.connectionNode=t.externalConnectionNode=t.isInternalConnection=t.isExternalConnection=t.isInternalConnectionNode=t.isExternalConnectionNode=t.getNodeOutputs=t.getOutputName=t.getInputName=t.getNodeInputs=t.TRIGGER_PIN_ID=t.ERROR_PIN_ID=t.THIS_INS_ID=void 0;const o=n(30292);t.THIS_INS_ID="__this",t.ERROR_PIN_ID="__error",t.TRIGGER_PIN_ID="__trigger";t.getNodeInputs=e=>({...e.inputs,[t.TRIGGER_PIN_ID]:(0,o.nodeInput)()});t.getInputName=e=>e===t.TRIGGER_PIN_ID?"Trigger Node":e;t.getOutputName=e=>e===t.ERROR_PIN_ID?"Error":e;t.getNodeOutputs=e=>({...e.outputs,[t.ERROR_PIN_ID]:(0,o.nodeOutput)()});t.isExternalConnectionNode=e=>e&&e.insId===t.THIS_INS_ID;t.isInternalConnectionNode=e=>e.insId!==t.THIS_INS_ID;t.isExternalConnection=e=>{let{from:n,to:o}=e;return(0,t.isExternalConnectionNode)(n)||(0,t.isExternalConnectionNode)(o)};t.isInternalConnection=e=>!(0,t.isExternalConnection)(e);t.externalConnectionNode=e=>({insId:t.THIS_INS_ID,pinId:e});t.connectionNode=(e,t)=>({insId:e,pinId:t});t.connectionNodeEquals=(e,t)=>e.insId===t.insId&&e.pinId===t.pinId;t.connectionDataEquals=(e,n)=>!(!e||!n)&&((0,t.connectionNodeEquals)(e.from,n.from)&&(0,t.connectionNodeEquals)(e.to,n.to)),t.connectionData=function(e,n,o){const i="string"==typeof e?e.split("."):e,r="string"==typeof n?n.split("."):n;if(i.length>2||r.length>2)throw new Error(`invalid source or target to connection data - ${e} / ${n}`);return{from:2===i.length?(0,t.connectionNode)(i[0],i[1]):(0,t.externalConnectionNode)(i[0]),to:2===r.length?(0,t.connectionNode)(r[0],r[1]):(0,t.externalConnectionNode)(r[0]),delayed:o}};t.connection=function(e,t,n){return void 0===n&&(n=!1),{from:e,to:t,delayed:n}}},6775:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.connect=void 0;const r=n(30292),a=n(47025),s=n(86873),l=n(69150);i(n(69150),t);t.connect=function(e,t,n,o,i,u,c){void 0===n&&(n={}),void 0===i&&(i={}),void 0===u&&(u=s.noop),void 0===c&&(c={});const{id:d,connections:p,instances:f}=e,m=d||"connected-node"+(0,s.randomInt)(999);return{inputs:e.inputs,outputs:e.outputs,id:m,completionOutputs:e.completionOutputs,reactiveInputs:e.reactiveInputs,run:(d,v)=>{let g=[];const h=new s.DepGraph({}),y=new Map,b=new Map,_=new Map,I=new Map,x=new Map,C=new Map;let w;const E=new Set;f.forEach((e=>{const n=(0,r.getNode)(e,t),o=e.id;y.set(e,o),b.set(o,e),h.addNode(o);const i=Object.keys(n.inputs),a=Object.keys(n.outputs),s={},u={};i.forEach((t=>{const n=(e.inputConfig||{})[t]||(0,r.queueInputPinConfig)();s[t]=(0,r.dynamicNodeInput)({config:n})})),s[l.TRIGGER_PIN_ID]=(0,r.dynamicNodeInput)({config:(0,r.queueInputPinConfig)()});if(p.some((t=>(0,l.isInternalConnectionNode)(t.to)&&t.to.insId===e.id&&t.to.pinId===l.TRIGGER_PIN_ID))&&e.inputConfig&&e.inputConfig[l.TRIGGER_PIN_ID])throw"Trigger connection can not be configured";a.forEach((e=>{const t=(0,r.dynamicOutput)();u[e]=t}));p.some((t=>(0,l.isInternalConnectionNode)(t.from)&&t.from.insId===e.id&&t.from.pinId===l.ERROR_PIN_ID))&&(u[l.ERROR_PIN_ID]=(0,r.dynamicOutput)()),_.set(o,s),I.set(o,u)}));const j=new Set;return p.forEach((n=>{const{from:o,to:i}=n,{insId:a,pinId:s}=o,{insId:u,pinId:c}=i,d=I.get(a),p=_.get(u);if((0,l.isInternalConnectionNode)(i)&&j.add(`${i.insId}.${i.pinId}`),(0,l.isExternalConnection)(n)){if((0,l.isExternalConnectionNode)(o)){const e=null==p?void 0:p[i.pinId];if(!e)throw new Error(`Input ${i.pinId} of instance ${u} not found`);const t=x.get(o.pinId)||[];t.push(e),x.set(o.pinId,t)}else{let e=null==d?void 0:d[o.pinId];if(!e)throw new Error(`Output ${o.pinId} of instance ${a} not found`);const t=C.get(i.pinId)||[];t.push(e),C.set(i.pinId,t)}return}if(!d)throw new Error(`No outputs found for instance [${a}]`);if(!p)throw b.has(u)?new Error(`No inputs found for instance [${u}]`):new Error(`Instance with id [${u}] does not exist!`);const f=d[s];if(!f)throw new Error(`Output source - [${s}] not found in node [${m}]`);const v=p[c],y=b.get(a);if(!y&&a!==l.THIS_INS_ID)throw new Error(`Instance [${a}] does not exist! failed to connect [${o}] -> [${i}]`);const w=(y?(0,r.getNode)(y,t):e).outputs[s];if(w&&w.delayed||n.delayed||a!==l.THIS_INS_ID&&u!==l.THIS_INS_ID&&h.addDependency(a,u),!v)throw new Error(`Target arg - [${i}] not found in node [${m}]`);const E=f.subscribe((async e=>{v.subject.next(e)}));g.push((()=>E.unsubscribe()))})),(0,s.okeys)(v).forEach((e=>{(C.get(e)||[]).forEach((t=>{const n=t.subscribe((async t=>{if(!v[e])throw new Error(`Impossible state - output ${e} does not exist`);v[e].next(t)}));g.push((()=>n.unsubscribe()))}))})),h.overallOrder().map((e=>b.get(e))).forEach((e=>{const s=_.get(e.id),l=I.get(e.id),d=(0,r.getNode)(e,t);if(!s)throw new Error(`Unexpected error - args not found when running ${e}`);if(!l)throw new Error(`Unexpected error - outputs not found when running ${e}`);for(const t in s)j.has(`${e.id}.${t}`)||delete s[t];const p=(0,a.execute)({node:d,inputs:s,outputs:l,resolvedDeps:t,_debugger:n,insId:e.id,extraContext:c,mainState:i,ancestorsInsIds:o,onBubbleError:u,onCompleted:()=>{return t=e.id,E.delete(t),void(0===E.size&&w&&w());var t},onStarted:()=>{return t=e.id,void E.add(t);var t}});g.push(p)})),Object.keys(d).forEach((async e=>{(x.get(e)||[]).forEach((t=>{const n=d[e];(0,s.isDefined)(n)&&t.subject.next(n)}))})),void 0===e.completionOutputs&&E.size>0?new Promise((e=>{w=e})):()=>g.forEach((e=>{try{e()}catch(t){console.error("error unsubscribing",t)}}))}}}},26488:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.MINOR_DEBUGGER_EVENT_TYPES=t.MAJOR_DEBUGGER_EVENT_TYPES=t.DebuggerEventType=void 0,function(e){e.INPUT_CHANGE="i",e.OUTPUT_CHANGE="o",e.PROCESSING_CHANGE="pc",e.ERROR="err",e.INPUTS_STATE_CHANGE="isc"}(n=t.DebuggerEventType||(t.DebuggerEventType={})),t.MAJOR_DEBUGGER_EVENT_TYPES=[n.INPUT_CHANGE,n.OUTPUT_CHANGE,n.ERROR],t.MINOR_DEBUGGER_EVENT_TYPES=[n.PROCESSING_CHANGE,n.INPUTS_STATE_CHANGE]},43686:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatEvent=void 0;const o=n(26488);t.formatEvent=function(e){var t,n,i;const r=[e.insId,...null!==(n=null===(t=e.ancestorsInsIds)||void 0===t?void 0:t.split("."))&&void 0!==n?n:[]];(null===(i=e.ancestorsInsIds)||void 0===i?void 0:i.length)>0&&e.ancestorsInsIds;const a=`Node <${e.nodeId}> `,s=`| Ins. id: ${r.join(" -> ")}`;return`${a} - ${function(e){switch(e.type){case o.DebuggerEventType.PROCESSING_CHANGE:return e.val?"started processing":"stopped processing";case o.DebuggerEventType.INPUT_CHANGE:return`Input pin <${e.pinId}> received value: ${e.val}`;case o.DebuggerEventType.OUTPUT_CHANGE:return`Output pin <${e.pinId}> emitted value: ${e.val}`;case o.DebuggerEventType.INPUTS_STATE_CHANGE:return`Inputs queue size changed to ${Object.entries(e.val).map((e=>{let[t,n]=e;return`${t}: ${n}`})).join(", ")}`;case o.DebuggerEventType.ERROR:return`Error: ${e.val}`}}(e)} ${s}`}},99896:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(26488),t),i(n(43686),t)},47025:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.execute=t.GLOBAL_STATE_NS=t.ROOT_INS_ID=t.INPUTS_STATE_SUFFIX=t.INNER_STATE_SUFFIX=void 0;const r=n(62600),a=n(87794);i(n(99896),t);const s=n(30292),l=n(6775),u=n(84479),c=n(86873),d=n(23046),p=n(99896);t.INNER_STATE_SUFFIX="_inner",t.INPUTS_STATE_SUFFIX="_inputs";t.ROOT_INS_ID="__root",t.GLOBAL_STATE_NS="____global";t.execute=e=>{let{node:n,inputs:o,outputs:i,resolvedDeps:f,_debugger:m={},insId:v=t.ROOT_INS_ID,extraContext:g={},mainState:h={},ancestorsInsIds:y,onBubbleError:b=r.noop,onCompleted:_=r.noop,onStarted:I=r.noop}=e;const x=[];h[t.GLOBAL_STATE_NS]||(h[t.GLOBAL_STATE_NS]=new Map);const C=f,w=e=>{const t=e instanceof s.NodeInstanceError?e:new s.NodeInstanceError(e,(0,c.fullInsIdPath)(v,y),n.id);m.onEvent&&m.onEvent({type:p.DebuggerEventType.ERROR,val:t,insId:v,ancestorsInsIds:y,nodeId:n.id}),i[l.ERROR_PIN_ID]?i[l.ERROR_PIN_ID].next(t):b(t)},E=(e=>(0,s.isVisualNode)(e)?(0,l.connect)(e,C,m,(0,c.fullInsIdPath)(v,y),h,w,g):e)(n),j=m.onEvent||r.noop,S={},N={};(0,c.entries)(o).forEach((e=>{let[t,o]=e;const i=(0,s.dynamicNodeInput)({config:o.config}),r=o.subject.subscribe((async e=>{const o=j({type:p.DebuggerEventType.INPUT_CHANGE,insId:v,pinId:t,val:e,ancestorsInsIds:y,nodeId:n.id});if(o){const e=await o.valuePromise;i.subject.next(e)}else m.debugDelay&&await(0,c.delay)(m.debugDelay),i.subject.next(e)}));x.push((()=>r.unsubscribe())),N[t]=i})),(0,c.entries)(i).forEach((e=>{let[t,o]=e;const i=(0,s.dynamicOutput)(),r=i.subscribe((async e=>{const i=j({type:p.DebuggerEventType.OUTPUT_CHANGE,insId:v,pinId:t,val:e,ancestorsInsIds:y,nodeId:n.id});if(i){const e=await i.valuePromise;o.next(e)}else o.next(e)}));x.push((()=>r.unsubscribe())),S[t]=i}));const O=(e=>{var n,o;const{node:i,inputs:l,outputs:f,resolvedDeps:m,_debugger:v,insId:g,ancestorsInsIds:h,mainState:y,onError:b,onStarted:_,onCompleted:I,extraContext:x}=e,{run:C,fn:w}=i,E=(0,d.debugLogger)("core"),j=[];let S;const N=(null==v?void 0:v.onEvent)||r.noop,O=(0,c.fullInsIdPath)(g,h),T=`${O}${t.INNER_STATE_SUFFIX}`,P=`${O}${t.INPUTS_STATE_SUFFIX}`,D=E.extend(O),k=y[t.GLOBAL_STATE_NS];y[T]||(y[T]=new Map),y[P]||(y[P]=new Map);let M=null!==(n=y[P])&&void 0!==n?n:new Map;const V=()=>{const e=Array.from(M.entries()).reduce(((e,t)=>{let[n,o]=t;return{...e,[n]:(0,s.isQueueInputPinConfig)(l[n].config)?null==o?void 0:o.length:1}}),{});N({type:p.DebuggerEventType.INPUTS_STATE_CHANGE,val:e,insId:g,ancestorsInsIds:h,nodeId:i.id})},R={execute:(e,n,o,i)=>(0,t.execute)({node:e,inputs:n,outputs:o,resolvedDeps:m,_debugger:v,insId:i,onCompleted:I,onStarted:_}),insId:g,state:null!==(o=y[T])&&void 0!==o?o:new Map,onCleanup:e=>{j.push(e)},onError:e=>{b(e)},context:null!=x?x:{},ancestorsInsIds:h,globalState:k};let A,L=!1;const z=i.reactiveInputs||[],q=()=>{var e;null===(e=y[T])||void 0===e||e.clear(),(0,c.keys)(y).filter((e=>e.startsWith(`${O}.`))).forEach((e=>{y[e]=new Map}))},$=e=>{const t=(null==e?void 0:e.key)&&z.includes(null==e?void 0:e.key);if(L&&!t);else{const o=L&&t;if((0,u.isNodeStateValid)(l,M,i)||o){let t;if(L){if(!e)throw new Error("Unexpected state,  got reactive node while not processing and not valid");const n=(0,u.pullValueForExecution)(e.key,l[e.key],M);t={...A,[e.key]:n},V()}else t=(0,u.pullValuesForExecution)(l,M),A=t,V();let o=new Set,r={};if(L=!0,N({type:p.DebuggerEventType.PROCESSING_CHANGE,val:L,insId:g,ancestorsInsIds:h,nodeId:i.id}),i.completionOutputs){const e=i.completionOutputs.map((e=>e.split("+"))).reduce(((e,t)=>(t.forEach((n=>{e.set(n,t)})),e)),new Map);(0,c.entries)(f).forEach((t=>{let[n,s]=t;s.pipe((0,a.first)()).subscribe((t=>{o.add(n),r[n]=t;let a=e.get(n);a&&(a.splice(a.indexOf(n),1),0===a.length&&(L=!1,N({type:p.DebuggerEventType.PROCESSING_CHANGE,val:L,insId:g,ancestorsInsIds:h,nodeId:i.id}),I&&I(r),q(),(0,c.callFnOrFnPromise)(S,`Error with cleanup function of ${i.id}`),S=void 0,o.clear(),r={},(0,u.hasNewSignificantValues)(l,M,i.id)&&$()))}))}))}else(0,c.entries)(f).forEach((e=>{let[t,n]=e;n.subscribe((e=>{r[t]=e}))}));try{D("Running node %s with values %o",i.id,t),_&&_(),S=(null!=w?w:C)(t,f,R),(0,c.isPromise)(S)?S.then((()=>{void 0===i.completionOutputs&&I&&(L=!1,N({type:p.DebuggerEventType.PROCESSING_CHANGE,val:L,insId:g,ancestorsInsIds:h,nodeId:i.id}),I(r),q(),(0,u.hasNewSignificantValues)(l,M,i.id)&&$())})).catch((e=>{b(e),L=!1,D("Error in node %s - value %e",i.id,e),N({type:p.DebuggerEventType.PROCESSING_CHANGE,val:L,insId:g,ancestorsInsIds:h,nodeId:i.id})})):void 0===i.completionOutputs&&I&&(L=!1,N({type:p.DebuggerEventType.PROCESSING_CHANGE,val:L,insId:g,ancestorsInsIds:h,nodeId:i.id}),I(r),q())}catch(n){b(n),L=!1,D("Error in node %s - value %e",i.id,n),N({type:p.DebuggerEventType.PROCESSING_CHANGE,val:L,insId:g,ancestorsInsIds:h,nodeId:i.id})}const d=z.find((e=>l[e]&&(0,u.peekValueForExecution)(e,l[e],M,i.id)));if(d){const e=(0,u.peekValueForExecution)(d,l[d],M,i.id);$({key:d,value:e})}else{const e=(0,c.entries)(l).find((e=>{let[t,n]=e;const o=(0,s.isQueueInputPinConfig)(n.config),r=(0,u.peekValueForExecution)(t,n,M,i.id);return!!o&&(0,c.isDefined)(r)}));if(e){const[t,n]=e,o=(0,u.peekValueForExecution)(t,n,M,i.id);$({key:t,value:o})}}}}};$();const G=(0,u.subscribeInputsToState)(l,M,((e,t)=>{E("Got input %s - value is [%o]",e,t),V();try{$({key:e,value:t})}catch(n){b(n)}}));return j.push(G),()=>{(0,c.callFnOrFnPromise)(S,`Error with cleanup function of ${i.id}`),j.forEach((e=>e()))}})({node:E,inputs:N,outputs:S,resolvedDeps:C,_debugger:m,insId:v,mainState:h,ancestorsInsIds:y,onError:w,onBubbleError:b,extraContext:g,onCompleted:_,onStarted:I});return()=>{x.forEach((e=>e())),O()}}},84479:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeInputsToState=t.isNodeStateValid=t.hasNewSignificantValues=t.peekValuesForExecution=t.pullValuesForExecution=t.pullValueForExecution=t.peekValueForExecution=void 0;const o=n(30292),i=n(86873),r=n(6775);t.peekValueForExecution=(e,t,n,i)=>{const r=n.get(e);let a;if(!t)throw new Error(`Trying to peek value of inexsting input in key "${e}" in node "${i}"`);return a=(0,o.isQueueInputPinConfig)(t.config)?r?[...r].shift():void 0:r,a};t.pullValueForExecution=(e,t,n)=>{const i=n.get(e);let r;return(0,o.isQueueInputPinConfig)(t.config)?(r=(i||[]).shift(),n.set(e,i)):(r=i,(0,o.isStickyInputPinConfig)(t.config)||n.delete(e)),r};t.pullValuesForExecution=(e,n)=>(0,i.entries)(e).reduce(((e,o)=>{let[i,r]=o;return e[i]=(0,t.pullValueForExecution)(i,r,n),e}),{});t.peekValuesForExecution=(e,n,o)=>(0,i.entries)(e).reduce(((e,i)=>{let[r,a]=i;return e[r]=(0,t.peekValueForExecution)(r,a,n,o),e}),{});t.hasNewSignificantValues=(e,n,r)=>(0,i.entries)(e).some((e=>{let[a,s]=e;const l=(0,o.isQueueInputPinConfig)(s.config),u=(0,t.peekValueForExecution)(a,s,n,r);return(0,i.isDefined)(u)&&l}));t.isNodeStateValid=(e,t,n)=>{const a=(0,i.keys)(e),s=(0,i.keys)(n.inputs).filter((e=>{var t;const o=null===(t=n.inputs[e])||void 0===t?void 0:t.mode;return!o||"required"===o}));a.includes(r.TRIGGER_PIN_ID)&&s.push(r.TRIGGER_PIN_ID);return!!(0,i.containsAll)(a,s)&&(0,i.entries)(e).filter((e=>{let[t]=e;return!!n.inputs[t]||t===r.TRIGGER_PIN_ID})).every((e=>{let[r,a]=e;var s;const l=t.get(r);return"optional"===((null===(s=n.inputs[r])||void 0===s?void 0:s.mode)||"required")||((0,o.isQueueInputPinConfig)(a.config)?(0,i.isDefined)(l)&&l.length>0:(0,i.isDefined)(l))}))};t.subscribeInputsToState=(e,t,n)=>{const r=[];return(0,i.entries)(e).forEach((e=>{let[i,a]=e;if(!a)return;const s=a.subject.subscribe((e=>{if((0,o.isQueueInputPinConfig)(a.config)){const o=t.get(i)||[];if(!Array.isArray(o))throw new Error(`impossible state - state of key ${i} is set but not an array`);o.push(e),t.set(i,o),n(i,e)}else t.set(i,e),n(i,e)}));r.push((()=>s.unsubscribe()))})),()=>r.forEach((e=>e()))}},5474:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flydeFlowSchema=void 0;const o=n(29022),i=o.z.record(o.z.string(),o.z.string().or(o.z.array(o.z.string()))),r=o.z.strictObject({x:o.z.number(),y:o.z.number()}),a=o.z.discriminatedUnion("mode",[o.z.strictObject({mode:o.z.literal("queue")}),o.z.strictObject({mode:o.z.literal("sticky")})]),s=o.z.object({size:o.z.optional(o.z.enum(["small","regular","large"])),icon:o.z.optional(o.z.any()),color:o.z.optional(o.z.string()),cssOverride:o.z.optional(o.z.record(o.z.string()))}),l=o.z.object({pos:r.default({x:0,y:0}),id:o.z.string(),inputConfig:o.z.optional(o.z.record(o.z.string(),a)).default({}),visibleInputs:o.z.optional(o.z.array(o.z.string())),visibleOutputs:o.z.optional(o.z.array(o.z.string())),nodeId:o.z.optional(o.z.string()),node:o.z.optional(o.z.lazy((()=>p))),macroId:o.z.optional(o.z.string()),macroData:o.z.optional(o.z.any()),style:o.z.optional(s)}).refine((e=>e.node||e.nodeId||e.macroId&&void 0!==e.macroData),{message:"Instance must have either an inline node or refer to a nodeId, or be a macro instance"}),u=o.z.union([o.z.string(),o.z.object({mode:o.z.enum(["required","optional","required-if-connected"]),type:o.z.optional(o.z.string()),description:o.z.optional(o.z.string()),defaultValue:o.z.optional(o.z.any())})]),c=o.z.object({type:o.z.optional(o.z.string()),optional:o.z.optional(o.z.boolean()),delayed:o.z.optional(o.z.boolean()),description:o.z.optional(o.z.string())}),d=o.z.object({id:o.z.optional(o.z.string()),inputs:o.z.record(o.z.string(),u),outputs:o.z.record(o.z.string(),c),inputsPosition:o.z.optional(o.z.record(o.z.string(),r)),outputsPosition:o.z.optional(o.z.record(o.z.string(),r)),completionOutputs:o.z.optional(o.z.array(o.z.string())),reactiveInputs:o.z.optional(o.z.array(o.z.string())),defaultStyle:o.z.optional(s),description:o.z.optional(o.z.string()),searchKeywords:o.z.optional(o.z.array(o.z.string()))}),p=o.z.object({instances:o.z.array(l),connections:o.z.array(o.z.strictObject({from:o.z.strictObject({insId:o.z.string(),pinId:o.z.string()}),to:o.z.strictObject({insId:o.z.string(),pinId:o.z.string()}),delayed:o.z.optional(o.z.boolean()),hidden:o.z.optional(o.z.boolean())}))}).and(d);t.flydeFlowSchema=o.z.strictObject({imports:o.z.optional(i).default({}),node:p})},74762:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(86873),t),i(n(6775),t),i(n(47025),t),i(n(10418),t),i(n(30292),t),i(n(3320),t),i(n(5474),t)},3320:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeWithDependencies=void 0;const o=n(74762),i=n(88270);t.getNodeWithDependencies=function(e,n,r){if(void 0===r&&(r=[]),r.includes(e.id))return[];const a=(0,o.removeDupes)(e.instances.filter((e=>(0,i.isRefNodeInstance)(e))).map((e=>e.nodeId)).filter((e=>n[e])));return[e,...a.flatMap((e=>{var t;return null!==(t=n[e])&&void 0!==t?t:[]})).reduce(((e,o)=>[...e,...(0,t.getNodeWithDependencies)(o,n,[...r,...a])]),[])]}},30292:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(88270),t),i(n(43069),t),i(n(79426),t),i(n(44535),t),i(n(18063),t),i(n(20359),t)},29862:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMacroNodeDefinition=t.isMacroNode=void 0;t.isMacroNode=e=>e&&"function"==typeof e.runFnBuilder;t.isMacroNodeDefinition=e=>{const{editorConfig:t}=null!=e?e:{};return"custom"===(null==t?void 0:t.type)?"string"==typeof t.editorComponentBundleContent:"structured"===(null==t?void 0:t.type)}},18063:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeInstanceError=void 0;class n extends Error{constructor(e,t,n){let o="Unknown error";o="string"==typeof e?e:e instanceof Error?e.message:null!==e&&"object"==typeof e?JSON.stringify(e):String(e),super(`${o} (insId: ${t}, nodeId: ${n})`),this.name=this.constructor.name,this.message=`${o} (insId: ${t}, nodeId: ${n})`,Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.fullInsIdsPath=t,this.nodeId=n}}t.NodeInstanceError=n},88270:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createInsId=t.NodeInstance=t.isResolvedMacroNodeInstance=t.isMacroNodeInstance=t.isRefNodeInstance=t.isInlineNodeInstance=t.macroNodeInstance=t.inlineNodeInstance=t.nodeInstance=void 0;const o=n(36618);t.nodeInstance=(e,t,n,o)=>({id:e,nodeId:t,inputConfig:n||{},pos:o||{x:0,y:0}});t.inlineNodeInstance=(e,t,n,o)=>({id:e,node:t,inputConfig:n||{},pos:o||{x:0,y:0}});t.macroNodeInstance=(e,t,n,o,i)=>({id:e,macroId:t,macroData:n,inputConfig:o||{},nodeId:`${t}__${e}`,pos:i||{x:0,y:0}});t.isInlineNodeInstance=e=>!!e.node;t.isRefNodeInstance=e=>!!e.nodeId&&!e.macroId;t.isMacroNodeInstance=e=>!!e.macroId;t.isResolvedMacroNodeInstance=e=>!!e.macroId&&!!e.nodeId;t.NodeInstance=(e,t,n,o)=>({id:e,nodeId:t.id,inputConfig:n||{},pos:o||{x:0,y:0}});t.createInsId=e=>`${e.id}-${(0,o.slug)()}`},43069:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dynamicNodeInputs=t.dynamicNodeInput=t.dynamicOutput=t.nodeOutputs=t.nodeOutput=t.nodeInputs=t.isInputPinOptional=t.nodeInput=void 0;const o=n(62600),i=n(86873),r=n(79426);t.nodeInput=function(e){return void 0===e&&(e="required"),{mode:e}};t.isInputPinOptional=e=>"optional"===e.mode;t.nodeInputs=(e,n)=>(0,i.repeat)(e,(e=>(0,t.nodeInput)((null==n?void 0:n[e])||"required")));t.nodeOutput=function(e){return void 0===e&&(e=!1),{delayed:e}};t.nodeOutputs=e=>(0,i.repeat)(e,(()=>(0,t.nodeOutput)()));t.dynamicOutput=()=>new o.Subject,t.dynamicNodeInput=(0,i.testDataCreator)((()=>({subject:new o.Subject,config:(0,r.queueInputPinConfig)()})));t.dynamicNodeInputs=function(e){return void 0===e&&(e=10),(0,i.repeat)(e,(()=>(0,i.testDataCreator)((()=>({subject:new o.Subject,config:(0,r.queueInputPinConfig)()})))()))}},20359:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.codeFromFunction=t.getNodeDef=t.getNode=t.fromSimplified=t.codeNode=t.visualNode=t.isVisualNode=t.extractMetadata=t.isCodeNode=t.isBaseNode=void 0;const r=n(86873),a=n(88270),s=n(43069);i(n(29862),t);t.isBaseNode=e=>e&&e.id&&e.inputs&&e.outputs;t.isCodeNode=e=>(0,t.isBaseNode)(e)&&"function"==typeof e.run;t.extractMetadata=e=>{const{id:t,displayName:n,description:o,namespace:i,defaultStyle:r,searchKeywords:a}=e;return{id:t,displayName:n,description:o,namespace:i,defaultStyle:r,searchKeywords:a}};t.isVisualNode=e=>!!e.instances,t.visualNode=(0,r.testDataCreator)({id:"visual-node",inputs:{},outputs:{},instances:[],connections:[],outputsPosition:{},inputsPosition:{}}),t.codeNode=(0,r.testDataCreator)({id:"node",inputs:{},outputs:{},run:r.noop});t.fromSimplified=e=>{let{run:t,inputTypes:n,outputTypes:o,id:i}=e;return{id:i,inputs:(0,r.entries)(n).reduce(((e,t)=>{let[n]=t;return{...e,[n]:{}}}),{}),outputs:(0,r.entries)(o).reduce(((e,t)=>{let[n]=t;return{...e,[n]:{}}}),{}),run:t}};t.getNode=(e,t)=>{const n=e;if("string"!=typeof n&&(0,a.isInlineNodeInstance)(n))return n.node;const o="string"==typeof n?n:n.nodeId,i=t[o];if(!i)throw new Error(`Node with id ${o} not found`);return i};t.getNodeDef=(e,t)=>{if("string"!=typeof e&&(0,a.isInlineNodeInstance)(e))return e.node;const n="string"==typeof e?e:e.nodeId,o=t[n];if(!o)throw console.error(`Node with id ${n} not found`),new Error(`Node with id ${n} not found`);return o};t.codeFromFunction=e=>{let{id:t,fn:n,inputNames:o,outputName:i,defaultStyle:r}=e;return{id:t,inputs:o.reduce(((e,t)=>({...e,[t]:(0,s.nodeInput)()})),{}),outputs:{[i]:(0,s.nodeOutput)()},run:(e,t)=>{const r=o.map((t=>e[t])),a=t[i],s=n(...r);return Promise.resolve(s).then((e=>null==a?void 0:a.next(e)))},completionOutputs:[i],defaultStyle:r}}},44535:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nodeFromSimpleFunction=void 0,t.nodeFromSimpleFunction=function(e){var t;return{...e,id:e.id,description:e.description,namespace:e.namespace,inputs:e.inputs?e.inputs.reduce(((e,t)=>{let{name:n,description:o,mode:i,defaultValue:r}=t;return{...e,[n]:{description:o,mode:null!=i?i:"required",defaultValue:r}}}),{}):{},outputs:e.output?{[e.output.name]:{description:e.output.description}}:{},defaultStyle:{icon:e.icon,size:e.size},run:null!==(t=e.fullRunFn)&&void 0!==t?t:async function(t,n,o){var i,r;const a=(null!==(i=e.inputs)&&void 0!==i?i:[]).map((e=>{let{name:n}=e;return t[n]}));try{const t=await Promise.resolve(e.run(...a));e.output&&(null===(r=n[e.output.name])||void 0===r||r.next(t))}catch(s){console.error("Error in node",s),o.onError(s)}}}}},79426:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isStickyInputPinConfig=t.isQueueInputPinConfig=t.stickyInputPinConfig=t.queueInputPinConfig=t.INPUT_MODES=void 0,t.INPUT_MODES=["queue","sticky","static"];t.queueInputPinConfig=()=>({mode:"queue"});t.stickyInputPinConfig=()=>({mode:"sticky"});t.isQueueInputPinConfig=e=>"queue"===e.mode;t.isStickyInputPinConfig=e=>!!e&&"sticky"===e.mode},10418:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.simplifiedExecute=void 0;const o=n(74762),i=n(47025);t.simplifiedExecute=function(e,t,n,r,a){void 0===n&&(n={}),void 0===a&&(a={});const s=(0,o.keys)(e.outputs),l=Object.keys(n).reduce(((e,t)=>({...e,[t]:(0,o.dynamicNodeInput)()})),{}),u=s.reduce(((e,t)=>{const n=(0,o.dynamicOutput)();return r&&n.subscribe((e=>{r(t,e)})),{...e,[t]:n}}),{}),c=(0,i.execute)({node:e,inputs:l,outputs:u,resolvedDeps:t,onBubbleError:e=>{throw e},...a});return Object.entries(n).forEach((e=>{let[t,n]=e;l[t].subject.next(n)})),c}},25779:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodePreview=void 0;const o=n(35250),i=n(74762),r=n(86553);t.NodePreview=e=>{let{node:t}=e;const n={node:t,instance:(0,i.nodeInstance)("bob",t.id,{}),connections:[],viewPort:{pos:{x:0,y:0},zoom:1},resolvedDeps:{},connectionsPerInput:{},onUngroup:i.noop,onDblClick:i.noop,onDragEnd:i.noop,onDragMove:i.noop,onDragStart:i.noop,onPinClick:i.noop,onPinDblClick:i.noop,onSelect:i.noop,onTogglePinBreakpoint:i.noop,onTogglePinLog:i.noop,onToggleSticky:i.noop,displayMode:!0,onInspectPin:i.noop,ancestorsInsIds:"",onChangeVisibleInputs:i.noop,onChangeVisibleOutputs:i.noop,forceShowMinimized:"both",onExtractInlineNode:i.noop,onCloseInlineEditor:i.noop,isConnectedInstanceSelected:!1,inlineEditorPortalDomNode:null,onChangeStyle:i.noop,onDeleteInstance:i.noop,onGroupSelected:i.noop,onSetDisplayName:i.noop,hadError:!1,queuedInputsData:{},onPinMouseDown:i.noop,onPinMouseUp:i.noop};return(0,o.jsx)("div",{className:"node-preview",children:(0,o.jsx)(r.InstanceView,{...n})})}},30653:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useDarkMode=t.DarkModeProvider=void 0;const o=n(70079),i=(0,o.createContext)(!0);t.DarkModeProvider=i.Provider;t.useDarkMode=()=>(0,o.useContext)(i)},29183:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DataInspectionModal=void 0;const s=n(35250),l=n(50382),u=a(n(26372)),c=r(n(70079)),d=n(74089),p=n(83938),f=n(17102),m=n(98158);t.DataInspectionModal=e=>{var t;const{onRequestHistory:n}=(0,m.useDebuggerContext)(),{item:o}=e,[i,r]=c.default.useState(),[a,v]=c.default.useState(0),[g,h]=c.default.useState(""),[y,b]=c.default.useState(),[_]=(0,d.useDebounce)(g,300);(0,c.useEffect)((()=>{b(null==i?void 0:i.lastSamples.filter((e=>"object"==typeof e.val?JSON.stringify(e.val).includes(_):e.val.toString().includes(_)))),v(0)}),[null==i?void 0:i.lastSamples,_]),c.default.useEffect((()=>{!async function(){var e,t;const i=await n(o.insId,null===(e=o.pin)||void 0===e?void 0:e.id,null===(t=o.pin)||void 0===t?void 0:t.type);r(i)}()}),[o,n]);const I=e=>{const t=e.val;return"object"==typeof t?(0,s.jsx)(p.BrowserOnlyReactJson,{src:t}):(0,s.jsx)(l.Code,{children:t.toString()})},x=`"${o.insId}" ${(null===(t=o.pin)||void 0===t?void 0:t.id)?`(${o.pin.id})`:""}`;return(0,s.jsx)(l.Dialog,{isOpen:!0,title:`Inspecting data for instance ${x}`,onClose:e.onClose,canEscapeKeyClose:!1,className:"data-inspection-modal",children:(0,s.jsx)("main",{className:(0,u.default)(l.Classes.DIALOG_BODY),tabIndex:0,children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("header",{children:[i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("em",{children:[x," called ",i.total," time(s)"]}),i.total>10&&(0,s.jsx)("span",{children:"Showing last 10 samples"})]}):null,(0,s.jsx)("input",{className:"bp5-input bp5-small bp5-fill",type:"search",placeholder:"Search for values",dir:"auto",onChange:e=>h(e.target.value),value:g}),_.length>0&&(0,s.jsxs)("span",{children:["Showing ",null==y?void 0:y.length," of ",i.lastSamples.length," ",'samples matching query "',_,'"']})]}),(0,s.jsx)("main",{className:"main-wrapper",children:(()=>{if(!i)return(0,s.jsx)(f.Loader,{});if(0===i.total)return(0,s.jsxs)(l.Callout,{intent:"warning",children:["No events captured for instance ",(0,s.jsx)("em",{children:o.insId})," ",o.pin?(0,s.jsxs)(c.default.Fragment,{children:["and pin ",(0,s.jsx)("em",{children:o.pin.id})]}):null,". Make sure debugger is running and your program was triggered."]});const e=null==y?void 0:y[a];return e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l.Card,{className:"content-wrapper",children:[e?(0,s.jsxs)("div",{className:"info",children:[(0,s.jsxs)("div",{children:["Showing sample ",a," of event from"," ",(0,s.jsx)("strong",{children:(0,d.timeAgo)(e.time)})," (",new Date(e.time).toLocaleString(),")"]}),(0,s.jsxs)("div",{children:["Instance: ",(0,s.jsx)("strong",{children:e.insId}),", Pin id:"," ",(0,s.jsx)("strong",{children:e.pinId})," "]}),(0,s.jsx)("div",{children:"Value:"})]}):null,I(e)]}),(0,s.jsx)(l.Menu,{className:"samples-menu",children:y.map(((e,t)=>{const n=e.pinId,o=`${i.total-t}. from pin "${n}"`;return(0,s.jsx)(l.MenuItem,{text:o,onClick:()=>v(t)},t)}))})]}):i.lastSamples.length>0&&g.length>0?(0,s.jsxs)(l.Callout,{intent:"warning",children:['No data found for search query "',g,'"']}):(0,s.jsxs)(l.Callout,{intent:"warning",children:["No events captured for instance ",o.insId," ",o.pin?`and ${o.pin.id}`:"",". Make sure a debugger is connected and your program was triggered."]})})()})]})})})}},40471:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(29183),t)},98158:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useDebuggerContext=t.DebuggerContextProvider=void 0;const o=n(70079),i=(0,o.createContext)({onRequestHistory:()=>Promise.reject(new Error("Not implemented"))});t.DebuggerContextProvider=i.Provider;t.useDebuggerContext=()=>(0,o.useContext)(i)},86125:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useDependenciesContext=t.DependenciesContextProvider=void 0;const o=n(70079),i=(0,o.createContext)({resolvedDependencies:{},onImportNode:()=>Promise.reject(new Error("Not implemented")),onRequestImportables:()=>Promise.reject(new Error("Not implemented")),libraryData:{groups:[]}});t.DependenciesContextProvider=i.Provider;t.useDependenciesContext=()=>(0,o.useContext)(i)},97106:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.FlowEditor=void 0;const s=n(35250),l=r(n(70079)),u=n(74762),c=n(63521),d=n(68120),p=n(43490),f=n(68840),m=n(78087),v=n(20079),g=n(40471),h=n(98158),y=n(86125),b=n(30653),_=n(77852);a(n(43490),t),a(n(98158),t),a(n(86125),t),f.library.add(m.fab,v.fas);const I=["select","drag-move","order-step"];t.FlowEditor=l.memo(l.forwardRef(((e,t)=>{const{state:n,onChangeEditorState:o}=e,{resolvedDependencies:i}=(0,y.useDependenciesContext)(),[r,a]=l.useState([]),[f,m]=l.useState([]),{boardData:v}=n,x=n.flow.node,[C,w]=l.useState({}),[E,j]=l.useState(new Set),{debuggerClient:S}=(0,h.useDebuggerContext)();l.useEffect((()=>{if(S)return S.onBatchedEvents((e=>{e.forEach((e=>{e.type===u.DebuggerEventType.INPUTS_STATE_CHANGE&&w((t=>({...t,[e.insId]:e.val}))),e.type===u.DebuggerEventType.ERROR&&j((t=>{const n=new Set(t);return n.add(e.insId),n}))}))}))}),[S]);const{openFile:N}=(0,p.usePorts)(),O=l.useCallback(((e,t)=>{console.info("onChangeFlow",t.type),"functional"===t.type&&(a([{flow:{...n.flow,...e}},...r.slice(0,50)]),m([])),o((t=>({...t,flow:{...t.flow,...e}})))}),[o,n.flow,r]),[T,P]=l.useState({instances:[],connections:[]}),D=l.useCallback((e=>{o((t=>({...t,boardData:{...t.boardData,...e}})))}),[o]);l.useEffect((()=>{D({selectedInstances:[],viewPort:c.defaultViewPort,from:void 0,to:void 0,lastMousePos:{x:0,y:0}})}),[x.id]),(0,d.useHotkeys)("cmd+z",(e=>{m([...f,n]);const[t,...i]=r;t&&(o((e=>({...e,...t}))),a(i)),e.preventDefault()}),{text:"Undo last change",group:"Editing"},[n,r,f]);const k=l.useCallback(((e,t)=>{I.some((e=>t.message.includes(e)))||m([]),O({node:e},t)}),[O]),M=l.useCallback((e=>{N({absPath:e.source.path})}),[N]),[V,R]=l.useState(),A=l.useCallback((()=>R(void 0)),[]),L=l.useCallback(((e,t)=>{R({insId:e,pin:t})}),[]),{isDarkMode:z}=(0,_.useDarkMode)();return(0,s.jsx)("div",{className:"flyde-flow-editor",children:(0,s.jsx)(b.DarkModeProvider,{value:null!==(q=e.darkMode)&&void 0!==q?q:z,children:(0,s.jsxs)(l.Fragment,{children:[V?(0,s.jsx)(g.DataInspectionModal,{item:V,onClose:A}):null,(0,s.jsx)(c.VisualNodeEditor,{currentInsId:u.ROOT_INS_ID,ref:t,boardData:v,onChangeBoardData:D,node:x,onGoToNodeDef:M,onChangeNode:k,resolvedDependencies:i,clipboardData:T,onCopy:P,nodeIoEditable:!x.id.startsWith("Trigger"),onInspectPin:L,onExtractInlineNode:e.onExtractInlineNode,queuedInputsData:C,initialPadding:e.initialPadding,instancesWithErrors:E,disableScrolling:e.disableScrolling},x.id)]})})});var q})))},9001:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseNodeEditor=t.renderCreateIOOption=void 0;const i=n(35250),r=o(n(70079)),a=n(74762),s=n(50382),l=o(n(53865)),u=n(70457),c=n(25779);t.renderCreateIOOption=(e,t,n)=>(0,i.jsx)(s.MenuItem,{icon:"add",text:`Create "${e}"`,active:t,onClick:n,shouldDismissPopover:!1});const d=u.MultiSelect.ofType();t.BaseNodeEditor=e=>{var n,o;const{node:u,onChange:p}=e,f=(0,a.entries)(u.inputs),m=f.filter((e=>{let[,t]=e;return"required"===t.mode})).map((e=>{let[t]=e;return t})),v=f.filter((e=>{let[,t]=e;return"optional"===t.mode})).map((e=>{let[t]=e;return t})),g=f.filter((e=>{let[,t]=e;return"required-if-connected"===t.mode})).map((e=>{let[t]=e;return t})),[h,y]=r.default.useState(!1),b=(0,a.okeys)(u.outputs),_=r.default.useCallback((e=>{p({...u,id:e})}),[u,p]),I=r.default.useCallback((e=>{let t=e?e.split(","):void 0;"[]"===e&&(t=[]),p({...u,completionOutputs:t})}),[u,p]),x=r.default.useCallback((e=>{let t=e?e.split(","):void 0;p({...u,reactiveInputs:t})}),[u,p]),C=r.default.useCallback(((e,t)=>{const n=(0,l.default)(u,(n=>{n.inputs[e]=(0,a.nodeInput)(t)}));p(n)}),[u,p]),w=r.default.useCallback((e=>{const t=(0,l.default)(u,(t=>{delete t.inputs[e]}));p(t)}),[u,p]),E=r.default.useCallback((e=>{const t=(0,l.default)(u,(t=>{t.outputs[e]=(0,a.nodeOutput)()}));p(t)}),[u,p]),j=r.default.useCallback((e=>{const t=(0,l.default)(u,(t=>{delete t.outputs[e]}));p(t)}),[u,p]);return(0,i.jsxs)("div",{className:"base-node-editor",children:[(0,i.jsx)("div",{className:"form-row",children:(0,i.jsx)(s.FormGroup,{label:"Node Name",labelFor:"text-input",labelInfo:"(required)",children:(0,i.jsx)(s.InputGroup,{id:"node-name",disabled:e.idDisabled,placeholder:"Node ID",value:u.id,onChange:e=>_(e.target.value)})})}),(0,i.jsx)(s.FormGroup,{label:"Required Inputs",children:(0,i.jsx)(d,{selectedItems:m,placeholder:"Enter input names here",items:[],tagRenderer:e=>e,onItemSelect:e=>C(e,"required"),onRemove:w,resetOnSelect:!0,itemRenderer:e=>(0,i.jsx)("span",{children:e}),createNewItemFromQuery:e=>e,createNewItemRenderer:t.renderCreateIOOption,fill:!0})}),!0!==e.hiddenOutputs?(0,i.jsx)(s.FormGroup,{label:"Outputs",children:(0,i.jsx)(d,{selectedItems:b,placeholder:"Enter output names here",items:[],tagRenderer:e=>e,onItemSelect:E,onRemove:j,resetOnSelect:!0,itemRenderer:e=>(0,i.jsx)("span",{children:e}),createNewItemFromQuery:e=>e,createNewItemRenderer:t.renderCreateIOOption,fill:!0})}):null,(0,i.jsx)(s.Checkbox,{checked:h,onChange:e=>y(e.target.checked),children:"Show advanced options"}),(0,i.jsxs)(s.Collapse,{isOpen:h,children:[(0,i.jsx)(s.FormGroup,{label:"Optional Inputs",children:(0,i.jsx)(d,{selectedItems:v,placeholder:"Enter input names here",items:[],tagRenderer:e=>e,onItemSelect:e=>C(e,"optional"),onRemove:w,resetOnSelect:!0,itemRenderer:e=>(0,i.jsx)("span",{children:e}),createNewItemFromQuery:e=>e,createNewItemRenderer:t.renderCreateIOOption,fill:!0})}),(0,i.jsx)(s.FormGroup,{label:"Required-if-connected Inputs",children:(0,i.jsx)(d,{selectedItems:g,placeholder:"Enter input names here",items:[],tagRenderer:e=>e,onItemSelect:e=>C(e,"required-if-connected"),onRemove:w,resetOnSelect:!0,itemRenderer:e=>(0,i.jsx)("span",{children:e}),createNewItemFromQuery:e=>e,createNewItemRenderer:t.renderCreateIOOption,fill:!0})}),(0,i.jsx)(s.FormGroup,{label:"Completion Outputs",children:(0,i.jsx)(s.InputGroup,{id:"completion-outputs",placeholder:"completion outputs",value:(null===(n=u.completionOutputs)||void 0===n?void 0:n.join(","))||"",onChange:e=>I(e.target.value)})}),(0,i.jsx)(s.FormGroup,{label:"Reactive Inputs",children:(0,i.jsx)(s.InputGroup,{id:"reactive-inputs",placeholder:"Reactive inputs",value:(null===(o=u.reactiveInputs)||void 0===o?void 0:o.join(","))||"",onChange:e=>x(e.target.value)})})]}),(0,i.jsx)(s.FormGroup,{label:"Preview",children:(0,i.jsx)("div",{className:"preview-wrapper",children:(0,i.jsx)(c.NodePreview,{node:u})})})]})}},82232:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.metaChange=t.functionalChange=void 0;t.functionalChange=e=>({type:"functional",message:e});t.metaChange=function(e){return void 0===e&&(e="n/a"),{type:"meta",message:e}}},41032:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.safelyGetNodeDef=t.loadingDef=void 0;const o=n(74762);t.loadingDef={id:"Loading",displayName:"Loading definition",inputs:{},outputs:{}};t.safelyGetNodeDef=(e,n)=>{try{return(0,o.getNodeDef)(e,n)}catch(i){const n="string"==typeof e?e:e.nodeId;return{...t.loadingDef,id:n}}}},60698:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},43490:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(31874),t)},31874:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.usePorts=t.useConfirm=t.usePrompt=t.PortsContext=t.defaultPorts=void 0;const r=n(70079),a=n(74762),s=n(84472);i(n(60698),t);const l=e=>async()=>{console.warn(`${e} Not implemented`),(0,s.toastMsg)("Feature not implemented in this context yet","warning")};t.defaultPorts={prompt:async e=>{let{text:t,defaultValue:n}=e;return prompt(`${t}`,n)},openFile:async e=>{},confirm:async e=>{let{text:t}=e;return confirm(t)},readFlow:l("readFlow"),setFlow:l("setFlow"),resolveDeps:l("resolveDeps"),getImportables:l("getImportables"),onExternalFlowChange:l("onExternalFlowChange"),onInstallRuntimeRequest:l("onInstallRuntimeRequest"),onRunFlow:l("onRunFlow"),onStopFlow:l("onStopFlow"),reportEvent:a.noop,generateNodeFromPrompt:l("generateNodeFromPrompt"),hasOpenAiToken:()=>Promise.resolve(!1),getLibraryData:()=>Promise.resolve({groups:[]})},t.PortsContext=(0,r.createContext)(t.defaultPorts);t.usePrompt=()=>{const e=(0,r.useContext)(t.PortsContext).prompt;return(t,n)=>e({text:t,defaultValue:n})};t.useConfirm=()=>{const e=(0,r.useContext)(t.PortsContext).confirm;return t=>e({text:t})};t.usePorts=()=>(0,r.useContext)(t.PortsContext)},65758:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.groupSelected=void 0;const i=n(74762),r=o(n(53865)),a=n(22513);t.groupSelected=async(e,t,n,o,s)=>{const{instances:l,connections:u}=t,c=l.filter((t=>e.includes(t.id))),d=u.filter((t=>{let{from:n,to:o}=t;return-1!==e.indexOf(n.insId)||-1!==e.indexOf(o.insId)}));if(!c.length)throw new Error("visual without selections");const{visualNode:p,renamedInputs:f,renamedOutputs:m}=await(0,a.createGroup)(c,d,n,s),v=c.reduce(((e,t)=>(0,i.middlePos)(t.pos,e)),l[0].pos),g="ref"===o?(0,i.nodeInstance)((0,i.createInsId)(p),p.id,{},v):(0,i.inlineNodeInstance)((0,i.createInsId)(p),p,{},v),h=l.filter((t=>-1===e.indexOf(t.id))),y=u.map((e=>{const t=`${e.from.insId}.${e.from.pinId}`,n=`${e.to.insId}.${e.to.pinId}`;return f[n]?{...e,to:{insId:g.id,pinId:f[n]}}:m[t]?{...e,from:{insId:g.id,pinId:m[t]}}:e})).filter((t=>-1===e.indexOf(t.from.insId)&&-1===e.indexOf(t.to.insId)));return{newNode:p,currentNode:(0,r.default)(t,(e=>{e.instances=[...h,g],e.connections=y}))}}},74089:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(97106),t),i(n(18420),t),i(n(90680),t),i(n(84472),t),i(n(17102),t),i(n(82232),t),i(n(25779),t),i(n(25804),t),i(n(9958),t),i(n(68120),t),i(n(94651),t),i(n(73470),t),i(n(94007),t),i(n(60190),t),i(n(9001),t),i(n(7047),t),i(n(23386),t)},31745:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InfoTooltip=void 0;const o=n(35250),i=n(50382),r=n(50382),a=n(44470),s=n(50382);t.InfoTooltip=e=>{const{content:t}=e;return(0,o.jsx)(r.Tooltip,{content:t,placement:"top",className:"info-tooltip",children:(0,o.jsx)(i.Icon,{icon:(0,o.jsx)(a.InfoSign,{className:s.Classes.INTENT_PRIMARY}),intent:i.Intent.SUCCESS,className:"info-tooltip-icon"})})}},83938:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserOnlyReactJson=void 0;const o=n(35250);t.BrowserOnlyReactJson=e=>{if("undefined"==typeof window)return null;const t=n(73541).Z;return(0,o.jsx)(t,{...e})}},94651:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyticsValueRenderer=void 0;const o=n(35250),i=n(74762),r=n(83938);t.AnalyticsValueRenderer=e=>{let{val:t}=e;try{const e=JSON.parse(t),n="object"==typeof e?e:{value:e},a=e&&[e.type,e.key,e.props,e.ref].every(i.isDefined),s=a?{jsxValue:e}:n;return(0,o.jsx)(r.BrowserOnlyReactJson,{src:s,collapseStringsAfterLength:50,collapsed:a})}catch(n){return(0,o.jsx)(r.BrowserOnlyReactJson,{src:{value:t},collapseStringsAfterLength:50})}}},22513:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createGroup=void 0;const o=n(74762),i=n(74762),r=n(60190),a=n(88593);t.createGroup=async(e,t,n,s)=>{if(0===e.length)throw new Error("cannot create group without instances");const l=e.map((e=>e.id)),u=t.filter((e=>{const t=l.includes(e.from.insId),n=l.includes(e.to.insId);return!t&&n})).filter(((e,t,n)=>n.findIndex((t=>(0,i.connectionNodeEquals)(t.to,e.to)))===t)),c=t.filter((e=>{const t=l.includes(e.from.insId),n=l.includes(e.to.insId);return t&&!n})).filter(((e,t,n)=>n.findIndex((t=>(0,i.connectionNodeEquals)(t.from,e.from)))===t));let d={},p={},f={},m={};const v=[],g={};for(const o of u){const e=`${o.to.insId}.${o.to.pinId}`,t=`${o.from.insId}.${o.from.pinId}`,n=o.to.pinId;if(f[t]){v.push({from:(0,i.externalConnectionNode)(f[t]),to:(0,i.connectionNode)(o.to.insId,o.to.pinId)});continue}const a=g[n]?await s(`Name this input (${n} of ${o.to.insId}) is already taken:`)||`i${(0,r.rnd)()}`:n;d[e]=a,f[t]=a,v.push({from:(0,i.externalConnectionNode)(a),to:(0,i.connectionNode)(o.to.insId,o.to.pinId)}),g[a]=(0,i.nodeInput)()}const h={};for(const a of c){const e=`${a.to.insId}.${a.to.pinId}`,t=`${a.from.insId}.${a.from.pinId}`,n=a.from.pinId;if(m[e]){v.push({from:(0,i.connectionNode)(a.from.insId,a.from.pinId),to:(0,i.externalConnectionNode)(m[e])});continue}const l=h[n]?await s(`Name this output (${n} of ${a.from.insId} is already taken:`)||`i${(0,r.rnd)()}`:n;p[t]=l,m[e]=l,v.push({from:(0,i.connectionNode)(a.from.insId,a.from.pinId),to:(0,i.externalConnectionNode)(l)}),h[l]=(0,o.nodeOutput)()}e.reduce(((e,t)=>(0,i.middlePos)(t.pos,e)),e[0].pos);const y=t.filter((e=>l.includes(e.from.insId)&&l.includes(e.to.insId)));return{visualNode:{id:n,inputs:g,outputs:h,instances:e,defaultStyle:{size:"large",color:(0,o.pickRandom)(a.nodeStylePresetColors.map((e=>e.color)))},inputsPosition:(0,o.okeys)(g).reduce(((e,t,n)=>({...e,[t]:{x:0+100*n,y:0}})),{}),outputsPosition:(0,o.okeys)(h).reduce(((e,t,n)=>({...e,[t]:{x:0+100*n,y:400}})),{}),connections:[...y,...v],completionOutputs:(0,o.okeys)(h)},renamedInputs:d,renamedOutputs:p}}},9958:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.highlightText=void 0;const o=n(35250);function i(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}t.highlightText=(e,t)=>{let n=0;const r=t.split(/\s+/).filter((e=>e.length>0)).map(i);if(0===r.length)return[e];const a=new RegExp(r.join("|"),"gi"),s=[];for(;;){const t=a.exec(e);if(!t)break;const i=t[0].length,r=e.slice(n,a.lastIndex-i);r.length>0&&s.push(r),n=a.lastIndex,s.push((0,o.jsx)("strong",{children:t[0]},n))}const l=e.slice(n);return l.length>0&&s.push(l),s}},17102:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Loader=void 0;const o=n(35250);t.Loader=()=>(0,o.jsx)("div",{className:"loader",children:(0,o.jsx)("svg",{width:"38",height:"38",viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:"#007ec6",children:(0,o.jsx)("g",{fill:"none",fillRule:"evenodd",children:(0,o.jsxs)("g",{transform:"translate(1 1)",strokeWidth:"2",children:[(0,o.jsx)("circle",{strokeOpacity:".5",cx:"18",cy:"18",r:"18"}),(0,o.jsx)("path",{d:"M36 18c0-9.94-8.06-18-18-18",children:(0,o.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})})]})})})})},23386:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0;const o=n(74762);t.logger=(0,o.debugLogger)("editor")},561:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.preloadMonaco=void 0;const o=n(51848),i=n(23386);let r=!1;t.preloadMonaco=()=>{r||o.loader.init().then((()=>{(0,i.logger)("monaco preloaded"),r=!0}))}},68120:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useHotkeys=t.currentHotkeys=void 0;const i=o(n(45240)),r=n(70079);t.currentHotkeys=new Map,t.useHotkeys=function(e,n,o,a,s){void 0===a&&(a=[]);const l=(0,r.useCallback)((function(){s&&!s.current||n(...arguments)}),[...a,n]);(0,r.useEffect)((()=>((0,i.default)(e,{},l),t.currentHotkeys.set(e,o),()=>{t.currentHotkeys.delete(e),i.default.unbind(e,l)})),[e,l,o])}},65704:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useScrollWithShadow=void 0;const o=n(70079);t.useScrollWithShadow=function(e){const[t,n]=(0,o.useState)(0),[i,r]=(0,o.useState)(0),[a,s]=(0,o.useState)(0),l=e?"rgb(50 50 50 / 1)":"rgb(235 235 235 / 1)";return{boxShadow:function(){let e="none";const n=`inset 0 8px 5px -5px ${l}`,o=`inset 0 -8px 5px -5px ${l}`;return 0===t?i>a&&(e=o):t>0&&a<i-t?e=`${n}, ${o}`:a===i-t&&(e=n),e}(),onScrollHandler:e=>{n(Math.floor(e.target.scrollTop)),r(Math.floor(e.target.scrollHeight)),s(Math.floor(e.target.clientHeight))}}}},94007:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.safeSessionStorage=t.safeLocalStorage=void 0,t.safeLocalStorage={getItem:function(){try{return localStorage.getItem(...arguments)}catch(e){return null}},setItem:function(){try{return localStorage.setItem(...arguments)}catch(e){return null}}},t.safeSessionStorage={getItem:function(){try{return sessionStorage.getItem(...arguments)}catch(e){return null}},setItem:function(){try{return sessionStorage.setItem(...arguments)}catch(e){return null}}}},90680:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.useLocalStorage=t.useResizePref=t.userPreferences=t.useUserPref=void 0;const a=r(n(70079)),s=n(18420),l=n(94007);t.useUserPref=(e,n)=>{const[o,i]=a.useState((()=>{const o=t.userPreferences.getItem(e);return(0,s.isDefined)(o)?o:n}));a.useEffect((()=>{const o=t.userPreferences.getItem(e),r=(0,s.isDefined)(o)?o:n;i(r)}),[e]);return[o,n=>{t.userPreferences.setItem(e,n),i(n)}]},t.userPreferences=(()=>{const e=e=>`up.${e}`;return{getItem:t=>{const n=l.safeLocalStorage.getItem(e(t))||"",o=l.safeSessionStorage.getItem(e(t))||"";try{return JSON.parse(o||n).value}catch(i){return}},setItem:function(t,n,o){void 0===o&&(o=!1);const i=o?sessionStorage:l.safeLocalStorage;try{const o=JSON.stringify({value:n});return i.setItem(e(t),o),!0}catch(r){return console.error("Error saving user preference",r),!1}}}})();t.useResizePref=(e,n)=>{const o=`resize.${e}`;return(0,t.useUserPref)(o,n)};const u=e=>{const t=l.safeLocalStorage.getItem(e);if(!t)return null;try{return JSON.parse(t).value}catch(n){return null}};t.useLocalStorage=(e,t)=>{const[n,o]=a.useState(u(e)||t),i=a.useCallback((t=>{l.safeLocalStorage.setItem(e,JSON.stringify({value:t})),o(t)}),[e]);return a.useEffect((()=>{u(e)||l.safeLocalStorage.setItem(e,JSON.stringify({value:t}))}),[e,t,i]),[n,i]}},60190:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.totalEnergy=t.itrPhysics=t.hookes=t.coulombs=t.vToStr=t.vNorm=t.vLen=t.vSub=t.vAdd=t.vDiv=t.vMul=t.vZero=t.rnd=t.vec=t.size=void 0;t.size=(e,t)=>({width:e,height:t});t.vec=(e,t)=>({x:e,y:t});t.rnd=function(e,t){return void 0===e&&(e=100),void 0===t&&(t=0),Math.floor(Math.random()*(e-t))+t},t.vZero={x:0,y:0};t.vMul=(e,t)=>{let{x:n,y:o}=e;return{x:n*t,y:o*t}};t.vDiv=(e,n)=>{let{x:o,y:i}=e;return(0,t.vMul)({x:o,y:i},1/n)};t.vAdd=(e,t)=>({x:e.x+t.x,y:e.y+t.y});t.vSub=(e,n)=>(0,t.vAdd)(e,(0,t.vMul)(n,-1));t.vLen=e=>{let{x:t,y:n}=e;return Math.sqrt(t*t+n*n)};t.vNorm=e=>(0,t.vDiv)(e,(0,t.vLen)(e)||1);t.vToStr=e=>{let{x:t,y:n}=e;return`${t.toFixed(1)},${n.toFixed(1)}`};t.coulombs=(e,n,o)=>{const i=(0,t.vLen)((0,t.vSub)(e.p,n.p));if(0===i){const i=(0,t.vec)(2*Math.random()-1,2*Math.random()-1),r=e.m*n.m/Math.pow(10,2);return(0,t.vMul)(i,r*o)}{const r=(0,t.vNorm)((0,t.vSub)(n.p,e.p)),a=e.m*n.m/Math.pow(i+.1,2);return(0,t.vMul)(r,a*o)}};t.hookes=(e,n,o,i,r)=>{const a=(0,t.vLen)((0,t.vSub)(e.p,n.p)),s=(0,t.vNorm)((0,t.vSub)(e.p,n.p));let l=0;return a<o?l=o-a:a>i&&(l=i-a),(0,t.vMul)(s,r*l)};t.itrPhysics=(e,n)=>{const{p:o,v:i,f:r,m:a}=n,s=(0,t.vDiv)(r,a),l=e/1e3,u=(0,t.vAdd)((0,t.vMul)(s,l),i),c=(0,t.vAdd)((0,t.vMul)(u,l),o);return{...n,p:c,v:u,f:(0,t.vec)(0,0)}};t.totalEnergy=e=>e.reduce(((e,n)=>{const o=(0,t.vLen)(n.v);return e+.5*n.m*o*o}),0)},84472:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateToast=t.toastMsg=t.AppToaster=void 0;const o=n(50382);t.AppToaster=(()=>{try{return o.OverlayToaster.create({className:"app-toaster",position:o.Position.BOTTOM_RIGHT})}catch(e){return{}}})();t.toastMsg=(e,n,o)=>t.AppToaster.show({message:e,intent:n,timeout:o});t.updateToast=(e,n,o)=>t.AppToaster.show({message:n,intent:o},e)},18420:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.preventDefaultAnd=t.isLocal=t.fullTime=t.timeAgoFromDt=t.timeAgo=t.toString=t.isDefined=t.set=t.createOmap=t.toOmap=t.values=t.keys=t.entries=void 0;const i=n(7047),r=o(n(73136));t.entries=e=>Object.keys(e).map((t=>[t,e[t]]));t.keys=e=>Object.keys(e);t.values=e=>Object.keys(e).map((t=>e[t]));t.toOmap=e=>Array.from(e.entries()).reduce(((e,t)=>{let[n,o]=t;return{...e,[n]:o}}),{});t.createOmap=function(e){return void 0===e&&(e=[]),e.reduce(((e,t)=>({...e,[t[0]]:t[1]})),{})};t.set=(e,t,n)=>{e[t]=n};t.isDefined=e=>void 0!==e;t.toString=e=>{const t=typeof e;if(""===e)return"(empty string)";if((0,i.isJsxValue)(e))return"JSX Value";if("object"===t)try{const t=JSON.stringify(e);return"{}"===t?"Empty object":t}catch(n){return"Object (cannot stringify)"}return`${e}`};t.timeAgo=e=>(0,r.default)(new Date(e)).fromNow();t.timeAgoFromDt=e=>(0,r.default)(Date.now()-e).fromNow();t.fullTime=e=>(0,r.default)(new Date(e)).toString();t.isLocal=()=>location.href.includes(":300");t.preventDefaultAnd=e=>t=>{t.preventDefault(),e(t)}},63755:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AddMainPinModal=void 0;const s=n(35250),l=n(50382),u=n(44470),c=a(n(26372)),d=r(n(70079));t.AddMainPinModal=e=>{let{type:t,onAdd:n,onClose:o}=e;const[i,r]=d.default.useState(""),a=(0,d.useCallback)((()=>{n(t,i)}),[i,n,t]),p=(0,d.useMemo)((()=>{const e=(0,s.jsxs)(s.Fragment,{children:["Learn how to connect this flow with your casebase"," ",(0,s.jsx)("a",{href:"https://www.flyde.dev/docs/integrate-flows",children:"here"})]});switch(t){case"input":return(0,s.jsxs)(l.Callout,{intent:"primary",icon:(0,s.jsx)(u.InfoSign,{}),children:["Main inputs are Flyde's way of receiving external data.",(0,s.jsx)("div",{children:e})]});case"output":(0,s.jsxs)(l.Callout,{intent:"primary",icon:(0,s.jsx)(u.InfoSign,{}),children:["Main outputs are Flyde's way of emitting values externally.",(0,s.jsx)("div",{children:e})]})}}),[t]);return(0,s.jsxs)(l.Dialog,{isOpen:!0,onClose:o,className:"add-main-pin-modal",children:[(0,s.jsxs)("main",{className:(0,c.default)(l.Classes.DIALOG_BODY),tabIndex:0,children:[(0,s.jsxs)(l.FormGroup,{children:[(0,s.jsxs)("label",{className:l.Classes.LABEL,children:["New main ",t," name:"]}),(0,s.jsx)("input",{className:l.Classes.INPUT,type:"text",placeholder:"Enter name",value:i,onChange:e=>r(e.target.value)})]}),p]}),(0,s.jsx)("div",{className:l.Classes.DIALOG_FOOTER,children:(0,s.jsxs)("div",{className:l.Classes.DIALOG_FOOTER_ACTIONS,children:[(0,s.jsx)(l.Button,{onClick:o,children:"Close"}),(0,s.jsx)(l.Button,{onClick:a,intent:l.Intent.PRIMARY,children:"Add"})]})})]})}},68532:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(63755),t)},1237:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HelpBubble=void 0;const i=n(70079),r=n(35250),a=n(50382),s=n(99489),l=n(50382),u=o(n(70079)),c=n(68120),d=n(43490),p={offset:{enabled:!0,options:{offset:[0,20]}},preventOverflow:{enabled:!0,options:{padding:10}}};const f=["Viewport Controls","Editing","Selection"],m=[{title:"Core Concepts",link:"https://www.flyde.dev/docs/core-concepts/"},{title:"Integrate With Existing Code",link:"https://www.flyde.dev/docs/integrate-flows/"},{title:"Creating Custom Nodes",link:"https://www.flyde.dev/docs/custom-nodes/"},{title:"Trouble-shooting",link:"https://www.flyde.dev/docs/troubleshooting/"},{title:"Trigg - Cloud Managed Flyde",link:"https://www.trigg.dev/?ref=help-menu"}];t.HelpBubble=()=>{const[e,t]=u.default.useState(!1),n=Array.from(c.currentHotkeys.entries()).map((e=>{let[t,n]=e;return{combo:(o={key:t,menuData:n}).key,label:o.menuData.text,group:o.menuData.group};var o})).reduce(((e,t)=>(e[t.group]||(e[t.group]=[]),e[t.group].push(t),e)),{}),o=Object.entries(n).sort(((e,t)=>f.indexOf(t[0])-f.indexOf(e[0]))),{reportEvent:v}=(0,d.usePorts)(),g=(0,r.jsx)(a.Dialog,{isOpen:e,onClose:()=>t(!1),children:(0,r.jsx)("div",{className:a.Classes.DIALOG_BODY,children:o.map((e=>{let[t,n]=e;return(0,r.jsxs)(u.default.Fragment,{children:[(0,r.jsx)(a.H4,{children:t}),n.map((e=>(0,i.createElement)(s.Hotkey,{...e,key:e.combo})))]},t)}))})}),h=(0,r.jsxs)(a.Menu,{children:[m.map((e=>(0,r.jsx)(a.MenuItem,{text:e.title,onClick:()=>{v("helpMenuItem",{item:e.title})},href:e.link,target:"_blank"},e.title))),(0,r.jsx)(a.MenuDivider,{}),(0,r.jsx)(a.MenuItem,{text:"Discord",onClick:()=>v("helpMenuItem",{item:"discord"}),href:"https://discord.gg/x7t4tjZQP8",target:"_blank"}),(0,r.jsx)(a.MenuItem,{text:"Hotkeys",onClick:()=>{t(!0),v("helpMenuItem",{item:"hotkeys"})}}),(0,r.jsx)(a.MenuItem,{text:"Full Documentation",onClick:()=>v("helpMenuItem",{item:"documentation"}),href:"https://www.flyde.dev/docs",target:"_blank"})]});return(0,r.jsxs)("div",{className:"help-bubble","data-tip":"Help",children:[(0,r.jsx)(l.Popover,{content:h,modifiers:p,onOpened:()=>v("helpMenuOpen",{}),children:(0,r.jsx)(a.Button,{children:"Help"})}),g]})}},3354:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(1237),t)},63463:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createConfigurableInputEditor=t.ConfigurableInputEditor=void 0;const i=n(35250),r=n(50382),a=o(n(70079));t.ConfigurableInputEditor=function(e){let{value:t,onChange:n,valueRenderer:o,defaultStaticValue:s,modeLabel:l}=e;const u=a.default.useMemo((()=>o),[]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.RadioGroup,{label:l,onChange:e=>{n({mode:e.currentTarget.value,value:"static"===e.currentTarget.value?s:void 0})},selectedValue:t.mode,inline:!0,children:[(0,i.jsx)(r.Radio,{label:"Static",value:"static"}),(0,i.jsx)(r.Radio,{label:"Dynamic",value:"dynamic"})]}),"static"===t.mode?(0,i.jsx)(u,{value:t.value,onChange:e=>{n({value:e,mode:"static"})}}):null]})};t.createConfigurableInputEditor=e=>n=>(0,i.jsx)(t.ConfigurableInputEditor,{...n,valueRenderer:e})},79354:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MacroInstanceEditor=void 0;const s=n(35250),l=n(50382),u=n(74762),c=a(n(26372)),d=n(14035),p=r(n(70079)),f=n(39936);t.MacroInstanceEditor=e=>{var t;const{deps:n,ins:o}=e,[i,r]=p.default.useState(o.macroData),a=(0,p.useMemo)((()=>{const e=n[o.macroId];if(!e||!(0,u.isMacroNodeDefinition)(e))throw new Error(`Macro ${o.macroId} not found `);return e}),[n,o.macroId]),m=(0,p.useMemo)((()=>{const e=n[o.macroId];if(!e||!(0,u.isMacroNodeDefinition)(e))throw new Error(`Macro ${o.macroId} not found `);return(0,f.loadMacroEditor)(e)}),[n,o]);return(0,s.jsxs)(l.Dialog,{isOpen:!0,title:`Edit ${null!==(t=a.displayName)&&void 0!==t?t:a.id} Configuration`,onClose:e.onCancel,className:"macro-instance-editor no-drag",children:[(0,s.jsx)("main",{className:(0,c.default)(l.Classes.DIALOG_BODY),tabIndex:0,children:(0,s.jsx)(d.ErrorBoundary,{fallback:(0,s.jsx)("span",{children:"bob"}),children:(0,s.jsx)(m,{value:i,onChange:r})})}),(0,s.jsx)("div",{className:l.Classes.DIALOG_FOOTER,children:(0,s.jsxs)("div",{className:l.Classes.DIALOG_FOOTER_ACTIONS,children:[(0,s.jsx)(l.Button,{onClick:e.onCancel,children:"Cancel"}),(0,s.jsx)(l.Button,{onClick:()=>e.onSubmit(i),intent:l.Intent.PRIMARY,className:"save-btn",children:"Save"})]})})]})}},36692:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleJsonEditor=void 0;const a=n(35250),s=n(50382),l=r(n(70079));t.SimpleJsonEditor=function(e){const[t,n]=l.default.useState(JSON.stringify(e.value,null,2)),[o,i]=l.default.useState(),r=(0,l.useCallback)((t=>{n(t.target.value);try{const n=JSON.parse(t.target.value);i(void 0),e.onChange(n)}catch(t){i(t.message)}}),[e]);return(0,a.jsx)(s.FormGroup,{label:e.label,intent:o?"danger":void 0,helperText:o,children:(0,a.jsx)(s.TextArea,{value:t,fill:!0,onChange:r})})}},7818:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildStructuredMacroEditorComp=t.MacroEditorFieldDefinitionRenderer=t.MacroEditorBaseValueComp=void 0;const o=n(35250),i=n(50382),r=n(36692),a=n(63463);function s(e){switch(e.config.value){case"number":return(0,o.jsx)(i.NumericInput,{value:e.value,onValueChange:t=>e.onChange(t)});case"string":return(0,o.jsx)(i.InputGroup,{value:e.value,onChange:t=>e.onChange(t.target.value)});case"json":return(0,o.jsx)(r.SimpleJsonEditor,{value:e.value,onChange:t=>e.onChange(t),label:e.config.label});case"boolean":return(0,o.jsx)(i.Checkbox,{checked:e.value,onChange:t=>e.onChange(t)});case"select":return(0,o.jsx)(i.HTMLSelect,{value:e.value,onChange:t=>e.onChange(t.target.value),children:e.config.items.map((e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value)))})}}function l(e){const{config:t}=e;return e.config.allowDynamic?(0,o.jsx)(a.ConfigurableInputEditor,{value:e.value,onChange:e.onChange,valueRenderer:n=>(0,o.jsx)(i.FormGroup,{label:`${t.label}:`,inline:!0,children:(0,o.jsx)(s,{value:n.value,onChange:n.onChange,config:e.config.type})}),modeLabel:`${e.config.label} mode:`,defaultStaticValue:e.config.defaultValue}):(0,o.jsx)(i.FormGroup,{label:`${t.label}:`,inline:!0,children:(0,o.jsx)(s,{value:e.value,onChange:e.onChange,config:e.config.type})})}t.MacroEditorBaseValueComp=s,t.MacroEditorFieldDefinitionRenderer=l,t.buildStructuredMacroEditorComp=function(e){return t=>(0,o.jsx)(o.Fragment,{children:e.fields.map((e=>(0,o.jsx)(l,{value:t.value[e.configKey],onChange:n=>t.onChange({...t.value,[e.configKey]:n}),config:e},e.configKey)))})}},25660:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(79354),t)},39936:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&__createBinding(t,e,n);return __setModuleDefault(t,e),t},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadMacroEditor=void 0;const jsx_runtime_1=__webpack_require__(35250),react_1=__importDefault(__webpack_require__(70079)),Blueprint=__importStar(__webpack_require__(50382)),BlueprintSelect=__importStar(__webpack_require__(70457)),buildStructuredMacroEditor_1=__webpack_require__(7818);function loadMacroEditor(macroNode){const w=window,{id:id,editorConfig:editorConfig}=macroNode,exportId=`__MacroNode__${id}`;if(w.React=react_1.default,w.Blueprint=Blueprint,w.BlueprintSelect=BlueprintSelect,"custom"!==editorConfig.type)return(0,buildStructuredMacroEditor_1.buildStructuredMacroEditorComp)(editorConfig);try{eval(editorConfig.editorComponentBundleContent);const compModule=w[exportId],comp=(null==compModule?void 0:compModule.default)||compModule;return comp?(w.Comp=comp,comp):function(){return(0,jsx_runtime_1.jsxs)("span",{children:["Failed to load macro node - please check that bundle that ",id," ","exposes an editable component to window.",exportId]})}}catch(e){return console.error(e),function(){return(0,jsx_runtime_1.jsxs)("span",{children:["Failed to load macro node - please check that bundle that ",id," ","exposes an editable component to window.",exportId]})}}}exports.loadMacroEditor=loadMacroEditor},7011:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MainInstanceEventsIndicator=void 0;const o=n(35250),i=n(30994),r=n(66189),a=n(50382);t.MainInstanceEventsIndicator=e=>{const{currentInsId:t,ancestorsInsIds:n}=e,{history:s,refreshHistory:l,resetHistory:u}=(0,r.useHistoryHelpers)(t),c=`main-indicator-${t}}`;return(0,o.jsx)("div",{className:"main-instance-events-indicator",children:(0,o.jsx)(a.Tooltip,{content:(0,r.calcHistoryContent)(s),children:(0,o.jsx)("span",{onMouseEnter:l,onMouseOut:u,id:(0,i.getMainInstanceIndicatorDomId)(t,n),className:"status-text","data-tip":"","data-html":!0,"data-for":c})})})}},22714:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(7011),t)},15617:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AddNodeMenu=t.AddNodeMenuFilterTree=void 0;const s=n(35250),l=n(50382),u=n(74762),c=a(n(26372)),d=r(n(70079)),p=n(43490),f=n(31745),m=n(17102),v=n(84418),g=n(95385),h=n(44470);t.AddNodeMenuFilterTree=l.Tree.ofType();function y(e,t,n){return[...e.external.map((e=>({id:e.module,label:e.module,hasCaret:!0,nodeData:{type:"external",module:e.module},isSelected:"external"===(null==t?void 0:t.type)&&t.module===e.module,isExpanded:n.has(e.module),childNodes:e.namespaces.map((o=>({id:`${e.module}/${o}`,label:o,hasCaret:!1,isSelected:"external"===(null==t?void 0:t.type)&&t.module===e.module&&t.namespace===o,isExpanded:n.has(`${e.module}/${o}`),nodeData:{type:"external",module:e.module,namespace:o}})))}))),{id:"internal",label:"Current Project",nodeData:{type:"internal"},isExpanded:n.has("internal"),hasCaret:!0,isSelected:"internal"===t.type,childNodes:e.internal.files.map((e=>({id:e,label:e,isSelected:"internal"===t.type&&t.file===e,hasCaret:!1,isExpanded:n.has(e),nodeData:{type:"internal",file:e}})))}]}function b(e){return/\.flyde(\.[jt]s)?$/.test(e.module)}t.AddNodeMenu=e=>{const{onRequestImportables:n,onAddNode:o,onClose:i}=e,[r,a]=d.default.useState(),[_,I]=d.default.useState([]),[x,C]=d.default.useState(new Set),[w,E]=d.default.useState(""),[j,S]=d.default.useState({type:"all"}),[N,O]=d.default.useState(null),[T,P]=d.default.useState(null),[D,k]=d.default.useState(null),M=(0,d.useCallback)((e=>{x.add(e.id),C(new Set(x))}),[x]),V=(0,d.useCallback)((e=>{x.delete(e.id),C(new Set(x))}),[x]),R=(0,d.useCallback)((e=>{o(e),i()}),[o,i]),{onInstallRuntimeRequest:A,reportEvent:L}=(0,p.usePorts)();(0,d.useEffect)((()=>{L("addNodeMenuOpen",{})}),[L]),(0,d.useEffect)((()=>{P(null==r?void 0:r.flatMap((e=>{var t,n,o,i;if(j)if("external"===j.type){if((e.module!==j.module||j.namespace)&&e.node.namespace!==j.namespace)return[]}else if("internal"===j.type&&(!b(e)||j.file&&e.module!==j.file))return[];if(w){const r=`${null!==(n=null===(t=e.node.searchKeywords)||void 0===t?void 0:t.join(" "))&&void 0!==n?n:[]} ${e.node.id} ${null!==(o=e.node.displayName)&&void 0!==o?o:""} ${null!==(i=e.node.namespace)&&void 0!==i?i:""} ${e.node.description}`.toLowerCase().indexOf(w.toLowerCase());return-1===r?[]:[{importable:e,score:r}]}return[{importable:e,score:1}]})).sort(((e,t)=>e.score-t.score)).map((e=>{let{importable:t}=e;return t})))}),[r,j,w]),(0,d.useEffect)((()=>{n().then((e=>{let{importables:t,errors:n}=e;I(n);const o=t.filter((e=>!b(e))).reduce(((e,t)=>{var n,o,i;null!==(n=e[i=t.module])&&void 0!==n||(e[i]=[]);const r=null!==(o=t.node.namespace)&&void 0!==o?o:"";return e[t.module].includes(r)||e[t.module].push(r),e}),{}),i=t.filter(b).map((e=>e.module));O({external:Object.entries(o).map((e=>{let[t,n]=e;return{module:t,namespaces:n}})),internal:{files:i}}),a(t),C(new Set(["internal",...Object.keys(o)]))}))}),[n]);const z=(0,d.useCallback)((e=>{switch(e.key){case"ArrowDown":case"ArrowUp":if(e.preventDefault(),T&&!D)return void k(T["ArrowDown"===e.key?0:T.length-1]);if(T&&D){const t=T.findIndex((e=>e===D));let n="ArrowDown"===e.key?t+1:t-1;n=n<0?T.length-1:n,n=n>=T.length?0:n,k(T[n])}break;case"Enter":D&&R(D)}}),[T,D,R]),q=(0,d.useCallback)((e=>{let{nodeData:t}=e;JSON.stringify(t)===JSON.stringify(j)?"external"===t.type?t.namespace?S({type:"external",module:t.module}):S({type:"all"}):"internal"===t.type&&(t.file?S({type:"internal"}):S({type:"all"})):S(t)}),[j]),$=!r||r.some((e=>e.module.includes("@flyde/stdlib"))),G=(0,d.useCallback)((()=>{A(),i()}),[i,A]);return(0,s.jsx)(l.Dialog,{isOpen:!0,title:"Add Node Menu",onClose:e.onClose,className:"add-node-menu",isCloseButtonShown:!0,children:(0,s.jsxs)("main",{className:(0,c.default)(l.Classes.DIALOG_BODY),children:[(0,s.jsxs)("header",{children:[(0,s.jsxs)("div",{className:"bp5-input-group",children:[(0,s.jsx)(h.Search,{}),(0,s.jsx)("input",{className:"bp5-input",type:"search",placeholder:"Search input",dir:"auto",autoFocus:!0,onChange:e=>E(e.target.value),value:w,onKeyDown:z})]}),$?null:(0,s.jsxs)(l.Callout,{intent:l.Intent.NONE,style:{marginTop:10},children:["Using built-in @flyde/stdlib. It's recommended to explicitly install it instead."," ",(0,s.jsx)(l.Button,{minimal:!0,small:!0,intent:l.Intent.PRIMARY,onClick:G,children:"Click here to install it using npm/yarn"})]})]}),(0,s.jsx)("div",{className:"content-wrapper",children:r?(0,s.jsxs)(d.default.Fragment,{children:[(0,s.jsxs)("aside",{children:[(0,s.jsxs)("div",{className:"filter-header",children:["Filter by package"," ",(0,s.jsx)(l.Tooltip,{content:(0,s.jsxs)("span",{children:["Click to learn more about how packages work in Flyde"," "]}),hoverCloseDelay:1500,children:(0,s.jsx)("a",{target:"_blank",href:"https://www.flyde.dev/docs/packages",rel:"noreferrer",children:(0,s.jsx)(l.Icon,{icon:(0,s.jsx)(h.Help,{}),intent:"primary",iconSize:12})})})]}),(0,s.jsx)("div",{className:"tree-container",children:(0,s.jsx)(t.AddNodeMenuFilterTree,{contents:y(N,j,x),onNodeCollapse:V,onNodeExpand:M,onNodeClick:q,className:l.Classes.ELEVATION_0})})]}),(0,s.jsx)("main",{children:T?0===T.length?(0,s.jsxs)("div",{className:"no-results",children:[(0,s.jsx)(g.AddNodeMenuResultsSummary,{filter:j,onChangeFilter:S,query:w,onChangeQuery:E,resultsCount:T.length}),(0,s.jsxs)(l.Callout,{className:"callout",intent:"primary",children:["Can't find a suitable node? Create one yourself!"," ",(0,s.jsx)("a",{href:"https://www.flyde.dev/docs/code-nodes",target:"_blank",rel:"noreferrer",children:"Learn more"})]})]}):(0,s.jsxs)(d.default.Fragment,{children:[(0,s.jsx)(g.AddNodeMenuResultsSummary,{filter:j,onChangeFilter:S,query:w,onChangeQuery:E,resultsCount:T.length}),(0,s.jsx)("div",{className:"results",children:T.map((e=>(0,s.jsx)(v.AddNodeMenuListItem,{importableNode:e,onAdd:R,selected:(null==D?void 0:D.node)===e.node,onSelect:k,onSetFilter:S},e.node.id+e.node.namespace+e.module)))})]}):(0,s.jsx)(m.Loader,{})})]}):(0,s.jsx)(m.Loader,{})}),_.length>0?(0,s.jsxs)(l.Callout,{intent:"warning",style:{marginTop:"10px"},children:["Found ",(0,u.simplePluralize)(_.length,"corrupt flow"),(0,s.jsx)(f.InfoTooltip,{content:_.map((e=>{let{path:t,message:n}=e;return`${t}: ${n}`})).join(", ")})," "]}):null]})})}},2470:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AddNodeMenuListItem=void 0;const s=n(35250),l=n(50382),u=a(n(26372)),c=r(n(70079));t.AddNodeMenuListItem=e=>{const{importableNode:t,onSetFilter:n,onAdd:o,onSelect:i}=e,{node:r,module:a}=t,{id:d,description:p,displayName:f}=r,m=c.default.useRef(null);c.default.useEffect((()=>{e.selected&&m.current&&m.current.scrollIntoView({block:"center"})}),[e.selected]);const v=(0,c.useCallback)((()=>{o(t)}),[o,t]),g=(0,c.useCallback)((()=>{i(t)}),[i,t]);return(0,s.jsxs)("div",{className:(0,u.default)("add-node-menu-list-item",{selected:e.selected}),ref:m,onClick:g,children:[(0,s.jsxs)("div",{className:"content",children:[(0,s.jsxs)("header",{children:[(0,s.jsx)("span",{className:"name",children:null!=f?f:d}),(0,s.jsxs)(l.Tag,{interactive:!0,onClick:()=>n({type:"external",module:a,namespace:r.namespace}),className:"source",minimal:!0,children:[a,r.namespace?` / ${r.namespace}`:null]})]}),(0,s.jsx)("div",{className:"description",children:p||(0,s.jsx)("em",{children:"No description"})})]}),(0,s.jsx)("aside",{children:(0,s.jsx)(l.Button,{onClick:v,children:"Add"})})]})}},84418:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(2470),t)},63582:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddNodeMenuResultsSummary=void 0;const o=n(35250),i=n(50382);t.AddNodeMenuResultsSummary=e=>{const{resultsCount:t,query:n,filter:r,onChangeFilter:a,onChangeQuery:s}=e;return(0,o.jsxs)("div",{className:"add-node-menu-results-summary",children:[t?`Showing ${t} result${t>1?"s":""}`:"No results found","\xa0",n?(0,o.jsxs)(o.Fragment,{children:["matching query\xa0",(0,o.jsxs)(i.Tag,{minimal:!0,interactive:!0,onRemove:()=>s(""),children:['"',n,'"']})]}):null,"all"===r.type?null:"external"===r.type?(0,o.jsxs)(o.Fragment,{children:["from \xa0",(0,o.jsxs)(i.Tag,{minimal:!0,interactive:!0,onRemove:()=>a({type:"all"}),children:["package ",r.module,r.namespace?` / ${r.namespace}`:null]})]}):(0,o.jsxs)(o.Fragment,{children:["from \xa0",(0,o.jsxs)(i.Tag,{minimal:!0,interactive:!0,onRemove:()=>a({type:"all"}),children:["\xa0this project ",r.file?` / ${r.file}`:null]})]})]})}},95385:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(63582),t)},90542:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(15617),t)},15742:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.NodesLibrary=void 0;const s=n(35250),l=n(50382),u=a(n(26372)),c=r(n(70079)),d=n(86125),p=n(90542),f=n(30653),m=n(77852),v=n(44470),g=n(65704),h=n(83651);t.NodesLibrary=(0,c.memo)((e=>{var t,n;const{groups:o}=e,[i,r]=c.default.useState(!1),[a,y]=c.default.useState(!1),b=(0,m.useIsFirstRender)(),[_,I]=c.default.useState(!1),{onRequestImportables:x}=(0,d.useDependenciesContext)(),C=(0,f.useDarkMode)(),[w,E]=(0,c.useState)(null!==(n=null===(t=o[0])||void 0===t?void 0:t.title)&&void 0!==n?n:"");(0,c.useEffect)((()=>{b||y(!0)}),[i]),(0,c.useEffect)((()=>{o.length&&E(o[0].title)}),[o]);const{boxShadow:j,onScrollHandler:S}=(0,g.useScrollWithShadow)(C);return(0,s.jsxs)("div",{className:(0,u.default)("nodes-library",{closed:i,open:!i,animate:a,dark:C}),children:[i?(0,s.jsx)("div",{className:"header",onClick:()=>r(!i),children:(0,s.jsx)("strong",{children:"Nodes Library"})}):null,(0,s.jsx)("div",{className:"minimize-btn-container",children:(0,s.jsx)(l.Button,{minimal:!0,small:!0,onClick:()=>r(!i),children:i?(0,s.jsx)(v.Maximize,{size:12}):(0,s.jsx)(v.Minimize,{size:12})})}),(0,s.jsx)("div",{className:"list",style:{boxShadow:j},onScroll:S,children:o.map(((t,n)=>(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:(0,u.default)("group-title",{open:w===t.title,selected:w===t.title}),onClick:()=>E(t.title),children:t.title}),(0,s.jsx)("div",{className:"group-items",children:t.nodes.map((t=>{var n,o;return(0,s.jsx)("div",{className:"group-item",onClick:()=>e.onAddNode({module:"@flyde/stdlib",node:t}),children:(0,s.jsx)(l.Tooltip,{content:t.description,portalClassName:"menu-tooltip",compact:!0,minimal:!0,children:(0,s.jsxs)("div",{className:"group-item-inner",children:[(0,s.jsx)(h.InstanceIcon,{icon:null===(n=t.defaultStyle)||void 0===n?void 0:n.icon}),null!==(o=t.displayName)&&void 0!==o?o:t.id]})})})}))})]})))}),(0,s.jsx)("div",{className:"view-all-container",children:(0,s.jsx)("div",{className:"view-all",children:(0,s.jsx)(l.Button,{minimal:!0,small:!0,onClick:()=>I(!0),intent:"primary",children:"View all"})})}),_?(0,s.jsx)(p.AddNodeMenu,{onRequestImportables:x,onAddNode:e.onAddNode,onClose:()=>I(!1)}):null]})}))},86997:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(15742),t)},90911:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RunFlowModal=void 0;const s=n(35250),l=r(n(70079)),u=a(n(51848)),c=n(50382),d=a(n(26372)),p=n(90680),f=n(31745),m=n(43490);t.RunFlowModal=l.memo((function(e){const{onClose:t,node:n}=e,{onRunFlow:o}=(0,m.usePorts)(),[i,r]=l.useState(0),[a,v]=(0,p.useLocalStorage)(`run-inputs-${n.id}`,Object.keys(n.inputs).reduce(((e,t)=>(e[t]=`Enter a value for input ${t}`,e)),{})),[g,h]=l.useState(JSON.stringify(a,null,2)),y=e=>{e&&e.updateOptions({lineNumbers:"off",minimap:{enabled:!1}})},b=l.useCallback((()=>{const e=JSON.parse(g);v(e),o(e,i),t()}),[g,v,o,i,t]),_=Object.keys(n.inputs),I=_.filter((e=>"required"!==n.inputs[e].mode)),x=l.useMemo((()=>_.length?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("strong",{children:"This node receives external inputs. Enter values for each input below:"}),(0,s.jsx)(u.default,{height:"80px",theme:"vs-dark",defaultLanguage:"json",value:g,onChange:e=>h(null!=e?e:""),onMount:y}),I.length>0?(0,s.jsxs)(c.Callout,{intent:c.Intent.NONE,children:["Note: input(s) ",(0,s.jsx)("code",{children:I.join(", ")})," are optional"]}):null]}):(0,s.jsx)("strong",{children:"This node does not receive any external inputs."})),[_.length,I,g]);return(0,s.jsxs)(c.Dialog,{isOpen:!0,onClose:e.onClose,className:"run-flow-modal",children:[(0,s.jsxs)("main",{className:(0,d.default)(c.Classes.DIALOG_BODY),onKeyDown:e=>{"Enter"===e.key&&e.metaKey&&b()},tabIndex:0,children:[x,(0,s.jsxs)("div",{className:"execution-delay-wrapper",children:[(0,s.jsxs)("label",{children:["Execution delay:"," ",(0,s.jsx)(f.InfoTooltip,{content:"Delay between each node execution. Useful for debugging."})]}),(0,s.jsx)(c.Slider,{value:i,onChange:r,min:0,labelStepSize:500,stepSize:100,labelRenderer:e=>`${e}ms`,max:1e3})]})]}),(0,s.jsx)("div",{className:c.Classes.DIALOG_FOOTER,children:(0,s.jsxs)("div",{className:c.Classes.DIALOG_FOOTER_ACTIONS,children:[(0,s.jsx)(c.Button,{onClick:t,children:"Close"}),(0,s.jsx)(c.Button,{onClick:b,intent:c.Intent.PRIMARY,className:"run-btn",children:"Run"})]})})]})}))},80589:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(90911),t)},38370:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionIndicator=void 0;const i=n(35250),r=n(50382),a=n(70079),s=n(30653),l=o(n(26372));t.SelectionIndicator=e=>{const{selection:t,onCenter:n,onGroup:o,onDelete:u}=e,c=(0,s.useDarkMode)(),d=(0,a.useMemo)((()=>{switch(t.type){case"input":return(0,i.jsxs)("span",{children:[(0,i.jsxs)("strong",{children:['"',t.pinId,'"']})," input selected"]});case"output":return(0,i.jsxs)("span",{children:[(0,i.jsxs)("strong",{children:['"',t.pinId,'"']})," output selected"]});case"instances":return(0,i.jsxs)("span",{children:[t.ids.length," instance",t.ids.length>1?"s":""," selected"]});case"connections":return(0,i.jsxs)("span",{children:[t.ids.length," connection",t.ids.length>1?"s":""," selected"]})}}),[t]),p={center:(0,i.jsx)(r.Button,{onClick:n,small:!0,minimal:!0,outlined:!0,children:"Center"}),group:(0,i.jsx)(r.Button,{onClick:o,small:!0,minimal:!0,outlined:!0,children:"Group"}),delete:(0,i.jsx)(r.Button,{onClick:()=>{switch(t.type){case"instances":case"connections":u(t.ids)}},small:!0,minimal:!0,outlined:!0,intent:"danger",children:"Delete"})},f={instances:[p.center,p.group,p.delete],connections:[p.delete],input:[p.center],output:[p.center]};return(0,i.jsxs)("div",{className:(0,l.default)("selection-indicator",{dark:c}),children:[d," ",f[t.type]]})}},8319:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(38370),t)},63521:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VisualNodeEditor=t.defaultBoardData=t.defaultViewPort=t.NODE_HEIGHT=void 0;const s=n(35250),l=r(n(70079)),u=n(74762),c=n(86553),d=n(65082),p=n(18420),f=n(26701),m=n(7047),v=n(53865),g=n(70079),h=n(68120),y=a(n(27942)),b=n(50382),_=n(66005),I=n(60190),x=n(71033),C=n(74762),w=n(99942),E=n(44338),j=n(561),S=n(84472),N=n(82232),O=n(65758),T=n(43490),P=a(n(26372)),D=n(25044),k=n(80510),M=n(2130),V=n(88593),R=n(97106),A=n(22714),L=n(3354),z=n(41032),q=n(30653),$=n(25660),G=n(8319),F=n(86997),H=n(80589),B=n(44470),U=n(68532),W=l.memo(b.Slider),J=()=>null;t.NODE_HEIGHT=28,t.defaultViewPort={pos:{x:0,y:0},zoom:1},t.defaultBoardData={selectedInstances:[],selectedConnections:[],viewPort:t.defaultViewPort,lastMousePos:{x:0,y:0}},t.VisualNodeEditor=l.memo(l.forwardRef(((e,n)=>{const{onChangeNode:o,nodeIoEditable:i,onCopy:r,onGoToNodeDef:a,onInspectPin:Y,boardData:Z,onChangeBoardData:Q,currentInsId:X,ancestorsInsIds:ee,node:te,resolvedDependencies:ne,queuedInputsData:oe,initialPadding:ie,disableScrolling:re}=e,{onImportNode:ae,libraryData:se}=(0,R.useDependenciesContext)(),le=(0,q.useDarkMode)(),{reportEvent:ue}=(0,T.usePorts)(),ce=e.parentViewport||t.defaultViewPort,[de,pe]=(0,g.useState)({...ne,[te.id]:te});(0,g.useEffect)((()=>{pe({...ne,[te.id]:te})}),[ne,te]);const{selectedConnections:fe,selectedInstances:me,from:ve,to:ge}=Z,{instances:he,connections:ye,inputsPosition:be,outputsPosition:_e,inputs:Ie,outputs:xe}=te,[Ce,we]=(0,g.useState)(),[Ee,je]=(0,g.useState)(),Se=void 0===ee,[Ne,Oe]=(0,g.useState)(),[Te,Pe]=(0,g.useState)(!1),[De,ke]=(0,g.useState)(!1),[Me,Ve]=(0,g.useState)(),[Re,Ae]=(0,g.useState)(),[Le,ze]=(0,g.useState)(),[qe,$e]=(0,g.useState)(),Ge=(0,g.useRef)();(0,f.useDidMount)((()=>{Ge.current=tt.current.querySelector(".inline-editor-portal-root")}));const Fe=(0,T.useConfirm)(),He=(0,T.usePrompt)(),Be=Z.viewPort,Ue=(0,g.useRef)(!0),[We,Je]=(0,g.useState)(null),Ke=l.useCallback((e=>{Q({viewPort:e})}),[Q]),Ye=l.useCallback(((e,t)=>Y(e,t)),[Y]),Ze=l.useCallback(((e,t,n)=>{const i=(0,k.handleConnectionCloseEditorCommand)(te,{from:e,to:t});o(i,(0,N.functionalChange)("close-connection")),Q({from:void 0,to:void 0}),ue("createConnection",{source:n})}),[o,Q,te,ue]),Qe=l.useCallback((async()=>{const e=await He("New visual node name?");if(!e)return;const{currentNode:t}=await(0,O.groupSelected)(Z.selectedInstances,te,e,"inline",He);o(t,(0,N.functionalChange)("group node")),Q({selectedInstances:[]}),(0,S.toastMsg)("Node grouped"),ue("groupSelected",{count:Z.selectedInstances.length})}),[He,Z.selectedInstances,te,o,Q,ue]);(0,g.useEffect)((()=>{if(Ne){const e=setTimeout((()=>{Oe(void 0)}),350);return()=>clearTimeout(e)}}),[Ne]);const[Xe,et]=(0,g.useState)();(0,g.useEffect)((()=>{(0,j.preloadMonaco)()}),[]);const tt=(0,g.useRef)(),nt=(0,y.default)(tt),ot=l.useRef({x:400,y:400}),it=(0,f.useBoundingclientrect)(tt)||I.vZero,rt=()=>{const e=(0,m.fitViewPortToNode)(te,de,nt);(0,m.animateViewPort)(Be,e,500,(e=>{Ke(e)}))},at=l.useCallback(((e,t)=>{const{to:n,from:o}=Z,i="input"===t?o:n,r="input"===t?n:o,a={pinId:e,insId:u.THIS_INS_ID},s="input"===t?{from:a}:{to:a};i&&i.pinId===e?Q({from:void 0,to:void 0}):r?"input"===t&&n?Ze(a,n,"nodeIoClick"):o&&Ze(o,a,"nodeIoClick"):Q(s)}),[Z,Q,Ze]),st=l.useCallback(((e,t,n)=>{const i=(0,v.produce)(te,(o=>{"input"===e?o.inputs[t].description=n:o.outputs[t].description=n}));o(i,(0,N.functionalChange)("Node io description"))}),[o,te]),lt=l.useCallback(((e,t,n)=>{const{from:o,to:i}=Z;if(ve&&ve.insId===e.id||ge&&ge.insId===e.id)Q({from:void 0,to:void 0});else if("input"===n){const n={insId:e.id,pinId:t};!i||i.pinId!==t||(0,u.isInternalConnectionNode)(i)&&i.insId!==e.id?ve?Ze(ve,n,"pinClick"):Q({to:n,selectedInstances:[],selectedConnections:[]}):Q({to:void 0})}else{const n={insId:e.id,pinId:t};!o||o.pinId!==t||(0,u.isInternalConnectionNode)(o)&&o.insId!==e.id?ge?Ze(n,ge,"pinClick"):Q({from:n,selectedInstances:[],selectedConnections:[]}):Q({from:void 0})}}),[Z,ve,Q,Ze,ge]);(0,g.useEffect)((()=>{if(!Te&&nt.width){const t=(0,m.fitViewPortToNode)(te,de,nt,ie);Ke(t);const n=setTimeout((()=>{const t=(0,m.fitViewPortToNode)(te,de,nt,ie);e.thumbnailMode||Ke(t),Pe(!0)}),100);return()=>clearTimeout(n)}}),[te,ie,nt,e.thumbnailMode,Te,de,Ke]);const ut=l.useCallback((()=>{const{selectedInstances:e}=Z,t=te.instances.filter((t=>e.includes(t.id))).map((e=>({...e,id:e.id+"-copy"}))),n=te.connections.filter((t=>{let{from:n,to:o}=t;return e.includes(n.insId)&&e.includes(o.insId)}));r({instances:t,connections:n})}),[Z,r,te]),ct=l.useCallback((()=>{const{newNode:t,newInstances:n}=(0,D.pasteInstancesCommand)(te,ot.current,e.clipboardData);o(t,(0,N.functionalChange)("paste instances")),Q({selectedInstances:n.map((e=>e.id)),selectedConnections:[]})}),[o,Q,te,e.clipboardData]),dt=l.useCallback((()=>{const e=te.id;Xe?"input"===Xe.type?Xe.ins.id===e?at(Xe.pin,"input"):lt(Xe.ins,Xe.pin,"input"):Xe.ins.id===e?at(Xe.pin,"output"):lt(Xe.ins,Xe.pin,"output"):console.warn("tried selecting closest with no pin nearby")}),[te.id,Xe,at,lt]),pt=l.useCallback(((e,t)=>{const n=Math.min(Math.max(e,.1),3),o="mouse"===t?ot.current:{x:Be.pos.x+nt.width/2,y:Be.pos.y+nt.height/2},i=(0,m.centerBoardPosOnTarget)(o,nt,n,Be);Ke({...Be,zoom:n,pos:i})}),[Ke,Be,nt]);(0,h.useHotkeys)("cmd+=",(e=>{pt(Be.zoom+.1,"hotkey"),e.preventDefault()}),{text:"Zoom in board",group:"Viewport Controls"},[Be,pt],Ue),(0,h.useHotkeys)("cmd+-",(e=>{pt(Be.zoom-.1,"hotkey"),e.preventDefault()}),{text:"Zoom out board",group:"Viewport Controls"},[pt,Be.zoom],Ue),(0,h.useHotkeys)("cmd+o",(e=>{e.preventDefault(),(0,S.toastMsg)("Ordering");const t=[];(0,w.orderVisualNode)(te,de,200,((e,n)=>{n%3==0&&t.push(e)})),(async()=>{for(;t.length;){const e=t.shift();(0,S.toastMsg)(`Step ${t.length}!`),await(0,u.delay)(200),o(e,(0,N.metaChange)("order-step")),(0,S.toastMsg)(`Step ${t.length}! done`)}})()}),{text:"Auto-layout (experimental)",group:"Misc."},[o,te,ne],Ue),(0,h.useHotkeys)("cmd+0",(e=>{pt(1),e.preventDefault()}),{text:"Reset zoom",group:"Viewport Controls"},[Be,pt],Ue);const ft=()=>{Q({from:void 0,to:void 0,selectedInstances:[],selectedConnections:[]})},mt=l.useCallback(((e,t)=>{we(e.id),o({...te},(0,N.metaChange)("drag-start"))}),[o,te]),vt=l.useCallback(((e,t,n)=>{const{newValue:i,newSelected:r}=(0,m.handleInstanceDrag)(te,e,n,t,me,Ce);o(i,(0,N.metaChange)("drag-move")),r&&Q({selectedInstances:r,selectedConnections:[]})}),[Ce,o,Q,me,te]),gt=l.useCallback(((e,t)=>{t.preventDefault(),t.stopPropagation(),we(void 0)}),[]),ht=l.useCallback(((e,t)=>{t.preventDefault(),t.stopPropagation(),we(u.THIS_INS_ID)}),[]),yt=l.useCallback((async(t,n,o,i)=>{o.preventDefault(),o.stopPropagation();const{x:r,y:a}=i,s=(0,v.produce)(te,(e=>{"input"===t?e.inputsPosition[n]={x:r,y:a}:e.outputsPosition[n]={x:r,y:a}}));e.onChangeNode(s,(0,N.metaChange)("node-io-drag-move"))}),[e,te]),bt=l.useCallback((async(e,t,n,o)=>{n.preventDefault(),n.stopPropagation(),we(void 0)}),[]),_t=l.useCallback(((e,t)=>{const n=(0,m.getConnectionId)(e),o=fe.includes(n)?fe.filter((e=>e!==n)):[...t.shiftKey?fe:[],n];Q({selectedConnections:o,selectedInstances:[]})}),[Q,fe]),It=l.useCallback(((e,t)=>{let{id:n}=e;const o=t.shiftKey?me.filter((e=>e!==n)):[],i=t.shiftKey?[...me,n]:[n],r=me.includes(n)?o:i;Q({selectedInstances:r,selectedConnections:[],from:void 0,to:void 0})}),[Q,me]),xt=l.useCallback((()=>{const e=te.instances.map((e=>e.id));Q({selectedInstances:e,selectedConnections:[],from:void 0,to:void 0})}),[Q,te.instances]),Ct=l.useCallback((e=>{const t=ye.filter((t=>{let{from:n,to:o}=t;return!e.includes((0,m.getConnectionId)({from:n,to:o}))&&!e.includes(n.insId)&&!e.includes(o.insId)})),n=(0,v.produce)(te,(n=>{n.connections=t,n.instances=n.instances.filter((t=>!e.includes(t.id)))}));Q({selectedInstances:[],selectedConnections:[]}),o(n,(0,N.functionalChange)("delete-ins"))}),[ye,o,Q,te]),wt=l.useCallback((e=>{Ct([e.id])}),[Ct]),Et=l.useCallback(((e,t)=>{const n=(0,v.produce)(te,(n=>{"input"===e?(delete n.inputs[t],n.connections=n.connections.filter((e=>!((0,u.isExternalConnectionNode)(e.from)&&e.from.pinId===t)))):(n.connections=n.connections.filter((e=>!((0,u.isExternalConnectionNode)(e.to)&&e.to.pinId===t))),n.completionOutputs=(n.completionOutputs||[]).map((e=>e.split("+").filter((e=>e!==t)).join("+"))).filter((e=>!!e)),delete n.outputs[t])}));ve&&ve.insId===u.THIS_INS_ID&&ve.pinId===t?Q({from:void 0}):ge&&ge.insId===u.THIS_INS_ID&&ge.pinId===t&&Q({to:void 0}),o(n,(0,N.functionalChange)("remove io pin"))}),[te,ve,ge,o,Q]),jt=l.useCallback((async()=>{const{selectedConnections:e,selectedInstances:t,from:n,to:o}=Z,i=[...t,...e];0===i.length?n&&(0,u.isExternalConnectionNode)(n)?await Fe(`Are you sure you want to remove main input ${n.pinId}?`)&&Et("input",n.pinId):o&&(0,u.isExternalConnectionNode)(o)&&await Fe(`Are you sure you want to remove main output ${o.pinId}?`)&&Et("output",o.pinId):Ct(i)}),[Fe,Z,Ct,Et]),St=l.useCallback(((e,t,n)=>{const i=(0,m.getInstancePinConfig)(te,e.id,t),r=(0,u.isStickyInputPinConfig)(i)?(0,C.queueInputPinConfig)():(0,u.stickyInputPinConfig)();o((0,m.changePinConfig)(te,e.id,t,r),(0,N.functionalChange)("toggle-sticky")),ue("togglePinSticky",{isSticky:(0,u.isStickyInputPinConfig)(r)})}),[o,te,ue]),Nt=l.useCallback((()=>{const{newNode:e,newInstances:t}=(0,M.handleDuplicateSelectedEditorCommand)(te,me);o(e,(0,N.functionalChange)("duplicated instances")),Q({selectedInstances:t.map((e=>e.id))})}),[o,Q,te,me]),Ot=l.useCallback((e=>{const t=e.nativeEvent.target;if(0!==e.button)return;if(!K(e.nativeEvent,te.id))return;if(t&&["board-editor-inner","connections-view"].includes(t.getAttribute("class"))){const t={x:e.clientX,y:e.clientY},n=(0,I.vSub)(t,it),o=(0,m.domToViewPort)(n,Be,ce);je({from:o,to:o})}}),[te.id,Be,it,ce]),Tt=l.useCallback((e=>{if(Je(null),K(e.nativeEvent,te.id)&&Ee){if((0,m.calcSelectionBoxArea)(Ee)>50){const t=(0,m.getInstancesInRect)(Ee,de,Be,Qt.current,te.instances,it,ce),n=e.shiftKey?[...me,...t]:t;Q({selectedInstances:n})}je(void 0)}}),[te.id,te.instances,Ee,de,Be,it,ce,me,Q]),Pt=l.useCallback((e=>{if(!K(e.nativeEvent,te.id))return void(Ue.current=!1);Ue.current=!0;const t={x:e.clientX,y:e.clientY},n=(0,I.vSub)(t,(0,I.vAdd)(it,I.vZero)),o=(0,m.domToViewPort)(n,Be,ce);Ee&&je({...Ee,to:o});const i=(0,m.findClosestPin)(te,de,n,it,X,ee,Be),r=Xe;if(i){(!r||r.ins!==i.ins||r.ins===i.ins&&r.pin!==i.pin)&&et({ins:i.ins,type:i.type,pin:i.id})}ot.current=o,Q({lastMousePos:ot.current})}),[te,it,Be,ce,Ee,de,X,ee,Xe,Q]),Dt=l.useCallback((e=>{var t;"bp5-menu"!==(null===(t=e.relatedTarget)||void 0===t?void 0:t.className)&&(et(void 0),Ue.current=!1)}),[]),kt=l.useCallback(((e,t)=>{if(t){if((0,u.isMacroNodeInstance)(e))return void(0,S.toastMsg)("Cannot edit macro node instance");const t=(0,u.isInlineNodeInstance)(e)?e.node:(0,z.safelyGetNodeDef)(e.nodeId,de);if(!t)throw new Error("Impossible state inspecting inexisting node");if(!(0,u.isVisualNode)(t))return void(0,S.toastMsg)("Cannot inspect a non visual node","warning");ze({insId:`${X}.${e.id}`,node:t})}else if((0,u.isRefNodeInstance)(e)){const t=(0,z.safelyGetNodeDef)(e,de);a(t)}else{if((0,u.isInlineNodeInstance)(e)){const t=e.node;return void((0,u.isVisualNode)(t)?ze({insId:e.id,node:t}):(0,S.toastMsg)("Editing this type of node is not supported"))}(0,u.isResolvedMacroNodeInstance)(e)?$e({ins:e}):(0,S.toastMsg)("Editing this type of node is not supported")}}),[a,de,X]),Mt=l.useCallback((e=>{if((0,u.isInlineNodeInstance)(e)){const t=e.node;if(!(0,u.isVisualNode)(t))return void(0,S.toastMsg)("Not supported","warning");const n=(0,v.produce)(te,(n=>{n.instances=n.instances.filter((t=>t.id!==e.id)),n.connections=n.connections.filter((t=>{let{from:n,to:o}=t;return n.insId!==e.id&&o.insId!==e.id})),n.instances.push(...t.instances),n.connections.push(...t.connections.filter((e=>(0,u.isInternalConnectionNode)(e.from)&&(0,u.isInternalConnectionNode)(e.to))))}));o(n,{type:"functional",message:"ungroup"}),Q({selectedInstances:[]})}else(0,S.toastMsg)("Cannot ungroup an imported group")}),[te,o,Q]),Vt=l.useCallback((async e=>{}),[]),Rt=l.useCallback(((e,t)=>{if(!t)return;const n=(0,v.produce)(te,(n=>{var o;"input"===e?(te.inputs||(n.inputs={}),n.inputs[t]=(0,u.nodeInput)(),n.inputsPosition[t]=ot.current):(te.outputs||(n.outputs={}),n.outputs[t]=(0,u.nodeOutput)(),n.outputsPosition[t]=ot.current,(null===(o=n.completionOutputs)||void 0===o?void 0:o.length)&&(0,S.toastMsg)("Note that this node has explicit completion outputs set. You may need to update them."))}));o(n,(0,N.functionalChange)("add new io pin")),ue("addIoPin",{type:e}),Ve(void 0)}),[te,o,ue]),At=l.useCallback((()=>{Ve(void 0)}),[]),Lt=l.useCallback((async()=>{var e;const t=null===(e=te.completionOutputs)||void 0===e?void 0:e.join(","),n=await He("Edit completion outputs",t);if((0,p.isDefined)(n)&&null!==n){const e=(0,v.produce)(te,(e=>{e.completionOutputs=""===n?void 0:n.split(",")}));o(e,(0,N.functionalChange)("change node completions")),ue("editCompletionOutputs",{count:n?n.split(",").length:0})}}),[He,o,te,ue]),zt=l.useCallback((async()=>{var e;const t=null===(e=te.reactiveInputs)||void 0===e?void 0:e.join(","),n=await He("Edit reactive inputs",t);if((0,p.isDefined)(n)&&null!==n){const e=(0,v.produce)(te,(e=>{e.reactiveInputs=""===n?void 0:n.split(",")}));o(e,(0,N.functionalChange)("change reactive inputs")),ue("editReactiveInputs",{count:n?n.split(",").length:0})}}),[He,o,te,ue]),qt=l.useCallback((async()=>{const e=await He("Description?",te.description),t=(0,v.produce)(te,(t=>{t.description=e}));o(t,(0,N.functionalChange)("Edit node description"))}),[He,o,te]),$t=l.useCallback((e=>{const t=(0,v.produce)(te,(t=>{t.defaultStyle=e}));o(t,(0,N.functionalChange)("change default style")),ue("changeStyle",{isDefault:!0})}),[o,te,ue]),Gt=l.useCallback((async(e,t)=>{const n=await He("New name?",t)||t,i=(0,m.handleIoPinRename)(te,e,t,n);o(i,(0,N.functionalChange)("rename io pin"))}),[te,o,He]),Ft=l.useCallback(((e,t)=>{const n=(0,m.handleChangeNodeInputType)(te,e,t);o(n,(0,N.functionalChange)("toggle io pin optional"))}),[te,o]),Ht=l.useCallback((async e=>{const t=await ae(e),n=(0,I.vSub)(ot.current,{x:200,y:50*Be.zoom}),i=(0,u.isMacroNodeDefinition)(e.node)?(0,m.createNewMacroNodeInstance)(e.node,0,n):(0,m.createNewNodeInstance)(e.node.id,0,n,t),r=(0,v.produce)(te,(e=>{e.instances.push(i)})),a=(0,v.produce)(Z,(e=>{e.selectedInstances=[i.id]}));o(r,(0,N.functionalChange)("add new instance")),Q(a),(0,u.isResolvedMacroNodeInstance)(i)&&setTimeout((()=>{$e({ins:i})}),100),ue("addNode",{nodeId:e.node.id,source:"actionMenu"})}),[Z,te,o,Q,ae,ue,Be.zoom]),Bt=()=>{const t=Z.from;return(0,p.entries)(Ie).map((n=>{let[o,r]=n;return(0,s.jsx)(_.NodeIoView,{currentInsId:X,ancestorInsIds:e.ancestorsInsIds,type:"input",pos:be[o]||{x:0,y:0},id:o,onDelete:i?Et:void 0,onRename:i?Gt:void 0,onDblClick:Kt,closest:!(!Xe||"input"!==Xe.type||Xe.ins.id!==te.id||Xe.pin!==o),connected:!1,inputMode:r.mode,onChangeInputMode:Ft,viewPort:Be,onDragStart:ht,onDragEnd:bt,onDragMove:yt,onSelect:at,onSetDescription:st,selected:(null==t?void 0:t.pinId)===o,description:r.description,onMouseUp:wn,onMouseDown:Cn},o)}))},Ut=()=>{const{to:t}=Z;return(0,p.entries)(xe).map((n=>{let[o,r]=n;return(0,s.jsx)(_.NodeIoView,{currentInsId:X,ancestorInsIds:e.ancestorsInsIds,type:"output",pos:_e[o]||{x:0,y:0},id:o,onDelete:i?Et:void 0,onRename:i?Gt:void 0,closest:!(!Xe||"output"!==Xe.type||Xe.ins.id!==te.id||Xe.pin!==o),connected:!1,viewPort:Be,onDragStart:ht,onDragEnd:bt,onDragMove:yt,onSelect:at,onSetDescription:st,description:r.description,selected:(null==t?void 0:t.pinId)===o,onMouseUp:wn,onMouseDown:Cn},o)}))},Wt=()=>{if(Ee){const{from:e,to:t}=Ee,n=(0,m.logicalPosToRenderedPos)(e,Be),o=(0,m.logicalPosToRenderedPos)(t,Be),{x:i,y:r,w:a,h:l}=(0,m.getSelectionBoxRect)(n,o);return(0,s.jsx)("div",{className:"selection-box",style:{top:r,left:i,width:a,height:l}})}return null},Jt=l.useCallback((async(e,t,n,o)=>{if("input"===n);else{const i=(0,z.safelyGetNodeDef)(e,de);if(!(0,u.getNodeOutputs)(i)[t])throw new Error("Dbl clicked on un-existing pin");Ae({pos:{x:o.clientX,y:o.clientY},ins:e,targetNode:i,pinId:t,pinType:n})}}),[de]),Kt=l.useCallback((async(e,t)=>{if(!te.inputs[e])throw new Error("Dbl clicked on un-existing pin");Ae({pos:{x:t.clientX,y:t.clientY},pinId:e,pinType:"input",targetNode:te})}),[te]),Yt=l.useCallback((e=>{if(e.metaKey||e.ctrlKey){const t=-.005*e.deltaY;pt(Be.zoom+t,"mouse"),e.preventDefault(),e.stopPropagation()}else{if(re)return;const t=e.deltaX,n=e.deltaY,o=(0,v.produce)(Be,(e=>{e.pos.x=e.pos.x+t/e.zoom,e.pos.y=e.pos.y+n/e.zoom}));Ke(o),e.stopPropagation(),e.preventDefault()}}),[re,pt,Ke,Be]);(0,g.useEffect)((()=>{const{current:e}=tt;if(e)return e.addEventListener("wheel",Yt),()=>{e.removeEventListener("wheel",Yt)}}),[Yt]);const Zt={backgroundPositionX:(0,m.roundNumber)(-Be.pos.x*Be.zoom),backgroundPositionY:(0,m.roundNumber)(-Be.pos.y*Be.zoom),backgroundSize:(0,m.roundNumber)(10*Be.zoom)+"px"},Qt=l.useRef(new Map);l.useEffect((()=>{const e=he.reduce(((e,t)=>{const n=(0,z.safelyGetNodeDef)(t,de);return n&&e.set(t.id,(0,u.keys)((0,u.getNodeInputs)(n))),e}),new Map),t=he.reduce(((e,t)=>{const n=(0,z.safelyGetNodeDef)(t,de);return n&&e.set(t.id,(0,u.keys)((0,u.getNodeOutputs)(n))),e}),new Map);e.set(u.THIS_INS_ID,(0,u.keys)(te.outputs)),t.set(u.THIS_INS_ID,(0,u.keys)(te.inputs));const n=ye.filter((n=>{const o=e.get(n.to.insId)&&e.get(n.to.insId).includes(n.to.pinId),i=t.get(n.from.insId)&&t.get(n.from.insId).includes(n.from.pinId);return!(o&&i)}));if(n.length>0){(0,S.toastMsg)(`${n.length} orphan connections removed`,"warning"),console.warn(`${n.length} orphan connections removed`,n);const e=(0,v.produce)(te,(e=>{e.connections=te.connections.filter((e=>!n.includes(e)))}));o(e,(0,N.functionalChange)("prune orphan connections"))}}),[he,o,ye,te,de]),l.useEffect((()=>{let e=[];const t=(0,v.produce)(te,(t=>{t.instances=t.instances.map((t=>{const n=(0,z.safelyGetNodeDef)(t,de);if(n){const o=(0,u.getNodeInputs)(n),i=(0,u.getNodeOutputs)(n);if(t.visibleInputs){const n=t.visibleInputs.filter((e=>!o[e]));n.length>0&&(t.visibleInputs=void 0,e.push(...n))}if(t.visibleOutputs){const n=t.visibleOutputs.filter((e=>!i[e]));n.length>0&&(t.visibleOutputs=void 0,e.push(...n))}}return t}))}));e.length>0&&((0,S.toastMsg)(`Found ${e.length} invalid visible inputs/outputs: ${e.join(", ")}. Resetting to full list`,"warning"),o(t,(0,N.functionalChange)("reset corrupt visible inputs/outputs")))}),[he,o,te,de]),(0,g.useEffect)((()=>{const e=new Map(he.map((e=>[e.id,e])));Qt.current=ye.reduce(((t,n)=>{const o=t.get(n.to.insId)||{},i=o[n.to.pinId]||[],r={...o,[n.to.pinId]:[...i,e.get(n.from.insId)]};return t.set(n.to.insId,r),t}),new Map)}),[ye,he]);const Xt=l.useCallback((()=>{Ae(void 0)}),[]),en=l.useCallback((async e=>{if(!Re)throw new Error("impossible state - quick add menu invoked but not available");const{ins:t,pinId:n}=Re;switch(e.type){case"import":case"node":{const i="import"===e.type?await ae(e.importableNode):de,r="import"===e.type?e.importableNode.node:e.node,a=(0,m.createNewNodeInstance)(r.id,100,ot.current,i);if(a){const e=(0,v.produce)(te,(e=>{e.instances.push(a),e.connections.push({from:{insId:t?t.id:u.THIS_INS_ID,pinId:n},to:{insId:a.id,pinId:u.TRIGGER_PIN_ID}})}));o(e,(0,N.functionalChange)("add-item-quick-menu")),Xt()}ue("addNode",{nodeId:r.id,source:"quickAdd"});break}case"value":if(!t)return void(0,S.toastMsg)("Cannot add value to main input")}}),[Re,de,ue,te,o,Xt,ae]),tn=l.useCallback((async()=>{const e=JSON.stringify(te);await navigator.clipboard.writeText(e),S.AppToaster.show({message:"Copied!"})}),[te]),nn=l.useCallback((()=>{var e,t;const n=i?"":" (cannot edit main node, only visual)";return(0,s.jsxs)(b.Menu,{children:[(0,s.jsx)(b.MenuItem,{text:`New main input ${n}`,onMouseDown:e=>e.stopPropagation(),onClick:(0,p.preventDefaultAnd)((()=>Ve("input"))),disabled:!i}),(0,s.jsx)(b.MenuItem,{onMouseDown:e=>e.stopPropagation(),text:`New main output ${n}`,onClick:(0,p.preventDefaultAnd)((()=>Ve("output"))),disabled:!i}),(0,s.jsx)(b.MenuItem,{onMouseDown:e=>e.stopPropagation(),text:"Integrate with existing code (docs link)",href:"https://www.flyde.dev/docs/integrate-flows/",target:"_blank",disabled:!i}),(0,s.jsx)(b.MenuItem,{onMouseDown:e=>e.stopPropagation(),text:"Copy node to clipboard",onClick:(0,p.preventDefaultAnd)(tn)}),(0,s.jsx)(b.MenuItem,{onMouseDown:e=>e.stopPropagation(),text:`Edit Completion Outputs (${(null===(e=te.completionOutputs)||void 0===e?void 0:e.join(","))||"n/a"})`,onClick:(0,p.preventDefaultAnd)((()=>Lt()))}),(0,s.jsx)(b.MenuItem,{onMouseDown:e=>e.stopPropagation(),text:`Edit Reactive inputs (${(null===(t=te.reactiveInputs)||void 0===t?void 0:t.join(","))||"n/a"})`,onClick:(0,p.preventDefaultAnd)((()=>zt()))}),(0,s.jsx)(b.MenuItem,{onMouseDown:e=>e.stopPropagation(),text:"Edit description",onClick:(0,p.preventDefaultAnd)((()=>qt()))}),(0,s.jsx)(b.MenuDivider,{}),(0,s.jsx)(b.MenuItem,{text:"Default Style",children:(0,s.jsx)(V.NodeStyleMenu,{style:te.defaultStyle,onChange:$t,promptFn:He})})]})}),[i,tn,te.completionOutputs,te.reactiveInputs,te.defaultStyle,$t,He,Lt,zt,qt]);(0,h.useHotkeys)("shift+c",rt,{text:"Center viewport",group:"Viewport Controls"},[],Ue),(0,h.useHotkeys)("cmd+c",ut,{text:"Copy instances",group:"Editing"},[],Ue),(0,h.useHotkeys)("cmd+v",ct,{text:"Paste instances",group:"Editing"},[],Ue),(0,h.useHotkeys)("esc",ft,{text:"Clear selections",group:"Selection"},[],Ue),(0,h.useHotkeys)("backspace",jt,{text:"Delete instances",group:"Editing"},[],Ue),(0,h.useHotkeys)("shift+d",Nt,{text:"Duplicate selected instances",group:"Editing"},[],Ue),(0,h.useHotkeys)("cmd+a",xt,{text:"Select all",group:"Selection"},[],Ue),(0,h.useHotkeys)("s",dt,{text:"Select pin closest to mouse",group:"Selection"},[],Ue);const on=l.useCallback(((e,t)=>{if(!Le)throw new Error("impossible state");const n=(0,v.produce)(te,(t=>{const n=t.instances.find((e=>e.id===Le.insId));if(!n||!(0,u.isInlineNodeInstance)(n))throw new Error("impossible state");n.node=e}));o(n,(0,N.functionalChange)("Inner change: "+t.message)),ze((t=>({...t,node:e})))}),[o,Le,te]),[rn,an]=(0,g.useState)({selectedInstances:[],selectedConnections:[],viewPort:t.defaultViewPort,lastMousePos:{x:0,y:0}}),sn=l.useCallback((e=>an((t=>({...t,...e})))),[]),ln=n=>Le&&Le.insId===n.id?{currentInsId:Le.insId,ancestorsInsIds:(0,u.fullInsIdPath)(X,ee),boardData:rn,onChangeBoardData:sn,resolvedDependencies:ne,onCopy:r,clipboardData:e.clipboardData,onInspectPin:e.onInspectPin,onGoToNodeDef:e.onGoToNodeDef,nodeIoEditable:e.nodeIoEditable,node:Le.node,onChangeNode:on,parentViewport:t.defaultViewPort,parentBoardPos:it,onExtractInlineNode:e.onExtractInlineNode,queuedInputsData:e.queuedInputsData}:void 0,un=()=>{if(ve&&("input"===(null==Xe?void 0:Xe.type)&&(null==Xe?void 0:Xe.ins.id)!==te.id||(null==Xe?void 0:Xe.ins.id)===te.id&&"output"===(null==Xe?void 0:Xe.type))){const e=Xe.ins.id===te.id?{pinId:Xe.pin,insId:u.THIS_INS_ID}:{insId:Xe.ins.id,pinId:Xe.pin};if(!(0,u.isInternalConnectionNode)(e)&&!(0,u.isInternalConnectionNode)(ve))return;return{from:ve,to:e}}if(ge&&("output"===(null==Xe?void 0:Xe.type)&&(null==Xe?void 0:Xe.ins.id)!==te.id||(null==Xe?void 0:Xe.ins.id)===te.id&&"input"===(null==Xe?void 0:Xe.type))){const e=Xe.ins.id===te.id?{pinId:Xe.pin,insId:u.THIS_INS_ID}:{insId:Xe.ins.id,pinId:Xe.pin};if(!(0,u.isInternalConnectionNode)(ge)&&!(0,u.isInternalConnectionNode)(e))return;return{from:e,to:ge}}},cn=()=>{const e=un();if(e){const{from:t,to:n}=e;return{connection:{from:t,to:n},type:ye.some((t=>(0,u.connectionDataEquals)(t,e)))?"future-remove":"future-add"}}},dn=l.useCallback(((e,t)=>{const n=(0,v.produce)(te,(n=>{n.instances=n.instances.map((n=>n.id===e.id?{...n,visibleInputs:t}:n))}));o(n,(0,N.functionalChange)("change instance visible inputs"))}),[te,o]),pn=l.useCallback(((e,t)=>{const n=(0,v.produce)(te,(n=>{n.instances=n.instances.map((n=>n.id===e.id?{...n,style:t}:n))}));o(n,(0,N.functionalChange)("change instance style")),ue("changeStyle",{isDefault:!1})}),[o,te,ue]),fn=l.useCallback(((e,t)=>{const n=(0,v.produce)(te,(n=>{n.instances=n.instances.map((n=>n.id===e.id?{...n,visibleOutputs:t}:n))}));o(n,(0,N.functionalChange)("change instance visible outputs"))}),[te,o]),mn=l.useCallback(((e,t)=>{const n=(0,v.produce)(te,(n=>{n.instances=n.instances.map((n=>n.id===e.id?{...n,displayName:t}:n))}));o(n,(0,N.functionalChange)("change instance display name"))}),[te,o]);l.useImperativeHandle(n,(()=>({centerInstance(e){const t=te.instances.find((t=>t.id===e));if(t){const e=(0,I.vSub)(t.pos,(0,I.vec)(nt.width/2,nt.height/2));Ke({...Be,pos:e})}},centerViewPort(){rt()},getViewPort:()=>Be,clearSelection:()=>{ft()}})));const[vn,gn]=l.useState([]),hn=ye.filter((e=>{const t=un();return!t||!(0,u.connectionDataEquals)(t,e)})),yn=l.useCallback((()=>{ze(void 0),an(t.defaultBoardData)}),[]),bn=l.useCallback((e=>{const t=(0,v.produce)(te,(t=>{const n=t.connections.find((t=>(0,u.connectionDataEquals)(t,e)));n.hidden=!n.hidden}));o(t,(0,N.functionalChange)("toggle connection hidden"))}),[o,te]),_n=l.useCallback((e=>{const t=(0,v.produce)(te,(t=>{t.connections=t.connections.filter((t=>!(0,u.connectionDataEquals)(t,e)))}));o(t,(0,N.functionalChange)("remove connection"))}),[o,te]),In=l.useCallback(((e,t,n)=>{Je("input"===n?{to:(0,u.connectionNode)(e.id,t),from:void 0}:{from:(0,u.connectionNode)(e.id,t),to:void 0})}),[]),xn=l.useCallback(((e,t,n)=>{We&&(We.from&&"input"===n?Ze(We.from,(0,u.connectionNode)(e.id,t),"pinDrag"):We.to&&"output"===n&&Ze((0,u.connectionNode)(e.id,t),We.to,"pinDrag")),Je(null)}),[We,Ze]),Cn=l.useCallback(((e,t)=>{}),[]),wn=l.useCallback(((e,t)=>{We&&(We.from&&"output"===t?Ze(We.from,(0,u.externalConnectionNode)(e),"nodeIoPinDrag"):We.to&&"input"===t&&Ze((0,u.externalConnectionNode)(e),We.to,"nodeIoPinDrag"))}),[We,Ze]),En=l.useCallback((e=>{const t=(0,v.produce)(te,(t=>{const n=t.instances.find((e=>e.id===qe.ins.id));if(!n||!(0,u.isMacroNodeInstance)(n))throw new Error("Impossible state");n.macroData=e}));o(t,(0,N.functionalChange)("save macro instance")),$e(void 0)}),[te,o,qe]),jn=l.useMemo((()=>ve?{type:"input",pinId:ve.pinId}:ge?{type:"output",pinId:ge.pinId}:me.length>0?{type:"instances",ids:me}:fe.length>0?{type:"connections",ids:fe}:void 0),[me,ve,ge]),Sn=l.useCallback((()=>{if(jn){const{type:e}=jn,t=(()=>{switch(e){case"instances":{const e=te.instances.find((e=>me.includes(e.id)));if(e)return e.pos;break}case"input":{const e=be[jn.pinId];if(e)return e;break}case"output":{const e=_e[jn.pinId];if(e)return e;break}}})(),n=(0,m.fitViewPortToRect)({x:t.x,y:t.y,w:1,h:1},nt);n.zoom=Be.zoom,(0,m.animateViewPort)(Be,n,500,(e=>{Ke(e)}))}}),[be,te.instances,_e,me,jn,Ke,Be,nt]),Nn=l.useCallback((()=>{ke(!1)}),[]),On=l.useCallback((()=>{ke(!0)}),[]);try{return(0,s.jsxs)(b.ContextMenu,{className:(0,P.default)("visual-node-editor",e.className,{dark:le}),"data-id":te.id,content:nn(),disabled:!Ue.current,children:[(0,s.jsxs)("main",{className:"board-editor-inner",onMouseDown:Ot,onMouseUp:Tt,onMouseMove:Pt,onMouseLeave:Dt,ref:tt,style:Zt,children:[(0,s.jsx)(l.Fragment,{children:(0,s.jsx)(E.LayoutDebugger,{vp:Be,node:te,extraDebug:m.emptyList,mousePos:ot.current})}),(0,s.jsx)(d.ConnectionView,{resolvedNodes:de,currentInsId:X,ancestorsInsIds:ee,size:nt,node:te,boardPos:it,instances:he,connections:hn,futureConnection:cn(),onDblClick:u.noop,viewPort:Be,parentVp:ce,selectedInstances:me,selectedConnections:fe,toggleHidden:bn,removeConnection:_n,onSelectConnection:_t,lastMousePos:ot.current,draggedSource:We}),Bt(),he.map((t=>{var n,o,i,r,a;return(0,s.jsx)(c.InstanceView,{onUngroup:Mt,onExtractInlineNode:Vt,connectionsPerInput:Qt.current.get(t.id)||m.emptyObj,node:(0,z.safelyGetNodeDef)(t,de),ancestorsInsIds:(0,u.fullInsIdPath)(X,ee),onPinClick:lt,onPinDblClick:Jt,onDragStart:mt,onDragEnd:gt,resolvedDeps:de,onDragMove:vt,onDblClick:kt,onSelect:It,onToggleSticky:St,selected:-1!==me.indexOf(t.id),dragged:Ce===t.id,onInspectPin:Ye,selectedInput:ge&&(0,u.isInternalConnectionNode)(ge)&&ge.insId===t.id?ge.pinId:void 0,selectedOutput:ve&&(0,u.isInternalConnectionNode)(ve)&&ve.insId===t.id?ve.pinId:void 0,closestPin:Xe&&Xe.ins.id===t.id?Xe:void 0,queuedInputsData:null!==(n=oe[t.id])&&void 0!==n?n:m.emptyObj,instance:t,connections:ye,onTogglePinBreakpoint:u.noop,onTogglePinLog:u.noop,viewPort:Be,onChangeVisibleInputs:dn,onChangeVisibleOutputs:fn,onSetDisplayName:mn,onDeleteInstance:wt,forceShowMinimized:ve||(null===(o=null==We?void 0:We.to)||void 0===o?void 0:o.insId)===t.id?"input":ge||(null===(i=null==We?void 0:We.from)||void 0===i?void 0:i.insId)===t.id?"output":void 0,isConnectedInstanceSelected:me.some((e=>ye.some((n=>{let{from:o,to:i}=n;return o.insId===t.id&&i.insId===e||o.insId===e&&i.insId===t.id})))),inlineGroupProps:ln(t),onCloseInlineEditor:yn,inlineEditorPortalDomNode:Ge.current,onChangeStyle:pn,onGroupSelected:Qe,onPinMouseDown:In,onPinMouseUp:xn,hadError:null!==(a=null===(r=e.instancesWithErrors)||void 0===r?void 0:r.has((0,u.fullInsIdPath)(t.id)))&&void 0!==a&&a},t.id)})),Wt(),Ut(),(0,s.jsx)(A.MainInstanceEventsIndicator,{currentInsId:X,ancestorsInsIds:ee,viewPort:Be}),Re?(0,s.jsx)(x.QuickAddMenu,{targetNode:Re.targetNode,pinId:Re.pinId,pinType:Re.pinType,pos:Re.pos,resolvedDependencies:ne,node:te,onAdd:en,onClose:Xt}):null,(0,s.jsxs)("div",{className:"viewport-controls-and-help",children:[(0,s.jsx)(b.Button,{small:!0,onClick:rt,minimal:!0,intent:"primary",children:"Center"}),(0,s.jsx)(W,{min:.15,max:3,stepSize:.05,labelStepSize:10,labelRenderer:J,onChange:pt,value:Be.zoom}),Se?(0,s.jsx)(L.HelpBubble,{}):null]}),qe?(0,s.jsx)($.MacroInstanceEditor,{onCancel:()=>$e(void 0),onSubmit:En,ins:qe.ins,deps:ne}):null,(0,s.jsx)("div",{className:"inline-editor-portal-root"})]}),jn?(0,s.jsx)(G.SelectionIndicator,{selection:jn,onCenter:Sn,onGroup:Qe,onDelete:Ct}):null,!Le&&se.groups.length?(0,s.jsx)(F.NodesLibrary,{...se,onAddNode:Ht}):null,(0,s.jsx)("div",{className:"run-btn-container",children:(0,s.jsx)(b.Button,{className:"run-btn",onClick:On,rightIcon:(0,s.jsx)(B.Play,{}),small:!0,children:"Test Flow"})}),De?(0,s.jsx)(H.RunFlowModal,{node:te,onClose:Nn}):null,Me?(0,s.jsx)(U.AddMainPinModal,{type:Me,onAdd:Rt,onClose:At}):null]})}catch(Tn){return console.error(Tn),(0,s.jsxs)("div",{children:["Error rendering board - ",Tn.toString()]})}})));const K=(e,t)=>{const n=e.target.closest(".visual-node-editor");return n&&n.getAttribute("data-id")===t}},36369:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseNodeView=void 0;const s=n(35250),l=r(n(70079)),u=a(n(26372)),c=a(n(59349)),d=n(30653);t.BaseNodeView=function(e){const{dragged:t,viewPort:n,pos:o,onDragEnd:i,onDragMove:r,onDragStart:a,displayMode:p}=e,f=(0,d.useDarkMode)(),m=l.useCallback(((e,t)=>{a(e,t)}),[a]),v=l.useCallback(((e,t)=>{const r=o,a=(t.x-r.x)/n.zoom,s=(t.y-r.y)/n.zoom,l=r.x+a,u=r.y+s;i(e,{...t,x:l,y:u})}),[o,i,n]),g=l.useCallback(((e,t)=>{let{x:n,y:o}=t;r(e,{x:n,y:o})}),[r]),h={transform:`scale(${n.zoom})`},y=(0,u.default)("base-node-view",e.className,{dragged:t,dark:f,"display-mode":p}),b=o.x*n.zoom-n.pos.x*n.zoom,_=o.y*n.zoom-n.pos.y*n.zoom,I={transform:`translate(${b-o.x}px, ${_-o.y}px)`},x=(0,u.default)("base-node-view-vp-fixer",{"display-mode":p}),C=(0,s.jsx)("span",{className:"base-node-view-wrapper",children:(0,s.jsx)("div",{className:y,style:h,id:e.domId,children:e.children})});return(0,s.jsx)("div",{className:x,style:I,children:(0,s.jsx)(c.default,{onStop:v,onStart:m,onDrag:g,position:o,cancel:".no-drag",children:C})})}},83234:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(36369),t)},80510:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.handleConnectionCloseEditorCommand=void 0;const i=n(74762),r=o(n(53865));t.handleConnectionCloseEditorCommand=(e,t)=>{let{from:n,to:o}=t;return(0,r.default)(e,(e=>{const t=e.connections.find((e=>{const t=(0,i.connectionNodeEquals)(n,e.from),r=(0,i.connectionNodeEquals)(o,e.to);return t&&r}));t?e.connections=e.connections.filter((e=>e!==t)):e.connections.push({from:n,to:o})}))}},2130:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.handleDuplicateSelectedEditorCommand=void 0;const i=n(74762),r=o(n(53865));t.handleDuplicateSelectedEditorCommand=(e,t)=>{const n=[];return{newNode:(0,r.default)(e,(o=>{const r=o.instances;t.forEach((t=>{const o=r.find((e=>e.id===t));if(!o)throw new Error("impossible state duplicate selected no matching instance");if(o){const{pos:t}=o,a={x:t.x+20,y:t.y+20},s=(0,i.createInsId)(e),l=(0,i.isMacroNodeInstance)(o)?(0,i.macroNodeInstance)(s,o.macroId,o.macroData,void 0,t):{...o,pos:a,id:s};r.push(l),n.push(l.id)}}))})),newInstances:n}}},25044:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.pasteInstancesCommand=void 0;const i=n(74762),r=o(n(53865));t.pasteInstancesCommand=(e,t,n)=>{const o=n.instances.map((n=>{const o=(0,i.createInsId)(e);return(0,i.isMacroNodeInstance)(n)?(0,i.macroNodeInstance)(o,n.macroId,n.macroData,void 0,t):{...n,pos:t,id:o}})),a=new Map(o.map(((e,t)=>[n.instances[t].id,e.id])));return{newNode:(0,r.default)(e,(e=>{e.instances.push(...o);const t=n.connections.map((e=>{let{from:t,to:n}=e;return{from:{...t,insId:a.get(t.insId)||t.insId},to:{...n,insId:a.get(n.insId)||n.insId}}}));e.connections.push(...t)})),newInstances:o}}},65082:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionView=t.SingleConnectionView=void 0;const s=n(70079),l=n(35250),u=r(n(70079)),c=a(n(26372)),d=n(74762),p=n(18243),f=n(77852),m=n(74089),v=n(60190),g=n(76064),h=n(41032);t.SingleConnectionView=e=>{const{isBrowser:t}=(0,f.useSsr)(),{connection:n,node:o,resolvedNodes:i,instances:r,type:a,viewPort:s,toggleHidden:m,parentSelected:y,removeConnection:b,onSelectConnection:_,isConnectionSelected:I}=e,[x,C]=u.useState(!1),{from:w}=n,E=(0,d.isInternalConnectionNode)(w)&&r.find((e=>e.id===w.insId));if(!E&&(0,d.isInternalConnectionNode)(w))return console.warn(`Could not find instance ${w.insId} for connection`,w),null;const j=((0,d.isInternalConnectionNode)(w)&&E?(0,h.safelyGetNodeDef)(E,i):o).outputs[w.pinId],S=j&&j.delayed,N=t?(0,p.calcStartPos)({...e,connectionNode:w}):{x:0,y:0},O=t?(0,p.calcTargetPos)({...e,connectionNode:n.to}):{x:0,y:0},{x:T,y:P}=(0,v.vDiv)(N,e.parentVp.zoom),{x:D,y:k}=(0,v.vDiv)(O,e.parentVp.zoom),M=(0,c.default)({delayed:S,hidden:n.hidden,"parent-selected":y,selected:I,"pending-selection":!I&&x},a);return(0,l.jsx)(g.ConnectionViewPath,{className:M,from:{x:T,y:P},to:{x:D,y:k},dashed:"regular"!==a,zoom:s.zoom,onMouseProximity:C,onClick:e=>{_(n,e)}})};t.ConnectionView=e=>{var n;const{viewPort:o,futureConnection:i,toggleHidden:r,selectedInstances:a,draggedSource:c,selectedConnections:d,onSelectConnection:f}=e,[v,h]=u.useState(0),y=u.useCallback((e=>requestAnimationFrame((()=>{h((e=>(e+1)%9)),e>0&&y(e-1)}))),[]);u.useEffect((()=>{const e=y(10);return()=>{cancelAnimationFrame(e)}}),[y]),u.useEffect((()=>{const e=()=>{y(3)};return window.addEventListener("scroll",e),window.addEventListener("resize",e),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}}),[y,v]);const b=e.connections.map((n=>{const o=(0,m.getConnectionId)(n),i=a.includes(n.from.insId)||a.includes(n.to.insId);return(0,s.createElement)(t.SingleConnectionView,{...e,connection:n,type:"regular",parentSelected:i,onSelectConnection:f,isConnectionSelected:d.includes(o),key:o})}));if(i&&b.push((0,s.createElement)(t.SingleConnectionView,{...e,connection:i.connection,type:i.type,toggleHidden:r,parentSelected:!1,onSelectConnection:f,key:"future"})),c){const t=(c.from?p.calcStartPos:p.calcTargetPos)({connectionNode:null!==(n=c.from)&&void 0!==n?n:c.to,viewPort:o,boardPos:e.boardPos,ancestorsInsIds:e.ancestorsInsIds,currentInsId:e.currentInsId});b.push((0,l.jsx)(g.ConnectionViewPath,{className:"dragged",from:t,to:(0,m.logicalPosToRenderedPos)(e.lastMousePos,o),zoom:o.zoom},"dragged"))}return(0,l.jsx)("svg",{className:"connections-view",children:b})}},76064:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionViewPath=void 0;const i=n(35250),r=o(n(26372)),a=n(70079),s=n(23381);t.ConnectionViewPath=(0,a.forwardRef)(((e,t)=>{const{from:n,to:o,className:a,zoom:l,dashed:u}=e,{x:c,y:d}=n,{x:p,y:f}=o,m=(0,s.calcBezierPath)({sourceX:c,sourceY:d,targetX:p,targetY:f,curvature:.15}),v=2.5*l,g=u?6*l:void 0,h=(0,i.jsx)("path",{onClick:e.onClick,onMouseEnter:()=>e.onMouseProximity(!0),onMouseLeave:()=>e.onMouseProximity(!1),d:m,style:{cursor:"pointer",opacity:0,strokeWidth:40*l}}),y=(0,i.jsx)("path",{d:m,ref:t,className:(0,r.default)("connection",a),style:{strokeWidth:v,strokeDasharray:g}});return(0,i.jsxs)(i.Fragment,{children:[y,h,(0,i.jsxs)("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,i.jsx)("stop",{offset:"0%"}),(0,i.jsx)("stop",{offset:"100%"})]})]})}))},23381:(e,t)=>{"use strict";var n;function o(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function i(e){let t,i,{pos:r,x1:a,y1:s,x2:l,y2:u,c:c}=e;switch(r){case n.Left:t=a-o(a-l,c),i=s;break;case n.Right:t=a+o(l-a,c),i=s;break;case n.Top:t=a,i=s-o(s-u,c);break;case n.Bottom:t=a,i=s+o(u-s,c)}return[t,i]}Object.defineProperty(t,"__esModule",{value:!0}),t.getBezierCenter=t.calcBezierPath=t.Position=void 0,function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(n=t.Position||(t.Position={}));t.calcBezierPath=e=>{let{sourceX:t,sourceY:o,sourcePosition:r=n.Bottom,targetX:a,targetY:s,targetPosition:l=n.Top,curvature:u=.25}=e;const[c,d]=i({pos:r,x1:t,y1:o,x2:a,y2:s,c:u}),[p,f]=i({pos:l,x1:a,y1:s,x2:t,y2:o,c:u});return`M${t},${o} C${c},${d} ${p},${f} ${a},${s}`},t.getBezierCenter=function(e){let{sourceX:t,sourceY:o,sourcePosition:r=n.Bottom,targetX:a,targetY:s,targetPosition:l=n.Top,curvature:u=.25}=e;const[c,d]=i({pos:r,x1:t,y1:o,x2:a,y2:s,c:u}),[p,f]=i({pos:l,x1:a,y1:s,x2:t,y2:o,c:u}),m=.125*t+.375*c+.375*p+.125*a,v=.125*o+.375*d+.375*f+.125*s;return[m,v,Math.abs(m-t),Math.abs(v-o)]}},18243:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcTargetPos=t.calcStartPos=t.calcPinPosition=void 0;const o=n(74762),i=n(74089),r=n(30994);function a(e){const t=(0,r.getPinDomId)({fullInsIdPath:(0,o.fullInsIdPath)(e.insId,e.ancestorsInsIds),pinId:e.pinId,pinType:e.pinType,isMain:e.isMain}),n=document.getElementById(t);return n?((e,t)=>{const{x:n,y:o,width:i,height:r}=e.getBoundingClientRect(),a=o+r/2;return{x:n+i/2-t.x,y:a-t.y}})(n,e.boardPos):((0,i.logger)("calcPinPosition: cannot find element",{domId:t}),{x:99999,y:99999})}t.calcPinPosition=a;t.calcStartPos=e=>{const{connectionNode:t,boardPos:n,ancestorsInsIds:i,viewPort:r,currentInsId:s}=e;return(0,o.isExternalConnectionNode)(t)?a({pinId:t.pinId,insId:s,ancestorsInsIds:i,isMain:!0,pinType:"input",boardPos:n,viewPort:r}):a({pinId:t.pinId,insId:t.insId,ancestorsInsIds:(0,o.fullInsIdPath)(s,i),isMain:!1,pinType:"output",boardPos:n,viewPort:r})};t.calcTargetPos=e=>{const{connectionNode:t,boardPos:n,ancestorsInsIds:i,viewPort:r,currentInsId:s}=e;return(0,o.isExternalConnectionNode)(t)?a({pinId:t.pinId,insId:s,ancestorsInsIds:i,isMain:!0,pinType:"output",boardPos:n,viewPort:r}):a({pinId:t.pinId,insId:t.insId,ancestorsInsIds:(0,o.fullInsIdPath)(s,i),isMain:!1,pinType:"input",boardPos:n,viewPort:r})}},30994:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPinDomId=t.getMainInstanceIndicatorDomId=t.getInstanceDomId=void 0;const o=n(74762);t.getInstanceDomId=(e,t)=>`ins:${(0,o.fullInsIdPath)(e,t)}`.replace(/\s+/g,"-");t.getMainInstanceIndicatorDomId=(e,t)=>`main-ins:${(0,o.fullInsIdPath)(e,t)}`.replace(/\s+/g,"-");t.getPinDomId=e=>{let{pinType:t,fullInsIdPath:n,pinId:o,isMain:i}=e;return`${i?"main-":""}pin:${t}:${n}:${o}`.replace(/\s+/g,"-")}},86553:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceIcon=t.InstanceView=t.getVisibleOutputs=t.getVisibleInputs=t.INSTANCE_INFO_TOOLTIP_DELAY=t.MAX_INSTANCE_WIDTH=t.MIN_WIDTH_PER_PIN=t.PIECE_CHAR_WIDTH=t.PIECE_HORIZONTAL_PADDING=void 0;const s=n(70079),l=n(35250),u=r(n(70079)),c=n(66074),d=n(74762),p=a(n(26372)),f=n(2036),m=n(74762),v=n(74762),g=n(53159),h=n(83234),y=n(30994),b=n(63521),_=n(74089),I=n(50382),x=n(88593),C=n(30653);t.PIECE_HORIZONTAL_PADDING=25,t.PIECE_CHAR_WIDTH=11,t.MIN_WIDTH_PER_PIN=40,t.MAX_INSTANCE_WIDTH=400,t.INSTANCE_INFO_TOOLTIP_DELAY=400;t.getVisibleInputs=(e,t,n)=>{const{visibleInputs:o}=e;if(o)return o;const i=(0,d.keys)((0,v.getNodeInputs)(t)).filter(((o,i)=>{var r;const a=n.some((t=>t.to.insId===e.id&&t.to.pinId===o)),s=t.inputs[o]&&"optional"===(null===(r=t.inputs[o])||void 0===r?void 0:r.mode);return a||!s&&o!==m.TRIGGER_PIN_ID}));return 0===i.length?[m.TRIGGER_PIN_ID]:i};t.getVisibleOutputs=(e,t,n)=>{const{visibleOutputs:o}=e;if(o)return o;const i=Object.keys(t.outputs);return n.some((t=>t.from.insId===e.id&&t.from.pinId===m.ERROR_PIN_ID))?[...i,m.ERROR_PIN_ID]:i};t.InstanceView=function(e){const{selected:n,selectedInput:o,selectedOutput:i,closestPin:r,dragged:a,onTogglePinLog:c,onTogglePinBreakpoint:w,displayMode:E,connections:j,instance:S,viewPort:N,node:O,onPinClick:T,onPinDblClick:P,onDragStart:D,onDragEnd:k,onDragMove:M,onToggleSticky:V,onSelect:R,onDblClick:A,onChangeVisibleInputs:L,onChangeVisibleOutputs:z,inlineGroupProps:q,onUngroup:$,onExtractInlineNode:G,onGroupSelected:F,isConnectedInstanceSelected:H,onChangeStyle:B,onDeleteInstance:U,onSetDisplayName:W,onPinMouseUp:J,onPinMouseDown:K}=e,Y=(0,C.useDarkMode)(),{id:Z}=S,Q=u.useRef(),X=u.useMemo((()=>{var e,t,n,o,i,r,a,s,l,u;return{icon:null!==(t=null===(e=S.style)||void 0===e?void 0:e.icon)&&void 0!==t?t:null===(n=O.defaultStyle)||void 0===n?void 0:n.icon,color:null!==(i=null===(o=S.style)||void 0===o?void 0:o.color)&&void 0!==i?i:null===(r=O.defaultStyle)||void 0===r?void 0:r.color,size:null!==(u=null!==(s=null===(a=S.style)||void 0===a?void 0:a.size)&&void 0!==s?s:null===(l=O.defaultStyle)||void 0===l?void 0:l.color)&&void 0!==u?u:"regular"}}),[O,S]),ee=u.useMemo((()=>new Map(j.filter((e=>{let{to:t}=e;return t.insId===Z})).map((e=>{let{to:t,hidden:n}=e;return[t.pinId,n]})))),[j,Z]),te=u.useMemo((()=>new Map(j.filter((e=>{let{from:t}=e;return t.insId===Z})).map((e=>{let{from:t,hidden:n}=e;return[t.pinId,n]})))),[j,Z]),ne=(0,_.usePrompt)(),oe=u.useCallback((e=>T(S,e,"input")),[S,T]),ie=u.useCallback(((e,t)=>P(S,e,"input",t)),[S,P]),re=u.useCallback(((e,t)=>P(S,e,"output",t)),[S,P]),ae=u.useCallback((e=>T(S,e,"output")),[S,T]),se=u.useCallback(((e,t)=>{D(S,e,t)}),[S,D]),le=u.useCallback(((e,t)=>{const n=S.pos,o=(t.x-n.x)/N.zoom,i=(t.y-n.y)/N.zoom,r=n.x+o,a=n.y+i;k(S,e,{...t,x:r,y:a})}),[S,k,N.zoom]),ue=u.useCallback(((e,t)=>{M(S,e,{x:t.x,y:t.y})}),[S,M]),ce=u.useCallback((e=>V(S,e)),[S,V]),de=u.useCallback((e=>R(S,e)),[S,R]),pe=u.useCallback((e=>A(S,e.shiftKey)),[S,A]),fe=(0,d.entries)(O.inputs),{visibleInputs:me,visibleOutputs:ve}=S;me&&fe.sort(((e,t)=>me.indexOf(e[0])-me.indexOf(t[0])));const ge=(0,d.entries)(O.outputs);ve&&ge.sort(((e,t)=>ve.indexOf(e[0])-ve.indexOf(t[0])));const he=(0,t.getVisibleInputs)(S,O,j),ye=(0,t.getVisibleOutputs)(S,O,j);fe.push([m.TRIGGER_PIN_ID,{...(0,d.nodeInput)(),description:"Use this pin to manually trigger the node. If not connected, the node will be triggered automatically when all required inputs have data."}]),ge.push([m.ERROR_PIN_ID,{...(0,m.nodeOutput)(),description:"Use this pin to catch errors that happen inside this node. If not connected, errors will bubble up to the parent node."}]);const be=fe.filter((e=>{let[t]=e;return he.includes(t)||(n||H)&&ee.has(t)})),_e=ge.filter((t=>{let[o]=t;return ye.includes(o)||(n||H)&&te.has(o)||o===m.ERROR_PIN_ID&&e.hadError})),Ie=j.some((e=>e.from.insId===Z&&e.from.pinId===m.ERROR_PIN_ID)),xe=(0,p.default)("ins-view",{"no-inputs":0===fe.length,"no-outputs":0===ge.length,"display-mode":E,"force-minimized-input":"input"===e.forceShowMinimized||"both"===e.forceShowMinimized,"force-minimized-output":"output"===e.forceShowMinimized||"both"===e.forceShowMinimized,"inline-node-edited":!!q,"error-caught":Ie}),Ce=(0,p.default)({selected:n,dragged:a,closest:r&&r.ins.id===S.id},`size-${X.size}`),we=new Set((0,d.entries)(O.inputs).filter((e=>{let[t,n]=e;return(0,m.isInputPinOptional)(n)})).map(d.pickFirst)),Ee=(0,d.entries)(S.inputConfig).reduce(((e,t)=>{let[n,o]=t;return(0,m.isStickyInputPinConfig)(o)||o.sticky?{...e,[n]:!0}:e}),{}),je=(0,g.calcNodeContent)(S,O),Se=u.useCallback((async()=>{const e=(0,d.okeys)(O.inputs),t=await ne("New order?",(S.visibleInputs||e).join(","));t&&L(S,t.split(","))}),[O.inputs,ne,S,L]),Ne=u.useCallback((async()=>{const e=(0,d.okeys)(O.outputs),t=await ne("New order?",(S.visibleOutputs||e).join(","));t&&z(S,t.split(","))}),[O.outputs,ne,S,z]),Oe=u.useCallback((()=>{U(S)}),[U,S]),Te=u.useCallback((async()=>{const e=await ne("Set custom display name",S.displayName||O.id);W(S,e)}),[ne,S,W,O.id]),Pe=Object.keys((0,v.getNodeInputs)(O)),De=Object.keys((0,d.getNodeOutputs)(O)),ke=u.useCallback(((e,t)=>{J&&J(S,e,t)}),[S,J]),Me=u.useCallback(((e,t)=>{K&&K(S,e,t)}),[S,K]),Ve=()=>(0,l.jsx)("div",{className:"inputs no-drag",children:be.map((t=>{let[i,a]=t;var s;return(0,l.jsx)(f.PinView,{type:"input",currentInsId:S.id,ancestorsInsIds:e.ancestorsInsIds,id:i,optional:we.has(i),connected:ee.has(i),isSticky:Ee[i],minimized:!n&&1===be.length,onToggleSticky:ce,selected:i===o,onClick:oe,onDoubleClick:ie,isClosestToMouse:!!r&&"input"===r.type&&r.pin===i,onToggleLogged:c,onToggleBreakpoint:w,onInspect:e.onInspectPin,description:a.description,queuedValues:null!==(s=e.queuedInputsData[i])&&void 0!==s?s:0,onMouseUp:ke,onMouseDown:Me},i)}))}),Re=()=>(0,l.jsx)("div",{className:"outputs no-drag",children:_e.map((t=>{let[o,a]=t;return(0,l.jsx)(f.PinView,{currentInsId:S.id,ancestorsInsIds:e.ancestorsInsIds,connected:te.has(o),type:"output",id:o,minimized:!n&&1===_e.length,isClosestToMouse:!!r&&"output"===r.type&&r.pin===o,selected:o===i,onClick:ae,onDoubleClick:re,onToggleLogged:c,onToggleBreakpoint:w,onInspect:e.onInspectPin,description:a.description,onMouseUp:ke,onMouseDown:Me},o)}))}),Ae=u.useCallback((e=>{B(S,e)}),[S,B]),Le=u.useCallback((()=>{const e=[...Pe.map((e=>{const t=he.includes(e),n=ee.has(e)&&!0!==ee.get(e),o=(0,d.getInputName)(e);return{text:t?n?`Hide input "${o}" (disconnect first)`:`Hide input "${o}"`:`Show input "${o}"`,onClick:()=>L(S,t?he.filter((t=>t!==e)):[...he,e]),disabled:n&&t}})),...De.map((e=>{const t=ye.includes(e),n=te.has(e),o=(0,d.getOutputName)(e);return{text:t?n?`Hide output "${o}" (disconnect first)`:`Hide output "${o}"`:`Show output "${o}"`,onClick:()=>z(S,t?ye.filter((t=>t!==e)):[...ye,e]),disabled:n&&t}})),...(0,d.isInlineNodeInstance)(S)&&(0,v.isVisualNode)(S.node)?[{text:"Ungroup inline node",onClick:()=>$(S)}]:[],...(0,d.isInlineNodeInstance)(S)?[{text:"Extract inline node to file",onClick:()=>G(S)}]:[],{text:"Reorder inputs",onClick:Se},{text:"Reorder outputs",onClick:Ne},{text:"Set display name",onClick:Te},{text:"Group selected instances",onClick:F},{text:"Delete instance",intent:"danger",onClick:Oe}];return(0,l.jsxs)(I.Menu,{children:[(0,d.isMacroNodeInstance)(S)?(0,l.jsx)(I.MenuItem,{text:"Change configuration",onClick:e=>pe(e)}):null,(0,l.jsx)(I.MenuItem,{text:"Style",children:(0,l.jsx)(x.NodeStyleMenu,{style:X,onChange:Ae,promptFn:ne})}),e.map(((e,t)=>(0,s.createElement)(I.MenuItem,{...e,key:t})))]})}),[Pe,De,S,Se,Ne,Te,Oe,pe,X,Ae,ne,he,ee,L,ye,te,z,$,G,F]),ze={"--node-color":X.color,...X.cssOverride||{}},qe=(0,y.getInstanceDomId)(S.id,e.ancestorsInsIds);return(0,l.jsx)("div",{className:xe,children:(0,l.jsx)(h.BaseNodeView,{pos:S.pos,viewPort:N,onDragStart:se,onDragMove:ue,onDragEnd:le,upperRenderer:Ve,bottomRenderer:Re,displayMode:E,domId:qe,children:(0,l.jsxs)(u.Fragment,{children:[Ve(),q?(0,l.jsx)(I.Dialog,{isOpen:!0,onClose:e.onCloseInlineEditor,className:"inline-group-editor-container no-drag",title:`Editing inline node ${je}`,children:(0,l.jsx)("main",{className:(0,p.default)(I.Classes.DIALOG_BODY),tabIndex:0,children:(0,l.jsx)(b.VisualNodeEditor,{...e.inlineGroupProps,className:"no-drag",ref:Q})})}):(0,l.jsx)(I.ContextMenu,{className:(0,p.default)("ins-view-inner",Ce,`size-${X.size}`,{dark:Y}),onClick:de,onDoubleClick:pe,content:Le(),style:ze,children:(0,l.jsx)(I.Tooltip,{content:O.description,children:(0,l.jsxs)(u.Fragment,{children:[(0,l.jsx)(t.InstanceIcon,{icon:X.icon})," ",je]})})}),Re()]})})})};t.InstanceIcon=function(e){let{icon:t}=e;return"string"==typeof t&&t.trim().startsWith("<")?(0,l.jsx)("span",{className:"svg-icon-container",dangerouslySetInnerHTML:{__html:t}}):(0,l.jsx)(c.FontAwesomeIcon,{icon:t,size:"xs"})}},53568:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStyleMenu=t.nodeStylePresetColors=void 0;const a=n(35250),s=n(50382),l=r(n(70079)),u=n(84472);t.nodeStylePresetColors=[{name:"Amethyst",color:"#9b5de5"},{name:"Magenta",color:"#f15bb5"},{name:"Yellow",color:"#fee440"},{name:"Capri",color:"#00bbf9"},{name:"Sea Green",color:"#00f5d4"},{name:"Orange",color:"#ff7f00"}];const c={size:"regular"};t.NodeStyleMenu=e=>{var n;const{onChange:o,style:i}=e,r=i||c,d=e.promptFn,p=l.default.useCallback(((e,t)=>{o({...r,[e]:t})}),[r,o]),f=l.default.useCallback((async()=>{const e=await d("Icon name? (Font Awesome conventions)","rocket"),t=e.includes(",")?e.split(","):e;p("icon",t)}),[d,p]),m=(0,l.useCallback)((async()=>{const e=await d("Enter a custom style (valid JSON representing a React CSS object)",r.cssOverride?JSON.stringify(r.cssOverride):"");try{const t=JSON.parse(e);p("cssOverride",t)}catch(t){console.error(t),(0,u.toastMsg)("Invalid object","danger")}}),[d,p,r.cssOverride]);return(0,a.jsxs)(l.default.Fragment,{children:[(0,a.jsxs)(s.MenuItem,{text:"Color",children:[t.nodeStylePresetColors.map((e=>(0,a.jsx)(s.MenuItem,{text:e.name,onClick:()=>p("color",e.color)},e.name))),(0,a.jsx)(s.MenuDivider,{}),(0,a.jsx)(s.MenuItem,{text:"Remove Color",onClick:()=>p("color",void 0)})]}),(0,a.jsxs)(s.MenuItem,{text:`Size (${null!==(n=r.size)&&void 0!==n?n:"regular"})`,children:[(0,a.jsx)(s.MenuItem,{text:"Small",onClick:()=>p("size","small")}),(0,a.jsx)(s.MenuItem,{text:"Regular",onClick:()=>p("size","regular")}),(0,a.jsx)(s.MenuItem,{text:"Large",onClick:()=>p("size","large")})]}),(0,a.jsxs)(s.MenuItem,{text:"Icon",children:[(0,a.jsx)(s.MenuItem,{text:"Choose Icon",onClick:f}),(0,a.jsx)(s.MenuItem,{text:"Remove Icon",onClick:()=>p("icon",void 0)})]}),(0,a.jsx)(s.MenuItem,{text:"Custom Styling",onClick:m})]})}},88593:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(53568),t)},83651:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(86553),t)},53159:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcInstancePosition=t.calcNodeWidth=t.calcNodeContent=void 0;const o=n(74762),i=n(86553),r=n(61888),a=n(30994);t.calcNodeContent=(e,t)=>{var n;return e.displayName?e.displayName:null!==(n=t.displayName)&&void 0!==n?n:t.id};t.calcNodeWidth=(e,n)=>{const a=(0,o.okeys)(n.inputs).length*i.MIN_WIDTH_PER_PIN,s=(0,t.calcNodeContent)(e,n),l=i.PIECE_CHAR_WIDTH;return(0,r.clamp)(s.length*l+2*i.PIECE_HORIZONTAL_PADDING,a,i.MAX_INSTANCE_WIDTH)};t.calcInstancePosition=(e,t,n)=>{const o=(0,a.getInstanceDomId)(e,t),i=document.getElementById(o);if(i){const{x:e,y:t,width:o,height:r}=i.getBoundingClientRect(),a=t+r/2;return{x:e+o/2-n.x,y:a-n.y}}return console.warn("Cannot find element to draw connection to",o),{x:99999,y:99999}}},17841:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutDebugger=t.LayoutDebuggerItem=t.PosDebugger=void 0;const i=n(70079),r=n(35250),a=n(74762),s=o(n(70079)),l=n(7047),u=e=>{let{pos:t}=e;return(0,r.jsxs)("span",{children:[t.x.toFixed(1),", ",t.y.toFixed(1)]})};t.PosDebugger=e=>(0,r.jsx)("span",{className:"pos-debugger",children:(0,r.jsx)(u,{pos:e.pos})});t.LayoutDebuggerItem=e=>{const{pos:n,viewPort:o,size:i,color:a}=e,s=o.zoom,l=n.x*s-o.pos.x*s,u=n.y*s-o.pos.y*s,c={transform:`translate(${l-n.x}px, ${u-n.y}px)`},d={transform:`scale(${o.zoom})`},p={transform:`translate(${n.x}px, ${n.y}px)`},f={width:`${i.width}px`,height:`${i.height}px`,backgroundColor:a};return(0,r.jsx)("div",{className:"layout-debugger",style:c,children:(0,r.jsxs)("span",{className:"drag-sim",style:p,children:[(0,r.jsx)(t.PosDebugger,{pos:n}),(0,r.jsx)("div",{className:"layout-debugger-zoom-wrapper",style:d,children:(0,r.jsx)("div",{className:"layout-debugger-inner",style:f})})]})})};const c=(()=>{try{return"true"===localStorage.getItem("pos-debugger")}catch(e){return!1}})();t.LayoutDebugger=e=>{const{extraDebug:n,vp:o,node:d,mousePos:p}=e;if(!c)return null;const f=n.map(((e,n)=>(0,i.createElement)(t.LayoutDebuggerItem,{...e,key:n}))),m=[...d.instances.map((e=>e.pos)),...(0,a.values)(d.inputsPosition),...(0,a.values)(d.outputsPosition)].map((e=>(0,r.jsx)(t.LayoutDebuggerItem,{pos:e,viewPort:o,size:{width:0,height:0},color:"red"}))),v=(0,l.logicalPosToRenderedPos)(p,o),g=(0,r.jsxs)("div",{className:"viewport-data",children:[(0,r.jsxs)("div",{children:["Pos: ",(0,r.jsx)(u,{pos:o.pos})]}),(0,r.jsxs)("div",{children:["Zoom: ",o.zoom.toFixed(2)," "]}),(0,r.jsxs)("div",{children:["Mouse (logical): ",(0,r.jsx)(u,{pos:p})]}),(0,r.jsxs)("div",{children:["Rendered (rendered): ",(0,r.jsx)(u,{pos:v})]})]});return(0,r.jsxs)(s.default.Fragment,{children:[g,f,m]})}},44338:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(17841),t)},38259:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateInstancesWithSingleConstPinsMap=t.getLeafInstancesOfSelection=void 0;t.getLeafInstancesOfSelection=(e,t,n)=>e.reduce(((e,o)=>[...e,...n.filter((e=>e.to.insId===o.id)).map((e=>t.find((t=>t.id===e.from.insId)))).filter((e=>!!e))]),[]).filter((t=>1===n.filter((e=>e.from.insId===t.id||e.to.insId===t.id)).length&&!e.includes(t)));t.calculateInstancesWithSingleConstPinsMap=(e,t)=>{const{connections:n}=e;return n.filter((e=>t.has(e.from.insId))).reduce(((e,n)=>{const o=t.get(n.from.insId),i=n.to.insId,r=e.get(i)||new Map;return r.set(n.to.pinId,{val:o,insId:n.from.insId}),e.set(i,r),e}),new Map)}},37488:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.NodeIoView=void 0;const s=n(35250),l=n(70079),u=r(n(70079)),c=n(74762),d=n(83234),p=a(n(26372)),f=n(50382),m=n(43490),v=n(66189),g=n(74762),h=n(30994),y=n(30653);t.NodeIoView=u.memo((function(e){const{viewPort:t,selected:n,pos:o,type:i,id:r,onDblClick:a,onRename:b,onDelete:_,onChangeInputMode:I,inputMode:x,onSelect:C,closest:w,onSetDescription:E,description:j,onMouseUp:S,onMouseDown:N,currentInsId:O}=e,{history:T,resetHistory:P,refreshHistory:D}=(0,v.useHistoryHelpers)(O,r,i),k=(0,m.usePrompt)(),M=u.useCallback((async()=>{const e=await k("Description?",j);E(i,r,e)}),[k,j,E,i,r]),V=u.useCallback((()=>{_&&_(i,r)}),[i,r,_]),R=u.useCallback((()=>{b&&b(i,r)}),[i,r,b]),A=u.useCallback((e=>{I&&I(r,e)}),[r,I]),L=u.useCallback((()=>[{text:`Current mode - ${x}`,onClick:c.noop},{text:"Make required",onClick:()=>A("required")},{text:"Make optional",onClick:()=>A("optional")},{text:"Make required-if-connected",onClick:()=>A("required-if-connected")},{text:"Set description",onClick:M},...e.onRename?[{text:"Rename",onClick:R}]:[],...e.onDelete?[{text:"Delete",onClick:V}]:[]]),[M,x,A,V,R,e.onDelete,e.onRename]),z=u.useCallback((t=>{a&&a(e.id,t)}),[a,e.id]),q=u.useCallback((()=>{C(r,i)}),[r,i,C]),$=u.useCallback((()=>(0,s.jsx)(f.Menu,{children:L().map(((e,t)=>(0,l.createElement)(f.MenuItem,{...e,key:t})))})),[L]),G="input"===i?(0,g.getInputName)(r):(0,c.getOutputName)(r),F=u.useCallback((e=>{S(r,i,e)}),[r,S,i]),H=u.useCallback((e=>{N(r,i,e)}),[r,N,i]),B=(0,y.useDarkMode)();return(0,s.jsx)(d.BaseNodeView,{className:(0,p.default)("node-io-view",i,{dark:B}),pos:o,onDragEnd:(n,o)=>{const a=e.pos,s=(o.x-a.x)/t.zoom,l=(o.y-a.y)/t.zoom,u=a.x+s,c=a.y+l;e.onDragEnd(i,r,n,{...o,x:u,y:c})},onDragStart:(t,n)=>{e.onDragStart(r,t,n)},onDragMove:(t,n)=>{e.onDragMove(i,r,t,{x:n.x,y:n.y})},viewPort:t,children:(0,s.jsx)(u.Fragment,{children:(0,s.jsx)(f.Tooltip,{content:(()=>{const t=(0,v.calcHistoryContent)(T),n=e.description?(0,s.jsx)("em",{children:e.description}):"";return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:G})," (",i,")"," "]}),n,(0,s.jsx)("hr",{}),t]})})(),children:(0,s.jsx)(f.ContextMenu,{onMouseEnter:D,onMouseOut:P,onMouseUp:F,onMouseDown:H,"data-tip":"","data-html":!0,"data-for":r+e.currentInsId,className:(0,p.default)("node-io-view-inner",{closest:w,selected:n,dark:B}),id:(0,h.getPinDomId)({fullInsIdPath:(0,c.fullInsIdPath)(e.currentInsId,e.ancestorInsIds),pinId:r,pinType:i,isMain:!0}),onClick:q,onDoubleClick:z,content:$(),children:r})})})})}))},66005:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(37488),t)},83782:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcNodeIoWidth=t.MIN_WIDTH_PER_PIN=t.PIECE_CHAR_WIDTH=t.PIECE_HORIZONTAL_PADDING=void 0,t.PIECE_HORIZONTAL_PADDING=15,t.PIECE_CHAR_WIDTH=9,t.MIN_WIDTH_PER_PIN=40;t.calcNodeIoWidth=e=>Math.max(t.MIN_WIDTH_PER_PIN,e.length*t.PIECE_CHAR_WIDTH+2*t.PIECE_HORIZONTAL_PADDING)},99942:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.orderVisualNode=t.layoutToInstances=void 0;const i=n(63521),r=n(74762),a=n(90794),s=o(n(53865)),l=n(83782),u=n(60190),c=n(53159),d=n(41032);t.layoutToInstances=(e,t)=>(0,s.default)(t,(t=>{(0,r.entries)(e.nodes).forEach((e=>{let[n,o]=e;if(n.startsWith("ins-")){const e=n.replace("ins-",""),i=t.instances.find((t=>t.id===e));i?i.pos=o.p:console.warn("WAT")}if(n.startsWith("node-input-")){const e=n.replace("node-input-","");t.inputsPosition[e]=o.p}if(n.startsWith("node-output-")){const e=n.replace("node-output-","");t.outputsPosition[e]=o.p}}))}));t.orderVisualNode=(e,n,o,s)=>{const{instances:p,connections:f}=e,m={...p.reduce(((e,t)=>{const o=(0,u.size)((0,c.calcNodeWidth)(t,(0,d.safelyGetNodeDef)(t,n)),i.NODE_HEIGHT);return{...e,[`ins-${t.id}`]:{p:t.pos,s:o}}}),{}),...(0,r.okeys)(e.inputsPosition).reduce(((t,n)=>({...t,[`node-input-${n}`]:{p:e.inputsPosition[n],s:(0,u.size)((0,l.calcNodeIoWidth)(n),i.NODE_HEIGHT)}})),{}),...(0,r.okeys)(e.outputsPosition).reduce(((t,n)=>({...t,[`node-output-${n}`]:{p:e.outputsPosition[n],s:(0,u.size)((0,l.calcNodeIoWidth)(n),i.NODE_HEIGHT)}})),{})},v=f.map((e=>[(0,r.isExternalConnectionNode)(e.from)?`node-input-${e.from.pinId}`:`ins-${e.from.insId}`,(0,r.isExternalConnectionNode)(e.to)?`node-output-${e.to.pinId}`:`ins-${e.to.insId}`])),g=(0,a.orderLayout)({nodes:m,edges:v},o,((n,o)=>{s&&s((0,t.layoutToInstances)(n,e),o)}));return(0,t.layoutToInstances)(g,e)}},90794:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.orderLayout=void 0;const o=n(60190),i=400,r=e=>e.reduce(((e,t)=>{const n=(0,o.vSub)(t.p,(0,o.vec)(t.s.width/2,t.s.height/2));return{...e,[t.id]:{p:n,s:t.s}}}),{});t.orderLayout=(e,t,n)=>{let{nodes:a,edges:s}=e,l=Object.entries(a).map((e=>{let[t,n]=e;return{id:t,p:(0,o.vAdd)(n.p,(0,o.vec)(n.s.width/2,n.s.height/2)),f:(0,o.vec)(0,0),v:(0,o.vec)(0,0),m:1,s:n.s}})),u=0;for(;u<t&&(u<2||(0,o.totalEnergy)(l)>.01);){let e=l;for(let t=0;t<e.length;t++)for(let n=t+1;n<e.length;n++)if(t!==n){const r=e[t],a=e[n],s=(0,o.vSub)(r.p,a.p),l=Math.abs(s.x),u=Math.abs(s.y),c=r.id.startsWith("node-input"),d=r.id.startsWith("node-output"),p=a.id.startsWith("node-input"),f=a.id.startsWith("node-output");if(l<i&&u<80){const e=1e3*(i-l);r.f=(0,o.vAdd)(r.f,(0,o.vec)(.5*e,0)),a.f=(0,o.vAdd)(a.f,(0,o.vec)(-.5*e,0))}if(u<50){const e=100*s.y;r.f=(0,o.vAdd)(r.f,(0,o.vec)(0,.5*e)),a.f=(0,o.vAdd)(a.f,(0,o.vec)(0,-.5*e))}if(c&&f){const e=(0,o.vSub)(r.p,a.p).y;if(e<-500){const t=100*(i-e);r.f=(0,o.vAdd)(r.f,(0,o.vec)(0,-.5*t)),a.f=(0,o.vAdd)(a.f,(0,o.vec)(0,.5*t))}}else if(d&&p){const e=(0,o.vSub)(r.p,a.p).y;if(e<500){const t=100*(i-e);r.f=(0,o.vAdd)(r.f,(0,o.vec)(0,-.5*t)),a.f=(0,o.vAdd)(a.f,(0,o.vec)(0,.5*t))}}const m=(0,o.vSub)(r.p,(0,o.vec)(0,r.p.y)),v=(0,o.vLen)(m),g=(0,o.vMul)((0,o.vNorm)(m),-50*v);r.f=(0,o.vAdd)(r.f,g)}s.forEach((t=>{let n=e.find((e=>e.id===t[0])),i=e.find((e=>e.id===t[1]));if(!n||!i)return void console.warn("weoops",t[0],t[1]);const r=(0,o.vec)(0,-200),a=(0,o.vSub)(n.p,i.p),s=(0,o.vSub)(r,a),l=1e3*(0,o.vLen)(s),u=(0,o.vMul)((0,o.vNorm)(s),.5*l),c=(0,o.vMul)((0,o.vNorm)(s),-.5*l);n.f=(0,o.vAdd)(n.f,u),i.f=(0,o.vAdd)(i.f,c)})),e=e.map((e=>(0,o.itrPhysics)(15,e))),e=e.map((e=>{const t=(0,o.vMul)(e.v,.5),n=(0,o.vLen)(t)>100?(0,o.vMul)((0,o.vNorm)(t),100):t;return{...e,v:n}})),l=e,n&&n({nodes:r(e),edges:s},u),u++}return{nodes:r(l),edges:s,itrs:u,timeout:u>=t,total:(0,o.totalEnergy)(l)}}},2036:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PinView=t.PIN_HEIGHT=void 0;const s=n(35250),l=r(n(70079)),u=a(n(26372)),c=n(50382),d=n(74762),p=n(30994),f=n(66189),m=n(30653);t.PIN_HEIGHT=23;t.PinView=l.memo((function(e){const{selected:t,type:n,connected:o,optional:i,currentInsId:r,isClosestToMouse:a,id:v,onMouseDown:g,onMouseUp:h}=e,{history:y,resetHistory:b,refreshHistory:_}=(0,f.useHistoryHelpers)(r,v,n),I=(0,m.useDarkMode)(),x="input"===n?(0,d.getInputName)(v):(0,d.getOutputName)(v),C=l.useCallback((e=>{0===e.button&&g(v,n,e)}),[v,n,g]),w=l.useCallback((e=>{0===e.button&&h(v,n,e)}),[v,n,h]);return(0,s.jsxs)("div",{className:(()=>{if("input"===e.type){const{isSticky:r}=e;return(0,u.default)("pin",{sticky:r,selected:t,closest:a,optional:i,connected:o,minimized:e.minimized,dark:I},n)}return(0,u.default)("pin",{selected:t,connected:o,closest:a,optional:i,minimized:e.minimized,"error-pin":v===d.ERROR_PIN_ID,dark:I},n)})(),"data-pin-id":v,children:[(0,s.jsx)(c.Tooltip,{className:"pin-info-tooltip",content:(()=>{const t=(0,f.calcHistoryContent)(y,"input"===n?e.queuedValues:void 0),o=e.description?(0,s.jsx)("em",{children:e.description}):"";return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:x})," (",n,")"," "]}),o,(0,s.jsx)("hr",{}),t]})})(),children:(0,s.jsxs)(c.ContextMenu,{onMouseEnter:_,onMouseOut:b,onMouseDown:C,onMouseUp:w,"data-tip":"","data-html":!0,"data-for":v+e.currentInsId,id:(0,p.getPinDomId)({fullInsIdPath:(0,d.fullInsIdPath)(e.currentInsId,e.ancestorsInsIds),pinId:v,pinType:n,isMain:!1}),onDoubleClick:t=>e.onDoubleClick&&e.onDoubleClick(v,t),className:(0,u.default)("pin-inner",{dark:I}),onClick:t=>{const{onShiftClick:o,onClick:i,id:r}=e;t.shiftKey&&o?o(r,t):i(r,n,t)},content:(()=>{const t=(0,s.jsx)(c.MenuItem,{onClick:()=>e.onInspect(e.currentInsId,{id:e.id,type:e.type}),text:"Inspect"});return"input"===e.type?(0,s.jsxs)(c.Menu,{children:[(0,s.jsx)(c.MenuItem,{onClick:()=>e.onToggleSticky(e.id),text:"Toggle sticky (square means sticky)"}),t]}):(0,s.jsx)(c.Menu,{children:t})})(),children:[x," ","input"===e.type&&e.isSticky?(0,s.jsx)("span",{className:"suffix",children:"s"}):null,"input"===e.type&&e.queueSize?(0,s.jsxs)("span",{className:"suffix",children:[e.queueSize," in Q"]}):null]})}),(0,s.jsx)("div",{className:"wire"})]})}))},66189:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useHistoryHelpers=t.calcHistoryContent=void 0;const i=n(35250),r=n(96233),a=o(n(70079)),s=n(70079),l=n(98158);t.calcHistoryContent=(e,t)=>{if(e){const{total:n,lastSamples:o}=e,s=(0,i.jsxs)("strong",{children:["Activated ",n," times this session"]}),l=o.length>0?(0,i.jsxs)("div",{children:["Last value:"," ",(0,i.jsx)("strong",{children:(0,r.valuePreview)(o[0].val).substring(0,200)}),(0,i.jsx)("br",{}),(0,i.jsx)("em",{children:"Inspect instance for the full value"})]}):"",u=t?(0,i.jsx)(a.default.Fragment,{children:(0,i.jsxs)("div",{children:["Queued values: ",(0,i.jsx)("strong",{children:t})]})}):"";return(0,i.jsxs)(a.default.Fragment,{children:[s,l,u]})}return"Loading session data.."};t.useHistoryHelpers=(e,t,n)=>{const o=(0,s.useRef)(),{onRequestHistory:i}=(0,l.useDebuggerContext)(),[r,u]=(0,s.useState)();return{history:r,refreshHistory:(0,s.useCallback)((()=>{clearInterval(o.current),i(e,t,n).then((e=>{u(e)})),o.current=setInterval((()=>{i(e,t,n).then((e=>{u(e)}))}),500)}),[e,i,t,n]),resetHistory:a.default.useCallback((()=>{clearInterval(o.current),u(void 0)}),[])}}},89440:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.QuickAddMenu=void 0;const a=n(35250),s=r(n(70079)),l=n(74762),u=n(50382),c=n(70457),d=n(9958),p=n(86125),f=c.Select.ofType(),m=e=>{switch(e.type){case"node":return`${e.node.id}`;case"value":return"Add inline value or function";case"import":return`Import ${e.importableNode.node.id} from ${e.importableNode.module}`}},v=(e,t)=>{let{handleClick:n,modifiers:o,query:i,index:r}=t;if(!o.matchesPredicate)return null;const l=m(e);return"value"===e.type?(0,a.jsxs)(s.Fragment,{children:[(0,a.jsx)(u.MenuDivider,{}),(0,a.jsx)(u.MenuItem,{active:o.active,disabled:o.disabled,onClick:n,text:(0,d.highlightText)(l,i)},m(e))]},r):(0,a.jsx)(u.MenuItem,{active:o.active,disabled:o.disabled,onClick:n,text:(0,d.highlightText)(l,i)},m(e))},g=(e,t,n,o)=>{const i=m(t).toLocaleLowerCase(),r=e.toLowerCase();return o?i===r:i.includes(r)};t.QuickAddMenu=e=>{const{resolvedDependencies:t,targetNode:n}=e,o={left:e.pos.x,top:e.pos.y},{onRequestImportables:i}=(0,p.useDependenciesContext)(),[r,c]=s.useState();s.useEffect((()=>{i().then((e=>c(e.importables)))}),[i]);const d=(0,l.values)({...t,[n.id]:n}),m=d.map((e=>({type:"node",node:e}))),h=new Set(d.map((e=>e.id))),y=r?r.filter((e=>!h.has(e.node.id))).map((e=>({type:"import",importableNode:e}))):[],b=m.concat(y).concat({type:"value"});return(0,a.jsx)("div",{className:"quick-add-menu",style:o,children:(0,a.jsx)(f,{className:"quick-add-nodes-select",items:b,itemPredicate:g,itemRenderer:v,inputProps:{className:"quick-add-input"},noResults:(0,a.jsx)(u.MenuItem,{disabled:!0,text:"No results."}),onItemSelect:t=>e.onAdd(t),popoverProps:{isOpen:!0,onClose:()=>e.onClose()}})})}},71033:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(89440),t)},73470:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRuntimePlayer=void 0;const o=n(74762),i=n(64955),r=(0,o.debugLogger)("runtime-player");t.createRuntimePlayer=()=>{let e=0,t=[];let n=!1,a=Date.now(),s=e;const l=()=>requestAnimationFrame((()=>{const u=Date.now();s=e,e+=u-a,a=u,((e,n)=>{const a=t;t=[],a.length&&r(`Playing ${a.length} events from`,e,n),a.forEach((e=>{r("Playing event",e),(0,i.playEvent)(e),e.insId===o.ROOT_INS_ID&&e.type===o.DebuggerEventType.PROCESSING_CHANGE&&!1===e.val&&(r("Main instance is done processing, clearing runtime UI",e),c())}))})(s,e),n&&l()})),u=()=>{n=!1},c=()=>{document.querySelectorAll("[data-runtime]").forEach((e=>{e.removeAttribute("data-runtime")})),document.querySelectorAll("[data-runtime-queue]").forEach((e=>{e.removeAttribute("data-runtime-queue")})),t=[]};return{stop:u,start:function(t){void 0===t&&(t=0),n=!0,e=t,a=Date.now(),l()},addEvents:e=>{t.push(...e)},destroy:()=>{u(),c()},clear:c,status:()=>({running:n,currDt:e,lastDt:s,queue:t,last:a})}}},64955:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.playEvent=t.cancelTimers=void 0;const o=n(74762),i=n(30994),r=1500,a=(0,o.debugLogger)("runtime-player:play-event"),s=(e,t)=>e.type===o.DebuggerEventType.INPUT_CHANGE||e.type===o.DebuggerEventType.OUTPUT_CHANGE?`${(0,o.fullInsIdPath)(e.insId,e.ancestorsInsIds)}.${e.pinId}`:(0,o.fullInsIdPath)(e.insId,e.ancestorsInsIds);t.cancelTimers=new Map;t.playEvent=e=>{switch(e.type){case o.DebuggerEventType.INPUT_CHANGE:case o.DebuggerEventType.OUTPUT_CHANGE:{const{pinId:n,insId:l,ancestorsInsIds:u}=e,c=e.type===o.DebuggerEventType.INPUT_CHANGE?"input":"output",d=[(0,i.getPinDomId)({fullInsIdPath:(0,o.fullInsIdPath)(l,u),pinId:n,pinType:c,isMain:!0})];l!==o.ROOT_INS_ID&&d.push((0,i.getPinDomId)({fullInsIdPath:(0,o.fullInsIdPath)(l,u),pinId:n,pinType:c,isMain:!1})),d.forEach(((i,u)=>{const c=s(e);clearTimeout(t.cancelTimers.get(c));const d=document.getElementById(i),p=`${l}.${n}`,f=e.type===o.DebuggerEventType.OUTPUT_CHANGE?document.querySelectorAll(`[data-from-id="${p}"]`):[];if(d){clearTimeout(t.cancelTimers.get(c)),d.removeAttribute("data-runtime"),f.forEach((e=>{e.removeAttribute("data-runtime")})),setTimeout((()=>{d.setAttribute("data-runtime","active"),f.forEach((e=>{e.setAttribute("data-runtime","active")}))}),0);const n=setTimeout((()=>{d.removeAttribute("data-runtime"),f.forEach((e=>{e.removeAttribute("data-runtime")})),t.cancelTimers.delete(c)}),r);t.cancelTimers.set(s(e),n)}else a(`No DOM element with Id [${i}] found to play event`,e)}));break}case o.DebuggerEventType.PROCESSING_CHANGE:{const{insId:n,ancestorsInsIds:l}=e,u=[(0,i.getMainInstanceIndicatorDomId)(n,l)];n!==o.ROOT_INS_ID&&u.push((0,i.getInstanceDomId)(n,l)),u.forEach(((n,o)=>{var i;const l=s(e),u=null===(i=document.getElementById(n))||void 0===i?void 0:i.parentElement;if(u)if(!0===e.val)u.setAttribute("data-runtime","processing"),clearTimeout(t.cancelTimers.get(l));else{u.removeAttribute("data-runtime"),setTimeout((()=>{"error"!==u.getAttribute("data-runtime")&&u.setAttribute("data-runtime","done")}),0);const e=setTimeout((()=>{u.removeAttribute("data-runtime"),t.cancelTimers.delete(l)}),r);t.cancelTimers.set(l,e)}else a(`No DOM element with Id [${n}] found to play event`,e)}));break}case o.DebuggerEventType.ERROR:{const{insId:n,ancestorsInsIds:l}=e,u=[(0,i.getMainInstanceIndicatorDomId)(n,l)];n!==o.ROOT_INS_ID&&u.push((0,i.getInstanceDomId)(n,l)),u.forEach(((n,o)=>{var i;const l=s(e),u=null===(i=document.getElementById(n))||void 0===i?void 0:i.parentElement;if(!u)return void a(`No DOM element with Id [${n}] found to play event`,e);clearTimeout(t.cancelTimers.get(l)),u.removeAttribute("data-runtime"),setTimeout((()=>{u.setAttribute("data-runtime","error")}));const c=setTimeout((()=>{u.removeAttribute("data-runtime"),t.cancelTimers.delete(l)}),r);t.cancelTimers.set(l,c)}));const c={...e,type:o.DebuggerEventType.OUTPUT_CHANGE,pinId:o.ERROR_PIN_ID};(0,t.playEvent)(c);break}case o.DebuggerEventType.INPUTS_STATE_CHANGE:(0,o.entries)(e.val).forEach((t=>{let[n,r]=t;const{insId:s,ancestorsInsIds:l}=e,u=(0,i.getPinDomId)({fullInsIdPath:(0,o.fullInsIdPath)(s,l),pinId:n,pinType:"input",isMain:!1}),c=document.getElementById(u);c?r>0?c.setAttribute("data-runtime-queue",`${r}`):c.removeAttribute("data-runtime-queue"):a(`No DOM element with Id [${u}] found to play event`,e)}))}}},25804:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useDebounce=void 0;const o=n(70079);t.useDebounce=function(e,t){const[n,i]=(0,o.useState)(e);return(0,o.useEffect)((()=>{const n=setTimeout((()=>{i(e)}),t);return()=>{clearTimeout(n)}}),[e,t]),[n,i]}},7047:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getConnectionId=t.handleChangeNodeInputType=t.handleIoPinRename=t.handleInstanceDrag=t.getInstancesInRect=t.isJsxValue=t.getMiddleOfViewPort=t.fitViewPortToNode=t.fitViewPortToRect=t.centerBoardPosOnTarget=t.renderedPosToLogicalPos=t.logicalPosToRenderedPos=t.getEffectiveNodeDimensions=t.calcNodesPositions=t.calcSelectionBoxArea=t.animateViewPort=t.easeInOutNum=t.easeInOutPos=t.easeInOutQuad=t.center=t.distance=t.clamp=t.domToViewPort=t.roundNumber=t.createNewMacroNodeInstance=t.createNewNodeInstance=t.createNewInlineNodeInstance=t.parseInputOutputTypes=t.parsePromptValue=t.getSelectionBoxRect=t.findClosestPin=t.changePinConfig=t.getInstancePinConfig=t.emptyList=t.emptyObj=void 0;const a=r(n(53865)),s=n(30721),l=n(63521),u=n(74762),c=n(18243),d=n(74762),p=n(53159),f=n(83782),m=n(60190),v=n(38259),g=n(83651),h=n(41032);t.emptyObj={},t.emptyList=[],t.getInstancePinConfig=function(e,n,o){var i;const r=e.instances.find((e=>e.id===n));if(!r)throw new Error(`Instance ${n} not found`);return null!==(i=(r.inputConfig||t.emptyObj)[o])&&void 0!==i?i:(0,u.queueInputPinConfig)()};t.changePinConfig=(e,t,n,o)=>a.produce(e,(e=>{var i;const{instances:r}=e,a=r.find((e=>e.id===t));if(!a)throw new Error("blah");const s=null!==(i=a.inputConfig)&&void 0!==i?i:{};s[n]=o,e.instances=r.map((e=>e===a?{...a,inputConfig:s}:e))}));t.findClosestPin=(e,t,n,o,i,r,a)=>{const s=(0,u.nodeInstance)(e.id,e.id),l=(0,d.okeys)(e.inputs).map((e=>({id:e,type:"input",pos:(0,c.calcPinPosition)({insId:i,ancestorsInsIds:r,pinId:e,pinType:"input",boardPos:o,viewPort:a,isMain:!0}),ins:s}))),p=(0,d.okeys)(e.outputs).map((e=>({id:e,type:"output",pos:(0,c.calcPinPosition)({insId:i,ancestorsInsIds:r,pinId:e,pinType:"output",boardPos:o,viewPort:a,isMain:!0}),ins:s}))),f=[...l,...e.instances.reduce(((n,s)=>{const l=(0,h.safelyGetNodeDef)(s,t),d=(0,g.getVisibleInputs)(s,l,e.connections),p=(0,g.getVisibleOutputs)(s,l,e.connections);return[...n,...d.map((e=>({ins:s,type:"input",pos:(0,c.calcPinPosition)({insId:s.id,ancestorsInsIds:(0,u.fullInsIdPath)(i,r),pinId:e,pinType:"input",boardPos:o,viewPort:a,isMain:!1}),id:e}))),...p.map((e=>({ins:s,type:"output",pos:(0,c.calcPinPosition)({insId:s.id,ancestorsInsIds:(0,u.fullInsIdPath)(i,r),pinId:e,pinType:"output",boardPos:o,viewPort:a,isMain:!1}),id:e})))]}),[]),...p];let m={dis:1e5,item:f[0]};return f.forEach((e=>{const t=e.pos.x-n.x,o=e.pos.y-n.y,i=Math.sqrt(t*t+o*o);i<m.dis&&(m.dis=i,m.item=e)})),m.item};t.getSelectionBoxRect=(e,t)=>{const n=Math.min(e.x,t.x),o=Math.min(e.y,t.y);return{x:n,y:o,w:Math.max(e.x,t.x)-n,h:Math.max(e.y,t.y)-o}};t.parsePromptValue=e=>{if(null===e)return;const t=parseInt(e,10);let n=e;return t.toString()!=e||isNaN(t)||(n=t),n};t.parseInputOutputTypes=e=>{const[,t,n]=e.match(/node\((.+)\|(.+)\)/)||[],o=(0,d.entries)(JSON.parse(t)).map((e=>{let[t,n]=e;const o={type:n,optional:(0,d.isOptionalType)(t)};return[t.replace(/\?$/,""),o]})),i=(0,d.entries)(JSON.parse(n)).map((e=>{let[t,n]=e;const o={type:n,optional:(0,d.isOptionalType)(t)};return[t.replace(/\?$/,""),o]}));return{inputs:(0,d.fromEntries)(o),outputs:(0,d.fromEntries)(i)}};t.createNewInlineNodeInstance=function(e,t,n){void 0===t&&(t=-1*l.NODE_HEIGHT*1.5);const o=(0,u.inlineNodeInstance)(`${e.id}-${(0,d.randomInt)(999)}`,e,{},{x:0,y:0}),i=(0,p.calcNodeWidth)(o,e),{x:r,y:a}=n,s={x:r-i/2,y:a+t};return{...o,pos:s}};t.createNewNodeInstance=function(e,t,n,o){void 0===t&&(t=-1*l.NODE_HEIGHT*1.5);const i="string"==typeof e?(0,h.safelyGetNodeDef)(e,o):e;if(!i)throw new Error(`${e} node not found in resolvedNodes`);const r=(0,d.entries)(i.inputs).reduce(((e,t)=>{let[n,o]=t;return e}),{}),a=(0,u.isMacroNodeDefinition)(i)?(0,u.macroNodeInstance)((0,u.createInsId)(i),i.id,i.defaultData,r,{x:0,y:0}):(0,u.nodeInstance)((0,u.createInsId)(i),i.id,r,{x:0,y:0}),s=(0,p.calcNodeWidth)(a,i),{x:c,y:f}=n,m={x:c-s/2,y:f+t};return{...a,pos:m}};t.createNewMacroNodeInstance=function(e,t,n){void 0===t&&(t=-1*l.NODE_HEIGHT*1.5);const o=(0,u.macroNodeInstance)((0,s.createId)(),e.id,e.defaultData,{},{x:0,y:0}),{x:i,y:r}=n;return{...o,pos:{x:i-50,y:r+t}}};t.roundNumber=e=>Math.round(100*e)/100;t.domToViewPort=(e,n,o)=>({x:(0,t.roundNumber)(n.pos.x+e.x/n.zoom/o.zoom),y:(0,t.roundNumber)(n.pos.y+e.y/n.zoom/o.zoom)});t.clamp=(e,t,n)=>Math.max(e,Math.min(t,n));t.distance=(e,t)=>{const n=t.x-e.x,o=t.y-e.y;return Math.sqrt(n*n+o*o)};t.center=(e,t,n)=>{let{zoom:o}=n;const i=e.x+e.w/2,r=e.y+e.h/2,{w:a,h:s}=t;return{x:i-a/o/2,y:r-s/o/2}};t.easeInOutQuad=e=>e<.5?2*e*e:(4-2*e)*e-1;t.easeInOutPos=(e,n,o,i,r)=>{const a=(0,t.clamp)(0,1,(r-o)/i),s=(0,t.easeInOutQuad)(a),l=n.x-e.x,u=n.y-e.y;return{x:e.x+l*s,y:e.y+u*s}};t.easeInOutNum=(e,n,o,i,r)=>{const a=(0,t.clamp)(0,1,(r-o)/i);return e+(n-e)*(0,t.easeInOutQuad)(a)};t.animateViewPort=(e,n,o,i)=>{const r=(0,t.distance)(e.pos,n.pos),a=Date.now(),s=o;if(0===r)return void i(e);const l=()=>{const o=Date.now(),r=(0,t.easeInOutPos)(e.pos,n.pos,a,s,o),u=(0,t.easeInOutNum)(e.zoom,n.zoom,a,s,o);o-a<s?(i({pos:r,zoom:u}),requestAnimationFrame(l)):i({pos:r,zoom:u})};requestAnimationFrame(l)};t.calcSelectionBoxArea=e=>{const n=(0,t.getSelectionBoxRect)(e.from,e.to);return n.h*n.w};const y=(e,t,n,o)=>({left:n.x,right:n.x+e,top:n.y,bottom:n.y+t,tag:o,center:(0,u.calcCenter)({w:e,h:t,...n})});t.calcNodesPositions=(e,t)=>[...e.instances.map((e=>{const n=(0,p.calcNodeWidth)(e,(0,h.safelyGetNodeDef)(e,t)),o=l.NODE_HEIGHT;return y(n,o,e.pos,e.id)})),...(0,d.okeys)(e.inputs).map((t=>{const n=(0,f.calcNodeIoWidth)(t),o=l.NODE_HEIGHT,i=e.inputsPosition[t]||{x:0,y:0};return y(n,o,i,"input_"+t)})),...(0,d.okeys)(e.outputs).map((t=>{const n=(0,f.calcNodeIoWidth)(t),o=l.NODE_HEIGHT,i=e.outputsPosition[t]||{x:0,y:0};return y(n,o,i,"output"+t)}))];t.getEffectiveNodeDimensions=(e,n)=>{const o=(0,t.calcNodesPositions)(e,n),i=o[0]||{left:0,right:0,top:0,bottom:0},r=o.reduce(((e,t)=>t.left<e?t.left:e),i.left),a=o.reduce(((e,t)=>t.right>e?t.right:e),i.right),s=o.reduce(((e,t)=>t.top<e?t.top:e),i.top),l=a-r,c=o.reduce(((e,t)=>t.bottom>e?t.bottom:e),i.bottom)-s,d={x:r,y:s};return{size:{width:l,height:c},pos:d,center:(0,u.calcCenter)({w:l,h:c,...d})}};t.logicalPosToRenderedPos=(e,t)=>{const n=(0,m.vSub)(e,t.pos);return(0,m.vMul)(n,t.zoom)};t.renderedPosToLogicalPos=(e,t)=>{const n=(0,m.vDiv)(e,t.zoom);return(0,m.vAdd)(t.pos,n)};t.centerBoardPosOnTarget=(e,n,o,i)=>{const r=(0,t.logicalPosToRenderedPos)(e,i),a=(0,t.renderedPosToLogicalPos)(r,{...i,zoom:o}),s=Math.max(e.x,a.x)-Math.min(e.x,a.x),l=Math.max(e.y,a.y)-Math.min(e.y,a.y);return{x:o>i.zoom?i.pos.x+s:i.pos.x-s,y:o>i.zoom?i.pos.y+l:i.pos.y-l}};t.fitViewPortToRect=function(e,n,o){void 0===o&&(o=[20,150]);const i=o[0],r=o[1],a=e.w+i,s=e.h+r,l=n.width/a,u=n.height/s,c=Math.min(l,u)/1.15,d=(0,t.clamp)(.3,1.2,c);return{zoom:d,pos:{x:e.x-n.width/2/d,y:e.y-n.height/2/d+20}}};t.fitViewPortToNode=function(e,n,o,i){void 0===i&&(i=[20,150]);const{size:r,center:a}=(0,t.getEffectiveNodeDimensions)(e,n);return(0,t.fitViewPortToRect)({x:a.x,y:a.y,w:r.width,h:r.height},o,i)};t.getMiddleOfViewPort=(e,n)=>{const o={x:n.width/2,y:n.height/2};return(0,t.renderedPosToLogicalPos)(o,e)};t.isJsxValue=e=>{const t=e=>(0,d.isDefined)(e.ref)&&(0,d.isDefined)(e.type)&&(0,d.isDefined)(e.props);try{const n=JSON.parse(e);return t(n)||Array.isArray(n)&&t(n[0])}catch(n){return!1}};t.getInstancesInRect=(e,n,o,i,r,a,s)=>{const{from:c,to:d}=e,f=(0,t.getSelectionBoxRect)(c,d);return r.filter((e=>{const{pos:t}=e,i={...t,w:(0,p.calcNodeWidth)(e,(0,h.safelyGetNodeDef)(e,n))*o.zoom*s.zoom,h:l.NODE_HEIGHT*o.zoom*s.zoom};return(0,u.intersectRect)(f,i)||(0,u.intersectRect)(i,f)})).map((e=>e.id))};t.handleInstanceDrag=(e,t,n,o,i,r)=>{o.preventDefault(),o.stopPropagation();const s=(0,m.vSub)(n,t.pos);let l;const u=a.produce(e,(e=>{const a=e.instances.find((e=>e.id===t.id));if(!a)throw new Error("impossible state dragging instance that does not exist");!o.shiftKey&&r&&(l=[r]);const u=e.instances.filter((e=>i.includes(e.id)&&e!==a)),c=[a,...u],d=(0,v.getLeafInstancesOfSelection)(c,e.instances,e.connections);[...u,...d].forEach((e=>{e.pos=(0,m.vAdd)(e.pos,s)})),a.pos=n,!o.shiftKey&&r&&(l=[r])}));return{newValue:u,newSelected:l}};t.handleIoPinRename=(e,t,n,o)=>a.produce(e,(e=>{"input"===t?(e.inputs[o]=e.inputs[n],e.inputsPosition[o]=e.inputsPosition[n],delete e.inputs[n],e.connections=e.connections.map((e=>(0,u.isExternalConnectionNode)(e.from)&&e.from.pinId===n?{...e,from:{...e.from,pinId:o}}:e))):(e.outputs[o]=e.outputs[n],e.outputsPosition[o]=e.outputsPosition[n],e.connections=e.connections.map((e=>(0,u.isExternalConnectionNode)(e.to)&&e.to.pinId===n?{...e,to:{...e.to,pinId:o}}:e)),e.completionOutputs=(e.completionOutputs||[]).map((e=>e.split("+").map((e=>e===n?o:n)).join("+"))),delete e.outputs[n])}));t.handleChangeNodeInputType=(e,t,n)=>a.produce(e,(e=>{const o=e.inputs[t];if(!o)throw new Error("Wat");o.mode=n}));t.getConnectionId=e=>{const{from:t,to:n}=e,{insId:o,pinId:i}=t,{insId:r,pinId:a}=n;return`${o}${i}${r}${a}`}},42403:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createEditorClient=void 0;const i=n(74762),r=o(n(18706)),a=n(32048),s=n(31758),l=(0,i.debugLogger)("remote-debugger:editor-client");t.createEditorClient=(e,t)=>{const n=new URL(e),o=(0,a.io)(n.origin,{path:`${"/"===n.pathname?"":n.pathname}/socket.io/editor`,timeout:3e4});return o.emit("join-room-editor",t),{emitChange:e=>{o.emit(s.DebuggerServerEventType.CHANGE_EVENT_NAME,e)},emitBreakpointsChange:e=>{o.emit(s.DebuggerServerEventType.UPDATE_BREAKPOINTS,e)},interceptInput:e=>{o.emit(s.DebuggerServerEventType.INPUT_VALUE_OVERRIDE,e)},interceptOutput:e=>{o.emit(s.DebuggerServerEventType.OUTPUT_VALUE_OVERRIDE,e)},onRuntimeReady:e=>(o.on(s.DebuggerServerEventType.RUNTIME_READY,e),()=>o.off(s.DebuggerServerEventType.RUNTIME_READY,e)),onChangeAwk:e=>(o.on(s.DebuggerServerEventType.CHANGE_AWK,e),()=>o.off(s.DebuggerServerEventType.CHANGE_AWK,e)),onChangeError:e=>(o.on(s.DebuggerServerEventType.CHANGE_ERROR,e),()=>o.off(s.DebuggerServerEventType.CHANGE_ERROR,e)),onIsAlive:e=>(o.on(s.DebuggerServerEventType.IS_ALIVE,e),()=>o.off(s.DebuggerServerEventType.IS_ALIVE,e)),emitInputValue:(e,t)=>{l(`Emitting push input value to ${e} %o`,t),o.emit(s.DebuggerServerEventType.PUSH_INPUT_VALUE,{pinId:e,value:t})},destroy:()=>{o.disconnect(),(0,s.enumToArray)(s.DebuggerServerEventType).forEach((e=>o.off(e)))},onDisconnect:e=>(o.on("disconnect",e),()=>o.off("disconnect",e)),debugInfo:()=>`Remote debugger for ${e}`,onBatchedEvents:e=>(o.on(s.DebuggerServerEventType.EVENTS_BATCH,e),()=>o.off(s.DebuggerServerEventType.EVENTS_BATCH,e)),requestState:()=>r.default.get(`${e}/state`).then((e=>e.data.state)),getHistory:n=>r.default.get(`${e}/history`,{params:{insId:n.insId,pinId:n.pinId,limit:n.limit,executionId:t}}).then((e=>e.data)),clearHistory:()=>r.default.delete(`${e}/history`).then((()=>{})),triggerNode:(t,n)=>r.default.post(`${e}/trigger`,{nodeId:t,inputs:n}).then((e=>e.data))}}},58066:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeData=void 0;const o=n(74762),i=n(36783),r=(0,o.debugLogger)("remote-debugger:normalize-data");t.normalizeData=e=>{if(e instanceof Error)return(0,i.serializeError)(e);if("object"==typeof e&&null!==e){e={...e};const t=new WeakSet,n=e=>{if("bigint"==typeof e)return e.toString();if("object"!=typeof e||Array.isArray(e))return e;if(null===e)return e;if(t.has(e))return"[Circular]";try{t.add(e)}catch(o){r("Error adding to WeakSet","data:",e,"type:",typeof e,"error:",o)}if(Array.isArray(e))return e.map(n);if("object"==typeof e){const t={};for(const o in e)t[o]=n(e[o]);return t}return e};return n(e)}return e}},39641:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRuntimeClient=t.DEFAULT_DT_SCALE=void 0;const o=n(74762),i=n(32048),r=n(31758),a=n(58066),s=(0,o.debugLogger)("remote-debugger:runtime-client");t.DEFAULT_DT_SCALE=1;t.createRuntimeClient=(e,t)=>{const n=new URL(e),l=(0,i.io)(n.origin,{path:`${"/"===n.pathname?"":n.pathname}/socket.io/runtime`,timeout:1e3,reconnectionAttempts:3});l.emit("join-room-runtime",t),l.on("connection",(e=>{e.join(t)}));let u=new Set;l.on(r.DebuggerServerEventType.UPDATE_BREAKPOINTS,(e=>{u=new Set(e)}));const c=(0,o.cappedArrayDebounce)((e=>{s(`Emitting debounced batched events - ${e.length}`),l.emit(r.DebuggerServerEventType.EVENTS_BATCH,e)}),100,200);return{onChange:e=>(l.on(r.DebuggerServerEventType.CHANGE_EVENT_NAME,e),()=>l.off(r.DebuggerServerEventType.CHANGE_EVENT_NAME,e)),onInput:e=>(l.on(r.DebuggerServerEventType.PUSH_INPUT_VALUE,e),()=>l.off(r.DebuggerServerEventType.PUSH_INPUT_VALUE,e)),emitEvent:e=>{s(`Emitting event ${e.type} change event of ${e.insId}`),e.val=(0,a.normalizeData)(e.val),c.addItem({...e,time:Date.now()})},emitRuntimeReady:()=>{l.emit(r.DebuggerServerEventType.RUNTIME_READY,{})},emitChangeAwk:()=>{l.emit(r.DebuggerServerEventType.CHANGE_AWK,{})},emitChangeError:e=>{l.emit(r.DebuggerServerEventType.CHANGE_ERROR,{error:e})},emitIsAlive:e=>{l.emit(r.DebuggerServerEventType.IS_ALIVE,{time:e})},destroy:async()=>{c.pendingItems()&&(c.flush(),await(0,o.delay)(100)),(0,r.enumToArray)(r.DebuggerServerEventType).forEach((e=>l.off(e))),l.disconnect()},onDisconnect:e=>(l.on("disconnect",e),()=>l.off("disconnect",e)),waitForConnection:()=>new Promise(((e,t)=>{l.connected?e():(l.on("connect_error",(e=>{t(`Socket connect error: ${e}`)})),l.on("connect",(()=>{e()})))}))}}},31758:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DebuggerServerEventType=t.enumToArray=t.isNumber=t.isSimpleType=t.valuePreview=t.toString=void 0;const o=n(36783);t.toString=e=>{if("object"===typeof e){if(e instanceof Error)return JSON.stringify((0,o.serializeError)(e));try{return JSON.stringify(e).substr(0,250)}catch(t){return"Object (cannot stringify)"}}return`${e}`.substr(0,250)};t.valuePreview=e=>(0,t.toString)(e).substr(0,100);t.isSimpleType=e=>["number","string","boolean"].includes(typeof e);t.isNumber=e=>!1===isNaN(Number(e)),t.enumToArray=function(e){return Object.keys(e).filter(t.isNumber).map((t=>e[t]))},function(e){e.RUNTIME_READY="runtime-ready",e.CHANGE_EVENT_NAME="change",e.PUSH_INPUT_VALUE="push-input-value",e.CHANGE_AWK="live-change-awk",e.CHANGE_ERROR="live-change-error",e.IS_ALIVE="is-alive",e.UPDATE_BREAKPOINTS="update-breakpoints",e.INPUT_VALUE_OVERRIDE="input-value-override",e.OUTPUT_VALUE_OVERRIDE="output-value-override",e.INPUT_VALUE_CHANGE="input-value-changed",e.OUTPUT_VALUE_CHANGE="output-value-changed",e.PROCESSING_CHANGE="processing-changed",e.INPUTS_STATE_CHANGE="inputs-state-changed",e.NODE_ERROR="node-error",e.EVENTS_BATCH="events-batch"}(t.DebuggerServerEventType||(t.DebuggerServerEventType={}))},96233:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(31758),t),i(n(42403),t),i(n(39641),t)},11607:(e,t)=>{"use strict";t.Z=void 0,t.Z=function(e,t,n){var o,i;const r=t.definitionBuilder(n.macroData),a=t.runFnBuilder(n.macroData),s=`${e}${t.id}__${n.id}`;return{...r,defaultStyle:null!==(o=r.defaultStyle)&&void 0!==o?o:t.defaultStyle,displayName:null!==(i=r.displayName)&&void 0!==i?i:t.id,namespace:t.namespace,id:s,run:a}}},20740:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Log=void 0;t.Log={id:"Log",defaultStyle:{icon:"fa-terminal"},namespace:"Console",description:"Logs a value to the console",inputs:{value:{description:"Value to log"}},outputs:{},run:e=>{let{value:t}=e;return console.log(t)}}},50461:(__unused_webpack_module,exports)=>{"use strict";var ConditionType;function conditionalConfigToDisplayName(e){const{type:t}=e.condition,n="static"===e.compareTo.mode?JSON.stringify(e.compareTo.value):"`compareTo`";switch(t){case ConditionType.Equal:return`Equals ${n}`;case ConditionType.NotEqual:return`Does not equal ${n}`;case ConditionType.GreaterThan:return`Greater than ${n}`;case ConditionType.GreaterThanOrEqual:return`Greater than or equal to ${n}`;case ConditionType.LessThan:return`Less than ${n}`;case ConditionType.LessThanOrEqual:return`Less than or equal to ${n}`;case ConditionType.Contains:return`Contains ${n}`;case ConditionType.NotContains:return`Does not contain ${n}`;case ConditionType.RegexMatches:return`Matches regex ${n}`;case ConditionType.IsEmpty:return"Is empty";case ConditionType.IsNotEmpty:return"Is not empty";case ConditionType.IsNull:return"Is null";case ConditionType.IsNotNull:return"Is not null";case ConditionType.IsUndefined:return"Is undefined";case ConditionType.IsNotUndefined:return"Is not undefined";case ConditionType.HasProperty:return`Has property ${n}`;case ConditionType.LengthEqual:return`Length equals ${n}`;case ConditionType.LengthNotEqual:return`Length does not equal ${n}`;case ConditionType.LengthGreaterThan:return`Length greater than ${n}`;case ConditionType.LengthLessThan:return`Length less than ${n}`;case ConditionType.TypeEquals:return`Type equals ${n}`;case ConditionType.Expression:return e.condition.data}}function calculateCondition(val1,val2,condition){switch(condition.type){case ConditionType.Equal:return val1===val2;case ConditionType.NotEqual:return val1!==val2;case ConditionType.GreaterThan:return val1>val2;case ConditionType.GreaterThanOrEqual:return val1>=val2;case ConditionType.LessThan:return val1<val2;case ConditionType.LessThanOrEqual:return val1<=val2;case ConditionType.Contains:return val1.includes(val2);case ConditionType.NotContains:return!val1.includes(val2);case ConditionType.IsEmpty:return""===val1;case ConditionType.IsNotEmpty:return""!==val1;case ConditionType.IsNull:return null===val1;case ConditionType.IsNotNull:return null!==val1;case ConditionType.IsUndefined:return void 0===val1;case ConditionType.IsNotUndefined:return void 0!==val1;case ConditionType.HasProperty:return val1.hasOwnProperty(val2);case ConditionType.LengthEqual:return val1.length===val2;case ConditionType.LengthNotEqual:return val1.length!==val2;case ConditionType.LengthGreaterThan:return val1.length>val2;case ConditionType.LengthLessThan:return val1.length<val2;case ConditionType.TypeEquals:return typeof val1===val2;case ConditionType.RegexMatches:return new RegExp(val1).test(val2);case ConditionType.Expression:try{const fnStr=`(value, compareTo) => ${condition.data}`,fn=eval(fnStr);return fn(val1,val2)}catch(e){return console.error(e),!1}}}function getProperty(e,t){const n=t.split(".").filter((e=>""!==e));let o=e;for(const i of n)o=o[i];return o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Conditional=exports.ConditionType=void 0,function(e){e.Equal="EQUAL",e.NotEqual="NOT_EQUAL",e.GreaterThan="GREATER_THAN",e.GreaterThanOrEqual="GREATER_THAN_OR_EQUAL",e.LessThan="LESS_THAN",e.LessThanOrEqual="LESS_THAN_OR_EQUAL",e.Contains="CONTAINS",e.NotContains="NOT_CONTAINS",e.RegexMatches="REGEX_MATCHES",e.IsEmpty="IS_EMPTY",e.IsNotEmpty="IS_NOT_EMPTY",e.IsNull="IS_NULL",e.IsNotNull="IS_NOT_NULL",e.IsUndefined="IS_UNDEFINED",e.IsNotUndefined="IS_NOT_UNDEFINED",e.HasProperty="HAS_PROPERTY",e.LengthEqual="LENGTH_EQUAL",e.LengthNotEqual="LENGTH_NOT_EQUAL",e.LengthGreaterThan="LENGTH_GREATER_THAN",e.LengthLessThan="LENGTH_LESS_THAN",e.TypeEquals="TYPE_EQUALS",e.Expression="EXPRESSION"}(ConditionType=exports.ConditionType||(exports.ConditionType={})),exports.Conditional={id:"Conditional",namespace:"Control Flow",description:"Evaluates a condition and emits the value of the matching case",defaultStyle:{icon:"circle-question"},runFnBuilder:config=>(inputs,outputs,adv)=>{const{compareTo:argType,propertyPath:propertyPath,condition:condition,trueValue:trueValue,falseValue:falseValue}=config,{true:trueOutput,false:falseOutput}=outputs,comparedValue="static"===argType.mode?argType.value:inputs.compareTo,leftSide=propertyPath?getProperty(inputs.value,propertyPath):inputs.value,rightSide="dynamic"===config.compareTo.mode&&config.compareTo.propertyPath?getProperty(comparedValue,config.compareTo.propertyPath):comparedValue,result=calculateCondition(leftSide,rightSide,condition),outputToUse=result?trueOutput:falseOutput,configToUse=result?trueValue:falseValue;if("value"===configToUse.type)outputToUse.next(inputs.value);else if("compareTo"===configToUse.type)outputToUse.next(comparedValue);else{if("expression"!==configToUse.type)throw new Error(`Unknown type ${configToUse.type}`);{const expression=configToUse.data;try{const fnStr=`(value, compareTo) => ${expression}`,fn=eval(fnStr);outputToUse.next(fn(inputs.value,comparedValue))}catch(e){adv.onError(e)}}}},definitionBuilder:e=>{const t=["value"];"dynamic"===e.compareTo.mode&&t.push("compareTo");return{displayName:conditionalConfigToDisplayName(e),description:"Evaluates a condition and emits the value of the matching case",inputs:Object.fromEntries(t.map((e=>[e,{}]))),outputs:{true:{description:"Emits the value if the condition is true"},false:{description:"Emits the value if the condition is false"}}}},defaultData:{compareTo:{mode:"dynamic",propertyPath:""},propertyPath:"",condition:{type:ConditionType.Equal},trueValue:{type:"value"},falseValue:{type:"value"}},editorConfig:{type:"custom",editorComponentBundlePath:"../../../dist/ui/Conditional.js"}}},66257:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.EmitOnTrigger=t.BooleanSplit=t.Subscribe=t.Publish=t.RoundRobin=t.LimitTimes=void 0,i(n(50461),t),i(n(93448),t);const r=n(11253),a="Control Flow";t.LimitTimes={id:"Limit Times",namespace:a,description:"Item will be emitted until the limit is reached",inputs:{item:{mode:"required",description:"The item to emit"},times:{mode:"required",description:"The number of times to emit the item"},reset:{mode:"optional",description:"Reset the counter"}},outputs:{ok:{}},reactiveInputs:["item","reset"],completionOutputs:[],run:function(e,t,n){const{state:o}=n,{item:i,times:r,reset:a}=e,{ok:s}=t;if(void 0!==a)return void o.set("val",0);let l=o.get("val")||0;l++,o.set("val",l),l>=r?n.onError(new Error(`Limit of ${r} reached`)):s.next(i)}},t.RoundRobin={id:"RoundRobin",defaultStyle:{icon:"rotate"},displayName:"Round Robin",namespace:a,defaultData:{count:3},definitionBuilder:e=>{let{count:t}=e;return{displayName:`Round Robin ${t}`,description:`Item will be emitted to one of the ${t} outputs in a round robin fashion`,inputs:{value:{mode:"required",description:"The value to emit"}},completionOutputs:[],reactiveInputs:["value"],outputs:Array.from({length:t}).reduce(((e,n,o)=>({...e,[`r${o+1}`]:{description:`The ${o+1} output in order to emit the value received. After emitting a value, it moves to "r${(o+2)%t}"'s turn.`}})),{})}},runFnBuilder:e=>{let{count:t}=e;return(e,n,o)=>{const{state:i}=o,r=Array.from({length:t}).map(((e,t)=>n[`r${t+1}`])),a=i.get("curr")||0,s=r[a],l=(a+1)%t;i.set("curr",l),s.next(e.item)}},editorConfig:{type:"structured",fields:[{type:{value:"number"},configKey:"count",label:"Count",defaultValue:3,allowDynamic:!1}]}},t.Publish={id:"Publish",namespace:a,description:"Publishes a value by a key to all listeners in the current flow. Use 'Subscribe' to listen to events.",inputs:{key:{mode:"required",description:"A key to use to subscribe to values"},value:{mode:"required"}},outputs:{},run:function(e,t,n){const o=`${n.ancestorsInsIds}__${e.key}`;r.publish(o,e.value)}},t.Subscribe={id:"Subscribe",namespace:a,description:"Subscribes to a value published by a key. Use 'Publish' to publish values.",inputs:{key:{mode:"required",description:"A key to use to subscribe to values"},initial:{mode:"required-if-connected",description:"If passed will be published has the first value"}},completionOutputs:[],outputs:{value:{description:"The value published by the key"}},run:function(e,t,n){const{value:o}=t,i=`${n.ancestorsInsIds}__${e.key}`,a=r.subscribe(i,((e,t)=>{o.next(t)}));void 0!==e.initial&&o.next(e.initial),n.onCleanup((()=>{r.unsubscribe(a)}))}},t.BooleanSplit={namespace:a,id:"Boolean Split",description:"Splits a boolean value into two outputs",inputs:{value:{mode:"required",description:"Boolean value"},trueValue:{mode:"required-if-connected",description:"Value to emit if the input is true. Defaults to true"},falseValue:{mode:"required-if-connected",description:"Value to emit if the input is false. Defaults to false"}},outputs:{true:{description:"The value is true"},false:{description:"The value is false"}},run:function(e,t){const{true:n,false:o}=t,{value:i,trueValue:r,falseValue:a}=e;i?n.next(null==r||r):o.next(null!=a&&a)}},t.EmitOnTrigger={namespace:a,id:"Emit on Trigger",description:"Emits the value when the trigger input receives any value",inputs:{value:{mode:"required",description:"The value to emit"},trigger:{mode:"required",description:"The trigger to emit the value"}},outputs:{result:{description:"The value emitted"}},run:function(e,t){const{result:n}=t,{value:o,trigger:i}=e;void 0!==i&&n.next(o)}}},93448:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Switch=void 0,exports.Switch={id:"Switch",namespace:"Control Flow",defaultStyle:{icon:"sitemap"},description:"Allows you to switch between multiple outputs based on the value of one input or more, using code expressions",runFnBuilder:config=>{function evalExpression(expression,inputs){return eval(`(inputs) => (${expression})`)(inputs)}return(e,t,n)=>{const{defaultCase:o,cases:i}=config;let r=!1;for(const{name:s,conditionExpression:l,outputExpression:u}of i)try{const o=evalExpression(l,e);if(console.log({condition:o,conditionExpression:l,inputs:e}),o){try{console.log(4242,o),t[s].next(evalExpression(u,e)),r=!0}catch(a){n.onError(a)}break}}catch(a){n.onError(a)}!r&&o.enabled&&t.default.next(evalExpression(o.outputExpression,e))}},definitionBuilder:e=>{const{inputs:t,cases:n,defaultCase:o}=e,i=t.map(((e,t)=>({name:e,description:`Switch input no. ${t+1}`}))),r=n.map(((e,t)=>{let{name:n}=e;return{name:n,description:`Switch output no. ${t+1}`}}));return o.enabled&&r.push({name:"default",description:"Switch default case output"}),{inputs:i.reduce(((e,t)=>{let{name:n,description:o}=t;return e[n]={description:o},e}),{}),outputs:r.reduce(((e,t)=>{let{name:n,description:o}=t;return e[n]={description:o},e}),{}),displayName:"Switch"}},defaultData:{inputs:["value"],cases:[{name:"case1",conditionExpression:"",outputExpression:"inputs.value"}],defaultCase:{enabled:!0,outputExpression:"input.value"}},editorConfig:{type:"custom",editorComponentBundlePath:"../../../dist/ui/Switch.js"}}},35948:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DateToTimezoneOffset=t.DateToDayOfWeek=t.DateToMilliseconds=t.DateToSeconds=t.DateToMinutes=t.DateToHours=t.DateToDay=t.MonthToDate=t.DateToYear=t.DateToUnixTime=t.DateToISOString=t.DateToString=t.DateFromISOString=t.DateFromString=t.DateFromUnixTime=t.NowUnixTime=t.NowISOString=t.NowString=t.Now=void 0;const n="Dates";t.Now={id:"Now",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Returns the current date and time",inputs:{},outputs:{now:{description:"Current date and time"}},run:(e,t)=>{let{now:n}=t;return n.next(new Date)}},t.NowString={id:"Now String",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Returns the current date and time as a string",inputs:{},outputs:{now:{description:"Current date and time"}},run:(e,t)=>{let{now:n}=t;return n.next((new Date).toString())}},t.NowISOString={id:"Now ISO String",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Returns the current date and time as a string in ISO format",inputs:{},outputs:{now:{description:"Current date and time"}},run:(e,t)=>{let{now:n}=t;return n.next((new Date).toISOString())}},t.NowUnixTime={id:"Now Unix Time",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Returns the current date and time as a Unix time",inputs:{},outputs:{now:{description:"Current date and time"}},run:(e,t)=>{let{now:n}=t;return n.next((new Date).getTime())}},t.DateFromUnixTime={id:"Date From Unix Time",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Creates a date from a Unix time",inputs:{time:{description:"Unix time"}},outputs:{date:{description:"Date"}},run:(e,t)=>{let{time:n}=e,{date:o}=t;return o.next(new Date(n))}},t.DateFromString={id:"Date From String",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Creates a date from a string",inputs:{string:{description:"String"}},outputs:{date:{description:"Date"}},run:(e,t)=>{let{string:n}=e,{date:o}=t;return o.next(new Date(n))}},t.DateFromISOString={id:"Date From ISO String",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Creates a date from an ISO string",inputs:{string:{description:"String"}},outputs:{date:{description:"Date"}},run:async(e,t,n)=>{let{string:o}=e,{date:i}=t,{onError:r}=n;try{i.next(new Date(o))}catch(a){console.error("Error in node",a),r(a)}}},t.DateToString={id:"Date To String",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Converts a date to a string",inputs:{date:{description:"Date"}},outputs:{string:{description:"String"}},run:(e,t)=>{let{date:n}=e,{string:o}=t;return o.next(n.toString())}},t.DateToISOString={id:"Date To ISO String",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Converts a date to an ISO string",inputs:{date:{description:"Date"}},outputs:{string:{description:"String"}},run:(e,t)=>{let{date:n}=e,{string:o}=t;return o.next(n.toISOString())}},t.DateToUnixTime={id:"Date To Unix Time",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Converts a date to a Unix time",inputs:{date:{description:"Date"}},outputs:{time:{description:"Unix time"}},run:(e,t)=>{let{date:n}=e,{time:o}=t;return o.next(n.getTime())}},t.DateToYear={id:"Date To Year",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Converts a date to a year",inputs:{date:{description:"Date"}},outputs:{year:{description:"Year"}},run:(e,t)=>{let{date:n}=e,{year:o}=t;return o.next(n.getFullYear())}},t.MonthToDate={id:"Month To Date",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Converts a date to a month",inputs:{date:{description:"Date"}},outputs:{month:{description:"Month"}},run:(e,t)=>{let{date:n}=e,{month:o}=t;return o.next(n.getMonth())}},t.DateToDay={id:"Date To Day",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Converts a date to a day",inputs:{date:{description:"Date"}},outputs:{day:{description:"Day"}},run:(e,t)=>{let{date:n}=e,{day:o}=t;return o.next(n.getDate())}},t.DateToHours={id:"Date To Hours",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Converts a date to hours",inputs:{date:{description:"Date"}},outputs:{hours:{description:"Hours"}},run:(e,t)=>{let{date:n}=e,{hours:o}=t;return o.next(n.getHours())}},t.DateToMinutes={id:"Date To Minutes",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Converts a date to minutes",inputs:{date:{description:"Date"}},outputs:{minutes:{description:"Minutes"}},run:(e,t)=>{let{date:n}=e,{minutes:o}=t;return o.next(n.getMinutes())}},t.DateToSeconds={id:"Date To Seconds",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Converts a date to seconds",inputs:{date:{description:"Date"}},outputs:{seconds:{description:"Seconds"}},run:(e,t)=>{let{date:n}=e,{seconds:o}=t;return o.next(n.getSeconds())}},t.DateToMilliseconds={id:"Date To Milliseconds",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Converts a date to milliseconds",inputs:{date:{description:"Date"}},outputs:{milliseconds:{description:"Milliseconds"}},run:(e,t)=>{let{date:n}=e,{milliseconds:o}=t;return o.next(n.getMilliseconds())}},t.DateToDayOfWeek={id:"Date To Day Of Week",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Converts a date to a day of the week",inputs:{date:{description:"Date"}},outputs:{day:{description:"Day"}},run:(e,t)=>{let{date:n}=e,{day:o}=t;return o.next(n.getDay())}},t.DateToTimezoneOffset={id:"Date To Timezone Offset",defaultStyle:{icon:"fa-calendar"},namespace:n,description:"Converts a date to a timezone offset",inputs:{date:{description:"Date"}},outputs:{offset:{description:"Offset"}},run:(e,t)=>{let{date:n}=e,{offset:o}=t;return o.next(n.getTimezoneOffset())}}},50544:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Http=void 0;const i=o(n(18706));t.Http={id:"Http",namespace:"HTTP",displayName:"HTTP Request",description:"Performs a HTTP request to a URL and emits the response data",defaultStyle:{icon:"globe"},runFnBuilder:e=>(t,n,o)=>{const{method:r,url:a,headers:s,params:l,data:u}=e,c="dynamic"===r.mode?t.method:r.value,d="dynamic"===a.mode?t.url:a.value,p="dynamic"===(null==s?void 0:s.mode)?t.headers:null==s?void 0:s.value,f="dynamic"===(null==l?void 0:l.mode)?t.params:null==l?void 0:l.value,m="dynamic"===(null==u?void 0:u.mode)?t.data:null==u?void 0:u.value,v={method:c,headers:p,params:f};return i.default.request({url:d,data:m,...v}).then((e=>n.data.next(e.data))).catch((e=>o.onError(e)))},definitionBuilder:e=>{const t=Object.entries(e).filter((e=>{let[t,n]=e;return"dynamic"===n.mode})).map((e=>{let[t]=e;return t})),n="static"===e.method.mode?e.method.value:void 0,o=n?` ${n}`:"";return{displayName:`HTTP${o}${"static"===e.url.mode?` ${e.url.value.replace(/https?\:\/\//,"")}`:""}`,description:`Performs a ${o} HTTP request to ${"static"===e.url.mode?e.url.value:"the received URL"} and emits the response data`,inputs:Object.fromEntries(t.map((e=>[e,{}]))),outputs:{data:{displayName:"Data",description:"Emits the response data"}}}},defaultData:{method:{mode:"static",value:"GET"},url:{mode:"static",value:"https://www.example.com"},headers:{mode:"static",value:{}},params:{mode:"static",value:{}},data:{mode:"static",value:{}}},editorConfig:{type:"structured",fields:[{type:{value:"string"},configKey:"url",label:"URL",defaultValue:"https://www.example.com",allowDynamic:!0},{type:{value:"select",items:["GET","POST","PUT","DELETE","PATCH"].map((e=>({label:e,value:e})))},configKey:"method",label:"Method",defaultValue:"GET",allowDynamic:!0},{type:{value:"json",label:""},configKey:"headers",label:"Headers",defaultValue:{},allowDynamic:!0},{type:{value:"json"},configKey:"params",label:"Query Parameters",defaultValue:{},allowDynamic:!0},{type:{value:"json"},configKey:"data",label:"Request Body",defaultValue:{},allowDynamic:!0}]}}},62737:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Collect=void 0;const o=n(74762),i=n(29967);t.Collect={id:"Collect",displayName:"Collect",description:"Collects values into a list. Over time, count, or trigger.",namespace:"Lists",defaultStyle:{icon:"bucket"},defaultData:{strategy:"count",count:{mode:"static",value:3}},definitionBuilder:e=>{const t={value:{description:"Value to collect"}};"time"===e.strategy&&"dynamic"===e.time.mode?t.time={description:"Time in milliseconds"}:"count"===e.strategy&&"dynamic"===e.count.mode?t.count={description:"Number of values to collect"}:"trigger"===e.strategy&&(t.trigger={mode:"optional",description:"Emit a value here to output a list out of collected values"});return{displayName:"time"===e.strategy?"static"===e.time.mode?`Collect over ${(0,i.timeToString)(e.time.value)}`:"Collect over time":"count"===e.strategy?"static"===e.count.mode?`Collect ${e.count.value} values`:"Collect values":"Collect on trigger",description:"time"===e.strategy?"static"===e.time.mode?`Emits a list of all values received, from the first value and until ${(0,i.timeToString)(e.time.value)} pass.`:"Emits a list of all values received, from the first value and until the specified amount of time passes.":"count"===e.strategy?"static"===e.count.mode?`Collect ${e.count.value} values and emit a list of them.`:"Collect a specified amount of values and emit a list of them.":"Emits a list of all values received up until any value is received to the 'trigger' input.",inputs:t,reactiveInputs:["value",..."trigger"===e.strategy?["trigger"]:[]],outputs:{list:{description:"Collected values"}},completionOutputs:["list"]}},runFnBuilder:e=>async(t,n,i)=>{let{value:r,time:a,count:s,trigger:l}=t;const u=i.state.get("list")||[];if((0,o.isDefined)(r)&&(u.push(r),i.state.set("list",u)),"time"===e.strategy){const t="dynamic"===e.time.mode?a:e.time.value;if(!i.state.get("timer")){const e=setTimeout((()=>{n.list.next(u),i.state.set("list",[])}),t);i.state.set("timer",e)}}else if("count"===e.strategy){const t="dynamic"===e.count.mode?s:e.count.value;u.length>=t&&(n.list.next(u),i.state.set("list",[]))}else"trigger"===e.strategy&&(0,o.isDefined)(l)&&(n.list.next(u),i.state.set("list",[]))},editorConfig:{type:"custom",editorComponentBundlePath:"../../../../dist/ui/Collect.js"}}},91294:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Flatten=t.Slice=t.RemoveAt=t.Remove=t.Prepend=t.Append=t.AccumulateSomeValuesByCount=t.SpreadList=t.HeadAndRest=t.LoopList=t.Reverse=t.ConcatLists=t.ListFrom=t.Repeat=t.GetListElement=t.ListIsEmpty=t.ListLength=t.Collect=void 0;var o=n(62737);Object.defineProperty(t,"Collect",{enumerable:!0,get:function(){return o.Collect}});const i="Lists";t.ListLength={id:"List Length",defaultStyle:{icon:"fa-list"},namespace:i,description:"Returns the length of a list",inputs:{list:{description:"List"}},outputs:{length:{description:"Length"}},run:(e,t)=>{let{list:n}=e,{length:o}=t;return o.next(n.length)}},t.ListIsEmpty={id:"List Is Empty",defaultStyle:{icon:"fa-list"},namespace:i,description:"Returns true if the list is empty",inputs:{list:{description:"List"}},outputs:{isEmpty:{description:"Is empty"}},run:(e,t)=>{let{list:n}=e,{isEmpty:o}=t;return o.next(0===n.length)}},t.GetListElement={id:"Get List Element",defaultStyle:{icon:"fa-list"},namespace:i,description:"Returns the element at the specified index",inputs:{list:{description:"List"},index:{description:"Index"}},outputs:{element:{description:"Element"}},run:(e,t)=>{let{list:n,index:o}=e,{element:i}=t;return i.next(n[o])}},t.Repeat={id:"Repeat",defaultStyle:{icon:"fa-list"},namespace:i,description:"Repeats a value a number of times",inputs:{value:{description:"Value to repeat"},times:{description:"How many times will the value be repeated"}},outputs:{list:{description:"List"}},run:(e,t)=>{let{value:n,times:o}=e,{list:i}=t;const r=[];for(let a=0;a<o;a++)r.push(n);return i.next(r)}},t.ListFrom={id:"ListFrom",namespace:i,runFnBuilder:e=>{let{count:t}=e;return(e,n)=>{let{list:o}=n;const i=[];for(let r=0;r<t;r++)i.push(e[`item${r+1}`]);return o.next(i)}},definitionBuilder:e=>{let{count:t}=e;return{description:`Creates a list from ${t} values`,displayName:`List from ${t}`,inputs:Object.fromEntries(Array.from({length:t},((e,t)=>[`item${t+1}`,{}]))),outputs:{list:{description:"List containing all values"}}}},defaultData:{count:3},editorConfig:{type:"structured",fields:[{type:{value:"number"},configKey:"count",label:"Count",defaultValue:3,allowDynamic:!1}]}},t.ConcatLists={id:"Concat Lists",defaultStyle:{icon:"fa-list"},namespace:i,description:"Concatenates two lists",inputs:{list1:{description:"First list"},list2:{description:"Second list"}},outputs:{list:{description:"Concatenated list"}},run:(e,t)=>{let{list1:n,list2:o}=e,{list:i}=t;return i.next([...n,...o])}},t.Reverse={id:"Reverse",defaultStyle:{icon:"fa-list"},namespace:i,description:"Reverses a list",inputs:{list:{description:"List"}},outputs:{reversed:{description:"Reversed list"}},run:(e,t)=>{let{list:n}=e,{reversed:o}=t;return o.next(n.reverse())}},t.LoopList={id:"Loop List",defaultStyle:{icon:"fa-list"},namespace:i,searchKeywords:["each","spread"],description:"Emits all values in a list",inputs:{list:{description:"The list to loop"}},outputs:{item:{description:"Will emit a value for each item in the list"},index:{description:"Will emit the index of the item"},length:{description:"Will emit the length of the list"}},run:(e,t)=>{const{list:n}=e,{item:o,index:i}=t;for(const r of n)o.next(r),i.next(n.indexOf(r));t.length.next(n.length)}},t.HeadAndRest={id:"Head and rest",defaultStyle:{icon:"fa-list"},namespace:i,description:"Receives a list and emits two outputs: the first item and the rest of the list",inputs:{list:{description:"The list"}},outputs:{head:{description:"The first item in the list"},rest:{description:"The rest of the list"}},run:(e,t)=>{const{list:n}=e,{head:o,rest:i}=t;o.next(n[0]),i.next(n.slice(1))}},t.SpreadList={id:"SpreadList",namespace:i,defaultStyle:{icon:"sitemap"},displayName:"Spread List",description:"Spreads a list into multiple outputs",runFnBuilder:e=>{let{count:t}=e;return(e,n)=>{const{list:o}=e;for(let i=0;i<t;i++)n[`item${i+1}`].next(o[i])}},definitionBuilder:e=>{let{count:t}=e;return{description:`Receives a list with ${t} items and emits ${t} outputs: the first item, the second item, and so on`,displayName:`Spreads List of ${t}`,inputs:{list:{description:"The list"}},outputs:Object.fromEntries(Array.from({length:t},((e,t)=>[`item${t+1}`,{}])))}},defaultData:{count:3},editorConfig:{type:"structured",fields:[{type:{value:"number"},configKey:"count",label:"Count",defaultValue:3,allowDynamic:!1}]}},t.AccumulateSomeValuesByCount={id:"Accumulate Some Values by Count",defaultStyle:{icon:"fa-basket-shopping"},namespace:i,description:'Accumulates values sent to the "accept" input. Emits the list after the total items passed to both "accept" and "ignore" inputs reach the specified count.',inputs:{accept:{description:"Values to accumulate"},ignore:{description:"Values to ignore"},count:{description:"Number of values to accumulate before emitting them"}},reactiveInputs:["accept","ignore"],outputs:{accumulated:{description:"The accumulated accepted values"},ignored:{description:"The accumulated ignored values"}},run:(e,t,n)=>{const{accept:o,ignore:i,count:r}=e,{accumulated:a,ignored:s}=t,{state:l}=n;let u=l.get("list")||[],c=l.get("ignored")||[];void 0!==o&&(u.push(o),l.set("list",u)),void 0!==i&&(c.push(i),l.set("ignored",s)),u.length+c.length>=r&&(a.next(u),s.next(s))}},t.Append={id:"Append",namespace:i,description:"Appends an item to a list",inputs:{list:{description:"The list"},item:{description:"The item to append"}},outputs:{list:{description:"The resulting list"}},run:(e,t)=>{let{list:n,item:o}=e,{list:i}=t;i.next([...n,o])},defaultStyle:{icon:"fa-plus"}},t.Prepend={id:"Prepend",namespace:i,description:"Prepends an item to a list",inputs:{list:{description:"The list"},item:{description:"The item to prepend"}},outputs:{list:{description:"The resulting list"}},run:(e,t)=>{let{list:n,item:o}=e,{list:i}=t;i.next([o,...n])},defaultStyle:{icon:"fa-arrow-up"}},t.Remove={id:"Remove Item",namespace:i,description:"Removes an item from a list",inputs:{list:{description:"The list"},item:{description:"The item to remove"}},outputs:{list:{description:"The resulting list"}},run:(e,t)=>{let{list:n,item:o}=e,{list:i}=t;i.next(n.filter((e=>e!==o)))},defaultStyle:{icon:"fa-minus"}},t.RemoveAt={id:"Remove Item At",namespace:i,description:"Removes an item from a list at the specified index",inputs:{list:{description:"The list"},index:{description:"The index of the item to remove"}},outputs:{list:{description:"The resulting list"}},run:(e,t)=>{let{list:n,index:o}=e,{list:i}=t;i.next(n.filter(((e,t)=>t!==o)))},defaultStyle:{icon:"fa-times"}},t.Slice={id:"Slice",namespace:i,description:"Returns a slice of a list from the specified start index to the specified end index",inputs:{list:{description:"The list"},start:{description:"The index to start slicing from"},end:{description:"The index to end slicing at"}},outputs:{list:{description:"The resulting list"}},run:(e,t)=>{let{list:n,start:o,end:i}=e,{list:r}=t;r.next(n.slice(o,i))},defaultStyle:{icon:"fa-cut"}},t.Flatten={id:"Flatten",namespace:i,description:"Flattens a list of lists into a single list",inputs:{list:{description:"The list of lists"}},outputs:{list:{description:"The resulting list"}},run:(e,t)=>{let{list:n}=e,{list:o}=t;o.next(n.reduce(((e,t)=>[...e,...t]),[]))},defaultStyle:{icon:"fa-compress"}}},45888:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SumList=t.LessThanOrEqual=t.LessThan=t.GreaterThanOrEqual=t.GreaterThan=t.ToFixed=t.ParseFloat=t.ParseInt=t.Max=t.Min=t.Cos=t.Sin=t.Truncate=t.Round=t.Ceiling=t.Floor=t.AbsoluteValue=t.SquareRoot=t.Power=t.Modulo=t.Divide=t.Multiply=t.Subtract=t.Add=void 0;const n="Numbers";t.Add={id:"Add",defaultStyle:{icon:"fa-plus"},namespace:n,description:"Emits the sum of two numbers",inputs:{n1:{description:"First number to add"},n2:{description:"Second number to add"}},outputs:{sum:{description:"The sum of n1 and n2"}},run:(e,t)=>{let{n1:n,n2:o}=e,{sum:i}=t;return i.next(n+o)}},t.Subtract={id:"Subtract",defaultStyle:{icon:"fa-minus"},namespace:n,description:"Emits the difference of two numbers",inputs:{n1:{description:"First number to subtract"},n2:{description:"Second number to subtract"}},outputs:{difference:{description:"The difference of n1 and n2"}},run:(e,t)=>{let{n1:n,n2:o}=e,{difference:i}=t;return i.next(n-o)}},t.Multiply={id:"Multiply",defaultStyle:{icon:"fa-times"},namespace:n,description:"Emits the product of two numbers",inputs:{n1:{description:"First number to multiply"},n2:{description:"Second number to multiply"}},outputs:{product:{description:"The product of n1 and n2"}},run:(e,t)=>{let{n1:n,n2:o}=e,{product:i}=t;return i.next(n*o)}},t.Divide={id:"Divide",defaultStyle:{icon:"fa-divide"},namespace:n,description:"Emits the quotient of two numbers",inputs:{n1:{description:"First number to divide"},n2:{description:"Second number to divide"}},outputs:{quotient:{description:"The quotient of n1 and n2"}},run:(e,t)=>{let{n1:n,n2:o}=e,{quotient:i}=t;return i.next(n/o)}},t.Modulo={id:"Modulo",defaultStyle:{icon:"fa-percentage"},namespace:n,description:"Emits the remainder of two numbers",inputs:{n1:{description:"First number to divide"},n2:{description:"Second number to divide"}},outputs:{remainder:{description:"The remainder of n1 and n2"}},run:(e,t)=>{let{n1:n,n2:o}=e,{remainder:i}=t;return i.next(n%o)}},t.Power={id:"Power",defaultStyle:{icon:"fa-superscript"},namespace:n,description:"Emits the power of two numbers",inputs:{n1:{description:"Base number"},n2:{description:"Exponent"}},outputs:{power:{description:"The power of n1 and n2"}},run:(e,t)=>{let{n1:n,n2:o}=e,{power:i}=t;return i.next(Math.pow(n,o))}},t.SquareRoot={id:"Square Root",defaultStyle:{icon:"fa-square-root-alt"},namespace:n,description:"Emits the square root of a number",inputs:{n:{description:"Number to take the square root of"}},outputs:{root:{description:"The square root of n"}},run:(e,t)=>{let{n:n}=e,{root:o}=t;return o.next(Math.sqrt(n))}},t.AbsoluteValue={id:"Absolute Value",defaultStyle:{icon:"fa-abs"},namespace:n,description:"Emits the absolute value of a number",inputs:{n:{description:"Number to take the absolute value of"}},outputs:{absolute:{description:"The absolute value of n"}},run:(e,t)=>{let{n:n}=e,{absolute:o}=t;return o.next(Math.abs(n))}},t.Floor={id:"Floor",defaultStyle:{icon:"fa-floor"},namespace:n,description:"Emits the floor of a number",inputs:{n:{description:"Number to take the floor of"}},outputs:{floor:{description:"The floor of n"}},run:(e,t)=>{let{n:n}=e,{floor:o}=t;return o.next(Math.floor(n))}},t.Ceiling={id:"Ceiling",defaultStyle:{icon:"fa-ceiling"},namespace:n,description:"Emits the ceiling of a number",inputs:{n:{description:"Number to take the ceiling of"}},outputs:{ceiling:{description:"The ceiling of n"}},run:(e,t)=>{let{n:n}=e,{ceiling:o}=t;return o.next(Math.ceil(n))}},t.Round={id:"Round",defaultStyle:{icon:"fa-round"},namespace:n,description:"Emits the rounded value of a number",inputs:{n:{description:"Number to round"}},outputs:{rounded:{description:"The rounded value of n"}},run:(e,t)=>{let{n:n}=e,{rounded:o}=t;return o.next(Math.round(n))}},t.Truncate={id:"Truncate",defaultStyle:{icon:"fa-truncate"},namespace:n,description:"Emits the truncated value of a number",inputs:{n:{description:"Number to truncate"}},outputs:{truncated:{description:"The truncated value of n"}},run:(e,t)=>{let{n:n}=e,{truncated:o}=t;return o.next(Math.trunc(n))}},t.Sin={id:"Sin",defaultStyle:{icon:"fa-sin"},namespace:n,description:"Emits the sine of an angle",inputs:{angle:{description:"Angle in radians"}},outputs:{sine:{description:"The sine of angle"}},run:(e,t)=>{let{angle:n}=e,{sine:o}=t;return o.next(Math.sin(n))}},t.Cos={id:"Cos",defaultStyle:{icon:"fa-cos"},namespace:n,description:"Emits the cosine of an angle",inputs:{angle:{description:"Angle in radians"}},outputs:{cosine:{description:"The cosine of angle"}},run:(e,t)=>{let{angle:n}=e,{cosine:o}=t;return o.next(Math.cos(n))}},t.Min={id:"Min",namespace:n,description:"Emits the minimum of two numbers",inputs:{n1:{description:"First number"},n2:{description:"Second number"}},outputs:{min:{description:"The minimum of n1 and n2"}},run:(e,t)=>{let{n1:n,n2:o}=e,{min:i}=t;return i.next(Math.min(n,o))}},t.Max={id:"Max",namespace:n,description:"Emits the maximum of two numbers",inputs:{n1:{description:"First number"},n2:{description:"Second number"}},outputs:{max:{description:"The maximum of n1 and n2"}},run:(e,t)=>{let{n1:n,n2:o}=e,{max:i}=t;return i.next(Math.max(n,o))}},t.ParseInt={id:"Parse Int",namespace:n,description:"Emits the integer value of a string",inputs:{str:{description:"String to parse"}},outputs:{int:{description:"The integer value of str"}},run:(e,t)=>{let{str:n}=e,{int:o}=t;return o.next(parseInt(n))}},t.ParseFloat={id:"Parse Float",namespace:n,description:"Emits the float value of a string",inputs:{str:{description:"String to parse"}},outputs:{float:{description:"The float value of str"}},run:(e,t)=>{let{str:n}=e,{float:o}=t;return o.next(parseFloat(n))}},t.ToFixed={id:"To Fixed",namespace:n,description:"Emits the specified number of decimal places of a number",inputs:{number:{description:"Number to format"},places:{description:"Number of decimal places to format to"}},outputs:{fixed:{description:"The number with the specified number of decimal places"}},run:(e,t)=>{let{number:n,places:o}=e,{fixed:i}=t;return i.next(n.toFixed(o))}},t.GreaterThan={id:"Greater Than",namespace:n,description:"Emits true if the first number is greater than the second",inputs:{n1:{description:"First number"},n2:{description:"Second number"}},outputs:{result:{description:"true if n1 is greater than n2"}},run:(e,t)=>{let{n1:n,n2:o}=e,{result:i}=t;return i.next(n>o)}},t.GreaterThanOrEqual={id:"Greater Than Or Equal",namespace:n,description:"Emits true if the first number is greater than or equal to the second",inputs:{n1:{description:"First number"},n2:{description:"Second number"}},outputs:{result:{description:"true if n1 is greater than or equal to n2"}},run:(e,t)=>{let{n1:n,n2:o}=e,{result:i}=t;return i.next(n>=o)}},t.LessThan={id:"Less Than",namespace:n,description:"Emits true if the first number is less than the second",inputs:{n1:{description:"First number"},n2:{description:"Second number"}},outputs:{result:{description:"true if n1 is less than n2"}},run:(e,t)=>{let{n1:n,n2:o}=e,{result:i}=t;return i.next(n<o)}},t.LessThanOrEqual={id:"Less Than Or Equal",namespace:n,description:"Emits true if the first number is less than or equal to the second",inputs:{n1:{description:"First number"},n2:{description:"Second number"}},outputs:{result:{description:"true if n1 is less than or equal to n2"}},run:(e,t)=>{let{n1:n,n2:o}=e,{result:i}=t;return i.next(n<=o)}},t.SumList={id:"Sum List",defaultStyle:{icon:"fa-plus"},namespace:n,description:"Emits the sum of a list of numbers",inputs:{list:{description:"List of numbers"}},outputs:{sum:{description:"The sum of the numbers in list"}},run:(e,t)=>{let{list:n}=e,{sum:o}=t;return o.next(n.reduce(((e,t)=>e+t),0))}}},89769:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetAttribute=void 0,t.GetAttribute={id:"GetAttribute",displayName:"Get Attribute",searchKeywords:["pick","dot"],namespace:"Objects",defaultStyle:{icon:"fa-magnifying-glass"},description:"Gets an attribute from an object",definitionBuilder:e=>{const t={object:{description:"Object to get attribute from"}};return"dynamic"===e.key.mode&&(t.attribute={description:"Attribute to get"}),{inputs:t,outputs:{value:{description:"The value of the attribute"}},displayName:"Get Attribute"+("static"===e.key.mode?` "${e.key.value}"`:"")}},runFnBuilder:e=>(t,n)=>{let{object:o,attribute:i}=t,{value:r}=n;const a="static"===e.key.mode?e.key.value:i;r.next(a.split(".").reduce(((e,t)=>e[t]),o))},defaultData:{key:{mode:"static",value:""}},editorConfig:{type:"structured",fields:[{type:{value:"string"},configKey:"key",label:"Key",defaultValue:"",allowDynamic:!0}]}}},73098:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteAttribute=t.SetAttribute=t.ObjectEntries=t.ObjectValues=t.ObjectKeys=t.JSONStringify=t.JSONParse=t.GetAttributeOld=void 0,i(n(89769),t);const r="Objects";t.GetAttributeOld={id:"Get Attribute",searchKeywords:["pick","dot"],namespace:r,defaultStyle:{icon:"fa-magnifying-glass"},description:"Gets an attribute from an object",inputs:{object:{description:"Object to get attribute from"},attribute:{description:"Attribute to get"}},outputs:{value:{description:"The value of the attribute"}},run:(e,t)=>{let{object:n,attribute:o}=e,{value:i}=t;return i.next(o.split(".").reduce(((e,t)=>e[t]),n))}},t.JSONParse={id:"JSON Parse",defaultStyle:{icon:"fa-glasses"},namespace:r,description:"Parses a JSON string into an object",inputs:{json:{description:"JSON string to parse"}},outputs:{object:{description:"The parsed object"}},run:(e,t)=>{let{json:n}=e,{object:o}=t;return o.next(JSON.parse(n))}},t.JSONStringify={id:"JSON Stringify",defaultStyle:{icon:"fa-pen-fancy"},namespace:r,description:"Stringifies an object into a JSON string",inputs:{object:{description:"Object to stringify"}},outputs:{json:{description:"The stringified JSON"}},run:(e,t)=>{let{object:n}=e,{json:o}=t;return o.next(JSON.stringify(n))}},t.ObjectKeys={id:"Keys",defaultStyle:{icon:"fa-key"},namespace:r,description:"Emits the keys of an object",inputs:{object:{description:"Object to get keys of"}},outputs:{keys:{description:"The keys of object"}},run:(e,t)=>{let{object:n}=e,{keys:o}=t;return o.next(Object.keys(n))}},t.ObjectValues={id:"Values",namespace:r,description:"Emits the values of an object",inputs:{object:{description:"Object to get values of"}},outputs:{values:{description:"The values of object"}},run:(e,t)=>{let{object:n}=e,{values:o}=t;return o.next(Object.values(n))}},t.ObjectEntries={id:"Entries",defaultStyle:{icon:"fa-box"},namespace:r,description:"Emits the entries of an object",inputs:{object:{description:"Object to get entries of"}},outputs:{entries:{description:"The entries of object"}},run:(e,t)=>{let{object:n}=e,{entries:o}=t;return o.next(Object.entries(n))}},t.SetAttribute={id:"Set Attribute",searchKeywords:["dot"],namespace:r,defaultStyle:{icon:"fa-box"},description:"Sets an attribute on an object",inputs:{object:{description:"Object to set attribute on"},attribute:{description:"Attribute to set"},value:{description:"Value to set attribute to"}},outputs:{object:{description:"The object with the attribute set"}},run:(e,t)=>{let{object:n,attribute:o,value:i}=e,{object:r}=t;const a=o.split("."),s=a.pop();return a.reduce(((e,t)=>e[t]),n)[s]=i,r.next(n)}},t.DeleteAttribute={id:"Delete Attribute",defaultStyle:{icon:"fa-box"},namespace:r,description:"Deletes an attribute from an object",inputs:{object:{description:"Object to delete attribute from"},attribute:{description:"Attribute to delete"}},outputs:{object:{description:"The object with the attribute deleted"}},run:(e,t)=>{let{object:n,attribute:o}=e,{object:i}=t;const r=o.value.split("."),a=r.pop();delete r.reduce(((e,t)=>e[t]),n.value)[a],i.next(n.value)}}},90717:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetGlobalState=t.SetGlobalState=void 0;const n="State";t.SetGlobalState={id:"Set State",defaultStyle:{icon:"fa-pen"},namespace:n,description:"Sets a value in the global state",inputs:{key:{description:"Key to set"},value:{description:"Value to set"}},outputs:{setValue:{description:"Value that was set"}},run:(e,t,n)=>{let{key:o,value:i}=e,{setValue:r}=t,{globalState:a}=n;a.set(o,i),r.next(i)}},t.GetGlobalState={id:"Get State",defaultStyle:{icon:"fa-eye"},namespace:n,description:"Gets a value from the global state",inputs:{key:{description:"Key to get"},defaultValue:{description:"Default value if key is not set",mode:"required-if-connected"}},outputs:{value:{description:"Value of the key"}},run:(e,t,n)=>{let{key:o,defaultValue:i}=e,{value:r}=t,{globalState:a,onError:s}=n;var l;void 0===a.get(o)&&void 0===i?s(new Error(`Key ${o} is not set`)):r.next(null!==(l=a.get(o))&&void 0!==l?l:i)}}},40863:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyString=t.MatchRegex=t.IsEmpty=t.EndsWith=t.StartsWith=t.Includes=t.ToTitleCase=t.ToSnakeCase=t.ToPascalCase=t.ToCamelCase=t.ToKebabCase=t.CharAt=t.LastIndexOf=t.IndexOf=t.Length=t.Substring=t.ToUpperCase=t.ToLowerCase=t.Trim=t.Replace=t.Join=t.Split=t.Concat=void 0;const n="Strings";t.Concat={id:"Concat",defaultStyle:{icon:"fa-font"},namespace:n,description:"Concatenates two strings",inputs:{a:{description:"String a"},b:{description:"String b"}},outputs:{value:{description:"Concatenated value"}},run:(e,t)=>{let{a:n,b:o}=e,{value:i}=t;return i.next(n+o)}},t.Split={id:"Split",defaultStyle:{icon:"fa-font"},namespace:n,description:"Splits a string",inputs:{string:{description:"String to split"},separator:{description:"Separator"}},outputs:{value:{description:"Splitted value"}},run:(e,t)=>{let{string:n,separator:o}=e,{value:i}=t;return i.next(n.split(o))}},t.Join={id:"Join",defaultStyle:{icon:"fa-font"},namespace:n,description:"Joins an array of strings",inputs:{array:{description:"Array to join"},separator:{description:"Separator"}},outputs:{value:{description:"Joined value"}},run:(e,t)=>{let{array:n,separator:o}=e,{value:i}=t;return i.next(n.join(o))}},t.Replace={id:"Replace",defaultStyle:{icon:"fa-font"},namespace:n,description:"Replaces a string",inputs:{string:{description:"String to replace"},searchValue:{description:"Value to search for"},replaceValue:{description:"Value to replace with"}},outputs:{value:{description:"Replaced value"}},run:(e,t)=>{let{string:n,searchValue:o,replaceValue:i}=e,{value:r}=t;return r.next(n.replace(o,i))}},t.Trim={id:"Trim",defaultStyle:{icon:"fa-font"},namespace:n,description:"Trims a string",inputs:{string:{description:"String to trim"}},outputs:{value:{description:"Trimmed value"}},run:(e,t)=>{let{string:n}=e,{value:o}=t;return o.next(n.trim())}},t.ToLowerCase={id:"To Lower Case",defaultStyle:{icon:"fa-font"},namespace:n,description:"Converts a string to lower case",inputs:{string:{description:"String to convert to lower case"}},outputs:{value:{description:"Converted value"}},run:(e,t)=>{let{string:n}=e,{value:o}=t;return o.next(n.toLowerCase())}},t.ToUpperCase={id:"To Upper Case",defaultStyle:{icon:"fa-font"},namespace:n,description:"Converts a string to upper case",inputs:{string:{description:"String to convert to upper case"}},outputs:{value:{description:"Converted value"}},run:(e,t)=>{let{string:n}=e,{value:o}=t;return o.next(n.toUpperCase())}},t.Substring={id:"Substring",defaultStyle:{icon:"fa-font"},namespace:n,description:"Returns the node of the string between the start and end indexes",inputs:{string:{description:"String to get substring from"},start:{description:"Start index"},end:{description:"End index"}},outputs:{value:{description:"Substring"}},run:(e,t)=>{let{string:n,start:o,end:i}=e,{value:r}=t;return r.next(n.substring(o,i))}},t.Length={id:"Length",defaultStyle:{icon:"fa-font"},namespace:n,description:"Returns the length of a string",inputs:{string:{description:"String to get length from"}},outputs:{value:{description:"Length"}},run:(e,t)=>{let{string:n}=e,{value:o}=t;return o.next(n.length)}},t.IndexOf={id:"Index Of",defaultStyle:{icon:"fa-font"},namespace:n,description:"Returns the index within the calling String object of the first occurrence of the specified value, starting the search at fromIndex",inputs:{string:{description:"String to search in"},searchValue:{description:"Value to search for"},fromIndex:{description:"Index to start searching from"}},outputs:{value:{description:"Index"}},run:(e,t)=>{let{string:n,searchValue:o,fromIndex:i}=e,{value:r}=t;return r.next(n.indexOf(o,i))}},t.LastIndexOf={id:"Last Index Of",defaultStyle:{icon:"fa-font"},namespace:n,description:"Returns the index within the calling String object of the last occurrence of the specified value, or -1 if not found. The calling string is searched backward, starting at fromIndex",inputs:{string:{description:"String to search in"},searchValue:{description:"Value to search for"},fromIndex:{description:"Index to start searching from"}},outputs:{value:{description:"Index"}},run:(e,t)=>{let{string:n,searchValue:o,fromIndex:i}=e,{value:r}=t;return r.next(n.lastIndexOf(o,i))}},t.CharAt={id:"Char At",defaultStyle:{icon:"fa-font"},namespace:n,description:"Returns the character at the specified index",inputs:{string:{description:"String to get character from"},index:{description:"Index to get character from"}},outputs:{value:{description:"Character"}},run:(e,t)=>{let{string:n,index:o}=e,{value:i}=t;return i.next(n.charAt(o))}},t.ToKebabCase={id:"To Kebab Case",defaultStyle:{icon:"fa-font"},namespace:n,description:"Converts a string to kebab case",inputs:{string:{description:"String to convert to kebab case"}},outputs:{value:{description:"Converted value"}},run:(e,t)=>{let{string:n}=e,{value:o}=t;return o.next(n.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\s+/g,"-").toLowerCase())}},t.ToCamelCase={id:"To Camel Case",defaultStyle:{icon:"fa-font"},namespace:n,description:"Converts a string to camel case",inputs:{string:{description:"String to convert to camel case"}},outputs:{value:{description:"Converted value"}},run:(e,t)=>{let{string:n}=e,{value:o}=t;return o.next(n.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,((e,t)=>0==+e?"":0===t?e.toLowerCase():e.toUpperCase())))}},t.ToPascalCase={id:"To Pascal Case",defaultStyle:{icon:"fa-font"},namespace:n,description:"Converts a string to pascal case",inputs:{string:{description:"String to convert to pascal case"}},outputs:{value:{description:"Converted value"}},run:(e,t)=>{let{string:n}=e,{value:o}=t;return o.next(n.replace(/(?:^\w|[A-Z]|\b\w)/g,((e,t)=>0===t?e.toUpperCase():e.toLowerCase())).replace(/\s+/g,""))}},t.ToSnakeCase={id:"To Snake Case",defaultStyle:{icon:"fa-font"},namespace:n,description:"Converts a string to snake case",inputs:{string:{description:"String to convert to snake case"}},outputs:{value:{description:"Converted value"}},run:e=>e.replace(/([a-z])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toLowerCase()},t.ToTitleCase={id:"To Title Case",defaultStyle:{icon:"fa-font"},namespace:n,description:"Converts a string to title case",inputs:{string:{description:"String to convert to title case"}},outputs:{value:{description:"Converted value"}},run:(e,t)=>{let{string:n}=e,{value:o}=t;return o.next(n.replace(/\w\S*/g,(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase())))}},t.Includes={id:"Includes",namespace:n,defaultStyle:{icon:"fa-font"},description:"Determines whether one string may be found within another string, returning true or false as appropriate",inputs:{string:{description:"String to search in"},searchValue:{description:"Value to search for"},fromIndex:{description:"Index to start searching from"}},outputs:{value:{description:"Result"}},run:(e,t)=>{let{string:n,searchValue:o,fromIndex:i}=e,{value:r}=t;return r.next(n.includes(o,i))}},t.StartsWith={id:"Starts With",namespace:n,defaultStyle:{icon:"fa-font"},description:"Determines whether a string begins with the characters of another string, returning true or false as appropriate",inputs:{string:{description:"String to search in"},searchValue:{description:"Value to search for"},fromIndex:{description:"Index to start searching from"}},outputs:{value:{description:"Result"}},run:(e,t)=>{let{string:n,searchValue:o,fromIndex:i}=e,{value:r}=t;return r.next(n.startsWith(o,i))}},t.EndsWith={id:"Ends With",namespace:n,defaultStyle:{icon:"fa-font"},description:"Determines whether a string ends with the characters of another string, returning true or false as appropriate",inputs:{string:{description:"String to search in"},searchValue:{description:"Value to search for"},fromIndex:{description:"Index to start searching from"}},outputs:{value:{description:"Result"}},run:(e,t,n)=>e.endsWith(t,n)},t.IsEmpty={id:"Is Empty",namespace:n,defaultStyle:{icon:"fa-font"},description:"Determines whether a string is empty",inputs:{string:{description:"String to check"}},outputs:{value:{description:"Result"}},run:(e,t)=>{let{string:n}=e,{value:o}=t;return o.next(0===n.length)}},t.MatchRegex={id:"Match Regex",namespace:n,defaultStyle:{icon:"fa-font"},description:"Determines whether a string matches a regular expression",inputs:{string:{description:"String to check"},regex:{description:"Regular expression to match"}},outputs:{value:{description:"Result"}},run:(e,t)=>{let{string:n,regex:o}=e,{value:i}=t;return i.next(n.match(o))}},t.EmptyString={id:"Empty String",namespace:n,defaultStyle:{icon:"fa-font",size:"small"},description:"Creates an empty string",inputs:{},outputs:{string:{description:"The empty string"}},run:(e,t)=>{let{}=e,{string:n}=t;return n.next("")}}},86079:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Delay=void 0;const o=n(29967);t.Delay={id:"Delay",displayName:"Delay",namespace:"Timing",defaultStyle:{icon:"clock"},defaultData:{delayMs:{mode:"static",value:420}},description:"Delays a value by a given amount of time. Supports both static and dynamic delays.",definitionBuilder:e=>{let{delayMs:t}=e;const n={value:{description:"Value to delay"}};"dynamic"===t.mode&&(n.delay={description:"Delay in milliseconds"});return{inputs:n,displayName:"dynamic"===t.mode?"Delay":`Delay ${(0,o.timeToString)(t.value)}`,description:`Delays a value by ${"static"===t.mode?(0,o.timeToString)(t.value):"a dynamic amount of time"}.`,outputs:{delayedValue:{description:"Delayed value"}},completionOutputs:["delayedValue"]}},runFnBuilder:e=>{let{delayMs:t}=e;return async(e,n)=>{let{value:o,delay:i}=e;const r="dynamic"===t.mode?i:t.value;await new Promise((e=>setTimeout(e,r))),n.delayedValue.next(o)}},editorConfig:{type:"structured",fields:[{type:{value:"number"},configKey:"delayMs",label:"Delay (ms)",defaultValue:420,allowDynamic:!0}]}}},98691:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Interval=void 0;const o=n(29967);t.Interval={id:"Interval",displayName:"Interval",namespace:o.TIMING_NAMESPACE,defaultStyle:{icon:"stopwatch"},defaultData:{time:{mode:"static",value:1e3},value:{mode:"static",value:""}},description:"Emits a value every interval. Supports both static and dynamic intervals.",definitionBuilder:e=>{const t={};"dynamic"===e.value.mode&&(t.value={description:"Value to emit"}),"dynamic"===e.time.mode&&(t.interval={description:"Interval in milliseconds"});return{inputs:t,displayName:(()=>{const t="dynamic"===e.value.mode?"a value":JSON.stringify(e.value.value);return"static"===e.time.mode?`Emit ${t} each ${(0,o.timeToString)(e.time.value)}`:"Interval"})(),outputs:{value:{description:"Emitted value"}},reactiveInputs:"dynamic"===e.time.mode?["value","interval"]:["value"],completionOutputs:[],description:"Emits a value every interval."}},runFnBuilder:e=>(t,n,o)=>{let{value:i,interval:r}=t;const a="dynamic"===e.time.mode?r:e.time.value,s="dynamic"===e.value.mode?i:e.value.value,l=o.state.get("timer");l&&clearInterval(l);const u=setInterval((()=>{n.value.next(s)}),a);o.state.set("timer",u),o.onCleanup((()=>{clearInterval(u)}))},editorConfig:{type:"structured",fields:[{type:{value:"number"},configKey:"time",label:"Interval",defaultValue:1e3,allowDynamic:!0},{type:{value:"json",label:"Any JSON value:"},configKey:"value",label:"Value",defaultValue:"",allowDynamic:!0}]}}},40232:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Throttle=t.ThrottleError=t.Debounce=t.Interval=t.Delay=void 0;const o=n(29967);var i=n(86079);Object.defineProperty(t,"Delay",{enumerable:!0,get:function(){return i.Delay}});var r=n(98691);Object.defineProperty(t,"Interval",{enumerable:!0,get:function(){return r.Interval}});const a=o.TIMING_NAMESPACE;t.Debounce={id:"Debounce",displayName:"Debounce",namespace:a,defaultStyle:{icon:"hourglass"},defaultData:{delayMs:{mode:"static",value:420}},description:"Emits the last value received after being idle for a given amount of milliseconds. Supports both static and dynamic delays.",definitionBuilder:e=>{let{delayMs:t}=e;const n={value:{description:"Value to debounce"}};"dynamic"===t.mode&&(n.delay={description:"Delay in milliseconds"});return{inputs:n,displayName:"dynamic"===t.mode?"Debounce":`Debounce ${(0,o.timeToString)(t.value)}`,outputs:{debouncedValue:{description:"Debounced value"}},reactiveInputs:["value"],completionOutputs:["debouncedValue"]}},runFnBuilder:e=>{let{delayMs:t}=e;return(e,n,o)=>{let{value:i,delay:r}=e;const{debouncedValue:a}=n,s=o.state.get("timer");s&&clearTimeout(s);const l=setTimeout((()=>{a.next(i)}),"dynamic"===t.mode?r:t.value);o.state.set("timer",l),o.onCleanup((()=>{clearTimeout(s)}))}},editorConfig:{type:"structured",fields:[{type:{value:"number"},configKey:"delayMs",label:"Delay in milliseconds",defaultValue:420,allowDynamic:!0}]}};class s extends Error{constructor(e){super("Throttle: Value dropped"),this.value=e}}t.ThrottleError=s,t.Throttle={id:"Throttle",displayName:"Throttle",defaultStyle:{icon:"fa-hand"},namespace:a,defaultData:{delayMs:{mode:"static",value:420}},description:"Limits the number of times a value is emitted to once per time configured. Supports both static and dynamic intervals.",definitionBuilder:e=>{let{delayMs:t}=e;const n={value:{description:"Value to throttle"}};"dynamic"===t.mode&&(n.limitTime={description:"Interval in milliseconds"});return{inputs:n,displayName:"dynamic"===t.mode?"Throttle":`Throttle ${(0,o.timeToString)(t.value)}`,outputs:{unthrottledValue:{description:"Unthrottled value"}},reactiveInputs:["value"]}},runFnBuilder:e=>{let{delayMs:t}=e;return async(e,n,o)=>{const i="dynamic"===t.mode?e.limitTime:t.value;if(o.state.get("promise"))o.onError(new s(e.value));else{n.unthrottledValue.next(e.value);const t=new Promise((e=>{setTimeout((()=>{e()}),i)}));o.state.set("promise",t),await t,o.state.set("promise",void 0)}}},editorConfig:{type:"structured",fields:[{type:{value:"number"},configKey:"delayMs",label:"Interval (ms)",defaultValue:420,allowDynamic:!0}]}}},29967:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timeToString=t.TIMING_NAMESPACE=void 0,t.TIMING_NAMESPACE="Timing",t.timeToString=function(e){return e<1e3?`${e}ms`:e/1e3+"s"}},29755:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CodeExpression=void 0;const getInlineVariables_1=__webpack_require__(20528);exports.CodeExpression={id:"CodeExpression",displayName:"Inline Code",defaultStyle:{icon:"code"},description:"A static value or JS expression",runFnBuilder:config=>(inputs,outputs,adv)=>{try{const resFn=eval(`(inputs, adv) => (${config.value})`);outputs.value.next(resFn(inputs,adv))}catch(e){adv.onError(e)}},definitionBuilder:e=>{var t;const n=(0,getInlineVariables_1.getVariables)(e.value);return{defaultStyle:{size:"small",icon:"code"},displayName:e.label||void 0,description:`Evaluates the expression \`${e.value}\``,inputs:Object.fromEntries(null!==(t=n.map((e=>[e,{}])))&&void 0!==t?t:[]),outputs:{value:{displayName:"Value",description:"The result of the expression evaluation"}}}},defaultData:{value:"inputs.a + inputs.b",label:'"inputs.a + inputs.b"'},editorConfig:{type:"custom",editorComponentBundlePath:"../../../dist/ui/CodeExpression.js"}}},17737:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlineValue=void 0,t.InlineValue={id:"InlineValue",displayName:"Inline Value",defaultStyle:{icon:"pen"},description:"A static value or JS expression",runFnBuilder:e=>(t,n)=>{n.value.next(e.value)},definitionBuilder:e=>({defaultStyle:{size:"small",icon:"pen"},displayName:e.label||void 0,description:`Emits the value \`${JSON.stringify(e.value)}\``,inputs:{},outputs:{value:{displayName:"Value",description:"Emits the value configured"}}}),defaultData:{type:"string",value:"Hello",label:'"Hello"'},editorConfig:{type:"custom",editorComponentBundlePath:"../../../dist/ui/InlineValue.js"}}},20528:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getVariables=void 0;t.getVariables=e=>(e.match(/inputs\.([a-zA-Z]\w*)/g)||[]).map((e=>e.replace(/inputs\./,"")))},86619:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(17737),t),i(n(29755),t)},81381:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(50544),t),i(n(73098),t),i(n(45888),t),i(n(40863),t),i(n(66257),t),i(n(91294),t),i(n(20740),t),i(n(35948),t),i(n(90717),t),i(n(40232),t),i(n(86619),t)},28355:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>q});var o=n(70079),i=n(31918),r=n(30662);const a={"flyde-flow-editor":"flyde-flow-editor_AAD4",_hj_feedback_container:"_hj_feedback_container_Af03"};var s=n(19841),l=n(61888),u=n.n(l),c=n(81381),d=n.n(c),p=n(74089),f=n(74762);const m=200;var v=n(10831),g=n(61997),h=n(77852),y=n(11607);function b(e){return e.instances.flatMap((e=>(0,f.isMacroNodeInstance)(e)?e.macroData:(0,f.isInlineNodeInstance)(e)&&(0,f.isVisualNode)(e.node)?b(e.node):[]))}function _(e,t){const n={};const o=function e(o){const i=o.instances.map((o=>{if((0,f.isMacroNodeInstance)(o)){const e=Object.values(t).find((e=>(0,f.isMacroNode)(e)&&e.id===o.macroId));if(!e)throw new Error(`Could not find macro node ${o.macroId} in embedded stdlib`);const i=(0,y.Z)("",e,o);return n[i.id]={...i,source:{path:""}},{...o,nodeId:i.id}}return(0,f.isInlineNodeInstance)(o)&&(0,f.isVisualNode)(o.node)?{...o,node:e(o.node)}:o}));return{...o,instances:i}}(e);return{newNode:o,newDeps:n}}var I=n(63521);async function x(){return{importables:Object.values(d()).filter(f.isBaseNode).map((e=>({node:{...e,source:{path:"n/a",export:"n/a"}},module:"@flyde/stdlib"}))),errors:[]}}const C=[0,20],w=(()=>{const e=new Map,t=new Map;return{requestHistory:async(n,o,i)=>{const r="input"===i?f.DebuggerEventType.INPUT_CHANGE:f.DebuggerEventType.OUTPUT_CHANGE;if(o){const t=`${n}.${o}.${r}`,i=e.get(t)||{total:0,lastSamples:[]},a=i.lastSamples.slice(0,m);return{...i,lastSamples:a}}{const e=t.get(n)||{total:0,lastSamples:[]},o=e.lastSamples.slice(0,m);return{...e,lastSamples:o}}},addEvents:n=>{n.forEach((n=>{if(n.type===f.DebuggerEventType.ERROR){const e=n;e.type=f.DebuggerEventType.OUTPUT_CHANGE,e.pinId=f.ERROR_PIN_ID}if(n.type===f.DebuggerEventType.INPUT_CHANGE||n.type===f.DebuggerEventType.OUTPUT_CHANGE){const{insId:o,type:i,pinId:r}=n;{const t=`${o}.${r}.${i}`,a=e.get(t)||{total:0,lastSamples:[]};a.lastSamples.unshift(n),a.lastSamples.length>m&&a.lastSamples.splice(m,a.lastSamples.length-m),a.total++,e.set(t,a)}{const i=t.get(o)||{total:0,lastSamples:[]};i.lastSamples.unshift(n),i.lastSamples.length>m&&i.lastSamples.splice(m,i.lastSamples.length-m),i.total++,e.set(o,i)}}}))},clear:()=>{e.clear(),t.clear()}}})(),E=(0,p.createRuntimePlayer)(),j=(0,o.forwardRef)((function(e,t){const{flowProps:i,onCompleted:r}=e,{initialFlow:a}=i,s=(0,h.useDarkMode)(),[l,d]=(0,o.useState)(e.flowProps.dependencies);console.log({resolvedDeps:l});const[m,y]=(0,o.useState)({flow:a,boardData:I.defaultBoardData}),[j,S]=(0,o.useState)(),N=(0,o.useRef)((()=>{})),O=(0,o.useCallback)((async(e,t)=>{const{newDeps:o,newState:i}=await async function(e,t,o,i){const{node:r}=e,a=Object.values(await Promise.resolve().then(n.t.bind(n,81381,23))).find((e=>(0,f.isBaseNode)(e)&&e.id===r.id)),s={...i,[a.id]:{...a,source:{path:"@flyde/stdlib/dist/all-browser",export:a.id}}};let l;const u=(0,v.ZP)(o.flow,(n=>{if(t){const o=(0,p.vAdd)({x:0,y:0},t.pos);if(l=(0,p.createNewNodeInstance)(e.node,0,o,s),n.node.instances.push(l),t.connectTo){const{insId:e,outputId:o}=t.connectTo;n.node.connections.push({from:{insId:e,pinId:o},to:{insId:l.id,pinId:f.TRIGGER_PIN_ID}})}}}));return{newState:(0,v.ZP)(o,(e=>{e.flow=u,t?.selectAfterAdding&&l&&(e.boardData.selected=[l?.id])})),newDeps:s}}(e,t,m,l);return d(o),y(i),(0,p.toastMsg)(`Node ${e.node.id} successfully imported from ${e.module}`),l}),[m,l]),T=(0,o.useMemo)((()=>({resolvedDependencies:l,onImportNode:O,onRequestImportables:x,libraryData:{groups:[]}})),[l]),P=(0,o.useMemo)((()=>({debuggerClient:j,onRequestHistory:function(){return w.requestHistory(...arguments)}})),[j,w]),D=o.useRef(b(m.flow.node));(0,o.useEffect)((()=>{const e=b(m.flow.node);if(!u().isEqual(e,D.current)){D.current=e;const{newDeps:t,newNode:n}=_(m.flow.node,c),o=(0,v.ZP)(m,(e=>{e.flow.node=n}));y(o),d((e=>({...e,...t,main:m.flow.node})))}}),[m.flow.node]);const k=(0,o.useCallback)(((t,n)=>{const o=((e,t)=>{const n=new Set;return{onEvent:o=>{const i={...o,time:Date.now(),executionId:"n/a"};console.info("Got debugger event",o),t.addEvents([i]),e.addEvents([i]),n.forEach((e=>e([i])))},onBatchedEvents:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{n.clear()}}})(E,w);E.start(),S(o);const i=(0,f.keys)(t.outputs)[0],a=(0,f.dynamicOutput)(),s=a.subscribe((t=>{e.onLog(t)}));let l=null;const u=(0,f.execute)({node:t,inputs:{},outputs:{[i]:a},resolvedDeps:{...n,[t.id]:t},_debugger:o,onBubbleError:e=>{console.error(e)},onCompleted:()=>{s.unsubscribe(),r(),l=setTimeout((()=>{y((e=>({...e})))}),3e3)}});N.current=()=>{u(),s.unsubscribe(),E.clear(),w.clear(),o.destroy(),clearTimeout(l)}}),[]);return(0,o.useImperativeHandle)(t,(()=>({runFlow:()=>{N.current(),k(m.flow.node,l)}})),[m,l]),o.createElement(g.Z,null,(()=>o.createElement(p.DependenciesContextProvider,{value:T},o.createElement(p.DebuggerContextProvider,{value:P},o.createElement(p.FlowEditor,{state:m,onChangeEditorState:y,initialPadding:C,onExtractInlineNode:f.noop,disableScrolling:!0,darkMode:s.isDarkMode})))))}));n(60450);const S={dependencies:{Delay:{id:"Delay",displayName:"Delay",namespace:"Timing",defaultStyle:{icon:"clock"},defaultData:{delayMs:{mode:"static",value:420}},description:"Delays a value by a given amount of time. Supports both static and dynamic delays.",editorConfig:{type:"structured",fields:[{type:{value:"number"},configKey:"delayMs",label:"Delay (ms)",defaultValue:420,allowDynamic:!0}]},source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Timing/Delay/Delay.flyde.js",export:"Delay"}},Delay__hvnxp46iusf1g91k6dua576w:{inputs:{value:{description:"Value to delay"}},displayName:"Delay 3s",description:"Delays a value by 3s.",outputs:{delayedValue:{description:"Delayed value"}},completionOutputs:["delayedValue"],defaultStyle:{icon:"clock"},namespace:"Timing",id:"Delay__hvnxp46iusf1g91k6dua576w",run:n(86079).Delay.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Timing/Delay/Delay.flyde.js",export:"Delay"}},InlineValue:{id:"InlineValue",displayName:"Inline Value",defaultStyle:{icon:"pen"},description:"A static value or JS expression",defaultData:{type:"string",value:"Hello",label:'"Hello"'},editorConfig:{type:"custom",editorComponentBundleContent:'/*\n * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").\n * This devtool is neither made for production nor for readable output files.\n * It uses "eval()" calls to create a separate source file in the browser devtools.\n * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)\n * or disable the default devtool with "devtool: false".\n * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).\n */\n/******/ (() => { // webpackBootstrap\n/******/ \t"use strict";\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ "./src/Values/InlineValue.tsx":\n/*!************************************!*\\\n  !*** ./src/Values/InlineValue.tsx ***!\n  \\************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\neval("\\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\\n    if (k2 === undefined) k2 = k;\\n    var desc = Object.getOwnPropertyDescriptor(m, k);\\n    if (!desc || (\\"get\\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\\n      desc = { enumerable: true, get: function() { return m[k]; } };\\n    }\\n    Object.defineProperty(o, k2, desc);\\n}) : (function(o, m, k, k2) {\\n    if (k2 === undefined) k2 = k;\\n    o[k2] = m[k];\\n}));\\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\\n    Object.defineProperty(o, \\"default\\", { enumerable: true, value: v });\\n}) : function(o, v) {\\n    o[\\"default\\"] = v;\\n});\\nvar __importStar = (this && this.__importStar) || function (mod) {\\n    if (mod && mod.__esModule) return mod;\\n    var result = {};\\n    if (mod != null) for (var k in mod) if (k !== \\"default\\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\\n    __setModuleDefault(result, mod);\\n    return result;\\n};\\nObject.defineProperty(exports, \\"__esModule\\", ({ value: true }));\\nconst core_1 = __webpack_require__(/*! @blueprintjs/core */ \\"@blueprintjs/core\\");\\nconst react_1 = __importStar(__webpack_require__(/*! react */ \\"react\\"));\\nconst types = [\\n    \\"string\\",\\n    \\"number\\",\\n    \\"json\\",\\n    \\"boolean\\",\\n];\\nconst defaultValuePerType = {\\n    string: (currValue) => `${currValue}`,\\n    number: (currValue) => isNaN(Number(currValue)) ? 0 : Number(currValue),\\n    json: (currValue) => JSON.stringify(currValue),\\n    boolean: (currValue) => !!currValue,\\n    expression: (currValue) => currValue,\\n};\\nconst labelMaxLength = 20;\\nfunction valToLabel(val) {\\n    try {\\n        const label = JSON.stringify(val);\\n        if (label.length > labelMaxLength) {\\n            return `${label.slice(0, labelMaxLength)}...`;\\n        }\\n        return label;\\n    }\\n    catch (e) {\\n        return `Value`;\\n    }\\n}\\nconst InlineValueEditor = function InlineValueEditor(props) {\\n    const { value, onChange } = props;\\n    const changeType = (0, react_1.useCallback)((type) => {\\n        const newValue = defaultValuePerType[type](value.value);\\n        onChange({\\n            value: newValue,\\n            type,\\n            label: valToLabel(value.value) === value.label\\n                ? valToLabel(newValue)\\n                : value.label,\\n        });\\n    }, [value, onChange]);\\n    const changeValue = (0, react_1.useCallback)((_val) => {\\n        const newLabel = valToLabel(_val);\\n        const oldLabel = valToLabel(value.value);\\n        const wasUsingDefaultLabel = value.label === oldLabel || !value.label;\\n        const labelToUse = wasUsingDefaultLabel ? newLabel : value.label;\\n        onChange({ ...value, value: _val, label: labelToUse });\\n    }, [value, onChange]);\\n    const editorPanel = (0, react_1.useMemo)(() => {\\n        switch (value.type) {\\n            case \\"string\\":\\n                return (react_1.default.createElement(core_1.FormGroup, { label: \\"Value:\\" },\\n                    react_1.default.createElement(core_1.InputGroup, { type: \\"text\\", value: value.value, onChange: (e) => changeValue(e.target.value) })));\\n            case \\"number\\":\\n                return (react_1.default.createElement(core_1.FormGroup, { label: \\"Value:\\" },\\n                    react_1.default.createElement(core_1.NumericInput, { value: value.value, onValueChange: (e) => changeValue(e) })));\\n            case \\"json\\":\\n                return (react_1.default.createElement(core_1.FormGroup, { label: \\"Value:\\" },\\n                    react_1.default.createElement(core_1.TextArea, { value: value.value, onChange: (e) => changeValue(e.target.value) })));\\n            case \\"boolean\\":\\n                return (react_1.default.createElement(core_1.FormGroup, { label: \\"Value:\\" },\\n                    react_1.default.createElement(core_1.HTMLSelect, { value: value.value, onChange: (e) => changeValue(e.target.value === \\"true\\") },\\n                        react_1.default.createElement(\\"option\\", { value: \\"true\\" }, \\"true\\"),\\n                        react_1.default.createElement(\\"option\\", { value: \\"false\\" }, \\"false\\"))));\\n        }\\n    }, [value, changeValue]);\\n    return (react_1.default.createElement(\\"div\\", null,\\n        react_1.default.createElement(core_1.FormGroup, { label: \\"Value type:\\" },\\n            react_1.default.createElement(core_1.HTMLSelect, { value: value.type, onChange: (e) => changeType(e.target.value) }, types.map((type) => (react_1.default.createElement(\\"option\\", { key: type, value: type }, type))))),\\n        editorPanel,\\n        react_1.default.createElement(core_1.FormGroup, { label: \\"Label:\\" },\\n            react_1.default.createElement(core_1.InputGroup, { type: \\"text\\", value: value.label, onChange: (e) => onChange({ ...value, label: e.target.value }) }))));\\n};\\nexports[\\"default\\"] = InlineValueEditor;\\n\\n\\n//# sourceURL=webpack://__MacroNode__InlineValue/./src/Values/InlineValue.tsx?");\n\n/***/ }),\n\n/***/ "@blueprintjs/core":\n/*!****************************!*\\\n  !*** external "Blueprint" ***!\n  \\****************************/\n/***/ ((module) => {\n\nmodule.exports = window["Blueprint"];\n\n/***/ }),\n\n/***/ "react":\n/*!************************!*\\\n  !*** external "React" ***!\n  \\************************/\n/***/ ((module) => {\n\nmodule.exports = window["React"];\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \t// This entry module is referenced by other modules so it can\'t be inlined\n/******/ \tvar __webpack_exports__ = __webpack_require__("./src/Values/InlineValue.tsx");\n/******/ \twindow.__MacroNode__InlineValue = __webpack_exports__;\n/******/ \t\n/******/ })()\n;'},source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Values/InlineValue.flyde.js",export:"InlineValue"}},InlineValue__qi81a3d3zqj4reik3qaogcx9:{defaultStyle:{size:"small",icon:"pen"},displayName:'"Hello"',description:'Emits the value `"Hello"`',inputs:{},outputs:{value:{displayName:"Value",description:"Emits the value configured"}},id:"InlineValue__qi81a3d3zqj4reik3qaogcx9",run:n(17737).InlineValue.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Values/InlineValue.flyde.js",export:"InlineValue"}},"InlineValue__ApisCombination-o5049mg":{defaultStyle:{size:"small",icon:"pen"},displayName:'"World!"',description:'Emits the value `"World!"`',inputs:{},outputs:{value:{displayName:"Value",description:"Emits the value configured"}},id:"InlineValue__ApisCombination-o5049mg",run:n(17737).InlineValue.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Values/InlineValue.flyde.js",export:"InlineValue"}}},flow:{imports:{"@flyde/stdlib":["Delay","InlineValue"]},node:{instances:[{pos:{x:-749.0568882054781,y:-182.03499905225232},id:"hvnxp46iusf1g91k6dua576w",inputConfig:{},nodeId:"Delay__hvnxp46iusf1g91k6dua576w",macroId:"Delay",macroData:{delayMs:{value:3e3,mode:"static"}},style:{size:"small",icon:"fa-clock",color:"#00bbf9"}},{pos:{x:-901.7698777170979,y:-322.115584104573},id:"qi81a3d3zqj4reik3qaogcx9",inputConfig:{},nodeId:"InlineValue__qi81a3d3zqj4reik3qaogcx9",macroId:"InlineValue",macroData:{type:"string",value:"Hello",label:'"Hello"'},style:{size:"regular",icon:"pen"}},{pos:{x:-764.2692919921875,y:-261.869638671875},id:"ApisCombination-o5049mg",inputConfig:{},nodeId:"InlineValue__ApisCombination-o5049mg",macroId:"InlineValue",macroData:{type:"string",value:"World!",label:'"World!"'},style:{size:"regular",icon:"pen"}}],connections:[{from:{insId:"ApisCombination-o5049mg",pinId:"value"},to:{insId:"hvnxp46iusf1g91k6dua576w",pinId:"value"}},{from:{insId:"hvnxp46iusf1g91k6dua576w",pinId:"delayedValue"},to:{insId:"__this",pinId:"output"}},{from:{insId:"qi81a3d3zqj4reik3qaogcx9",pinId:"value"},to:{insId:"__this",pinId:"output"}}],id:"HelloWorld",inputs:{},outputs:{output:{type:"any",optional:!1,delayed:!1}},inputsPosition:{city:{x:-187.27285824815934,y:-14.13215209416181},Bob:{x:-464.39225613814307,y:-267.86263932413937}},outputsPosition:{json:{x:-441.98276309426666,y:480.38719404276554},na:{x:-441.98276309426666,y:480.38719404276554},result:{x:-499.82438378976735,y:706.7650396699393},output:{x:-786.8222824042145,y:-47.993242521151444},response:{x:-506.3386688159596,y:488.67302443385125},"Bob 42":{x:-736.217912287027,y:209.40813992513762}}}}},N={dependencies:{Throttle:{id:"Throttle",displayName:"Throttle",defaultStyle:{icon:"fa-hand"},namespace:"Timing",defaultData:{delayMs:{mode:"static",value:420}},description:"Limits the number of times a value is emitted to once per time configured. Supports both static and dynamic intervals.",editorConfig:{type:"structured",fields:[{type:{value:"number"},configKey:"delayMs",label:"Interval (ms)",defaultValue:420,allowDynamic:!0}]},source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Timing/Timing.flyde.js",export:"Throttle"}},Throttle__wj31gd73i5l111q999pv4kor:{inputs:{value:{description:"Value to throttle"}},displayName:"Throttle 3s",outputs:{unthrottledValue:{description:"Unthrottled value"}},reactiveInputs:["value"],defaultStyle:{icon:"fa-hand"},namespace:"Timing",id:"Throttle__wj31gd73i5l111q999pv4kor",run:n(40232).Throttle.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Timing/Timing.flyde.js",export:"Throttle"}},Debounce:{id:"Debounce",displayName:"Debounce",namespace:"Timing",defaultStyle:{icon:"hourglass"},defaultData:{delayMs:{mode:"static",value:420}},description:"Emits the last value received after being idle for a given amount of milliseconds. Supports both static and dynamic delays.",editorConfig:{type:"structured",fields:[{type:{value:"number"},configKey:"delayMs",label:"Delay in milliseconds",defaultValue:420,allowDynamic:!0}]},source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Timing/Timing.flyde.js",export:"Debounce"}},Debounce__eaa2b80mmdusjvxi3fve0du1:{inputs:{value:{description:"Value to debounce"}},displayName:"Debounce 2s",outputs:{debouncedValue:{description:"Debounced value"}},reactiveInputs:["value"],completionOutputs:["debouncedValue"],defaultStyle:{icon:"hourglass"},namespace:"Timing",id:"Debounce__eaa2b80mmdusjvxi3fve0du1",run:n(40232).Debounce.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Timing/Timing.flyde.js",export:"Debounce"}},InlineValue:{id:"InlineValue",displayName:"Inline Value",defaultStyle:{icon:"pen"},description:"A static value or JS expression",defaultData:{type:"string",value:"Hello",label:'"Hello"'},editorConfig:{type:"custom",editorComponentBundleContent:'/*\n * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").\n * This devtool is neither made for production nor for readable output files.\n * It uses "eval()" calls to create a separate source file in the browser devtools.\n * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)\n * or disable the default devtool with "devtool: false".\n * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).\n */\n/******/ (() => { // webpackBootstrap\n/******/ \t"use strict";\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ "./src/Values/InlineValue.tsx":\n/*!************************************!*\\\n  !*** ./src/Values/InlineValue.tsx ***!\n  \\************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\neval("\\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\\n    if (k2 === undefined) k2 = k;\\n    var desc = Object.getOwnPropertyDescriptor(m, k);\\n    if (!desc || (\\"get\\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\\n      desc = { enumerable: true, get: function() { return m[k]; } };\\n    }\\n    Object.defineProperty(o, k2, desc);\\n}) : (function(o, m, k, k2) {\\n    if (k2 === undefined) k2 = k;\\n    o[k2] = m[k];\\n}));\\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\\n    Object.defineProperty(o, \\"default\\", { enumerable: true, value: v });\\n}) : function(o, v) {\\n    o[\\"default\\"] = v;\\n});\\nvar __importStar = (this && this.__importStar) || function (mod) {\\n    if (mod && mod.__esModule) return mod;\\n    var result = {};\\n    if (mod != null) for (var k in mod) if (k !== \\"default\\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\\n    __setModuleDefault(result, mod);\\n    return result;\\n};\\nObject.defineProperty(exports, \\"__esModule\\", ({ value: true }));\\nconst core_1 = __webpack_require__(/*! @blueprintjs/core */ \\"@blueprintjs/core\\");\\nconst react_1 = __importStar(__webpack_require__(/*! react */ \\"react\\"));\\nconst types = [\\n    \\"string\\",\\n    \\"number\\",\\n    \\"json\\",\\n    \\"boolean\\",\\n];\\nconst defaultValuePerType = {\\n    string: (currValue) => `${currValue}`,\\n    number: (currValue) => isNaN(Number(currValue)) ? 0 : Number(currValue),\\n    json: (currValue) => JSON.stringify(currValue),\\n    boolean: (currValue) => !!currValue,\\n    expression: (currValue) => currValue,\\n};\\nconst labelMaxLength = 20;\\nfunction valToLabel(val) {\\n    try {\\n        const label = JSON.stringify(val);\\n        if (label.length > labelMaxLength) {\\n            return `${label.slice(0, labelMaxLength)}...`;\\n        }\\n        return label;\\n    }\\n    catch (e) {\\n        return `Value`;\\n    }\\n}\\nconst InlineValueEditor = function InlineValueEditor(props) {\\n    const { value, onChange } = props;\\n    const changeType = (0, react_1.useCallback)((type) => {\\n        const newValue = defaultValuePerType[type](value.value);\\n        onChange({\\n            value: newValue,\\n            type,\\n            label: valToLabel(value.value) === value.label\\n                ? valToLabel(newValue)\\n                : value.label,\\n        });\\n    }, [value, onChange]);\\n    const changeValue = (0, react_1.useCallback)((_val) => {\\n        const newLabel = valToLabel(_val);\\n        const oldLabel = valToLabel(value.value);\\n        const wasUsingDefaultLabel = value.label === oldLabel || !value.label;\\n        const labelToUse = wasUsingDefaultLabel ? newLabel : value.label;\\n        onChange({ ...value, value: _val, label: labelToUse });\\n    }, [value, onChange]);\\n    const editorPanel = (0, react_1.useMemo)(() => {\\n        switch (value.type) {\\n            case \\"string\\":\\n                return (react_1.default.createElement(core_1.FormGroup, { label: \\"Value:\\" },\\n                    react_1.default.createElement(core_1.InputGroup, { type: \\"text\\", value: value.value, onChange: (e) => changeValue(e.target.value) })));\\n            case \\"number\\":\\n                return (react_1.default.createElement(core_1.FormGroup, { label: \\"Value:\\" },\\n                    react_1.default.createElement(core_1.NumericInput, { value: value.value, onValueChange: (e) => changeValue(e) })));\\n            case \\"json\\":\\n                return (react_1.default.createElement(core_1.FormGroup, { label: \\"Value:\\" },\\n                    react_1.default.createElement(core_1.TextArea, { value: value.value, onChange: (e) => changeValue(e.target.value) })));\\n            case \\"boolean\\":\\n                return (react_1.default.createElement(core_1.FormGroup, { label: \\"Value:\\" },\\n                    react_1.default.createElement(core_1.HTMLSelect, { value: value.value, onChange: (e) => changeValue(e.target.value === \\"true\\") },\\n                        react_1.default.createElement(\\"option\\", { value: \\"true\\" }, \\"true\\"),\\n                        react_1.default.createElement(\\"option\\", { value: \\"false\\" }, \\"false\\"))));\\n        }\\n    }, [value, changeValue]);\\n    return (react_1.default.createElement(\\"div\\", null,\\n        react_1.default.createElement(core_1.FormGroup, { label: \\"Value type:\\" },\\n            react_1.default.createElement(core_1.HTMLSelect, { value: value.type, onChange: (e) => changeType(e.target.value) }, types.map((type) => (react_1.default.createElement(\\"option\\", { key: type, value: type }, type))))),\\n        editorPanel,\\n        react_1.default.createElement(core_1.FormGroup, { label: \\"Label:\\" },\\n            react_1.default.createElement(core_1.InputGroup, { type: \\"text\\", value: value.label, onChange: (e) => onChange({ ...value, label: e.target.value }) }))));\\n};\\nexports[\\"default\\"] = InlineValueEditor;\\n\\n\\n//# sourceURL=webpack://__MacroNode__InlineValue/./src/Values/InlineValue.tsx?");\n\n/***/ }),\n\n/***/ "@blueprintjs/core":\n/*!****************************!*\\\n  !*** external "Blueprint" ***!\n  \\****************************/\n/***/ ((module) => {\n\nmodule.exports = window["Blueprint"];\n\n/***/ }),\n\n/***/ "react":\n/*!************************!*\\\n  !*** external "React" ***!\n  \\************************/\n/***/ ((module) => {\n\nmodule.exports = window["React"];\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \t// This entry module is referenced by other modules so it can\'t be inlined\n/******/ \tvar __webpack_exports__ = __webpack_require__("./src/Values/InlineValue.tsx");\n/******/ \twindow.__MacroNode__InlineValue = __webpack_exports__;\n/******/ \t\n/******/ })()\n;'},source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Values/InlineValue.flyde.js",export:"InlineValue"}},InlineValue__scs3pycv9lz28ykunbkqn9to:{defaultStyle:{size:"small",icon:"pen"},displayName:'"\u274c"',description:'Emits the value `"\u274c"`',inputs:{},outputs:{value:{displayName:"Value",description:"Emits the value configured"}},id:"InlineValue__scs3pycv9lz28ykunbkqn9to",run:n(17737).InlineValue.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Values/InlineValue.flyde.js",export:"InlineValue"}},"InlineValue__ApisCombination-3k049q4":{defaultStyle:{size:"small",icon:"pen"},displayName:'"\ud83d\udd50"',description:'Emits the value `"\ud83d\udd50"`',inputs:{},outputs:{value:{displayName:"Value",description:"Emits the value configured"}},id:"InlineValue__ApisCombination-3k049q4",run:n(17737).InlineValue.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Values/InlineValue.flyde.js",export:"InlineValue"}},Interval:{id:"Interval",displayName:"Interval",namespace:"Timing",defaultStyle:{icon:"stopwatch"},defaultData:{time:{mode:"static",value:1e3},value:{mode:"static",value:""}},description:"Emits a value every interval. Supports both static and dynamic intervals.",editorConfig:{type:"structured",fields:[{type:{value:"number"},configKey:"time",label:"Interval",defaultValue:1e3,allowDynamic:!0},{type:{value:"json",label:"Any JSON value:"},configKey:"value",label:"Value",defaultValue:"",allowDynamic:!0}]},source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Timing/Interval/Interval.flyde.js",export:"Interval"}},Interval__ygnqzwi1stiki29lavj6wu2w:{inputs:{},displayName:'Emit "\u2b50\ufe0f" each 2.5s',outputs:{value:{description:"Emitted value"}},reactiveInputs:["value"],completionOutputs:[],description:"Emits a value every interval.",defaultStyle:{icon:"stopwatch"},namespace:"Timing",id:"Interval__ygnqzwi1stiki29lavj6wu2w",run:n(98691).Interval.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Timing/Interval/Interval.flyde.js",export:"Interval"}},Collect:{id:"Collect",displayName:"Collect",description:"Collects values into a list. Over time, count, or trigger.",namespace:"Lists",defaultStyle:{icon:"bucket"},defaultData:{strategy:"count",count:{mode:"static",value:3}},editorConfig:{type:"custom",editorComponentBundleContent:'/*\n * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").\n * This devtool is neither made for production nor for readable output files.\n * It uses "eval()" calls to create a separate source file in the browser devtools.\n * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)\n * or disable the default devtool with "devtool: false".\n * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).\n */\n/******/ (() => { // webpackBootstrap\n/******/ \t"use strict";\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ "./src/Lists/Collect/Collect.tsx":\n/*!***************************************!*\\\n  !*** ./src/Lists/Collect/Collect.tsx ***!\n  \\***************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\neval("\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\"default\\": mod };\\n};\\nObject.defineProperty(exports, \\"__esModule\\", ({ value: true }));\\nconst core_1 = __webpack_require__(/*! @blueprintjs/core */ \\"@blueprintjs/core\\");\\nconst react_1 = __importDefault(__webpack_require__(/*! react */ \\"react\\"));\\nconst ConfigurableInputEditor_1 = __webpack_require__(/*! ../../lib/ConfigurableInputEditor */ \\"./src/lib/ConfigurableInputEditor.tsx\\");\\nconst defaultValuePerStrategy = {\\n    count: {\\n        strategy: \\"count\\",\\n        count: { mode: \\"static\\", value: 2 },\\n    },\\n    time: {\\n        strategy: \\"time\\",\\n        time: { mode: \\"static\\", value: 2000 },\\n    },\\n    trigger: {\\n        strategy: \\"trigger\\",\\n    },\\n};\\nconst CollectEditor = function CollectEditor({ value, onChange, }) {\\n    const handleStrategyChange = react_1.default.useCallback((e) => {\\n        const strategy = e.currentTarget.value;\\n        const defaultValue = defaultValuePerStrategy[strategy];\\n        onChange(defaultValue);\\n    }, [onChange, value]);\\n    const innerEditor = react_1.default.useMemo(() => {\\n        switch (value.strategy) {\\n            case \\"count\\":\\n                return (react_1.default.createElement(ConfigurableInputEditor_1.ConfigurableInputEditor, { value: value.count, onChange: (count) => onChange({ ...value, count }), valueRenderer: (props) => (react_1.default.createElement(core_1.FormGroup, { label: \\"Count:\\", inline: true },\\n                        react_1.default.createElement(core_1.NumericInput, { value: props.value, onValueChange: (e) => onChange({\\n                                ...value,\\n                                count: { mode: \\"static\\", value: e },\\n                            }) }))), modeLabel: \\"Count mode:\\", defaultStaticValue: 2 }));\\n            case \\"time\\":\\n                return (react_1.default.createElement(ConfigurableInputEditor_1.ConfigurableInputEditor, { value: value.time, onChange: (time) => onChange({ ...value, time }), valueRenderer: (props) => (react_1.default.createElement(core_1.FormGroup, { label: \\"Time:\\", inline: true },\\n                        react_1.default.createElement(core_1.NumericInput, { value: props.value, onValueChange: (e) => onChange({\\n                                ...value,\\n                                time: { mode: \\"static\\", value: e },\\n                            }) }))), modeLabel: \\"Time mode:\\", defaultStaticValue: 2000 }));\\n        }\\n    }, [value, onChange]);\\n    return (react_1.default.createElement(react_1.default.Fragment, null,\\n        react_1.default.createElement(core_1.RadioGroup, { label: \\"Collection strategy:\\", onChange: handleStrategyChange, selectedValue: value.strategy, inline: true },\\n            react_1.default.createElement(core_1.Radio, { label: \\"Count\\", value: \\"count\\" }),\\n            react_1.default.createElement(core_1.Radio, { label: \\"Time\\", value: \\"time\\" }),\\n            react_1.default.createElement(core_1.Radio, { label: \\"Dynamic\\", value: \\"trigger\\" })),\\n        innerEditor));\\n};\\nexports[\\"default\\"] = CollectEditor;\\n\\n\\n//# sourceURL=webpack://__MacroNode__Collect/./src/Lists/Collect/Collect.tsx?");\n\n/***/ }),\n\n/***/ "./src/lib/ConfigurableInputEditor.tsx":\n/*!*********************************************!*\\\n  !*** ./src/lib/ConfigurableInputEditor.tsx ***!\n  \\*********************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\neval("\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\"default\\": mod };\\n};\\nObject.defineProperty(exports, \\"__esModule\\", ({ value: true }));\\nexports.createConfigurableInputEditor = exports.ConfigurableInputEditor = void 0;\\nconst core_1 = __webpack_require__(/*! @blueprintjs/core */ \\"@blueprintjs/core\\");\\nconst react_1 = __importDefault(__webpack_require__(/*! react */ \\"react\\"));\\nconst ConfigurableInputEditor = function ({ value, onChange, valueRenderer: ValueRenderer, defaultStaticValue, modeLabel, }) {\\n    const handleModeChange = (e) => {\\n        onChange({\\n            mode: e.currentTarget.value,\\n            value: e.currentTarget.value === \\"static\\" ? defaultStaticValue : undefined,\\n        });\\n    };\\n    const handleValueChange = (value) => {\\n        onChange({\\n            value,\\n            mode: \\"static\\",\\n        });\\n    };\\n    // eslint-disable-next-line react-hooks/exhaustive-deps\\n    const MemoValueRenderer = react_1.default.useMemo(() => ValueRenderer, []);\\n    return (react_1.default.createElement(react_1.default.Fragment, null,\\n        react_1.default.createElement(core_1.RadioGroup, { label: modeLabel, onChange: handleModeChange, selectedValue: value.mode, inline: true },\\n            react_1.default.createElement(core_1.Radio, { label: \\"Static\\", value: \\"static\\" }),\\n            react_1.default.createElement(core_1.Radio, { label: \\"Dynamic\\", value: \\"dynamic\\" })),\\n        value.mode === \\"static\\" ? (react_1.default.createElement(MemoValueRenderer, { value: value.value, onChange: handleValueChange })) : null));\\n};\\nexports.ConfigurableInputEditor = ConfigurableInputEditor;\\nconst createConfigurableInputEditor = (valueRenderer) => {\\n    return (props) => (react_1.default.createElement(exports.ConfigurableInputEditor, { ...props, valueRenderer: valueRenderer }));\\n};\\nexports.createConfigurableInputEditor = createConfigurableInputEditor;\\n\\n\\n//# sourceURL=webpack://__MacroNode__Collect/./src/lib/ConfigurableInputEditor.tsx?");\n\n/***/ }),\n\n/***/ "@blueprintjs/core":\n/*!****************************!*\\\n  !*** external "Blueprint" ***!\n  \\****************************/\n/***/ ((module) => {\n\nmodule.exports = window["Blueprint"];\n\n/***/ }),\n\n/***/ "react":\n/*!************************!*\\\n  !*** external "React" ***!\n  \\************************/\n/***/ ((module) => {\n\nmodule.exports = window["React"];\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \t// This entry module is referenced by other modules so it can\'t be inlined\n/******/ \tvar __webpack_exports__ = __webpack_require__("./src/Lists/Collect/Collect.tsx");\n/******/ \twindow.__MacroNode__Collect = __webpack_exports__;\n/******/ \t\n/******/ })()\n;'},source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Lists/Collect/Collect.flyde.js",export:"Collect"}},Collect__lfrwwz35676vn1hb9ykzpewd:{displayName:"Collect 3 values",description:"Collect 3 values and emit a list of them.",inputs:{value:{description:"Value to collect"}},reactiveInputs:["value"],outputs:{list:{description:"Collected values"}},completionOutputs:["list"],defaultStyle:{icon:"bucket"},namespace:"Lists",id:"Collect__lfrwwz35676vn1hb9ykzpewd",run:n(62737).Collect.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Lists/Collect/Collect.flyde.js",export:"Collect"}},"InlineValue__DebounceThrottle-xy049dv":{defaultStyle:{size:"small",icon:"pen"},displayName:'"\u2705"',description:'Emits the value `"\u2705"`',inputs:{},outputs:{value:{displayName:"Value",description:"Emits the value configured"}},id:"InlineValue__DebounceThrottle-xy049dv",run:n(17737).InlineValue.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Values/InlineValue.flyde.js",export:"InlineValue"}}},flow:{imports:{"@flyde/stdlib":["Throttle","Debounce","InlineValue","Interval","Collect"]},node:{instances:[{pos:{x:-884.2089672851562,y:-298.4133969348638},id:"wj31gd73i5l111q999pv4kor",inputConfig:{},visibleOutputs:["unthrottledValue","__error"],nodeId:"Throttle__wj31gd73i5l111q999pv4kor",macroId:"Throttle",macroData:{delayMs:{value:3e3,mode:"static"}},style:{size:"regular"}},{pos:{x:-1090.1673413085937,y:-297.6969967883794},id:"eaa2b80mmdusjvxi3fve0du1",inputConfig:{},nodeId:"Debounce__eaa2b80mmdusjvxi3fve0du1",macroId:"Debounce",macroData:{delayMs:{value:2e3,mode:"static"}}},{pos:{x:-781.8923828125,y:-170.0860384469086},id:"scs3pycv9lz28ykunbkqn9to",inputConfig:{},nodeId:"InlineValue__scs3pycv9lz28ykunbkqn9to",macroId:"InlineValue",macroData:{type:"string",value:"\u274c",label:'"\u274c"'},style:{size:"small",icon:"pen",color:"#f15bb5"}},{pos:{x:-995.8424365234375,y:-168.312734375},id:"ApisCombination-3k049q4",inputConfig:{},nodeId:"InlineValue__ApisCombination-3k049q4",macroId:"InlineValue",macroData:{type:"string",value:"\ud83d\udd50",label:'"\ud83d\udd50"'},style:{size:"small",icon:"pen"}},{pos:{x:-1005.08294921875,y:-397.30365435972453},id:"ygnqzwi1stiki29lavj6wu2w",inputConfig:{},nodeId:"Interval__ygnqzwi1stiki29lavj6wu2w",macroId:"Interval",macroData:{time:{value:2500,mode:"static"},value:{value:"\u2b50\ufe0f",mode:"static"}}},{pos:{x:-917.6480712890625,y:-90.7339411755601},id:"lfrwwz35676vn1hb9ykzpewd",inputConfig:{},nodeId:"Collect__lfrwwz35676vn1hb9ykzpewd",macroId:"Collect",macroData:{strategy:"count",count:{mode:"static",value:3}},style:{size:"small"}},{pos:{x:-882.0670654296875,y:-168.18171105433046},id:"DebounceThrottle-xy049dv",inputConfig:{},nodeId:"InlineValue__DebounceThrottle-xy049dv",macroId:"InlineValue",macroData:{type:"string",value:"\u2705",label:'"\u2705"'},style:{size:"small",icon:"pen"}}],connections:[{from:{insId:"wj31gd73i5l111q999pv4kor",pinId:"__error"},to:{insId:"scs3pycv9lz28ykunbkqn9to",pinId:"__trigger"}},{from:{insId:"eaa2b80mmdusjvxi3fve0du1",pinId:"debouncedValue"},to:{insId:"ApisCombination-3k049q4",pinId:"__trigger"}},{from:{insId:"ygnqzwi1stiki29lavj6wu2w",pinId:"value"},to:{insId:"eaa2b80mmdusjvxi3fve0du1",pinId:"value"}},{from:{insId:"ygnqzwi1stiki29lavj6wu2w",pinId:"value"},to:{insId:"wj31gd73i5l111q999pv4kor",pinId:"value"}},{from:{insId:"ApisCombination-3k049q4",pinId:"value"},to:{insId:"lfrwwz35676vn1hb9ykzpewd",pinId:"value"}},{from:{insId:"scs3pycv9lz28ykunbkqn9to",pinId:"value"},to:{insId:"lfrwwz35676vn1hb9ykzpewd",pinId:"value"}},{from:{insId:"lfrwwz35676vn1hb9ykzpewd",pinId:"list"},to:{insId:"__this",pinId:"output"}},{from:{insId:"wj31gd73i5l111q999pv4kor",pinId:"unthrottledValue"},to:{insId:"DebounceThrottle-xy049dv",pinId:"__trigger"}},{from:{insId:"DebounceThrottle-xy049dv",pinId:"value"},to:{insId:"lfrwwz35676vn1hb9ykzpewd",pinId:"value"}}],id:"DebounceThrottle",inputs:{},outputs:{output:{type:"any",optional:!1,delayed:!1}},inputsPosition:{city:{x:-187.27285824815934,y:-14.13215209416181},Bob:{x:-464.39225613814307,y:-267.86263932413937}},outputsPosition:{json:{x:-441.98276309426666,y:480.38719404276554},na:{x:-441.98276309426666,y:480.38719404276554},result:{x:-499.82438378976735,y:706.7650396699393},output:{x:-874.7480636542145,y:6.196668367520431},response:{x:-506.3386688159596,y:488.67302443385125},"Bob 42":{x:-736.217912287027,y:209.40813992513762}},completionOutputs:["output"]}}},O={dependencies:{Http:{id:"Http",namespace:"HTTP",displayName:"HTTP Request",description:"Performs a HTTP request to a URL and emits the response data",defaultStyle:{icon:"globe"},defaultData:{method:{mode:"static",value:"GET"},url:{mode:"static",value:"https://www.example.com"},headers:{mode:"static",value:{}},params:{mode:"static",value:{}},data:{mode:"static",value:{}}},editorConfig:{type:"structured",fields:[{type:{value:"string"},configKey:"url",label:"URL",defaultValue:"https://www.example.com",allowDynamic:!0},{type:{value:"select",items:[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"PUT",value:"PUT"},{label:"DELETE",value:"DELETE"},{label:"PATCH",value:"PATCH"}]},configKey:"method",label:"Method",defaultValue:"GET",allowDynamic:!0},{type:{value:"json",label:""},configKey:"headers",label:"Headers",defaultValue:{},allowDynamic:!0},{type:{value:"json"},configKey:"params",label:"Query Parameters",defaultValue:{},allowDynamic:!0},{type:{value:"json"},configKey:"data",label:"Request Body",defaultValue:{},allowDynamic:!0}]},source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Http/Http.flyde.js",export:"Http"}},"Http__GET Request-907":{displayName:"HTTP GET api.country.is/",description:"Performs a  GET HTTP request to https://api.country.is/ and emits the response data",inputs:{},outputs:{data:{displayName:"Data",description:"Emits the response data"}},defaultStyle:{icon:"globe"},namespace:"HTTP",id:"Http__GET Request-907",run:n(50544).Http.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Http/Http.flyde.js",export:"Http"}},"Http__POST Request-624":{displayName:"HTTP POST countriesnow.space/api/v0.1/countries/capital",description:"Performs a  POST HTTP request to https://countriesnow.space/api/v0.1/countries/capital and emits the response data",inputs:{data:{}},outputs:{data:{displayName:"Data",description:"Emits the response data"}},defaultStyle:{icon:"globe"},namespace:"HTTP",id:"Http__POST Request-624",run:n(50544).Http.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Http/Http.flyde.js",export:"Http"}},CodeExpression:{id:"CodeExpression",displayName:"Inline Code",defaultStyle:{icon:"code"},description:"A static value or JS expression",defaultData:{value:"inputs.a + inputs.b",label:'"inputs.a + inputs.b"'},editorConfig:{type:"custom",editorComponentBundleContent:'/*\n * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").\n * This devtool is neither made for production nor for readable output files.\n * It uses "eval()" calls to create a separate source file in the browser devtools.\n * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)\n * or disable the default devtool with "devtool: false".\n * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).\n */\n/******/ (() => { // webpackBootstrap\n/******/ \t"use strict";\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ "./src/Values/CodeExpression.tsx":\n/*!***************************************!*\\\n  !*** ./src/Values/CodeExpression.tsx ***!\n  \\***************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\neval("\\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\\n    if (k2 === undefined) k2 = k;\\n    var desc = Object.getOwnPropertyDescriptor(m, k);\\n    if (!desc || (\\"get\\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\\n      desc = { enumerable: true, get: function() { return m[k]; } };\\n    }\\n    Object.defineProperty(o, k2, desc);\\n}) : (function(o, m, k, k2) {\\n    if (k2 === undefined) k2 = k;\\n    o[k2] = m[k];\\n}));\\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\\n    Object.defineProperty(o, \\"default\\", { enumerable: true, value: v });\\n}) : function(o, v) {\\n    o[\\"default\\"] = v;\\n});\\nvar __importStar = (this && this.__importStar) || function (mod) {\\n    if (mod && mod.__esModule) return mod;\\n    var result = {};\\n    if (mod != null) for (var k in mod) if (k !== \\"default\\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\\n    __setModuleDefault(result, mod);\\n    return result;\\n};\\nObject.defineProperty(exports, \\"__esModule\\", ({ value: true }));\\nconst core_1 = __webpack_require__(/*! @blueprintjs/core */ \\"@blueprintjs/core\\");\\nconst react_1 = __importStar(__webpack_require__(/*! react */ \\"react\\"));\\nconst getInlineVariables_1 = __webpack_require__(/*! ./getInlineVariables */ \\"./src/Values/getInlineVariables.ts\\");\\nconst labelMaxLength = 20;\\nfunction valToLabel(val) {\\n    try {\\n        const label = JSON.stringify(val);\\n        if (label.length > labelMaxLength) {\\n            return `${label.slice(0, labelMaxLength)}...`;\\n        }\\n        return label;\\n    }\\n    catch (e) {\\n        return `Value`;\\n    }\\n}\\nconst CodeExpressionEditor = function CodeExpressionEditor(props) {\\n    var _a;\\n    const { value, onChange } = props;\\n    const changeValue = (0, react_1.useCallback)((_val) => {\\n        const newLabel = valToLabel(_val);\\n        const oldLabel = valToLabel(value.value);\\n        const wasUsingDefaultLabel = value.label === oldLabel || !value.label;\\n        const labelToUse = wasUsingDefaultLabel ? newLabel : value.label;\\n        onChange({ ...value, value: _val, label: labelToUse });\\n    }, [value, onChange]);\\n    const vars = (0, getInlineVariables_1.getVariables)((_a = value.value) !== null && _a !== void 0 ? _a : \\"\\");\\n    return (react_1.default.createElement(\\"div\\", null,\\n        react_1.default.createElement(core_1.FormGroup, { label: \\"Value:\\", helperText: `Accepts any valid JS extension. ` },\\n            react_1.default.createElement(core_1.TextArea, { value: value.value, fill: true, onChange: (e) => changeValue(e.target.value) })),\\n        react_1.default.createElement(\\"div\\", null, vars.length > 0 ? (react_1.default.createElement(\\"small\\", null,\\n            \\"External inputs exposed from this expression:\\",\\n            \\" \\",\\n            react_1.default.createElement(\\"em\\", null, vars.join(\\", \\")))) : (react_1.default.createElement(\\"small\\", null, \\"Expose external inputs by using the \\\\\\"inputs\\\\\\" object. For example, \\\\\\"inputs.a + inputs.b\\\\\\" will expose 2 inputs, a and b, and sum them.\\"))),\\n        react_1.default.createElement(core_1.FormGroup, { label: \\"Label:\\" },\\n            react_1.default.createElement(core_1.InputGroup, { type: \\"text\\", value: value.label, onChange: (e) => onChange({ ...value, label: e.target.value }), placeholder: \\"Code Expression\\" }))));\\n};\\nexports[\\"default\\"] = CodeExpressionEditor;\\n\\n\\n//# sourceURL=webpack://__MacroNode__CodeExpression/./src/Values/CodeExpression.tsx?");\n\n/***/ }),\n\n/***/ "./src/Values/getInlineVariables.ts":\n/*!******************************************!*\\\n  !*** ./src/Values/getInlineVariables.ts ***!\n  \\******************************************/\n/***/ ((__unused_webpack_module, exports) => {\n\neval("\\nObject.defineProperty(exports, \\"__esModule\\", ({ value: true }));\\nexports.getVariables = void 0;\\nconst getVariables = (code) => {\\n    return (code.match(/inputs\\\\.([a-zA-Z]\\\\w*)/g) || []).map((v) => v.replace(/inputs\\\\./, \\"\\"));\\n};\\nexports.getVariables = getVariables;\\n\\n\\n//# sourceURL=webpack://__MacroNode__CodeExpression/./src/Values/getInlineVariables.ts?");\n\n/***/ }),\n\n/***/ "@blueprintjs/core":\n/*!****************************!*\\\n  !*** external "Blueprint" ***!\n  \\****************************/\n/***/ ((module) => {\n\nmodule.exports = window["Blueprint"];\n\n/***/ }),\n\n/***/ "react":\n/*!************************!*\\\n  !*** external "React" ***!\n  \\************************/\n/***/ ((module) => {\n\nmodule.exports = window["React"];\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \t// This entry module is referenced by other modules so it can\'t be inlined\n/******/ \tvar __webpack_exports__ = __webpack_require__("./src/Values/CodeExpression.tsx");\n/******/ \twindow.__MacroNode__CodeExpression = __webpack_exports__;\n/******/ \t\n/******/ })()\n;'},source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Values/CodeExpression.flyde.js",export:"CodeExpression"}},CodeExpression__voq2pt830zt74hnzlgjo3oea:{defaultStyle:{size:"small",icon:"code"},displayName:"{iso2: inputs.data.country}",description:"Evaluates the expression `{iso2: inputs.data.country}`",inputs:{data:{}},outputs:{value:{displayName:"Value",description:"The result of the expression evaluation"}},id:"CodeExpression__voq2pt830zt74hnzlgjo3oea",run:n(29755).CodeExpression.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Values/CodeExpression.flyde.js",export:"CodeExpression"}},CodeExpression__sznjntqrup6mwx9hr26d58tl:{defaultStyle:{size:"small",icon:"code"},displayName:"`Looks like you're from ${inputs.country} (capital - ${inputs.capital})`",description:"Evaluates the expression ``Looks like you're from ${inputs.country} (capital - ${inputs.capital})``",inputs:{country:{},capital:{}},outputs:{value:{displayName:"Value",description:"The result of the expression evaluation"}},id:"CodeExpression__sznjntqrup6mwx9hr26d58tl",run:n(29755).CodeExpression.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Values/CodeExpression.flyde.js",export:"CodeExpression"}},InlineValue:{id:"InlineValue",displayName:"Inline Value",defaultStyle:{icon:"pen"},description:"A static value or JS expression",defaultData:{type:"string",value:"Hello",label:'"Hello"'},editorConfig:{type:"custom",editorComponentBundleContent:'/*\n * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").\n * This devtool is neither made for production nor for readable output files.\n * It uses "eval()" calls to create a separate source file in the browser devtools.\n * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)\n * or disable the default devtool with "devtool: false".\n * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).\n */\n/******/ (() => { // webpackBootstrap\n/******/ \t"use strict";\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ "./src/Values/InlineValue.tsx":\n/*!************************************!*\\\n  !*** ./src/Values/InlineValue.tsx ***!\n  \\************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\neval("\\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\\n    if (k2 === undefined) k2 = k;\\n    var desc = Object.getOwnPropertyDescriptor(m, k);\\n    if (!desc || (\\"get\\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\\n      desc = { enumerable: true, get: function() { return m[k]; } };\\n    }\\n    Object.defineProperty(o, k2, desc);\\n}) : (function(o, m, k, k2) {\\n    if (k2 === undefined) k2 = k;\\n    o[k2] = m[k];\\n}));\\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\\n    Object.defineProperty(o, \\"default\\", { enumerable: true, value: v });\\n}) : function(o, v) {\\n    o[\\"default\\"] = v;\\n});\\nvar __importStar = (this && this.__importStar) || function (mod) {\\n    if (mod && mod.__esModule) return mod;\\n    var result = {};\\n    if (mod != null) for (var k in mod) if (k !== \\"default\\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\\n    __setModuleDefault(result, mod);\\n    return result;\\n};\\nObject.defineProperty(exports, \\"__esModule\\", ({ value: true }));\\nconst core_1 = __webpack_require__(/*! @blueprintjs/core */ \\"@blueprintjs/core\\");\\nconst react_1 = __importStar(__webpack_require__(/*! react */ \\"react\\"));\\nconst types = [\\n    \\"string\\",\\n    \\"number\\",\\n    \\"json\\",\\n    \\"boolean\\",\\n];\\nconst defaultValuePerType = {\\n    string: (currValue) => `${currValue}`,\\n    number: (currValue) => isNaN(Number(currValue)) ? 0 : Number(currValue),\\n    json: (currValue) => JSON.stringify(currValue),\\n    boolean: (currValue) => !!currValue,\\n    expression: (currValue) => currValue,\\n};\\nconst labelMaxLength = 20;\\nfunction valToLabel(val) {\\n    try {\\n        const label = JSON.stringify(val);\\n        if (label.length > labelMaxLength) {\\n            return `${label.slice(0, labelMaxLength)}...`;\\n        }\\n        return label;\\n    }\\n    catch (e) {\\n        return `Value`;\\n    }\\n}\\nconst InlineValueEditor = function InlineValueEditor(props) {\\n    const { value, onChange } = props;\\n    const changeType = (0, react_1.useCallback)((type) => {\\n        const newValue = defaultValuePerType[type](value.value);\\n        onChange({\\n            value: newValue,\\n            type,\\n            label: valToLabel(value.value) === value.label\\n                ? valToLabel(newValue)\\n                : value.label,\\n        });\\n    }, [value, onChange]);\\n    const changeValue = (0, react_1.useCallback)((_val) => {\\n        const newLabel = valToLabel(_val);\\n        const oldLabel = valToLabel(value.value);\\n        const wasUsingDefaultLabel = value.label === oldLabel || !value.label;\\n        const labelToUse = wasUsingDefaultLabel ? newLabel : value.label;\\n        onChange({ ...value, value: _val, label: labelToUse });\\n    }, [value, onChange]);\\n    const editorPanel = (0, react_1.useMemo)(() => {\\n        switch (value.type) {\\n            case \\"string\\":\\n                return (react_1.default.createElement(core_1.FormGroup, { label: \\"Value:\\" },\\n                    react_1.default.createElement(core_1.InputGroup, { type: \\"text\\", value: value.value, onChange: (e) => changeValue(e.target.value) })));\\n            case \\"number\\":\\n                return (react_1.default.createElement(core_1.FormGroup, { label: \\"Value:\\" },\\n                    react_1.default.createElement(core_1.NumericInput, { value: value.value, onValueChange: (e) => changeValue(e) })));\\n            case \\"json\\":\\n                return (react_1.default.createElement(core_1.FormGroup, { label: \\"Value:\\" },\\n                    react_1.default.createElement(core_1.TextArea, { value: value.value, onChange: (e) => changeValue(e.target.value) })));\\n            case \\"boolean\\":\\n                return (react_1.default.createElement(core_1.FormGroup, { label: \\"Value:\\" },\\n                    react_1.default.createElement(core_1.HTMLSelect, { value: value.value, onChange: (e) => changeValue(e.target.value === \\"true\\") },\\n                        react_1.default.createElement(\\"option\\", { value: \\"true\\" }, \\"true\\"),\\n                        react_1.default.createElement(\\"option\\", { value: \\"false\\" }, \\"false\\"))));\\n        }\\n    }, [value, changeValue]);\\n    return (react_1.default.createElement(\\"div\\", null,\\n        react_1.default.createElement(core_1.FormGroup, { label: \\"Value type:\\" },\\n            react_1.default.createElement(core_1.HTMLSelect, { value: value.type, onChange: (e) => changeType(e.target.value) }, types.map((type) => (react_1.default.createElement(\\"option\\", { key: type, value: type }, type))))),\\n        editorPanel,\\n        react_1.default.createElement(core_1.FormGroup, { label: \\"Label:\\" },\\n            react_1.default.createElement(core_1.InputGroup, { type: \\"text\\", value: value.label, onChange: (e) => onChange({ ...value, label: e.target.value }) }))));\\n};\\nexports[\\"default\\"] = InlineValueEditor;\\n\\n\\n//# sourceURL=webpack://__MacroNode__InlineValue/./src/Values/InlineValue.tsx?");\n\n/***/ }),\n\n/***/ "@blueprintjs/core":\n/*!****************************!*\\\n  !*** external "Blueprint" ***!\n  \\****************************/\n/***/ ((module) => {\n\nmodule.exports = window["Blueprint"];\n\n/***/ }),\n\n/***/ "react":\n/*!************************!*\\\n  !*** external "React" ***!\n  \\************************/\n/***/ ((module) => {\n\nmodule.exports = window["React"];\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \t// This entry module is referenced by other modules so it can\'t be inlined\n/******/ \tvar __webpack_exports__ = __webpack_require__("./src/Values/InlineValue.tsx");\n/******/ \twindow.__MacroNode__InlineValue = __webpack_exports__;\n/******/ \t\n/******/ })()\n;'},source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Values/InlineValue.flyde.js",export:"InlineValue"}},InlineValue__xlmmcvlcdpgpix33mv40yzpr:{defaultStyle:{size:"small",icon:"pen"},displayName:'"data.capital"',description:'Emits the value `"data.capital"`',inputs:{},outputs:{value:{displayName:"Value",description:"Emits the value configured"}},id:"InlineValue__xlmmcvlcdpgpix33mv40yzpr",run:n(17737).InlineValue.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Values/InlineValue.flyde.js",export:"InlineValue"}},"Get Attribute":{id:"Get Attribute",searchKeywords:["pick","dot"],namespace:"Objects",defaultStyle:{icon:"fa-magnifying-glass"},description:"Gets an attribute from an object",inputs:{object:{description:"Object to get attribute from"},attribute:{description:"Attribute to get"}},outputs:{value:{description:"The value of the attribute"}},run:n(73098).GetAttributeOld.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Objects/Objects.flyde.js",export:"GetAttributeOld"}},"InlineValue__ApisCombination-4t249pe":{defaultStyle:{size:"small",icon:"pen"},displayName:'"data.name"',description:'Emits the value `"data.name"`',inputs:{},outputs:{value:{displayName:"Value",description:"Emits the value configured"}},id:"InlineValue__ApisCombination-4t249pe",run:n(17737).InlineValue.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Values/InlineValue.flyde.js",export:"InlineValue"}}},flow:{imports:{"@flyde/stdlib":["Http","CodeExpression","InlineValue","Get Attribute"]},node:{instances:[{pos:{x:-720.380009765625,y:-276.40269711494443},id:"GET Request-907",inputConfig:{url:{mode:"queue"}},visibleInputs:["__trigger"],visibleOutputs:["data"],nodeId:"Http__GET Request-907",macroId:"Http",macroData:{method:{mode:"static",value:"GET"},url:{mode:"static",value:"https://api.country.is/"},headers:{mode:"static",value:{}},params:{mode:"static",value:{}},data:{mode:"static",value:{}}},style:{size:"regular",icon:"fa-server"}},{pos:{x:-780.1691723632813,y:-92.39764404296875},id:"POST Request-624",inputConfig:{url:{mode:"queue"}},visibleInputs:["data"],nodeId:"Http__POST Request-624",macroId:"Http",macroData:{method:{mode:"static",value:"POST"},data:{mode:"dynamic"},url:{mode:"static",value:"https://countriesnow.space/api/v0.1/countries/capital"},headers:{mode:"static",value:{}},params:{mode:"static",value:{}}},style:{size:"regular",icon:"fa-server"}},{pos:{x:-727.7590351299609,y:-183.1587427807403},id:"voq2pt830zt74hnzlgjo3oea",inputConfig:{},nodeId:"CodeExpression__voq2pt830zt74hnzlgjo3oea",macroId:"CodeExpression",macroData:{value:"{iso2: inputs.data.country}",label:"{iso2: inputs.data.country}"}},{pos:{x:-711.7029676309611,y:-1.9025583293574044},id:"Formatted Response-xn049cy",inputConfig:{},node:{instances:[{pos:{x:-753.2273578838674,y:170.2144483565396},id:"sznjntqrup6mwx9hr26d58tl",inputConfig:{},nodeId:"CodeExpression__sznjntqrup6mwx9hr26d58tl",macroId:"CodeExpression",macroData:{value:"`Looks like you're from ${inputs.country} (capital - ${inputs.capital})`",label:"`Looks like you're from ${inputs.country} (capital - ${inputs.capital})`"}},{pos:{x:-382.62579538386717,y:-65.13273570717877},id:"xlmmcvlcdpgpix33mv40yzpr",inputConfig:{},nodeId:"InlineValue__xlmmcvlcdpgpix33mv40yzpr",macroId:"InlineValue",macroData:{type:"string",value:"data.capital",label:'"data.capital"'}},{pos:{x:-801.60179056088,y:25.242486114137805},id:"Get Attribute-4p049fr",inputConfig:{attribute:{mode:"sticky"}},visibleInputs:["attribute","object"],nodeId:"Get Attribute"},{pos:{x:-460.770003451505,y:18.543191070192492},id:"ApisCombination-06149he",inputConfig:{attribute:{mode:"sticky"}},nodeId:"Get Attribute"},{pos:{x:-836.6549243164063,y:-82.7263525390625},id:"ApisCombination-4t249pe",inputConfig:{},nodeId:"InlineValue__ApisCombination-4t249pe",macroId:"InlineValue",macroData:{type:"string",value:"data.name",label:'"data.name"'}}],connections:[{from:{insId:"xlmmcvlcdpgpix33mv40yzpr",pinId:"value"},to:{insId:"ApisCombination-06149he",pinId:"attribute"}},{from:{insId:"Get Attribute-4p049fr",pinId:"value"},to:{insId:"sznjntqrup6mwx9hr26d58tl",pinId:"country"}},{from:{insId:"ApisCombination-4t249pe",pinId:"value"},to:{insId:"Get Attribute-4p049fr",pinId:"attribute"}},{from:{insId:"ApisCombination-06149he",pinId:"value"},to:{insId:"sznjntqrup6mwx9hr26d58tl",pinId:"capital"}},{from:{insId:"__this",pinId:"object"},to:{insId:"Get Attribute-4p049fr",pinId:"object"}},{from:{insId:"__this",pinId:"object"},to:{insId:"ApisCombination-06149he",pinId:"object"}},{from:{insId:"sznjntqrup6mwx9hr26d58tl",pinId:"value"},to:{insId:"__this",pinId:"value"}}],id:"Formatted Response",inputs:{object:{mode:"required"}},outputs:{value:{delayed:!1}},inputsPosition:{object:{x:-554.16943359375,y:-185.74574279785156}},outputsPosition:{value:{x:-593.2343139648438,y:319.9629592895508}},completionOutputs:["value"],defaultStyle:{size:"large",color:"#fee440"}},style:{size:"large",color:"#fee440"}}],connections:[{from:{insId:"GET Request-907",pinId:"data"},to:{insId:"voq2pt830zt74hnzlgjo3oea",pinId:"data"}},{from:{insId:"voq2pt830zt74hnzlgjo3oea",pinId:"value"},to:{insId:"POST Request-624",pinId:"data"}},{from:{insId:"POST Request-624",pinId:"data"},to:{insId:"Formatted Response-xn049cy",pinId:"object"}},{from:{insId:"Formatted Response-xn049cy",pinId:"value"},to:{insId:"__this",pinId:"output"}}],id:"ApisCombination",inputs:{},outputs:{output:{type:"any",optional:!1,delayed:!1}},inputsPosition:{city:{x:-187.27285824815934,y:-14.13215209416181}},outputsPosition:{json:{x:-441.98276309426666,y:480.38719404276554},na:{x:-441.98276309426666,y:480.38719404276554},result:{x:-499.82438378976735,y:706.7650396699393},output:{x:-618.2645336833217,y:113.21177842592544},response:{x:-500.61566893722795,y:421.9045791861946}},completionOutputs:["output"]}}},T=[{label:"Hello World",fileName:"hello.flyde",flow:S,tip:'Try double clicking on the "World" node to change the string.',playgroundUrl:"http://play.flyde.dev/apps/bec05712-1fbb-4f40-b688-dc5790c8b5ea"},{label:"Beep Boop",fileName:"beep.flyde",flow:{dependencies:{RoundRobin:{id:"RoundRobin",defaultStyle:{icon:"rotate"},displayName:"Round Robin",namespace:"Control Flow",defaultData:{count:3},editorConfig:{type:"structured",fields:[{type:{value:"number"},configKey:"count",label:"Count",defaultValue:3,allowDynamic:!1}]},source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/ControlFlow/ControlFlow.flyde.js",export:"RoundRobin"}},RoundRobin__oeum6dqgsprbuef0p9s3b1ye:{displayName:"Round Robin 3",description:"Item will be emitted to one of the 3 outputs in a round robin fashion",inputs:{value:{mode:"required",description:"The value to emit"}},completionOutputs:[],reactiveInputs:["value"],outputs:{r1:{description:'The 1 output in order to emit the value received. After emitting a value, it moves to "r2"\'s turn.'},r2:{description:'The 2 output in order to emit the value received. After emitting a value, it moves to "r0"\'s turn.'},r3:{description:'The 3 output in order to emit the value received. After emitting a value, it moves to "r1"\'s turn.'}},defaultStyle:{icon:"rotate"},namespace:"Control Flow",id:"RoundRobin__oeum6dqgsprbuef0p9s3b1ye",run:n(66257).RoundRobin.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/ControlFlow/ControlFlow.flyde.js",export:"RoundRobin"}},InlineValue:{id:"InlineValue",displayName:"Inline Value",defaultStyle:{icon:"pen"},description:"A static value or JS expression",defaultData:{type:"string",value:"Hello",label:'"Hello"'},editorConfig:{type:"custom",editorComponentBundleContent:'/*\n * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").\n * This devtool is neither made for production nor for readable output files.\n * It uses "eval()" calls to create a separate source file in the browser devtools.\n * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)\n * or disable the default devtool with "devtool: false".\n * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).\n */\n/******/ (() => { // webpackBootstrap\n/******/ \t"use strict";\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ "./src/Values/InlineValue.tsx":\n/*!************************************!*\\\n  !*** ./src/Values/InlineValue.tsx ***!\n  \\************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\neval("\\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\\n    if (k2 === undefined) k2 = k;\\n    var desc = Object.getOwnPropertyDescriptor(m, k);\\n    if (!desc || (\\"get\\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\\n      desc = { enumerable: true, get: function() { return m[k]; } };\\n    }\\n    Object.defineProperty(o, k2, desc);\\n}) : (function(o, m, k, k2) {\\n    if (k2 === undefined) k2 = k;\\n    o[k2] = m[k];\\n}));\\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\\n    Object.defineProperty(o, \\"default\\", { enumerable: true, value: v });\\n}) : function(o, v) {\\n    o[\\"default\\"] = v;\\n});\\nvar __importStar = (this && this.__importStar) || function (mod) {\\n    if (mod && mod.__esModule) return mod;\\n    var result = {};\\n    if (mod != null) for (var k in mod) if (k !== \\"default\\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\\n    __setModuleDefault(result, mod);\\n    return result;\\n};\\nObject.defineProperty(exports, \\"__esModule\\", ({ value: true }));\\nconst core_1 = __webpack_require__(/*! @blueprintjs/core */ \\"@blueprintjs/core\\");\\nconst react_1 = __importStar(__webpack_require__(/*! react */ \\"react\\"));\\nconst types = [\\n    \\"string\\",\\n    \\"number\\",\\n    \\"json\\",\\n    \\"boolean\\",\\n];\\nconst defaultValuePerType = {\\n    string: (currValue) => `${currValue}`,\\n    number: (currValue) => isNaN(Number(currValue)) ? 0 : Number(currValue),\\n    json: (currValue) => JSON.stringify(currValue),\\n    boolean: (currValue) => !!currValue,\\n    expression: (currValue) => currValue,\\n};\\nconst labelMaxLength = 20;\\nfunction valToLabel(val) {\\n    try {\\n        const label = JSON.stringify(val);\\n        if (label.length > labelMaxLength) {\\n            return `${label.slice(0, labelMaxLength)}...`;\\n        }\\n        return label;\\n    }\\n    catch (e) {\\n        return `Value`;\\n    }\\n}\\nconst InlineValueEditor = function InlineValueEditor(props) {\\n    const { value, onChange } = props;\\n    const changeType = (0, react_1.useCallback)((type) => {\\n        const newValue = defaultValuePerType[type](value.value);\\n        onChange({\\n            value: newValue,\\n            type,\\n            label: valToLabel(value.value) === value.label\\n                ? valToLabel(newValue)\\n                : value.label,\\n        });\\n    }, [value, onChange]);\\n    const changeValue = (0, react_1.useCallback)((_val) => {\\n        const newLabel = valToLabel(_val);\\n        const oldLabel = valToLabel(value.value);\\n        const wasUsingDefaultLabel = value.label === oldLabel || !value.label;\\n        const labelToUse = wasUsingDefaultLabel ? newLabel : value.label;\\n        onChange({ ...value, value: _val, label: labelToUse });\\n    }, [value, onChange]);\\n    const editorPanel = (0, react_1.useMemo)(() => {\\n        switch (value.type) {\\n            case \\"string\\":\\n                return (react_1.default.createElement(core_1.FormGroup, { label: \\"Value:\\" },\\n                    react_1.default.createElement(core_1.InputGroup, { type: \\"text\\", value: value.value, onChange: (e) => changeValue(e.target.value) })));\\n            case \\"number\\":\\n                return (react_1.default.createElement(core_1.FormGroup, { label: \\"Value:\\" },\\n                    react_1.default.createElement(core_1.NumericInput, { value: value.value, onValueChange: (e) => changeValue(e) })));\\n            case \\"json\\":\\n                return (react_1.default.createElement(core_1.FormGroup, { label: \\"Value:\\" },\\n                    react_1.default.createElement(core_1.TextArea, { value: value.value, onChange: (e) => changeValue(e.target.value) })));\\n            case \\"boolean\\":\\n                return (react_1.default.createElement(core_1.FormGroup, { label: \\"Value:\\" },\\n                    react_1.default.createElement(core_1.HTMLSelect, { value: value.value, onChange: (e) => changeValue(e.target.value === \\"true\\") },\\n                        react_1.default.createElement(\\"option\\", { value: \\"true\\" }, \\"true\\"),\\n                        react_1.default.createElement(\\"option\\", { value: \\"false\\" }, \\"false\\"))));\\n        }\\n    }, [value, changeValue]);\\n    return (react_1.default.createElement(\\"div\\", null,\\n        react_1.default.createElement(core_1.FormGroup, { label: \\"Value type:\\" },\\n            react_1.default.createElement(core_1.HTMLSelect, { value: value.type, onChange: (e) => changeType(e.target.value) }, types.map((type) => (react_1.default.createElement(\\"option\\", { key: type, value: type }, type))))),\\n        editorPanel,\\n        react_1.default.createElement(core_1.FormGroup, { label: \\"Label:\\" },\\n            react_1.default.createElement(core_1.InputGroup, { type: \\"text\\", value: value.label, onChange: (e) => onChange({ ...value, label: e.target.value }) }))));\\n};\\nexports[\\"default\\"] = InlineValueEditor;\\n\\n\\n//# sourceURL=webpack://__MacroNode__InlineValue/./src/Values/InlineValue.tsx?");\n\n/***/ }),\n\n/***/ "@blueprintjs/core":\n/*!****************************!*\\\n  !*** external "Blueprint" ***!\n  \\****************************/\n/***/ ((module) => {\n\nmodule.exports = window["Blueprint"];\n\n/***/ }),\n\n/***/ "react":\n/*!************************!*\\\n  !*** external "React" ***!\n  \\************************/\n/***/ ((module) => {\n\nmodule.exports = window["React"];\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \t// This entry module is referenced by other modules so it can\'t be inlined\n/******/ \tvar __webpack_exports__ = __webpack_require__("./src/Values/InlineValue.tsx");\n/******/ \twindow.__MacroNode__InlineValue = __webpack_exports__;\n/******/ \t\n/******/ })()\n;'},source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Values/InlineValue.flyde.js",export:"InlineValue"}},InlineValue__rh3ug7oqoze1rvn4k17kc556:{defaultStyle:{size:"small",icon:"pen"},displayName:'"beep"',description:'Emits the value `"beep"`',inputs:{},outputs:{value:{displayName:"Value",description:"Emits the value configured"}},id:"InlineValue__rh3ug7oqoze1rvn4k17kc556",run:n(17737).InlineValue.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Values/InlineValue.flyde.js",export:"InlineValue"}},"InlineValue__ApisCombination-69049ap":{defaultStyle:{size:"small",icon:"pen"},displayName:'"boop"',description:'Emits the value `"boop"`',inputs:{},outputs:{value:{displayName:"Value",description:"Emits the value configured"}},id:"InlineValue__ApisCombination-69049ap",run:n(17737).InlineValue.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Values/InlineValue.flyde.js",export:"InlineValue"}},"InlineValue__ApisCombination-ts149e2":{defaultStyle:{size:"small",icon:"pen"},displayName:'"bop"',description:'Emits the value `"bop"`',inputs:{},outputs:{value:{displayName:"Value",description:"Emits the value configured"}},id:"InlineValue__ApisCombination-ts149e2",run:n(17737).InlineValue.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Values/InlineValue.flyde.js",export:"InlineValue"}},Collect:{id:"Collect",displayName:"Collect",description:"Collects values into a list. Over time, count, or trigger.",namespace:"Lists",defaultStyle:{icon:"bucket"},defaultData:{strategy:"count",count:{mode:"static",value:3}},editorConfig:{type:"custom",editorComponentBundleContent:'/*\n * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").\n * This devtool is neither made for production nor for readable output files.\n * It uses "eval()" calls to create a separate source file in the browser devtools.\n * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)\n * or disable the default devtool with "devtool: false".\n * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).\n */\n/******/ (() => { // webpackBootstrap\n/******/ \t"use strict";\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ "./src/Lists/Collect/Collect.tsx":\n/*!***************************************!*\\\n  !*** ./src/Lists/Collect/Collect.tsx ***!\n  \\***************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\neval("\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\"default\\": mod };\\n};\\nObject.defineProperty(exports, \\"__esModule\\", ({ value: true }));\\nconst core_1 = __webpack_require__(/*! @blueprintjs/core */ \\"@blueprintjs/core\\");\\nconst react_1 = __importDefault(__webpack_require__(/*! react */ \\"react\\"));\\nconst ConfigurableInputEditor_1 = __webpack_require__(/*! ../../lib/ConfigurableInputEditor */ \\"./src/lib/ConfigurableInputEditor.tsx\\");\\nconst defaultValuePerStrategy = {\\n    count: {\\n        strategy: \\"count\\",\\n        count: { mode: \\"static\\", value: 2 },\\n    },\\n    time: {\\n        strategy: \\"time\\",\\n        time: { mode: \\"static\\", value: 2000 },\\n    },\\n    trigger: {\\n        strategy: \\"trigger\\",\\n    },\\n};\\nconst CollectEditor = function CollectEditor({ value, onChange, }) {\\n    const handleStrategyChange = react_1.default.useCallback((e) => {\\n        const strategy = e.currentTarget.value;\\n        const defaultValue = defaultValuePerStrategy[strategy];\\n        onChange(defaultValue);\\n    }, [onChange, value]);\\n    const innerEditor = react_1.default.useMemo(() => {\\n        switch (value.strategy) {\\n            case \\"count\\":\\n                return (react_1.default.createElement(ConfigurableInputEditor_1.ConfigurableInputEditor, { value: value.count, onChange: (count) => onChange({ ...value, count }), valueRenderer: (props) => (react_1.default.createElement(core_1.FormGroup, { label: \\"Count:\\", inline: true },\\n                        react_1.default.createElement(core_1.NumericInput, { value: props.value, onValueChange: (e) => onChange({\\n                                ...value,\\n                                count: { mode: \\"static\\", value: e },\\n                            }) }))), modeLabel: \\"Count mode:\\", defaultStaticValue: 2 }));\\n            case \\"time\\":\\n                return (react_1.default.createElement(ConfigurableInputEditor_1.ConfigurableInputEditor, { value: value.time, onChange: (time) => onChange({ ...value, time }), valueRenderer: (props) => (react_1.default.createElement(core_1.FormGroup, { label: \\"Time:\\", inline: true },\\n                        react_1.default.createElement(core_1.NumericInput, { value: props.value, onValueChange: (e) => onChange({\\n                                ...value,\\n                                time: { mode: \\"static\\", value: e },\\n                            }) }))), modeLabel: \\"Time mode:\\", defaultStaticValue: 2000 }));\\n        }\\n    }, [value, onChange]);\\n    return (react_1.default.createElement(react_1.default.Fragment, null,\\n        react_1.default.createElement(core_1.RadioGroup, { label: \\"Collection strategy:\\", onChange: handleStrategyChange, selectedValue: value.strategy, inline: true },\\n            react_1.default.createElement(core_1.Radio, { label: \\"Count\\", value: \\"count\\" }),\\n            react_1.default.createElement(core_1.Radio, { label: \\"Time\\", value: \\"time\\" }),\\n            react_1.default.createElement(core_1.Radio, { label: \\"Dynamic\\", value: \\"trigger\\" })),\\n        innerEditor));\\n};\\nexports[\\"default\\"] = CollectEditor;\\n\\n\\n//# sourceURL=webpack://__MacroNode__Collect/./src/Lists/Collect/Collect.tsx?");\n\n/***/ }),\n\n/***/ "./src/lib/ConfigurableInputEditor.tsx":\n/*!*********************************************!*\\\n  !*** ./src/lib/ConfigurableInputEditor.tsx ***!\n  \\*********************************************/\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\n\neval("\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\"default\\": mod };\\n};\\nObject.defineProperty(exports, \\"__esModule\\", ({ value: true }));\\nexports.createConfigurableInputEditor = exports.ConfigurableInputEditor = void 0;\\nconst core_1 = __webpack_require__(/*! @blueprintjs/core */ \\"@blueprintjs/core\\");\\nconst react_1 = __importDefault(__webpack_require__(/*! react */ \\"react\\"));\\nconst ConfigurableInputEditor = function ({ value, onChange, valueRenderer: ValueRenderer, defaultStaticValue, modeLabel, }) {\\n    const handleModeChange = (e) => {\\n        onChange({\\n            mode: e.currentTarget.value,\\n            value: e.currentTarget.value === \\"static\\" ? defaultStaticValue : undefined,\\n        });\\n    };\\n    const handleValueChange = (value) => {\\n        onChange({\\n            value,\\n            mode: \\"static\\",\\n        });\\n    };\\n    // eslint-disable-next-line react-hooks/exhaustive-deps\\n    const MemoValueRenderer = react_1.default.useMemo(() => ValueRenderer, []);\\n    return (react_1.default.createElement(react_1.default.Fragment, null,\\n        react_1.default.createElement(core_1.RadioGroup, { label: modeLabel, onChange: handleModeChange, selectedValue: value.mode, inline: true },\\n            react_1.default.createElement(core_1.Radio, { label: \\"Static\\", value: \\"static\\" }),\\n            react_1.default.createElement(core_1.Radio, { label: \\"Dynamic\\", value: \\"dynamic\\" })),\\n        value.mode === \\"static\\" ? (react_1.default.createElement(MemoValueRenderer, { value: value.value, onChange: handleValueChange })) : null));\\n};\\nexports.ConfigurableInputEditor = ConfigurableInputEditor;\\nconst createConfigurableInputEditor = (valueRenderer) => {\\n    return (props) => (react_1.default.createElement(exports.ConfigurableInputEditor, { ...props, valueRenderer: valueRenderer }));\\n};\\nexports.createConfigurableInputEditor = createConfigurableInputEditor;\\n\\n\\n//# sourceURL=webpack://__MacroNode__Collect/./src/lib/ConfigurableInputEditor.tsx?");\n\n/***/ }),\n\n/***/ "@blueprintjs/core":\n/*!****************************!*\\\n  !*** external "Blueprint" ***!\n  \\****************************/\n/***/ ((module) => {\n\nmodule.exports = window["Blueprint"];\n\n/***/ }),\n\n/***/ "react":\n/*!************************!*\\\n  !*** external "React" ***!\n  \\************************/\n/***/ ((module) => {\n\nmodule.exports = window["React"];\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \t// This entry module is referenced by other modules so it can\'t be inlined\n/******/ \tvar __webpack_exports__ = __webpack_require__("./src/Lists/Collect/Collect.tsx");\n/******/ \twindow.__MacroNode__Collect = __webpack_exports__;\n/******/ \t\n/******/ })()\n;'},source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Lists/Collect/Collect.flyde.js",export:"Collect"}},Collect__lqx9nk7f5fr4evl7dpoh6mff:{displayName:"Collect 3 values",description:"Collect 3 values and emit a list of them.",inputs:{value:{description:"Value to collect"}},reactiveInputs:["value"],outputs:{list:{description:"Collected values"}},completionOutputs:["list"],defaultStyle:{icon:"bucket"},namespace:"Lists",id:"Collect__lqx9nk7f5fr4evl7dpoh6mff",run:n(62737).Collect.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Lists/Collect/Collect.flyde.js",export:"Collect"}},Interval:{id:"Interval",displayName:"Interval",namespace:"Timing",defaultStyle:{icon:"stopwatch"},defaultData:{time:{mode:"static",value:1e3},value:{mode:"static",value:""}},description:"Emits a value every interval. Supports both static and dynamic intervals.",editorConfig:{type:"structured",fields:[{type:{value:"number"},configKey:"time",label:"Interval",defaultValue:1e3,allowDynamic:!0},{type:{value:"json",label:"Any JSON value:"},configKey:"value",label:"Value",defaultValue:"",allowDynamic:!0}]},source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Timing/Interval/Interval.flyde.js",export:"Interval"}},Interval__bczfob5ymeh27ufao57egapl:{inputs:{},displayName:'Emit "\ud83e\udd16" each 3s',outputs:{value:{description:"Emitted value"}},reactiveInputs:["value"],completionOutputs:[],description:"Emits a value every interval.",defaultStyle:{icon:"stopwatch"},namespace:"Timing",id:"Interval__bczfob5ymeh27ufao57egapl",run:n(98691).Interval.run,source:{path:"/home/runner/work/flyde/flyde/stdlib/dist/Timing/Interval/Interval.flyde.js",export:"Interval"}}},flow:{imports:{"@flyde/stdlib":["Interval","RoundRobin","InlineValue","Collect"]},node:{instances:[{pos:{x:-648.3432842494909,y:-354.8758657403789},id:"oeum6dqgsprbuef0p9s3b1ye",inputConfig:{},nodeId:"RoundRobin__oeum6dqgsprbuef0p9s3b1ye",macroId:"RoundRobin",macroData:{count:3}},{pos:{x:-713.3349495675956,y:-257.26351840624795},id:"rh3ug7oqoze1rvn4k17kc556",inputConfig:{},nodeId:"InlineValue__rh3ug7oqoze1rvn4k17kc556",macroId:"InlineValue",macroData:{type:"string",value:"beep",label:'"beep"'},style:{size:"small",icon:"pen"}},{pos:{x:-602.4942700195312,y:-257.6317993164063},id:"ApisCombination-69049ap",inputConfig:{},nodeId:"InlineValue__ApisCombination-69049ap",macroId:"InlineValue",macroData:{type:"string",value:"boop",label:'"boop"'},style:{size:"small",icon:"pen"}},{pos:{x:-490.38597900390624,y:-258.0616235351563},id:"ApisCombination-ts149e2",inputConfig:{},nodeId:"InlineValue__ApisCombination-ts149e2",macroId:"InlineValue",macroData:{type:"string",value:"bop",label:'"bop"'},style:{size:"small",icon:"pen"}},{pos:{x:-653.198505859375,y:-174.88709300637512},id:"lqx9nk7f5fr4evl7dpoh6mff",inputConfig:{},nodeId:"Collect__lqx9nk7f5fr4evl7dpoh6mff",macroId:"Collect",macroData:{strategy:"count",count:{mode:"static",value:3}}},{pos:{x:-636.6844042968751,y:-416.3564381178671},id:"bczfob5ymeh27ufao57egapl",inputConfig:{},nodeId:"Interval__bczfob5ymeh27ufao57egapl",macroId:"Interval",macroData:{time:{value:3e3,mode:"static"},value:{value:"\ud83e\udd16",mode:"static"}},style:{size:"small"}}],connections:[{from:{insId:"rh3ug7oqoze1rvn4k17kc556",pinId:"value"},to:{insId:"lqx9nk7f5fr4evl7dpoh6mff",pinId:"value"}},{from:{insId:"ApisCombination-69049ap",pinId:"value"},to:{insId:"lqx9nk7f5fr4evl7dpoh6mff",pinId:"value"}},{from:{insId:"ApisCombination-ts149e2",pinId:"value"},to:{insId:"lqx9nk7f5fr4evl7dpoh6mff",pinId:"value"}},{from:{insId:"bczfob5ymeh27ufao57egapl",pinId:"value"},to:{insId:"oeum6dqgsprbuef0p9s3b1ye",pinId:"value"}},{from:{insId:"lqx9nk7f5fr4evl7dpoh6mff",pinId:"list"},to:{insId:"__this",pinId:"output"}},{from:{insId:"oeum6dqgsprbuef0p9s3b1ye",pinId:"r3"},to:{insId:"ApisCombination-ts149e2",pinId:"__trigger"}},{from:{insId:"oeum6dqgsprbuef0p9s3b1ye",pinId:"r2"},to:{insId:"ApisCombination-69049ap",pinId:"__trigger"}},{from:{insId:"oeum6dqgsprbuef0p9s3b1ye",pinId:"r1"},to:{insId:"rh3ug7oqoze1rvn4k17kc556",pinId:"__trigger"}}],id:"Reactivity",inputs:{},outputs:{output:{type:"any",optional:!1,delayed:!1}},inputsPosition:{city:{x:-187.27285824815934,y:-14.13215209416181}},outputsPosition:{json:{x:-441.98276309426666,y:480.38719404276554},na:{x:-441.98276309426666,y:480.38719404276554},result:{x:-499.82438378976735,y:706.7650396699393},output:{x:-589.8591381755092,y:-61.23308179403},response:{x:-500.61566893722795,y:421.9045791861946}},completionOutputs:["output"]}}},tip:"Try changing the collection count and see the output change.",playgroundUrl:"https://play.flyde.dev/apps/5860e97d-8e3c-4751-baf2-367bcd768852"},{label:"Debounce/Throttle",fileName:"debounce.flyde",flow:N,tip:"Try changing the delay time of the debounce/throttle nodes.",playgroundUrl:"https://play.flyde.dev/apps/f35b90b9-9438-4805-a700-b7eb32c373b2"},{label:"HTTP Requests",fileName:"http.flyde",flow:O,tip:'Double click "Format Response" to see how it is implemented.',playgroundUrl:"https://play.flyde.dev/apps/c19f558e-e34e-4bad-a47a-58b37968a8b8"}],P=(0,o.forwardRef)((function(e,t){let{example:n,children:i,onChangeExample:r}=e;const a=n,[l,u]=o.useState([]),d=(0,o.useMemo)((()=>{const{newDeps:e,newNode:t}=_(a.flow.flow.node,c);return{initialFlow:{...a.flow.flow,node:t},dependencies:{...a.flow.dependencies,...e}}}),[a]),m=o.useRef(null),v=o.useCallback((e=>{u((t=>[...t,`[${(new Date).toLocaleTimeString()}] Output: ${e}`])),m.current&&(m.current.scrollTop=m.current.scrollHeight)}),[u]);return o.createElement("div",{className:"hero-example relative"},o.createElement("div",{className:"hero-example__tabs"},T.map((e=>o.createElement("div",{onClick:()=>r(e),className:(0,s.default)("file-tag",e===n&&"selected")},e.fileName)))),o.createElement("div",{className:"flow-wrapper"},o.createElement("div",{className:"loader-wrapper"},o.createElement(p.Loader,null)),o.createElement(j,{ref:t,flowProps:d,onLog:v,onCompleted:f.noop}),i),o.createElement("div",{className:"terminal-wrapper"},o.createElement("div",{className:"terminal-emulator",ref:m},l.length?l.map(((e,t)=>o.createElement("div",{key:t},e))):o.createElement("em",null,"Values sent to `output` will appear here once received."))))}));var D=n(49794);function k(){return o.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M21.9937 9.23411C21.9305 9.05119 21.8157 8.89053 21.663 8.77161C21.5104 8.65268 21.3265 8.5806 21.1337 8.56411L15.4437 7.73411L12.8937 2.56411C12.8118 2.39504 12.6839 2.25245 12.5248 2.15268C12.3656 2.05291 12.1815 2 11.9937 2C11.8058 2 11.6218 2.05291 11.4626 2.15268C11.3034 2.25245 11.1756 2.39504 11.0937 2.56411L8.54363 7.72411L2.85363 8.56411C2.66855 8.59041 2.49455 8.66807 2.35138 8.78826C2.2082 8.90846 2.10159 9.06638 2.04363 9.24411C1.99057 9.41778 1.98581 9.60265 2.02986 9.77875C2.0739 9.95495 2.16509 10.1159 2.29363 10.2442L6.42363 14.2442L5.42363 19.9241C5.38325 20.1125 5.39818 20.3086 5.46661 20.4887C5.53504 20.6688 5.65406 20.8254 5.80936 20.9395C5.96465 21.0535 6.1496 21.1203 6.34196 21.1318C6.53431 21.1433 6.72589 21.0989 6.89363 21.0041L11.9937 18.3341L17.0937 21.0041C17.234 21.0832 17.3925 21.1246 17.5537 21.1241C17.7655 21.1248 17.9721 21.0583 18.1437 20.9341C18.2988 20.8229 18.4189 20.6697 18.4898 20.4925C18.5607 20.3153 18.5794 20.1215 18.5437 19.9341L17.5437 14.2542L21.6737 10.2542C21.8181 10.1318 21.9248 9.97105 21.9814 9.79045C22.0381 9.60995 22.0423 9.41698 21.9937 9.23411ZM15.8437 13.2341C15.7279 13.3465 15.6411 13.4853 15.5906 13.6385C15.5401 13.7918 15.5274 13.955 15.5537 14.1142L16.2737 18.3141L12.5137 16.3142C12.3675 16.2419 12.2067 16.2042 12.0437 16.2042C11.8806 16.2042 11.7198 16.2419 11.5737 16.3142L7.81363 18.3141L8.53363 14.1142C8.55987 13.955 8.54719 13.7918 8.4967 13.6385C8.4462 13.4853 8.35937 13.3465 8.24363 13.2341L5.24363 10.2341L9.45363 9.62415C9.61563 9.60155 9.76963 9.53965 9.90213 9.44376C10.0347 9.34787 10.1416 9.22094 10.2137 9.07411L11.9937 5.26411L13.8737 9.08411C13.9457 9.23094 14.0527 9.35787 14.1852 9.45376C14.3177 9.54965 14.4717 9.61155 14.6337 9.63415L18.8437 10.2442L15.8437 13.2341Z",fill:"currentColor"}))}const M=[{preview:"Flexible & Powerful",title:"Flexible and Powerful",description:o.createElement(o.Fragment,null,o.createElement("p",null,"Built on a functional-reactive foundation, Flyde enables more than simple input/output flows. It supports everything you'd expect from a textual-based language; recursions, loops and conditionals.")),image:n(42016).Z,imageCaption:"Fibonacci sequence in Flyde - a recursive flow example.",id:"flexible-powerful"},{preview:"Visual Editor",title:"Reason About Programs in New Ways",image:n(61744).Z,imageCaption:"Visualize data flow and view data passing through nodes.",description:o.createElement(o.Fragment,null,o.createElement("p",null,"Unlock new ways to think about, and debug your programs. Have an always-correct diagram of your program."),o.createElement("p",null,"Flyde\u2019s flow-based, visual approach makes asynchronous and concurrent tasks simpler and intuitive.")),id:"visual-editor"},{preview:"Open Source",title:"Open Source and Transparent",description:o.createElement(o.Fragment,null,o.createElement("p",null,"In Flyde, nothing is hidden. From node implementation, to runtime code. Easily access the code behind each node in Flyde\u2019s standard library."),o.createElement("p",null,"Everything needed to run Flyde flows is"," ",o.createElement("strong",null,"open-source and MIT licensed."))),image:n(43033).Z,imageCaption:"Double click on nodes to jump to their implementation.",id:"open-source"},{preview:"Seamless Integration",title:"Integrates With Existing Workflows. Doesn\u2019t Replace them.",description:o.createElement(o.Fragment,null,o.createElement("p",null,"Create Flyde flows right from your IDE. Wrap existing TypeScript code in a Flyde node and use it in your flows. Run flows from existing TypeScript code, from arbitrary CLI scripts, to HTTP request handlers, and even front-end code."),o.createElement("p",null,"Flows can be ",o.createElement("strong",null,"version-controlled"),", and be part"," ",o.createElement("strong",null,"CI/CD")," pipelines, just like regular text-based code.")),image:n(39415).Z,imageCaption:"Flyde flows and TypeScript code live side by side.",id:"git-friendly"}];var V=n(42550),R=n(93641);const A=[{title:"Simplify Programming For Novice Developers and Non-Developer Technical Roles",content:o.createElement("div",null,o.createElement("p",null,"Whether you're a junior developer struggling with async operations, a sales engineer needing to prototype with APIs quickly, or a QA engineer setting up backend tests, Flyde is your solution. By converting complex coding tasks into visual, intuitive flows, Flyde saves time and demystifies coding challenges."," "),o.createElement("strong",null,"Start now by exploring the"," ",o.createElement(D.Z,{href:"https://play.flyde.dev"},"Playground"),"."))},{title:"Democratize Innovation by transforming your Codebase into a Low-Code Platform",content:o.createElement("div",null,o.createElement("p",null,"Open the door to broader team collaboration by integrating Flyde into your codebase. Product managers, data engineers, and other roles can now easily understand, contribute to, and innovate on your project, turning complex business logic into collaborative opportunities."),o.createElement("strong",null,"Learn how to integrate Flyde into existing code"," ",o.createElement(D.Z,{href:"https://www.flyde.dev/docs/integrate-flows/"},"here"),"."))},{title:"A New Way for Educators to Teach Real-World Programming",content:o.createElement("div",null,o.createElement("p",null,"Flyde presents a unique blend of the functional and reactive programming paradigms, coupled with a visual interface. This positions Flyde as a uniquely valuable tool in the educator's arsenal, complementing more traditional, yet impactful, projects like Scratch and Blockly."," "),o.createElement("strong",null,"If you\u2019re an educator looking to learn more, please reach out in on"," ",o.createElement(D.Z,{href:"/discord"},"Discord"),"."))}],L=0;function z(){const[e,t]=(0,o.useState)(new Set),[n,i]=o.useState(T[L]),r=o.useRef(null),l=(0,o.useCallback)((()=>{r.current?.runFlow(),t((e=>new Set([...e,n.fileName])))}),[n]);return o.createElement("div",{className:(0,s.default)("hero hero--primary",a.heroBanner)},o.createElement("div",{className:"container"},o.createElement("div",{className:"content-wrapper"},o.createElement("a",{className:"github-star",href:"https://www.github.com/flydelabs/flyde",target:"_blank"},o.createElement(k,null)," ",o.createElement("span",null,"Star us on GitHub")),o.createElement("h1",{className:"hero__title"},o.createElement("div",{className:"font-thin"},"Visual Programming."),o.createElement("div",null,"For Developers")),o.createElement("p",{className:"hero__subtitle"},"Open source, runs in"," ",o.createElement("a",{href:"https://marketplace.visualstudio.com/items?itemName=flyde.flyde-vscode",target:"_blank"},"VS Code"),", integrates with existing ",o.createElement("strong",null,"TypeScript")," code, browser and Node.js."),o.createElement("div",{className:"buttons-container"},o.createElement(D.Z,{className:"button button--primary button--lg ",href:"/docs"},"Documentation"),o.createElement(D.Z,{className:"button button--secondary button--lg example-btn",href:n.playgroundUrl},"Playground"))),o.createElement("div",{className:"example-container"},o.createElement(P,{onChangeExample:e=>i(e),example:n,key:n.label,ref:r},o.createElement(V.z,{onClick:l,className:"run-flow-btn",icon:o.createElement(R.s,null)},"Run")),o.createElement("div",{className:(0,s.default)("example-tip",{hidden:!e.has(n.fileName)})},o.createElement("strong",null,"Challenge:"),"\xa0",n.tip.replace(/^[A-Z]/,(e=>e.toLowerCase()))," ","\xa0",o.createElement("a",{href:n.playgroundUrl,className:"open- button button--sm button--secondary",target:"_blank"},"Open in Playground")))))}function q(){const{siteConfig:e}=(0,i.Z)();return(0,o.useEffect)((()=>{document.querySelectorAll('a[href^="#"]').forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();let t=this.getAttribute("href"),n=document.querySelector(t);n&&window.scrollTo({top:n.offsetTop-100,behavior:"smooth"})}))}))}),[]),o.createElement(r.Z,{description:"Flyde, open-source visual programming language. Runs in the IDE, integrates with existing TypeScript code, browser and Node.js."},o.createElement(z,null),o.createElement("section",{className:"features-strip"},M.map((e=>o.createElement("div",{className:"feature-highlight",key:e.title},o.createElement("a",{href:`#${e.id}`},e.preview))))),M.map((e=>o.createElement("section",{className:"feature-strip",id:e.id,key:e.id},o.createElement("div",{className:"feature-strip-inner"},o.createElement("div",{className:"image-container"},o.createElement("img",{src:e.image}),o.createElement("div",{className:"image-caption"},e.imageCaption)),o.createElement("div",{className:"content-container"},o.createElement("h3",null,e.title),o.createElement("div",{className:"feature-description"},e.description)))))),o.createElement("section",{className:"use-cases"},o.createElement("h2",null,"Use Cases"),A.map((e=>o.createElement("div",{className:"use-case",key:e.title},o.createElement("div",{className:"use-case-inner"},o.createElement("h3",null,e.title),o.createElement("div",{className:"use-case-description"},e.content)))))))}},85721:(e,t,n)=>{var o={"./af":47654,"./af.js":47654,"./ar":61325,"./ar-dz":98344,"./ar-dz.js":98344,"./ar-kw":26230,"./ar-kw.js":26230,"./ar-ly":42524,"./ar-ly.js":42524,"./ar-ma":44119,"./ar-ma.js":44119,"./ar-sa":82625,"./ar-sa.js":82625,"./ar-tn":42182,"./ar-tn.js":42182,"./ar.js":61325,"./az":37093,"./az.js":37093,"./be":32721,"./be.js":32721,"./bg":59919,"./bg.js":59919,"./bm":95594,"./bm.js":95594,"./bn":563,"./bn-bd":41757,"./bn-bd.js":41757,"./bn.js":563,"./bo":73211,"./bo.js":73211,"./br":87438,"./br.js":87438,"./bs":83662,"./bs.js":83662,"./ca":61196,"./ca.js":61196,"./cs":5841,"./cs.js":5841,"./cv":85251,"./cv.js":85251,"./cy":24512,"./cy.js":24512,"./da":37539,"./da.js":37539,"./de":5059,"./de-at":53853,"./de-at.js":53853,"./de-ch":99378,"./de-ch.js":99378,"./de.js":5059,"./dv":91454,"./dv.js":91454,"./el":39651,"./el.js":39651,"./en-au":87953,"./en-au.js":87953,"./en-ca":98193,"./en-ca.js":98193,"./en-gb":61980,"./en-gb.js":61980,"./en-ie":14050,"./en-ie.js":14050,"./en-il":6502,"./en-il.js":6502,"./en-in":555,"./en-in.js":555,"./en-nz":11372,"./en-nz.js":11372,"./en-sg":26568,"./en-sg.js":26568,"./eo":69533,"./eo.js":69533,"./es":68327,"./es-do":17620,"./es-do.js":17620,"./es-mx":96467,"./es-mx.js":96467,"./es-us":83272,"./es-us.js":83272,"./es.js":68327,"./et":68523,"./et.js":68523,"./eu":19066,"./eu.js":19066,"./fa":59087,"./fa.js":59087,"./fi":96443,"./fi.js":96443,"./fil":93979,"./fil.js":93979,"./fo":90383,"./fo.js":90383,"./fr":56327,"./fr-ca":25610,"./fr-ca.js":25610,"./fr-ch":97274,"./fr-ch.js":97274,"./fr.js":56327,"./fy":67442,"./fy.js":67442,"./ga":44291,"./ga.js":44291,"./gd":77342,"./gd.js":77342,"./gl":96248,"./gl.js":96248,"./gom-deva":21404,"./gom-deva.js":21404,"./gom-latn":20833,"./gom-latn.js":20833,"./gu":9122,"./gu.js":9122,"./he":74623,"./he.js":74623,"./hi":60364,"./hi.js":60364,"./hr":30860,"./hr.js":30860,"./hu":70441,"./hu.js":70441,"./hy-am":90425,"./hy-am.js":90425,"./id":29672,"./id.js":29672,"./is":96150,"./is.js":96150,"./it":27852,"./it-ch":55603,"./it-ch.js":55603,"./it.js":27852,"./ja":16465,"./ja.js":16465,"./jv":20120,"./jv.js":20120,"./ka":87245,"./ka.js":87245,"./kk":21479,"./kk.js":21479,"./km":82735,"./km.js":82735,"./kn":63060,"./kn.js":63060,"./ko":85020,"./ko.js":85020,"./ku":90582,"./ku.js":90582,"./ky":34950,"./ky.js":34950,"./lb":94201,"./lb.js":94201,"./lo":87894,"./lo.js":87894,"./lt":70120,"./lt.js":70120,"./lv":4265,"./lv.js":4265,"./me":14030,"./me.js":14030,"./mi":9463,"./mi.js":9463,"./mk":25898,"./mk.js":25898,"./ml":64233,"./ml.js":64233,"./mn":47156,"./mn.js":47156,"./mr":34479,"./mr.js":34479,"./ms":24691,"./ms-my":6456,"./ms-my.js":6456,"./ms.js":24691,"./mt":81789,"./mt.js":81789,"./my":37452,"./my.js":37452,"./nb":91170,"./nb.js":91170,"./ne":87529,"./ne.js":87529,"./nl":81776,"./nl-be":24455,"./nl-be.js":24455,"./nl.js":81776,"./nn":34705,"./nn.js":34705,"./oc-lnc":36139,"./oc-lnc.js":36139,"./pa-in":17960,"./pa-in.js":17960,"./pl":1899,"./pl.js":1899,"./pt":31670,"./pt-br":29159,"./pt-br.js":29159,"./pt.js":31670,"./ro":55115,"./ro.js":55115,"./ru":45149,"./ru.js":45149,"./sd":81231,"./sd.js":81231,"./se":35397,"./se.js":35397,"./si":99786,"./si.js":99786,"./sk":39383,"./sk.js":39383,"./sl":68691,"./sl.js":68691,"./sq":34826,"./sq.js":34826,"./sr":40080,"./sr-cyrl":75673,"./sr-cyrl.js":75673,"./sr.js":40080,"./ss":54309,"./ss.js":54309,"./sv":52245,"./sv.js":52245,"./sw":8967,"./sw.js":8967,"./ta":10454,"./ta.js":10454,"./te":35204,"./te.js":35204,"./tet":81571,"./tet.js":81571,"./tg":15737,"./tg.js":15737,"./th":41786,"./th.js":41786,"./tk":50511,"./tk.js":50511,"./tl-ph":14828,"./tl-ph.js":14828,"./tlh":62422,"./tlh.js":62422,"./tr":97047,"./tr.js":97047,"./tzl":90792,"./tzl.js":90792,"./tzm":67730,"./tzm-latn":59963,"./tzm-latn.js":59963,"./tzm.js":67730,"./ug-cn":42535,"./ug-cn.js":42535,"./uk":33151,"./uk.js":33151,"./ur":22750,"./ur.js":22750,"./uz":61914,"./uz-latn":60231,"./uz-latn.js":60231,"./uz.js":61914,"./vi":55517,"./vi.js":55517,"./x-pseudo":64078,"./x-pseudo.js":64078,"./yo":70046,"./yo.js":70046,"./zh-cn":81832,"./zh-cn.js":81832,"./zh-hk":90953,"./zh-hk.js":90953,"./zh-mo":38236,"./zh-mo.js":38236,"./zh-tw":71001,"./zh-tw.js":71001};function i(e){var t=r(e);return n(t)}function r(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}i.keys=function(){return Object.keys(o)},i.resolve=r,e.exports=i,i.id=85721},42016:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o=n.p+"assets/images/fibo-cdbc5936ed3856df4928019564ef82dd.gif"},39415:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o=n.p+"assets/images/integrates-cd9b83d7c4fb96804f2ff6edb5e19fcd.gif"},43033:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o=n.p+"assets/images/transparent-25618eaa2d7966dceddf11fb5f2c1108.gif"},61744:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o=n.p+"assets/images/visual-b1b598cd76a44cfb7ae65dec6aeaaa41.gif"}}]);